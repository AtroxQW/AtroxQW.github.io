<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>IDEAä½¿ç”¨ä¸è¸©å‘</title>
    <link href="/posts/2021/02/06/IDEA%E4%BD%BF%E7%94%A8%E4%B8%8E%E8%B8%A9%E5%9D%91/"/>
    <url>/posts/2021/02/06/IDEA%E4%BD%BF%E7%94%A8%E4%B8%8E%E8%B8%A9%E5%9D%91/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ­¤æ–‡è®°å½•ä¸€äº›IDEAçš„å¸¸ç”¨æ“ä½œä»¥åŠé‡åˆ°çš„ä¸€äº›é—®é¢˜ã€‚</p></blockquote><h2 id="é—®é¢˜"><a class="header-anchor" href="#é—®é¢˜">Â¶</a>é—®é¢˜</h2><h3 id="1-IDEAä¸­junitå•å…ƒæµ‹è¯•Scannerè¯»å–æ•°æ®æ— æ•ˆ"><a class="header-anchor" href="#1-IDEAä¸­junitå•å…ƒæµ‹è¯•Scannerè¯»å–æ•°æ®æ— æ•ˆ">Â¶</a>1. IDEAä¸­junitå•å…ƒæµ‹è¯•Scannerè¯»å–æ•°æ®æ— æ•ˆ</h3><p>åœ¨ç¼–ç¨‹æ—¶å¼•å…¥å•å…ƒæµ‹è¯•ï¼Œå¹¶åœ¨å…¶ä¸­ä½¿ç”¨Scannerï¼Œè¿è¡Œåä¼šå‡ºç°ä¸€ç›´è·‘ï¼Œè¯»å–ä¸äº†æ•°æ®çš„é—®é¢˜ã€‚</p><p><strong>æ–¹æ¡ˆ1</strong>ï¼šä½¿ç”¨mainæ–¹æ³•ä»£æ›¿</p><p><strong>æ–¹æ¡ˆäºŒ</strong>ï¼šåœ¨IDEAä¸­ç‚¹å‡»help-&gt;Edit Custom Vm Optionsâ€¦ï¼Œè¿›å…¥ã€‚</p><p><img src="/posts/2021/02/06/IDEA%E4%BD%BF%E7%94%A8%E4%B8%8E%E8%B8%A9%E5%9D%91/1.png" alt="Helpé€‰é¡¹"></p><p>â€‹åœ¨æœ€åä¸€è¡ŒåŠ å…¥: <code>Deditable.java.test.console=true</code></p><p>â€‹<img src="/posts/2021/02/06/IDEA%E4%BD%BF%E7%94%A8%E4%B8%8E%E8%B8%A9%E5%9D%91/2.png" alt="é…ç½®"></p><h3 id="2-çˆ¶å·¥ç¨‹-dependencyManagement-æ— æ³•å¯¼å…¥ä¾èµ–"><a class="header-anchor" href="#2-çˆ¶å·¥ç¨‹-dependencyManagement-æ— æ³•å¯¼å…¥ä¾èµ–">Â¶</a>2.çˆ¶å·¥ç¨‹<code>&lt;dependencyManagement&gt;</code>æ— æ³•å¯¼å…¥ä¾èµ–</h3><p>å½“ä½¿ç”¨SpringCloudçš„çˆ¶å·¥ç¨‹å¯¼å…¥ä¾èµ–æ—¶ï¼Œå‘ç°jaråŒ…æ— æ³•ä¸‹è½½ä¸‹æ¥åˆ°æœ¬åœ°åº“ã€‚è€Œä¸”pomæ–‡ä»¶æŠ¥çº¢</p><ul><li>åŸå› ï¼š<code>&lt;dependencyManagement&gt;</code>åªæ˜¯ç”¨äºçˆ¶å·¥ç¨‹ç®¡ç†ä¾èµ–çš„ï¼Œç”¨äºç»Ÿä¸€ç®¡ç†jarçš„ç‰ˆæœ¬ã€‚å­å·¥ç¨‹éœ€è¦ä½¿ç”¨ç›¸åº”çš„jarå¼•å…¥ä¾èµ–å³å¯ï¼Œè¿™æ—¶æ‰çœŸæ­£çš„ä½¿ç”¨åˆ°ç›¸åº”jarï¼Œæ‰ä¼šå»ä¸‹è½½ã€‚</li><li>æ–¹æ¡ˆï¼šå…ˆå°†<code>&lt;dependencyManagement&gt;</code>åˆ é™¤ï¼Œä¸‹è½½jaråŒ…ï¼Œä¸‹è½½å®Œæˆååœ¨é‡æ–°ä½¿ç”¨<code>&lt;dependencyManagement&gt;</code></li></ul><h2 id="æ“ä½œ"><a class="header-anchor" href="#æ“ä½œ">Â¶</a>æ“ä½œ</h2><h3 id="1-å¿«æ·é”®"><a class="header-anchor" href="#1-å¿«æ·é”®">Â¶</a>1. å¿«æ·é”®</h3><table><thead><tr><th>æ•ˆæœ</th><th>å¿«æ·é”®</th></tr></thead><tbody><tr><td></td><td></td></tr><tr><td>è°ƒå‡ºtry-catchç»“æ„</td><td>Ctrl + Alt + T</td></tr><tr><td></td><td></td></tr></tbody></table>]]></content>
    
    
    
    <tags>
      
      <tag>IDEA</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®ç»“æ„ï¼šæ ˆ</title>
    <link href="/posts/2021/02/06/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E6%A0%88/"/>
    <url>/posts/2021/02/06/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E6%A0%88/</url>
    
    <content type="html"><![CDATA[<h2 id="æ ˆ"><a class="header-anchor" href="#æ ˆ">Â¶</a>æ ˆ</h2><h3 id="ğŸ²æ ˆçš„ä»‹ç»"><a class="header-anchor" href="#ğŸ²æ ˆçš„ä»‹ç»">Â¶</a>ğŸ²æ ˆçš„ä»‹ç»</h3><ul><li><p>æ ˆçš„è‹±æ–‡æ˜¯ stackã€‚</p></li><li><p>æ ˆæ˜¯ä¸€ä¸ªå…ˆå…¥åå‡ºï¼ˆFILO-First In Last Outï¼‰çš„æœ‰åºåˆ—è¡¨ã€‚</p></li><li><p>æ ˆæ˜¯<strong>é™åˆ¶çº¿æ€§è¡¨ä¸­å…ƒç´ çš„æ’å…¥å’Œåˆ é™¤åªèƒ½åœ¨çº¿æ€§è¡¨åŒä¸€ç«¯è¿›è¡Œ</strong>çš„ä¸€ç§ç‰¹æ®Šçº¿æ€§è¡¨ã€‚</p></li><li><p>å…è®¸å…ƒç´ æ’å…¥å’Œåˆ é™¤çš„ä¸€æ®µï¼Œä¸º<strong>æ ˆé¡¶</strong>ï¼Œå¦ä¸€ç«¯æ˜¯å›ºå®šçš„ï¼Œä¸ºæ ˆåº•ã€‚</p></li><li><p>æ ¹æ®æ ˆçš„å®šä¹‰ï¼Œæœ€å…ˆæ”¾å…¥æ ˆä¸­çš„å…ƒç´ åœ¨æ ˆåº•ï¼Œæœ€åæ”¾å…¥æ ˆä¸­çš„å…ƒç´ åœ¨æ ˆé¡¶ã€‚</p></li><li><p>æœ€åæ”¾å…¥æ ˆä¸­çš„å…ƒç´ ä¼šè¢«æœ€å…ˆåˆ é™¤ï¼Œæœ€å…ˆæ”¾å…¥æ ˆä¸­çš„å…ƒç´ ä¼šè¢«æœ€ååˆ é™¤ã€‚</p></li><li><p>å…¥æ ˆå‡ºæ ˆæ¼”ç¤ºå›¾</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E6%A0%88/1.jpg" alt="æ ˆ"></p></li></ul><h3 id="ğŸ²æ ˆçš„åº”ç”¨åœºæ™¯"><a class="header-anchor" href="#ğŸ²æ ˆçš„åº”ç”¨åœºæ™¯">Â¶</a>ğŸ²æ ˆçš„åº”ç”¨åœºæ™¯</h3><ol><li><strong>å­ç¨‹åºçš„è°ƒç”¨</strong>ï¼šåœ¨è·³å¾€å­ç¨‹åºå‰ï¼Œä¼šå…ˆå°†ä¸‹ä¸ªæŒ‡ä»¤çš„åœ°å€å­˜åˆ°å †æ ˆï¼ŒçŸ¥é“å­ç¨‹åºæ‰§è¡Œå®Œåå†å°†åœ°å€å–å‡ºï¼Œä»¥å›åˆ°åŸæ¥çš„ç¨‹åºä¸­ã€‚</li><li><strong>å¤„ç†é€’å½’è°ƒç”¨</strong>ï¼šå’Œå­ç¨‹åºçš„è°ƒç”¨ç±»ä¼¼ï¼Œåªæ˜¯é™¤äº†å‚¨å­˜ä¸‹ä¸€ä¸ªæŒ‡ä»¤çš„åœ°å€å¤–ï¼Œä¹Ÿå°†å‚æ•°ã€åŒºåŸŸå˜é‡ç­‰æ•°æ®å­˜å…¥å †æ ˆä¸­ã€‚</li><li>è¡¨è¾¾å¼çš„è½¬æ¢ä¸æ±‚å€¼ã€‚</li><li>äºŒå‰æ ‘çš„éå†ã€‚</li><li>å›¾å½¢çš„æ·±åº¦ä¼˜å…ˆæœç´¢ã€‚</li></ol><h3 id="ğŸ²å®ç°æ ˆ"><a class="header-anchor" href="#ğŸ²å®ç°æ ˆ">Â¶</a>ğŸ²å®ç°æ ˆ</h3><h4 id="âš¡ï¸æ€è·¯ä¸€ï¼šæ•°ç»„æ¨¡æ‹Ÿæ ˆ"><a class="header-anchor" href="#âš¡ï¸æ€è·¯ä¸€ï¼šæ•°ç»„æ¨¡æ‹Ÿæ ˆ">Â¶</a>âš¡ï¸æ€è·¯ä¸€ï¼šæ•°ç»„æ¨¡æ‹Ÿæ ˆ</h4><ol><li>ä½¿ç”¨æ•°ç»„æ¥æ¨¡æ‹Ÿæ ˆã€‚</li><li>å®šä¹‰ä¸€ä¸ª<code>top</code>è¡¨ç¤ºæ ˆé¡¶ï¼Œ<code>bottom</code>è¡¨ç¤ºæ ˆåº•ï¼ŒäºŒè€…éƒ½åˆå§‹åŒ–ä¸º-1ã€‚</li><li>å…¥æ ˆæ“ä½œï¼š<code>stack[++top] = data</code>ã€‚</li><li>å‡ºæ ˆæ“ä½œï¼š<code>int value = stack[top--];</code>ã€‚</li></ol><h4 id="âš¡ï¸ä»£ç "><a class="header-anchor" href="#âš¡ï¸ä»£ç ">Â¶</a>âš¡ï¸ä»£ç </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ•°ç»„æ¨¡æ‹Ÿæ ˆ</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Aatrox</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArrayStack</span> </span>&#123;<br><br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> stackSize;<br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span>[] stack;<br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> top = -<span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> bottom = -<span class="hljs-number">1</span>;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ„é€ å™¨</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> stackSize æ ˆçš„å¤§å°</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ArrayStack</span><span class="hljs-params">(<span class="hljs-keyword">int</span> stackSize)</span> </span>&#123;<br>    <span class="hljs-keyword">this</span>.stackSize = stackSize;<br>    stack = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[stackSize];<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * åˆ¤æ–­æ ˆæ»¡</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span> æ˜¯å¦æ ˆæ»¡</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isFull</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> top == stackSize - <span class="hljs-number">1</span>;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * åˆ¤æ–­æ ˆç©º</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span> æ˜¯å¦æ ˆç©º</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isEmpty</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> top == bottom;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * å…¥æ ˆ</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> data å…¥æ ˆå…ƒç´ </span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">push</span><span class="hljs-params">(<span class="hljs-keyword">int</span> data)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (isFull()) &#123;<br>      System.out.println(<span class="hljs-string">&quot;æ ˆæ»¡&quot;</span>);<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    stack[++top] = data;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * å‡ºæ ˆ</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span> å‡ºæ ˆå…ƒç´ </span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">pop</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(<span class="hljs-string">&quot;æ ˆç©ºï¼Œæ— æ•°æ®&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> stack[top--];<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ‰“å°æ ˆå†…å®¹ï¼Œä»æ ˆé¡¶åˆ°æ ˆåº•</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">printStack</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>      System.out.println(<span class="hljs-string">&quot;æ ˆç©ºï¼Œæ— æ•°æ®&quot;</span>);<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = top; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>      System.out.printf(<span class="hljs-string">&quot;stack[%d] = %d\n&quot;</span>, i, stack[i]);<br>    &#125;<br><br>  &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="âš¡ï¸æµ‹è¯•"><a class="header-anchor" href="#âš¡ï¸æµ‹è¯•">Â¶</a><strong>âš¡ï¸æµ‹è¯•</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArrayStackTest</span> </span>&#123;<br><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>    ArrayStack stack = <span class="hljs-keyword">new</span> ArrayStack(<span class="hljs-number">4</span>);<br>    String option = <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">boolean</span> loop = <span class="hljs-keyword">true</span>;<br>    Scanner scanner = <span class="hljs-keyword">new</span> Scanner(System.in);<br>    <span class="hljs-keyword">while</span> (loop) &#123;<br>      System.out.println(<span class="hljs-string">&quot;-------èœå•--------&quot;</span>);<br>      System.out.println(<span class="hljs-string">&quot;showï¼šæ˜¾ç¤ºæ ˆ&quot;</span>);<br>      System.out.println(<span class="hljs-string">&quot;pushï¼šæ•°æ®å…¥æ ˆ&quot;</span>);<br>      System.out.println(<span class="hljs-string">&quot;popï¼šæ•°æ®å‡ºæ ˆ&quot;</span>);<br>      System.out.println(<span class="hljs-string">&quot;exitï¼šé€€å‡ºç¨‹åº&quot;</span>);<br>      System.out.println(<span class="hljs-string">&quot;------------------&quot;</span>);<br>      System.out.println(<span class="hljs-string">&quot;è¯·ä½œå‡ºé€‰é¡¹ï¼š&quot;</span>);<br>      option = scanner.next();<br>      <span class="hljs-keyword">switch</span> (option) &#123;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;show&quot;</span>:<br>          stack.printStack();<br>          <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;push&quot;</span>:<br>          System.out.println(<span class="hljs-string">&quot;è¯·è¾“å…¥ä¸€ä¸ªæ•°æ®&quot;</span>);<br>          <span class="hljs-keyword">int</span> value = scanner.nextInt();<br>          stack.push(value);<br>          <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span>  <span class="hljs-string">&quot;pop&quot;</span>:<br>          <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">int</span> res = stack.pop();<br>            System.out.println(<span class="hljs-string">&quot;å‡ºæ ˆå…ƒç´ ä¸º&quot;</span> + res);<br>          &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            System.out.println(e.getMessage());<br>          &#125;<br>          <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;exit&quot;</span>:<br>          scanner.close();<br>          loop = <span class="hljs-keyword">false</span>;<br>          <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">default</span>:<br>          System.out.println(<span class="hljs-string">&quot;æ— æ•ˆé€‰é¡¹&quot;</span>);<br>          <span class="hljs-keyword">break</span>;<br>      &#125;<br>    &#125;<br>    System.out.println(<span class="hljs-string">&quot;ç¨‹åºå·²é€€å‡º&quot;</span>);<br>  &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="âš¡ï¸ç»“æœ"><a class="header-anchor" href="#âš¡ï¸ç»“æœ">Â¶</a>âš¡ï¸ç»“æœ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs java">-------èœå•--------<br>showï¼šæ˜¾ç¤ºæ ˆ<br>pushï¼šæ•°æ®å…¥æ ˆ<br>popï¼šæ•°æ®å‡ºæ ˆ<br>exitï¼šé€€å‡ºç¨‹åº<br>------------------<br>è¯·ä½œå‡ºé€‰é¡¹ï¼š<br>push<br>è¯·è¾“å…¥ä¸€ä¸ªæ•°æ®<br><span class="hljs-number">1</span><br>-------èœå•--------<br>showï¼šæ˜¾ç¤ºæ ˆ<br>pushï¼šæ•°æ®å…¥æ ˆ<br>popï¼šæ•°æ®å‡ºæ ˆ<br>exitï¼šé€€å‡ºç¨‹åº<br>------------------<br>è¯·ä½œå‡ºé€‰é¡¹ï¼š<br>push<br>è¯·è¾“å…¥ä¸€ä¸ªæ•°æ®<br><span class="hljs-number">2</span><br>-------èœå•--------<br>showï¼šæ˜¾ç¤ºæ ˆ<br>pushï¼šæ•°æ®å…¥æ ˆ<br>popï¼šæ•°æ®å‡ºæ ˆ<br>exitï¼šé€€å‡ºç¨‹åº<br>------------------<br>è¯·ä½œå‡ºé€‰é¡¹ï¼š<br>push<br>è¯·è¾“å…¥ä¸€ä¸ªæ•°æ®<br><span class="hljs-number">3</span><br>-------èœå•--------<br>showï¼šæ˜¾ç¤ºæ ˆ<br>pushï¼šæ•°æ®å…¥æ ˆ<br>popï¼šæ•°æ®å‡ºæ ˆ<br>exitï¼šé€€å‡ºç¨‹åº<br>------------------<br>è¯·ä½œå‡ºé€‰é¡¹ï¼š<br>push<br>è¯·è¾“å…¥ä¸€ä¸ªæ•°æ®<br><span class="hljs-number">4</span><br>-------èœå•--------<br>showï¼šæ˜¾ç¤ºæ ˆ<br>pushï¼šæ•°æ®å…¥æ ˆ<br>popï¼šæ•°æ®å‡ºæ ˆ<br>exitï¼šé€€å‡ºç¨‹åº<br>------------------<br>è¯·ä½œå‡ºé€‰é¡¹ï¼š<br>show<br>stack[<span class="hljs-number">3</span>] = <span class="hljs-number">4</span><br>stack[<span class="hljs-number">2</span>] = <span class="hljs-number">3</span><br>stack[<span class="hljs-number">1</span>] = <span class="hljs-number">2</span><br>stack[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br>-------èœå•--------<br>showï¼šæ˜¾ç¤ºæ ˆ<br>pushï¼šæ•°æ®å…¥æ ˆ<br>popï¼šæ•°æ®å‡ºæ ˆ<br>exitï¼šé€€å‡ºç¨‹åº<br>------------------<br>è¯·ä½œå‡ºé€‰é¡¹ï¼š<br>pop<br>å‡ºæ ˆå…ƒç´ ä¸º<span class="hljs-number">4</span><br>-------èœå•--------<br>showï¼šæ˜¾ç¤ºæ ˆ<br>pushï¼šæ•°æ®å…¥æ ˆ<br>popï¼šæ•°æ®å‡ºæ ˆ<br>exitï¼šé€€å‡ºç¨‹åº<br>------------------<br>è¯·ä½œå‡ºé€‰é¡¹ï¼š<br>exit<br>ç¨‹åºå·²é€€å‡º<br></code></pre></td></tr></table></figure><h4 id="âš¡ï¸æ€è·¯äºŒï¼šé“¾è¡¨æ¨¡æ‹Ÿæ ˆ"><a class="header-anchor" href="#âš¡ï¸æ€è·¯äºŒï¼šé“¾è¡¨æ¨¡æ‹Ÿæ ˆ">Â¶</a>âš¡ï¸æ€è·¯äºŒï¼šé“¾è¡¨æ¨¡æ‹Ÿæ ˆ</h4><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E6%A0%88/2.jpg" alt="é“¾æ ˆ"></p><ol><li><p>ä½¿ç”¨å•é“¾è¡¨æ¨¡æ‹Ÿæ ˆ</p></li><li><p>å®šä¹‰é“¾æ ˆèŠ‚ç‚¹<code>StackNode</code>ï¼Œå±æ€§ä¸ºæ•°æ®åŸŸ<code>data</code>å’ŒæŒ‡é’ˆåŸŸ<code>next</code>ã€‚</p></li><li><p>å®šä¹‰å¸¦æœ‰å¤´ç»“ç‚¹<code>head</code>çš„é“¾æ ˆ<code>LinkedStack</code>ï¼Œå¸¦æœ‰å±æ€§<code>stackSize</code>æ ˆå®¹é‡ã€‚</p></li><li><p><code>head</code>çš„<code>next</code>æ°¸è¿œæŒ‡å‘<code>top</code>ã€‚</p></li><li><p>åˆ¤ç©ºï¼š<code>head.next == null</code></p></li><li><p>åˆ¤æ»¡ï¼š<code>length() == stackSize</code></p></li><li><p>é•¿åº¦ï¼š<code>length()</code>æ–¹æ³•ä¸ºä»å¤´ç»“ç‚¹ä¸‹ä¸€ä¸ªéå†ï¼Œç›´åˆ°åˆ°è¾¾æ ˆåº•</p></li><li><p>å…¥æ ˆï¼š<code>head.next = newNode; newNode.next = top; top = newNode</code>ï¼Œ<code>top</code>æ°¸è¿œä¸ºæœ€æ–°æ·»åŠ çš„é‚£ä¸ªå…ƒç´ ï¼Œ<mark>ä½†æ˜¯åœ¨é“¾è¡¨çš„æœ€åï¼Œä¼šç•™ä¸‹ä¸€å¼€å§‹çš„<code>dataä¸º-1</code>çš„è¡¨ç¤º<code>top</code>çš„èŠ‚ç‚¹ã€‚</mark></p></li><li><p>å‡ºæ ˆï¼š<code>int value = head.next.data; head.next = head.next.next;</code></p></li></ol><h4 id="âš¡ï¸ä»£ç -v2"><a class="header-anchor" href="#âš¡ï¸ä»£ç -v2">Â¶</a>âš¡ï¸ä»£ç </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Aatrox</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span> é“¾æ ˆçš„å®ç°</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@create</span> 2021-02-06 16:22</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LinkedStack</span> </span>&#123;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * å¤´ç»“ç‚¹</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-keyword">private</span> StackNode head = <span class="hljs-keyword">new</span> StackNode(-<span class="hljs-number">1</span>);<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ ˆé¡¶</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-keyword">private</span> StackNode top = <span class="hljs-keyword">new</span> StackNode(-<span class="hljs-number">1</span>);<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ ˆå®¹é‡</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> stackSize;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ„é€ å™¨</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> stackSize æ ˆå®¹é‡</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">LinkedStack</span><span class="hljs-params">(<span class="hljs-keyword">int</span> stackSize)</span> </span>&#123;<br>    <span class="hljs-keyword">this</span>.stackSize = stackSize;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * å…¥æ ˆ</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> data è¦å…¥æ ˆçš„å…ƒç´ </span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">push</span><span class="hljs-params">(<span class="hljs-keyword">int</span> data)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (isFull()) &#123;<br>      System.out.println(<span class="hljs-string">&quot;æ ˆæ»¡&quot;</span>);<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    StackNode newNode = <span class="hljs-keyword">new</span> StackNode(data);<br>    head.next = newNode;<br>    newNode.next = top;<br>    top = newNode;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * å‡ºæ ˆ</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span> å‡ºæ ˆå…ƒç´ </span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">pop</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(<span class="hljs-string">&quot;æ ˆç©ºï¼Œæ— æ³•å‡ºæ ˆ&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">int</span> value = head.next.data;<br>    head.next = head.next.next;<br>    <span class="hljs-keyword">return</span> value;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * åˆ¤æ–­æ ˆç©º</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span> æ˜¯å¦æ ˆç©º</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isEmpty</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> head.next == <span class="hljs-keyword">null</span>;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * åˆ¤æ–­æ ˆæ»¡</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span> æ˜¯å¦æ ˆæ»¡</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isFull</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> length() == stackSize;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * è·å¾—é“¾æ ˆé•¿åº¦</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span> é“¾æ ˆé•¿åº¦</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">length</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (head.next == <span class="hljs-keyword">null</span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">int</span> length = <span class="hljs-number">0</span>;<br>    StackNode curNode = head.next;<br>    <span class="hljs-keyword">while</span> (curNode.next != <span class="hljs-keyword">null</span>) &#123;<br>      length++;<br>      curNode = curNode.next;<br>    &#125;<br>    <span class="hljs-keyword">return</span> length;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ‰“å°é“¾æ ˆ</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">printStack</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>      System.out.println(<span class="hljs-string">&quot;æ ˆç©ºï¼Œæ— æ•°æ®&quot;</span>);<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    StackNode curNode = head.next;<br>    <span class="hljs-keyword">int</span> i = length();<br>    <span class="hljs-keyword">while</span> (curNode.next != <span class="hljs-keyword">null</span>) &#123;<br>      System.out.printf(<span class="hljs-string">&quot;stack[%d] = %d\n&quot;</span>, i - <span class="hljs-number">1</span>, curNode.data);<br>      curNode = curNode.next;<br>      i--;<br>    &#125;<br>  &#125;<br><br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * é“¾æ ˆèŠ‚ç‚¹</span><br><span class="hljs-comment"> */</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StackNode</span> </span>&#123;<br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> data;<br>  <span class="hljs-keyword">public</span> StackNode next;<br><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">StackNode</span><span class="hljs-params">(<span class="hljs-keyword">int</span> data)</span> </span>&#123;<br>    <span class="hljs-keyword">this</span>.data = data;<br>  &#125;<br><br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;StackNode&#123;&quot;</span> +<br>            <span class="hljs-string">&quot;data=&quot;</span> + data +<br>            <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="âš¡ï¸æµ‹è¯•-v2"><a class="header-anchor" href="#âš¡ï¸æµ‹è¯•-v2">Â¶</a>âš¡ï¸æµ‹è¯•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Aatrox</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span> é“¾æ ˆæµ‹è¯•</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@create</span> 2021-02-06 16:46</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LinkedStackTest</span> </span>&#123;<br><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>    LinkedStack stack = <span class="hljs-keyword">new</span> LinkedStack(<span class="hljs-number">4</span>);<br>    String option = <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">boolean</span> loop = <span class="hljs-keyword">true</span>;<br>    Scanner scanner = <span class="hljs-keyword">new</span> Scanner(System.in);<br>    <span class="hljs-keyword">while</span> (loop) &#123;<br>      System.out.println(<span class="hljs-string">&quot;-------èœå•--------&quot;</span>);<br>      System.out.println(<span class="hljs-string">&quot;showï¼šæ˜¾ç¤ºæ ˆ&quot;</span>);<br>      System.out.println(<span class="hljs-string">&quot;pushï¼šæ•°æ®å…¥æ ˆ&quot;</span>);<br>      System.out.println(<span class="hljs-string">&quot;popï¼šæ•°æ®å‡ºæ ˆ&quot;</span>);<br>      System.out.println(<span class="hljs-string">&quot;exitï¼šé€€å‡ºç¨‹åº&quot;</span>);<br>      System.out.println(<span class="hljs-string">&quot;------------------&quot;</span>);<br>      System.out.println(<span class="hljs-string">&quot;è¯·ä½œå‡ºé€‰é¡¹ï¼š&quot;</span>);<br>      option = scanner.next();<br>      <span class="hljs-keyword">switch</span> (option) &#123;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;show&quot;</span>:<br>          stack.printStack();<br>          <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;push&quot;</span>:<br>          System.out.println(<span class="hljs-string">&quot;è¯·è¾“å…¥ä¸€ä¸ªæ•°æ®&quot;</span>);<br>          <span class="hljs-keyword">int</span> value = scanner.nextInt();<br>          stack.push(value);<br>          <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span>  <span class="hljs-string">&quot;pop&quot;</span>:<br>          <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">int</span> res = stack.pop();<br>            System.out.println(<span class="hljs-string">&quot;å‡ºæ ˆå…ƒç´ ä¸º&quot;</span> + res);<br>          &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            System.out.println(e.getMessage());<br>          &#125;<br>          <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;exit&quot;</span>:<br>          scanner.close();<br>          loop = <span class="hljs-keyword">false</span>;<br>          <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">default</span>:<br>          System.out.println(<span class="hljs-string">&quot;æ— æ•ˆé€‰é¡¹&quot;</span>);<br>          <span class="hljs-keyword">break</span>;<br>      &#125;<br>    &#125;<br>    System.out.println(<span class="hljs-string">&quot;ç¨‹åºå·²é€€å‡º&quot;</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="âš¡ï¸ç»“æœ-v2"><a class="header-anchor" href="#âš¡ï¸ç»“æœ-v2">Â¶</a>âš¡ï¸ç»“æœ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs java">-------èœå•--------<br>showï¼šæ˜¾ç¤ºæ ˆ<br>pushï¼šæ•°æ®å…¥æ ˆ<br>popï¼šæ•°æ®å‡ºæ ˆ<br>exitï¼šé€€å‡ºç¨‹åº<br>------------------<br>è¯·ä½œå‡ºé€‰é¡¹ï¼š<br>show<br>æ ˆç©ºï¼Œæ— æ•°æ®<br>-------èœå•--------<br>showï¼šæ˜¾ç¤ºæ ˆ<br>pushï¼šæ•°æ®å…¥æ ˆ<br>popï¼šæ•°æ®å‡ºæ ˆ<br>exitï¼šé€€å‡ºç¨‹åº<br>------------------<br>è¯·ä½œå‡ºé€‰é¡¹ï¼š<br>push<br>è¯·è¾“å…¥ä¸€ä¸ªæ•°æ®<br><span class="hljs-number">1</span><br>-------èœå•--------<br>showï¼šæ˜¾ç¤ºæ ˆ<br>pushï¼šæ•°æ®å…¥æ ˆ<br>popï¼šæ•°æ®å‡ºæ ˆ<br>exitï¼šé€€å‡ºç¨‹åº<br>------------------<br>è¯·ä½œå‡ºé€‰é¡¹ï¼š<br>show<br>stack[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br>-------èœå•--------<br>showï¼šæ˜¾ç¤ºæ ˆ<br>pushï¼šæ•°æ®å…¥æ ˆ<br>popï¼šæ•°æ®å‡ºæ ˆ<br>exitï¼šé€€å‡ºç¨‹åº<br>------------------<br>è¯·ä½œå‡ºé€‰é¡¹ï¼š<br>push<br>è¯·è¾“å…¥ä¸€ä¸ªæ•°æ®<br><span class="hljs-number">2</span><br>-------èœå•--------<br>showï¼šæ˜¾ç¤ºæ ˆ<br>pushï¼šæ•°æ®å…¥æ ˆ<br>popï¼šæ•°æ®å‡ºæ ˆ<br>exitï¼šé€€å‡ºç¨‹åº<br>------------------<br>è¯·ä½œå‡ºé€‰é¡¹ï¼š<br>push<br>è¯·è¾“å…¥ä¸€ä¸ªæ•°æ®<br><span class="hljs-number">3</span><br>-------èœå•--------<br>showï¼šæ˜¾ç¤ºæ ˆ<br>pushï¼šæ•°æ®å…¥æ ˆ<br>popï¼šæ•°æ®å‡ºæ ˆ<br>exitï¼šé€€å‡ºç¨‹åº<br>------------------<br>è¯·ä½œå‡ºé€‰é¡¹ï¼š<br>push<br>è¯·è¾“å…¥ä¸€ä¸ªæ•°æ®<br><span class="hljs-number">4</span><br>-------èœå•--------<br>showï¼šæ˜¾ç¤ºæ ˆ<br>pushï¼šæ•°æ®å…¥æ ˆ<br>popï¼šæ•°æ®å‡ºæ ˆ<br>exitï¼šé€€å‡ºç¨‹åº<br>------------------<br>è¯·ä½œå‡ºé€‰é¡¹ï¼š<br>push<br>è¯·è¾“å…¥ä¸€ä¸ªæ•°æ®<br><span class="hljs-number">5</span><br>æ ˆæ»¡<br>-------èœå•--------<br>showï¼šæ˜¾ç¤ºæ ˆ<br>pushï¼šæ•°æ®å…¥æ ˆ<br>popï¼šæ•°æ®å‡ºæ ˆ<br>exitï¼šé€€å‡ºç¨‹åº<br>------------------<br>è¯·ä½œå‡ºé€‰é¡¹ï¼š<br>pop<br>å‡ºæ ˆå…ƒç´ ä¸º<span class="hljs-number">4</span><br>-------èœå•--------<br>showï¼šæ˜¾ç¤ºæ ˆ<br>pushï¼šæ•°æ®å…¥æ ˆ<br>popï¼šæ•°æ®å‡ºæ ˆ<br>exitï¼šé€€å‡ºç¨‹åº<br>------------------<br>è¯·ä½œå‡ºé€‰é¡¹ï¼š<br>exit<br>ç¨‹åºå·²é€€å‡º<br></code></pre></td></tr></table></figure><h3 id="ğŸ²æ ˆå®ç°ç®€å•è®¡ç®—å™¨ï¼ˆä¸è€ƒè™‘æ‹¬å·ï¼‰"><a class="header-anchor" href="#ğŸ²æ ˆå®ç°ç®€å•è®¡ç®—å™¨ï¼ˆä¸è€ƒè™‘æ‹¬å·ï¼‰">Â¶</a>ğŸ²æ ˆå®ç°ç®€å•è®¡ç®—å™¨ï¼ˆä¸è€ƒè™‘æ‹¬å·ï¼‰</h3><h4 id="âš¡ï¸é¢˜æ„"><a class="header-anchor" href="#âš¡ï¸é¢˜æ„">Â¶</a>âš¡ï¸é¢˜æ„</h4><p>ä½¿ç”¨æ ˆå®Œæˆè®¡ç®—è¿™æ ·ä¸€ä¸ªè¡¨è¾¾å¼çš„ç»“æœï¼š2Ã—2Ã—2-5+1-5+4/2 = ?</p><h4 id="âš¡ï¸æ€è·¯"><a class="header-anchor" href="#âš¡ï¸æ€è·¯">Â¶</a>âš¡ï¸æ€è·¯</h4><ol><li><p>é€šè¿‡ä¸€ä¸ª <code>index</code>å€¼ï¼ˆç´¢å¼•ï¼‰æ¥éå†è¡¨è¾¾å¼ã€‚</p></li><li><p>å¦‚æœæ‰«æåˆ°ä¸€ä¸ªæ•°å­—ï¼Œå°±ç›´æ¥è¿›å…¥<strong>æ“ä½œæ•°æ ˆ</strong>ã€‚</p></li><li><p>å¦‚æœæ‰«æåˆ°ä¸€ä¸ªç¬¦å·ï¼Œåˆ†å¦‚ä¸‹å‡ ç§æƒ…å†µè§£å†³ï¼š</p><ul><li>å¦‚æœå½“å‰è¿ç®—ç¬¦æ ˆä¸ºç©ºï¼Œå°±ç›´æ¥å…¥æ ˆã€‚</li><li>å¦‚æœæ‰«æåˆ°<strong>å½“å‰è¿ç®—ç¬¦</strong>ä¼˜å…ˆçº§<strong>å°äºæˆ–ç­‰äºæ ˆé¡¶è¿ç®—ç¬¦</strong>çš„ä¼˜å…ˆçº§ï¼Œä»<strong>æ“ä½œæ•°æ ˆ</strong>ä¸­<code>pop</code>å‡ºä¸¤ä¸ªæ“ä½œæ•°ï¼Œå†ä»<strong>è¿ç®—ç¬¦æ ˆ</strong><code>pop</code>å‡ºä¸€ä¸ªè¿ç®—ç¬¦ï¼Œå°†<strong>è¿ç®—ç»“æœ</strong>å‹å…¥<strong>æ“ä½œæ•°æ ˆ</strong>ï¼Œå¹¶å°†<strong>å½“å‰è¿ç®—ç¬¦</strong>å‹å…¥<strong>è¿ç®—ç¬¦æ ˆ</strong>ã€‚</li><li>å¦‚æœ<strong>å½“å‰è¿ç®—ç¬¦ä¼˜å…ˆçº§å¤§äºæ ˆé¡¶è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§</strong>ï¼Œå°±ç›´æ¥å‹å…¥<strong>è¿ç®—ç¬¦æ ˆ</strong>ã€‚</li></ul></li><li><p>å½“è¡¨è¾¾å¼æ‰«æå®Œæ¯•ï¼Œå°±<strong>é¡ºåºçš„ä»æ“ä½œæ•°æ ˆå’Œè¿ç®—ç¬¦æ ˆ</strong>ä¸­<code>pop</code>å‡ºç›¸åº”çš„æ“ä½œæ•°å’Œè¿ç®—ç¬¦ï¼Œè¿›è¡Œè®¡ç®—ã€‚</p></li><li><p>æœ€å<strong>åœ¨æ“ä½œæ•°æ ˆä¸­åªæœ‰ä¸€ä¸ªæ•°</strong>ï¼Œå°±æ˜¯æœ€ç»ˆçš„ç»“æœã€‚</p></li></ol><h4 id="âš¡ï¸ä»£ç -v3"><a class="header-anchor" href="#âš¡ï¸ä»£ç -v3">Â¶</a>âš¡ï¸ä»£ç </h4><ol><li><p>å…³äºè®¡ç®—å™¨çš„æ ˆï¼Œæ‰©å……äº†è·å–ä¼˜å…ˆçº§ã€è¿ç®—ã€å’Œåˆ¤æ–­æ˜¯å¦ä¸ºè¿ç®—ç¬¦çš„æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å…³äºè®¡ç®—å™¨çš„æ ˆ</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CalculatorStack</span> </span>&#123;<br><br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> stackSize;<br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span>[] stack;<br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> top = -<span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> bottom = -<span class="hljs-number">1</span>;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ„é€ å™¨</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> stackSize æ ˆçš„å¤§å°</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">CalculatorStack</span><span class="hljs-params">(<span class="hljs-keyword">int</span> stackSize)</span> </span>&#123;<br>    <span class="hljs-keyword">this</span>.stackSize = stackSize;<br>    stack = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[stackSize];<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * åˆ¤æ–­æ ˆæ»¡</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span> æ˜¯å¦æ ˆæ»¡</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isFull</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> top == stackSize - <span class="hljs-number">1</span>;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * åˆ¤æ–­æ ˆç©º</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span> æ˜¯å¦æ ˆç©º</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isEmpty</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> top == bottom;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * å…¥æ ˆ</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> data å…¥æ ˆå…ƒç´ </span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">push</span><span class="hljs-params">(<span class="hljs-keyword">int</span> data)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (isFull()) &#123;<br>      System.out.println(<span class="hljs-string">&quot;æ ˆæ»¡&quot;</span>);<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    stack[++top] = data;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * å‡ºæ ˆ</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span> å‡ºæ ˆå…ƒç´ </span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">pop</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(<span class="hljs-string">&quot;æ ˆç©ºï¼Œæ— æ•°æ®&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> stack[top--];<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ‰“å°æ ˆå†…å®¹ï¼Œä»æ ˆé¡¶åˆ°æ ˆåº•</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">printStack</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>      System.out.println(<span class="hljs-string">&quot;æ ˆç©ºï¼Œæ— æ•°æ®&quot;</span>);<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = top; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>      System.out.printf(<span class="hljs-string">&quot;stack[%d] = %d\n&quot;</span>, i, stack[i]);<br>    &#125;<br><br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * è¿ç®—ç¬¦ä¼˜å…ˆçº§</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> oper è¿ç®—ç¬¦</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span> ä¼˜å…ˆçº§</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">priority</span><span class="hljs-params">(<span class="hljs-keyword">int</span> oper)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (oper == <span class="hljs-string">&#x27;*&#x27;</span> || oper == <span class="hljs-string">&#x27;/&#x27;</span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (oper == <span class="hljs-string">&#x27;+&#x27;</span> || oper == <span class="hljs-string">&#x27;-&#x27;</span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-comment">/* é”™è¯¯ */</span><br>      <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * åˆ¤æ–­æ˜¯å¦ä¸ºè¿ç®—ç¬¦</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> val ä¼ å…¥å­—ç¬¦</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span> æ˜¯å¦ä¸ºè¿ç®—ç¬¦</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isOper</span><span class="hljs-params">(<span class="hljs-keyword">char</span> val)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> val == <span class="hljs-string">&#x27;+&#x27;</span> || val == <span class="hljs-string">&#x27;-&#x27;</span> || val == <span class="hljs-string">&#x27;*&#x27;</span> || val == <span class="hljs-string">&#x27;/&#x27;</span>;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * è®¡ç®—æ–¹æ³•</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> num1 æ“ä½œæ•°1 å…ˆå¼¹å‡º</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> num2 æ“ä½œæ•°2 åå¼¹å‡º</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> oper è¿ç®—ç¬¦</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span> è¿ç®—ç»“æœ</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">cal</span><span class="hljs-params">(<span class="hljs-keyword">int</span> num1, <span class="hljs-keyword">int</span> num2, <span class="hljs-keyword">int</span> oper)</span> </span>&#123;<br><br>    <span class="hljs-comment">/* å­˜æ”¾è¿ç®—ç»“æœ */</span><br>    <span class="hljs-keyword">int</span> res = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">switch</span> (oper) &#123;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;+&#x27;</span>:<br>        res = num1 + num2;<br>        <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;-&#x27;</span>:<br>        res = num2 - num1;<br>        <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;*&#x27;</span>:<br>        res = num1 * num2;<br>        <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;/&#x27;</span>:<br>        res = num2 / num1;<br>        <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">default</span>:<br>        <span class="hljs-keyword">break</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> res;<br><br>  &#125;<br><br>&#125; <br></code></pre></td></tr></table></figure></li><li><p>å…·ä½“å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Aatrox</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span> å®ç°ç®€æ˜“è®¡ç®—å™¨</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@create</span> 2021-02-06 18:27</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Calculator</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br><br>    <span class="hljs-comment">/* è¡¨è¾¾å¼ */</span><br>    String expression = <span class="hljs-string">&quot;30+2*6-2&quot;</span>;<br><br>    <span class="hljs-comment">/* åˆ›å»ºæ•°æ ˆä¸ç¬¦å·æ ˆ */</span><br>    CalculatorStack numStack = <span class="hljs-keyword">new</span> CalculatorStack(<span class="hljs-number">10</span>);<br>    CalculatorStack operStack = <span class="hljs-keyword">new</span> CalculatorStack(<span class="hljs-number">10</span>);<br><br>    <span class="hljs-comment">/* å®šä¹‰è¾…åŠ©å˜é‡ */</span><br>    <span class="hljs-keyword">int</span> index = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">int</span> num1 = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">int</span> num2 = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">int</span> oper = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">int</span> res = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">char</span> ch = <span class="hljs-string">&#x27; &#x27;</span>;<br>    <span class="hljs-comment">// å¤šä½æ•°æ‹¼æ¥</span><br>    String keepNum = <span class="hljs-string">&quot;&quot;</span>;<br><br>    <span class="hljs-comment">/* å¾ªç¯æ‰«æè¡¨è¾¾å¼ */</span><br>    <span class="hljs-keyword">while</span> (<span class="hljs-keyword">true</span>) &#123;<br><br>      ch = expression.substring(index, index + <span class="hljs-number">1</span>).charAt(<span class="hljs-number">0</span>);<br><br>      <span class="hljs-comment">/* åˆ¤æ–­æ˜¯æ“ä½œæ•°è¿˜æ˜¯è¿ç®—ç¬¦ */</span><br>      <span class="hljs-keyword">if</span> (operStack.isOper(ch)) &#123;<br><br>        <span class="hljs-comment">/* åˆ¤æ–­è¿ç®—ç¬¦æ ˆæ˜¯å¦ä¸ºç©º */</span><br>        <span class="hljs-keyword">if</span> (!operStack.isEmpty()) &#123;<br>          <span class="hljs-comment">/* å¦‚æœå½“å‰è¿ç®—ç¬¦ä¼˜å…ˆçº§å°äºæˆ–è€…ç­‰äºæ ˆä¸­æ“ä½œç¬¦ */</span><br>          <span class="hljs-keyword">if</span> (operStack.priority(ch) &lt;= operStack.priority(operStack.pickTop())) &#123;<br>            num1 = numStack.pop();<br>            num2 = numStack.pop();<br>            oper = operStack.pop();<br>            res = numStack.cal(num1, num2, oper);<br>            numStack.push(res);<br>            operStack.push(ch);<br>          &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">/* å¦‚æœå½“å‰è¿ç®—ç¬¦ä¼˜å…ˆçº§å¤§äºæ ˆä¸­æ“ä½œç¬¦ */</span><br>            operStack.push(ch);<br>          &#125;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-comment">/* å¦‚æœè¿ç®—ç¬¦æ ˆä¸ºç©º */</span><br>          operStack.push(ch);<br>        &#125;<br><br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">/* å¦‚æœæ˜¯æ“ä½œæ•°ï¼Œç›´æ¥å…¥æ•°æ ˆï¼Œåœ¨è¿™é‡Œè¿›è¡Œå¤šä½æ•°çš„å¤„ç† */</span><br>        keepNum += ch;<br>        <span class="hljs-comment">/* å¦‚æœchä¸æ˜¯è¡¨è¾¾å¼çš„æœ€åä¸€ä½ï¼Œå‘åæ¢è§†ä¸€ä½æ˜¯å¦ä¸ºæ“ä½œæ•° */</span><br>        <span class="hljs-keyword">if</span> (index == expression.length() - <span class="hljs-number">1</span>) &#123;<br>          numStack.push(Integer.parseInt(keepNum));<br>        &#125;<span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-keyword">if</span> (operStack.isOper(expression.substring(index+<span class="hljs-number">1</span>, index+<span class="hljs-number">2</span>).charAt(<span class="hljs-number">0</span>))) &#123;<br>            numStack.push(Integer.parseInt(keepNum));<br>            keepNum = <span class="hljs-string">&quot;&quot;</span>;<br>          &#125;<br>        &#125;<br>      &#125;<br><br>      <span class="hljs-comment">/* index + 1ï¼Œåˆ¤æ–­æ˜¯å¦æ‰«æåˆ°ç»“å°¾ */</span><br>      index++;<br>      <span class="hljs-keyword">if</span> (index &gt;= expression.length()) &#123;<br>        <span class="hljs-keyword">break</span>;<br>      &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/* è¡¨è¾¾å¼æ‰«æå®Œæ¯•å,é¡ºåºçš„ä»æ•°æ ˆå’Œç¬¦å·æ ˆpopå‡ºç›¸åº”çš„æ•°å’Œç¬¦å·å¹¶è¿è¡Œ */</span><br>    <span class="hljs-keyword">while</span> (<span class="hljs-keyword">true</span>) &#123;<br>      <span class="hljs-comment">// å¦‚æœç¬¦å·æ ˆä¸ºç©ºï¼Œåˆ™è®¡ç®—åˆ°æœ€åçš„ç»“æœï¼Œæ•°æ ˆä¸­åªæœ‰1ä¸ªæ•°å­—</span><br>      <span class="hljs-keyword">if</span> (operStack.isEmpty()) &#123;<br>        <span class="hljs-keyword">break</span>;<br>      &#125;<br>      num1 = numStack.pop();<br>      num2 = numStack.pop();<br>      oper = operStack.pop();<br>      res = numStack.cal(num1, num2, oper);<br>      numStack.push(res);<br>    &#125;<br><br>    <span class="hljs-comment">/* è®¡ç®—å®Œæ¯•ï¼Œæœ€ç»ˆç»“æœåœ¨æ•°æ ˆä¸­ */</span><br>    System.out.printf(<span class="hljs-string">&quot;è¡¨è¾¾å¼ %s = %d\n&quot;</span>, expression, numStack.pop());<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><h4 id="âš¡ï¸ç»“æœ-v3"><a class="header-anchor" href="#âš¡ï¸ç»“æœ-v3">Â¶</a>âš¡ï¸ç»“æœ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">è¡¨è¾¾å¼ <span class="hljs-number">30</span>+<span class="hljs-number">2</span>*<span class="hljs-number">6</span>-<span class="hljs-number">2</span> = <span class="hljs-number">40</span><br></code></pre></td></tr></table></figure><h3 id="ğŸ²å‰ç¼€è¡¨è¾¾å¼ï¼ˆæ³¢å…°è¡¨è¾¾å¼ï¼‰"><a class="header-anchor" href="#ğŸ²å‰ç¼€è¡¨è¾¾å¼ï¼ˆæ³¢å…°è¡¨è¾¾å¼ï¼‰">Â¶</a>ğŸ²å‰ç¼€è¡¨è¾¾å¼ï¼ˆæ³¢å…°è¡¨è¾¾å¼ï¼‰</h3><ol><li><p>å‰ç¼€è¡¨è¾¾å¼åˆç§°<strong>æ³¢å…°è¡¨è¾¾å¼</strong>ï¼Œ<strong>å‰ç¼€è¡¨è¾¾å¼çš„è¿ç®—ç¬¦ä½äºæ“ä½œæ•°ä¹‹å‰</strong>ã€‚</p></li><li><p>ä¸¾ä¾‹è¯´æ˜ï¼š ï¼ˆ3+4ï¼‰Ã—5-6 å¯¹åº”çš„å‰ç¼€è¡¨è¾¾å¼ä¸º -Ã—+3456</p></li><li><p>å‰ç¼€è¡¨è¾¾å¼çš„è®¡ç®—æœºæ±‚å€¼ï¼š</p><p>ä»å³è‡³å·¦æ‰«æè¡¨è¾¾å¼ï¼Œé‡åˆ°æ•°å­—æ—¶ï¼Œå°†æ•°å­—å‹å…¥å †æ ˆï¼Œé‡åˆ°è¿ç®—ç¬¦æ—¶ï¼Œå¼¹å‡ºæ ˆé¡¶çš„ä¸¤ä¸ªæ•°ï¼Œç”¨è¿ç®—ç¬¦å¯¹å®ƒä»¬åšç›¸åº”çš„è®¡ç®—ï¼ˆæ ˆé¡¶å…ƒç´  å’Œ æ¬¡é¡¶å…ƒç´ ï¼‰ï¼Œå¹¶å°†ç»“æœå…¥æ ˆï¼›é‡å¤ä¸Šè¿°è¿‡ç¨‹ç›´åˆ°è¡¨è¾¾å¼æœ€å·¦ç«¯ï¼Œæœ€åè¿ç®—å¾—å‡ºçš„å€¼å³ä¸ºè¡¨è¾¾å¼çš„ç»“æœ</p><p>ä¾‹å¦‚: (3+4)Ã—5-6 å¯¹åº”çš„å‰ç¼€è¡¨è¾¾å¼å°±æ˜¯ - Ã— + 3 4 5 6 , é’ˆå¯¹å‰ç¼€è¡¨è¾¾å¼æ±‚å€¼æ­¥éª¤å¦‚ä¸‹:</p><p>1ã€ä»å³è‡³å·¦æ‰«æï¼Œå°†6ã€5ã€4ã€3å‹å…¥å †æ ˆ<br>2ã€é‡åˆ°+è¿ç®—ç¬¦ï¼Œå› æ­¤å¼¹å‡º3å’Œ4ï¼ˆ3ä¸ºæ ˆé¡¶å…ƒç´ ï¼Œ4ä¸ºæ¬¡é¡¶å…ƒç´ ï¼‰ï¼Œè®¡ç®—å‡º3+4çš„å€¼ï¼Œå¾—7ï¼Œå†å°†7å…¥æ ˆ<br>3ã€æ¥ä¸‹æ¥æ˜¯Ã—è¿ç®—ç¬¦ï¼Œå› æ­¤å¼¹å‡º7å’Œ5ï¼Œè®¡ç®—å‡º7Ã—5=35ï¼Œå°†35å…¥æ ˆ<br>4ã€æœ€åæ˜¯-è¿ç®—ç¬¦ï¼Œè®¡ç®—å‡º35-6çš„å€¼ï¼Œå³29ï¼Œç”±æ­¤å¾—å‡ºæœ€ç»ˆç»“æœ</p></li></ol><h3 id="ğŸ²ä¸­ç¼€è¡¨è¾¾å¼"><a class="header-anchor" href="#ğŸ²ä¸­ç¼€è¡¨è¾¾å¼">Â¶</a>ğŸ²ä¸­ç¼€è¡¨è¾¾å¼</h3><ol><li>ä¸­ç¼€è¡¨è¾¾å¼å°±æ˜¯å¸¸è§çš„è¿ç®—è¡¨è¾¾å¼ï¼Œå¦‚(3+4)Ã—5-6</li><li>ä¸­ç¼€è¡¨è¾¾å¼çš„æ±‚å€¼ä½¿æˆ‘ä»¬æ‰€ç†Ÿæ‚‰çš„ï¼Œä½†æ˜¯å¯¹è®¡ç®—æœºæ¥è¯´å´ä¸å¥½æ“ä½œã€‚å› æ­¤ï¼Œåœ¨è®¡ç®—ç»“æœæ—¶ï¼Œå¾€å¾€ä¼šå°†ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢æˆå…¶ä»–è¡¨è¾¾å¼æ¥æ“ä½œï¼ˆä¸€èˆ¬è½¬æ¢æˆåç¼€è¡¨è¾¾å¼ï¼‰ã€‚</li></ol><h3 id="ğŸ²åç¼€è¡¨è¾¾å¼"><a class="header-anchor" href="#ğŸ²åç¼€è¡¨è¾¾å¼">Â¶</a>ğŸ²åç¼€è¡¨è¾¾å¼</h3><ol><li><p>åç¼€è¡¨è¾¾å¼åˆç§°ä¸º<strong>é€†æ³¢å…°è¡¨è¾¾å¼</strong>ï¼Œ<strong>åç¼€è¡¨è¾¾å¼çš„è¿ç®—ç¬¦ä½äºæ“ä½œæ•°ä¹‹å</strong>ã€‚</p></li><li><p>ä¸¾ä¾‹è¯´æ˜ï¼š ï¼ˆ3+4ï¼‰Ã—5-6 å¯¹åº”çš„åç¼€è¡¨è¾¾å¼ä¸º 3 4 + 5 Ã— 6</p></li><li><p>å†ä¾‹å¦‚ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E6%A0%88/3.jpg" alt="åç¼€è¡¨è¾¾å¼"></p></li><li><p>åç¼€è¡¨è¾¾å¼çš„è®¡ç®—æœºæ±‚å€¼ï¼š</p><p>ä»å·¦è‡³å³æ‰«æè¡¨è¾¾å¼ï¼Œé‡åˆ°æ•°å­—æ—¶ï¼Œå°†æ•°å­—å‹å…¥å †æ ˆï¼Œé‡åˆ°è¿ç®—ç¬¦æ—¶ï¼Œå¼¹å‡ºæ ˆé¡¶çš„ä¸¤ä¸ªæ•°ï¼Œç”¨è¿ç®—ç¬¦å¯¹å®ƒä»¬åšç›¸åº”çš„è®¡ç®—ï¼ˆæ¬¡é¡¶å…ƒç´  å’Œ æ ˆé¡¶å…ƒç´ ï¼‰ï¼Œå¹¶å°†ç»“æœå…¥æ ˆï¼›é‡å¤ä¸Šè¿°è¿‡ç¨‹ç›´åˆ°è¡¨è¾¾å¼æœ€å³ç«¯ï¼Œæœ€åè¿ç®—å¾—å‡ºçš„å€¼å³ä¸ºè¡¨è¾¾å¼çš„ç»“æœ</p><p>ä¾‹å¦‚: (3+4)Ã—5-6 å¯¹åº”çš„åç¼€è¡¨è¾¾å¼å°±æ˜¯ 3 4 + 5 Ã— 6 - , é’ˆå¯¹åç¼€è¡¨è¾¾å¼æ±‚å€¼æ­¥éª¤å¦‚ä¸‹:</p><p>1ã€ä»å·¦è‡³å³æ‰«æï¼Œå°†3å’Œ4å‹å…¥å †æ ˆï¼›<br>2ã€é‡åˆ°+è¿ç®—ç¬¦ï¼Œå› æ­¤å¼¹å‡º4å’Œ3ï¼ˆ4ä¸ºæ ˆé¡¶å…ƒç´ ï¼Œ3ä¸ºæ¬¡é¡¶å…ƒç´ ï¼‰ï¼Œè®¡ç®—å‡º3+4çš„å€¼ï¼Œå¾—7ï¼Œå†å°†7å…¥æ ˆï¼›<br>3ã€å°†5å…¥æ ˆï¼›<br>4ã€æ¥ä¸‹æ¥æ˜¯Ã—è¿ç®—ç¬¦ï¼Œå› æ­¤å¼¹å‡º5å’Œ7ï¼Œè®¡ç®—å‡º7Ã—5=35ï¼Œå°†35å…¥æ ˆï¼›<br>5ã€å°†6å…¥æ ˆï¼›<br>6ã€æœ€åæ˜¯-è¿ç®—ç¬¦ï¼Œè®¡ç®—å‡º35-6çš„å€¼ï¼Œå³29ï¼Œç”±æ­¤å¾—å‡ºæœ€ç»ˆç»“æœ</p></li></ol><h3 id="ğŸ²åç¼€è¡¨è¾¾å¼è®¡ç®—æ±‚å€¼"><a class="header-anchor" href="#ğŸ²åç¼€è¡¨è¾¾å¼è®¡ç®—æ±‚å€¼">Â¶</a>ğŸ²åç¼€è¡¨è¾¾å¼è®¡ç®—æ±‚å€¼</h3><h4 id="âš¡ï¸æ€è·¯-v2"><a class="header-anchor" href="#âš¡ï¸æ€è·¯-v2">Â¶</a>âš¡ï¸æ€è·¯</h4><ol><li>å®šä¹‰é€†æ³¢å…°è¡¨è¾¾å¼</li><li>å°†é€†æ³¢å…°è¡¨è¾¾å¼çš„å­—ç¬¦ä¸€ä¸ªä¸ªæ”¾åˆ°<code>ArrayList</code>ä¸­</li><li>ä½¿ç”¨javaè‡ªå¸¦çš„<code>Stack</code>ç±»ã€‚</li><li>åŒ¹é…å¤šä½æ•°ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼š<code>item.matches(&quot;\\d+&quot;)</code></li></ol><h4 id="âš¡ï¸ä»£ç -v4"><a class="header-anchor" href="#âš¡ï¸ä»£ç -v4">Â¶</a>âš¡ï¸ä»£ç </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Aatrox</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span> é€†æ³¢å…°è®¡ç®—</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@create</span> 2021-02-06 20:03</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PolandNotation</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br><br>    <span class="hljs-comment">/* å®šä¹‰é€†æ³¢å…°è¡¨è¾¾å¼ :(3+4)Ã—5-6 =&gt; 3 4 + 5 * 6 - */</span><br>    String suffixExpression = <span class="hljs-string">&quot;3 4 + 5 * 6 -&quot;</span>;<br><br>    <span class="hljs-comment">/* å°†é€†æ³¢å…°è¡¨è¾¾å¼æ”¾åˆ° ArrayList */</span><br>    List&lt;String&gt; rpnList = getListByString(suffixExpression);<br><br>    <span class="hljs-comment">/* å°† ArrayList ä¼ é€’ç»™ä¸€ä¸ªæ–¹æ³•ï¼Œé…åˆæ ˆå®Œæˆè®¡ç®— */</span><br>    <span class="hljs-keyword">int</span> result = calculate(rpnList);<br>    System.out.println(result);<br><br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * é€šè¿‡å­—ç¬¦æ¢è½¬åŒ–ä¸ºæ•°ç»„</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> suffixExpression åç¼€è¡¨è¾¾å¼</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span> å­˜æ”¾å­—ç¬¦å…ƒç´ çš„æ•°ç»„</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> List&lt;String&gt; <span class="hljs-title">getListByString</span><span class="hljs-params">(String suffixExpression)</span> </span>&#123;<br><br>    <span class="hljs-comment">/* åˆ†å‰²åç¼€è¡¨è¾¾å¼ */</span><br>    String[] strings = suffixExpression.split(<span class="hljs-string">&quot; &quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ArrayList&lt;&gt;(Arrays.asList(strings));<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * é€†æ³¢å…°è¡¨è¾¾å¼è®¡ç®—</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> list å­˜æ”¾é€†æ³¢å…°è¡¨è¾¾å¼çš„æ•°ç»„</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span> è®¡ç®—ç»“æœ</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">calculate</span><span class="hljs-params">(List&lt;String&gt; list)</span> </span>&#123;<br><br>    Stack&lt;String&gt; stack = <span class="hljs-keyword">new</span> Stack&lt;&gt;();<br><br>    <span class="hljs-comment">/* éå† list */</span><br>    <span class="hljs-keyword">for</span> (String item: list) &#123;<br><br>      <span class="hljs-comment">/* æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å¤šä½æ•° */</span><br>      <span class="hljs-keyword">if</span> (item.matches(<span class="hljs-string">&quot;\\d+&quot;</span>)) &#123;<br>        stack.push(item);<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">/* å¼¹å‡ºä¸¤ä¸ªæ•°ï¼Œå¹¶è¿ç®—ï¼Œå†å…¥æ ˆ */</span><br>        <span class="hljs-keyword">int</span> num2 = Integer.parseInt(stack.pop());<br>        <span class="hljs-keyword">int</span> num1 = Integer.parseInt(stack.pop());<br>        <span class="hljs-keyword">int</span> res = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;+&quot;</span>.equals(item)) &#123;<br>          res = num1 + num2;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;-&quot;</span>.equals(item)) &#123;<br>          res = num1 - num2;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;*&quot;</span>.equals(item)) &#123;<br>          res = num1 * num2;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;/&quot;</span>.equals(item)) &#123;<br>          res = num1 / num2;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(<span class="hljs-string">&quot;è¿ç®—ç¬¦æœ‰è¯¯&quot;</span>);<br>        &#125;<br>        stack.push(<span class="hljs-string">&quot;&quot;</span> + res);<br>      &#125;<br><br>    &#125;<br><br>    <span class="hljs-comment">/* æœ€ç»ˆç»“æœç•™åœ¨æ ˆä¸­ */</span><br>    <span class="hljs-keyword">return</span> Integer.parseInt(stack.pop());<br>  &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="âš¡ï¸ç»“æœ-v4"><a class="header-anchor" href="#âš¡ï¸ç»“æœ-v4">Â¶</a>âš¡ï¸ç»“æœ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-number">29</span><br></code></pre></td></tr></table></figure><h3 id="ğŸ²ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼"><a class="header-anchor" href="#ğŸ²ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼">Â¶</a>ğŸ²ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼</h3><h4 id="âš¡ï¸æ€è·¯-v3"><a class="header-anchor" href="#âš¡ï¸æ€è·¯-v3">Â¶</a>âš¡ï¸æ€è·¯</h4><ol><li>åˆå§‹åŒ–ä¸¤ä¸ªæ ˆï¼šè¿ç®—ç¬¦æ ˆs1å’Œå­˜å‚¨ä¸­é—´ç»“æœçš„æ ˆs2ã€‚</li><li>ä»å·¦è‡³å³æ‰«æä¸­ç¼€è¡¨è¾¾å¼ã€‚</li><li>é‡åˆ°æ“ä½œæ•°æ—¶ï¼Œå°†å…¶å‹å…¥æ ˆs2ã€‚</li><li>é‡åˆ°è¿ç®—ç¬¦æ—¶ï¼Œæ¯”è¾ƒå…¶ä¸æ ˆé¡¶è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ï¼š<ul><li>å¦‚æœs1è¿ç®—ç¬¦æ ˆä¸ºç©ºï¼Œæˆ–ç€æ ˆé¡¶è¿ç®—ç¬¦ä¸ºå·¦æ‹¬å·â€™('ï¼Œç›´æ¥å°†å…¶å‹å…¥s1ã€‚</li><li>è‹¥è¯¥è¿ç®—ç¬¦æ¯”æ ˆé¡¶è¿ç®—ç¬¦ä¼˜å…ˆçº§é«˜æˆ–è€…æ ˆé¡¶å…ƒç´ ä¸ºå·¦æ‹¬å·ï¼Œä¹Ÿå°†å…¶ç›´æ¥å‹å…¥s1ã€‚</li><li>è‹¥è¯¥è¿ç®—ç¬¦æ¯”æ ˆé¡¶è¿ç®—ç¬¦ä¼˜å…ˆçº§ä½ï¼Œå°†è¿ç®—ç¬¦æ ˆs1æ ˆé¡¶è¿ç®—ç¬¦å¼¹å‡ºå¹¶å‹å…¥s2ä¸­ï¼Œå†æ¬¡è½¬åˆ°4-1ä¸s1ä¸­æ–°çš„æ ˆé¡¶è¿ç®—ç¬¦ç›¸æ¯”è¾ƒã€‚</li></ul></li><li>é‡åˆ°æ‹¬å·æ—¶ï¼š<ul><li>å¦‚æœæ˜¯å·¦æ‹¬å·â€™('ï¼Œåˆ™ç›´æ¥å°†å…¶å‹å…¥s1ã€‚</li><li>å¦‚æœæ˜¯å³æ‹¬å·â€™)'ï¼Œåˆ™ä¸€æ¬¡å¼¹å‡ºs1æ ˆé¡¶çš„è¿ç®—ç¬¦å¹¶å‹å…¥s2ï¼Œç›´åˆ°é‡åˆ°å·¦æ‹¬å·ä¸ºæ­¢ï¼Œæ­¤æ—¶å°†è¿™ä¸€å¯¹æ‹¬å·ä¸¢å¼ƒã€‚</li></ul></li><li>é‡å¤æ­¥éª¤2è‡³5ï¼Œç›´åˆ°è¡¨è¾¾å¼çš„æœ€åè¾¹</li></ol><p>å°†s1ä¸­å‰©ä½™çš„è¿ç®—ç¬¦ä¾æ¬¡å¼¹å‡ºå¹¶å‹å…¥s2ã€‚</p><p>ä¾æ¬¡å¼¹å‡ºs2ä¸­çš„å…ƒç´ å¹¶è¾“å‡ºï¼Œç»“æœçš„é€†åºå³ä¸ºä¸­ç¼€è¡¨è¾¾å¼å¯¹åº”çš„åç¼€è¡¨è¾¾å¼ã€‚</p><h4 id="âš¡ï¸ä¸¾ä¾‹"><a class="header-anchor" href="#âš¡ï¸ä¸¾ä¾‹">Â¶</a>âš¡ï¸ä¸¾ä¾‹</h4><p>ä¸­ç¼€è¡¨è¾¾å¼ <code>1 + ( ( 2 + 3 ) Ã— 4 ) - 5</code> =ã€‹åç¼€è¡¨è¾¾å¼ <code>1 2 3 + 4 Ã— + 5 -</code> ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E6%A0%88/4.jpg" alt="è¿‡ç¨‹"></p><h4 id="âš¡ï¸ä»£ç -v5"><a class="header-anchor" href="#âš¡ï¸ä»£ç -v5">Â¶</a>âš¡ï¸ä»£ç </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Aatrox</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span> é€†æ³¢å…°è®¡ç®—</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@create</span> 2021-02-06 20:03</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PolandNotation</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br><br>    <span class="hljs-comment">/*  å®šä¹‰ä¸­ç¼€è¡¨è¾¾å¼ */</span><br>    String expression = <span class="hljs-string">&quot;1+((2+3)*4)-5&quot;</span>;<br><br>    <span class="hljs-comment">/* å¾—åˆ°ä¸­ç¼€è¡¨è¾¾å¼å¯¹åº”çš„List */</span><br>    List&lt;String&gt; infixExpressionList = toInfixExpressionList(expression);<br><br>    <span class="hljs-comment">/* å°†ä¸­ç¼€è¡¨è¾¾å¼å¯¹åº”Listè½¬åŒ–ä¸ºåç¼€è¡¨è¾¾å¼å¯¹åº”List */</span><br>    List&lt;String&gt; suffixExpressionList = parseSuffixExpressionList(infixExpressionList);<br>    System.out.println(suffixExpressionList);<br><br>    <span class="hljs-comment">/* å°† ArrayList ä¼ é€’ç»™ä¸€ä¸ªæ–¹æ³•ï¼Œé…åˆæ ˆå®Œæˆè®¡ç®— */</span><br>    <span class="hljs-keyword">int</span> result = calculate(suffixExpressionList);<br>    System.out.println(result);<br><br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * ä¸­ç¼€è¡¨è¾¾å¼å¯¹åº”Listè½¬åŒ–ä¸ºåç¼€è¡¨è¾¾å¼å¯¹åº”List</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> ls ä¸­ç¼€è¡¨è¾¾å¼List</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span> åç¼€è¡¨è¾¾å¼List</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> List&lt;String&gt; <span class="hljs-title">parseSuffixExpressionList</span><span class="hljs-params">(List&lt;String&gt; ls)</span> </span>&#123;<br><br>    <span class="hljs-comment">// ç¬¦å·æ ˆ</span><br>    Stack&lt;String&gt; s1 = <span class="hljs-keyword">new</span> Stack&lt;String&gt;();<br>    <span class="hljs-comment">// å­˜å‚¨ä¸­é—´ç»“æœçš„æ ˆï¼Œå› ä¸ºs2è¿™ä¸ªæ ˆï¼Œåœ¨æ•´ä¸ªè½¬æ¢è¿‡ç¨‹ä¸­æ²¡æœ‰popæ“ä½œï¼Œè€Œä¸”æœ€åè¿˜éœ€è¦é€†åºè¾“å‡º</span><br>    <span class="hljs-comment">// è¿™æ ·æ¯”è¾ƒéº»çƒ¦ï¼Œç›´æ¥ä½¿ç”¨ ArrayList&lt;String&gt; s2 æ¥æ›¿ä»£</span><br>    ArrayList&lt;String&gt; s2 = <span class="hljs-keyword">new</span> ArrayList&lt;String&gt;();<br><br>    <span class="hljs-comment">// éå†ls</span><br>    <span class="hljs-keyword">for</span> (String item: ls) &#123;<br>      <span class="hljs-comment">// å¦‚æœæ˜¯ä¸€ä¸ªæ•°ï¼ŒåŠ å…¥s2</span><br>      <span class="hljs-keyword">if</span> (item.matches(<span class="hljs-string">&quot;\\d+&quot;</span>)) &#123;<br>        s2.add(item);<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;(&quot;</span>.equals(item)) &#123;<br>        s1.push(item);<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;)&quot;</span>.equals(item)) &#123;<br>        <span class="hljs-keyword">while</span> (!<span class="hljs-string">&quot;(&quot;</span>.equals(s1.peek())) &#123;<br>          s2.add(s1.pop());<br>        &#125;<br>        <span class="hljs-comment">// å°†&quot;(&quot;ä»s1æ ˆå¼¹å‡ºï¼Œæ¶ˆé™¤ä¸€å¯¹å°æ‹¬å·</span><br>        s1.pop();<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">// å½“itemçš„ä¼˜å…ˆçº§å°äºs1æ ˆé¡¶è¿ç®—ç¬¦</span><br>        <span class="hljs-keyword">while</span> (s1.size() != <span class="hljs-number">0</span> &amp;&amp; Operation.getValue(s1.peek()) &gt;= Operation.getValue(item)) &#123;<br>          s2.add(s1.pop());<br>        &#125;<br>        s1.push(item);<br>      &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// å°†s1ä¸­å‰©ä½™çš„è¿ç®—ç¬¦ä¾æ¬¡å¼¹å‡ºå¹¶åŠ å…¥s2</span><br>    <span class="hljs-keyword">while</span> (s1.size() != <span class="hljs-number">0</span>) &#123;<br>      s2.add(s1.pop());<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> s2;<br><br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * å°†ä¸­ç¼€è¡¨è¾¾å¼è½¬åŒ–ä¸ºå¯¹åº”æ•°ç»„</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> s ä¸­ç¼€è¡¨è¾¾å¼</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span> å¯¹åº”çš„æ•°ç»„</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> List&lt;String&gt; <span class="hljs-title">toInfixExpressionList</span><span class="hljs-params">(String s)</span> </span>&#123;<br>    ArrayList&lt;String&gt; ls = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>    <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">// å¯¹å¤šä½æ•°çš„æ‹¼æ¥</span><br>    String str;<br>    <span class="hljs-comment">// éå†å­—ç¬¦</span><br>    <span class="hljs-keyword">char</span> c;<br>    <span class="hljs-keyword">do</span> &#123;<br>      <span class="hljs-comment">// å¦‚æœcéæ•°ç»„ï¼Œç›´æ¥åŠ å…¥ls</span><br>      <span class="hljs-keyword">if</span> ((c=s.charAt(i)) &lt; <span class="hljs-number">48</span> || (c=s.charAt(i)) &gt; <span class="hljs-number">57</span>) &#123;<br>        ls.add(<span class="hljs-string">&quot;&quot;</span>+c);<br>        i++;<br>      &#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">// å¦‚æœæ˜¯ä¸€ä¸ªæ•°å­—ï¼Œéœ€è¦è€ƒè™‘å¤šä½æ•°</span><br>        str = <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">while</span> (i &lt; s.length() &amp;&amp; (c = s.charAt(i)) &gt;= <span class="hljs-number">48</span> &amp;&amp; (c = s.charAt(i)) &lt;= <span class="hljs-number">57</span>) &#123;<br>          str += c;<br>          i++;<br>        &#125;<br>        ls.add(str);<br>      &#125;<br>    &#125;<span class="hljs-keyword">while</span> (i &lt; s.length());<br>    <span class="hljs-keyword">return</span> ls;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * é€šè¿‡å­—ç¬¦æ¢è½¬åŒ–ä¸ºæ•°ç»„</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> suffixExpression åç¼€è¡¨è¾¾å¼</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span> å­˜æ”¾å­—ç¬¦å…ƒç´ çš„æ•°ç»„</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> List&lt;String&gt; <span class="hljs-title">getListByString</span><span class="hljs-params">(String suffixExpression)</span> </span>&#123;<br><br>    <span class="hljs-comment">/* åˆ†å‰²åç¼€è¡¨è¾¾å¼ */</span><br>    String[] strings = suffixExpression.split(<span class="hljs-string">&quot; &quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ArrayList&lt;&gt;(Arrays.asList(strings));<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * é€†æ³¢å…°è¡¨è¾¾å¼è®¡ç®—</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> list å­˜æ”¾é€†æ³¢å…°è¡¨è¾¾å¼çš„æ•°ç»„</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span> è®¡ç®—ç»“æœ</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">calculate</span><span class="hljs-params">(List&lt;String&gt; list)</span> </span>&#123;<br><br>    Stack&lt;String&gt; stack = <span class="hljs-keyword">new</span> Stack&lt;&gt;();<br><br>    <span class="hljs-comment">/* éå† list */</span><br>    <span class="hljs-keyword">for</span> (String item: list) &#123;<br><br>      <span class="hljs-comment">/* æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å¤šä½æ•° */</span><br>      <span class="hljs-keyword">if</span> (item.matches(<span class="hljs-string">&quot;\\d+&quot;</span>)) &#123;<br>        stack.push(item);<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">/* å¼¹å‡ºä¸¤ä¸ªæ•°ï¼Œå¹¶è¿ç®—ï¼Œå†å…¥æ ˆ */</span><br>        <span class="hljs-keyword">int</span> num2 = Integer.parseInt(stack.pop());<br>        <span class="hljs-keyword">int</span> num1 = Integer.parseInt(stack.pop());<br>        <span class="hljs-keyword">int</span> res = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;+&quot;</span>.equals(item)) &#123;<br>          res = num1 + num2;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;-&quot;</span>.equals(item)) &#123;<br>          res = num1 - num2;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;*&quot;</span>.equals(item)) &#123;<br>          res = num1 * num2;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;/&quot;</span>.equals(item)) &#123;<br>          res = num1 / num2;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(<span class="hljs-string">&quot;è¿ç®—ç¬¦æœ‰è¯¯&quot;</span>);<br>        &#125;<br>        stack.push(<span class="hljs-string">&quot;&quot;</span> + res);<br>      &#125;<br><br>    &#125;<br><br>    <span class="hljs-comment">/* æœ€ç»ˆç»“æœç•™åœ¨æ ˆä¸­ */</span><br>    <span class="hljs-keyword">return</span> Integer.parseInt(stack.pop());<br>  &#125;<br><br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è¿ç®—ç¬¦ä¼˜å…ˆçº§</span><br><span class="hljs-comment"> */</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Operation</span> </span>&#123;<br><br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> ADD = <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> SUB = <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> MUL = <span class="hljs-number">2</span>;<br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> DIV = <span class="hljs-number">2</span>;<br><br>  <span class="hljs-comment">// è¿”å›è¿ç®—ç¬¦å¯¹åº”çš„ä¼˜å…ˆçº§</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getValue</span><span class="hljs-params">(String operation)</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> result = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">switch</span> (operation) &#123;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;+&quot;</span>:<br>        result = ADD;<br>        <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;-&quot;</span>:<br>        result = SUB;<br>        <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;*&quot;</span>:<br>        result = MUL;<br>        <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;/&quot;</span>:<br>        result = DIV;<br>        <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">default</span>:<br>        System.out.println(<span class="hljs-string">&quot;ä¸å­˜åœ¨è¯¥è¿ç®—ç¬¦&quot;</span>);<br>        <span class="hljs-keyword">break</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> result;<br>  &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="âš¡ï¸ç»“æœ-v5"><a class="header-anchor" href="#âš¡ï¸ç»“æœ-v5">Â¶</a>âš¡ï¸ç»“æœ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">ä¸å­˜åœ¨è¯¥è¿ç®—ç¬¦<br>ä¸å­˜åœ¨è¯¥è¿ç®—ç¬¦<br>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, +, <span class="hljs-number">4</span>, *, +, <span class="hljs-number">5</span>, -]<br><span class="hljs-number">16</span><br></code></pre></td></tr></table></figure><h3 id="ğŸ²é€†æ³¢å…°è®¡ç®—å™¨å®Œæ•´ç‰ˆ"><a class="header-anchor" href="#ğŸ²é€†æ³¢å…°è®¡ç®—å™¨å®Œæ•´ç‰ˆ">Â¶</a>ğŸ²é€†æ³¢å…°è®¡ç®—å™¨å®Œæ•´ç‰ˆ</h3><h4 id="âš¡ï¸åŠŸèƒ½"><a class="header-anchor" href="#âš¡ï¸åŠŸèƒ½">Â¶</a>âš¡ï¸åŠŸèƒ½</h4><p>å®Œæ•´ç‰ˆçš„é€†æ³¢å…°è®¡ç®—å™¨ï¼ŒåŠŸèƒ½åŒ…æ‹¬ï¼š</p><p>â€‹1ï¸âƒ£ æ”¯æŒ + - * / ( )</p><p>â€‹2ï¸âƒ£ æ”¯æŒå¤šä½æ•°ã€å°æ•°</p><p>â€‹3ï¸âƒ£ å…¼å®¹å¤„ç†ï¼Œè¿‡æ»¤ä»»ä½•ç©ºç™½å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦</p><h4 id="âš¡ï¸ä»£ç -v6"><a class="header-anchor" href="#âš¡ï¸ä»£ç -v6">Â¶</a>âš¡ï¸ä»£ç </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Aatrox</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span> é€†æ³¢å…°è®¡ç®—å™¨å®Œæ•´ç‰ˆ</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@create</span> 2021-02-07 18:11</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ReversePolishMultiCalc</span> </span>&#123;<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * åŒ¹é… + - * / ( ) è¿ç®—ç¬¦</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String SYMBOL = <span class="hljs-string">&quot;\\+|-|\\*|/|\\(|\\)&quot;</span>;<br>  <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String LEFT = <span class="hljs-string">&quot;(&quot;</span>;<br>  <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String RIGHT = <span class="hljs-string">&quot;)&quot;</span>;<br>  <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String ADD = <span class="hljs-string">&quot;+&quot;</span>;<br>  <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String MINUS = <span class="hljs-string">&quot;-&quot;</span>;<br>  <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String TIMES = <span class="hljs-string">&quot;*&quot;</span>;<br>  <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String DIVISION = <span class="hljs-string">&quot;/&quot;</span>;<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * åŠ æ¸› + -</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> LEVEL_01 = <span class="hljs-number">1</span>;<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * ä¹˜é™¤ * /</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> LEVEL_02 = <span class="hljs-number">2</span>;<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ‹¬å·</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> LEVEL_HIGH = Integer.MAX_VALUE;<br>  <span class="hljs-keyword">static</span> Stack&lt;String&gt; stack = <span class="hljs-keyword">new</span> Stack&lt;&gt;();<br>  <span class="hljs-keyword">static</span> List&lt;String&gt; data = Collections.synchronizedList(<span class="hljs-keyword">new</span> ArrayList&lt;String&gt;());<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * å»é™¤æ‰€æœ‰ç©ºç™½ç¬¦</span><br><span class="hljs-comment">   *</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> s</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">replaceAllBlank</span><span class="hljs-params">(String s)</span> </span>&#123;<br>    <span class="hljs-comment">// \\s+ åŒ¹é…ä»»ä½•ç©ºç™½å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰ç­‰, ç­‰ä»·äº[ \f\n\r\t\v]</span><br>    <span class="hljs-keyword">return</span> s.replaceAll(<span class="hljs-string">&quot;\\s+&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * åˆ¤æ–­æ˜¯ä¸æ˜¯æ•°å­— int double long float</span><br><span class="hljs-comment">   * å°šç¡…è°· Java æ•°æ®ç»“æ„å’Œç®—æ³•</span><br><span class="hljs-comment">   * æ›´å¤š Java â€“å¤§æ•°æ® â€“å‰ç«¯ â€“python äººå·¥æ™ºèƒ½ -åŒºå—é“¾èµ„æ–™ä¸‹è½½ï¼Œå¯è®¿é—®ç™¾åº¦ï¼šå°šç¡…è°·å®˜ç½‘</span><br><span class="hljs-comment">   * ç¬¬ 94é¡µ</span><br><span class="hljs-comment">   *</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> s</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isNumber</span><span class="hljs-params">(String s)</span> </span>&#123;<br>    Pattern pattern = Pattern.compile(<span class="hljs-string">&quot;^[-\\+]?[.\\d]*$&quot;</span>);<br>    <span class="hljs-keyword">return</span> pattern.matcher(s).matches();<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * åˆ¤æ–­æ˜¯ä¸æ˜¯è¿ç®—ç¬¦</span><br><span class="hljs-comment">   *</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> s</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isSymbol</span><span class="hljs-params">(String s)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> s.matches(SYMBOL);<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * åŒ¹é…è¿ç®—ç­‰çº§</span><br><span class="hljs-comment">   *</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> s</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">calcLevel</span><span class="hljs-params">(String s)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;+&quot;</span>.equals(s) || <span class="hljs-string">&quot;-&quot;</span>.equals(s)) &#123;<br>      <span class="hljs-keyword">return</span> LEVEL_01;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;*&quot;</span>.equals(s) || <span class="hljs-string">&quot;/&quot;</span>.equals(s)) &#123;<br>      <span class="hljs-keyword">return</span> LEVEL_02;<br>    &#125;<br>    <span class="hljs-keyword">return</span> LEVEL_HIGH;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * åŒ¹é…</span><br><span class="hljs-comment">   *</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> s</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@throws</span> Exception</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> List&lt;String&gt; <span class="hljs-title">doMatch</span><span class="hljs-params">(String s)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>    <span class="hljs-keyword">if</span> (s == <span class="hljs-keyword">null</span> || <span class="hljs-string">&quot;&quot;</span>.equals(s.trim())) &#123;<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(<span class="hljs-string">&quot;data is empty&quot;</span>);&#125;<br>    <span class="hljs-keyword">if</span> (!isNumber(s.charAt(<span class="hljs-number">0</span>) + <span class="hljs-string">&quot;&quot;</span>)) &#123;<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(<span class="hljs-string">&quot;data illeagle,start not with a number&quot;</span>);&#125;<br>    s = replaceAllBlank(s);<br>    String each;<br>    <span class="hljs-keyword">int</span> start = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; s.length(); i++) &#123;<br>      <span class="hljs-keyword">if</span> (isSymbol(s.charAt(i) + <span class="hljs-string">&quot;&quot;</span>)) &#123;<br>        each = s.charAt(i) + <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-comment">//æ ˆä¸ºç©ºï¼Œ(æ“ä½œç¬¦ï¼Œæˆ–è€… æ“ä½œç¬¦ä¼˜å…ˆçº§å¤§äºæ ˆé¡¶ä¼˜å…ˆçº§ &amp;&amp; æ“ä½œç¬¦ä¼˜å…ˆçº§ä¸æ˜¯( )çš„ä¼˜å…ˆçº§ åŠæ˜¯ ) ä¸èƒ½ç›´æ¥å…¥æ ˆ</span><br>        <span class="hljs-keyword">if</span> (stack.isEmpty() || LEFT.equals(each)<br>                || ((calcLevel(each) &gt; calcLevel(stack.peek())) &amp;&amp; calcLevel(each) &lt; LEVEL_HIGH)) &#123;<br>          stack.push(each);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!stack.isEmpty() &amp;&amp; calcLevel(each) &lt;= calcLevel(stack.peek())) &#123;<br>          <span class="hljs-comment">//æ ˆéç©ºï¼Œæ“ä½œç¬¦ä¼˜å…ˆçº§å°äºç­‰äºæ ˆé¡¶ä¼˜å…ˆçº§æ—¶å‡ºæ ˆå…¥åˆ—ï¼Œç›´åˆ°æ ˆä¸ºç©ºï¼Œæˆ–è€…é‡åˆ°äº†(ï¼Œæœ€åæ“ä½œç¬¦å…¥æ ˆ</span><br>          <span class="hljs-keyword">while</span> (!stack.isEmpty() &amp;&amp; calcLevel(each) &lt;= calcLevel(stack.peek())) &#123;<br>            <span class="hljs-keyword">if</span> (calcLevel(stack.peek()) == LEVEL_HIGH) &#123;<br>              <span class="hljs-keyword">break</span>;<br>            &#125;<br>            data.add(stack.pop());<br>          &#125;<br>          stack.push(each);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (RIGHT.equals(each)) &#123;<br><span class="hljs-comment">// ) æ“ä½œç¬¦ï¼Œä¾æ¬¡å‡ºæ ˆå…¥åˆ—ç›´åˆ°ç©ºæ ˆæˆ–è€…é‡åˆ°äº†ç¬¬ä¸€ä¸ª)æ“ä½œç¬¦ï¼Œæ­¤æ—¶)å‡ºæ ˆ</span><br>          <span class="hljs-keyword">while</span> (!stack.isEmpty() &amp;&amp; LEVEL_HIGH &gt;= calcLevel(stack.peek())) &#123;<br>            <span class="hljs-keyword">if</span> (LEVEL_HIGH == calcLevel(stack.peek())) &#123;<br>              stack.pop();<br>              <span class="hljs-keyword">break</span>;<br>            &#125;<br>            data.add(stack.pop());<br>          &#125;<br>        &#125;<br>        start = i; <span class="hljs-comment">//å‰ä¸€ä¸ªè¿ç®—ç¬¦çš„ä½ç½®</span><br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i == s.length() - <span class="hljs-number">1</span> || isSymbol(s.charAt(i + <span class="hljs-number">1</span>) + <span class="hljs-string">&quot;&quot;</span>)) &#123;<br>        each = start == <span class="hljs-number">0</span> ? s.substring(start, i + <span class="hljs-number">1</span>) : s.substring(start + <span class="hljs-number">1</span>, i + <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">if</span> (isNumber(each)) &#123;<br>          data.add(each);<br>          <span class="hljs-keyword">continue</span>;<br>        &#125;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(<span class="hljs-string">&quot;data not match number&quot;</span>);<br>      &#125;<br>    &#125;<br><span class="hljs-comment">//å¦‚æœæ ˆé‡Œè¿˜æœ‰å…ƒç´ ï¼Œæ­¤æ—¶å…ƒç´ éœ€è¦ä¾æ¬¡å‡ºæ ˆå…¥åˆ—ï¼Œå¯ä»¥æƒ³è±¡æ ˆé‡Œå‰©ä¸‹æ ˆé¡¶ä¸º/ï¼Œæ ˆåº•ä¸º+ï¼Œåº”è¯¥ä¾æ¬¡å‡ºæ ˆå…¥åˆ—ï¼Œå¯ä»¥ç›´æ¥ç¿»è½¬æ•´ä¸ª stack æ·»åŠ åˆ°é˜Ÿåˆ—</span><br>    Collections.reverse(stack);<br>    data.addAll(<span class="hljs-keyword">new</span> ArrayList&lt;&gt;(stack));<br>    System.out.println(data);<br>    <span class="hljs-keyword">return</span> data;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * ç®—å‡ºç»“æœ</span><br><span class="hljs-comment">   *</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> list</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Double <span class="hljs-title">doCalc</span><span class="hljs-params">(List&lt;String&gt; list)</span> </span>&#123;<br>    Double d = <span class="hljs-number">0d</span>;<br>    <span class="hljs-keyword">if</span> (list == <span class="hljs-keyword">null</span> || list.isEmpty()) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (list.size() == <span class="hljs-number">1</span>) &#123;<br>      System.out.println(list);<br>      d = Double.valueOf(list.get(<span class="hljs-number">0</span>));<br>      <span class="hljs-keyword">return</span> d;<br>    &#125;<br>    ArrayList&lt;String&gt; list1 = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; list.size(); i++) &#123;<br>      list1.add(list.get(i));<br>      <span class="hljs-keyword">if</span> (isSymbol(list.get(i))) &#123;<br>        Double d1 = doTheMath(list.get(i - <span class="hljs-number">2</span>), list.get(i - <span class="hljs-number">1</span>), list.get(i));<br>        list1.remove(i);<br>        list1.remove(i - <span class="hljs-number">1</span>);<br>        list1.set(i - <span class="hljs-number">2</span>, d1 + <span class="hljs-string">&quot;&quot;</span>);<br>        list1.addAll(list.subList(i + <span class="hljs-number">1</span>, list.size()));<br>        <span class="hljs-keyword">break</span>;<br>      &#125;<br>    &#125;<br>    doCalc(list1);<br>    <span class="hljs-keyword">return</span> d;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * è¿ç®—</span><br><span class="hljs-comment">   *</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> s1</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> s2</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> symbol</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Double <span class="hljs-title">doTheMath</span><span class="hljs-params">(String s1, String s2, String symbol)</span> </span>&#123;<br>    Double result;<br>    <span class="hljs-keyword">switch</span> (symbol) &#123;<br>      <span class="hljs-keyword">case</span> ADD:<br>        result = Double.valueOf(s1) + Double.valueOf(s2);<br>        <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">case</span> MINUS:<br>        result = Double.valueOf(s1) - Double.valueOf(s2);<br>        <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">case</span> TIMES:<br>        result = Double.valueOf(s1) * Double.valueOf(s2);<br>        <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">case</span> DIVISION:<br>        result = Double.valueOf(s1) / Double.valueOf(s2);<br>        <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">default</span>:<br>        result = <span class="hljs-keyword">null</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> result;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>    <span class="hljs-comment">//String math = &quot;9+(3-1)*3+10/2&quot;;</span><br>    String math = <span class="hljs-string">&quot;12.8 + (2 - 3.55)*4+10/5.0&quot;</span>;<br>    <span class="hljs-keyword">try</span> &#123;<br>      doCalc(doMatch(math));<br>    &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>      e.printStackTrace();<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="âš¡ï¸ç»“æœ-v6"><a class="header-anchor" href="#âš¡ï¸ç»“æœ-v6">Â¶</a>âš¡ï¸ç»“æœ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">[<span class="hljs-number">12.8</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3.55</span>, -, <span class="hljs-number">4</span>, *, +, <span class="hljs-number">10</span>, <span class="hljs-number">5.0</span>, /, +]<br>[<span class="hljs-number">8.600000000000001</span>]<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>DataStructure</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2021.01.29-2021.02.04å¿ƒæ€å¤ç›˜</title>
    <link href="/posts/2021/02/04/2021-01-29-2021-02-04%E5%BF%83%E6%80%81%E5%A4%8D%E7%9B%98/"/>
    <url>/posts/2021/02/04/2021-01-29-2021-02-04%E5%BF%83%E6%80%81%E5%A4%8D%E7%9B%98/</url>
    
    <content type="html"><![CDATA[<h3 id="è¿™æ®µæ—¶é—´æˆ‘åšäº†ä»€ä¹ˆï¼Ÿ"><a href="#è¿™æ®µæ—¶é—´æˆ‘åšäº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="è¿™æ®µæ—¶é—´æˆ‘åšäº†ä»€ä¹ˆï¼Ÿ"></a>è¿™æ®µæ—¶é—´æˆ‘åšäº†ä»€ä¹ˆï¼Ÿ</h3><p>è¿™å‡ å¤©ï¼Œæˆ‘ä¸€ç›´åœ¨ç©è‹±é›„è”ç›Ÿï¼Œå¥½åƒå›åˆ°äº†å»å¹´é‚£æ®µä¸Šç˜¾çš„æ—¥å­ã€‚ä»Šå¤©æ˜¯2æœˆ4æ—¥ï¼Œæˆ‘æƒ³ä¸èƒ½è¿™æ ·ä¸‹å»äº†ï¼Œå°±æ˜¯æœ‰å†å¤§çš„ç˜¾ä¹Ÿå¾—æ…¢æ…¢æ¶ˆå»ã€‚æœ¬æ¥åªæ˜¯æ‰“æ‰“å¤§ä¹±æ–—ï¼ŒæŠ€èƒ½ä¹±é£ã€ç¾¤é­”ä¹±èˆï¼Œè¿™ç§æˆ˜æ–—æ¨¡å¼æ˜¯æˆ‘å–œæ¬¢çš„ã€‚åæ¥ï¼Œæˆ‘è¿˜æ²¡æœ‰æ‰“å®šä½èµ›ï¼Œäºæ˜¯åšäº†è®©æˆ‘ç°åœ¨æå…¶åæ‚”çš„ä¸€ä¸ªå†³ç­–ï¼šæ‰“å®šä½èµ›ã€‚è¿™10æŠŠå®šä½èµ›æˆ‘èµ¢äº†8æŠŠï¼Œæ®µä½å®šåˆ°äº†é»„é‡‘2ï¼Œå…¶ä¸­æˆ‘æ“åˆ€å‰‘é­”æ‹¿ä¸‹å…¨èƒœæˆ˜ç»©ã€‚è¿™æ—¶å€™ï¼Œæˆ‘èƒ½æ„Ÿè§‰åˆ°æˆ‘è„‘å­é‡Œåˆ°å¤„éƒ½æ˜¯å…´å¥‹çš„å¤šå·´èƒºï¼Œè¿™ç§æ¸´æœ›å¾—åˆ°è®¤å¯ï¼Œå–œæ¬¢å¯¹çº¿ç»†èŠ‚çš„å¿ƒç†åˆåœ¨ä½œç¥Ÿã€‚æˆ‘æ§åˆ¶ä¸ä½ï¼Œä¸€å£æ°”æ¥è¿å‡ å¤©éƒ½åœ¨æ‰“æ’ä½ï¼Œæ™šä¸Šå°±ç©å¤§ä¹±æ–—ã€‚æˆ‘æ„Ÿè§‰è‡ªå·±çš„ç¾æ„§å¿ƒç†åœ¨æ…¢æ…¢å‡é€€ï¼Œæˆ‘çš„æ½œæ„è¯†åœ¨ä¾µèš€è‡ªå·±è¯´ï¼Œå¿«è¿‡å¹´äº†ï¼Œæ¯å¤©ç©ç©æ¸¸æˆåˆèƒ½æ€ä¹ˆæ ·ï¼Ÿæˆ‘çš„çˆ¶æ¯ä¹Ÿå¯Ÿè§‰å‡ºæ¥æˆ‘çš„å­¦ä¹ åŠ²å¤´åœ¨å‡é€€ï¼Œç£ä¿ƒæˆ‘æ¯å¤©è¦åšæŒå­¦ä¹ ï¼Œå¯æ˜¯æˆ‘å¬åˆ°è¿™äº›è¯ï¼Œè‡ªå°Šå¿ƒä»¿ä½›è¢«æˆ³ç ´ï¼Œæˆ‘æ˜¯ä¸å–œæ¬¢åˆ«äººå¼ºè¿«æˆ‘çš„ï¼Œè¿™ç§å‘½ä»¤è¦æ±‚æˆ‘çš„æ„Ÿè§‰è®©æˆ‘éå¸¸ä¸çˆ½ã€‚å°±ç®—æœ¬æ¥æˆ‘æƒ³è¦å­¦ä¹ ï¼Œä½†æ˜¯è¿™äº‹æˆ‘å¯ä»¥åšï¼Œåˆ«äººä¸èƒ½è¯´ï¼Œä½ è¯´å‡ºæ¥æˆ‘å°±è§‰å¾—ä½ æ˜¯åœ¨å‘½ä»¤æˆ‘ï¼Œé‚£æˆ‘ååä¸éšåˆ«äººçš„æ„ï¼Œå¯èƒ½è¿™å°±æ˜¯æˆ‘è¿™äº›å¹´æ¥æ´»çš„è¿™ä¹ˆå±€ä¿ƒçš„ä¸€å¤§åŸå› ï¼šåæ‰§ã€‚</p><h3 id="ä¸ºä»€ä¹ˆæˆ‘ä¼šä¸Šç˜¾å‘¢ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆæˆ‘ä¼šä¸Šç˜¾å‘¢ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆæˆ‘ä¼šä¸Šç˜¾å‘¢ï¼Ÿ"></a>ä¸ºä»€ä¹ˆæˆ‘ä¼šä¸Šç˜¾å‘¢ï¼Ÿ</h3><p>æˆ‘ä»2014å¹´å¼€å§‹ç©LOLè¿™ä¸ªæ¸¸æˆï¼Œä¹Ÿæ¬ç€è„¸ç§°å¾—ä¸Šä¸€ä¸ªè€ç©å®¶äº†ã€‚ä»¥ç°åœ¨20å²çš„æˆ‘çš„è§’åº¦æ¥çœ‹ï¼Œé€ æˆè¿™ä¸ªç˜¾æ˜¯ç”±å¤šç§å› ç´ é€ æˆçš„ï¼Œä¸€æ–¹é¢æ˜¯è¿™ä¸ªæ¸¸æˆæœ¬èº«è¿·äººçš„è¶£å‘³æ€§å’Œç«æŠ€æ€§ï¼Œå¦ä¸€æ–¹é¢å°±æ˜¯è‡ªå·±çš„å¿ƒç†é—®é¢˜ï¼Œè¿˜æœ‰ä¸€ä»½åŸå› åº”è¯¥æ˜¯ç¯å¢ƒå› ç´ ã€‚</p><p>å®¢è§‚æ¥è¯´ï¼Œè‹±é›„è”ç›Ÿæ˜¯æˆ‘ä»å°åˆ°å¤§ç©è¿‡çš„æ—¶é—´æœ€é•¿ã€ç²¾åŠ›æŠ•å…¥æœ€å¤šï¼Œä¹Ÿæ˜¯æˆ‘æœ€å–œæ¬¢çš„ä¸€æ¬¾æ¸¸æˆã€‚å¯¹äºæˆ‘è¿™ç§è±¹å­å¤´ï¼ˆé›¶å……ï¼‰ï¼Œå®ƒæ˜¯éå¸¸å‹å¥½çš„ï¼Œè€Œä¸”é¢†å¤´äººFakerä¹Ÿæ˜¯ä¸ç”¨çš®è‚¤çš„ï¼Œè¿™å¯¹æˆ‘æ¥è¯´æœ‰å¾ˆå¤§çš„ä¼˜è¶Šæ„Ÿï¼Œè¿™ä¸ªæ¸¸æˆå¹¶ä¸æ˜¯å……é’±å’Œå®åŠ›ç”»ç­‰å·çš„ã€‚å…¶æ¬¡ï¼Œæ’ä½çš„ç´§å¼ åˆºæ¿€ï¼Œå¤§ä¹±æ–—æœ‰æ¥æœ‰å›çš„å›¢æˆ˜ï¼Œè¿‘ä¸¤å¹´äº‘é¡¶ä¹‹å¼ˆçš„å…»è€æ¨¡å¼ï¼Œè¿˜æœ‰æ¯å¹´è½®æ¢çš„å¨±ä¹æ¨¡å¼ï¼Œè¿™äº›é¢ä¸Šæˆ‘éƒ½æœ‰å¾ˆå¤šè®°å¿†ã€‚æ¸¸æˆæœ¬èº«å°±æ˜¯è¶³å¤ŸæˆåŠŸçš„ã€‚</p><p>å…¶äºŒï¼Œæ˜¯æˆ‘çš„æ€§æ ¼åŸå› ï¼Œæˆ‘çš„å¿ƒç†ä¸Šå¯¹è‹±é›„è”ç›Ÿäº§ç”Ÿäº†å¾ˆå¤§çš„ä¾èµ–ã€‚æˆ‘å›æƒ³ä¸€ä¸‹ï¼Œå½“æˆ‘æœ‰é‡è¦çš„äº‹æƒ…è¦å¤„ç†ï¼Œæˆ–è€…æœ‰åä¸‡ç«æ€¥çš„ä½œä¸šè¿˜æ²¡å®Œæˆï¼Œè¿™æ®µæ—¶é—´æˆ‘æ˜¯å¯¹LOLä¸æ„Ÿå…´è¶£çš„ã€‚æˆ‘è®¤ä¸ºå¾ˆå¯èƒ½æ˜¯å› ä¸ºè‡ªå·±æ²¡æœ‰å±…å®‰æ€å±ï¼Œå¯¹è‡ªå·±çš„å‰é€”ä¸èƒ½è®¤çœŸæ´æ‚‰å’Œæ€è€ƒã€‚è€Œä¸”ï¼Œè¿˜æœ‰ä¸€éƒ¨åˆ†å¿ƒé‡Œæ˜¯æ¸´æœ›å¾—åˆ°åˆ«äººå¯¹è‡ªå·±å®åŠ›çš„èµåŒå’Œè®¤å¯ï¼Œä»æ ¹æœ¬ä¸Šæ¥è¯´æˆ‘æš‚ä¸”è®¤ä¸ºæ˜¯ç¤¾äº¤éœ€è¦ï¼Œå›é¦–çœ‹è‡ªå·±ç©ºç©ºå¦‚ä¹Ÿçš„æœ‹å‹åœˆå’Œç©ºé—´ï¼Œæ˜¯ä¸æ˜¯è‡ªå·±å¤ªè¿‡è‡ªä½œæ¸…é«˜äº†ï¼Œä¸å¤Ÿå¹³æ˜“è¿‘äººå‘¢ï¼Ÿ</p><p>æœ€åï¼Œæˆ‘è®¤ä¸ºå½±å“åŠ›æœ€å°çš„æ‰æ˜¯ç¯å¢ƒå› ç´ ã€‚æˆ‘èº«è¾¹æ‰“è‹±é›„è”ç›Ÿè¿™ä¸ªæ¸¸æˆçš„èµ„æ·±ç©å®¶ä¹Ÿéå¸¸å¤šï¼Œå¯¹æˆ‘å¤šå¤šå°‘å°‘é€ æˆäº†äº›æ½œç§»é»˜åŒ–çš„å½±å“ã€‚å½“ç„¶ï¼Œè¿™ä¹Ÿä¸æ˜¯åäº‹ï¼Œè¿™ç§ç¯å¢ƒä¹Ÿç»™æˆ‘å¸¦æ¥è¿‡ç‰¹åˆ«å¤šæ¬¢ä¹æ—¶å…‰ï¼Œåªæ˜¯è¯´å¯¹ç°åœ¨çš„æˆ‘æ˜¯æœ‰äº›è´Ÿé¢å½±å“çš„ã€‚æˆ‘ä¸€ç›´è®¤ä¸ºä¸ªäººæ”¹å˜ä¸äº†ç¯å¢ƒï¼Œå°±è®©è‡ªå·±å­¦ä¼šé€‚åº”ã€‚ä½†æˆ‘è§‰å¾—è¿™é˜¶æ®µæˆ‘åº”è¯¥å­¦ä¼šé€ƒç¦»å’Œè§†è€Œä¸è§ï¼Œçœ¼ä¸è§ä¸ºå‡€å¯èƒ½æ˜¯å¯¹çš„å§ã€‚</p><h3 id="æ¥ä¸‹æ¥æ€ä¹ˆé¿å…è¿™ç§ç˜¾ï¼Ÿ"><a href="#æ¥ä¸‹æ¥æ€ä¹ˆé¿å…è¿™ç§ç˜¾ï¼Ÿ" class="headerlink" title="æ¥ä¸‹æ¥æ€ä¹ˆé¿å…è¿™ç§ç˜¾ï¼Ÿ"></a>æ¥ä¸‹æ¥æ€ä¹ˆé¿å…è¿™ç§ç˜¾ï¼Ÿ</h3><p>1. </p>]]></content>
    
    
    
    <tags>
      
      <tag>ç”Ÿæ´»</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®ç»“æ„ï¼šé“¾è¡¨</title>
    <link href="/posts/2021/01/29/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E9%93%BE%E8%A1%A8/"/>
    <url>/posts/2021/01/29/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E9%93%BE%E8%A1%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="å•é“¾è¡¨"><a href="#å•é“¾è¡¨" class="headerlink" title="å•é“¾è¡¨"></a>å•é“¾è¡¨</h2><h3 id="é“¾è¡¨ä»‹ç»"><a href="#é“¾è¡¨ä»‹ç»" class="headerlink" title="é“¾è¡¨ä»‹ç»"></a>é“¾è¡¨ä»‹ç»</h3><p>å•é“¾è¡¨æ˜¯æœ‰åºçš„åˆ—è¡¨ï¼Œä½†æ˜¯å®ƒåœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ˜¯è¿™æ ·çš„ï¼š</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/æ•°æ®ç»“æ„ï¼šé“¾è¡¨/1.png.jpg" alt="é“¾è¡¨å­˜å‚¨ç»“æ„" style="zoom:80%;"><p>å®ƒçš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p><ul><li><p>é“¾è¡¨æ˜¯ä»¥èŠ‚ç‚¹çš„æ–¹å¼æ¥å­˜å‚¨çš„ï¼Œä¸ºé“¾å¼å­˜å‚¨ã€‚</p></li><li><p>é“¾è¡¨çš„æ¯ä¸ªèŠ‚ç‚¹åŒ…å«<code>data</code>åŸŸï¼Œ<code>next</code>åŸŸï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p></li><li><p>é“¾è¡¨çš„å„ä¸ªèŠ‚ç‚¹ä¸ä¸€å®šæ˜¯è¿ç»­å­˜å‚¨ã€‚</p></li><li><p>é“¾è¡¨åˆ†å¸¦å¤´ç»“ç‚¹çš„é“¾è¡¨å’Œæ²¡æœ‰å¤´ç»“ç‚¹çš„é“¾è¡¨ï¼Œæ ¹æ®å®é™…çš„éœ€æ±‚æ¥ç¡®å®šã€‚</p></li><li><p>å•é“¾è¡¨ï¼ˆå¸¦å¤´ç»“ç‚¹ï¼‰é€»è¾‘ç»“æ„ç¤ºæ„å›¾å¦‚ä¸‹</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/æ•°æ®ç»“æ„ï¼šé“¾è¡¨/2.jpg" alt="å¸¦å¤´ç»“ç‚¹é“¾è¡¨" style="zoom:80%;"></li></ul><h3 id="å•é“¾è¡¨çš„åº”ç”¨å®ä¾‹"><a href="#å•é“¾è¡¨çš„åº”ç”¨å®ä¾‹" class="headerlink" title="å•é“¾è¡¨çš„åº”ç”¨å®ä¾‹"></a>å•é“¾è¡¨çš„åº”ç”¨å®ä¾‹</h3><p>ä½¿ç”¨å¸¦å¤´ç»“ç‚¹çš„å•å‘é“¾è¡¨å®ç°â€”â€”æ°´æµ’è‹±é›„æ’è¡Œæ¦œç®¡ç†å®Œæˆå¯¹è‹±é›„äººç‰©çš„å¢åˆ æ”¹æŸ¥æ“ä½œã€‚</p><blockquote><p>ç¬¬ä¸€ç§æ–¹æ³•ï¼šæ·»åŠ è‹±é›„æ—¶ï¼Œä¸è€ƒè™‘åº§æ¬¡ï¼Œç›´æ¥æ·»åŠ åˆ°é“¾è¡¨å°¾éƒ¨</p></blockquote><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/æ•°æ®ç»“æ„ï¼šé“¾è¡¨/3.jpg" alt="ç¬¬ä¸€ç§æ–¹æ³•" style="zoom:80%;"><blockquote><p>ç¬¬äºŒç§æ–¹å¼åœ¨æ·»åŠ è‹±é›„æ—¶ï¼Œæ ¹æ®æ’åå°†è‹±é›„æ’å…¥åˆ°æŒ‡å®šä½ç½®(å¦‚æœæœ‰è¿™ä¸ªæ’åï¼Œåˆ™æ·»åŠ å¤±è´¥ï¼Œå¹¶ç»™å‡ºæç¤ºã€‚</p></blockquote><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/æ•°æ®ç»“æ„ï¼šé“¾è¡¨/4.jpg" alt="ç¬¬äºŒç§æ–¹æ³•" style="zoom:80%;"><blockquote><p>ä¿®æ”¹èŠ‚ç‚¹åŠŸèƒ½</p></blockquote><p>å…ˆæ‰¾åˆ°è¯¥èŠ‚ç‚¹ï¼Œé€šè¿‡éå†ï¼Œ(2) temp.name = newHeroNode.name ; temp.nickname= newHeroNode.nicknameã€‚</p><blockquote><p>åˆ é™¤èŠ‚ç‚¹</p></blockquote><p>â€‹    <img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/æ•°æ®ç»“æ„ï¼šé“¾è¡¨/5.jpg" alt="åˆ é™¤èŠ‚ç‚¹æ€è·¯" style="zoom:80%;"></p><h3 id="å•é“¾è¡¨åº”ç”¨ä»£ç å®ç°"><a href="#å•é“¾è¡¨åº”ç”¨ä»£ç å®ç°" class="headerlink" title="å•é“¾è¡¨åº”ç”¨ä»£ç å®ç°"></a>å•é“¾è¡¨åº”ç”¨ä»£ç å®ç°</h3><ol><li><p>é¦–å…ˆæˆ‘ä»¬<strong>å®šä¹‰æ¢å±±å¥½æ±‰èŠ‚ç‚¹</strong>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æ°´æµ’å¥½æ±‰èŠ‚ç‚¹</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HeroNode</span> </span>&#123;<br><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> no; <span class="hljs-comment">// åº§æ¬¡</span><br>  <span class="hljs-keyword">public</span> String name; <span class="hljs-comment">// åå­—</span><br>  <span class="hljs-keyword">public</span> String nickname; <span class="hljs-comment">// ç»°å·</span><br>  <span class="hljs-keyword">public</span> HeroNode nextHero; <span class="hljs-comment">// æŒ‡å‘ä¸‹ä¸€ä¸ªå¥½æ±‰èŠ‚ç‚¹</span><br><br>  <span class="hljs-comment">// æ„é€ å™¨</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">HeroNode</span><span class="hljs-params">(<span class="hljs-keyword">int</span> hNo, String hName, String hNickName)</span> </span>&#123;<br>    <span class="hljs-keyword">this</span>.no = hNo;<br>    <span class="hljs-keyword">this</span>.name = hName;<br>    <span class="hljs-keyword">this</span>.nickname = hNickName;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   *  æ‰“å°å¥½æ±‰ä¿¡æ¯</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;HeroNode&#123;&quot;</span> +<br>            <span class="hljs-string">&quot;åº§æ¬¡:&quot;</span> + no +<br>            <span class="hljs-string">&quot;, å§“åï¼š&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>            <span class="hljs-string">&quot;, ç»°å·ï¼š&#x27;&quot;</span> + nickname + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>            <span class="hljs-string">&quot;&#125;&quot;</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ç„¶å<strong>å®šä¹‰å•é“¾è¡¨æ“ä½œ</strong>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å•é“¾è¡¨ç®¡ç†æ°´æµ’å¥½æ±‰</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SingleLinkedList</span> </span>&#123;<br><br>  <span class="hljs-comment">// å¤´ç»“ç‚¹</span><br>  <span class="hljs-keyword">private</span>  HeroNode headNode = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">0</span>, <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ‰“å°é“¾è¡¨</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">printLinkList</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// åˆ¤ç©º</span><br>    <span class="hljs-keyword">if</span> (isLinkListEmpty()) &#123;<br>      System.out.println(<span class="hljs-string">&quot;é“¾è¡¨ä¸ºç©º&quot;</span>);<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-comment">// è¾…åŠ©å˜é‡tempéå†å•é“¾è¡¨</span><br>    HeroNode temp = headNode.nextHero;<br>    <span class="hljs-keyword">while</span> (temp != <span class="hljs-keyword">null</span>) &#123;<br>      System.out.println(temp.toString());<br>      temp = temp.nextHero;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * å•é“¾è¡¨ç©º</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isLinkListEmpty</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> headNode.nextHero == <span class="hljs-keyword">null</span>;<br>  &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>ç¼–å†™ç¬¬ä¸€ç§æ€è·¯ï¼šç›´æ¥æ·»åŠ å¥½æ±‰åˆ°å°¾éƒ¨æ–¹æ³•ã€‚</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ·»åŠ èŠ‚ç‚¹åˆ°å•é“¾è¡¨(ä¸è€ƒè™‘åº§æ¬¡)</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addIgnoreNo</span><span class="hljs-params">(HeroNode heroNode)</span> </span>&#123;<br>    <span class="hljs-comment">// è¾…åŠ©å˜é‡tempéå†å•é“¾è¡¨</span><br>    HeroNode temp = headNode;<br>    <span class="hljs-comment">// åˆ°è¾¾å•é“¾è¡¨å°¾éƒ¨</span><br>    <span class="hljs-keyword">while</span> (temp.nextHero != <span class="hljs-keyword">null</span>) &#123;<br>        temp = temp.nextHero;<br>    &#125;<br>    temp.nextHero = heroNode;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™<strong>æµ‹è¯•ç±»è¿›è¡Œæµ‹è¯•</strong>ï¼Œå¥½æ±‰æŒ‰ç…§ä¹±åºæ’å…¥ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å•é“¾è¡¨åº”ç”¨æµ‹è¯•ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SingleLinkedListTest</span> </span>&#123;<br><br>  <span class="hljs-comment">// æµ‹è¯•å¥½æ±‰ç›´æ¥æ’å…¥å•é“¾è¡¨å°¾éƒ¨</span><br>  <span class="hljs-meta">@Test</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test1</span><span class="hljs-params">()</span> </span>&#123;<br><br>    <span class="hljs-comment">// åˆ›å»ºèŠ‚ç‚¹</span><br>    HeroNode hero1 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;å¢ä¿Šä¹‰&quot;</span>, <span class="hljs-string">&quot;ç‰éº’éºŸ&quot;</span>);<br>    HeroNode hero3 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;å®‹æ±Ÿ&quot;</span>, <span class="hljs-string">&quot;åŠæ—¶é›¨&quot;</span>);<br>    HeroNode hero2 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;å´ç”¨&quot;</span>, <span class="hljs-string">&quot;æ™ºå¤šæ˜Ÿ&quot;</span>);<br>    HeroNode hero4 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">4</span>, <span class="hljs-string">&quot;æ—å†²&quot;</span>, <span class="hljs-string">&quot;è±¹å­å¤´&quot;</span>);<br><br>    <span class="hljs-comment">// å¼•å…¥é“¾è¡¨</span><br>    SingleLinkedList singleLinkedList = <span class="hljs-keyword">new</span> SingleLinkedList();<br><br>    <span class="hljs-comment">// æ·»åŠ å¥½æ±‰èŠ‚ç‚¹åˆ°å•é“¾è¡¨</span><br>    singleLinkedList.addIgnoreNo(hero1);<br>    singleLinkedList.addIgnoreNo(hero2);<br>    singleLinkedList.addIgnoreNo(hero3);<br>    singleLinkedList.addIgnoreNo(hero4);<br><br>    <span class="hljs-comment">// æ‰“å°å•é“¾è¡¨</span><br>    singleLinkedList.printLinkList();<br><br>  &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœä¸ºï¼šé“¾è¡¨è‹±é›„æ’åºæŒ‰ç…§æ·»åŠ é¡ºåºï¼Œå¹¶ä¸æ˜¯æŒ‰ç…§åº§æ¬¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">HeroNode&#123;åº§æ¬¡:<span class="hljs-number">3</span>, å§“åï¼š<span class="hljs-string">&#x27;å¢ä¿Šä¹‰&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;ç‰éº’éºŸ&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">2</span>, å§“åï¼š<span class="hljs-string">&#x27;å´ç”¨&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;æ™ºå¤šæ˜Ÿ&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">1</span>, å§“åï¼š<span class="hljs-string">&#x27;å®‹æ±Ÿ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;åŠæ—¶é›¨&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">4</span>, å§“åï¼š<span class="hljs-string">&#x27;æ—å†²&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;è±¹å­å¤´&#x27;</span>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ä¸‹é¢å®ç°<strong>å•é“¾è¡¨æ’å…¥å¥½æ±‰èŠ‚ç‚¹å°†æŒ‰ç…§åº§æ¬¡æ¥æ’åº</strong>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ·»åŠ èŠ‚ç‚¹åˆ°é“¾è¡¨ï¼ˆæŒ‰ç…§åº§æ¬¡ï¼‰</span><br><span class="hljs-comment">   */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addByNo</span><span class="hljs-params">(HeroNode heroNode)</span> </span>&#123;<br>    <span class="hljs-comment">// è¾…åŠ©å˜é‡tempéå†å•é“¾</span><br>    HeroNode temp = headNode;<br>    <span class="hljs-comment">// æ ‡å¿—å¥½æ±‰æ˜¯å¦å·²å­˜åœ¨</span><br>    <span class="hljs-keyword">boolean</span> isExist = <span class="hljs-keyword">false</span>;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-keyword">true</span>) &#123;<br>        <span class="hljs-keyword">if</span> (temp.nextHero == <span class="hljs-keyword">null</span>)&#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (temp.nextHero.no &gt; heroNode.no) &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (temp.nextHero.no == heroNode.no) &#123; <span class="hljs-comment">// æœ‰é‡å¤å¥½æ±‰</span><br>            isExist = <span class="hljs-keyword">true</span>;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        temp = temp.nextHero;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (isExist) &#123;<br>        System.out.println(<span class="hljs-string">&quot;ç¬¬&quot;</span>+ heroNode.no + <span class="hljs-string">&quot;åº§æ¬¡å¥½æ±‰å·²å­˜åœ¨&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">// æ’å…¥è‹±é›„èŠ‚ç‚¹</span><br>    heroNode.nextHero = temp.nextHero;<br>    temp.nextHero = heroNode;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>ç¼–å†™æµ‹è¯•æ–¹æ³•æµ‹è¯•æŒ‰åº§æ¬¡æ’å…¥å¥½æ±‰åˆ°å•é“¾è¡¨</strong>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æµ‹è¯•æŒ‰åº§æ¬¡æ’å…¥å¥½æ±‰åˆ°å•é“¾è¡¨</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test2</span><span class="hljs-params">()</span> </span>&#123;<br><br>    <span class="hljs-comment">// åˆ›å»ºèŠ‚ç‚¹</span><br>    HeroNode hero1 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;å¢ä¿Šä¹‰&quot;</span>, <span class="hljs-string">&quot;ç‰éº’éºŸ&quot;</span>);<br>    HeroNode hero3 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;å®‹æ±Ÿ&quot;</span>, <span class="hljs-string">&quot;åŠæ—¶é›¨&quot;</span>);<br>    HeroNode hero2 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;å´ç”¨&quot;</span>, <span class="hljs-string">&quot;æ™ºå¤šæ˜Ÿ&quot;</span>);<br>    HeroNode hero4 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">4</span>, <span class="hljs-string">&quot;æ—å†²&quot;</span>, <span class="hljs-string">&quot;è±¹å­å¤´&quot;</span>);<br><br>    <span class="hljs-comment">// å¼•å…¥é“¾è¡¨</span><br>    SingleLinkedList singleLinkedList = <span class="hljs-keyword">new</span> SingleLinkedList();<br><br>    <span class="hljs-comment">// æ·»åŠ å¥½æ±‰èŠ‚ç‚¹åˆ°å•é“¾è¡¨</span><br>    singleLinkedList.addByNo(hero1);<br>    singleLinkedList.addByNo(hero2);<br>    singleLinkedList.addByNo(hero3);<br>    singleLinkedList.addByNo(hero4);<br><br>    <span class="hljs-comment">// æ‰“å°å•é“¾è¡¨</span><br>    singleLinkedList.printLinkList();<br><br>&#125;<br></code></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">HeroNode&#123;åº§æ¬¡:<span class="hljs-number">1</span>, å§“åï¼š<span class="hljs-string">&#x27;å®‹æ±Ÿ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;åŠæ—¶é›¨&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">2</span>, å§“åï¼š<span class="hljs-string">&#x27;å´ç”¨&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;æ™ºå¤šæ˜Ÿ&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">3</span>, å§“åï¼š<span class="hljs-string">&#x27;å¢ä¿Šä¹‰&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;ç‰éº’éºŸ&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">4</span>, å§“åï¼š<span class="hljs-string">&#x27;æ—å†²&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;è±¹å­å¤´&#x27;</span>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>å®Œå–„å•é“¾è¡¨èŠ‚ç‚¹ä¿®æ”¹æ“ä½œ</strong>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ ¹æ®åº§æ¬¡ä¿®æ”¹å¥½æ±‰ä¿¡æ¯</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span> <span class="hljs-params">(HeroNode newHeroNode)</span></span>&#123;<br>    <span class="hljs-comment">// åˆ¤ç©º</span><br>    <span class="hljs-keyword">if</span> (headNode.nextHero == <span class="hljs-keyword">null</span>) &#123;<br>        System.out.println(<span class="hljs-string">&quot;é“¾è¡¨ç©ºï¼Œä¿®æ”¹å¤±è´¥&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-comment">// æ‰¾åˆ°éœ€è¦ä¿®æ”¹çš„å¥½æ±‰èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">boolean</span> isFound = <span class="hljs-keyword">false</span>; <span class="hljs-comment">// æ˜¯å¦æ‰¾åˆ°æ ‡å¿—</span><br>    HeroNode temp = headNode.nextHero;<br>    <span class="hljs-keyword">while</span> (temp != <span class="hljs-keyword">null</span>) &#123;<br>        <span class="hljs-keyword">if</span> (temp.no == newHeroNode.no) &#123;<br>            isFound = <span class="hljs-keyword">true</span>;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        temp = temp.nextHero;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (isFound) &#123;<br>        temp.name = newHeroNode.name;<br>        temp.nickname = newHeroNode.nickname;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;å¾ˆé—æ†¾ï¼Œæ²¡æœ‰æ‰¾åˆ°&quot;</span>);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æµ‹è¯•ä¿®æ”¹å¥½æ±‰ä¿¡æ¯</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test3</span><span class="hljs-params">()</span> </span>&#123;<br><br>    <span class="hljs-comment">// åˆ›å»ºèŠ‚ç‚¹</span><br>    HeroNode hero1 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;å¢ä¿Šä¹‰&quot;</span>, <span class="hljs-string">&quot;ç‰éº’éºŸ&quot;</span>);<br>    HeroNode hero3 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;å®‹æ±Ÿ&quot;</span>, <span class="hljs-string">&quot;åŠæ—¶é›¨&quot;</span>);<br>    HeroNode hero2 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;å´ç”¨&quot;</span>, <span class="hljs-string">&quot;æ™ºå¤šæ˜Ÿ&quot;</span>);<br>    HeroNode hero4 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">4</span>, <span class="hljs-string">&quot;æ—å†²&quot;</span>, <span class="hljs-string">&quot;è±¹å­å¤´&quot;</span>);<br><br>    <span class="hljs-comment">// å¼•å…¥é“¾è¡¨</span><br>    SingleLinkedList singleLinkedList = <span class="hljs-keyword">new</span> SingleLinkedList();<br><br>    <span class="hljs-comment">// æ·»åŠ å¥½æ±‰èŠ‚ç‚¹åˆ°å•é“¾è¡¨</span><br>    singleLinkedList.addByNo(hero1);<br>    singleLinkedList.addByNo(hero2);<br>    singleLinkedList.addByNo(hero3);<br>    singleLinkedList.addByNo(hero4);<br><br>    <span class="hljs-comment">// æ‰“å°å•é“¾è¡¨</span><br>    System.out.println(<span class="hljs-string">&quot;ä¿®æ”¹å‰-------------------&quot;</span>);<br>    singleLinkedList.printLinkList();<br><br>    HeroNode newHeroNode = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;é›·æ¬§&quot;</span>, <span class="hljs-string">&quot;å¤§ç‹®å­&quot;</span>);<br>    singleLinkedList.update(newHeroNode);<br>    System.out.println(<span class="hljs-string">&quot;ä¿®æ”¹å--------------------&quot;</span>);<br>    singleLinkedList.printLinkList();<br>&#125;<br></code></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java">ä¿®æ”¹å‰-------------------<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">1</span>, å§“åï¼š<span class="hljs-string">&#x27;å®‹æ±Ÿ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;åŠæ—¶é›¨&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">2</span>, å§“åï¼š<span class="hljs-string">&#x27;å´ç”¨&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;æ™ºå¤šæ˜Ÿ&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">3</span>, å§“åï¼š<span class="hljs-string">&#x27;å¢ä¿Šä¹‰&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;ç‰éº’éºŸ&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">4</span>, å§“åï¼š<span class="hljs-string">&#x27;æ—å†²&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;è±¹å­å¤´&#x27;</span>&#125;<br>ä¿®æ”¹å--------------------<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">1</span>, å§“åï¼š<span class="hljs-string">&#x27;å®‹æ±Ÿ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;åŠæ—¶é›¨&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">2</span>, å§“åï¼š<span class="hljs-string">&#x27;å´ç”¨&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;æ™ºå¤šæ˜Ÿ&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">3</span>, å§“åï¼š<span class="hljs-string">&#x27;é›·æ¬§&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;å¤§ç‹®å­&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">4</span>, å§“åï¼š<span class="hljs-string">&#x27;æ—å†²&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;è±¹å­å¤´&#x27;</span>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>å®Œå–„å•é“¾è¡¨èŠ‚ç‚¹çš„åˆ é™¤æ“ä½œ</strong>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åˆ é™¤å¥½æ±‰èŠ‚ç‚¹</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">(<span class="hljs-keyword">int</span> sNo)</span> </span>&#123;<br>    HeroNode temp = headNode;<br>    <span class="hljs-comment">// æ ‡å¿—æ˜¯å¦æ‰¾åˆ°å¾…åˆ é™¤èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">boolean</span> isFound = <span class="hljs-keyword">false</span>;<br>    <span class="hljs-keyword">while</span> (temp.nextHero != <span class="hljs-keyword">null</span>) &#123;<br>        <span class="hljs-keyword">if</span> (temp.nextHero.no == sNo) &#123;<br>            <span class="hljs-comment">// æ‰¾åˆ°äº†å¾…åˆ é™¤èŠ‚ç‚¹å‰ä¸€ä¸ªèŠ‚ç‚¹</span><br>            isFound = <span class="hljs-keyword">true</span>;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        temp = temp.nextHero;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (isFound) &#123;<br>        <span class="hljs-comment">// åˆ é™¤èŠ‚ç‚¹</span><br>        temp.nextHero = temp.nextHero.nextHero;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;åº§æ¬¡ä¸º&quot;</span>+ sNo +<span class="hljs-string">&quot;çš„å¥½æ±‰ä¸å­˜åœ¨&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•åˆ é™¤</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æµ‹è¯•åˆ é™¤å¥½æ±‰</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test4</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// åˆ›å»ºèŠ‚ç‚¹</span><br>    HeroNode hero1 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;å¢ä¿Šä¹‰&quot;</span>, <span class="hljs-string">&quot;ç‰éº’éºŸ&quot;</span>);<br>    HeroNode hero3 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;å®‹æ±Ÿ&quot;</span>, <span class="hljs-string">&quot;åŠæ—¶é›¨&quot;</span>);<br>    HeroNode hero2 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;å´ç”¨&quot;</span>, <span class="hljs-string">&quot;æ™ºå¤šæ˜Ÿ&quot;</span>);<br>    HeroNode hero4 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">4</span>, <span class="hljs-string">&quot;æ—å†²&quot;</span>, <span class="hljs-string">&quot;è±¹å­å¤´&quot;</span>);<br><br>    <span class="hljs-comment">// å¼•å…¥é“¾è¡¨</span><br>    SingleLinkedList singleLinkedList = <span class="hljs-keyword">new</span> SingleLinkedList();<br><br>    <span class="hljs-comment">// æ·»åŠ å¥½æ±‰èŠ‚ç‚¹åˆ°å•é“¾è¡¨</span><br>    singleLinkedList.addByNo(hero1);<br>    singleLinkedList.addByNo(hero2);<br>    singleLinkedList.addByNo(hero3);<br>    singleLinkedList.addByNo(hero4);<br><br>    <span class="hljs-comment">// æ‰“å°å•é“¾è¡¨</span><br>    System.out.println(<span class="hljs-string">&quot;åˆ é™¤å‰-------------------&quot;</span>);<br>    singleLinkedList.printLinkList();<br><br>    singleLinkedList.delete(<span class="hljs-number">3</span>);<br>    System.out.println(<span class="hljs-string">&quot;åˆ é™¤å-------------------&quot;</span>);<br>    singleLinkedList.printLinkList();<br>&#125;<br></code></pre></td></tr></table></figure><p>è¾“å‡ºå†…å®¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java">åˆ é™¤å‰-------------------<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">1</span>, å§“åï¼š<span class="hljs-string">&#x27;å®‹æ±Ÿ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;åŠæ—¶é›¨&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">2</span>, å§“åï¼š<span class="hljs-string">&#x27;å´ç”¨&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;æ™ºå¤šæ˜Ÿ&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">3</span>, å§“åï¼š<span class="hljs-string">&#x27;å¢ä¿Šä¹‰&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;ç‰éº’éºŸ&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">4</span>, å§“åï¼š<span class="hljs-string">&#x27;æ—å†²&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;è±¹å­å¤´&#x27;</span>&#125;<br>åˆ é™¤å-------------------<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">1</span>, å§“åï¼š<span class="hljs-string">&#x27;å®‹æ±Ÿ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;åŠæ—¶é›¨&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">2</span>, å§“åï¼š<span class="hljs-string">&#x27;å´ç”¨&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;æ™ºå¤šæ˜Ÿ&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">4</span>, å§“åï¼š<span class="hljs-string">&#x27;æ—å†²&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;è±¹å­å¤´&#x27;</span>&#125;<br></code></pre></td></tr></table></figure></li></ol><h3 id="å•é“¾è¡¨å¸¸è§é¢˜ç›®"><a href="#å•é“¾è¡¨å¸¸è§é¢˜ç›®" class="headerlink" title="å•é“¾è¡¨å¸¸è§é¢˜ç›®"></a>å•é“¾è¡¨å¸¸è§é¢˜ç›®</h3><p>æˆ‘ä»¬ç»§ç»­ç”¨ä¸Šé¢å®šä¹‰çš„æ•°æ®ç»“æ„æ¥å†™ã€‚</p><h4 id="æ±‚å•é“¾è¡¨æœ‰æ•ˆèŠ‚ç‚¹ä¸ªæ•°"><a href="#æ±‚å•é“¾è¡¨æœ‰æ•ˆèŠ‚ç‚¹ä¸ªæ•°" class="headerlink" title="æ±‚å•é“¾è¡¨æœ‰æ•ˆèŠ‚ç‚¹ä¸ªæ•°"></a>æ±‚å•é“¾è¡¨æœ‰æ•ˆèŠ‚ç‚¹ä¸ªæ•°</h4><p><strong>é¢˜æ„ï¼šä¼ å…¥ä¸€ä¸ªå•é“¾è¡¨å¤´ç»“ç‚¹ï¼Œè¿”å›æœ‰æ•ˆèŠ‚ç‚¹ä¸ªæ•°ã€‚</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è·å–å•é“¾è¡¨æœ‰æ•ˆèŠ‚ç‚¹ä¸ªæ•°</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">length</span><span class="hljs-params">(HeroNode headNode)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (headNode.nextHero == <span class="hljs-keyword">null</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">int</span> length = <span class="hljs-number">0</span>;<br>    HeroNode cur = headNode.nextHero;<br>    <span class="hljs-keyword">while</span> (cur != <span class="hljs-keyword">null</span>) &#123;<br>        length++;<br>        cur = cur.nextHero;<br>    &#125;<br>    <span class="hljs-keyword">return</span> length;<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment">  * è·å–å•é“¾è¡¨å¤´ç»“ç‚¹</span><br><span class="hljs-comment">  */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> HeroNode <span class="hljs-title">getHeadNode</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> headNode;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æµ‹è¯•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æµ‹è¯•è·å–å•é“¾è¡¨é•¿åº¦</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test5</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// åˆ›å»ºèŠ‚ç‚¹</span><br>    HeroNode hero1 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;å¢ä¿Šä¹‰&quot;</span>, <span class="hljs-string">&quot;ç‰éº’éºŸ&quot;</span>);<br>    HeroNode hero3 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;å®‹æ±Ÿ&quot;</span>, <span class="hljs-string">&quot;åŠæ—¶é›¨&quot;</span>);<br>    HeroNode hero2 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;å´ç”¨&quot;</span>, <span class="hljs-string">&quot;æ™ºå¤šæ˜Ÿ&quot;</span>);<br>    HeroNode hero4 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">4</span>, <span class="hljs-string">&quot;æ—å†²&quot;</span>, <span class="hljs-string">&quot;è±¹å­å¤´&quot;</span>);<br><br>    <span class="hljs-comment">// å¼•å…¥é“¾è¡¨</span><br>    SingleLinkedList singleLinkedList = <span class="hljs-keyword">new</span> SingleLinkedList();<br><br>    <span class="hljs-comment">// æ·»åŠ å¥½æ±‰èŠ‚ç‚¹åˆ°å•é“¾è¡¨</span><br>    singleLinkedList.addByNo(hero1);<br>    singleLinkedList.addByNo(hero2);<br>    singleLinkedList.addByNo(hero3);<br>    singleLinkedList.addByNo(hero4);<br><br>    <span class="hljs-comment">// è·å–é•¿åº¦</span><br>    <span class="hljs-keyword">int</span> length = SingleLinkedList.length(singleLinkedList.getHeadNode());<br>    System.out.println(<span class="hljs-string">&quot;å•é“¾è¡¨é•¿åº¦ä¸º&quot;</span> + length);<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">å•é“¾è¡¨é•¿åº¦ä¸º<span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><h4 id="æŸ¥æ‰¾å•é“¾è¡¨å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹"><a href="#æŸ¥æ‰¾å•é“¾è¡¨å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹" class="headerlink" title="æŸ¥æ‰¾å•é“¾è¡¨å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹"></a>æŸ¥æ‰¾å•é“¾è¡¨å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹</h4><p><strong>æ€è·¯ï¼š</strong></p><ol><li>ç¼–å†™æ–¹æ³•ï¼Œæ¥å—headèŠ‚ç‚¹ï¼ŒåŒæ—¶æ¥æ”¶ä¸€ä¸ªindex</li><li>index è¡¨ç¤ºå€’æ•°ç¬¬indexä¸ªèŠ‚ç‚¹</li><li>å…ˆæŠŠé“¾è¡¨ä»å¤´åˆ°å°¾éå†ï¼Œå¾—åˆ°é“¾è¡¨é•¿åº¦ length</li><li>å¾—åˆ° length åï¼Œä»é“¾è¡¨ç¬¬ä¸€ä¸ªå¼€å§‹å‘åéå†(size - index)ä¸ªèŠ‚ç‚¹ï¼Œå°±å¯ä»¥å¾—åˆ°</li><li>å¦‚æœæ‰¾åˆ°äº†ï¼Œè¿”å›è¯¥èŠ‚ç‚¹ï¼Œå¦åˆ™è¿”å›null</li></ol><p><strong>ä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">  * è·å–å•é“¾è¡¨å€’æ•°ç¬¬indexä¸ªèŠ‚ç‚¹</span><br><span class="hljs-comment">  */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> HeroNode <span class="hljs-title">findLastIndexNode</span><span class="hljs-params">(HeroNode headNode, <span class="hljs-keyword">int</span> index)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (headNode.nextHero == <span class="hljs-keyword">null</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>    &#125;<br>    <span class="hljs-keyword">int</span> length = length(headNode);<br>    <span class="hljs-keyword">if</span> (index &lt;= <span class="hljs-number">0</span> || index &gt; length) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>    &#125;<br>    <span class="hljs-comment">// ä»ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå‘åéå† length-indexä¸ªèŠ‚ç‚¹</span><br>    HeroNode cur = headNode.nextHero;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; length - index; i++) &#123;<br>        cur = cur.nextHero;<br>    &#125;<br>    <span class="hljs-keyword">return</span> cur;<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è·å–å•é“¾è¡¨æœ‰æ•ˆèŠ‚ç‚¹ä¸ªæ•°</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">length</span><span class="hljs-params">(HeroNode headNode)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (headNode.nextHero == <span class="hljs-keyword">null</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">int</span> length = <span class="hljs-number">0</span>;<br>    HeroNode cur = headNode.nextHero;<br>    <span class="hljs-keyword">while</span> (cur != <span class="hljs-keyword">null</span>) &#123;<br>        length++;<br>        cur = cur.nextHero;<br>    &#125;<br>    <span class="hljs-keyword">return</span> length;<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment">  * è·å–å•é“¾è¡¨å¤´ç»“ç‚¹</span><br><span class="hljs-comment">  */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> HeroNode <span class="hljs-title">getHeadNode</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> headNode;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æµ‹è¯•</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æµ‹è¯•è·å–å•é“¾è¡¨å€’æ•°ç¬¬3ä¸ªèŠ‚ç‚¹</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test6</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// åˆ›å»ºèŠ‚ç‚¹</span><br>    HeroNode hero1 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;å¢ä¿Šä¹‰&quot;</span>, <span class="hljs-string">&quot;ç‰éº’éºŸ&quot;</span>);<br>    HeroNode hero3 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;å®‹æ±Ÿ&quot;</span>, <span class="hljs-string">&quot;åŠæ—¶é›¨&quot;</span>);<br>    HeroNode hero2 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;å´ç”¨&quot;</span>, <span class="hljs-string">&quot;æ™ºå¤šæ˜Ÿ&quot;</span>);<br>    HeroNode hero4 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">4</span>, <span class="hljs-string">&quot;æ—å†²&quot;</span>, <span class="hljs-string">&quot;è±¹å­å¤´&quot;</span>);<br><br>    <span class="hljs-comment">// å¼•å…¥é“¾è¡¨</span><br>    SingleLinkedList singleLinkedList = <span class="hljs-keyword">new</span> SingleLinkedList();<br><br>    <span class="hljs-comment">// æ·»åŠ å¥½æ±‰èŠ‚ç‚¹åˆ°å•é“¾è¡¨</span><br>    singleLinkedList.addByNo(hero1);<br>    singleLinkedList.addByNo(hero2);<br>    singleLinkedList.addByNo(hero3);<br>    singleLinkedList.addByNo(hero4);<br><br>    <span class="hljs-comment">// æ‰“å°å•é“¾è¡¨</span><br>    System.out.println(<span class="hljs-string">&quot;å•é“¾è¡¨å†…å®¹ï¼š&quot;</span>);<br>    singleLinkedList.printLinkList();<br><br>    HeroNode lastIndexNode = singleLinkedList.findLastIndexNode(singleLinkedList.getHeadNode(), <span class="hljs-number">3</span>);<br>    System.out.println(<span class="hljs-string">&quot;ç»“æœä¸ºï¼š&quot;</span> + lastIndexNode);<br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java">å•é“¾è¡¨å†…å®¹ï¼š<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">1</span>, å§“åï¼š<span class="hljs-string">&#x27;å®‹æ±Ÿ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;åŠæ—¶é›¨&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">2</span>, å§“åï¼š<span class="hljs-string">&#x27;å´ç”¨&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;æ™ºå¤šæ˜Ÿ&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">3</span>, å§“åï¼š<span class="hljs-string">&#x27;å¢ä¿Šä¹‰&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;ç‰éº’éºŸ&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">4</span>, å§“åï¼š<span class="hljs-string">&#x27;æ—å†²&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;è±¹å­å¤´&#x27;</span>&#125;<br>ç»“æœä¸ºï¼šHeroNode&#123;åº§æ¬¡:<span class="hljs-number">2</span>, å§“åï¼š<span class="hljs-string">&#x27;å´ç”¨&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;æ™ºå¤šæ˜Ÿ&#x27;</span>&#125;<br></code></pre></td></tr></table></figure><h4 id="å•é“¾è¡¨çš„åè½¬"><a href="#å•é“¾è¡¨çš„åè½¬" class="headerlink" title="å•é“¾è¡¨çš„åè½¬"></a>å•é“¾è¡¨çš„åè½¬</h4><p><strong>æ€è·¯</strong>ï¼š</p><ol><li>å…ˆå®šä¹‰ä¸€ä¸ªèŠ‚ç‚¹ <code>reverseHead = new HeroNode</code> </li><li>ä»å¤´åˆ°å°¾éå†åŸæ¥çš„å•é“¾è¡¨ï¼Œæ¯éå†ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°†å…¶å–å‡ºï¼Œä½¿ç”¨å¤´æ’æ³•æ”¾åœ¨æ–°é“¾è¡¨çš„æœ€å‰ç«¯</li><li>åŸæ¥çš„é“¾è¡¨çš„<code>head.next = reverseHead.next </code> </li></ol><p><strong>ä»£ç </strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * é€†è½¬å•é“¾è¡¨</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">reverseList</span><span class="hljs-params">(HeroNode headNode)</span> </span>&#123;<br>    <span class="hljs-comment">// åˆ¤ [ç©º | ä»…ä¸€ä¸ªå…ƒç´ ]</span><br>    <span class="hljs-keyword">if</span> (headNode.nextHero == <span class="hljs-keyword">null</span> || headNode.nextHero.nextHero == <span class="hljs-keyword">null</span>) &#123;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-comment">// å½“å‰èŠ‚ç‚¹</span><br>    HeroNode cur = headNode.nextHero;<br>    <span class="hljs-comment">// æŒ‡å‘å½“å‰èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span><br>    HeroNode next = <span class="hljs-keyword">null</span>;<br>    <span class="hljs-comment">// é€†è½¬é“¾è¡¨å¤´ç»“ç‚¹</span><br>    HeroNode reverseHead = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">0</span>, <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br>    <span class="hljs-keyword">while</span> (cur != <span class="hljs-keyword">null</span>) &#123;<br>        next = cur.nextHero;<br>        cur.nextHero = reverseHead.nextHero;<br>        reverseHead.nextHero = cur;<br>        cur = next;<br>    &#125;<br>    headNode.nextHero = reverseHead.nextHero;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æµ‹è¯•</strong>:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æµ‹è¯•é€†è½¬å•é“¾è¡¨</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test7</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// åˆ›å»ºèŠ‚ç‚¹</span><br>    HeroNode hero1 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;å¢ä¿Šä¹‰&quot;</span>, <span class="hljs-string">&quot;ç‰éº’éºŸ&quot;</span>);<br>    HeroNode hero3 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;å®‹æ±Ÿ&quot;</span>, <span class="hljs-string">&quot;åŠæ—¶é›¨&quot;</span>);<br>    HeroNode hero2 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;å´ç”¨&quot;</span>, <span class="hljs-string">&quot;æ™ºå¤šæ˜Ÿ&quot;</span>);<br>    HeroNode hero4 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">4</span>, <span class="hljs-string">&quot;æ—å†²&quot;</span>, <span class="hljs-string">&quot;è±¹å­å¤´&quot;</span>);<br><br>    <span class="hljs-comment">// å¼•å…¥é“¾è¡¨</span><br>    SingleLinkedList singleLinkedList = <span class="hljs-keyword">new</span> SingleLinkedList();<br><br>    <span class="hljs-comment">// æ·»åŠ å¥½æ±‰èŠ‚ç‚¹åˆ°å•é“¾è¡¨</span><br>    singleLinkedList.addByNo(hero1);<br>    singleLinkedList.addByNo(hero2);<br>    singleLinkedList.addByNo(hero3);<br>    singleLinkedList.addByNo(hero4);<br><br>    <span class="hljs-comment">// æ‰“å°å•é“¾è¡¨</span><br>    System.out.println(<span class="hljs-string">&quot;é€†è½¬å‰å•é“¾è¡¨å†…å®¹ï¼š&quot;</span>);<br>    singleLinkedList.printLinkList();<br><br>    <span class="hljs-comment">// é€†è½¬å•é“¾è¡¨</span><br>    System.out.println(<span class="hljs-string">&quot;é€†è½¬åå•é“¾è¡¨å†…å®¹ï¼š&quot;</span>);<br>    reverseList(singleLinkedList.getHeadNode());<br>    singleLinkedList.printLinkList();<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»“æœ</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java">é€†è½¬å‰å•é“¾è¡¨å†…å®¹ï¼š<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">1</span>, å§“åï¼š<span class="hljs-string">&#x27;å®‹æ±Ÿ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;åŠæ—¶é›¨&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">2</span>, å§“åï¼š<span class="hljs-string">&#x27;å´ç”¨&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;æ™ºå¤šæ˜Ÿ&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">3</span>, å§“åï¼š<span class="hljs-string">&#x27;å¢ä¿Šä¹‰&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;ç‰éº’éºŸ&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">4</span>, å§“åï¼š<span class="hljs-string">&#x27;æ—å†²&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;è±¹å­å¤´&#x27;</span>&#125;<br>é€†è½¬åå•é“¾è¡¨å†…å®¹ï¼š<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">4</span>, å§“åï¼š<span class="hljs-string">&#x27;æ—å†²&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;è±¹å­å¤´&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">3</span>, å§“åï¼š<span class="hljs-string">&#x27;å¢ä¿Šä¹‰&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;ç‰éº’éºŸ&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">2</span>, å§“åï¼š<span class="hljs-string">&#x27;å´ç”¨&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;æ™ºå¤šæ˜Ÿ&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">1</span>, å§“åï¼š<span class="hljs-string">&#x27;å®‹æ±Ÿ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;åŠæ—¶é›¨&#x27;</span>&#125;<br></code></pre></td></tr></table></figure><h4 id="ä»å°¾åˆ°å¤´æ‰“å°å•é“¾è¡¨"><a href="#ä»å°¾åˆ°å¤´æ‰“å°å•é“¾è¡¨" class="headerlink" title="ä»å°¾åˆ°å¤´æ‰“å°å•é“¾è¡¨"></a>ä»å°¾åˆ°å¤´æ‰“å°å•é“¾è¡¨</h4><p><strong>æ€è·¯</strong>ï¼š</p><ol><li>æ–¹å¼1ï¼šå…ˆå°†å•é“¾è¡¨è¿›è¡Œåè½¬æ“ä½œï¼Œç„¶åå†éå†ï¼Œä½†æ˜¯ç ´åäº†å•é“¾è¡¨çš„ç»“æ„ã€‚</li><li>æ–¹å¼2ï¼šå¯ä»¥åˆ©ç”¨æ ˆè¿™ä¸ªæ•°æ®ç»“æ„ï¼Œå°†å„èŠ‚ç‚¹å‹å…¥æ ˆä¸­ï¼Œç„¶ååˆ©ç”¨æ ˆçš„å…ˆè¿›åå‡ºç‰¹ç‚¹ï¼Œå®ç°é€†åºæ‰“å°ã€‚</li></ol><p><strong>ä»£ç </strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å€’åºè¾“å‡ºé“¾è¡¨å…ƒç´ </span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">reversePrint</span><span class="hljs-params">(HeroNode headNode)</span> </span>&#123;<br>    <span class="hljs-comment">//åˆ¤ç©º</span><br>    <span class="hljs-keyword">if</span> (headNode.nextHero == <span class="hljs-keyword">null</span>) &#123;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-comment">// åˆ›å»ºæ ˆï¼Œå°†å„èŠ‚ç‚¹å‹æ ˆ</span><br>    Stack&lt;HeroNode&gt; stack = <span class="hljs-keyword">new</span> Stack&lt;&gt;();<br>    HeroNode cur = headNode.nextHero;<br>    <span class="hljs-keyword">while</span> (cur != <span class="hljs-keyword">null</span>) &#123;<br>        stack.push(cur);<br>        cur = cur.nextHero;<br>    &#125;<br>    <span class="hljs-comment">// æ ˆä¸­èŠ‚ç‚¹ä¾æ¬¡å‡ºæ ˆ</span><br>    <span class="hljs-keyword">while</span> (!stack.empty()) &#123;<br>        System.out.println(stack.pop());<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æµ‹è¯•</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æµ‹è¯•é€†åºæ‰“å°å•é“¾è¡¨</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test8</span><span class="hljs-params">()</span> </span>&#123;<br><br>    <span class="hljs-comment">// åˆ›å»ºèŠ‚ç‚¹</span><br>    HeroNode hero1 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;å¢ä¿Šä¹‰&quot;</span>, <span class="hljs-string">&quot;ç‰éº’éºŸ&quot;</span>);<br>    HeroNode hero3 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;å®‹æ±Ÿ&quot;</span>, <span class="hljs-string">&quot;åŠæ—¶é›¨&quot;</span>);<br>    HeroNode hero2 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;å´ç”¨&quot;</span>, <span class="hljs-string">&quot;æ™ºå¤šæ˜Ÿ&quot;</span>);<br>    HeroNode hero4 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">4</span>, <span class="hljs-string">&quot;æ—å†²&quot;</span>, <span class="hljs-string">&quot;è±¹å­å¤´&quot;</span>);<br><br>    SingleLinkedList singleLinkedList = <span class="hljs-keyword">new</span> SingleLinkedList();<br><br>    <span class="hljs-comment">// æ·»åŠ å¥½æ±‰èŠ‚ç‚¹åˆ°å•é“¾è¡¨</span><br>    singleLinkedList.addByNo(hero1);<br>    singleLinkedList.addByNo(hero2);<br>    singleLinkedList.addByNo(hero3);<br>    singleLinkedList.addByNo(hero4);<br><br>    <span class="hljs-comment">// æ‰“å°å•é“¾è¡¨</span><br>    System.out.println(<span class="hljs-string">&quot;åŸæ¥å•é“¾è¡¨å†…å®¹ï¼š&quot;</span>);<br>    singleLinkedList.printLinkList();<br><br>    <span class="hljs-comment">// é€†åºæ‰“å°å•é“¾è¡¨</span><br>    System.out.println(<span class="hljs-string">&quot;é€†åºæ‰“å°å•é“¾è¡¨å†…å®¹ï¼š&quot;</span>);<br>    reversePrint(singleLinkedList.getHeadNode());<br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»“æœ</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java">åŸæ¥å•é“¾è¡¨å†…å®¹ï¼š<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">1</span>, å§“åï¼š<span class="hljs-string">&#x27;å®‹æ±Ÿ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;åŠæ—¶é›¨&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">2</span>, å§“åï¼š<span class="hljs-string">&#x27;å´ç”¨&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;æ™ºå¤šæ˜Ÿ&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">3</span>, å§“åï¼š<span class="hljs-string">&#x27;å¢ä¿Šä¹‰&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;ç‰éº’éºŸ&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">4</span>, å§“åï¼š<span class="hljs-string">&#x27;æ—å†²&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;è±¹å­å¤´&#x27;</span>&#125;<br>é€†åºæ‰“å°å•é“¾è¡¨å†…å®¹ï¼š<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">4</span>, å§“åï¼š<span class="hljs-string">&#x27;æ—å†²&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;è±¹å­å¤´&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">3</span>, å§“åï¼š<span class="hljs-string">&#x27;å¢ä¿Šä¹‰&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;ç‰éº’éºŸ&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">2</span>, å§“åï¼š<span class="hljs-string">&#x27;å´ç”¨&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;æ™ºå¤šæ˜Ÿ&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">1</span>, å§“åï¼š<span class="hljs-string">&#x27;å®‹æ±Ÿ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;åŠæ—¶é›¨&#x27;</span>&#125;<br></code></pre></td></tr></table></figure><h4 id="åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨"><a href="#åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨" class="headerlink" title="åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨"></a>åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨</h4><p><strong>æ€è·¯</strong>ï¼š</p><ul><li><p>curAæŒ‡å‘ç¬¬ä¸€ä¸ªé“¾è¡¨å½“å‰èŠ‚ç‚¹ï¼ŒcurBæŒ‡å‘ç¬¬äºŒä¸ªé“¾è¡¨å½“å‰èŠ‚ç‚¹ï¼ŒcurCæŒ‡å‘è¦åˆå¹¶çš„é“¾è¡¨å½“å‰èŠ‚ç‚¹ã€‚</p></li><li><p>éå†ç¬¬ä¸€ä¸ªé“¾è¡¨å’Œç¬¬äºŒä¸ªé“¾è¡¨ï¼Œå¦‚æœ<code>curA.no &lt;= curB.no</code>å°±ä»¤<code>curC.nextHero = curA; curC = curA; curA = curA.nextHero;</code>ï¼Œå¦åˆ™ç›¸åã€‚</p></li><li><p>æœ€åä¸€å®šä¼šæœ‰ä¸€ä¸ªé“¾è¡¨å…ˆéå†å®Œï¼Œåˆ¤æ–­curAæˆ–curBæ˜¯å¦ä¸ºç©ºç¡®å®šå“ªä¸ªé“¾è¡¨è¿˜æœ‰èŠ‚ç‚¹æœªåˆå¹¶ï¼Œç›´æ¥å°†è¿™äº›èŠ‚ç‚¹æ’å…¥åˆ°curCçš„åé¢å³å¯ã€‚</p></li></ul><p><strong>ä»£ç </strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨ä¸ºä¸€ä¸ªæœ‰åºé“¾è¡¨</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SingleLinkedList <span class="hljs-title">mergeList</span><span class="hljs-params">(HeroNode laHead, HeroNode lbHead)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (laHead.nextHero == <span class="hljs-keyword">null</span> || lbHead.nextHero == <span class="hljs-keyword">null</span>) &#123;<br>        System.out.println(<span class="hljs-string">&quot;è¯·ä¼ å…¥éç©ºé“¾è¡¨&quot;</span>);<br>    &#125;<br>    HeroNode curA = laHead.nextHero;<br>    HeroNode curB = lbHead.nextHero;<br><br>    SingleLinkedList lcList = <span class="hljs-keyword">new</span> SingleLinkedList();<br>    HeroNode curC = lcList.headNode;<br>    <span class="hljs-keyword">while</span> (curA != <span class="hljs-keyword">null</span> &amp;&amp; curB != <span class="hljs-keyword">null</span>) &#123;<br>        <span class="hljs-keyword">if</span> (curA.no &lt;= curB.no) &#123;<br>            curC.nextHero = curA;<br>            curC = curA;<br>            curA = curA.nextHero;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            curC.nextHero = curB;<br>            curC = curB;<br>            curB = curB.nextHero;<br>        &#125;<br>        <span class="hljs-comment">// æ’å…¥å‰©ä½™é“¾è¡¨æ®µ</span><br>        curC.nextHero = (curA != <span class="hljs-keyword">null</span> ? curA : curB);<br>    &#125;<br>    <span class="hljs-keyword">return</span> lcList;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æµ‹è¯•</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æµ‹è¯•åˆå¹¶æœ‰åºé“¾è¡¨</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test9</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// åˆ›å»ºèŠ‚ç‚¹</span><br>    HeroNode hero1 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;å¤§å¨ƒ&quot;</span>, <span class="hljs-string">&quot;å¤§åŠ›å£«&quot;</span>);<br>    HeroNode hero3 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;ä¸‰å¨ƒ&quot;</span>, <span class="hljs-string">&quot;é‡‘åˆšä¸å&quot;</span>);<br>    HeroNode hero2 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">5</span>, <span class="hljs-string">&quot;äº”å¨ƒ&quot;</span>, <span class="hljs-string">&quot;æ°´æº&quot;</span>);<br>    HeroNode hero4 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">7</span>, <span class="hljs-string">&quot;ä¸ƒå¨ƒ&quot;</span>, <span class="hljs-string">&quot;å®è‘«èŠ¦&quot;</span>);<br><br>    SingleLinkedList singleLinkedList1 = <span class="hljs-keyword">new</span> SingleLinkedList();<br><br>    <span class="hljs-comment">// æ·»åŠ å¥½æ±‰èŠ‚ç‚¹åˆ°å•é“¾è¡¨</span><br>    singleLinkedList1.addByNo(hero1);<br>    singleLinkedList1.addByNo(hero2);<br>    singleLinkedList1.addByNo(hero3);<br>    singleLinkedList1.addByNo(hero4);<br>    <span class="hljs-comment">// æ‰“å°é“¾è¡¨1</span><br>    System.out.println(<span class="hljs-string">&quot;é“¾è¡¨1å†…å®¹ä¸ºï¼š&quot;</span>);<br>    singleLinkedList1.printLinkList();<br><br>    <span class="hljs-comment">// åˆ›å»ºèŠ‚ç‚¹</span><br>    HeroNode hero5 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;äºŒå¨ƒ&quot;</span>, <span class="hljs-string">&quot;åƒé‡Œçœ¼é¡ºé£è€³&quot;</span>);<br>    HeroNode hero6 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">4</span>, <span class="hljs-string">&quot;å››å¨ƒ&quot;</span>, <span class="hljs-string">&quot;å–·ç«éœ¹é›³&quot;</span>);<br>    HeroNode hero7 = <span class="hljs-keyword">new</span> HeroNode(<span class="hljs-number">6</span>, <span class="hljs-string">&quot;å…­å¨ƒ&quot;</span>, <span class="hljs-string">&quot;éšèº«è™šåŒ–&quot;</span>);<br><br>    SingleLinkedList singleLinkedList2 = <span class="hljs-keyword">new</span> SingleLinkedList();<br><br>    <span class="hljs-comment">// æ·»åŠ å¥½æ±‰èŠ‚ç‚¹åˆ°å•é“¾è¡¨</span><br>    singleLinkedList2.addByNo(hero5);<br>    singleLinkedList2.addByNo(hero6);<br>    singleLinkedList2.addByNo(hero7);<br>    <span class="hljs-comment">// æ‰“å°é“¾è¡¨2</span><br>    System.out.println(<span class="hljs-string">&quot;é“¾è¡¨2å†…å®¹ä¸ºï¼š&quot;</span>);<br>    singleLinkedList2.printLinkList();<br><br>    SingleLinkedList singleLinkedList3 = mergeList(singleLinkedList1.getHeadNode(), singleLinkedList2.getHeadNode());<br><br>    <span class="hljs-comment">// è¾“å‡ºåˆå¹¶é“¾è¡¨</span><br>    System.out.println(<span class="hljs-string">&quot;åˆå¹¶åé“¾è¡¨å†…å®¹ä¸ºï¼š&quot;</span>);<br>    singleLinkedList3.printLinkList();<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»“æœ</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java">é“¾è¡¨<span class="hljs-number">1</span>å†…å®¹ä¸ºï¼š<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">1</span>, å§“åï¼š<span class="hljs-string">&#x27;å¤§å¨ƒ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;å¤§åŠ›å£«&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">3</span>, å§“åï¼š<span class="hljs-string">&#x27;ä¸‰å¨ƒ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;é‡‘åˆšä¸å&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">5</span>, å§“åï¼š<span class="hljs-string">&#x27;äº”å¨ƒ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;æ°´æº&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">7</span>, å§“åï¼š<span class="hljs-string">&#x27;ä¸ƒå¨ƒ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;å®è‘«èŠ¦&#x27;</span>&#125;<br>é“¾è¡¨<span class="hljs-number">2</span>å†…å®¹ä¸ºï¼š<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">2</span>, å§“åï¼š<span class="hljs-string">&#x27;äºŒå¨ƒ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;åƒé‡Œçœ¼é¡ºé£è€³&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">4</span>, å§“åï¼š<span class="hljs-string">&#x27;å››å¨ƒ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;å–·ç«éœ¹é›³&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">6</span>, å§“åï¼š<span class="hljs-string">&#x27;å…­å¨ƒ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;éšèº«è™šåŒ–&#x27;</span>&#125;<br>åˆå¹¶åé“¾è¡¨å†…å®¹ä¸ºï¼š<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">1</span>, å§“åï¼š<span class="hljs-string">&#x27;å¤§å¨ƒ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;å¤§åŠ›å£«&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">2</span>, å§“åï¼š<span class="hljs-string">&#x27;äºŒå¨ƒ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;åƒé‡Œçœ¼é¡ºé£è€³&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">3</span>, å§“åï¼š<span class="hljs-string">&#x27;ä¸‰å¨ƒ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;é‡‘åˆšä¸å&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">4</span>, å§“åï¼š<span class="hljs-string">&#x27;å››å¨ƒ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;å–·ç«éœ¹é›³&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">5</span>, å§“åï¼š<span class="hljs-string">&#x27;äº”å¨ƒ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;æ°´æº&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">6</span>, å§“åï¼š<span class="hljs-string">&#x27;å…­å¨ƒ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;éšèº«è™šåŒ–&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">7</span>, å§“åï¼š<span class="hljs-string">&#x27;ä¸ƒå¨ƒ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;å®è‘«èŠ¦&#x27;</span>&#125;<br></code></pre></td></tr></table></figure><h2 id="åŒå‘é“¾è¡¨"><a href="#åŒå‘é“¾è¡¨" class="headerlink" title="åŒå‘é“¾è¡¨"></a>åŒå‘é“¾è¡¨</h2><h3 id="åŒå‘é“¾è¡¨ä»‹ç»"><a href="#åŒå‘é“¾è¡¨ä»‹ç»" class="headerlink" title="åŒå‘é“¾è¡¨ä»‹ç»"></a>åŒå‘é“¾è¡¨ä»‹ç»</h3><p>åŒå‘é“¾è¡¨ä¹Ÿå«åŒé“¾è¡¨ï¼Œæ˜¯é“¾è¡¨çš„ä¸€ç§ï¼Œå®ƒçš„æ¯ä¸ªæ•°æ®<a href="https://baike.baidu.com/item/%E7%BB%93%E7%82%B9/9794643">ç»“ç‚¹</a>ä¸­éƒ½æœ‰ä¸¤ä¸ª<a href="https://baike.baidu.com/item/%E6%8C%87%E9%92%88/2878304">æŒ‡é’ˆ</a>ï¼Œåˆ†åˆ«æŒ‡å‘ç›´æ¥åç»§å’Œç›´æ¥å‰é©±ã€‚æ‰€ä»¥ï¼Œä»åŒå‘é“¾è¡¨ä¸­çš„ä»»æ„ä¸€ä¸ªç»“ç‚¹å¼€å§‹ï¼Œéƒ½å¯ä»¥å¾ˆæ–¹ä¾¿åœ°è®¿é—®å®ƒçš„å‰é©±ç»“ç‚¹å’Œåç»§ç»“ç‚¹ã€‚ä¸€èˆ¬æˆ‘ä»¬éƒ½æ„é€ åŒå‘<a href="https://baike.baidu.com/item/%E5%BE%AA%E7%8E%AF%E9%93%BE%E8%A1%A8/3228465">å¾ªç¯é“¾è¡¨</a>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E9%93%BE%E8%A1%A8/6.jpg" alt="åŒå‘é“¾è¡¨"></p><h3 id="åŒå‘é“¾è¡¨çš„åº”ç”¨å®ä¾‹"><a href="#åŒå‘é“¾è¡¨çš„åº”ç”¨å®ä¾‹" class="headerlink" title="åŒå‘é“¾è¡¨çš„åº”ç”¨å®ä¾‹"></a>åŒå‘é“¾è¡¨çš„åº”ç”¨å®ä¾‹</h3><p>ä½¿ç”¨å¸¦head å¤´çš„åŒå‘é“¾è¡¨å®ç°â€“æ°´æµ’è‹±é›„æ’è¡Œæ¦œ</p><p>ç®¡ç†å•å‘é“¾è¡¨çš„ç¼ºç‚¹åˆ†æ:ï¼š</p><ul><li>å•å‘é“¾è¡¨ï¼ŒæŸ¥æ‰¾çš„æ–¹å‘åªèƒ½æ˜¯ä¸€ä¸ªæ–¹å‘ï¼Œè€ŒåŒå‘é“¾è¡¨å¯ä»¥å‘å‰æˆ–è€…å‘åæŸ¥æ‰¾ã€‚</li><li>å•å‘é“¾è¡¨ä¸èƒ½è‡ªæˆ‘åˆ é™¤ï¼Œéœ€è¦é è¾…åŠ©èŠ‚ç‚¹ï¼Œè€ŒåŒå‘é“¾è¡¨ï¼Œåˆ™å¯ä»¥è‡ªæˆ‘åˆ é™¤ï¼Œæ‰€ä»¥å‰é¢æˆ‘ä»¬å•é“¾è¡¨åˆ é™¤æ—¶èŠ‚ç‚¹ï¼Œæ€»æ˜¯æ‰¾åˆ°temp,temp æ˜¯å¾…åˆ é™¤èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚</li><li>åˆ†æåŒå‘é“¾è¡¨å¦‚ä½•å®Œæˆéå†ï¼Œæ·»åŠ ï¼Œä¿®æ”¹å’Œåˆ é™¤çš„æ€è·¯</li></ul><p>åˆ†æå®ç°æ€è·¯ï¼š</p><ul><li><strong>éå†</strong>ï¼šå’Œå•é“¾è¡¨ä¸€æ ·ï¼Œåªæ˜¯å¯ä»¥å‘å‰ï¼Œä¹Ÿå¯ä»¥å‘åæŸ¥æ‰¾</li><li><strong>ä¿®æ”¹</strong>ï¼šå’ŒåŸæ¥å•é“¾è¡¨ä¸€æ ·</li><li><strong>åˆ é™¤</strong><code>temp.prior.nextHero = temp.nextHero; temp.nextHero.prior = temp.prior</code></li><li><strong>æ·»åŠ </strong>ï¼šæ‰¾åˆ°åŒå‘é“¾è¡¨æœ€åçš„èŠ‚ç‚¹ã€‚<code>temp.nextHero = newHero; newHero.prior = temp</code></li></ul><h3 id="åŒå‘é“¾è¡¨åº”ç”¨ä»£ç å®ç°"><a href="#åŒå‘é“¾è¡¨åº”ç”¨ä»£ç å®ç°" class="headerlink" title="åŒå‘é“¾è¡¨åº”ç”¨ä»£ç å®ç°"></a>åŒå‘é“¾è¡¨åº”ç”¨ä»£ç å®ç°</h3><h4 id="åŒå‘é“¾è¡¨èŠ‚ç‚¹ç±»"><a href="#åŒå‘é“¾è¡¨èŠ‚ç‚¹ç±»" class="headerlink" title="åŒå‘é“¾è¡¨èŠ‚ç‚¹ç±»"></a>åŒå‘é“¾è¡¨èŠ‚ç‚¹ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åŒå‘é“¾è¡¨èŠ‚ç‚¹</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DoubleHeroNode</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> no; <span class="hljs-comment">// åº§æ¬¡</span><br>    <span class="hljs-keyword">public</span> String name; <span class="hljs-comment">// åå­—</span><br>    <span class="hljs-keyword">public</span> String nickname; <span class="hljs-comment">// ç»°å·</span><br>    <span class="hljs-keyword">public</span> DoubleHeroNode nextHero; <span class="hljs-comment">// æŒ‡å‘ä¸‹ä¸€ä¸ªå¥½æ±‰èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">public</span> DoubleHeroNode preHero; <span class="hljs-comment">// æŒ‡å‘ä¸Šä¸€ä¸ªå¥½æ±‰èŠ‚ç‚¹</span><br><br>    <span class="hljs-comment">// æ„é€ å™¨</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">DoubleHeroNode</span><span class="hljs-params">(<span class="hljs-keyword">int</span> hNo, String hName, String hNickName)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.no = hNo;<br>        <span class="hljs-keyword">this</span>.name = hName;<br>        <span class="hljs-keyword">this</span>.nickname = hNickName;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">   *  æ‰“å°å¥½æ±‰ä¿¡æ¯</span><br><span class="hljs-comment">   */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;HeroNode&#123;&quot;</span> +<br>            <span class="hljs-string">&quot;åº§æ¬¡:&quot;</span> + no +<br>            <span class="hljs-string">&quot;, å§“åï¼š&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>            <span class="hljs-string">&quot;, ç»°å·ï¼š&#x27;&quot;</span> + nickname + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>            <span class="hljs-string">&quot;&#125;&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="åŒå‘é“¾è¡¨æ·»åŠ èŠ‚ç‚¹"><a href="#åŒå‘é“¾è¡¨æ·»åŠ èŠ‚ç‚¹" class="headerlink" title="åŒå‘é“¾è¡¨æ·»åŠ èŠ‚ç‚¹"></a>åŒå‘é“¾è¡¨æ·»åŠ èŠ‚ç‚¹</h4><p><strong>ä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ·»åŠ èŠ‚ç‚¹åˆ°åŒå‘é“¾è¡¨(ä¸è€ƒè™‘åº§æ¬¡)</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addIgnoreNo</span><span class="hljs-params">(DoubleHeroNode heroNode)</span> </span>&#123;<br>    <span class="hljs-comment">// è¾…åŠ©å˜é‡tempéå†å•é“¾è¡¨</span><br>    DoubleHeroNode temp = headNode;<br>    <span class="hljs-comment">// åˆ°è¾¾å•é“¾è¡¨å°¾éƒ¨</span><br>    <span class="hljs-keyword">while</span> (temp.nextHero != <span class="hljs-keyword">null</span>) &#123;<br>        temp = temp.nextHero;<br>    &#125;<br>    temp.nextHero = heroNode;<br>    heroNode.preHero = temp;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æµ‹è¯•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æµ‹è¯•æ·»åŠ èŠ‚ç‚¹</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test1</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// åˆ›å»ºèŠ‚ç‚¹</span><br>    DoubleHeroNode hero1 = <span class="hljs-keyword">new</span> DoubleHeroNode(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;å¢ä¿Šä¹‰&quot;</span>, <span class="hljs-string">&quot;ç‰éº’éºŸ&quot;</span>);<br>    DoubleHeroNode hero3 = <span class="hljs-keyword">new</span> DoubleHeroNode(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;å®‹æ±Ÿ&quot;</span>, <span class="hljs-string">&quot;åŠæ—¶é›¨&quot;</span>);<br>    DoubleHeroNode hero2 = <span class="hljs-keyword">new</span> DoubleHeroNode(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;å´ç”¨&quot;</span>, <span class="hljs-string">&quot;æ™ºå¤šæ˜Ÿ&quot;</span>);<br>    DoubleHeroNode hero4 = <span class="hljs-keyword">new</span> DoubleHeroNode(<span class="hljs-number">4</span>, <span class="hljs-string">&quot;æ—å†²&quot;</span>, <span class="hljs-string">&quot;è±¹å­å¤´&quot;</span>);<br><br>    <span class="hljs-comment">// å¼•å…¥é“¾è¡¨</span><br>    DoubleLinkedList doubleLinkedList = <span class="hljs-keyword">new</span> DoubleLinkedList();<br><br>    <span class="hljs-comment">// æ·»åŠ å¥½æ±‰èŠ‚ç‚¹åˆ°åŒå‘é“¾è¡¨</span><br>    doubleLinkedList.addIgnoreNo(hero1);<br>    doubleLinkedList.addIgnoreNo(hero2);<br>    doubleLinkedList.addIgnoreNo(hero3);<br>    doubleLinkedList.addIgnoreNo(hero4);<br><br>    <span class="hljs-comment">// æ‰“å°å•é“¾è¡¨</span><br>    doubleLinkedList.printLinkList();<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»“æœ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">HeroNode&#123;åº§æ¬¡:<span class="hljs-number">3</span>, å§“åï¼š<span class="hljs-string">&#x27;å¢ä¿Šä¹‰&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;ç‰éº’éºŸ&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">2</span>, å§“åï¼š<span class="hljs-string">&#x27;å´ç”¨&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;æ™ºå¤šæ˜Ÿ&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">1</span>, å§“åï¼š<span class="hljs-string">&#x27;å®‹æ±Ÿ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;åŠæ—¶é›¨&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">4</span>, å§“åï¼š<span class="hljs-string">&#x27;æ—å†²&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;è±¹å­å¤´&#x27;</span>&#125;<br></code></pre></td></tr></table></figure><h4 id="åŒå‘é“¾è¡¨åˆ é™¤èŠ‚ç‚¹"><a href="#åŒå‘é“¾è¡¨åˆ é™¤èŠ‚ç‚¹" class="headerlink" title="åŒå‘é“¾è¡¨åˆ é™¤èŠ‚ç‚¹"></a>åŒå‘é“¾è¡¨åˆ é™¤èŠ‚ç‚¹</h4><p><strong>ä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åˆ é™¤å¥½æ±‰èŠ‚ç‚¹</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">(<span class="hljs-keyword">int</span> sNo)</span> </span>&#123;<br>    <span class="hljs-comment">// åˆ¤ç©º</span><br>    <span class="hljs-keyword">if</span> (headNode.nextHero == <span class="hljs-keyword">null</span>) &#123;<br>        System.out.println(<span class="hljs-string">&quot;é“¾è¡¨ä¸ºç©ºï¼Œæ— æ³•åˆ é™¤&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    DoubleHeroNode temp = headNode.nextHero;<br>    <span class="hljs-comment">// æ ‡å¿—æ˜¯å¦æ‰¾åˆ°å¾…åˆ é™¤èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">boolean</span> isFound = <span class="hljs-keyword">false</span>;<br>    <span class="hljs-keyword">while</span> (temp != <span class="hljs-keyword">null</span>) &#123;<br>        <span class="hljs-keyword">if</span> (temp.no == sNo) &#123;<br>            <span class="hljs-comment">// æ‰¾åˆ°äº†å¾…åˆ é™¤èŠ‚ç‚¹</span><br>            isFound = <span class="hljs-keyword">true</span>;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        temp = temp.nextHero;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (isFound) &#123;<br>        <span class="hljs-comment">// åˆ é™¤èŠ‚ç‚¹</span><br>        temp.preHero.nextHero = temp.nextHero;<br>        <span class="hljs-comment">// å¦‚æœæ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸éœ€è¦æ‰§è¡Œä¸‹é¢è¯­å¥</span><br>        <span class="hljs-keyword">if</span> (temp.nextHero != <span class="hljs-keyword">null</span>) &#123;<br>            temp.nextHero.preHero = temp.preHero;<br>        &#125;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;åº§æ¬¡ä¸º&quot;</span>+ sNo +<span class="hljs-string">&quot;çš„å¥½æ±‰ä¸å­˜åœ¨&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æµ‹è¯•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æµ‹è¯•åˆ é™¤èŠ‚ç‚¹</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test2</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// åˆ›å»ºèŠ‚ç‚¹</span><br>    DoubleHeroNode hero1 = <span class="hljs-keyword">new</span> DoubleHeroNode(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;å¢ä¿Šä¹‰&quot;</span>, <span class="hljs-string">&quot;ç‰éº’éºŸ&quot;</span>);<br>    DoubleHeroNode hero3 = <span class="hljs-keyword">new</span> DoubleHeroNode(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;å®‹æ±Ÿ&quot;</span>, <span class="hljs-string">&quot;åŠæ—¶é›¨&quot;</span>);<br>    DoubleHeroNode hero2 = <span class="hljs-keyword">new</span> DoubleHeroNode(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;å´ç”¨&quot;</span>, <span class="hljs-string">&quot;æ™ºå¤šæ˜Ÿ&quot;</span>);<br>    DoubleHeroNode hero4 = <span class="hljs-keyword">new</span> DoubleHeroNode(<span class="hljs-number">4</span>, <span class="hljs-string">&quot;æ—å†²&quot;</span>, <span class="hljs-string">&quot;è±¹å­å¤´&quot;</span>);<br><br>    <span class="hljs-comment">// å¼•å…¥é“¾è¡¨</span><br>    DoubleLinkedList doubleLinkedList = <span class="hljs-keyword">new</span> DoubleLinkedList();<br><br>    <span class="hljs-comment">// æ·»åŠ å¥½æ±‰èŠ‚ç‚¹åˆ°åŒå‘é“¾è¡¨</span><br>    doubleLinkedList.addIgnoreNo(hero1);<br>    doubleLinkedList.addIgnoreNo(hero2);<br>    doubleLinkedList.addIgnoreNo(hero3);<br>    doubleLinkedList.addIgnoreNo(hero4);<br><br>    System.out.println(<span class="hljs-string">&quot;åˆ é™¤å‰çš„é“¾è¡¨å†…å®¹&quot;</span>);<br>    doubleLinkedList.printLinkList();<br><br>    doubleLinkedList.delete(<span class="hljs-number">2</span>);<br><br>    System.out.println(<span class="hljs-string">&quot;åˆ é™¤åçš„é“¾è¡¨å†…å®¹&quot;</span>);<br>    doubleLinkedList.printLinkList();<br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»“æœ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java">åˆ é™¤å‰çš„é“¾è¡¨å†…å®¹<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">3</span>, å§“åï¼š<span class="hljs-string">&#x27;å¢ä¿Šä¹‰&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;ç‰éº’éºŸ&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">2</span>, å§“åï¼š<span class="hljs-string">&#x27;å´ç”¨&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;æ™ºå¤šæ˜Ÿ&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">1</span>, å§“åï¼š<span class="hljs-string">&#x27;å®‹æ±Ÿ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;åŠæ—¶é›¨&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">4</span>, å§“åï¼š<span class="hljs-string">&#x27;æ—å†²&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;è±¹å­å¤´&#x27;</span>&#125;<br>åˆ é™¤åçš„é“¾è¡¨å†…å®¹<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">3</span>, å§“åï¼š<span class="hljs-string">&#x27;å¢ä¿Šä¹‰&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;ç‰éº’éºŸ&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">1</span>, å§“åï¼š<span class="hljs-string">&#x27;å®‹æ±Ÿ&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;åŠæ—¶é›¨&#x27;</span>&#125;<br>HeroNode&#123;åº§æ¬¡:<span class="hljs-number">4</span>, å§“åï¼š<span class="hljs-string">&#x27;æ—å†²&#x27;</span>, ç»°å·ï¼š<span class="hljs-string">&#x27;è±¹å­å¤´&#x27;</span>&#125;<br></code></pre></td></tr></table></figure><h2 id="å•å‘ç¯å½¢é“¾è¡¨"><a href="#å•å‘ç¯å½¢é“¾è¡¨" class="headerlink" title="å•å‘ç¯å½¢é“¾è¡¨"></a>å•å‘ç¯å½¢é“¾è¡¨</h2><h3 id="ç¯å½¢é“¾è¡¨ä»‹ç»"><a href="#ç¯å½¢é“¾è¡¨ä»‹ç»" class="headerlink" title="ç¯å½¢é“¾è¡¨ä»‹ç»"></a>ç¯å½¢é“¾è¡¨ä»‹ç»</h3><p>ç¯å½¢å•é“¾è¡¨å’Œæ™®é€šå•é“¾è¡¨å‡ ä¹ä¸€æ ·ï¼Œå”¯ä¸€ä¸åŒçš„å°±æ˜¯æ™®é€šå•é“¾è¡¨çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„nextä¸ºç©ºï¼Œè€Œæˆ‘ä»¬çš„ç¯å½¢å•é“¾è¡¨çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„netä¸ºå¤´èŠ‚ç‚¹ï¼Œå½¢æˆä¸€ä¸ªé—­ç¯ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/æ•°æ®ç»“æ„ï¼šé“¾è¡¨/8.jpg" alt="ç¯å½¢é“¾è¡¨" style="zoom:80%;"><p>å¦‚ä¸Šå›¾ï¼Œç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå°±æ˜¯å¤´ç»“ç‚¹ï¼Œç¬¬äº”ä¸ªèŠ‚ç‚¹å°±æ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œä½†æ˜¯åœ¨ç¯å½¢å•é“¾è¡¨ä¸­nextä¼šæŒ‡å‘ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè€Œæ™®é€šå•é“¾è¡¨ä¸­æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„nextæ˜¯ä¸ºç©ºã€‚</p><h3 id="çº¦ç‘Ÿå¤«é—®é¢˜æ¼”ç¤º"><a href="#çº¦ç‘Ÿå¤«é—®é¢˜æ¼”ç¤º" class="headerlink" title="çº¦ç‘Ÿå¤«é—®é¢˜æ¼”ç¤º"></a>çº¦ç‘Ÿå¤«é—®é¢˜æ¼”ç¤º</h3><p><strong>é¢˜æ„</strong>ï¼šè®¾ç¼–å·ä¸º1ï¼Œ2ï¼Œâ€¦ nçš„nä¸ªäººå›´åä¸€åœˆï¼Œçº¦å®šç¼–å·ä¸ºkï¼ˆ1&lt;=k&lt;=nï¼‰çš„äººä»1å¼€å§‹æŠ¥æ•°ï¼Œæ•°åˆ°m çš„é‚£ä¸ªäººå‡ºåˆ—ï¼Œå®ƒçš„ä¸‹ä¸€ä½åˆä»1å¼€å§‹æŠ¥æ•°ï¼Œæ•°åˆ°mçš„é‚£ä¸ªäººåˆå‡ºåˆ—ï¼Œä¾æ¬¡ç±»æ¨ï¼Œç›´åˆ°æ‰€æœ‰äººå‡ºåˆ—ä¸ºæ­¢ï¼Œç”±æ­¤äº§ç”Ÿä¸€ä¸ªå‡ºé˜Ÿç¼–å·çš„åºåˆ—ã€‚</p><p><strong>æ¼”ç¤º</strong>ï¼šæˆ‘ä»¬å‡è®¾æ€»å…±æœ‰äº”ä¸ªå¨ƒï¼Œä»ç¬¬äºŒä¸ªäººå¼€å§‹æ•°ï¼Œæ¯æ¬¡æ•°äºŒæ¬¡ï¼Œç„¶åæœ€åå‰©ä¸€ä¸ªäººï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¤§æ¦‚æ˜¯ä¸ªå•¥æ ·ã€‚</p><p>é‚£ä¹ˆï¼Œ<code>n = 5; k = 2; m = 2</code></p><ol><li><p>é¦–å…ˆåˆšå¼€å§‹ï¼Œäº”ä¸ªå¨ƒï¼š</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/æ•°æ®ç»“æ„ï¼šé“¾è¡¨/9.jpg" alt="ç¬¬ä¸€æ­¥" style="zoom:80%;"><p>è¿™å°±æ˜¯æœ€å¼€å§‹çš„æ ·å­ï¼Œfirstä»£è¡¨é“¾è¡¨çš„å¤´éƒ¨ï¼Œendä»£è¡¨é“¾è¡¨çš„å°¾éƒ¨ã€‚</p></li><li><p>ç§»åŠ¨åˆ°kçš„ä½ç½®</p><p>ç§»åŠ¨åˆ°kçš„ä½ç½®æˆ‘ä»¬åªéœ€è¦å°†firstå’ŒendåŒæ—¶ç§»åŠ¨k-1æ¬¡ï¼Œå› ä¸ºå½“å‰firstå°±æ˜¯åœ¨1ï¼Œå¦‚æœkä¸º2ï¼Œé‚£ä¹ˆå°±æ˜¯ç§»åŠ¨2-1æ¬¡ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/æ•°æ®ç»“æ„ï¼šé“¾è¡¨/10.jpg" alt="ç¬¬äºŒæ­¥" style="zoom:80%;"></li><li><p>ç„¶åè¿›è¡Œç¬¬ä¸€æ¬¡æŠ¥æ•°ï¼Œ3å‡ºåˆ—</p><p>æ³¨æ„ï¼Œfirstæœ¬èº«ä¹Ÿç®—ä¸€ä¸‹å“¦ï¼Œç„¶åæˆ‘ä»¬ç§»åŠ¨mä¸‹ï¼Œmä¸º2ï¼Œé‚£ä¹ˆå°±ä»£è¡¨ç€æ•°2ä¸‹ï¼Œç„¶åç§»åŠ¨1æ¬¡ï¼Œä¹Ÿå°±æ˜¯m-1ã€‚</p></li></ol>   <img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/æ•°æ®ç»“æ„ï¼šé“¾è¡¨/11.jpg" alt="ç¬¬ä¸‰æ­¥" style="zoom:80%;"><p>   ç§»åŠ¨ä¸€æ¬¡ä»¥åï¼Œæˆ‘ä»¬å°±æ‰¾åˆ°äº†ç¬¬ä¸€ä¸ªéœ€è¦å‡ºåˆ—çš„å¨ƒï¼Œä¹Ÿå°±æ˜¯å°†firstæŒ‡å‘çš„é‚£ä¸ªä¸€ä¸ªèŠ‚ç‚¹å‡ºåˆ—ï¼Œé‚£ä¹ˆæ—¢ç„¶å®ƒå‡ºåˆ—äº†ï¼Œé‚£ä¹ˆfirstå°±è¦æŒ‡å‘å‡ºåˆ—çš„é‚£ä¸ªèŠ‚ç‚¹çš„nextäº†ï¼ŒåŒæ—¶endä¹Ÿå°±è¦æŒ‡å‘é‚£ä¸ªèŠ‚ç‚¹çš„nextã€‚</p>   <img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/æ•°æ®ç»“æ„ï¼šé“¾è¡¨/12.jpg" alt="ç¬¬ä¸‰æ­¥" style="zoom:80%;"><p>   å‡ºåˆ—åå°±æˆäº†è¿™ä¸ªæ ·å­ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªå‡ºåˆ—çš„å°±æ˜¯<strong>3</strong>ã€‚</p><ol start="4"><li><p>ç»§ç»­å‡ºåˆ—ï¼Œå‡ºåˆ—5</p><p>æŠ¥æ•°2æ¬¡ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/æ•°æ®ç»“æ„ï¼šé“¾è¡¨/13.jpg" alt="ç¬¬å››æ­¥" style="zoom:80%;"><p>æŠŠfirstæŒ‡å‘çš„èŠ‚ç‚¹å‡ºåˆ—ã€‚</p></li></ol>   <img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/æ•°æ®ç»“æ„ï¼šé“¾è¡¨/14.jpg" alt="ç¬¬å››æ­¥" style="zoom:80%;"><p>   ç„¶åç¬¬äºŒæ¬¡å‡ºåˆ—çš„å°±æ˜¯<strong>5</strong>ã€‚</p><ol start="5"><li><p>ç»§ç»­å‡ºåˆ—ï¼Œå‡ºåˆ—2</p><p>æŠ¥æ•°ä¸¤æ¬¡ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/æ•°æ®ç»“æ„ï¼šé“¾è¡¨/15.jpg" alt="ç¬¬äº”æ­¥" style="zoom:80%;"><p>ç„¶åå†æŠŠfirstæŒ‡å‘çš„èŠ‚ç‚¹å‡ºåˆ—ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/æ•°æ®ç»“æ„ï¼šé“¾è¡¨/16.jpg" alt="ç¬¬äº”æ­¥" style="zoom:80%;"><p>é‚£ä¹ˆè¿™æ¬¡å‡ºåˆ—çš„å°±æ˜¯<strong>2</strong>ã€‚</p></li><li><p>ç»§ç»­å‡ºåˆ—ï¼Œå‡ºåˆ—1</p><p>æŠ¥æ•°ä¸¤æ¬¡ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/æ•°æ®ç»“æ„ï¼šé“¾è¡¨/17.jpg" alt="ç¬¬å…­æ­¥" style="zoom:80%;"><p>ç„¶åè®©firstæŒ‡å‘çš„èŠ‚ç‚¹å‡ºåˆ—ï¼Œå°±å˜æˆäº†è¿™æ ·ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/æ•°æ®ç»“æ„ï¼šé“¾è¡¨/18.jpg" alt="ç¬¬å…­æ­¥" style="zoom:80%;"></li><li><p>å‡ºåˆ—æœ€åä¸€ä¸ªï¼Œ4</p></li></ol><p>ç„¶åå°±å‡ºåˆ—å®Œæˆï¼Œæ€»å…±çš„é¡ºåºå°±æ˜¯3 5 2 1 4ã€‚</p><h3 id="çº¦ç‘Ÿå¤«é—®é¢˜ä»£ç å®ç°"><a href="#çº¦ç‘Ÿå¤«é—®é¢˜ä»£ç å®ç°" class="headerlink" title="çº¦ç‘Ÿå¤«é—®é¢˜ä»£ç å®ç°"></a>çº¦ç‘Ÿå¤«é—®é¢˜ä»£ç å®ç°</h3><h4 id="å®šä¹‰ç¯å½¢é“¾è¡¨èŠ‚ç‚¹ç±»"><a href="#å®šä¹‰ç¯å½¢é“¾è¡¨èŠ‚ç‚¹ç±»" class="headerlink" title="å®šä¹‰ç¯å½¢é“¾è¡¨èŠ‚ç‚¹ç±»"></a>å®šä¹‰ç¯å½¢é“¾è¡¨èŠ‚ç‚¹ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * èŠ‚ç‚¹</span><br><span class="hljs-comment"> */</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Node</span> </span>&#123;<br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> no; <span class="hljs-comment">// ç¼–å·</span><br>  <span class="hljs-keyword">private</span> Node next; <span class="hljs-comment">// æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span><br><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Node</span><span class="hljs-params">(<span class="hljs-keyword">int</span> no)</span> </span>&#123;<br>    <span class="hljs-keyword">this</span>.no = no;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getNo</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> no;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setNo</span><span class="hljs-params">(<span class="hljs-keyword">int</span> no)</span> </span>&#123;<br>    <span class="hljs-keyword">this</span>.no = no;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> Node <span class="hljs-title">getNext</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> next;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setNext</span><span class="hljs-params">(Node next)</span> </span>&#123;<br>    <span class="hljs-keyword">this</span>.next = next;<br>  &#125;<br><br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Node&#123;&quot;</span> +<br>            <span class="hljs-string">&quot;no=&quot;</span> + no + <span class="hljs-string">&quot;&#125;&quot;</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="å®šä¹‰å•å‘ç¯å½¢é“¾è¡¨ç±»"><a href="#å®šä¹‰å•å‘ç¯å½¢é“¾è¡¨ç±»" class="headerlink" title="å®šä¹‰å•å‘ç¯å½¢é“¾è¡¨ç±»"></a>å®šä¹‰å•å‘ç¯å½¢é“¾è¡¨ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å•å‘ç¯å½¢é“¾è¡¨</span><br><span class="hljs-comment"> */</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CircleSingleLinkedList</span> </span>&#123;<br><br>  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªfirstèŠ‚ç‚¹ï¼Œæœ€åˆæ²¡æœ‰ç¼–å·</span><br>  <span class="hljs-keyword">private</span> Node first;<br><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ç¼–å†™æ·»åŠ èŠ‚ç‚¹ï¼Œæ„å»ºç¯å½¢é“¾è¡¨æ–¹æ³•"><a href="#ç¼–å†™æ·»åŠ èŠ‚ç‚¹ï¼Œæ„å»ºç¯å½¢é“¾è¡¨æ–¹æ³•" class="headerlink" title="ç¼–å†™æ·»åŠ èŠ‚ç‚¹ï¼Œæ„å»ºç¯å½¢é“¾è¡¨æ–¹æ³•"></a>ç¼–å†™æ·»åŠ èŠ‚ç‚¹ï¼Œæ„å»ºç¯å½¢é“¾è¡¨æ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ·»åŠ å°å­©èŠ‚ç‚¹ï¼Œæ„å»ºç¯å½¢é“¾è¡¨</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addNode</span><span class="hljs-params">(<span class="hljs-keyword">int</span> nums)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (nums &lt; <span class="hljs-number">1</span>) &#123;<br>        System.out.println(<span class="hljs-string">&quot;numsçš„å€¼ä¸æ­£ç¡®&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-comment">/* è¾…åŠ©å˜é‡ï¼Œæ„å»ºå¾ªç¯é“¾è¡¨ */</span><br>    Node curNode = <span class="hljs-keyword">null</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>;i &lt;= nums;i++) &#123;<br>        Node node = <span class="hljs-keyword">new</span> Node(i);<br>        <span class="hljs-comment">/* å¦‚æœæ˜¯ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ */</span><br>        <span class="hljs-keyword">if</span> (i == <span class="hljs-number">1</span>) &#123;<br>            first = node;<br>            first.setNext(first);<br>            <span class="hljs-comment">/* è®©curNodeæŒ‡å‘ç¬¬ä¸€ä¸ªnode */</span><br>            curNode = first;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            curNode.setNext(node);<br>            node.setNext(first);<br>            curNode = node;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ç¼–å†™éå†ç¯å½¢é“¾è¡¨æ–¹æ³•"><a href="#ç¼–å†™éå†ç¯å½¢é“¾è¡¨æ–¹æ³•" class="headerlink" title="ç¼–å†™éå†ç¯å½¢é“¾è¡¨æ–¹æ³•"></a>ç¼–å†™éå†ç¯å½¢é“¾è¡¨æ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * éå†ç¯å½¢é“¾è¡¨</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">printLinkedList</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (first == <span class="hljs-keyword">null</span>) &#123;<br>        System.out.println(<span class="hljs-string">&quot;ç¯å½¢é“¾è¡¨ä¸ºç©º&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-comment">/* è¾…åŠ©å˜é‡curNodeï¼Œéå†é“¾è¡¨ */</span><br>    Node curNode = first;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-keyword">true</span>) &#123;<br>        System.out.println(curNode);<br>        <span class="hljs-keyword">if</span> (curNode.getNext() == first) &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        curNode = curNode.getNext();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ç¼–å†™çº¦ç‘Ÿå¤«é—®é¢˜èŠ‚ç‚¹å‡ºåˆ—çš„æ–¹æ³•"><a href="#ç¼–å†™çº¦ç‘Ÿå¤«é—®é¢˜èŠ‚ç‚¹å‡ºåˆ—çš„æ–¹æ³•" class="headerlink" title="ç¼–å†™çº¦ç‘Ÿå¤«é—®é¢˜èŠ‚ç‚¹å‡ºåˆ—çš„æ–¹æ³•"></a>ç¼–å†™çº¦ç‘Ÿå¤«é—®é¢˜èŠ‚ç‚¹å‡ºåˆ—çš„æ–¹æ³•</h4><p><strong>å›¾ç¤º</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/æ•°æ®ç»“æ„ï¼šé“¾è¡¨/10.jpg" alt="ç¬¬äºŒæ­¥" style="zoom:80%;"><p><strong>æ€è·¯</strong></p><ul><li><strong>æ˜ç¡®å˜é‡</strong>ï¼Œ <code>n = 5</code>ä»£è¡¨æœ‰5ä¸ªèŠ‚ç‚¹ï¼Œ<code>k = 1</code>ä»£è¡¨ä»ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹æŠ¥æ•°ï¼Œ<code>m = 2</code>ä»£è¡¨æŠ¥æ•°2æ¬¡ã€‚</li><li><strong>è¾…åŠ©å˜é‡</strong>ï¼Œ<code>end</code>å˜é‡äº‹å…ˆæŒ‡å‘ç¯å½¢é“¾è¡¨çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯<code>end.next = first</code>ã€‚</li><li><strong>ç§»åŠ¨æŒ‡é’ˆ</strong>ï¼Œå°†<code>first</code>å’Œ<code>end</code>å˜é‡åŒæ—¶ç§»åŠ¨<code>k - 1</code>æ¬¡ï¼Œä½¿<code>first</code>æŒ‡å‘ç¬¬ä¸€ä¸ªè¦æŠ¥æ•°çš„èŠ‚ç‚¹</li><li><strong>æŠ¥æ•°æ“ä½œ</strong>ï¼Œ<code>first</code>å˜é‡å’Œ<code>end</code>å˜é‡åŒæ—¶ç§»åŠ¨<code>m - 1</code>æ¬¡ã€‚</li><li><strong>èŠ‚ç‚¹å‡ºåˆ—</strong>ï¼Œ<code>first</code>æŒ‡å‘çš„èŠ‚ç‚¹åº”å‡ºåˆ—ï¼Œä¹Ÿå°±æ˜¯<code>first = first.next; end.next = first</code>ã€‚</li></ul><p><strong>ä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * çº¦ç‘Ÿå¤«é—®é¢˜</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> startNo è¡¨ç¤ºä»ç¬¬å‡ ä¸ªèŠ‚ç‚¹å¼€å§‹æŠ¥æ•°</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> countNum è¡¨ç¤ºæŠ¥æ•°å‡ æ¬¡</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> nums è¡¨ç¤ºæœ€åˆæœ‰å‡ ä¸ªèŠ‚ç‚¹åœ¨ç¯å½¢é“¾è¡¨ä¸­</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">josephu</span><span class="hljs-params">(<span class="hljs-keyword">int</span> startNo, <span class="hljs-keyword">int</span> countNum, <span class="hljs-keyword">int</span> nums)</span> </span>&#123;<br><br>    <span class="hljs-comment">/* ç®€å•çš„æ•°æ®æ ¡éªŒ */</span><br>    <span class="hljs-keyword">if</span> (first == <span class="hljs-keyword">null</span> || startNo &lt; <span class="hljs-number">1</span> || startNo &gt; nums) &#123;<br>        System.out.println(<span class="hljs-string">&quot;å‚æ•°è¾“å…¥æœ‰è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/* è¾…åŠ©å˜é‡ï¼Œå®ç°æŒ‡å‘æœ€åä¸€ä¸ªèŠ‚ç‚¹ */</span><br>    Node end = first;<br>    <span class="hljs-keyword">while</span> (end.getNext() != first) &#123;<br>        end = end.getNext();<br>    &#125;<br><br>    <span class="hljs-comment">/* ç§»åŠ¨æŒ‡é’ˆï¼Œè®©firstæŒ‡å‘ç¬¬ä¸€ä¸ªè¦æŠ¥æ•°çš„èŠ‚ç‚¹ */</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; startNo - <span class="hljs-number">1</span>; j++) &#123;<br>        first = first.getNext();<br>        end = end.getNext();<br>    &#125;<br><br>    <span class="hljs-comment">/* èŠ‚ç‚¹æŠ¥æ•° èŠ‚ç‚¹å‡ºåˆ— */</span><br>    <span class="hljs-keyword">while</span> (<span class="hljs-keyword">true</span>) &#123;<br>        <span class="hljs-comment">/* ä»…å‰©ä¸€äºº */</span><br>        <span class="hljs-keyword">if</span> (end == first) &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        <span class="hljs-comment">/* æŠ¥æ•° */</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> k = <span class="hljs-number">0</span>; k &lt; countNum - <span class="hljs-number">1</span>; k++) &#123;<br>            first = first.getNext();<br>            end = end.getNext();<br>        &#125;<br>        <span class="hljs-comment">/* å‡ºåˆ— */</span><br>        System.out.println(<span class="hljs-string">&quot;èŠ‚ç‚¹å‡ºåˆ—ï¼Œç¼–å·ä¸º&quot;</span> + first.getNo());<br>        first = first.getNext();<br>        end.setNext(first);<br>    &#125;<br>    System.out.println(<span class="hljs-string">&quot;èŠ‚ç‚¹å‡ºåˆ—ï¼Œç¼–å·ä¸º&quot;</span> + first.getNo());<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æµ‹è¯•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æµ‹è¯•çº¦ç‘Ÿå¤«é—®é¢˜</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test2</span><span class="hljs-params">()</span> </span>&#123;<br>    CircleSingleLinkedList circleSingleLinkedList = <span class="hljs-keyword">new</span> CircleSingleLinkedList();<br>    <span class="hljs-comment">/* æ„å»º5ä¸ªèŠ‚ç‚¹çš„å¾ªç¯é“¾è¡¨ */</span><br>    circleSingleLinkedList.addNode(<span class="hljs-number">5</span>);<br>    System.out.println(<span class="hljs-string">&quot;å¾ªç¯é“¾è¡¨å†…å®¹ä¸ºï¼š&quot;</span>);<br>    circleSingleLinkedList.printLinkedList();<br>    <span class="hljs-comment">/*çº¦ç‘Ÿå¤«é—®é¢˜*/</span><br>    circleSingleLinkedList.josephu(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»“æœ</strong>ï¼šä¸çº¦ç‘Ÿå¤«é—®é¢˜æ¼”ç¤ºç»“æœç›¸åŒã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java">å¾ªç¯é“¾è¡¨å†…å®¹ä¸ºï¼š<br>Node&#123;no=<span class="hljs-number">1</span>&#125;<br>Node&#123;no=<span class="hljs-number">2</span>&#125;<br>Node&#123;no=<span class="hljs-number">3</span>&#125;<br>Node&#123;no=<span class="hljs-number">4</span>&#125;<br>Node&#123;no=<span class="hljs-number">5</span>&#125;<br>èŠ‚ç‚¹å‡ºåˆ—ï¼Œç¼–å·ä¸º<span class="hljs-number">3</span><br>èŠ‚ç‚¹å‡ºåˆ—ï¼Œç¼–å·ä¸º<span class="hljs-number">5</span><br>èŠ‚ç‚¹å‡ºåˆ—ï¼Œç¼–å·ä¸º<span class="hljs-number">2</span><br>èŠ‚ç‚¹å‡ºåˆ—ï¼Œç¼–å·ä¸º<span class="hljs-number">1</span><br>èŠ‚ç‚¹å‡ºåˆ—ï¼Œç¼–å·ä¸º<span class="hljs-number">4</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>DataStructure</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®ç»“æ„ï¼šé˜Ÿåˆ—</title>
    <link href="/posts/2021/01/28/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E9%98%9F%E5%88%97/"/>
    <url>/posts/2021/01/28/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E9%98%9F%E5%88%97/</url>
    
    <content type="html"><![CDATA[<h2 id="é˜Ÿåˆ—"><a href="#é˜Ÿåˆ—" class="headerlink" title="é˜Ÿåˆ—"></a>é˜Ÿåˆ—</h2><h3 id="é˜Ÿåˆ—ä»‹ç»"><a href="#é˜Ÿåˆ—ä»‹ç»" class="headerlink" title="é˜Ÿåˆ—ä»‹ç»"></a>é˜Ÿåˆ—ä»‹ç»</h3><ul><li><p>é˜Ÿåˆ—æ˜¯ä¸€ä¸ªæœ‰åºåˆ—è¡¨ï¼Œå¯ä»¥ç”¨<strong>æ•°ç»„</strong>æˆ–æ˜¯<strong>é“¾è¡¨</strong>æ¥å®ç°ã€‚</p></li><li><p>é˜Ÿåˆ—éµå¾ª<strong>å…ˆå…¥å…ˆå‡º</strong>çš„åŸåˆ™ï¼Œå³ï¼šå…ˆå­˜å…¥é˜Ÿåˆ—çš„æ•°æ®å…ˆå–å‡ºï¼Œåå­˜å…¥é˜Ÿåˆ—çš„æ•°æ®åå–å‡ºã€‚</p></li><li><p>ä½¿ç”¨æ•°ç»„æ¨¡æ‹Ÿé˜Ÿåˆ—ç¤ºæ„å›¾ï¼š</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/æ•°æ®ç»“æ„ï¼šé˜Ÿåˆ—/1.jpg" alt="é˜Ÿåˆ—ç¤ºæ„å›¾" style="zoom:80%;"></li></ul><h3 id="æ•°ç»„æ¨¡æ‹Ÿé˜Ÿåˆ—åˆå§‹æ€è·¯"><a href="#æ•°ç»„æ¨¡æ‹Ÿé˜Ÿåˆ—åˆå§‹æ€è·¯" class="headerlink" title="æ•°ç»„æ¨¡æ‹Ÿé˜Ÿåˆ—åˆå§‹æ€è·¯"></a>æ•°ç»„æ¨¡æ‹Ÿé˜Ÿåˆ—åˆå§‹æ€è·¯</h3><ul><li><p>é˜Ÿåˆ—æœ¬èº«æ˜¯æœ‰åºåˆ—è¡¨ï¼Œè‹¥ä½¿ç”¨æ•°ç»„ç»“æ„æ¥å­˜å‚¨é˜Ÿåˆ—çš„æ•°æ®ï¼Œåˆ™é˜Ÿåˆ—æ•°ç»„çš„å£°æ˜å¦‚ä¸Šå›¾ï¼Œå…¶ä¸­**<code>maxSize</code><strong>ä¸ºé˜Ÿåˆ—å…ƒç´ çš„æœ€å¤§å®¹é‡</strong>ã€‚**</p></li><li><p>é˜Ÿåˆ—çš„è¾“å‡ºã€è¾“å…¥æ—¶åˆ†åˆ«ä»å‰åä¸¤ç«¯æ¥å¤„ç†çš„ï¼Œå› æ­¤éœ€è¦ä¸¤ä¸ªå˜é‡ <code>front </code>å’Œ <code>rear</code> åˆ†åˆ«è®°å½•é˜Ÿåˆ—å‰åç«¯çš„ä¸‹æ ‡ã€‚<code>front</code>ä¼šéšç€å…ƒç´ è¾“å‡ºè€Œæ”¹å˜ï¼Œ<code>rear</code>ä¼šéšç€å…ƒç´ è¾“å…¥è€Œæ”¹å˜ã€‚</p></li><li><p>å½“æˆ‘ä»¬å°†æ•°æ®å­˜å…¥é˜Ÿåˆ—ï¼Œå¤„ç†éœ€è¦å‡ ä¸ªæ­¥éª¤ï¼š</p><ul><li>åˆå§‹æ—¶ <code>rear, front = -1</code>; </li><li>å½“ <code>front == rear</code>ï¼Œé˜Ÿåˆ—ä¸ºç©ºï¼›å½“<code>rear == maxSize - 1</code>ï¼Œé˜Ÿåˆ—ä¸ºæ»¡ã€‚</li><li>æ’å…¥æ•°æ®ï¼Œåˆ¤</li><li>å¦é˜Ÿæ»¡ï¼Œå°†å°¾æŒ‡é’ˆå‘åç§»ï¼šrear + 1</li></ul></li></ul><h3 id="åˆå§‹æ€è·¯ä»£ç å®ç°"><a href="#åˆå§‹æ€è·¯ä»£ç å®ç°" class="headerlink" title="åˆå§‹æ€è·¯ä»£ç å®ç°"></a>åˆå§‹æ€è·¯ä»£ç å®ç°</h3><ol><li><p><strong>é¦–å…ˆç¼–å†™æ•°ç»„é˜Ÿåˆ—çš„åŸºæœ¬ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ•°ç»„é˜Ÿåˆ—</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArrayQueue</span> </span>&#123;<br><br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> maxSize; <span class="hljs-comment">// æ•°ç»„å®¹é‡</span><br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> front;   <span class="hljs-comment">// é˜Ÿå¤´</span><br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> rear;    <span class="hljs-comment">// é˜Ÿå°¾</span><br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span>[] array; <span class="hljs-comment">// å­˜æ”¾æ•°æ®</span><br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * é˜Ÿåˆ—æ„é€ å™¨</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ArrayQueue</span><span class="hljs-params">(<span class="hljs-keyword">int</span> arrMaxSize)</span> </span>&#123;<br>    <span class="hljs-keyword">this</span>.maxSize = arrMaxSize;<br>    <span class="hljs-keyword">this</span>.array = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[maxSize];<br>    <span class="hljs-keyword">this</span>.front = -<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">this</span>.rear = -<span class="hljs-number">1</span>;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * åˆ¤æ–­é˜Ÿæ»¡</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isFull</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> rear == maxSize - <span class="hljs-number">1</span>;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * åˆ¤æ–­é˜Ÿç©º</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isEmpty</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> rear == front;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ•°æ®å…¥é˜Ÿ</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">enQueue</span><span class="hljs-params">(<span class="hljs-keyword">int</span> data)</span> </span>&#123;<br>    <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦é˜Ÿæ»¡</span><br>    <span class="hljs-keyword">if</span> (isFull()) &#123;<br>      System.out.println(<span class="hljs-string">&quot;é˜Ÿæ»¡ï¼Œå…¥é˜Ÿå¤±è´¥ï¼&quot;</span>);<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    rear++;<br>    array[rear] = data;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ•°æ®å‡ºé˜Ÿ</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">deQueue</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦é˜Ÿç©º</span><br>    <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(<span class="hljs-string">&quot;é˜Ÿç©ºï¼Œå‡ºé˜Ÿå¤±è´¥ï¼&quot;</span>);<br>    &#125;<br>    front++;<br>    <span class="hljs-keyword">return</span> array[front];<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ‰“å°é˜Ÿåˆ—æ•°æ®</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">printQueue</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>      System.out.println(<span class="hljs-string">&quot;é˜Ÿç©ºï¼Œæ— æ•°æ®ï¼&quot;</span>);<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> item: array) &#123;<br>      System.out.print(item + <span class="hljs-string">&quot;\t&quot;</span>);<br>    &#125;<br>    System.out.println();<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æŸ¥çœ‹é˜Ÿå¤´æ•°æ®</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getHead</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦é˜Ÿç©º</span><br>    <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(<span class="hljs-string">&quot;é˜Ÿç©ºï¼Œæ— æ•°æ®ï¼&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> array[front + <span class="hljs-number">1</span>];<br>  &#125;<br>  <br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>ç¼–å†™æµ‹è¯•ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ•°ç»„é˜Ÿåˆ—æµ‹è¯•ç±»</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArrayQueueTest</span> </span>&#123;<br><br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Scanner scanner = <span class="hljs-keyword">new</span> Scanner(System.in);<br><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br><br>    <span class="hljs-comment">// æ„å»ºé˜Ÿåˆ—</span><br>    ArrayQueue queue = <span class="hljs-keyword">new</span> ArrayQueue(<span class="hljs-number">3</span>);<br><br>    <span class="hljs-comment">// æ‰§è¡Œé˜Ÿåˆ—æ“ä½œ</span><br>    <span class="hljs-keyword">boolean</span> loop = <span class="hljs-keyword">true</span>;<br>    <span class="hljs-keyword">while</span> (loop) &#123;<br>      <span class="hljs-comment">// æ˜¾ç¤ºèœå•</span><br>      showMenu();<br>      <span class="hljs-comment">// æ¥æ”¶èœå•é€‰é¡¹</span><br>      <span class="hljs-keyword">char</span> menuOption = scanner.next().charAt(<span class="hljs-number">0</span>);<br>      <span class="hljs-comment">// è§£æèœå•é€‰é¡¹</span><br>      <span class="hljs-keyword">switch</span> (menuOption) &#123;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;p&#x27;</span>:<br>          queue.printQueue();<br>          <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;e&#x27;</span>:<br>          System.out.println(<span class="hljs-string">&quot;è¯·è¾“å…¥ä¸€ä¸ªintç±»å‹æ•°å­—&quot;</span>);<br>          <span class="hljs-keyword">int</span> data = scanner.nextInt();<br>          queue.enQueue(data);<br>          <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;d&#x27;</span>:<br>          <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">int</span> res = queue.deQueue();<br>            System.out.println(<span class="hljs-string">&quot;å‡ºé˜Ÿæ•°æ®æ˜¯=&gt;&quot;</span> + res);<br>          &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            System.out.println(e.getMessage());<br>          &#125;<br>          <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;g&#x27;</span>:<br>          <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">int</span> item = queue.getHead();<br>            System.out.println(<span class="hljs-string">&quot;é˜Ÿå¤´æ•°æ®æ˜¯=&gt;&quot;</span> + item);<br>          &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            System.out.println(e.getMessage());<br>          &#125;<br>          <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;q&#x27;</span>:<br>          scanner.close();<br>          loop = <span class="hljs-keyword">false</span>;<br>          System.out.println(<span class="hljs-string">&quot;ç¨‹åºæ­£å¸¸é€€å‡ºï¼&quot;</span>);<br>          <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">default</span>:<br>          <span class="hljs-keyword">break</span>;<br>      &#125;<br>    &#125;<br><br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">showMenu</span><span class="hljs-params">()</span> </span>&#123;<br>      System.out.println(<span class="hljs-string">&quot;------------------------------------èœå•-----------------------------------------------&quot;</span>);<br>      System.out.println(<span class="hljs-string">&quot;p(print):æ‰“å°é˜Ÿåˆ—\tq(quit):é€€å‡ºç¨‹åº\te(enqueue):å…¥é˜Ÿ\td(dequeue):å‡ºé˜Ÿ\tg(getHead):çœ‹é˜Ÿå¤´æ•°æ®&quot;</span>);<br>  &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>æµ‹è¯•</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs java">------------------------------------èœå•-----------------------------------------------<br>p(print):æ‰“å°é˜Ÿåˆ—q(quit):é€€å‡ºç¨‹åºe(enqueue):å…¥é˜Ÿd(dequeue):å‡ºé˜Ÿg(getHead):çœ‹é˜Ÿå¤´æ•°æ®<br>p<br>é˜Ÿç©ºï¼Œæ— æ•°æ®ï¼<br>------------------------------------èœå•-----------------------------------------------<br>p(print):æ‰“å°é˜Ÿåˆ—q(quit):é€€å‡ºç¨‹åºe(enqueue):å…¥é˜Ÿd(dequeue):å‡ºé˜Ÿg(getHead):çœ‹é˜Ÿå¤´æ•°æ®<br>e<br>è¯·è¾“å…¥ä¸€ä¸ª<span class="hljs-keyword">int</span>ç±»å‹æ•°å­—<br><span class="hljs-number">10</span><br>------------------------------------èœå•-----------------------------------------------<br>p(print):æ‰“å°é˜Ÿåˆ—q(quit):é€€å‡ºç¨‹åºe(enqueue):å…¥é˜Ÿd(dequeue):å‡ºé˜Ÿg(getHead):çœ‹é˜Ÿå¤´æ•°æ®<br>p<br>array[i]=<span class="hljs-number">10</span>array[i]=<span class="hljs-number">0</span>array[i]=<span class="hljs-number">0</span><br>------------------------------------èœå•-----------------------------------------------<br>p(print):æ‰“å°é˜Ÿåˆ—q(quit):é€€å‡ºç¨‹åºe(enqueue):å…¥é˜Ÿd(dequeue):å‡ºé˜Ÿg(getHead):çœ‹é˜Ÿå¤´æ•°æ®<br>e<br>è¯·è¾“å…¥ä¸€ä¸ª<span class="hljs-keyword">int</span>ç±»å‹æ•°å­—<br><span class="hljs-number">20</span><br>------------------------------------èœå•-----------------------------------------------<br>p(print):æ‰“å°é˜Ÿåˆ—q(quit):é€€å‡ºç¨‹åºe(enqueue):å…¥é˜Ÿd(dequeue):å‡ºé˜Ÿg(getHead):çœ‹é˜Ÿå¤´æ•°æ®<br>e<br>è¯·è¾“å…¥ä¸€ä¸ª<span class="hljs-keyword">int</span>ç±»å‹æ•°å­—<br><span class="hljs-number">20</span><br>------------------------------------èœå•-----------------------------------------------<br>p(print):æ‰“å°é˜Ÿåˆ—q(quit):é€€å‡ºç¨‹åºe(enqueue):å…¥é˜Ÿd(dequeue):å‡ºé˜Ÿg(getHead):çœ‹é˜Ÿå¤´æ•°æ®<br>p<br>array[i]=<span class="hljs-number">10</span>array[i]=<span class="hljs-number">20</span>array[i]=<span class="hljs-number">20</span><br>------------------------------------èœå•-----------------------------------------------<br>p(print):æ‰“å°é˜Ÿåˆ—q(quit):é€€å‡ºç¨‹åºe(enqueue):å…¥é˜Ÿd(dequeue):å‡ºé˜Ÿg(getHead):çœ‹é˜Ÿå¤´æ•°æ®<br>e<br>è¯·è¾“å…¥ä¸€ä¸ª<span class="hljs-keyword">int</span>ç±»å‹æ•°å­—<br><span class="hljs-number">20</span><br>é˜Ÿæ»¡ï¼Œå…¥é˜Ÿå¤±è´¥ï¼<br>------------------------------------èœå•-----------------------------------------------<br>p(print):æ‰“å°é˜Ÿåˆ—q(quit):é€€å‡ºç¨‹åºe(enqueue):å…¥é˜Ÿd(dequeue):å‡ºé˜Ÿg(getHead):çœ‹é˜Ÿå¤´æ•°æ®<br>d<br>å‡ºé˜Ÿæ•°æ®æ˜¯=&gt;<span class="hljs-number">10</span><br>------------------------------------èœå•-----------------------------------------------<br>p(print):æ‰“å°é˜Ÿåˆ—q(quit):é€€å‡ºç¨‹åºe(enqueue):å…¥é˜Ÿd(dequeue):å‡ºé˜Ÿg(getHead):çœ‹é˜Ÿå¤´æ•°æ®<br>d<br>å‡ºé˜Ÿæ•°æ®æ˜¯=&gt;<span class="hljs-number">20</span><br>------------------------------------èœå•-----------------------------------------------<br>p(print):æ‰“å°é˜Ÿåˆ—q(quit):é€€å‡ºç¨‹åºe(enqueue):å…¥é˜Ÿd(dequeue):å‡ºé˜Ÿg(getHead):çœ‹é˜Ÿå¤´æ•°æ®<br>d<br>å‡ºé˜Ÿæ•°æ®æ˜¯=&gt;<span class="hljs-number">20</span><br>------------------------------------èœå•-----------------------------------------------<br>p(print):æ‰“å°é˜Ÿåˆ—q(quit):é€€å‡ºç¨‹åºe(enqueue):å…¥é˜Ÿd(dequeue):å‡ºé˜Ÿg(getHead):çœ‹é˜Ÿå¤´æ•°æ®<br>p<br>é˜Ÿç©ºï¼Œæ— æ•°æ®ï¼<br>------------------------------------èœå•-----------------------------------------------<br>p(print):æ‰“å°é˜Ÿåˆ—q(quit):é€€å‡ºç¨‹åºe(enqueue):å…¥é˜Ÿd(dequeue):å‡ºé˜Ÿg(getHead):çœ‹é˜Ÿå¤´æ•°æ®<br>g<br>é˜Ÿç©ºï¼Œæ— æ•°æ®ï¼<br>------------------------------------èœå•-----------------------------------------------<br>p(print):æ‰“å°é˜Ÿåˆ—q(quit):é€€å‡ºç¨‹åºe(enqueue):å…¥é˜Ÿd(dequeue):å‡ºé˜Ÿg(getHead):çœ‹é˜Ÿå¤´æ•°æ®<br>e<br>è¯·è¾“å…¥ä¸€ä¸ª<span class="hljs-keyword">int</span>ç±»å‹æ•°å­—<br><span class="hljs-number">20</span><br>é˜Ÿæ»¡ï¼Œå…¥é˜Ÿå¤±è´¥ï¼<br>------------------------------------èœå•-----------------------------------------------<br>p(print):æ‰“å°é˜Ÿåˆ—q(quit):é€€å‡ºç¨‹åºe(enqueue):å…¥é˜Ÿd(dequeue):å‡ºé˜Ÿg(getHead):çœ‹é˜Ÿå¤´æ•°æ®<br>q<br>ç¨‹åºæ­£å¸¸é€€å‡ºï¼<br></code></pre></td></tr></table></figure></li><li><p><strong>åˆ†æé—®é¢˜å¹¶ä¼˜åŒ–</strong></p><ul><li>ç›®å‰æ•°ç»„ä½¿ç”¨ä¸€æ¬¡å°±ä¸èƒ½ç”¨ï¼Œ æ²¡æœ‰è¾¾åˆ°å¤ç”¨çš„æ•ˆæœ</li><li>å°†è¿™ä¸ªæ•°ç»„ä½¿ç”¨ç®—æ³•ï¼Œæ”¹è¿›æˆä¸€ä¸ª<strong>ç¯å½¢çš„é˜Ÿåˆ—</strong>å–æ¨¡ï¼š%</li></ul></li></ol><h3 id="æ•°ç»„æ¨¡æ‹Ÿç¯å½¢é˜Ÿåˆ—æ€è·¯"><a href="#æ•°ç»„æ¨¡æ‹Ÿç¯å½¢é˜Ÿåˆ—æ€è·¯" class="headerlink" title="æ•°ç»„æ¨¡æ‹Ÿç¯å½¢é˜Ÿåˆ—æ€è·¯"></a>æ•°ç»„æ¨¡æ‹Ÿç¯å½¢é˜Ÿåˆ—æ€è·¯</h3><ul><li><code>front</code>æŒ‡å‘é˜Ÿå¤´ï¼Œ<code>rear</code>æŒ‡å‘é˜Ÿå°¾ã€‚</li><li><strong>é˜Ÿç©ºæ¡ä»¶</strong>ï¼š<code>rear == front</code></li><li><strong>å°‘ç”¨ä¸€ä¸ªé˜Ÿåˆ—æ•°ç»„ç©ºé—´</strong>ï¼Œçº¦å®šâ€œ<strong>é˜Ÿåˆ—å¤´æŒ‡é’ˆåœ¨é˜Ÿåˆ—å°¾æŒ‡é’ˆçš„ä¸‹ä¸€ä½</strong>â€ä¸º<strong>é˜Ÿæ»¡</strong>æ ‡å¿—ã€‚</li><li><strong>é˜Ÿæ»¡æ¡ä»¶</strong>ï¼š<code>(rear + 1) % maxSize == front</code></li><li><strong>æœ‰æ•ˆæ•°æ®ä¸ªæ•°</strong>ï¼š<code>(rear + maxSize - front) % maxSize</code></li></ul><blockquote><p>ç©ºé˜Ÿ</p></blockquote><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/æ•°æ®ç»“æ„ï¼šé˜Ÿåˆ—/1.png" alt="ç©ºé˜Ÿ" style="zoom:80%;"><blockquote><p>å…¥é˜Ÿ</p></blockquote><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/æ•°æ®ç»“æ„ï¼šé˜Ÿåˆ—/2.png" alt="å…¥é˜Ÿ" style="zoom:80%;"><blockquote><p>å‡ºé˜Ÿ</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E9%98%9F%E5%88%97/3.png" alt="å‡ºé˜Ÿ"></p><h3 id="æ”¹è¿›æ€è·¯ä»£ç å®ç°"><a href="#æ”¹è¿›æ€è·¯ä»£ç å®ç°" class="headerlink" title="æ”¹è¿›æ€è·¯ä»£ç å®ç°"></a>æ”¹è¿›æ€è·¯ä»£ç å®ç°</h3><ol><li><p><strong>æ•°ç»„ç¯å½¢é˜Ÿåˆ—ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å¾ªç¯æ•°ç»„é˜Ÿåˆ—</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CircleArrayQueue</span> </span>&#123;<br><br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> maxSize; <span class="hljs-comment">// æ•°ç»„å®¹é‡</span><br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> front;   <span class="hljs-comment">// é˜Ÿå¤´</span><br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> rear;    <span class="hljs-comment">// é˜Ÿå°¾</span><br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span>[] array; <span class="hljs-comment">// å­˜æ”¾æ•°æ®</span><br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * é˜Ÿåˆ—æ„é€ å™¨</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">CircleArrayQueue</span><span class="hljs-params">(<span class="hljs-keyword">int</span> arrMaxSize)</span> </span>&#123;<br>    <span class="hljs-keyword">this</span>.maxSize = arrMaxSize;<br>    <span class="hljs-keyword">this</span>.array = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[maxSize];<br>    <span class="hljs-keyword">this</span>.front = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">this</span>.rear = <span class="hljs-number">0</span>;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * åˆ¤æ–­é˜Ÿæ»¡</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isFull</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> (rear + <span class="hljs-number">1</span>) % maxSize == front;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * åˆ¤æ–­é˜Ÿç©º</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isEmpty</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> rear == front;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ•°æ®å…¥é˜Ÿ</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">enQueue</span><span class="hljs-params">(<span class="hljs-keyword">int</span> data)</span> </span>&#123;<br>    <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦é˜Ÿæ»¡</span><br>    <span class="hljs-keyword">if</span> (isFull()) &#123;<br>      System.out.println(<span class="hljs-string">&quot;é˜Ÿæ»¡ï¼Œå…¥é˜Ÿå¤±è´¥ï¼&quot;</span>);<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    array[rear] = data;<br>    rear = (rear + <span class="hljs-number">1</span>) % maxSize;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ•°æ®å‡ºé˜Ÿ</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">deQueue</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦é˜Ÿç©º</span><br>    <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(<span class="hljs-string">&quot;é˜Ÿç©ºï¼Œå‡ºé˜Ÿå¤±è´¥ï¼&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">int</span> data = array[front];<br>    front = (front + <span class="hljs-number">1</span>) % maxSize;<br>    <span class="hljs-keyword">return</span> data;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ‰“å°é˜Ÿåˆ—æ•°æ®</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">printQueue</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>      System.out.println(<span class="hljs-string">&quot;é˜Ÿç©ºï¼Œæ— æ•°æ®ï¼&quot;</span>);<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = front; i &lt; front + sizeQueue(); i++) &#123;<br>      System.out.print(<span class="hljs-string">&quot;array[&quot;</span> + (i % maxSize) + <span class="hljs-string">&quot;]=&quot;</span> + array[i % maxSize] + <span class="hljs-string">&quot;\t&quot;</span>);<br>    &#125;<br>    System.out.println();<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * å½“å‰é˜Ÿåˆ—é•¿åº¦</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">sizeQueue</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> (rear - front + maxSize) % maxSize;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æŸ¥çœ‹é˜Ÿå¤´æ•°æ®</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getHead</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦é˜Ÿç©º</span><br>    <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(<span class="hljs-string">&quot;é˜Ÿç©ºï¼Œæ— æ•°æ®ï¼&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> array[front];<br>  &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>æµ‹è¯•ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å¾ªç¯æ•°ç»„é˜Ÿåˆ—æµ‹è¯•ç±»</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CircleArrayQueueTest</span> </span>&#123;<br><br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Scanner scanner = <span class="hljs-keyword">new</span> Scanner(System.in);<br><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>    <span class="hljs-comment">// æ„å»ºé˜Ÿåˆ—</span><br>    CircleArrayQueue queue = <span class="hljs-keyword">new</span> CircleArrayQueue(<span class="hljs-number">5</span>);<br><br>    <span class="hljs-comment">// æ‰§è¡Œé˜Ÿåˆ—æ“ä½œ</span><br>    <span class="hljs-keyword">boolean</span> loop = <span class="hljs-keyword">true</span>;<br>    <span class="hljs-keyword">while</span> (loop) &#123;<br>      <span class="hljs-comment">// æ˜¾ç¤ºèœå•</span><br>      showMenu();<br>      <span class="hljs-comment">// æ¥æ”¶èœå•é€‰é¡¹</span><br>      <span class="hljs-keyword">char</span> menuOption = scanner.next().charAt(<span class="hljs-number">0</span>);<br>      <span class="hljs-comment">// è§£æèœå•é€‰é¡¹</span><br>      <span class="hljs-keyword">switch</span> (menuOption) &#123;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;p&#x27;</span>:<br>          queue.printQueue();<br>          <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;e&#x27;</span>:<br>          System.out.println(<span class="hljs-string">&quot;è¯·è¾“å…¥ä¸€ä¸ªintç±»å‹æ•°å­—&quot;</span>);<br>          <span class="hljs-keyword">int</span> data = scanner.nextInt();<br>          queue.enQueue(data);<br>          <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;d&#x27;</span>:<br>          <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">int</span> res = queue.deQueue();<br>            System.out.println(<span class="hljs-string">&quot;å‡ºé˜Ÿæ•°æ®æ˜¯=&gt;&quot;</span> + res);<br>          &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            System.out.println(e.getMessage());<br>          &#125;<br>          <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;g&#x27;</span>:<br>          <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">int</span> item = queue.getHead();<br>            System.out.println(<span class="hljs-string">&quot;é˜Ÿå¤´æ•°æ®æ˜¯=&gt;&quot;</span> + item);<br>          &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            System.out.println(e.getMessage());<br>          &#125;<br>          <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;q&#x27;</span>:<br>          scanner.close();<br>          loop = <span class="hljs-keyword">false</span>;<br>          System.out.println(<span class="hljs-string">&quot;ç¨‹åºæ­£å¸¸é€€å‡ºï¼&quot;</span>);<br>          <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">default</span>:<br>          <span class="hljs-keyword">break</span>;<br>      &#125;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">showMenu</span><span class="hljs-params">()</span> </span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;------------------------------------èœå•-----------------------------------------------&quot;</span>);<br>    System.out.println(<span class="hljs-string">&quot;p(print):æ‰“å°é˜Ÿåˆ—\tq(quit):é€€å‡ºç¨‹åº\te(enqueue):å…¥é˜Ÿ\td(dequeue):å‡ºé˜Ÿ\tg(getHead):çœ‹é˜Ÿå¤´æ•°æ®&quot;</span>);<br>  &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æµ‹è¯•ç»“æœ(å¯¹åº”æ€è·¯)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java">------------------------------------èœå•-----------------------------------------------<br>p(print):æ‰“å°é˜Ÿåˆ—q(quit):é€€å‡ºç¨‹åºe(enqueue):å…¥é˜Ÿd(dequeue):å‡ºé˜Ÿg(getHead):çœ‹é˜Ÿå¤´æ•°æ®<br>p<br>é˜Ÿç©ºï¼Œæ— æ•°æ®ï¼<br>------------------------------------èœå•-----------------------------------------------<br>p(print):æ‰“å°é˜Ÿåˆ—q(quit):é€€å‡ºç¨‹åºe(enqueue):å…¥é˜Ÿd(dequeue):å‡ºé˜Ÿg(getHead):çœ‹é˜Ÿå¤´æ•°æ®<br>e<br>è¯·è¾“å…¥ä¸€ä¸ª<span class="hljs-keyword">int</span>ç±»å‹æ•°å­—<br><span class="hljs-number">10</span><br>------------------------------------èœå•-----------------------------------------------<br>p(print):æ‰“å°é˜Ÿåˆ—q(quit):é€€å‡ºç¨‹åºe(enqueue):å…¥é˜Ÿd(dequeue):å‡ºé˜Ÿg(getHead):çœ‹é˜Ÿå¤´æ•°æ®<br>e<br>è¯·è¾“å…¥ä¸€ä¸ª<span class="hljs-keyword">int</span>ç±»å‹æ•°å­—<br><span class="hljs-number">11</span><br>------------------------------------èœå•-----------------------------------------------<br>p(print):æ‰“å°é˜Ÿåˆ—q(quit):é€€å‡ºç¨‹åºe(enqueue):å…¥é˜Ÿd(dequeue):å‡ºé˜Ÿg(getHead):çœ‹é˜Ÿå¤´æ•°æ®<br>e<br>è¯·è¾“å…¥ä¸€ä¸ª<span class="hljs-keyword">int</span>ç±»å‹æ•°å­—<br><span class="hljs-number">12</span><br>------------------------------------èœå•-----------------------------------------------<br>p(print):æ‰“å°é˜Ÿåˆ—q(quit):é€€å‡ºç¨‹åºe(enqueue):å…¥é˜Ÿd(dequeue):å‡ºé˜Ÿg(getHead):çœ‹é˜Ÿå¤´æ•°æ®<br>e<br>è¯·è¾“å…¥ä¸€ä¸ª<span class="hljs-keyword">int</span>ç±»å‹æ•°å­—<br><span class="hljs-number">13</span><br>------------------------------------èœå•-----------------------------------------------<br>p(print):æ‰“å°é˜Ÿåˆ—q(quit):é€€å‡ºç¨‹åºe(enqueue):å…¥é˜Ÿd(dequeue):å‡ºé˜Ÿg(getHead):çœ‹é˜Ÿå¤´æ•°æ®<br>e<br>è¯·è¾“å…¥ä¸€ä¸ª<span class="hljs-keyword">int</span>ç±»å‹æ•°å­—<br><span class="hljs-number">14</span><br>é˜Ÿæ»¡ï¼Œå…¥é˜Ÿå¤±è´¥ï¼<br>------------------------------------èœå•-----------------------------------------------<br>p(print):æ‰“å°é˜Ÿåˆ—q(quit):é€€å‡ºç¨‹åºe(enqueue):å…¥é˜Ÿd(dequeue):å‡ºé˜Ÿg(getHead):çœ‹é˜Ÿå¤´æ•°æ®<br>g<br>é˜Ÿå¤´æ•°æ®æ˜¯=&gt;<span class="hljs-number">10</span><br>------------------------------------èœå•-----------------------------------------------<br>p(print):æ‰“å°é˜Ÿåˆ—q(quit):é€€å‡ºç¨‹åºe(enqueue):å…¥é˜Ÿd(dequeue):å‡ºé˜Ÿg(getHead):çœ‹é˜Ÿå¤´æ•°æ®<br>d<br>å‡ºé˜Ÿæ•°æ®æ˜¯=&gt;<span class="hljs-number">10</span><br>------------------------------------èœå•-----------------------------------------------<br>p(print):æ‰“å°é˜Ÿåˆ—q(quit):é€€å‡ºç¨‹åºe(enqueue):å…¥é˜Ÿd(dequeue):å‡ºé˜Ÿg(getHead):çœ‹é˜Ÿå¤´æ•°æ®<br>g<br>é˜Ÿå¤´æ•°æ®æ˜¯=&gt;<span class="hljs-number">11</span><br>------------------------------------èœå•-----------------------------------------------<br>p(print):æ‰“å°é˜Ÿåˆ—q(quit):é€€å‡ºç¨‹åºe(enqueue):å…¥é˜Ÿd(dequeue):å‡ºé˜Ÿg(getHead):çœ‹é˜Ÿå¤´æ•°æ®<br>q<br>ç¨‹åºæ­£å¸¸é€€å‡ºï¼<br></code></pre></td></tr></table></figure></li></ol><h3 id="é“¾è¡¨æ¨¡æ‹Ÿç¯å½¢é˜Ÿåˆ—å®ç°"><a href="#é“¾è¡¨æ¨¡æ‹Ÿç¯å½¢é˜Ÿåˆ—å®ç°" class="headerlink" title="é“¾è¡¨æ¨¡æ‹Ÿç¯å½¢é˜Ÿåˆ—å®ç°"></a>é“¾è¡¨æ¨¡æ‹Ÿç¯å½¢é˜Ÿåˆ—å®ç°</h3>]]></content>
    
    
    
    <tags>
      
      <tag>DataStructure</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®ç»“æ„ï¼šäºŒç»´æ•°ç»„&lt;=&gt;ç¨€ç–æ•°ç»„</title>
    <link href="/posts/2021/01/25/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84-%E7%A8%80%E7%96%8F%E6%95%B0%E7%BB%84/"/>
    <url>/posts/2021/01/25/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84-%E7%A8%80%E7%96%8F%E6%95%B0%E7%BB%84/</url>
    
    <content type="html"><![CDATA[<h2 id="äºŒç»´æ•°ç»„ä¸ç¨€ç–æ•°ç»„çš„ç›¸äº’è½¬æ¢"><a href="#äºŒç»´æ•°ç»„ä¸ç¨€ç–æ•°ç»„çš„ç›¸äº’è½¬æ¢" class="headerlink" title="äºŒç»´æ•°ç»„ä¸ç¨€ç–æ•°ç»„çš„ç›¸äº’è½¬æ¢"></a>äºŒç»´æ•°ç»„ä¸ç¨€ç–æ•°ç»„çš„ç›¸äº’è½¬æ¢</h2><h3 id="ä¸€ã€å®é™…éœ€æ±‚"><a href="#ä¸€ã€å®é™…éœ€æ±‚" class="headerlink" title="ä¸€ã€å®é™…éœ€æ±‚"></a>ä¸€ã€å®é™…éœ€æ±‚</h3><p>ç¼–å†™äº”å­æ£‹ç¨‹åºï¼Œäº”å­æ£‹ç¨‹åºæ˜¯æœ‰<strong>å­˜ç›˜é€€å‡º</strong>å’Œ<strong>ç»§ç»­ä¸Šç›˜</strong>çš„åŠŸèƒ½ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84-%E7%A8%80%E7%96%8F%E6%95%B0%E7%BB%84/1.png" alt="å®é™…éœ€æ±‚"></p><p><strong>å®é™…é—®é¢˜</strong>ï¼šä½¿ç”¨äºŒç»´æ•°ç»„è®°å½•æ£‹ç›˜ï¼Œ<strong>æ²¡æœ‰æ„ä¹‰çš„0æ•°æ®å å¤§å¤šæ•°ç©ºé—´</strong>ã€‚</p><p><strong>è§£å†³åŠæ³•</strong>ï¼šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<strong>ç¨€ç–æ•°ç»„</strong>ä»£æ›¿ä¸Šé¢çš„<strong>äºŒç»´æ•°ç»„</strong>ã€‚</p><h3 id="äºŒã€ç¨€ç–æ•°ç»„"><a href="#äºŒã€ç¨€ç–æ•°ç»„" class="headerlink" title="äºŒã€ç¨€ç–æ•°ç»„"></a>äºŒã€ç¨€ç–æ•°ç»„</h3><blockquote><p>ç¨€ç–çŸ©é˜µçš„ä»‹ç»</p></blockquote><p>å½“ä¸€ä¸ªæ•°ç»„ä¸­<strong>å¤§éƒ¨åˆ†å…ƒç´ ä¸º0</strong>ï¼Œ<strong>æˆ–è€…ä¸ºåŒä¸€ä¸ªå€¼</strong>æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç¨€ç–æ•°ç»„æ¥ä¿å­˜è¯¥æ•°ç»„ã€‚</p><p>ç¨€ç–æ•°ç»„çš„å¤„ç†æ–¹æ³•ï¼š</p><ol><li>è®°å½•æ•°ç»„çš„<strong>è¡Œæ•°ã€åˆ—æ•°å’Œä¸ä¸º0çš„å€¼ä¸ªæ•°</strong>ã€‚</li><li>è®°å½•ä¸ä¸º0çš„å€¼çš„å…ƒç´ çš„<strong>è¡Œä¸‹æ ‡ã€åˆ—ä¸‹æ ‡å’Œå€¼</strong>ï¼Œä»è€Œç¼©å°ç¨‹åºçš„è§„æ¨¡ã€‚</li></ol><blockquote><p>ç¨€ç–çŸ©é˜µçš„å®ä¾‹</p></blockquote><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/æ•°æ®ç»“æ„ï¼šäºŒç»´æ•°ç»„-ç¨€ç–æ•°ç»„/2.png" alt="å®ä¾‹" style="zoom:80%;"><h3 id="ä¸‰ã€äºŒç»´æ•°ç»„ä¸ç¨€ç–æ•°ç»„è½¬æ¢çš„æ€è·¯"><a href="#ä¸‰ã€äºŒç»´æ•°ç»„ä¸ç¨€ç–æ•°ç»„è½¬æ¢çš„æ€è·¯" class="headerlink" title="ä¸‰ã€äºŒç»´æ•°ç»„ä¸ç¨€ç–æ•°ç»„è½¬æ¢çš„æ€è·¯"></a>ä¸‰ã€äºŒç»´æ•°ç»„ä¸ç¨€ç–æ•°ç»„è½¬æ¢çš„æ€è·¯</h3><blockquote><p>äºŒç»´æ•°ç»„è½¬åŒ–ä¸ºç¨€ç–æ•°ç»„</p></blockquote><ol><li><p>éå†åŸå§‹çš„äºŒç»´æ•°ç»„ï¼Œå¾—åˆ°<strong>è¡Œæ•° row</strong>ã€<strong>åˆ—æ•° col</strong> å’Œ<strong>æœ‰æ•ˆæ•°æ®çš„ä¸ªæ•° sum</strong>ã€‚</p></li><li><p>æ ¹æ® 1 ä¸­çš„ sum å¯ä»¥åˆ›å»ºç¨€ç–æ•°ç»„ <code>sparseArr</code> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">int</span> sparseArr[][] = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[sum + <span class="hljs-number">1</span>][<span class="hljs-number">3</span>];<br></code></pre></td></tr></table></figure></li><li><p>å°†äºŒç»´æ•°ç»„çš„<strong>æœ‰æ•ˆæ•°æ®ä¿¡æ¯</strong>å­˜åˆ°ç¨€ç–æ•°ç»„ã€‚</p></li></ol><blockquote><p>ç¨€ç–æ•°ç»„è½¬åŒ–ä¸ºäºŒç»´æ•°ç»„</p></blockquote><ol><li><p>è¯»å–ç¨€ç–çŸ©é˜µçš„ç¬¬ä¸€è¡Œæ•°æ®å¾—åˆ°<strong>è¡Œæ•° row</strong>ã€<strong>åˆ—æ•° col</strong> ã€‚</p></li><li><p>æ ¹æ® 1 ä¸­çš„ rowã€col å¯ä»¥åˆ›å»ºäºŒç»´æ•°ç»„ <code>chessArr</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">int</span> chessArr[][] = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[row][col];<br></code></pre></td></tr></table></figure></li><li><p>è¯»å–ç¨€ç–çŸ©é˜µåé¢çš„æ•°æ®ä¿¡æ¯ï¼Œä¿å­˜åˆ°äºŒç»´æ•°ç»„ä¸­ã€‚</p></li></ol><h3 id="å››ã€ä»£ç å®ç°"><a href="#å››ã€ä»£ç å®ç°" class="headerlink" title="å››ã€ä»£ç å®ç°"></a>å››ã€ä»£ç å®ç°</h3><ol><li><p><strong>é¦–å…ˆå®šä¹‰ç›¸å…³å¸¸é‡</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ç¨€ç–æ•°ç»„å¸¸é‡</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">SparseArrayVar</span> </span>&#123;<br><br>    <span class="hljs-comment">// 0:æ²¡æœ‰æ£‹å­  1:é»‘è‰²æ£‹å­  2:è“è‰²æ£‹å­</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> NO_CHESS = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> BLACK_CHESS = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> BLUE_CHESS = <span class="hljs-number">2</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æµç¨‹ï¼šåŸå§‹æ•°ç»„=&gt;ç¨€ç–æ•°ç»„=&gt;å­˜åˆ°æ–‡ä»¶=&gt;è¯»å–æ–‡ä»¶=&gt;æ¢å¤ä¸ºåŸå§‹æ•°ç»„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ç¨€ç–æ•°ç»„</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SparseArray</span> </span>&#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * å·¥ä½œæµç¨‹</span><br><span class="hljs-comment">   */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br><br>        <span class="hljs-comment">// äºŒç»´æ•°ç»„</span><br>        <span class="hljs-keyword">int</span>[][] primary_arr = &#123;&#125;;<br><br>        <span class="hljs-comment">// åˆå§‹åŒ–åŸæ•°ç»„ä¸º 11*11 äºŒç»´æ•°ç»„</span><br>        <span class="hljs-keyword">int</span> row = <span class="hljs-number">11</span>, col = <span class="hljs-number">11</span>;<br>        primary_arr = initPrimaryArraySize(row, col);<br><br>        <span class="hljs-comment">// åˆå§‹åŒ–åŸå§‹æ•°ç»„è½å­æƒ…å†µ</span><br>        initPrimaryArrayChess(primary_arr);<br><br>        <span class="hljs-comment">// è¾“å‡ºåŸå§‹æ•°ç»„å†…å®¹</span><br>        System.out.println(<span class="hljs-string">&quot;-----------------åŸå§‹æ•°ç»„----------------&quot;</span>);<br>        printArr(primary_arr);<br><br>        <span class="hljs-comment">// ç¨€ç–æ•°ç»„</span><br>        <span class="hljs-keyword">int</span>[][] sparse_arr = &#123;&#125;;<br><br>        <span class="hljs-comment">// å°†äºŒç»´æ•°ç»„è½¬åŒ–ä¸ºç¨€ç–æ•°ç»„</span><br>        sparse_arr = primaryArrayToSparseArray(primary_arr);<br><br>        <span class="hljs-comment">// è¾“å‡ºç¨€ç–æ•°ç»„å†…å®¹</span><br>        System.out.println(<span class="hljs-string">&quot;-----------------ç¨€ç–æ•°ç»„----------------&quot;</span>);<br>        printArr(sparse_arr);<br><br>        <span class="hljs-comment">// å°†ç¨€ç–æ•°ç»„ä¿å­˜åˆ°map.dataæ–‡ä»¶ä¸­</span><br>        writeSparseArrayToFile(sparse_arr, <span class="hljs-string">&quot;map.data&quot;</span>);<br><br>        <span class="hljs-comment">// è¯»å–map.dataæ–‡ä»¶ï¼Œè·å¾—ç¨€ç–æ•°ç»„</span><br>        <span class="hljs-keyword">int</span>[][] sparse_arr_from_file = readSparseArrayFromFile(<span class="hljs-string">&quot;map.data&quot;</span>);<br><br>        <span class="hljs-comment">// è¾“å‡ºè¯»å–çš„ç¨€ç–æ•°ç»„</span><br>        System.out.println(<span class="hljs-string">&quot;-----------------è¯»å–æ•°ç»„----------------&quot;</span>);<br>        <span class="hljs-keyword">if</span> (sparse_arr_from_file != <span class="hljs-keyword">null</span>) &#123;<br>            printArr(sparse_arr_from_file);<br>        &#125;<br><br>        <span class="hljs-comment">// å°†ç¨€ç–æ•°ç»„æ¢å¤ä¸ºäºŒç»´æ•°ç»„</span><br>        <span class="hljs-keyword">int</span>[][] new_primary_arr = &#123;&#125;;<br><br>        <span class="hljs-comment">//æ ¹æ®ç¨€ç–æ•°ç»„åç»§è¡Œæ•°æ®èµ‹å€¼äºŒç»´æ•°ç»„</span><br>        <span class="hljs-keyword">if</span> (sparse_arr_from_file != <span class="hljs-keyword">null</span>) &#123;<br>            new_primary_arr = sparseArrayToPrimaryArray(sparse_arr_from_file);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;è¯»å–æ–‡ä»¶å¤±è´¥ï¼Œä½¿ç”¨å†…å­˜ä¸­çš„ç¨€ç–çŸ©é˜µ&quot;</span>);<br>            new_primary_arr = sparseArrayToPrimaryArray(sparse_arr);<br>        &#125;<br><br>        <span class="hljs-comment">// è¾“å‡ºæ¢å¤çš„åŸå§‹æ•°ç»„å†…å®¹</span><br>        System.out.println(<span class="hljs-string">&quot;-----------------æ¢å¤æ•°ç»„----------------&quot;</span>);<br>        printArr(new_primary_arr);<br><br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * ä»æ–‡ä»¶ä¸­è¯»å–ç¨€ç–æ•°ç»„</span><br><span class="hljs-comment">   */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span>[][] readSparseArrayFromFile(String filename) &#123;<br><br>        FileReader reader = <span class="hljs-keyword">null</span>;<br>        FileReader reader2 = <span class="hljs-keyword">null</span>;<br>        BufferedReader bufferedReader = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            reader = <span class="hljs-keyword">new</span> FileReader(filename);<br>            reader2 = <span class="hljs-keyword">new</span> FileReader(filename);<br><br>            <span class="hljs-comment">// è·å–æ–‡ä»¶è¡Œæ•°</span><br>            <span class="hljs-keyword">int</span> lineNumber = <span class="hljs-number">0</span>;<br>            LineNumberReader lineNumberReader = <span class="hljs-keyword">new</span> LineNumberReader(reader2);<br>            lineNumberReader.skip(Long.MAX_VALUE);<br>            lineNumber = lineNumberReader.getLineNumber();<br><br>            <span class="hljs-keyword">int</span>[][] sparse_arr = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[lineNumber][<span class="hljs-number">3</span>];<br><br>            <span class="hljs-comment">// æŒ‰è¡Œè¯»å–æ–‡ä»¶æ•°æ®</span><br>            bufferedReader = <span class="hljs-keyword">new</span> BufferedReader(reader);<br>            String str;<br>            <span class="hljs-keyword">int</span> row = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">while</span> ((str = bufferedReader.readLine()) != <span class="hljs-keyword">null</span>) &#123;<br>                <span class="hljs-comment">// å°†å­—ç¬¦ä¸²æŒ‰ç…§\tåˆ†å‰²ï¼Œå¾—åˆ°ä¸€ä¸ªstringæ•°ç»„</span><br>                String[] strings = str.split(<span class="hljs-string">&quot;\t&quot;</span>);<br>                <span class="hljs-comment">// å°†æ•°æ®å†™å…¥åˆ°ç¨€ç–çŸ©é˜µ</span><br>                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> col = <span class="hljs-number">0</span>; col &lt; strings.length; col++) &#123;<br>                    sparse_arr[row][col] = Integer.parseInt(strings[col]);<br>                &#125;<br>                row++;<br>            &#125;<br>            reader.close();<br>            bufferedReader.close();<br>            lineNumberReader.close();<br>            <span class="hljs-keyword">return</span> sparse_arr;<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>        &#125;<br><br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * å°†æ•°ç»„å­˜å…¥åˆ°æ–‡ä»¶ä¸­</span><br><span class="hljs-comment">   */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">writeSparseArrayToFile</span><span class="hljs-params">(<span class="hljs-keyword">int</span>[][] array, String filename)</span> </span>&#123;<br><br>        <span class="hljs-comment">// æ–°å»ºå­˜æ”¾æ•°ç»„æ–‡ä»¶</span><br>        File file = <span class="hljs-keyword">new</span> File(filename);<br><br>        <span class="hljs-comment">// æ–‡ä»¶å†™å…¥æµ</span><br>        FileWriter out = <span class="hljs-keyword">null</span>;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            out = <span class="hljs-keyword">new</span> FileWriter(file);<br>            <span class="hljs-comment">// å°†æ•°ç»„æ•°æ®å†™å…¥æ–‡ä»¶ï¼Œå„æ•°æ®ä¹‹é—´ä»¥Tabé—´éš”</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span>[] row : array) &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; array[<span class="hljs-number">0</span>].length; j++) &#123;<br>                    out.write(row[j] + <span class="hljs-string">&quot;\t&quot;</span>);<br>                &#125;<br>                out.write(<span class="hljs-string">&quot;\r\n&quot;</span>);<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-comment">// å…³é—­æ–‡ä»¶æµ</span><br>            <span class="hljs-keyword">try</span> &#123;<br>                out.close();<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br><br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * ç¨€ç–æ•°ç»„æ¢å¤ä¸ºäºŒç»´æ•°ç»„</span><br><span class="hljs-comment">   */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span>[][] sparseArrayToPrimaryArray(<span class="hljs-keyword">int</span>[][] sparse_arr) &#123;<br><br>        <span class="hljs-comment">// è¯»å–ç¨€ç–æ•°ç»„ç¬¬ä¸€è¡Œæ•°æ®ï¼Œåˆ›å»ºåŸå§‹æ•°ç»„</span><br>        <span class="hljs-keyword">int</span>[][] new_primary_arr = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[sparse_arr[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]][sparse_arr[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>]];<br><br>        <span class="hljs-comment">// è¯»å–ç¨€ç–æ•°ç»„åå‡ è¡Œæ•°æ®ï¼Œæ„å»ºäºŒç»´æ•°ç»„</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; sparse_arr.length; i++) &#123;<br>            new_primary_arr[sparse_arr[i][<span class="hljs-number">0</span>]][sparse_arr[i][<span class="hljs-number">1</span>]] = sparse_arr[i][<span class="hljs-number">2</span>];<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> new_primary_arr;<br><br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * äºŒç»´æ•°ç»„è½¬åŒ–ä¸ºç¨€ç–æ•°ç»„æ–¹æ³•</span><br><span class="hljs-comment">   */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span>[][] primaryArrayToSparseArray(<span class="hljs-keyword">int</span>[][] primary_arr) &#123;<br><br>        <span class="hljs-comment">// éå†äºŒç»´æ•°ç»„ï¼Œå¾—åˆ°é0æ•°æ®ä¸ªæ•°</span><br>        <span class="hljs-keyword">int</span> chess_num = getChessNum(primary_arr);<br><br>        <span class="hljs-comment">// åˆ›å»ºå¯¹åº”ç¨€ç–æ•°ç»„</span><br>        <span class="hljs-keyword">int</span>[][] sparse_arr = initPrimaryArraySize(chess_num + <span class="hljs-number">1</span>, <span class="hljs-number">3</span>);<br><br>        <span class="hljs-comment">// åˆå§‹åŒ–ç¨€ç–æ•°ç»„ç¬¬ä¸€è¡Œæ•°æ®</span><br>        initSparseArrayFirstLine(primary_arr, sparse_arr, chess_num);<br><br>        <span class="hljs-comment">// å°†åˆå§‹æ•°ç»„é0æ•°æ®å­˜æ”¾åˆ°ç¨€ç–æ•°ç»„</span><br>        initSparseArrayOthersLine(primary_arr, sparse_arr);<br><br>        <span class="hljs-keyword">return</span> sparse_arr;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * å°†åˆå§‹æ•°ç»„çš„é0æ•°æ®å­˜æ”¾åˆ°ç¨€ç–æ•°ç»„</span><br><span class="hljs-comment">   */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initSparseArrayOthersLine</span><span class="hljs-params">(<span class="hljs-keyword">int</span>[][] primary_arr, <span class="hljs-keyword">int</span>[][] sparse_arr)</span> </span>&#123;<br>        <span class="hljs-keyword">int</span> count = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; primary_arr.length; i++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; primary_arr[<span class="hljs-number">0</span>].length; j++) &#123;<br>                <span class="hljs-keyword">if</span> (primary_arr[i][j] != SparseArrayVar.NO_CHESS) &#123;<br>                    count++;<br>                    sparse_arr[count][<span class="hljs-number">0</span>] = i;<br>                    sparse_arr[count][<span class="hljs-number">1</span>] = j;<br>                    sparse_arr[count][<span class="hljs-number">2</span>] = primary_arr[i][j];<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * åˆå§‹åŒ–ç¨€ç–æ•°ç»„ç¬¬ä¸€è¡Œæ–¹æ³•</span><br><span class="hljs-comment">   */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initSparseArrayFirstLine</span><span class="hljs-params">(<span class="hljs-keyword">int</span>[][] primary_arr, <span class="hljs-keyword">int</span>[][] sparse_arr, <span class="hljs-keyword">int</span> chess_num)</span> </span>&#123;<br>        sparse_arr[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = primary_arr.length;<br>        sparse_arr[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>] = primary_arr[<span class="hljs-number">0</span>].length;<br>        sparse_arr[<span class="hljs-number">0</span>][<span class="hljs-number">2</span>] = chess_num;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * å¾—åˆ°äºŒç»´æ•°ç»„éç©ºå­æ£‹å­ä¸ªæ•°æ–¹æ³•</span><br><span class="hljs-comment">   */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getChessNum</span><span class="hljs-params">(<span class="hljs-keyword">int</span>[][] primary_arr)</span> </span>&#123;<br>        <span class="hljs-keyword">int</span> num = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span>[] row : primary_arr) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> item : row) &#123;<br>                <span class="hljs-keyword">if</span> (item != SparseArrayVar.NO_CHESS) &#123;<br>                    num++;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> num;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * åˆå§‹åŒ–äºŒç»´æ•°ç»„è½å­æ–¹æ³•</span><br><span class="hljs-comment">   */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initPrimaryArrayChess</span><span class="hljs-params">(<span class="hljs-keyword">int</span>[][] primary_arr)</span> </span>&#123;<br>        primary_arr[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>] = SparseArrayVar.BLACK_CHESS;<br>        primary_arr[<span class="hljs-number">2</span>][<span class="hljs-number">3</span>] = SparseArrayVar.BLUE_CHESS;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * åˆå§‹åŒ–äºŒç»´æ•°ç»„å¤§å°æ–¹æ³•</span><br><span class="hljs-comment">   */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span>[][] initPrimaryArraySize(<span class="hljs-keyword">int</span> row, <span class="hljs-keyword">int</span> col) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[row][col];<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * è¾“å‡ºæ•°ç»„å†…å®¹æ–¹æ³•</span><br><span class="hljs-comment">   */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">printArr</span><span class="hljs-params">(<span class="hljs-keyword">int</span>[][] array)</span> </span>&#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span>[] row : array) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> item : row) &#123;<br>                System.out.print(item + <span class="hljs-string">&quot;\t&quot;</span>);<br>            &#125;<br>            System.out.println();<br>        &#125;<br>    &#125;<br><br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>ä¿å­˜åœ¨é¡¹ç›®ä¸­çš„map.dataæ–‡ä»¶</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-number">11</span><span class="hljs-number">11</span><span class="hljs-number">2</span><br><span class="hljs-number">1</span><span class="hljs-number">2</span><span class="hljs-number">1</span><br><span class="hljs-number">2</span><span class="hljs-number">3</span><span class="hljs-number">2</span><br></code></pre></td></tr></table></figure></li><li><p>è¿è¡Œç»“æœï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java">-----------------åŸå§‹æ•°ç»„----------------<br><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><br><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">1</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><br><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">2</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><br><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><br><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><br><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><br><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><br><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><br><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><br><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><br><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><br>-----------------ç¨€ç–æ•°ç»„----------------<br><span class="hljs-number">11</span><span class="hljs-number">11</span><span class="hljs-number">2</span><br><span class="hljs-number">1</span><span class="hljs-number">2</span><span class="hljs-number">1</span><br><span class="hljs-number">2</span><span class="hljs-number">3</span><span class="hljs-number">2</span><br>-----------------è¯»å–æ•°ç»„----------------<br><span class="hljs-number">11</span><span class="hljs-number">11</span><span class="hljs-number">2</span><br><span class="hljs-number">1</span><span class="hljs-number">2</span><span class="hljs-number">1</span><br><span class="hljs-number">2</span><span class="hljs-number">3</span><span class="hljs-number">2</span><br>-----------------æ¢å¤æ•°ç»„----------------<br><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><br><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">1</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><br><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">2</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><br><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><br><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><br><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><br><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><br><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><br><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><br><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><br><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">0</span><br></code></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>DataStructure</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MyBatisPluså­¦ä¹ </title>
    <link href="/posts/2021/01/24/MyBatisPlus%E5%AD%A6%E4%B9%A0/"/>
    <url>/posts/2021/01/24/MyBatisPlus%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<h2 id="https-cdn-jsdelivr-net-gh-AtroxQW-jsDeliverCDN-1-0-source-posts-MyBatisPluså­¦ä¹ "><a href="#https-cdn-jsdelivr-net-gh-AtroxQW-jsDeliverCDN-1-0-source-posts-MyBatisPluså­¦ä¹ " class="headerlink" title="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatisPluså­¦ä¹ "></a><a href="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatisPlus%E5%AD%A6%E4%B9%A0">https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatisPluså­¦ä¹ </a></h2><blockquote><p>ç®€ä»‹</p></blockquote><p>å®˜ç½‘ï¼š<a href="http://mp.baomidou.com/">http://mp.baomidou.com/</a></p><p>å‚è€ƒæ•™ç¨‹ï¼š<a href="http://mp.baomidou.com/guide/">http://mp.baomidou.com/guide/</a></p><p>MyBatis-Plusï¼ˆç®€ç§° MPï¼‰æ˜¯ä¸€ä¸ª MyBatis çš„å¢å¼ºå·¥å…·ï¼Œåœ¨ MyBatis çš„åŸºç¡€ä¸Šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œä¸ºç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡è€Œç”Ÿã€‚</p><blockquote><p>ç‰¹æ€§</p></blockquote><ul><li><p><strong>æ— ä¾µå…¥</strong>ï¼šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œå¼•å…¥å®ƒä¸ä¼šå¯¹ç°æœ‰å·¥ç¨‹äº§ç”Ÿå½±å“ï¼Œå¦‚ä¸èˆ¬é¡ºæ»‘</p></li><li><p><strong>æŸè€—å°</strong>ï¼šå¯åŠ¨å³ä¼šè‡ªåŠ¨æ³¨å…¥åŸºæœ¬ CURDï¼Œæ€§èƒ½åŸºæœ¬æ— æŸè€—ï¼Œç›´æ¥é¢å‘å¯¹è±¡æ“ä½œ</p></li><li><p><strong>å¼ºå¤§çš„ CRUD æ“ä½œ</strong>ï¼šå†…ç½®é€šç”¨ Mapperã€é€šç”¨ Serviceï¼Œä»…ä»…é€šè¿‡å°‘é‡é…ç½®å³å¯å®ç°å•è¡¨å¤§éƒ¨åˆ†CRUD æ“ä½œï¼Œæ›´æœ‰å¼ºå¤§çš„æ¡ä»¶æ„é€ å™¨ï¼Œæ»¡è¶³å„ç±»ä½¿ç”¨éœ€æ±‚</p></li><li><p><strong>æ”¯æŒ Lambda å½¢å¼è°ƒç”¨</strong>ï¼šé€šè¿‡ Lambda è¡¨è¾¾å¼ï¼Œæ–¹ä¾¿çš„ç¼–å†™å„ç±»æŸ¥è¯¢æ¡ä»¶ï¼Œæ— éœ€å†æ‹…å¿ƒå­—æ®µå†™é”™</p></li><li><p><strong>æ”¯æŒå¤šç§æ•°æ®åº“</strong>ï¼šæ”¯æŒMySQLã€MariaDBã€Oracleã€DB2ã€H2ã€HSQLã€SQLiteã€Postgreã€SQLServer2005ã€SQLServerç­‰å¤šç§æ•°æ®åº“</p></li><li><p><strong>æ”¯æŒä¸»é”®è‡ªåŠ¨ç”Ÿæˆ</strong>ï¼šæ”¯æŒå¤šè¾¾ 4 ç§ä¸»é”®ç­–ç•¥ï¼ˆå†…å«åˆ†å¸ƒå¼å”¯ä¸€ ID ç”Ÿæˆå™¨ - Sequenceï¼‰ï¼Œå¯è‡ªç”±é…ç½®ï¼Œå®Œç¾è§£å†³ä¸»é”®é—®é¢˜</p></li><li><p><strong>æ”¯æŒ XML çƒ­åŠ è½½</strong>ï¼šMapper å¯¹åº”çš„ XML æ”¯æŒçƒ­åŠ è½½ï¼Œå¯¹äºç®€å•çš„ CRUD æ“ä½œï¼Œç”šè‡³å¯ä»¥æ—  XMLå¯åŠ¨</p></li><li><p><strong>æ”¯æŒ ActiveRecord æ¨¡å¼</strong>ï¼šæ”¯æŒ ActiveRecord å½¢å¼è°ƒç”¨ï¼Œå®ä½“ç±»åªéœ€ç»§æ‰¿ Model ç±»å³å¯è¿›è¡Œå¼ºå¤§çš„ CRUD æ“ä½œ</p></li><li><p><strong>æ”¯æŒè‡ªå®šä¹‰å…¨å±€é€šç”¨æ“ä½œ</strong>ï¼šæ”¯æŒå…¨å±€é€šç”¨æ–¹æ³•æ³¨å…¥ï¼ˆ Write once, use anywhere ï¼‰</p></li><li><p><strong>æ”¯æŒå…³é”®è¯è‡ªåŠ¨è½¬ä¹‰</strong>ï¼šæ”¯æŒæ•°æ®åº“å…³é”®è¯ï¼ˆorderã€keyâ€¦â€¦ï¼‰è‡ªåŠ¨è½¬ä¹‰ï¼Œè¿˜å¯è‡ªå®šä¹‰å…³é”®è¯</p></li><li><p><strong>å†…ç½®ä»£ç ç”Ÿæˆå™¨</strong>ï¼šé‡‡ç”¨ä»£ç æˆ–è€… Maven æ’ä»¶å¯å¿«é€Ÿç”Ÿæˆ Mapper ã€ Model ã€ Service ã€ Controllerå±‚ä»£ç ï¼Œæ”¯æŒæ¨¡æ¿å¼•æ“ï¼Œæ›´æœ‰è¶…å¤šè‡ªå®šä¹‰é…ç½®ç­‰æ‚¨æ¥ä½¿ç”¨</p></li><li><p><strong>å†…ç½®åˆ†é¡µæ’ä»¶</strong>ï¼šåŸºäº MyBatis ç‰©ç†åˆ†é¡µï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒå…·ä½“æ“ä½œï¼Œé…ç½®å¥½æ’ä»¶ä¹‹åï¼Œå†™åˆ†é¡µç­‰åŒäºæ™®é€š List æŸ¥è¯¢</p></li><li><p><strong>å†…ç½®æ€§èƒ½åˆ†ææ’ä»¶</strong>ï¼šå¯è¾“å‡º Sql è¯­å¥ä»¥åŠå…¶æ‰§è¡Œæ—¶é—´ï¼Œå»ºè®®å¼€å‘æµ‹è¯•æ—¶å¯ç”¨è¯¥åŠŸèƒ½ï¼Œèƒ½å¿«é€Ÿæªå‡ºæ…¢æŸ¥è¯¢</p></li><li><p><strong>å†…ç½®å…¨å±€æ‹¦æˆªæ’ä»¶ï¼š</strong>æä¾›å…¨è¡¨ delete ã€ update æ“ä½œæ™ºèƒ½åˆ†æé˜»æ–­ï¼Œä¹Ÿå¯è‡ªå®šä¹‰æ‹¦æˆªè§„åˆ™ï¼Œé¢„é˜²è¯¯æ“ä½œ</p></li><li><p><strong>å†…ç½® Sql æ³¨å…¥å‰¥ç¦»å™¨</strong>ï¼šæ”¯æŒ Sql æ³¨å…¥å‰¥ç¦»ï¼Œæœ‰æ•ˆé¢„é˜² Sql æ³¨å…¥æ”»å‡»</p></li></ul><blockquote><p>åˆ›å»ºå¹¶åˆå§‹åŒ–æ•°æ®åº“</p></blockquote><ol><li><p>åˆ›å»ºæ•°æ®åº“</p><p><strong>mybatis_plus</strong>æ•°æ®åº“ã€‚</p></li><li><p>åˆ›å»ºUserè¡¨ã€‚</p><p>å…¶è¡¨ç»“æ„å¦‚ä¸‹ï¼š</p><table><thead><tr><th>id</th><th>name</th><th>age</th><th>email</th></tr></thead><tbody><tr><td>1</td><td>Jone</td><td>18</td><td><a href="mailto:&#116;&#x65;&#115;&#116;&#49;&#64;&#98;&#x61;&#111;&#109;&#105;&#100;&#x6f;&#x75;&#x2e;&#99;&#x6f;&#109;">&#116;&#x65;&#115;&#116;&#49;&#64;&#98;&#x61;&#111;&#109;&#105;&#100;&#x6f;&#x75;&#x2e;&#99;&#x6f;&#109;</a></td></tr><tr><td>2</td><td>Jack</td><td>20</td><td><a href="mailto:&#116;&#x65;&#x73;&#x74;&#50;&#64;&#98;&#97;&#111;&#x6d;&#105;&#x64;&#111;&#117;&#46;&#99;&#111;&#109;">&#116;&#x65;&#x73;&#x74;&#50;&#64;&#98;&#97;&#111;&#x6d;&#105;&#x64;&#111;&#117;&#46;&#99;&#111;&#109;</a></td></tr><tr><td>3</td><td>Tom</td><td>28</td><td><a href="mailto:&#x74;&#101;&#115;&#116;&#x33;&#x40;&#98;&#x61;&#x6f;&#x6d;&#105;&#100;&#111;&#117;&#x2e;&#99;&#x6f;&#x6d;">&#x74;&#101;&#115;&#116;&#x33;&#x40;&#98;&#x61;&#x6f;&#x6d;&#105;&#100;&#111;&#117;&#x2e;&#99;&#x6f;&#x6d;</a></td></tr><tr><td>4</td><td>Sandy</td><td>21</td><td><a href="mailto:&#116;&#x65;&#x73;&#x74;&#x34;&#64;&#x62;&#x61;&#111;&#109;&#105;&#100;&#x6f;&#117;&#46;&#99;&#111;&#x6d;">&#116;&#x65;&#x73;&#x74;&#x34;&#64;&#x62;&#x61;&#111;&#109;&#105;&#100;&#x6f;&#117;&#46;&#99;&#111;&#x6d;</a></td></tr><tr><td>5</td><td>Billie</td><td>24</td><td><a href="mailto:&#116;&#101;&#115;&#x74;&#x35;&#x40;&#x62;&#97;&#x6f;&#x6d;&#x69;&#x64;&#111;&#x75;&#46;&#x63;&#x6f;&#109;">&#116;&#101;&#115;&#x74;&#x35;&#x40;&#x62;&#97;&#x6f;&#x6d;&#x69;&#x64;&#111;&#x75;&#46;&#x63;&#x6f;&#109;</a></td></tr></tbody></table><p>å…¶å¯¹åº”çš„è¡¨ è„šæœ¬å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">DROP TABLE IF EXISTS user;<br>CREATE TABLE user<br>(<br>    id BIGINT(20) NOT NULL COMMENT &#39;ä¸»é”®ID&#39;,<br>    name VARCHAR(30) NULL DEFAULT NULL COMMENT &#39;å§“å&#39;,<br>    age INT(11) NULL DEFAULT NULL COMMENT &#39;å¹´é¾„&#39;,<br>    email VARCHAR(50) NULL DEFAULT NULL COMMENT &#39;é‚®ç®±&#39;,<br>    PRIMARY KEY (id)<br>);<br></code></pre></td></tr></table></figure><p>å…¶å¯¹åº”çš„è¡¨æ•°æ®è„šæœ¬å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">DELETE FROM user;<br>INSERT INTO user (id, name, age, email) VALUES<br>(1, &#39;Jone&#39;, 18, &#39;test1@baomidou.com&#39;),<br>(2, &#39;Jack&#39;, 20, &#39;test2@baomidou.com&#39;),<br>(3, &#39;Tom&#39;, 28, &#39;test3@baomidou.com&#39;),<br>(4, &#39;Sandy&#39;, 21, &#39;test4@baomidou.com&#39;),<br>(5, &#39;Billie&#39;, 24, &#39;test5@baomidou.com&#39;);<br></code></pre></td></tr></table></figure></li></ol><blockquote><p>åˆå§‹åŒ–å·¥ç¨‹</p></blockquote><p>ä½¿ç”¨Spring Initializr å¿«é€Ÿåˆå§‹åŒ–ä¸€ä¸ªSpringBootå·¥ç¨‹ã€‚</p><p>ç‰ˆæœ¬ï¼š2.4.2 RELEASE</p><blockquote><p>æ·»åŠ ä¾èµ–</p></blockquote><p>æ·»åŠ ï¼šmybatis-plus-bootstarterã€MySQLã€lombokã€Junit</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- mybaits-plusä¾èµ– --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.4.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šå¼•å…¥ MyBatis-Plus ä¾èµ–åä¸è¦å†å¼•å…¥ MyBatis æˆ–è€… MyBatis-Springä¾èµ–ï¼Œé¿å…å› ç‰ˆæœ¬å·®å¼‚å¯¼è‡´çš„é—®é¢˜ã€‚</p><blockquote><p>é…ç½®</p></blockquote><p>åœ¨ application.properties é…ç½®æ–‡ä»¶ä¸­æ·»åŠ  MySQL æ•°æ®åº“çš„ç›¸å…³é…ç½®ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment"># MySQLæ•°æ®åº“è¿æ¥é…ç½®</span><br><span class="hljs-meta">spring.datasource.driver-class-name</span>=<span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br><span class="hljs-meta">spring.datasource.url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/mybatis_plus?userUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=GMT</span><br><span class="hljs-meta">spring.datasource.username</span>=<span class="hljs-string">root</span><br><span class="hljs-meta">spring.datasource.password</span>=<span class="hljs-string">xxxxxxxxxxx</span><br></code></pre></td></tr></table></figure><blockquote><p>ç¼–å†™ä»£ç </p></blockquote><ol><li><p><strong>ä¸»å¯åŠ¨ç±»</strong></p><p>åœ¨ SpringBoot å¯åŠ¨ç±»ä¸­æ·»åŠ  @Mapper æ³¨è§£ï¼Œæ‰«æMapperæ–‡ä»¶å¤¹ï¼Œæ‰«æçš„åŒ…åæ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@MapperScan(&quot;com.atrox.mapper&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MpdemoApplication</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        SpringApplication.run(MpdemoApplication.class, args);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>å®ä½“ç±»</strong></p><p>åˆ›å»ºåŒ…<code>entity</code>ç¼–å†™å®ä½“ç±»<code>User.java</code>ï¼ˆæ­¤å¤„ä½¿ç”¨Lombokç®€åŒ–ä»£ç ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-meta">@NoArgsConstructor</span><br><span class="hljs-meta">@Accessors(chain = true)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> Long id;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> Integer age;<br>    <span class="hljs-keyword">private</span> String email;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>mapperæ¥å£</strong></p><p>åˆ›å»ºåŒ…<code>mapper</code>ç¼–å†™Mapperæ¥å£ï¼š<code>UserMapper.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Repository</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserMapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseMapper</span>&lt;<span class="hljs-title">User</span>&gt; </span>&#123;&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>æµ‹è¯•</strong></p><p>åœ¨æµ‹è¯•ç±»ä¸­ï¼Œè¿›è¡ŒæŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·æ“ä½œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MpdemoApplicationTests</span> </span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> UserMapper userMapper;<br><br>    <span class="hljs-comment">// æŸ¥è¯¢ user è¡¨ä¸­æ‰€æœ‰æ•°æ®</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">selectAll</span><span class="hljs-params">()</span> </span>&#123;<br>        List&lt;User&gt; userList = userMapper.selectList(<span class="hljs-keyword">null</span>);<br>        <span class="hljs-keyword">for</span> (User user : userList) &#123;<br>            System.out.println(user);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ§åˆ¶å°è¾“å‡ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">User(id=<span class="hljs-number">1</span>, name=Jone, age=<span class="hljs-number">18</span>, email=test1<span class="hljs-meta">@baomidou</span>.com)<br>User(id=<span class="hljs-number">2</span>, name=Jack, age=<span class="hljs-number">20</span>, email=test2<span class="hljs-meta">@baomidou</span>.com)<br>User(id=<span class="hljs-number">3</span>, name=Tom, age=<span class="hljs-number">28</span>, email=test3<span class="hljs-meta">@baomidou</span>.com)<br>User(id=<span class="hljs-number">4</span>, name=Sandy, age=<span class="hljs-number">21</span>, email=test4<span class="hljs-meta">@baomidou</span>.com)<br>User(id=<span class="hljs-number">5</span>, name=Billie, age=<span class="hljs-number">24</span>, email=test5<span class="hljs-meta">@baomidou</span>.com)<br></code></pre></td></tr></table></figure></li><li><p><strong>é…ç½®æ—¥å¿—</strong>ï¼š</p><p>åœ¨æ‰§è¡ŒSQLæ“ä½œæ—¶ï¼Œå¦‚æœæƒ³è¦çœ‹åˆ°è¿‡ç¨‹ï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶é…ç½®ã€‚</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment"># MyBatisæ—¥å¿—</span><br><span class="hljs-meta">mybatis-plus.configuration.log-impl</span>=<span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span><br></code></pre></td></tr></table></figure></li></ol><blockquote><p>æ’å…¥æ“ä½œ</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å‘ user è¡¨æ·»åŠ æ•°æ®</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">addUser</span><span class="hljs-params">()</span> </span>&#123;<br>    User user = <span class="hljs-keyword">new</span> User();<br>    <span class="hljs-comment">// è¿™é‡Œæˆ‘ä»¬æ²¡æœ‰è®¾ç½® Long ç±»å‹çš„ id ï¼Œä½†æ˜¯ MP ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨éšæœºç”Ÿæˆ19ä½ id å€¼</span><br>    user.setName(<span class="hljs-string">&quot;gailun&quot;</span>).setAge(<span class="hljs-number">300</span>).setEmail(<span class="hljs-string">&quot;dabaojian@qq.com&quot;</span>);<br>    <span class="hljs-keyword">int</span> insert = userMapper.insert(user);<br>    System.out.println(<span class="hljs-string">&quot;insert=&gt;&quot;</span> + insert);<br>&#125;<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œåï¼ŒMPè‡ªåŠ¨ç»™æˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ª19ä¸ºçš„IDå€¼ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatisPlus%E5%AD%A6%E4%B9%A0/1.png" alt="19ä½ID"></p><blockquote><p>ä¸»é”®ç­–ç•¥</p></blockquote><ol><li><p><strong>ID_WORKER</strong></p><p>MyBatis-Plusé»˜è®¤çš„ä¸»é”®ç­–ç•¥æ˜¯ï¼šID_WORKER (å…¨å±€å”¯ä¸€ID)</p><p>å‚è€ƒèµ„æ–™ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€IDç”Ÿæˆæ–¹æ¡ˆæ±‡æ€»ï¼š<a href="https://www.cnblogs.com/haoxinyue/p/5208136.html">https://www.cnblogs.com/haoxinyue/p/5208136.html</a></p></li><li><p><strong>è‡ªå¢ç­–ç•¥</strong></p><p>è¦æƒ³ä¸»é”®è‡ªå¢éœ€è¦é…ç½®å¦‚ä¸‹ä¸»é”®ç­–ç•¥</p><ul><li><p>éœ€è¦åœ¨åˆ›å»º<code>æ•°æ®è¡¨</code>çš„æ—¶å€™è®¾ç½®ä¸»é”®è‡ªå¢ã€‚</p></li><li><p>å®ä½“ç±»å­—æ®µé…ç½®@TableId(type = IdType.AUTO)</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@TableId(type = IdType.AUTO)</span><br><span class="hljs-keyword">private</span> Long id;<br></code></pre></td></tr></table></figure><p>è¦æƒ³å½±å“æ‰€æœ‰å®ä½“çš„é…ç½®ï¼Œå¯ä»¥è®¾ç½®å…¨å±€ä¸»é”®é…ç½®</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment">#å…¨å±€è®¾ç½®ä¸»é”®ç”Ÿæˆç­–ç•¥</span><br><span class="hljs-meta">mybatis-plus.global-config.db-config.id-type</span>=<span class="hljs-string">auto</span><br></code></pre></td></tr></table></figure></li><li><p><strong>å…¶ä»–ç­–ç•¥</strong></p><p>åˆ†æIdTypeæºç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Getter</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">IdType</span> </span>&#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">* æ•°æ®åº“IDè‡ªå¢</span><br><span class="hljs-comment">*/</span><br>    AUTO(<span class="hljs-number">0</span>),<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">* è¯¥ç±»å‹ä¸ºæœªè®¾ç½®ä¸»é”®ç±»å‹</span><br><span class="hljs-comment">*/</span><br>    NONE(<span class="hljs-number">1</span>),<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">* ç”¨æˆ·è¾“å…¥ID</span><br><span class="hljs-comment">* è¯¥ç±»å‹å¯ä»¥é€šè¿‡è‡ªå·±æ³¨å†Œè‡ªåŠ¨å¡«å……æ’ä»¶è¿›è¡Œå¡«å……</span><br><span class="hljs-comment">*/</span><br>    INPUT(<span class="hljs-number">2</span>),<br>    <span class="hljs-comment">/* ä»¥ä¸‹3ç§ç±»å‹ã€åªæœ‰å½“æ’å…¥å¯¹è±¡ID ä¸ºç©ºï¼Œæ‰è‡ªåŠ¨å¡«å……ã€‚ */</span><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">* å…¨å±€å”¯ä¸€ID (idWorker)</span><br><span class="hljs-comment">*/</span><br>    ID_WORKER(<span class="hljs-number">3</span>),<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">* å…¨å±€å”¯ä¸€ID (UUID)</span><br><span class="hljs-comment">*/</span><br>    UUID(<span class="hljs-number">4</span>),<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">* å­—ç¬¦ä¸²å…¨å±€å”¯ä¸€ID (idWorker çš„å­—ç¬¦ä¸²è¡¨ç¤º)</span><br><span class="hljs-comment">*/</span><br>    ID_WORKER_STR(<span class="hljs-number">5</span>);<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> key;<br>    IdType(<span class="hljs-keyword">int</span> key) &#123;<br>        <span class="hljs-keyword">this</span>.key = key;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><blockquote><p>æ›´æ–°æ“ä½œ</p></blockquote><ol><li><p><strong>æ ¹æ®idæ›´æ–°æ“ä½œ</strong></p><p>æ³¨æ„ï¼šupdateæ—¶ç”Ÿæˆçš„sqlè‡ªåŠ¨æ˜¯åŠ¨æ€sqlï¼šUPDATE user SET age=? WHERE id=?</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ä¿®æ”¹æ•°æ®</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">updateUser</span><span class="hljs-params">()</span> </span>&#123;<br>    User user = <span class="hljs-keyword">new</span> User();<br>    <span class="hljs-comment">// Longç±»å‹åº”è¯¥ç”¨2L</span><br>    user.setId(<span class="hljs-number">2L</span>).setAge(<span class="hljs-number">120</span>);<br>    <span class="hljs-keyword">int</span> row = userMapper.updateById(user);<br>    System.out.println(row);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>è‡ªåŠ¨å¡«å……</strong></p><p>é¡¹ç›®ä¸­ç»å¸¸ä¼šé‡åˆ°ä¸€äº›æ•°æ®ï¼Œæ¯æ¬¡éƒ½ä½¿ç”¨ç›¸åŒçš„æ–¹å¼å¡«å……ï¼Œä¾‹å¦‚è®°å½•çš„<strong>åˆ›å»ºæ—¶é—´ï¼Œæ›´æ–°æ—¶é—´</strong>ç­‰ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨MyBatis Plusçš„è‡ªåŠ¨å¡«å……åŠŸèƒ½ï¼Œå®Œæˆè¿™äº›å­—æ®µçš„èµ‹å€¼å·¥ä½œã€‚</p></li></ol><ul><li><strong>æ•°æ®åº“è¡¨ä¸­æ·»åŠ éœ€è¦è‡ªåŠ¨å¡«å……å­—æ®µ</strong></li></ul><p>â€‹        åœ¨Userè¡¨ä¸­æ·»åŠ datetimeç±»å‹çš„æ–°çš„å­—æ®µ <code>create_time</code>ã€<code>update_time</code></p><ul><li><p><strong>å®ä½“ç±»ä¸Šå­—æ®µä¸Šæ·»åŠ è‡ªåŠ¨å¡«å……æ³¨è§£</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@TableField(fill = FieldFill.INSERT)</span><br><span class="hljs-keyword">private</span> Date createTime;<br><span class="hljs-meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span><br><span class="hljs-keyword">private</span> Date updateTime;<br></code></pre></td></tr></table></figure></li></ul><ol start="3"><li><p><strong>é…ç½®å®ç°å…ƒå¯¹è±¡å¤„ç†å™¨æ¥å£</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyMetaObjectHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">MetaObjectHandler</span> </span>&#123;<br><br>    <span class="hljs-comment">// ä½¿ç”¨ MP å®ç°æ·»åŠ æ“ä½œï¼Œä¼šè°ƒç”¨æ­¤æ–¹æ³•</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">insertFill</span><span class="hljs-params">(MetaObject metaObject)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.setFieldValByName(<span class="hljs-string">&quot;createTime&quot;</span>, <span class="hljs-keyword">new</span> Date(), metaObject);<br>    &#125;<br><br>    <span class="hljs-comment">// ä½¿ç”¨ MP å®ç°ä¿®æ”¹æ“ä½œï¼Œä¼šè°ƒç”¨æ­¤æ–¹æ³•</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">updateFill</span><span class="hljs-params">(MetaObject metaObject)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.setFieldValByName(<span class="hljs-string">&quot;updateTime&quot;</span>, <span class="hljs-keyword">new</span> Date(), metaObject);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><blockquote><p>ä¹è§‚é”</p></blockquote><p><strong>ä¸»è¦é€‚ç”¨åœºæ™¯</strong>ï¼šå½“è¦æ›´æ–°ä¸€æ¡è®°å½•çš„æ—¶å€™ï¼Œå¸Œæœ›è¿™æ¡è®°å½•æ²¡æœ‰è¢«åˆ«äººæ›´æ–°ï¼Œä¹Ÿå°±æ˜¯è¯´å®ç°çº¿ç¨‹å®‰å…¨çš„æ•°æ®æ›´æ–°</p><p><strong>ä¹è§‚é”å®ç°æ–¹å¼</strong>ï¼š</p><ul><li>å–å‡ºè®°å½•æ—¶ï¼Œè·å–å½“å‰version</li><li>æ›´æ–°æ—¶ï¼Œå¸¦ä¸Šè¿™ä¸ªversion</li><li>æ‰§è¡Œæ›´æ–°æ—¶ï¼Œ set version = newVersion where version = oldVersion</li><li>å¦‚æœversionä¸å¯¹ï¼Œå°±æ›´æ–°å¤±è´¥</li></ul><ol><li><p><strong>æ•°æ®åº“æ·»åŠ versionå­—æ®µ</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">ALTER TABLE &#96;user&#96; ADD COLUMN &#96;version&#96; INT<br></code></pre></td></tr></table></figure></li><li><p><strong>å®ä½“ç±»æ·»åŠ versionå­—æ®µå¹¶æ·»åŠ æ³¨è§£</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Version</span><br><span class="hljs-meta">@TableField(fill = FieldFill.INSERT)</span><br><span class="hljs-keyword">private</span> Integer version;<br></code></pre></td></tr></table></figure></li><li><p><strong>è®¾ç½®ä¹è§‚é”æ’ä»¶</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> OptimisticLockerInnerInterceptor <span class="hljs-title">optimisticLockerInnerInterceptor</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> OptimisticLockerInnerInterceptor();<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å…ƒå¯¹è±¡å¤„ç†å™¨æ¥å£æ·»åŠ versionçš„inserté»˜è®¤å€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">insertFill</span><span class="hljs-params">(MetaObject metaObject)</span> </span>&#123;<br>    ......<br>    <span class="hljs-keyword">this</span>.setFieldValByName(<span class="hljs-string">&quot;version&quot;</span>, <span class="hljs-number">1</span>, metaObject);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>æµ‹è¯•ä¹è§‚é”å¯ä»¥ä¿®æ”¹æˆåŠŸ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* æµ‹è¯• ä¹è§‚é”æ’ä»¶</span><br><span class="hljs-comment">*/</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testOptimisticLocker</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">//æŸ¥è¯¢</span><br>    User user = userMapper.selectById(<span class="hljs-number">1L</span>);<br>    <span class="hljs-comment">//ä¿®æ”¹æ•°æ®</span><br>    user.setName(<span class="hljs-string">&quot;Helen Yao&quot;</span>);<br>    user.setEmail(<span class="hljs-string">&quot;helen@qq.com&quot;</span>);<br>    <span class="hljs-comment">//æ‰§è¡Œæ›´æ–°</span><br>    userMapper.updateById(user);<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><blockquote><p>å®ç°åˆ†é¡µ</p></blockquote><p>MyBatis Plusè‡ªå¸¦åˆ†é¡µæ’ä»¶ï¼Œåªè¦ç®€å•çš„é…ç½®å³å¯å®ç°åˆ†é¡µåŠŸèƒ½ã€‚</p><ol><li><p><strong>åˆ›å»ºé…ç½®ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * åˆ†é¡µæ’ä»¶</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Bean</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> PaginationInnerInterceptor <span class="hljs-title">paginationInnerInterceptor</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> PaginationInnerInterceptor();<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>æµ‹è¯•åˆ†é¡µ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// åˆ†é¡µæŸ¥è¯¢</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">testPage</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// 1. ä¼ å…¥å½“å‰é¡µå’Œæ¯é¡µæ˜¾ç¤ºè®°å½•æ•° åˆ›å»ºpageå¯¹è±¡</span><br>    <span class="hljs-keyword">int</span> currentPage = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">int</span> pageSize = <span class="hljs-number">3</span>;<br>    Page&lt;User&gt; page = <span class="hljs-keyword">new</span> Page&lt;&gt;(currentPage,pageSize);<br>    <span class="hljs-comment">// 2. è°ƒç”¨mpåˆ†é¡µæŸ¥è¯¢æ–¹æ³•</span><br>    userMapper.selectPage(page, <span class="hljs-keyword">null</span>);<br>    <span class="hljs-comment">// 3.é€šè¿‡pageå¯¹è±¡è·å–åˆ†é¡µæ•°æ®</span><br>    System.out.println(page.getCurrent());  <span class="hljs-comment">// å½“å‰é¡µ</span><br>    System.out.println(page.getRecords());  <span class="hljs-comment">// æ¯é¡µæ•°æ®listé›†åˆ</span><br>    System.out.println(page.getSize());     <span class="hljs-comment">// æ¯é¡µæ˜¾ç¤ºè®°å½•æ•°</span><br>    System.out.println(page.getTotal());    <span class="hljs-comment">// æ€»è®°å½•æ•°</span><br>    System.out.println(page.getPages());    <span class="hljs-comment">// æ€»é¡µæ•°</span><br>    System.out.println(page.hasNext());     <span class="hljs-comment">// æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ</span><br>    System.out.println(page.hasPrevious()); <span class="hljs-comment">// æ˜¯å¦æœ‰ä¸Šä¸€é¡µ</span><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>è¾“å‡ºç»“æœ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-number">1</span><br>[User(id=<span class="hljs-number">1</span>, name=Jone, age=<span class="hljs-number">18</span>, email=test1<span class="hljs-meta">@baomidou</span>.com, createTime=<span class="hljs-keyword">null</span>, updateTime=<span class="hljs-keyword">null</span>, version=<span class="hljs-keyword">null</span>), User(id=<span class="hljs-number">2</span>, name=Jack, age=<span class="hljs-number">120</span>, email=test2<span class="hljs-meta">@baomidou</span>.com, createTime=<span class="hljs-keyword">null</span>, updateTime=<span class="hljs-keyword">null</span>, version=<span class="hljs-keyword">null</span>), User(id=<span class="hljs-number">3</span>, name=Tom, age=<span class="hljs-number">28</span>, email=test3<span class="hljs-meta">@baomidou</span>.com, createTime=<span class="hljs-keyword">null</span>, updateTime=<span class="hljs-keyword">null</span>, version=<span class="hljs-keyword">null</span>)]<br><span class="hljs-number">3</span><br><span class="hljs-number">7</span><br><span class="hljs-number">3</span><br><span class="hljs-keyword">true</span><br><span class="hljs-keyword">false</span><br></code></pre></td></tr></table></figure></li></ol><blockquote><p>é€»è¾‘åˆ é™¤</p></blockquote><ul><li>ç‰©ç†åˆ é™¤ï¼šçœŸå®åˆ é™¤ï¼Œå°†å¯¹åº”æ•°æ®ä»æ•°æ®åº“ä¸­åˆ é™¤ï¼Œä¹‹åæŸ¥è¯¢ä¸åˆ°æ­¤æ¡è¢«åˆ é™¤æ•°æ®ã€‚</li><li>é€»è¾‘åˆ é™¤ï¼šå‡åˆ é™¤ï¼Œå°†å¯¹åº”æ•°æ®ä¸­ä»£è¡¨æ˜¯å¦è¢«åˆ é™¤å­—æ®µçŠ¶æ€ä¿®æ”¹ä¸ºâ€œè¢«åˆ é™¤çŠ¶æ€â€ï¼Œä¹‹ååœ¨æ•°æ®åº“ä¸­ä»æ—§èƒ½çœ‹åˆ°æ­¤æ¡æ•°æ®è®°å½•ã€‚</li></ul><ol><li><p><strong>åœ¨æ•°æ®åº“ä¸­æ·»åŠ deletedå­—æ®µ</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">alter table &#96;user&#96; add column &#96;deleted&#96; boolean default 0<br></code></pre></td></tr></table></figure></li><li><p><strong>å®ä½“ç±»æ·»åŠ deletedå­—æ®µå’Œæ³¨è§£</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@TableLogic</span><br><span class="hljs-keyword">private</span> Integer deleted;<br></code></pre></td></tr></table></figure></li><li><p><strong>application.properties åŠ å…¥é…ç½®</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment"># é€»è¾‘åˆ é™¤é…ç½®</span><br><span class="hljs-meta">mybatis-plus.global-config.db-config.logic-delete-value</span>=<span class="hljs-string">1</span><br><span class="hljs-meta">mybatis-plus.global-config.db-config.logic-not-delete-value</span>=<span class="hljs-string">0</span><br></code></pre></td></tr></table></figure></li><li><p><strong>æµ‹è¯•é€»è¾‘åˆ é™¤å³å¯</strong>ã€‚</p></li><li><p><strong>æµ‹è¯•é€»è¾‘åˆ é™¤åçš„æŸ¥è¯¢</strong></p><p>MyBatis Plusä¸­æŸ¥è¯¢æ“ä½œä¹Ÿä¼šè‡ªåŠ¨æ·»åŠ é€»è¾‘åˆ é™¤å­—æ®µçš„åˆ¤æ–­ï¼Œæµ‹è¯•ååˆ†ææ‰“å°çš„sqlè¯­å¥ï¼ŒåŒ…å« WHERE deleted=0</p></li></ol><blockquote><p>æ€§èƒ½åˆ†æ</p></blockquote><p>å‚è€ƒåšæ–‡ï¼š<a href="https://blog.csdn.net/weixin_38111957/article/details/101054300">https://blog.csdn.net/weixin_38111957/article/details/101054300</a></p><blockquote><p>æ¡ä»¶æ„é€ å™¨</p></blockquote><ol><li><p><strong>wrapperä»‹ç»</strong></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatisPlus%E5%AD%A6%E4%B9%A0/1.png" alt="wrapper"></p><p>Wrapper ï¼š æ¡ä»¶æ„é€ æŠ½è±¡ç±»ï¼Œæœ€é¡¶ç«¯çˆ¶ç±»<br>AbstractWrapper ï¼š ç”¨äºæŸ¥è¯¢æ¡ä»¶å°è£…ï¼Œç”Ÿæˆ sql çš„ where æ¡ä»¶<br>QueryWrapper ï¼š Entity å¯¹è±¡å°è£…æ“ä½œç±»ï¼Œä¸æ˜¯ç”¨lambdaè¯­æ³•<br>UpdateWrapper ï¼š Update æ¡ä»¶å°è£…ï¼Œç”¨äºEntityå¯¹è±¡æ›´æ–°æ“ä½œ<br>AbstractLambdaWrapper ï¼š Lambda è¯­æ³•ä½¿ç”¨ Wrapperç»Ÿä¸€å¤„ç†è§£æ lambda è·å– columnã€‚<br>LambdaQueryWrapper ï¼šçœ‹åç§°ä¹Ÿèƒ½æ˜ç™½å°±æ˜¯ç”¨äºLambdaè¯­æ³•ä½¿ç”¨çš„æŸ¥è¯¢Wrapper<br>LambdaUpdateWrapper ï¼š Lambda æ›´æ–°å°è£…Wrapper</p></li><li><p><strong>geã€gtã€leã€ltã€isNullã€isNotNull</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testDelete</span><span class="hljs-params">()</span> </span>&#123;<br>    QueryWrapper&lt;User&gt; queryWrapper = <span class="hljs-keyword">new</span> QueryWrapper&lt;&gt;();<br>    queryWrapper<br>        .isNull(<span class="hljs-string">&quot;name&quot;</span>)<br>        .ge(<span class="hljs-string">&quot;age&quot;</span>, <span class="hljs-number">12</span>)<br>        .isNotNull(<span class="hljs-string">&quot;email&quot;</span>);<br>    <span class="hljs-keyword">int</span> result = userMapper.delete(queryWrapper);<br>    System.out.println(<span class="hljs-string">&quot;delete return count = &quot;</span> + result);<br>&#125;<br></code></pre></td></tr></table></figure><p>SQLï¼šUPDATE user SET deleted=1 WHERE deleted=0 AND name IS NULL AND age &gt;= ? AND email IS NOT NULL</p></li><li><p><strong>eqã€ne</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testSelectOne</span><span class="hljs-params">()</span> </span>&#123;<br>    QueryWrapper&lt;User&gt; queryWrapper = <span class="hljs-keyword">new</span> QueryWrapper&lt;&gt;();<br>    queryWrapper.eq(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;Tom&quot;</span>);<br>    User user = userMapper.selectOne(queryWrapper);<br>    System.out.println(user);<br>&#125;<br></code></pre></td></tr></table></figure><p>SELECT id,name,age,email,create_time,update_time,deleted,version FROM user WHERE deleted=0AND name = ?</p></li><li><p><strong>betweenã€notBetween</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testSelectCount</span><span class="hljs-params">()</span> </span>&#123;<br>    QueryWrapper&lt;User&gt; queryWrapper = <span class="hljs-keyword">new</span> QueryWrapper&lt;&gt;();<br>    queryWrapper.between(<span class="hljs-string">&quot;age&quot;</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>);<br>    Integer count = userMapper.selectCount(queryWrapper);<br>    System.out.println(count);<br>&#125;<br></code></pre></td></tr></table></figure><p>SELECT COUNT(1) FROM user WHERE deleted=0 AND age BETWEEN ? AND ?</p></li><li><p><strong>allEq</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testSelectList</span><span class="hljs-params">()</span> </span>&#123;<br>    QueryWrapper&lt;User&gt; queryWrapper = <span class="hljs-keyword">new</span> QueryWrapper&lt;&gt;();<br>    Map&lt;String, Object&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>    map.put(<span class="hljs-string">&quot;id&quot;</span>, <span class="hljs-number">2</span>);<br>    map.put(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;Jack&quot;</span>);<br>    map.put(<span class="hljs-string">&quot;age&quot;</span>, <span class="hljs-number">20</span>);<br>    queryWrapper.allEq(map);<br>    List&lt;User&gt; users = userMapper.selectList(queryWrapper);<br>    users.forEach(System.out::println);<br>&#125;<br></code></pre></td></tr></table></figure><p>SELECT id,name,age,email,create_time,update_time,deleted,version FROM user WHERE deleted=0 AND name = ? AND id = ? AND age = ?</p></li><li><p><strong>likeã€notLikeã€likeLeftã€likeRight</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testSelectMaps</span><span class="hljs-params">()</span> </span>&#123;<br>    QueryWrapper&lt;User&gt; queryWrapper = <span class="hljs-keyword">new</span> QueryWrapper&lt;&gt;();<br>    queryWrapper<br>        .notLike(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;e&quot;</span>)<br>        .likeRight(<span class="hljs-string">&quot;email&quot;</span>, <span class="hljs-string">&quot;t&quot;</span>);<br>    List&lt;Map&lt;String, Object&gt;&gt; maps = userMapper.selectMaps(queryWrapper);<span class="hljs-comment">//è¿”å›</span><br>    å€¼æ˜¯Mapåˆ—è¡¨<br>        maps.forEach(System.out::println);<br>&#125;<br></code></pre></td></tr></table></figure><p>SELECT id,name,age,email,create_time,update_time,deleted,version FROM user WHERE deleted=0 AND name NOT LIKE ? AND email LIKE ?</p></li><li><p><strong>inã€notInã€inSqlã€notinSqlã€existsã€notExists</strong></p><p>inã€notIn:</p><ul><li>notIn(â€œageâ€,{1,2,3})â€”&gt;age not in (1,2,3)</li><li>notIn(â€œageâ€, 1, 2, 3)â€”&gt;age not in (1,2,3)</li></ul><p>inSqlã€notinSqlï¼šå¯ä»¥å®ç°å­æŸ¥è¯¢</p><ul><li>inSql(â€œageâ€, â€œ1,2,3,4,5,6â€)â€”&gt;age in (1,2,3,4,5,6)</li><li>inSql(â€œidâ€, â€œselect id from table where id &lt; 3â€)â€”&gt;id in (select id from table where id &lt; 3)</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testSelectObjs</span><span class="hljs-params">()</span> </span>&#123;<br>    QueryWrapper&lt;User&gt; queryWrapper = <span class="hljs-keyword">new</span> QueryWrapper&lt;&gt;();<br>    <span class="hljs-comment">//queryWrapper.in(&quot;id&quot;, 1, 2, 3);</span><br>    queryWrapper.inSql(<span class="hljs-string">&quot;id&quot;</span>, <span class="hljs-string">&quot;select id from user where id &lt; 3&quot;</span>);<br>    List&lt;Object&gt; objects = userMapper.selectObjs(queryWrapper);<span class="hljs-comment">//è¿”å›å€¼</span><br>    æ˜¯Objectåˆ—è¡¨<br>        objects.forEach(System.out::println);<br>&#125;<br></code></pre></td></tr></table></figure><p>SELECT id,name,age,email,create_time,update_time,deleted,version FROM user WHERE deleted=0 AND id IN (select id from user where id &lt; 3)</p></li><li><p><strong>orã€and</strong></p><p>æ³¨æ„ï¼šè¿™é‡Œä½¿ç”¨çš„æ˜¯ <code>UpdateWrapper</code><br>ä¸è°ƒç”¨oråˆ™é»˜è®¤ä¸ºä½¿ç”¨ and è¿</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testUpdate1</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">//ä¿®æ”¹å€¼</span><br>    User user = <span class="hljs-keyword">new</span> User();<br>    user.setAge(<span class="hljs-number">99</span>);<br>    user.setName(<span class="hljs-string">&quot;Andy&quot;</span>);<br>    <span class="hljs-comment">//ä¿®æ”¹æ¡ä»¶</span><br>    UpdateWrapper&lt;User&gt; userUpdateWrapper = <span class="hljs-keyword">new</span> UpdateWrapper&lt;&gt;();<br>    userUpdateWrapper<br>        .like(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;h&quot;</span>)<br>        .or()<br>        .between(<span class="hljs-string">&quot;age&quot;</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>);<br>    <span class="hljs-keyword">int</span> result = userMapper.update(user, userUpdateWrapper);<br>    System.out.println(result);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>åµŒå¥—orã€åµŒå¥—and</strong></p><p>è¿™é‡Œä½¿ç”¨äº†lambdaè¡¨è¾¾å¼ï¼Œorä¸­çš„è¡¨è¾¾å¼æœ€åç¿»è¯‘æˆsqlæ—¶ä¼šè¢«åŠ ä¸Šåœ†æ‹¬å·ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testUpdate2</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">//ä¿®æ”¹å€¼</span><br>    User user = <span class="hljs-keyword">new</span> User();<br>    user.setAge(<span class="hljs-number">99</span>);<br>    user.setName(<span class="hljs-string">&quot;Andy&quot;</span>);<br>    <span class="hljs-comment">//ä¿®æ”¹æ¡ä»¶</span><br>    UpdateWrapper&lt;User&gt; userUpdateWrapper = <span class="hljs-keyword">new</span> UpdateWrapper&lt;&gt;();<br>    userUpdateWrapper<br>        .like(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;h&quot;</span>)<br>        .or(i -&gt; i.eq(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;æç™½&quot;</span>).ne(<span class="hljs-string">&quot;age&quot;</span>, <span class="hljs-number">20</span>));<br>    <span class="hljs-keyword">int</span> result = userMapper.update(user, userUpdateWrapper);<br>    System.out.println(result);<br>&#125;<br></code></pre></td></tr></table></figure><p>UPDATE user SET name=?, age=?, update_time=? WHERE deleted=0 AND name LIKE ? OR ( name = ? AND age &lt;&gt; ? )</p></li><li><p><strong>orderByã€orderByDescã€orderByAsc</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testSelectListOrderBy</span><span class="hljs-params">()</span> </span>&#123;<br>    QueryWrapper&lt;User&gt; queryWrapper = <span class="hljs-keyword">new</span> QueryWrapper&lt;&gt;();<br>    queryWrapper.orderByDesc(<span class="hljs-string">&quot;id&quot;</span>);<br>    List&lt;User&gt; users = userMapper.selectList(queryWrapper);<br>    users.forEach(System.out::println);<br>&#125;<br></code></pre></td></tr></table></figure><p>SELECT id,name,age,email,create_time,update_time,deleted,version FROM user WHERE deleted=0 ORDER BY id DESC</p></li><li><p><strong>last</strong></p><p>ç›´æ¥æ‹¼æ¥åˆ° sql çš„æœ€å<br>æ³¨æ„ï¼šåªèƒ½è°ƒç”¨ä¸€æ¬¡,å¤šæ¬¡è°ƒç”¨ä»¥æœ€åä¸€æ¬¡ä¸ºå‡† æœ‰sqlæ³¨å…¥çš„é£é™©,è¯·è°¨æ…ä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testSelectListLast</span><span class="hljs-params">()</span> </span>&#123;<br>    QueryWrapper&lt;User&gt; queryWrapper = <span class="hljs-keyword">new</span> QueryWrapper&lt;&gt;();<br>    queryWrapper.last(<span class="hljs-string">&quot;limit 1&quot;</span>);<br>    List&lt;User&gt; users = userMapper.selectList(queryWrapper);<br>    users.forEach(System.out::println);<br>&#125;<br></code></pre></td></tr></table></figure><p>SELECT id,name,age,email,create_time,update_time,deleted,version<br>FROM user WHERE deleted=0 <strong>limit 1</strong></p></li><li><p><strong>æŒ‡å®šè¦æŸ¥è¯¢çš„åˆ—</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testSelectListColumn</span><span class="hljs-params">()</span> </span>&#123;<br>    QueryWrapper&lt;User&gt; queryWrapper = <span class="hljs-keyword">new</span> QueryWrapper&lt;&gt;();<br>    queryWrapper.select(<span class="hljs-string">&quot;id&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>);<br>    List&lt;User&gt; users = userMapper.selectList(queryWrapper);<br>    users.forEach(System.out::println);<br>&#125;<br></code></pre></td></tr></table></figure><p>SELECT id,name,age FROM user WHERE deleted=0</p></li><li><p><strong>setã€setSql</strong></p><p>æœ€ç»ˆçš„sqlä¼šåˆå¹¶ user.setAge()ï¼Œä»¥åŠ userUpdateWrapper.set() å’Œ setSql() ä¸­ çš„å­—æ®µ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testUpdateSet</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">//ä¿®æ”¹å€¼</span><br>    User user = <span class="hljs-keyword">new</span> User();<br>    user.setAge(<span class="hljs-number">99</span>);<br>    <span class="hljs-comment">//ä¿®æ”¹æ¡ä»¶</span><br>    UpdateWrapper&lt;User&gt; userUpdateWrapper = <span class="hljs-keyword">new</span> UpdateWrapper&lt;&gt;();<br>    userUpdateWrapper<br>        .like(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;h&quot;</span>)<br>        .set(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;è€æå¤´&quot;</span>)<span class="hljs-comment">//é™¤äº†å¯ä»¥æŸ¥è¯¢è¿˜å¯ä»¥ä½¿ç”¨setè®¾ç½®ä¿®æ”¹çš„å­—æ®µ</span><br>        .setSql(<span class="hljs-string">&quot; email = &#x27;123@qq.com&#x27;&quot;</span>);<span class="hljs-comment">//å¯ä»¥æœ‰å­æŸ¥è¯¢</span><br>    <span class="hljs-keyword">int</span> result = userMapper.update(user, userUpdateWrapper);<br>&#125;<br></code></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>MyBatisPlus</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Nginxç¬”è®°07-Nginxé…ç½®å®ä¾‹-åŠ¨é™åˆ†ç¦»</title>
    <link href="/posts/2021/01/24/Nginx%E7%AC%94%E8%AE%B007-Nginx%E9%85%8D%E7%BD%AE%E5%AE%9E%E4%BE%8B-%E5%8A%A8%E9%9D%99%E5%88%86%E7%A6%BB/"/>
    <url>/posts/2021/01/24/Nginx%E7%AC%94%E8%AE%B007-Nginx%E9%85%8D%E7%BD%AE%E5%AE%9E%E4%BE%8B-%E5%8A%A8%E9%9D%99%E5%88%86%E7%A6%BB/</url>
    
    <content type="html"><![CDATA[<p>Nginx åŠ¨é™åˆ†ç¦»ç®€å•æ¥è¯´å°±æ˜¯æŠŠåŠ¨æ€è·Ÿé™æ€è¯·æ±‚åˆ†å¼€ï¼Œä¸èƒ½ç†è§£æˆåªæ˜¯å•çº¯çš„æŠŠåŠ¨æ€é¡µé¢å’Œé™æ€é¡µé¢ç‰©ç†åˆ†ç¦»ã€‚ä¸¥æ ¼æ„ä¹‰ä¸Šè¯´åº”è¯¥æ˜¯åŠ¨æ€è¯·æ±‚è·Ÿé™æ€è¯·æ±‚åˆ†å¼€ï¼Œå¯ä»¥ç†è§£æˆä½¿ç”¨Nginx å¤„ç†é™æ€é¡µé¢ï¼ŒTomcatå¤„ç†åŠ¨æ€é¡µé¢ã€‚åŠ¨é™åˆ†ç¦»ä»ç›®å‰å®ç°è§’åº¦æ¥è®²å¤§è‡´åˆ†ä¸ºä¸¤ç§ï¼Œ ä¸€ç§æ˜¯çº¯ç²¹æŠŠé™æ€æ–‡ä»¶ç‹¬ç«‹æˆå•ç‹¬çš„åŸŸåï¼Œæ”¾åœ¨ç‹¬ç«‹çš„æœåŠ¡å™¨ä¸Šï¼Œä¹Ÿæ˜¯ç›®å‰ä¸»æµæ¨å´‡çš„æ–¹æ¡ˆï¼› å¦å¤–ä¸€ç§æ–¹æ³•å°±æ˜¯åŠ¨æ€è·Ÿé™æ€æ–‡ä»¶æ··åˆåœ¨ä¸€èµ·å‘å¸ƒï¼Œé€šè¿‡ nginx æ¥åˆ†å¼€ã€‚ é€šè¿‡ location æŒ‡å®šä¸åŒçš„åç¼€åå®ç°ä¸åŒçš„è¯·æ±‚è½¬å‘ã€‚é€šè¿‡ expires å‚æ•°è®¾ç½®ï¼Œå¯ä»¥ä½¿æµè§ˆå™¨ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œå‡å°‘ä¸æœåŠ¡å™¨ä¹‹å‰çš„è¯·æ±‚å’Œæµé‡ã€‚å…·ä½“ Expires å®šä¹‰ï¼šæ˜¯ç»™ä¸€ä¸ªèµ„æºè®¾å®šä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œä¹Ÿå°±æ˜¯è¯´æ— éœ€å»æœåŠ¡ç«¯éªŒè¯ï¼Œç›´æ¥é€šè¿‡æµè§ˆå™¨è‡ªèº«ç¡®è®¤æ˜¯å¦è¿‡æœŸå³å¯ï¼Œæ‰€ä»¥ä¸ä¼šäº§ç”Ÿé¢å¤–çš„æµé‡ã€‚æ­¤ç§æ–¹æ³•éå¸¸é€‚åˆä¸ç»å¸¸å˜åŠ¨çš„èµ„æºã€‚ï¼ˆå¦‚æœç»å¸¸æ›´æ–°çš„æ–‡ä»¶ï¼Œä¸å»ºè®®ä½¿ç”¨ Expires æ¥ç¼“å­˜ï¼‰ï¼Œæˆ‘è¿™é‡Œè®¾ç½® 3dï¼Œè¡¨ç¤ºåœ¨è¿™ 3 å¤©ä¹‹å†…è®¿é—®è¿™ä¸ª URLï¼Œå‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œæ¯”å¯¹æœåŠ¡å™¨è¯¥æ–‡ä»¶æœ€åæ›´æ–°æ—¶é—´æ²¡æœ‰å˜åŒ–ï¼Œåˆ™ä¸ä¼šä»æœåŠ¡å™¨æŠ“å–ï¼Œè¿”å›çŠ¶æ€ç  304ï¼Œå¦‚æœæœ‰ä¿®æ”¹ï¼Œåˆ™ç›´æ¥ä»æœåŠ¡å™¨é‡æ–°ä¸‹è½½ï¼Œè¿”å›çŠ¶æ€ç  200ã€‚</p><blockquote><p>å®éªŒä»£ç </p></blockquote><p>nginxé…ç½®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell">server &#123;<br>...<br>location /www/ &#123;<br>root /data/;<br>index index.html index.htm;<br>&#125;<br><br><span class="hljs-meta">#</span><span class="bash"> location /é™æ€èµ„æºè·¯å¾„</span><br>location /image &#123;<br>root /data/;<br>autoindex on;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Nginxç¬”è®°06-Nginxé…ç½®å®ä¾‹-è´Ÿè½½å‡è¡¡</title>
    <link href="/posts/2021/01/24/Nginx%E7%AC%94%E8%AE%B006-Nginx%E9%85%8D%E7%BD%AE%E5%AE%9E%E4%BE%8B-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/"/>
    <url>/posts/2021/01/24/Nginx%E7%AC%94%E8%AE%B006-Nginx%E9%85%8D%E7%BD%AE%E5%AE%9E%E4%BE%8B-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/</url>
    
    <content type="html"><![CDATA[<h2 id="Nginxé…ç½®å®ä¾‹-è´Ÿè½½å‡è¡¡"><a href="#Nginxé…ç½®å®ä¾‹-è´Ÿè½½å‡è¡¡" class="headerlink" title="Nginxé…ç½®å®ä¾‹-è´Ÿè½½å‡è¡¡"></a>Nginxé…ç½®å®ä¾‹-è´Ÿè½½å‡è¡¡</h2><ol><li><p>é¦–å…ˆå‡†å¤‡ä¸¤ä¸ªå¯åŠ¨çš„Tomcat</p></li><li><p>åœ¨nginx.confä¸­è¿›è¡Œé…ç½®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs shell">http &#123;<br>......<br>upstraem myserver &#123;<br>ip_hash;<br>server 8.131.49.204:8080 weight=1;<br>    server 8.131.49.204:8081 weight=1;<br>&#125;<br>......<br>server&#123;<br>location / &#123;<br>......<br>proxy_pass http://myserver;<br>proxy_connect_timeout 10;<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>éšç€äº’è”ç½‘ä¿¡æ¯çš„çˆ†ç‚¸æ€§å¢é•¿ï¼Œè´Ÿè½½å‡è¡¡ï¼ˆload balance ï¼‰å·²ç»ä¸å†æ˜¯ä¸€ä¸ªå¾ˆé™Œç”Ÿçš„è¯é¢˜é¡¾åæ€ä¹‰ï¼Œè´Ÿè½½å‡è¡¡å³æ˜¯å°†è´Ÿè½½åˆ†æ‘Šåˆ°ä¸åŒçš„æœåŠ¡å•å…ƒï¼Œæ—¢ä¿è¯æœåŠ¡çš„å¯ç”¨æ€§ï¼Œåˆä¿è¯å“åº”è¶³å¤Ÿå¿«ï¼Œç»™ç”¨æˆ·å¾ˆå¥½çš„ä½“éªŒã€‚å¿«é€Ÿå¢é•¿çš„è®¿é—®é‡å’Œæ•°æ®æµé‡å‚¬ç”Ÿäº†å„å¼å„æ ·çš„è´Ÿè½½å‡è¡¡äº§å“ï¼Œå¾ˆå¤šä¸“ä¸šçš„è´Ÿè½½å‡è¡¡ç¡¬ä»¶æä¾›äº†å¾ˆå¥½çš„åŠŸèƒ½ï¼Œä½†å´ä»·æ ¼ä¸è²ï¼Œè¿™ä½¿å¾—è´Ÿè½½å‡è¡¡è½¯ä»¶å¤§å—æ¬¢è¿ï¼Œnginx å°±æ˜¯å…¶ä¸­çš„ä¸€ä¸ªï¼Œåœ¨ linux ä¸‹æœ‰ Nginx ã€ LVS ã€ Haproxy ç­‰ç­‰æœåŠ¡å¯ä»¥æä¾›è´Ÿè½½å‡è¡¡æœåŠ¡ï¼Œè€Œä¸” Nginx æä¾›äº†å‡ ç§åˆ†é…æ–¹å¼ ç­–ç•¥ã€‚</p><p><strong>è½®è¯¢</strong>ï¼š</p><p>æ¯ä¸ªè¯·æ±‚æŒ‰æ—¶é—´é¡ºåºé€ä¸€åˆ†é…åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ï¼Œå¦‚æœåç«¯æœåŠ¡å™¨downæ‰ï¼Œèƒ½è‡ªåŠ¨å‰”é™¤ã€‚</p><p><strong>weight</strong>ï¼š<br>ä»£è¡¨æƒ é‡é»˜è®¤ä¸º 1, æƒé‡è¶Šé«˜è¢«åˆ†é…çš„å®¢æˆ·ç«¯è¶Šå¤š</p><p>æŒ‡å®šè½®è¯¢å‡ ç‡ï¼Œweightå’Œè®¿é—®æ¯”ç‡æˆæ­£æ¯”ï¼Œç”¨äºåç«¯æœåŠ¡å™¨æ€§èƒ½ä¸å‡çš„æƒ…å†µ</p><p><strong>ip_hash</strong>:</p><p>æ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—®ipçš„hashç»“æœåˆ†é…ï¼Œè¿™æ ·æ¯ä¸ªè®¿å®¢å›ºå®šè®¿é—®ä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œå¯ä»¥è§£å†³sessionçš„é—®é¢˜ã€‚</p><p><strong>fair</strong>:</p><p>æŒ‰åç«¯æœåŠ¡å™¨çš„å“åº”æ—¶é—´æ¥åˆ†é…è¯·æ±‚ï¼Œå“åº”æ—¶é—´çŸ­çš„ä¼˜å…ˆåˆ†é…ã€‚</p></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>Nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Nginxç¬”è®°05-Nginxé…ç½®å®ä¾‹-åå‘ä»£ç†</title>
    <link href="/posts/2021/01/24/Nginx%E7%AC%94%E8%AE%B005-Nginx%E9%85%8D%E7%BD%AE%E5%AE%9E%E4%BE%8B-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/"/>
    <url>/posts/2021/01/24/Nginx%E7%AC%94%E8%AE%B005-Nginx%E9%85%8D%E7%BD%AE%E5%AE%9E%E4%BE%8B-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h2 id="nginxé…ç½®å®ä¾‹-åå‘ä»£ç†"><a href="#nginxé…ç½®å®ä¾‹-åå‘ä»£ç†" class="headerlink" title="nginxé…ç½®å®ä¾‹-åå‘ä»£ç†"></a>nginxé…ç½®å®ä¾‹-åå‘ä»£ç†</h2><blockquote><p>å‡†å¤‡å·¥ä½œ</p></blockquote><ol><li><p>ä¸‹è½½Tomcatåˆ°æœåŠ¡å™¨ï¼š<a href="https://tomcat.apache.org/download-90.cgi">https://tomcat.apache.org/download-90.cgi</a></p></li><li><p>è§£å‹Tomcat</p></li><li><p>å¯åŠ¨Tomcatï¼Œè¿›å…¥binç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z bin]# ./startup.sh <br>Using CATALINA_BASE:   /home/apache-tomcat-9.0.41<br>Using CATALINA_HOME:   /home/apache-tomcat-9.0.41<br>Using CATALINA_TMPDIR: /home/apache-tomcat-9.0.41/temp<br>Using JRE_HOME:        /usr<br>Using CLASSPATH:       /home/apache-tomcat-9.0.41/bin/bootstrap.jar:/home/apache-tomcat-9.0.41/bin/tomcat-juli.jar<br>Using CATALINA_OPTS:   <br>Tomcat started.<br></code></pre></td></tr></table></figure></li><li><p>å¯¹å¤–å¼€æ”¾8080ç«¯å£</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">firewall-cmd --add-prot=8080/tcp --permanent<br>firewall-cmd -reload<br></code></pre></td></tr></table></figure></li><li><p>é€šè¿‡ç½‘é¡µè®¿é—®Tomcatï¼š<a href="http://8.131.49.204:8080/">http://8.131.49.204:8080/</a></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Nginxç¬”è®°05-Nginxé…ç½®å®ä¾‹-åå‘ä»£ç†/1.png" alt="è®¿é—®Tomcat" style="zoom:80%;"></li></ol><blockquote><p>åå‘ä»£ç†å®ä¾‹ä¸€</p></blockquote><ol><li><p>åœ¨ Windows ç³»ç»Ÿçš„ host æ–‡ä»¶è¿›è¡ŒåŸŸåå’Œ ip å¯¹åº”å…³ç³»çš„é…ç½®ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Nginx%E7%AC%94%E8%AE%B005-Nginx%E9%85%8D%E7%BD%AE%E5%AE%9E%E4%BE%8B-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/2.png" alt="hostæ–‡ä»¶"></p><p>åœ¨æ–‡ä»¶ä¸­æ·»åŠ ä¸€å¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">8.131.49.204  www.atrox.com<br></code></pre></td></tr></table></figure></li><li><p>åœ¨nginxè¿›è¡Œè¯·æ±‚è½¬å‘çš„é…ç½®ï¼ˆåå‘ä»£ç†é…ç½®ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Nginx%E7%AC%94%E8%AE%B005-Nginx%E9%85%8D%E7%BD%AE%E5%AE%9E%E4%BE%8B-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/3.png" alt="é…ç½®åå‘ä»£ç†"></p><p>è¿™æ ·å½“åœ¨æµè§ˆå™¨ä¸­è®¿é—® 8.131.49.204å°±å¯ä»¥è¢«è½¬å‘åˆ°8.131.49.204:8080</p></li><li><p>è¿›å…¥/usr/local/nginx/sbin å¯åŠ¨nginxã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z sbin]# ./nginx<br></code></pre></td></tr></table></figure></li><li><p>åœ¨ç½‘é¡µåœ°å€æ è¿›è¡Œæµ‹è¯•</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Nginx%E7%AC%94%E8%AE%B005-Nginx%E9%85%8D%E7%BD%AE%E5%AE%9E%E4%BE%8B-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/4.png" alt="æµ‹è¯•"></p><p>è¿™æ˜¯ç”±äºä¸æ˜¯è™šæ‹Ÿæœºè€Œæ˜¯é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œéœ€è¦å¤‡æ¡ˆæ‰å¯ä»¥è®¿é—®åˆ°ã€‚</p></li></ol><blockquote><p>åå‘ä»£ç†å®ä¾‹2</p></blockquote><p>å®ç°æ•ˆæœï¼šä½¿ç”¨ nginx åå‘ä»£ç†ï¼Œ æ ¹æ®è®¿é—®çš„è·¯å¾„è·³è½¬åˆ°ä¸åŒç«¯å£çš„æœåŠ¡ä¸­nginx ç›‘å¬ç«¯å£ä¸º 9001ã€‚è®¿é—® <a href="http://127.0.0.1:9001/edu/">http://127.0.0.1:9001/edu/</a> ç›´æ¥è·³è½¬åˆ° 127.0.0.1:808 1ï¼›è®¿é—® <a href="http://0.0.0.1/">http://1</a> 27.0.0.1:9001/vod/ ç›´æ¥è·³è½¬åˆ° 127.0.0.1:808 2</p><p><strong>å‡†å¤‡å·¥ä½œ</strong>ï¼š</p><ol><li><p>ç¬¬ä¸€æ­¥ï¼Œå‡†å¤‡ä¸¤ä¸ª tomcat ï¼Œä¸€ä¸ª 8001 ç«¯å£ï¼Œä¸€ä¸ª 8002 ç«¯å£ï¼Œå¹¶å‡†å¤‡å¥½æµ‹è¯•çš„é¡µé¢</p></li><li><p>ç¬¬äºŒæ­¥ï¼Œä¿®æ”¹ nginx çš„é…ç½®æ–‡ä»¶åœ¨http å—ä¸­æ·»åŠ  server{}</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell">server &#123;<br>listen  9001;<br>server_name  localhost;<br><br>location  ~  /edu/  &#123;<br>proxy_pass  http://localhost:8001;<br>&#125;<br><br>location  ~  /vod/  &#123;<br>proxy_pass  http://localhost:8002;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><p><strong>locationæŒ‡ä»¤è¯´æ˜</strong></p><p>è¯¥æŒ‡ä»¤ç”¨äºåŒ¹é… URLã€‚ è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">location  [ = | ~ | ~* | ^~] uri &#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><ol><li>= ï¼šç”¨äºä¸å«æ­£åˆ™è¡¨è¾¾å¼çš„ uri å‰ï¼Œè¦æ±‚è¯·æ±‚å­—ç¬¦ä¸²ä¸ uri ä¸¥æ ¼åŒ¹é…ï¼Œå¦‚æœåŒ¹é…æˆåŠŸï¼Œå°±åœæ­¢ç»§ç»­å‘ä¸‹æœç´¢å¹¶ç«‹å³å¤„ç†è¯¥è¯·æ±‚ã€‚</li><li>~ï¼šç”¨äºè¡¨ç¤º uri åŒ…å«æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¹¶ä¸”åŒºåˆ†å¤§å°å†™ã€‚</li><li>~*ï¼šç”¨äºè¡¨ç¤º uri åŒ…å«æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¹¶ä¸”ä¸åŒºåˆ†å¤§å°å†™ã€‚</li><li>^~ï¼šç”¨äºä¸å«æ­£åˆ™è¡¨è¾¾å¼çš„ uri å‰ï¼Œè¦æ±‚ Nginx æœåŠ¡å™¨æ‰¾åˆ°æ ‡è¯† uri å’Œè¯·æ±‚å­—ç¬¦ä¸²åŒ¹é…åº¦æœ€é«˜çš„ location åï¼Œç«‹å³ä½¿ç”¨æ­¤ location å¤„ç†è¯·æ±‚ï¼Œè€Œä¸å†ä½¿ç”¨ locationå—ä¸­çš„æ­£åˆ™ uri å’Œè¯·æ±‚å­—ç¬¦ä¸²åšåŒ¹é…ã€‚</li></ol><p>*<em>æ³¨æ„ï¼šå¦‚æœ uri åŒ…å«æ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆ™å¿…é¡»è¦æœ‰ ~ æˆ–è€… ~</em> æ ‡è¯†ã€‚**</p>]]></content>
    
    
    
    <tags>
      
      <tag>Nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Nginxç¬”è®°04-Nginxé…ç½®æ–‡ä»¶</title>
    <link href="/posts/2021/01/24/Nginx%E7%AC%94%E8%AE%B004-Nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/"/>
    <url>/posts/2021/01/24/Nginx%E7%AC%94%E8%AE%B004-Nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h2 id="nginxé…ç½®æ–‡ä»¶"><a href="#nginxé…ç½®æ–‡ä»¶" class="headerlink" title="nginxé…ç½®æ–‡ä»¶"></a>nginxé…ç½®æ–‡ä»¶</h2><blockquote><p>nginxé…ç½®æ–‡ä»¶æ‰€åœ¨ä½ç½®ï¼š/usr/local/nginx/conf/nginx.conf</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@iZ2zeh7ydg2bbydds175q0Z sbin]<span class="hljs-comment"># cd /usr/local/nginx/conf</span><br>[root@iZ2zeh7ydg2bbydds175q0Z conf]<span class="hljs-comment"># ls</span><br>fastcgi.conf            koi-win             scgi_params<br>fastcgi.conf.default    mime.types          scgi_params.default<br>fastcgi_params          mime.types.default  uwsgi_params<br>fastcgi_params.default  nginx.conf          uwsgi_params.default<br>koi-utf                 nginx.conf.default  win-utf<br></code></pre></td></tr></table></figure><blockquote><p>nginxé…ç½®æ–‡ä»¶çš„3ä¸ªç»„æˆéƒ¨åˆ†</p></blockquote><p><strong>ç¬¬ä¸€éƒ¨åˆ†</strong>ï¼š<strong>å…¨å±€å—</strong></p><p>â€‹    ä»é…ç½®æ–‡ä»¶å¼€å§‹åˆ° events å—ä¹‹é—´çš„å†…å®¹ï¼Œä¸»è¦ä¼šè®¾ç½®ä¸€äº›å½±å“ nginx æœåŠ¡å™¨æ•´ä½“è¿è¡Œçš„é…ç½®æŒ‡ä»¤ï¼Œä¸»è¦åŒ…æ‹¬    é…ç½®è¿è¡Œ Nginx æœåŠ¡å™¨çš„ç”¨æˆ·ï¼ˆç»„ï¼‰ã€å…è®¸ç”Ÿæˆçš„ worker process æ•°ï¼Œè¿›ç¨‹ PIDå­˜æ”¾è·¯å¾„ã€æ—¥å¿—å­˜æ”¾è·¯å¾„å’Œç±»å‹    ä»¥åŠé…ç½®æ–‡ä»¶çš„å¼•å…¥ç­‰ã€‚</p><p>â€‹    æ¯”å¦‚ï¼Œè¿™ä¸€è¡Œé…ç½®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">worker_processes  1;<br></code></pre></td></tr></table></figure><p>â€‹    è¿™æ˜¯ Nginx æœåŠ¡å™¨å¹¶å‘å¤„ç†æœåŠ¡çš„å…³é”®é…ç½®ï¼Œ work_process å€¼è¶Šå¤§ï¼Œå¯ä»¥æ”¯æŒçš„å¹¶å‘å¤„ç†é‡ä¹Ÿè¶Šå¤šï¼Œä½†æ˜¯ä¼š    å—åˆ°ç¡¬ä»¶ã€è½¯ä»¶ç­‰è®¾å¤‡çš„åˆ¶çº¦ã€‚</p><p><strong>ç¬¬äºŒéƒ¨åˆ†</strong>ï¼š<strong>eventså—</strong></p><p>â€‹    events å—æ¶‰åŠçš„æŒ‡ä»¤ä¸»è¦å½±å“ NginxæœåŠ¡å™¨ä¸ç”¨æˆ·çš„ç½‘ç»œè¿æ¥ï¼Œå¸¸ç”¨çš„è®¾ç½®åŒ…    æ‹¬æ˜¯å¦å¼€å¯å¯¹å¤š work process ä¸‹çš„ç½‘ç»œè¿æ¥è¿›è¡Œåºåˆ—åŒ–ï¼Œæ˜¯å¦å…è®¸åŒæ—¶æ¥å—å¤šä¸ªç½‘    ç»œè¿æ¥ï¼Œé€‰å–å“ªç§äº‹ä»¶é©±åŠ¨æ¨¡å‹æ¥å¤„ç†è¿æ¥è¯·æ±‚ï¼Œæ¯ä¸ª word process å¯ä»¥åŒæ—¶æ”¯æŒ    çš„æœ€å¤§è¿æ¥æ•°ã€‚</p><p>â€‹    æ¯”å¦‚ï¼Œè¿™ä¸€é…ç½®ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">events &#123;<br>worker_connections 1024;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    è¿™ä¸ªé…ç½®è¡¨ç¤ºæ¯ä¸ª work process æ”¯æŒçš„æœ€å¤§è¿æ¥æ•°æ˜¯1024.</p><p><strong>ç¬¬ä¸‰éƒ¨åˆ†</strong>ï¼š<strong>httpå—</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs shell">http &#123;<br>    include       mime.types;<br>    default_type  application/octet-stream;<br><br><br>    sendfile        on;<br>    #tcp_nopush     on;<br><br>    #keepalive_timeout  0;<br>    keepalive_timeout  65;<br><br>    #gzip  on;<br><br>        server_name  localhost;<br><br>        #charset koi8-r;<br><br>        location / &#123;<br>            root   html;<br>            index  index.html index.htm;<br>        &#125;<br><br>        error_page   500 502 503 504  /50x.html;<br>        location = /50x.html &#123;<br>            root   html;<br><br>    &#125;<br><br></code></pre></td></tr></table></figure><p>è¿™ä¸€å—æ˜¯ Nginx æœåŠ¡å™¨é…ç½®æœ€é¢‘ç¹çš„éƒ¨åˆ†ï¼Œä»£ç†ã€ç¼“å­˜å’Œæ—¥å¿—å®šä¹‰ç­‰ç»å¤§å¤šæ•°åŠŸèƒ½å’Œç¬¬ä¸‰æ–¹æ¨¡å—çš„é…ç½®éƒ½åœ¨è¿™é‡Œã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šhttpå—ä¹ŸåŒ…æ‹¬ <strong>httpå…¨å±€å—ã€serverå—</strong>ã€‚</p><ul><li><p><strong>httpå…¨å±€å—</strong></p><p>httpå…¨å±€å—é…ç½®çš„æŒ‡ä»¤åŒ…æ‹¬æ–‡ä»¶å¼•å…¥ã€MIME-TYPE å®šä¹‰ã€æ—¥å¿—è‡ªå®šä¹‰ã€è¿æ¥è¶…æ—¶æ—¶é—´ã€å•é“¾æ¥è¯·æ±‚æ•°ä¸Šé™ç­‰ã€‚</p></li><li><p><strong>serverå—</strong></p><p>è¿™å—å’Œè™šæ‹Ÿä¸»æœºæœ‰å¯†åˆ‡çš„è”ç³»ï¼Œè™šæ‹Ÿä¸»æœºä»ç”¨æˆ·è§’åº¦çœ‹ï¼Œå’Œä¸€å°ç‹¬ç«‹çš„ç¡¬ä»¶ä¸»æœºæ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œè¯¥æŠ€æœ¯çš„äº§ç”Ÿå¼ä¸ºäº†èŠ‚çœäº’è”ç½‘æœåŠ¡å™¨ç¡¬ä»¶æˆæœ¬ã€‚</p><p>æ¯ä¸ª http å—å¯ä»¥åŒ…æ‹¬å¤šä¸ª serverå—ï¼Œè€Œæ¯ä¸ª server å—å°±ç›¸å½“äºä¸€ä¸ªè™šæ‹Ÿä¸»æœºã€‚</p><p>è€Œæ¯ä¸ª server å—ä¹Ÿåˆ†ä¸º<strong>å…¨å±€ server å—</strong>ï¼Œä»¥åŠå¯ä»¥åŒæ—¶åŒ…å«å¤šä¸ª <strong>location å—</strong>ã€‚ </p><ol><li><p><strong>å…¨å±€ server å—</strong></p><p>æœ€å¸¸è§çš„é…ç½®æ˜¯æœ¬è™šæ‹Ÿä¸»æœºçš„ç›‘å¬é…ç½®å’Œæœ¬è™šæ‹Ÿä¸»æœºçš„åç§°æˆ–IPé…ç½®ã€‚</p></li><li><p><strong>location å—</strong></p><p>ä¸€ä¸ª server å—å¯ä»¥é…ç½®å¤šä¸ª location å—ã€‚</p><p>è¿™å—çš„ä¸»è¦ä½œç”¨æ˜¯åŸºäº Nginx æœåŠ¡å™¨æ¥æ”¶åˆ°çš„è¯·æ±‚å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ server_name/uri-stringï¼‰ï¼Œå¯¹è™šæ‹Ÿä¸»æœºåç§°ï¼ˆä¹Ÿå¯ä»¥æ˜¯IPåˆ«åï¼‰ä¹‹å¤–çš„å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ï¼šå‰é¢çš„/uri-stringï¼‰è¿›è¡ŒåŒ¹é…ï¼Œå¯¹ç‰¹å®šçš„è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚åœ°å€å®šå‘ã€æ•°æ®ç¼“å­˜å’Œåº”ç­”æ§åˆ¶ç­‰åŠŸèƒ½ï¼Œè¿˜æœ‰è®¸å¤šç¬¬ä¸‰æ–¹æ¨¡å—çš„é…ç½®ä¹Ÿåœ¨è¿™é‡Œè¿›è¡Œã€‚</p></li></ol></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>Nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Nginxç¬”è®°03-Nginxå¸¸ç”¨å‘½ä»¤</title>
    <link href="/posts/2021/01/24/Nginx%E7%AC%94%E8%AE%B003-Nginx%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <url>/posts/2021/01/24/Nginx%E7%AC%94%E8%AE%B003-Nginx%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<h2 id="nginxæ“ä½œçš„å¸¸ç”¨å‘½ä»¤"><a href="#nginxæ“ä½œçš„å¸¸ç”¨å‘½ä»¤" class="headerlink" title="nginxæ“ä½œçš„å¸¸ç”¨å‘½ä»¤"></a>nginxæ“ä½œçš„å¸¸ç”¨å‘½ä»¤</h2><ol><li><p>ä½¿ç”¨nginxæ“ä½œå‘½ä»¤å‰æï¼šè¿›å…¥nginxçš„ç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z ~]# cd /usr/local/nginx/sbin<br></code></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹nginxçš„ç‰ˆæœ¬å·: ./nginx -v</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z sbin]# ./nginx -v<br>nginx version: nginx/1.18.0<br></code></pre></td></tr></table></figure></li><li><p>å¯åŠ¨nginxï¼š./nginx</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z sbin]# ./nginx<br>[root@iZ2zeh7ydg2bbydds175q0Z sbin]# ps -ef|grep nginx<br>root     15248     1  0 12:25 ?        00:00:00 nginx: master process ./nginx<br>nobody   15249 15248  0 12:25 ?        00:00:00 nginx: worker process<br>root     15255 15156  0 12:25 pts/4    00:00:00 grep --color=auto nginx<br></code></pre></td></tr></table></figure></li><li><p>å…³é—­nginxï¼š./nginx -s stop</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z sbin]# ps -ef|grep nginx<br>root     11960     1  0 11:34 ?        00:00:00 nginx: master process ./nginx<br>nobody   11961 11960  0 11:34 ?        00:00:00 nginx: worker process<br>root     15198 15156  0 12:24 pts/4    00:00:00 grep --color=auto nginx<br>[root@iZ2zeh7ydg2bbydds175q0Z sbin]# ./nginx -s stop<br>[root@iZ2zeh7ydg2bbydds175q0Z sbin]# ps -ef|grep nginx<br>root     15211 15156  0 12:24 pts/4    00:00:00 grep --color=auto nginx<br></code></pre></td></tr></table></figure></li><li><p>é‡æ–°åŠ è½½nginxï¼š./nginx -s reload</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z sbin]# ./nginx -s reload<br></code></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>Nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Nginxç¬”è®°02-Linuxç³»ç»Ÿå®‰è£…nginx</title>
    <link href="/posts/2021/01/23/Nginx%E7%AC%94%E8%AE%B002-Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85nginx/"/>
    <url>/posts/2021/01/23/Nginx%E7%AC%94%E8%AE%B002-Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85nginx/</url>
    
    <content type="html"><![CDATA[<h2 id="Nginxçš„å®‰è£…"><a href="#Nginxçš„å®‰è£…" class="headerlink" title="Nginxçš„å®‰è£…"></a>Nginxçš„å®‰è£…</h2><ol><li><p>ä½¿ç”¨è¿œç¨‹è¿æ¥å·¥å…·è¿æ¥åˆ°æœåŠ¡å™¨ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Nginxç¬”è®°02-Linuxç³»ç»Ÿå®‰è£…nginx/1.png" alt="xshellè¿æ¥æœåŠ¡å™¨" style="zoom:80%;"></li><li><p>å»nginxå®˜ç½‘ï¼š<a href="https://nginx.org/%E4%B8%8B%E8%BD%BD">https://nginx.org/ä¸‹è½½</a></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Nginxç¬”è®°02-Linuxç³»ç»Ÿå®‰è£…nginx/2.png" alt="ä¸‹è½½nginx" style="zoom:80%;"></li><li><p>å…ˆåˆ«æ€¥ç€è§£å‹ï¼Œå…ˆè¦ä¸‹è½½å…³äºnginxçš„ç´ æã€‚</p></li><li><p>ä¸‹è½½pcreåº“ï¼Œä¸‹è½½ï¼š<a href="https://ftp.pcre.org/pub/pcre/">https://ftp.pcre.org/pub/pcre/</a></p><ul><li><p>å°†pcreå‹ç¼©åŒ…å‘é€åˆ°æœåŠ¡å™¨ï¼Œè§£å‹ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Nginxç¬”è®°02-Linuxç³»ç»Ÿå®‰è£…nginx/3.png" alt="å‘é€åˆ°æœåŠ¡å™¨" style="zoom:80%;"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">tar zxvf pcre2-10.36.tar.gz<br></code></pre></td></tr></table></figure></li><li><p>è¿›å…¥è§£å‹åæ–‡ä»¶ç›®å½•ï¼Œæ‰§è¡Œå‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./configure<br></code></pre></td></tr></table></figure></li><li><p>æ‰§è¡Œç¼–è¯‘å®‰è£…å‘½ä»¤ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">make &amp;&amp; make install<br></code></pre></td></tr></table></figure></li><li><p>å®‰è£…å®Œæˆåï¼Œæ£€æŸ¥ç‰ˆæœ¬ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z pcre2-10.36]# pcre-config --version<br>8.42<br></code></pre></td></tr></table></figure></li></ul></li><li><p>å®‰è£…å…¶ä»–çš„ä¾èµ–</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">yum -y install make zlib zlib-devel gcc-c++ libtool openssl openssl-devel<br></code></pre></td></tr></table></figure></li><li><p>æ¥ä¸‹æ¥å®‰è£…Nginx</p><ul><li><p>å°†nginxå®‰è£…åŒ…å‘é€åˆ°æœåŠ¡å™¨</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Nginxç¬”è®°02-Linuxç³»ç»Ÿå®‰è£…nginx/4.png" alt="å‘é€åˆ°æœåŠ¡å™¨" style="zoom:80%;"></li><li><p>è§£å‹ç¼©nginxåŒ…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">tar zxvf nginx-1.18.0.tar.gz <br></code></pre></td></tr></table></figure></li><li><p>è¿›å…¥è§£å‹åæ–‡ä»¶ç›®å½•ï¼Œæ‰§è¡Œå‘½ä»¤ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">./configure<br></code></pre></td></tr></table></figure></li><li><p>æ‰§è¡Œç¼–è¯‘å®‰è£…å‘½ä»¤ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">make &amp;&amp; make install<br></code></pre></td></tr></table></figure></li></ul></li><li><p>å®‰è£…æˆåŠŸåï¼Œåœ¨/usr/localä¸­å¤šå‡ºä¸€ä¸ªæ–‡ä»¶å¤¹niginxï¼Œåœ¨nginxç›®å½•ä¸‹æœ‰sbinç›®å½•å…¶ä¸­å°±æœ‰å¯åŠ¨è„šæœ¬ã€‚</p></li><li><p>å¯åŠ¨æµ‹è¯•ï¼Œè¿›å…¥/usr/local/nginx/sbinæ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œæ‰§è¡Œå‘½ä»¤å¹¶æŸ¥çœ‹è¿›ç¨‹ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z sbin]# ./nginx<br>nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)<br>nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)<br>nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)<br>nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)<br>nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)<br>nginx: [emerg] still could not bind()<br>[root@iZ2zeh7ydg2bbydds175q0Z sbin]# ps -ef|grep nginx<br>root     10482 31417  0 11:13 pts/0    00:00:00 grep --color=auto nginx<br></code></pre></td></tr></table></figure></li><li><p>å‘ç°80ç«¯å£è¢«å ç”¨ï¼Œè¿›å…¥/usr/local/niginx/conf/nginx.confæ–‡ä»¶ä¿®æ”¹ç«¯å£å·ä¸º84ï¼ŒåŒæ—¶åœ¨é˜¿é‡Œäº‘æœåŠ¡å™¨å¼€æ”¾84ç«¯å£ã€‚</p></li><li><p>å†æ¬¡æµ‹è¯•å¯åŠ¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z ~]# cd /usr/local/nginx/sbin<br>[root@iZ2zeh7ydg2bbydds175q0Z sbin]# ./nginx<br>[root@iZ2zeh7ydg2bbydds175q0Z sbin]# ps -ef|grep nginx<br>root     11960     1  0 11:34 ?        00:00:00 nginx: master process ./nginx<br>nobody   11961 11960  0 11:34 ?        00:00:00 nginx: worker process<br>root     12966 12622  0 11:50 pts/2    00:00:00 grep --color=auto nginx<br></code></pre></td></tr></table></figure></li><li><p>é˜²ç«å¢™è®¾ç½®</p><ul><li><p>å¼€å¯é˜²ç«å¢™</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl start firewalld<br></code></pre></td></tr></table></figure></li><li><p>å…³é—­é˜²ç«å¢™</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl stop firewalld<br></code></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹å¼€æ”¾çš„ç«¯å£å·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">firewall-cmd --list-all<br></code></pre></td></tr></table></figure></li><li><p>è®¾ç½®å¼€æ”¾çš„ç«¯å£å·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo firewall-cmd --add-port=84/tcp --permanent<br></code></pre></td></tr></table></figure></li><li><p>é‡å¯é˜²ç«å¢™</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">firewall-cmd --reload<br></code></pre></td></tr></table></figure></li></ul></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>Nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Nginxç¬”è®°01-nginxç®€ä»‹</title>
    <link href="/posts/2021/01/23/Nginx%E7%AC%94%E8%AE%B001-nginx%E7%AE%80%E4%BB%8B/"/>
    <url>/posts/2021/01/23/Nginx%E7%AC%94%E8%AE%B001-nginx%E7%AE%80%E4%BB%8B/</url>
    
    <content type="html"><![CDATA[<h2 id="Nginxç®€ä»‹"><a href="#Nginxç®€ä»‹" class="headerlink" title="Nginxç®€ä»‹"></a>Nginxç®€ä»‹</h2><blockquote><p>Nginxæ¦‚è¿°</p></blockquote><p>Nginx (â€œengine xâ€)æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ HTTP å’Œåå‘ä»£ç†æœåŠ¡å™¨ ç‰¹ç‚¹æ˜¯å æœ‰å†…å­˜å°‘ï¼Œå¹¶å‘èƒ½åŠ›å¼ºï¼Œäº‹å®ä¸Š nginx çš„å¹¶å‘èƒ½åŠ›ç¡®å®åœ¨åŒç±»å‹çš„ç½‘é¡µæœåŠ¡å™¨ä¸­è¡¨ç°è¾ƒå¥½ï¼Œä¸­å›½å¤§é™†ä½¿ç”¨ nginxç½‘ç«™ç”¨æˆ·æœ‰ï¼šç™¾åº¦ã€äº¬ä¸œã€æ–°æµªã€ç½‘æ˜“ã€è…¾è®¯ã€æ·˜å®ç­‰ã€‚</p><blockquote><p>Nginxä½œä¸ºwebæœåŠ¡å™¨</p></blockquote><p>Nginxå¯ä»¥ä½œä¸ºé™æ€é¡µé¢çš„ web æœåŠ¡å™¨ï¼ŒåŒæ—¶è¿˜æ”¯æŒ CGI åè®®çš„åŠ¨æ€è¯­è¨€ï¼Œæ¯”å¦‚ perl ã€ phpç­‰ã€‚ä½†æ˜¯ä¸æ”¯æŒ java ã€‚ Java ç¨‹åºåªèƒ½é€šè¿‡ä¸ tomcat é…åˆå®Œæˆã€‚ Nginx ä¸“ä¸ºæ€§èƒ½ä¼˜åŒ–è€Œå¼€å‘ï¼Œæ€§èƒ½æ˜¯å…¶æœ€é‡è¦çš„è€ƒé‡ å®ç°ä¸Šéå¸¸æ³¨é‡æ•ˆç‡ ï¼Œèƒ½ç»å—é«˜è´Ÿè½½çš„è€ƒéªŒ æœ‰æŠ¥å‘Šè¡¨æ˜èƒ½æ”¯æŒé«˜è¾¾ 50,000 ä¸ªå¹¶å‘è¿æ¥æ•°ã€‚</p><blockquote><p>æ­£å‘ä»£ç†</p></blockquote><p>Nginxä¸ä»…å¯ä»¥åšåå‘ä»£ç†ï¼Œå®ç°è´Ÿè½½å‡è¡¡ï¼Œè¿˜èƒ½ç”¨ä½œæ­£å‘ä»£ç†æ¥è¿›è¡Œä¸Šç½‘ç­‰åŠŸèƒ½ã€‚</p><p>æ­£å‘ä»£ç†ï¼šå¦‚æœæŠŠå±€åŸŸç½‘å¤–çš„Internetæƒ³è±¡æˆä¸€ä¸ªå·¨å¤§çš„èµ„æºåº“ï¼Œåˆ™å±€åŸŸç½‘ä¸­çš„å®¢æˆ·ç«¯è¦è®¿é—®Internetï¼Œéœ€è¦é€šè¿‡ä»£ç†æœåŠ¡å™¨æ¥è®¿é—®ï¼Œè¿™ç§ä»£ç†æœåŠ¡å°±ç§°ä¸ºæ­£å‘ä»£ç†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Nginx%E7%AC%94%E8%AE%B001-nginx%E7%AE%80%E4%BB%8B/1.png" alt="æ­£å‘ä»£ç†"></p><blockquote><p>åå‘ä»£ç†</p></blockquote><p>åå‘ä»£ç†ï¼Œå…¶å®å®¢æˆ·ç«¯å¯¹ä»£ç†æ˜¯æ— æ„ŸçŸ¥çš„ï¼Œå› ä¸ºå®¢æˆ·ç«¯ä¸éœ€è¦ä»»ä½•é…ç½®å°±å¯ä»¥è®¿é—®ã€‚æˆ‘ä»¬åªéœ€è¦å°†è¯·æ±‚å‘é€åˆ°åå‘ä»£ç†æœåŠ¡å™¨ï¼Œç”±åå‘ä»£ç†æœåŠ¡å™¨å»é€‰æ‹©ç›®æ ‡æœåŠ¡å™¨è·å–æ•°æ®åï¼Œå†è¿”å›ç»™å®¢æˆ·ç«¯ã€‚æ­¤æ—¶åå‘ä»£ç†æœåŠ¡å™¨å’Œç›®æ ‡æœåŠ¡å™¨å¯¹å¤–å°±æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ï¼Œæš´éœ²çš„æ˜¯ä»£ç†æœåŠ¡å™¨åœ°å€ï¼Œéšè—äº†çœŸå®æœåŠ¡å™¨çš„IPåœ°å€ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Nginx%E7%AC%94%E8%AE%B001-nginx%E7%AE%80%E4%BB%8B/2.png" alt="åå‘ä»£ç†"></p><blockquote><p>è´Ÿè½½å‡è¡¡</p></blockquote><p>å®¢æˆ·ç«¯å‘é€å¤šä¸ªè¯·æ±‚åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å¤„ç†è¯·æ±‚ï¼Œæœ‰ä¸€äº›å¯èƒ½è¦ä¸æ•°æ®åº“è¿›è¡Œäº¤äº’ï¼ŒæœåŠ¡å™¨å¤„ç†å®Œæ¯•åï¼Œå†å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p><p>è¿™ç§æ¶æ„æ¨¡å¼å¯¹äºæ—©æœŸçš„ç³»ç»Ÿç›¸å¯¹å•ä¸€ï¼Œå¹¶å‘è¯·æ±‚ç›¸å¯¹è¾ƒå°‘çš„æƒ…å†µä¸‹æ˜¯æ¯”è¾ƒé€‚åˆçš„ï¼Œæˆæœ¬ä¹Ÿä½ã€‚ä½†æ˜¯éšç€ä¿¡æ¯æ•°é‡çš„ä¸æ–­å¢é•¿ï¼Œè®¿é—®é‡å’Œæ•°æ®é‡çš„é£é€Ÿå¢é•¿ï¼Œä»¥åŠç³»ç»Ÿä¸šåŠ¡çš„å¤æ‚åº¦å¢åŠ ï¼Œè¿™ç§æ¶æ„ä¼šé€ æˆæœåŠ¡å™¨ç›¸åº”å®¢æˆ·ç«¯çš„è¯·æ±‚æ—¥ç›Šç¼“æ…¢ï¼Œå¹¶å‘é‡ç‰¹åˆ«å¤§çš„æ—¶å€™ï¼Œè¿˜å®¹æ˜“é€ æˆæœåŠ¡å™¨ç›´æ¥å´©æºƒã€‚å¾ˆæ˜æ˜¾è¿™æ˜¯ç”±äºæœåŠ¡å™¨æ€§èƒ½çš„ç“¶é¢ˆé€ æˆçš„é—®é¢˜ï¼Œé‚£ä¹ˆå¦‚ä½•è§£å†³è¿™ç§æƒ…å†µå‘¢ï¼Ÿ</p><p>æˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„å¯èƒ½æ˜¯å‡çº§æœåŠ¡å™¨çš„é…ç½®ï¼Œæ¯”å¦‚æé«˜CPUæ‰§è¡Œé¢‘ç‡ï¼ŒåŠ å¤§å†…å­˜ç­‰æé«˜æœºå™¨çš„ç‰©ç†æ€§èƒ½æ¥è§£å†³æ­¤é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬çŸ¥é“æ‘©å°”å®šå¾‹çš„æ—¥ç›Šå¤±æ•ˆï¼Œç¡¬ä»¶çš„æ€§èƒ½æå‡å·²ç»ä¸èƒ½æ»¡è¶³æ—¥ç›Šæå‡çš„éœ€æ±‚äº†ã€‚æœ€æ˜æ˜¾çš„ä¸€ä¸ªä¾‹å­ï¼Œå¤©çŒ«åŒåä¸€å½“å¤©ï¼ŒæŸä¸ªçƒ­é”€å•†å“çš„ç¬æ—¶è®¿é—®é‡æ˜¯æå…¶åºå¤§çš„ï¼Œé‚£ä¹ˆç±»ä¼¼ä¸Šé¢çš„ç³»ç»Ÿæ¶æ„ï¼Œå°†æœºå™¨éƒ½å¢åŠ åˆ°ç°æœ‰çš„é¡¶çº§ç‰©ç†é…ç½®ï¼Œéƒ½æ˜¯ä¸èƒ½å¤Ÿæ»¡è¶³éœ€æ±‚çš„ã€‚é‚£ä¹ˆæ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p> ä¸Šé¢çš„åˆ†ææˆ‘ä»¬å»æ‰äº†å¢åŠ æœåŠ¡å™¨ç‰©ç†é…ç½®æ¥è§£å†³é—®é¢˜çš„åŠæ³•ï¼Œä¹Ÿå°±æ˜¯è¯´çºµå‘è§£å†³é—®é¢˜çš„åŠæ³•è¡Œä¸é€šäº†ï¼Œé‚£ä¹ˆæ¨ªå‘å¢åŠ æœåŠ¡å™¨çš„æ•°é‡å‘¢ï¼Ÿè¿™æ—¶å€™é›†ç¾¤çš„æ¦‚å¿µäº§ç”Ÿäº†ï¼Œå•ä¸ªæœåŠ¡å™¨è§£å†³ä¸äº†ï¼Œæˆ‘ä»¬å¢åŠ æœåŠ¡å™¨çš„æ•°é‡ï¼Œç„¶åå°†è¯·æ±‚åˆ†å‘åˆ°å„ä¸ªæœåŠ¡å™¨ä¸Šï¼Œå°†åŸå…ˆè¯·æ±‚é›†ä¸­åˆ°å•ä¸ªæœåŠ¡å™¨ä¸Šçš„æƒ…å†µæ”¹ä¸ºå°†è¯·æ±‚åˆ†å‘åˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šï¼Œå°†è´Ÿè½½åˆ†å‘åˆ°ä¸åŒçš„æœåŠ¡å™¨ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„<strong>è´Ÿè½½å‡</strong>è¡¡ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Nginx%E7%AC%94%E8%AE%B001-nginx%E7%AE%80%E4%BB%8B/3.png" alt="è´Ÿè½½å‡è¡¡"></p><blockquote><p>åŠ¨é™åˆ†ç¦»</p></blockquote><p>ä¸ºäº†åŠ å¿«ç½‘ç«™çš„è§£æé€Ÿåº¦ï¼Œå¯ä»¥æŠŠåŠ¨æ€é¡µé¢å’Œé™æ€é¡µé¢ç”±ä¸åŒçš„æœåŠ¡å™¨æ¥è§£æï¼ŒåŠ å¿«è§£æé€Ÿåº¦ï¼Œé™ä½åŸæ¥å•ä¸ªæœåŠ¡å™¨çš„å‹åŠ›ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Nginx%E7%AC%94%E8%AE%B001-nginx%E7%AE%80%E4%BB%8B/4.png" alt="åŠ¨é™åˆ†ç¦»"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ElasticSearchç¬”è®°09-SpringBooté›†æˆElasticSearch</title>
    <link href="/posts/2021/01/23/ElasticSearch%E7%AC%94%E8%AE%B009-SpringBoot%E9%9B%86%E6%88%90ElasticSearch/"/>
    <url>/posts/2021/01/23/ElasticSearch%E7%AC%94%E8%AE%B009-SpringBoot%E9%9B%86%E6%88%90ElasticSearch/</url>
    
    <content type="html"><![CDATA[<h2 id="SpringBooté›†æˆElasticSearch"><a href="#SpringBooté›†æˆElasticSearch" class="headerlink" title="SpringBooté›†æˆElasticSearch"></a>SpringBooté›†æˆElasticSearch</h2><blockquote><p>æ‰¾æ–‡æ¡£</p></blockquote><p>åœ¨å®˜ç½‘çš„æ–‡æ¡£ä¸­æ‰¾åˆ°<code>ElasticSearch CLients</code>ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°09-SpringBooté›†æˆElasticSearch/1.png" alt="ElasticSearch CLients" style="zoom:67%;"><p>ç‚¹è¿›å»ä¹‹åï¼Œé€‰æ‹©ç¬¬ä¸€ä¸ª Java REST Client</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°09-SpringBooté›†æˆElasticSearch/2.png" alt="Java REST Client" style="zoom:67%;"><p>æˆ‘ä»¬é€‰æ‹©é«˜çº§çš„å®¢æˆ·ç«¯ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°09-SpringBooté›†æˆElasticSearch/3.png" alt="é«˜çº§å®¢æˆ·ç«¯" style="zoom:67%;"><ol><li><p>æ‰¾åˆ°äº†åŸç”Ÿçš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.elasticsearch.client<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>elasticsearch-rest-high-level-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>7.10.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>æ‰¾å¯¹è±¡</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°09-SpringBooté›†æˆElasticSearch/4.png" alt="å¯¹è±¡" style="zoom:67%;"></li><li><p>åˆ†æè¿™ä¸ªç±»ä¸­çš„æ–¹æ³•å³å¯ã€‚</p></li></ol><blockquote><p>é…ç½®åŸºæœ¬çš„é¡¹ç›®</p></blockquote><ol><li><p>ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span><br><span class="hljs-comment">&lt;!-- è‡ªå®šä¹‰ESç‰ˆæœ¬ä¾èµ–,ä¿è¯å’Œæœ¬åœ°ä¸€è‡´ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">elasticsearch.version</span>&gt;</span>7.10.2<span class="hljs-tag">&lt;/<span class="hljs-name">elasticsearch.version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br><span class="hljs-comment">&lt;!-- elasticsearchä¾èµ– --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-elasticsearch<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-devtools<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>æ”¾åˆ°springä¸­å½“åšbean</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ElasticSearchConfig</span> </span>&#123;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> RestHighLevelClient <span class="hljs-title">restHighLevelClient</span><span class="hljs-params">()</span> </span>&#123;<br>        RestHighLevelClient client = <span class="hljs-keyword">new</span> RestHighLevelClient(<br>            RestClient.builder(<br>                <span class="hljs-keyword">new</span> HttpHost(<span class="hljs-string">&quot;localhost&quot;</span>, <span class="hljs-number">9200</span>, <span class="hljs-string">&quot;http&quot;</span>)));<br>        <span class="hljs-keyword">return</span> client;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AtroxEsApiApplicationTests</span> </span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> RestHighLevelClient restHighLevelClient;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">contextLoads</span><span class="hljs-params">()</span> </span>&#123;<br><br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li></ol><blockquote><p>å…³äºç´¢å¼•çš„APIæ“ä½œ</p></blockquote><ol><li><p>åˆ›å»ºç´¢å¼•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æµ‹è¯•ç´¢å¼•çš„åˆ›å»º</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testCreateIndex</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>    <span class="hljs-comment">// 1. åˆ›å»ºç´¢å¼•è¯·æ±‚</span><br>    CreateIndexRequest request = <span class="hljs-keyword">new</span> CreateIndexRequest(<span class="hljs-string">&quot;atrox_index&quot;</span>);<br>    <span class="hljs-comment">// 2. æ‰§è¡Œåˆ›å»ºè¯·æ±‚</span><br>    CreateIndexResponse createIndexResponse =<br>        client.indices().create(request, RequestOptions.DEFAULT);<br>    System.out.println(createIndexResponse);<br>&#125;<br></code></pre></td></tr></table></figure><p>ç»“æœï¼š</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°09-SpringBooté›†æˆElasticSearch/5.png" alt="ç»“æœ" style="zoom:67%;"></li><li><p>è·å–ç´¢å¼•ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æµ‹è¯•è·å–ç´¢å¼•ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testExistIndex</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>    GetIndexRequest request = <span class="hljs-keyword">new</span> GetIndexRequest(<span class="hljs-string">&quot;yonghu&quot;</span>);<br>    <span class="hljs-keyword">boolean</span> exists = client.indices().exists(request, RequestOptions.DEFAULT);<br>    System.out.println(exists);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>åˆ é™¤ç´¢å¼•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æµ‹è¯•åˆ é™¤ç´¢å¼•</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testDeleteIndex</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>    DeleteIndexRequest request = <span class="hljs-keyword">new</span> DeleteIndexRequest(<span class="hljs-string">&quot;atrox_index&quot;</span>);<br>    AcknowledgedResponse delete = client.indices().delete(request, RequestOptions.DEFAULT);<br>    System.out.println(delete.isAcknowledged());<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><blockquote><p>å…³äºæ–‡æ¡£çš„APIæ“ä½œ</p></blockquote><ol><li><p>æ·»åŠ æ–‡æ¡£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æµ‹è¯•æ·»åŠ æ–‡æ¡£</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testAddDocument</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>    <span class="hljs-comment">// åˆ›å»ºå¯¹è±¡</span><br>    User user = <span class="hljs-keyword">new</span> User(<span class="hljs-string">&quot;ä¹”å¨&quot;</span>, <span class="hljs-number">20</span>);<br>    <span class="hljs-comment">// åˆ›å»ºè¯·æ±‚</span><br>    IndexRequest request = <span class="hljs-keyword">new</span> IndexRequest(<span class="hljs-string">&quot;atrox_index&quot;</span>);<br>    <span class="hljs-comment">// è§„åˆ™ put/atrox_index/_doc/1</span><br>    request.id(<span class="hljs-string">&quot;1&quot;</span>);<br>    request.timeout(TimeValue.timeValueSeconds(<span class="hljs-number">1</span>));<br>    <span class="hljs-comment">// å°†æ•°æ®æ”¾å…¥è¯·æ±‚ï¼Œjsonæ•°æ®</span><br>    request.source(JSON.toJSONString(user), XContentType.JSON);<br>    <span class="hljs-comment">// å®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼Œè·å–å“åº”ç»“æœ</span><br>    IndexResponse indexResponse = client.index(request, RequestOptions.DEFAULT);<br>    System.out.println(indexResponse.toString());<br>    System.out.println(indexResponse.status());<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>è·å–æ–‡æ¡£ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// è·å–æ–‡æ¡£ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testExistDocument</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>    GetRequest getRequest = <span class="hljs-keyword">new</span> GetRequest(<span class="hljs-string">&quot;atrox_index&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>);<br>    <span class="hljs-comment">// ä¸è·å–è¿”å›çš„ _source çš„ä¸Šä¸‹æ–‡</span><br>    getRequest.fetchSourceContext(<span class="hljs-keyword">new</span> FetchSourceContext(<span class="hljs-keyword">false</span>));<br>    getRequest.storedFields(<span class="hljs-string">&quot;_none_&quot;</span>);<br>    <span class="hljs-keyword">boolean</span> exists = client.exists(getRequest, RequestOptions.DEFAULT);<br>    System.out.println(exists);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>è·å–æ–‡æ¡£çš„ä¿¡æ¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// è·å–æ–‡æ¡£çš„ä¿¡æ¯</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testGetDocument</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>    GetRequest getRequest = <span class="hljs-keyword">new</span> GetRequest(<span class="hljs-string">&quot;atrox_index&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>);<br>    GetResponse getResponse = client.get(getRequest, RequestOptions.DEFAULT);<br>    <span class="hljs-comment">// æ‰“å°æ–‡æ¡£å†…å®¹</span><br>    System.out.println(getResponse.getSourceAsString());<br>    System.out.println(getResponse);<br>&#125;<br></code></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">&#123;<span class="hljs-string">&quot;age&quot;</span>:20,<span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;ä¹”å¨&quot;</span>&#125;<br>&#123;<span class="hljs-string">&quot;_index&quot;</span>:<span class="hljs-string">&quot;atrox_index&quot;</span>,<span class="hljs-string">&quot;_type&quot;</span>:<span class="hljs-string">&quot;_doc&quot;</span>,<span class="hljs-string">&quot;_id&quot;</span>:<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-string">&quot;_version&quot;</span>:1,<span class="hljs-string">&quot;_seq_no&quot;</span>:0,<span class="hljs-string">&quot;_primary_term&quot;</span>:1,<span class="hljs-string">&quot;found&quot;</span>:<span class="hljs-literal">true</span>,<span class="hljs-string">&quot;_source&quot;</span>:&#123;<span class="hljs-string">&quot;age&quot;</span>:20,<span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;ä¹”å¨&quot;</span>&#125;&#125;<br></code></pre></td></tr></table></figure></li><li><p>æ›´æ–°æ–‡æ¡£çš„ä¿¡æ¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æ›´æ–°æ–‡æ¡£çš„ä¿¡æ¯</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testUpdateDocument</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>    UpdateRequest updateRequest = <span class="hljs-keyword">new</span> UpdateRequest(<span class="hljs-string">&quot;atrox_index&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>);<br>    updateRequest.timeout(<span class="hljs-string">&quot;1s&quot;</span>);<br>    User user = <span class="hljs-keyword">new</span> User(<span class="hljs-string">&quot;å‰‘é­”&quot;</span>, <span class="hljs-number">200</span>);<br>    updateRequest.doc(JSON.toJSONString(user),XContentType.JSON);<br>    UpdateResponse updateResponse = client.update(updateRequest, RequestOptions.DEFAULT);<br>    System.out.println(updateResponse.status());<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>åˆ é™¤æ–‡æ¡£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// åˆ é™¤æ–‡æ¡£</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testDeleteDocument</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>    DeleteRequest request = <span class="hljs-keyword">new</span> DeleteRequest(<span class="hljs-string">&quot;atrox_index&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>);<br>    request.timeout(<span class="hljs-string">&quot;1s&quot;</span>);<br>    DeleteResponse deleteResponse = client.delete(request, RequestOptions.DEFAULT);<br>    System.out.println(deleteResponse);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æ‰¹é‡æ’å…¥æ–‡æ¡£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// çœŸå®é¡¹ç›®ï¼šæ‰¹é‡æ’å…¥æ•°æ®</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testBulkRequest</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>    BulkRequest bulkRequest = <span class="hljs-keyword">new</span> BulkRequest();<br>    bulkRequest.timeout(<span class="hljs-string">&quot;10s&quot;</span>);<br>    ArrayList&lt;User&gt; userList = <span class="hljs-keyword">new</span> ArrayList&lt;User&gt;();<br>    userList.add(<span class="hljs-keyword">new</span> User(<span class="hljs-string">&quot;qiaowei1&quot;</span>,<span class="hljs-number">3</span>));<br>    userList.add(<span class="hljs-keyword">new</span> User(<span class="hljs-string">&quot;qiaowei2&quot;</span>,<span class="hljs-number">3</span>));<br>    userList.add(<span class="hljs-keyword">new</span> User(<span class="hljs-string">&quot;qiaowei3&quot;</span>,<span class="hljs-number">3</span>));<br>    userList.add(<span class="hljs-keyword">new</span> User(<span class="hljs-string">&quot;qiaowei4&quot;</span>,<span class="hljs-number">3</span>));<br>    userList.add(<span class="hljs-keyword">new</span> User(<span class="hljs-string">&quot;qiaowei5&quot;</span>,<span class="hljs-number">3</span>));<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; userList.size(); i++) &#123;<br>        bulkRequest.add(<br>            <span class="hljs-keyword">new</span> IndexRequest(<span class="hljs-string">&quot;atrox_index&quot;</span>)<br>            .id(<span class="hljs-string">&quot;&quot;</span>+(i+<span class="hljs-number">1</span>))<br>            .source(JSON.toJSONString(userList.get(i)),XContentType.JSON)<br>        );<br>    &#125;<br>    BulkResponse bulkResponse = client.bulk(bulkRequest, RequestOptions.DEFAULT);<br>    System.out.println(bulkResponse.hasFailures());<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æŸ¥è¯¢</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testSearch</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>    SearchRequest searchRequest = <span class="hljs-keyword">new</span> SearchRequest(<span class="hljs-string">&quot;atrox_index&quot;</span>);<br>    <span class="hljs-comment">// æ„å»ºæœç´¢æ¡ä»¶</span><br>    SearchSourceBuilder sourceBuilder = <span class="hljs-keyword">new</span> SearchSourceBuilder();<br>    <span class="hljs-comment">// å¯ä»¥ä½¿ç”¨ QueryBuilderså·¥å…·ç±»æ¥å®ç°æŸ¥è¯¢æ¡ä»¶</span><br>    <span class="hljs-comment">// åŒ¹é…æ‰€æœ‰</span><br>    <span class="hljs-comment">//MatchAllQueryBuilder matchAllQueryBuilder = QueryBuilders.matchAllQuery();</span><br>    TermQueryBuilder termQueryBuilder = QueryBuilders.termQuery(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;qiaowei1&quot;</span>);<br>    sourceBuilder.query(termQueryBuilder);<br>    sourceBuilder.highlighter();<br>    sourceBuilder.timeout(<span class="hljs-keyword">new</span> TimeValue(<span class="hljs-number">60</span>, TimeUnit.SECONDS));<br>    searchRequest.source(sourceBuilder);<br>    SearchResponse searchResponse = client.search(searchRequest, RequestOptions.DEFAULT);<br>    System.out.println(JSON.toJSONString(searchResponse.getHits()));<br>    System.out.println(<span class="hljs-string">&quot;============================&quot;</span>);<br>    <span class="hljs-keyword">for</span> (SearchHit documentFields : searchResponse.getHits().getHits()) &#123;<br>        System.out.println(documentFields.getSourceAsMap());<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">&#123;<span class="hljs-string">&quot;fragment&quot;</span>:<span class="hljs-literal">true</span>,<span class="hljs-string">&quot;hits&quot;</span>:[&#123;<span class="hljs-string">&quot;fields&quot;</span>:&#123;&#125;,<span class="hljs-string">&quot;fragment&quot;</span>:<span class="hljs-literal">false</span>,<span class="hljs-string">&quot;highlightFields&quot;</span>:&#123;&#125;,<span class="hljs-string">&quot;id&quot;</span>:<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-string">&quot;matchedQueries&quot;</span>:[],<span class="hljs-string">&quot;primaryTerm&quot;</span>:0,<span class="hljs-string">&quot;rawSortValues&quot;</span>:[],<span class="hljs-string">&quot;score&quot;</span>:1.3862942,<span class="hljs-string">&quot;seqNo&quot;</span>:-2,<span class="hljs-string">&quot;sortValues&quot;</span>:[],<span class="hljs-string">&quot;sourceAsMap&quot;</span>:&#123;<span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;qiaowei1&quot;</span>,<span class="hljs-string">&quot;age&quot;</span>:3&#125;,<span class="hljs-string">&quot;sourceAsString&quot;</span>:<span class="hljs-string">&quot;&#123;\&quot;age\&quot;:3,\&quot;name\&quot;:\&quot;qiaowei1\&quot;&#125;&quot;</span>,<span class="hljs-string">&quot;sourceRef&quot;</span>:&#123;<span class="hljs-string">&quot;fragment&quot;</span>:<span class="hljs-literal">true</span>&#125;,<span class="hljs-string">&quot;type&quot;</span>:<span class="hljs-string">&quot;_doc&quot;</span>,<span class="hljs-string">&quot;version&quot;</span>:-1&#125;],<span class="hljs-string">&quot;maxScore&quot;</span>:1.3862942,<span class="hljs-string">&quot;totalHits&quot;</span>:&#123;<span class="hljs-string">&quot;relation&quot;</span>:<span class="hljs-string">&quot;EQUAL_TO&quot;</span>,<span class="hljs-string">&quot;value&quot;</span>:1&#125;&#125;<br>============================<br>&#123;name=qiaowei1, age=3&#125;<br></code></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>ElasticSearch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ElasticSearchç¬”è®°08-æ–‡æ¡£åŸºæœ¬æ“ä½œ</title>
    <link href="/posts/2021/01/22/ElasticSearch%E7%AC%94%E8%AE%B008-%E6%96%87%E6%A1%A3%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/"/>
    <url>/posts/2021/01/22/ElasticSearch%E7%AC%94%E8%AE%B008-%E6%96%87%E6%A1%A3%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/</url>
    
    <content type="html"><![CDATA[<h2 id="å…³äºæ–‡æ¡£çš„æ“ä½œ"><a href="#å…³äºæ–‡æ¡£çš„æ“ä½œ" class="headerlink" title="å…³äºæ–‡æ¡£çš„æ“ä½œ"></a>å…³äºæ–‡æ¡£çš„æ“ä½œ</h2><blockquote><p>åŸºæœ¬æ“ä½œ</p></blockquote><ol><li><p><strong>æ·»åŠ æ•°æ®</strong>ï¼Œå‘yonghuç´¢å¼•è¡¨ä¸­æ·»åŠ ç±»å‹ä¸ºuserçš„ä¸€æ¡æ•°æ®ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json">PUT /yonghu/user/1<br>&#123;<br>  <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;ä¹”å¨&quot;</span>,<br>  <span class="hljs-attr">&quot;age&quot;</span>: <span class="hljs-number">20</span>,<br>  <span class="hljs-attr">&quot;desc&quot;</span>: <span class="hljs-string">&quot;simple code&quot;</span>,<br>  <span class="hljs-attr">&quot;tags&quot;</span>: [<span class="hljs-string">&quot;æŠ€æœ¯å®…&quot;</span>,<span class="hljs-string">&quot;è‡ªç‡ƒ&quot;</span>,<span class="hljs-string">&quot;LOL&quot;</span>]<br>&#125;<br></code></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°08-æ–‡æ¡£åŸºæœ¬æ“ä½œ/1.png" alt="æ·»åŠ æ•°æ®" style="zoom: 80%;"><p>åé¢ï¼Œå†æ·»åŠ ä¸¤æ¡æ•°æ®ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearch%E7%AC%94%E8%AE%B008-%E6%96%87%E6%A1%A3%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/data.png" alt="æ•°æ®"></p></li><li><p>è·å–æ•°æ®</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json">GET yonghu/user/1<br></code></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°08-æ–‡æ¡£åŸºæœ¬æ“ä½œ/get.png" alt="è·å–æ•°æ®" style="zoom:67%;"></li><li><p>æ›´æ–°æ•°æ® PUT</p><p>å°†3å·å‰‘é­”çš„nameæ›´æ–°ä¸ºatroxã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json">PUT /yonghu/user/3<br>&#123;<br>  <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;atrox&quot;</span>,<br>  <span class="hljs-attr">&quot;age&quot;</span>: <span class="hljs-number">3000</span>,<br>  <span class="hljs-attr">&quot;desc&quot;</span>: <span class="hljs-string">&quot;ç­ç»çš„æ­»å¯‚&quot;</span>,<br>  <span class="hljs-attr">&quot;tags&quot;</span>: [<span class="hljs-string">&quot;æš—è£”&quot;</span>,<span class="hljs-string">&quot;å‰‘æ°”&quot;</span>,<span class="hljs-string">&quot;å¤§ç­&quot;</span>]<br>&#125;<br></code></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°08-æ–‡æ¡£åŸºæœ¬æ“ä½œ/update.png" alt="æ›´æ–°æ•°æ®" style="zoom:67%;"></li><li><p>æ›´æ–°æ•°æ®POST  _update</p><p>å°†3å·atroxçš„nameæ”¹å›å‰‘é­”</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs json">POST yonghu/user/3/_update<br>&#123;<br>  <span class="hljs-attr">&quot;doc&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;å‰‘é­”&quot;</span>,<br>    <span class="hljs-attr">&quot;age&quot;</span>: <span class="hljs-number">3000</span>,<br>    <span class="hljs-attr">&quot;desc&quot;</span>: <span class="hljs-string">&quot;ç­ç»çš„æ­»å¯‚&quot;</span>,<br>    <span class="hljs-attr">&quot;tags&quot;</span>: [<span class="hljs-string">&quot;æš—è£”&quot;</span>,<span class="hljs-string">&quot;å‰‘æ°”&quot;</span>,<span class="hljs-string">&quot;å¤§ç­&quot;</span>]<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°08-æ–‡æ¡£åŸºæœ¬æ“ä½œ/update2.png" alt="æ›´æ–°" style="zoom:67%;"></li><li><p>ç®€å•çš„æ¡ä»¶æœç´¢</p><p><strong>æœç´¢nameæ˜¯å‰‘é­”çš„user</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°08-æ–‡æ¡£åŸºæœ¬æ“ä½œ/æŸ¥.png" alt="æŸ¥è¯¢" style="zoom:67%;"></li></ol><blockquote><p>å¤æ‚æ“ä½œ</p></blockquote><p><strong>ç®€å•çš„æ ¹æ®nameæŸ¥è¯¢</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°08-æ–‡æ¡£åŸºæœ¬æ“ä½œ/å¤æ‚.png" alt="å¤æ‚æŸ¥è¯¢" style="zoom: 67%;"><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°08-æ–‡æ¡£åŸºæœ¬æ“ä½œ/2.png" alt="æŸ¥è¯¢å‡ºä¸¤æ¡" style="zoom:67%;"><p><strong>åªæŸ¥çœ‹æƒ³è¦çš„å­—æ®µ</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°08-æ–‡æ¡£åŸºæœ¬æ“ä½œ/3.png" alt="è¿‡æ»¤å­—æ®µ" style="zoom:67%;"><p><strong>æ ¹æ®å¹´é¾„æ’åºæŸ¥è¯¢</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°08-æ–‡æ¡£åŸºæœ¬æ“ä½œ/sort.png" alt="æ’åº" style="zoom:67%;"><p><strong>åˆ†é¡µæŸ¥è¯¢</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°08-æ–‡æ¡£åŸºæœ¬æ“ä½œ/4.png" alt="åˆ†é¡µ" style="zoom:67%;"><p><strong>å¸ƒå°”å€¼æŸ¥è¯¢</strong>ï¼šå¤šæ¡ä»¶æŸ¥è¯¢</p><ul><li>mustï¼ˆç›¸å½“äºandï¼‰ï¼Œæ‰€æœ‰çš„æ¡ä»¶éƒ½è¦ç¬¦åˆ</li></ul><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°08-æ–‡æ¡£åŸºæœ¬æ“ä½œ/5.png" alt="å¸ƒå°”å€¼æŸ¥è¯¢" style="zoom:67%;"><ul><li><p>shouldï¼ˆç›¸å½“äºorï¼‰ï¼Œç¬¦åˆæŸå‡ ä¸ªæ¡ä»¶å³å¯</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°08-æ–‡æ¡£åŸºæœ¬æ“ä½œ/6.png" alt="should" style="zoom:67%;"></li><li><p>must_notï¼ˆç›¸å½“äºnotï¼‰</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°08-æ–‡æ¡£åŸºæœ¬æ“ä½œ/not.png" alt="must_not" style="zoom:67%;"></li><li><p>è¿‡æ»¤å™¨filter</p><p>gt å¤§äº<br>gte å¤§äºç­‰äº<br>lt å°äº<br>lte å°äºç­‰äº</p><p> <strong>æŸ¥è¯¢å¹´é¾„å¤§äº2000å²ä¸”nameä¸æ˜¯å¤§å¸é©¬çš„ç”¨æˆ·</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°08-æ–‡æ¡£åŸºæœ¬æ“ä½œ/7.png" alt="è¿‡æ»¤" style="zoom:67%;"></li><li><p>åŒ¹é…å¤šä¸ªæ¡ä»¶</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°08-æ–‡æ¡£åŸºæœ¬æ“ä½œ/8.png" alt="å¤šæ¡ä»¶" style="zoom:67%;"></li></ul><blockquote><p>ç²¾ç¡®æŸ¥è¯¢</p></blockquote><p>termæŸ¥è¯¢æ—¶ç›´æ¥é€šè¿‡å€’æ’ç´¢å¼•æŒ‡å®šçš„è¯æ¡ç²¾ç¡®æŸ¥æ‰¾çš„ã€‚</p><p><strong>å…³äºåˆ†è¯</strong>ï¼š</p><ul><li>termï¼Œç›´æ¥æŸ¥è¯¢ç²¾ç¡®çš„</li><li>matchï¼Œä¼šä½¿ç”¨åˆ†è¯å™¨è§£æï¼ï¼ˆå…ˆåˆ†ææ–‡æ¡£ï¼Œç„¶ååœ¨é€šè¿‡åˆ†æçš„æ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢ï¼‰</li></ul><p><strong>ä¸¤ä¸ªç±»å‹ï¼štext keyword</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°08-æ–‡æ¡£åŸºæœ¬æ“ä½œ/9.png" alt="keyword" style="zoom:67%;"><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°08-æ–‡æ¡£åŸºæœ¬æ“ä½œ/10.png" alt="text" style="zoom:67%;"><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°08-æ–‡æ¡£åŸºæœ¬æ“ä½œ/11.png" alt="keywordå­—æ®µä¸ä¼šè¢«åˆ†è¯å™¨è§£æ" style="zoom:67%;"><blockquote><p>å¤šä¸ªå€¼åŒ¹é…ç²¾ç¡®æŸ¥è¯¢</p></blockquote><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°08-æ–‡æ¡£åŸºæœ¬æ“ä½œ/12.png" alt="å¤šå€¼åŒ¹é…" style="zoom:67%;"><blockquote><p>é«˜äº®æŸ¥è¯¢</p></blockquote><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°08-æ–‡æ¡£åŸºæœ¬æ“ä½œ/13.png" alt="é«˜äº®" style="zoom:67%;"><p>è‡ªå®šä¹‰é«˜äº®æ ·å¼</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/ElasticSearchç¬”è®°08-æ–‡æ¡£åŸºæœ¬æ“ä½œ/14.png" alt="è‡ªå®šä¹‰é«˜äº®æ ·å¼" style="zoom:67%;">]]></content>
    
    
    
    <tags>
      
      <tag>ElasticSearch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ElasticSearchç¬”è®°07-ç´¢å¼•åŸºæœ¬æ“ä½œ</title>
    <link href="/posts/2021/01/22/ElasticSearch%E7%AC%94%E8%AE%B007-%E7%B4%A2%E5%BC%95%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/"/>
    <url>/posts/2021/01/22/ElasticSearch%E7%AC%94%E8%AE%B007-%E7%B4%A2%E5%BC%95%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/</url>
    
    <content type="html"><![CDATA[<h2 id="RESTé£æ ¼è¯´æ˜"><a href="#RESTé£æ ¼è¯´æ˜" class="headerlink" title="RESTé£æ ¼è¯´æ˜"></a>RESTé£æ ¼è¯´æ˜</h2><blockquote><p>åŸºæœ¬Resté£æ ¼å‘½ä»¤è¯´æ˜</p></blockquote><table><thead><tr><th>method</th><th>urlåœ°å€</th><th>æè¿°</th></tr></thead><tbody><tr><td>PUT</td><td>127.0.01:9200/ç´¢å¼•åç§°/_create/æ–‡æ¡£id</td><td>åˆ›å»ºæ–‡æ¡£ï¼ˆæŒ‡å®šidï¼‰</td></tr><tr><td>POST</td><td>127.0.01:9200/ç´¢å¼•åç§°/_doc</td><td>åˆ›å»ºæ–‡æ¡£</td></tr><tr><td>POST</td><td>127.0.01:9200/ç´¢å¼•åç§°/_update/æ–‡æ¡£id</td><td>ä¿®æ”¹æ–‡æ¡£</td></tr><tr><td>DELETE</td><td>127.0.01:9200/ç´¢å¼•åç§°</td><td>åˆ é™¤ç´¢å¼•</td></tr><tr><td>DELETE</td><td>127.0.01:9200/ç´¢å¼•åç§°/_doc/æ–‡æ¡£id</td><td>åˆ é™¤æ–‡æ¡£</td></tr></tbody></table><blockquote><p>ç´¢å¼•åŸºæœ¬æ“ä½œ</p></blockquote><ol><li><p>åˆ›å»ºä¸€ä¸ªç´¢å¼•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">PUT /ç´¢å¼•å/~ç±»å‹å~/æ–‡æ¡£id<br>&#123;è¯·æ±‚ä½“&#125;<br></code></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°07-ç´¢å¼•åŸºæœ¬æ“ä½œ/åˆ›å»ºç´¢å¼•.png" alt="åˆ›å»ºç´¢å¼•" style="zoom: 67%;"><p>åœ¨elasticsearch-headä¸­æŸ¥çœ‹è¯¥ç´¢å¼•çš„æ·»åŠ æ•°æ®ï¼Œè¿™å°±æ˜¯å¯ä»¥å½“åšæ•°æ®åº“å­¦ä¹ çš„åŸå› ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°07-ç´¢å¼•åŸºæœ¬æ“ä½œ/æŸ¥çœ‹ç´¢å¼•.png" alt="åˆ›å»ºç´¢å¼•" style="zoom: 67%;"></li><li><p>é‚£ä¹ˆnameè¿™ä¸ªå­—æ®µç”¨ä¸ç”¨æŒ‡å®šç±»å‹å‘¢ï¼Ÿæ¯•ç«Ÿæˆ‘ä»¬å…³ç³»å‹æ•°æ®åº“æ˜¯éœ€è¦æŒ‡å®šçš„ã€‚</p><ul><li>å­—ç¬¦ä¸²ç±»å‹ï¼štextã€keyword</li><li>æ•°å€¼ç±»å‹ï¼šlongã€integerã€shortã€byteã€doubleã€floatã€halfã€scaled float</li><li>æ—¥æœŸç±»å‹ï¼šdate</li><li>å¸ƒå°”å€¼ç±»å‹ï¼šboolean</li><li>äºŒè¿›åˆ¶ç±»å‹ï¼šbinary</li><li>ç­‰ç­‰ã€‚ã€‚ã€‚</li></ul></li><li><p>åˆ›å»ºç´¢å¼•æ—¶ï¼ŒæŒ‡å®šå­—æ®µçš„ç±»å‹ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°07-ç´¢å¼•åŸºæœ¬æ“ä½œ/æŒ‡å®šç±»å‹.png" alt="æŒ‡å®šç±»å‹" style="zoom: 67%;"></li><li><p>é€šè¿‡GETè¯·æ±‚è·å–ç´¢å¼•çš„ä¿¡æ¯ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°07-ç´¢å¼•åŸºæœ¬æ“ä½œ/ç´¢å¼•ä¿¡æ¯.png" alt="ç´¢å¼•ä¿¡æ¯" style="zoom:67%;"></li><li><p>æ·»åŠ æ•°æ®åï¼ŒæŸ¥çœ‹é»˜è®¤çš„å­—æ®µç±»å‹</p><p><strong>æ·»åŠ æ•°æ®</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°07-ç´¢å¼•åŸºæœ¬æ“ä½œ/é»˜è®¤ä¿¡æ¯.png" alt="åˆ›å»ºç´¢å¼•æ·»åŠ æ•°æ®" style="zoom:67%;"><p><strong>å¦‚æœè‡ªå·±çš„æ–‡æ¡£å­—æ®µæ²¡æœ‰æŒ‡å®šï¼Œé‚£ä¹ˆESå°±ä¼šç»™æˆ‘ä»¬é»˜è®¤é…ç½®å­—æ®µç±»å‹</strong></p></li></ol><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°07-ç´¢å¼•åŸºæœ¬æ“ä½œ/é»˜è®¤.png" alt="é»˜è®¤ç±»å‹" style="zoom:67%;"><ol start="7"><li><p>æ‰©å±•ï¼šè·å¾—elasticsearchçš„ä¸€äº›ä¿¡æ¯ã€‚</p><p><strong>è·å¾—å¥åº·å€¼</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°07-ç´¢å¼•åŸºæœ¬æ“ä½œ/health.png" alt="å¥åº·å€¼" style="zoom:67%;"><p><strong>æŸ¥çœ‹ç´¢å¼•çš„ä¿¡æ¯</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°07-ç´¢å¼•åŸºæœ¬æ“ä½œ/info.png" alt="ç´¢å¼•ä¿¡æ¯" style="zoom:80%;"></li><li><p>ä¿®æ”¹ï¼šæäº¤è¿˜æ˜¯ä½¿ç”¨PUTï¼Œç„¶åè¦†ç›–</p><p><strong>æ›¾ç»çš„åŠæ³•</strong>ï¼šè¿˜æ˜¯å‘test3ç´¢å¼•æ·»åŠ idä¸º1çš„æ•°æ®ï¼Œå­—æ®µå€¼æ”¹å˜ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°07-ç´¢å¼•åŸºæœ¬æ“ä½œ/update1.png" alt="æ–¹æ³•1" style="zoom:67%;"><p><strong>ç°åœ¨çš„æ–¹æ³•</strong>ï¼šä½¿ç”¨POSTæ–¹æ³•ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°07-ç´¢å¼•åŸºæœ¬æ“ä½œ/update2.png" alt="æ–¹æ³•äºŒ" style="zoom:67%;"></li><li><p>åˆ é™¤ç´¢å¼•ï¼šæ ¹æ®è¯·æ±‚åˆ¤æ–­æ˜¯åˆ é™¤ç´¢å¼•è¿˜æ˜¯åˆ é™¤æ–‡æ¡£ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°07-ç´¢å¼•åŸºæœ¬æ“ä½œ/delete.png" alt="åˆ é™¤ç´¢å¼•" style="zoom:67%;"></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>ElasticSearch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ElasticSearchç¬”è®°06-IKåˆ†è¯å™¨æ’ä»¶</title>
    <link href="/posts/2021/01/22/ElasticSearch%E7%AC%94%E8%AE%B006-IK%E5%88%86%E8%AF%8D%E5%99%A8%E6%8F%92%E4%BB%B6/"/>
    <url>/posts/2021/01/22/ElasticSearch%E7%AC%94%E8%AE%B006-IK%E5%88%86%E8%AF%8D%E5%99%A8%E6%8F%92%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h2 id="IKåˆ†è¯å™¨æ’ä»¶"><a href="#IKåˆ†è¯å™¨æ’ä»¶" class="headerlink" title="IKåˆ†è¯å™¨æ’ä»¶"></a>IKåˆ†è¯å™¨æ’ä»¶</h2><blockquote><p>æ¦‚å¿µ</p></blockquote><p>åˆ†è¯âˆ¶å³æŠŠä¸€æ®µä¸­æ–‡æˆ–è€…åˆ«çš„åˆ’åˆ†æˆä¸€ä¸ªä¸ªçš„å…³é”®å­—ï¼Œæˆ‘ä»¬åœ¨æœç´¢æ—¶å€™ä¼šæŠŠè‡ªå·±çš„ä¿¡æ¯è¿›è¡Œåˆ†è¯ï¼Œä¼šæŠŠæ•°æ®åº“ä¸­æˆ–è€…ç´¢å¼•åº“ä¸­çš„æ•°æ®è¿›è¡Œåˆ†è¯ï¼Œç„¶åè¿›è¡Œä¸€ä¸ªåŒ¹é…æ“ä½œï¼Œé»˜è®¤çš„ä¸­æ–‡åˆ†è¯æ˜¯å°†æ¯ä¸ªå­—çœ‹æˆä¸€ä¸ªè¯ï¼Œæ¯”å¦‚â€œâ€æˆ‘çˆ±ç‹‚ç¥â€ä¼šè¢«åˆ†ä¸ºâ€æˆ‘â€âˆµâ€çˆ±â€â€ç‹‚â€â€ç¥â€ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸ç¬¦åˆè¦æ±‚çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å®‰è£…ä¸­æ–‡åˆ†è¯å™¨ikæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>IKæä¾›äº†ä¸¤ä¸ªåˆ†è¯ç®—æ³•: ik smartå’Œik_max_wordï¼Œå…¶ä¸­ ik_smartä¸ºæœ€å°‘åˆ‡åˆ†ï¼Œik_max_wordä¸ºæœ€ç»†ç²’åº¦åˆ’åˆ†ï¼Œä¸€ä¼šæˆ‘ä»¬æµ‹è¯•ã€‚</p><blockquote><p>å®‰è£…</p></blockquote><ol><li><p>ä¸‹è½½åœ°å€ï¼š<a href="https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.10.2/elasticsearch-analysis-ik-7.10.2.zip">https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.10.2/elasticsearch-analysis-ik-7.10.2.zip</a></p></li><li><p>ä¸‹è½½å®Œæ¯•åï¼Œè§£å‹ï¼Œæ”¾å…¥åˆ°æˆ‘ä»¬çš„elasticsearchæ’ä»¶å³å¯ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°06-IKåˆ†è¯å™¨æ’ä»¶/unzip.png" alt="è§£å‹" style="zoom:80%;"></li><li><p>é‡å¯è§‚å¯ŸES</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearch%E7%AC%94%E8%AE%B006-IK%E5%88%86%E8%AF%8D%E5%99%A8%E6%8F%92%E4%BB%B6/1.png" alt="åŠ è½½IKæ’ä»¶"></p></li><li><p>elasticsearch-plugin å¯ä»¥é€šè¿‡è¿™ä¸ªå‘½ä»¤æ¥æŸ¥çœ‹åŠ è½½çš„æ’ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">E:\environment\elasticsearch\elasticsearch-7.10.2\bin&gt;elasticsearch-plugin list<br>future versions of Elasticsearch will require Java 11; your Java version from [D:\tool\java-1.8.0-openjdk-1.8.0.252-2.b09.redhat.windows.x86_64\jre] does not meet this requirement<br>elastricsearch-analysis-ik-7.10.2<br></code></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨Kibanaæµ‹è¯•ã€‚</p><p><strong>ik_smart</strong>ï¼šæœ€å°åˆ‡åˆ†</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°06-IKåˆ†è¯å™¨æ’ä»¶/smart.png" alt="æœ€å°åˆ’åˆ†" style="zoom:75%;"><p><strong>ik_max_word</strong>ï¼šæœ€ç»†ç²’åº¦åˆ’åˆ†ï¼ç©·å°½è¯åº“çš„å¯èƒ½ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°06-IKåˆ†è¯å™¨æ’ä»¶/max.png" alt="æœ€ç»†ç²’åº¦åˆ’åˆ†" style="zoom:80%;"></li></ol><blockquote><p>IKåˆ†è¯å™¨å¢åŠ è‡ªå·±çš„é…ç½®ï¼šè‡ªå·±é€ çš„è¯éœ€è¦è‡ªå·±åŠ åˆ°å­—å…¸ä¸­</p></blockquote><ol><li><p>åœ¨Ikåˆ†è¯å™¨æ’ä»¶çš„é…ç½®æ–‡ä»¶ä¸­ç‚¹å¼€<code>IKAnalyzer.cfg.xml</code>ï¼Œè¿›è¡Œé…ç½®    </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">properties</span> <span class="hljs-meta-keyword">SYSTEM</span> <span class="hljs-meta-string">&quot;http://java.sun.com/dtd/properties.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">comment</span>&gt;</span>IK Analyzer æ‰©å±•é…ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">comment</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--ç”¨æˆ·å¯ä»¥åœ¨è¿™é‡Œé…ç½®è‡ªå·±çš„æ‰©å±•å­—å…¸ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;ext_dict&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--ç”¨æˆ·å¯ä»¥åœ¨è¿™é‡Œé…ç½®è‡ªå·±çš„æ‰©å±•åœæ­¢è¯å­—å…¸--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;ext_stopwords&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--ç”¨æˆ·å¯ä»¥åœ¨è¿™é‡Œé…ç½®è¿œç¨‹æ‰©å±•å­—å…¸ --&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;entry key=&quot;remote_ext_dict&quot;&gt;words_location&lt;/entry&gt; --&gt;</span><br>    <span class="hljs-comment">&lt;!--ç”¨æˆ·å¯ä»¥åœ¨è¿™é‡Œé…ç½®è¿œç¨‹æ‰©å±•åœæ­¢è¯å­—å…¸--&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;entry key=&quot;remote_ext_stopwords&quot;&gt;words_location&lt;/entry&gt; --&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>æˆ‘ä»¬è¦å»å»ºç«‹è‡ªå·±çš„è¯å…¸ï¼Œæ–°å»º<code>atrox.dic</code></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°06-IKåˆ†è¯å™¨æ’ä»¶/dic.png" alt="å»ºç«‹è‡ªå·±çš„è¯å…¸" style="zoom:80%;"></li><li><p>åœ¨<code>IKAnalyzer.cfg.xml</code>é…ç½®è‡ªå·±çš„æ‰©å±•å­—å…¸</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">comment</span>&gt;</span>IK Analyzer æ‰©å±•é…ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">comment</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--ç”¨æˆ·å¯ä»¥åœ¨è¿™é‡Œé…ç½®è‡ªå·±çš„æ‰©å±•å­—å…¸ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;ext_dict&quot;</span>&gt;</span>atrox.dic<span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>é‡å¯ESä¹‹å‰ï¼Œåˆ†è¯<code>æ‚Ÿäº†ä¸ªç©º</code>æ•ˆæœï¼š</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°06-IKåˆ†è¯å™¨æ’ä»¶/2.png" alt="åˆ†è¯" style="zoom:80%;"></li><li><p>é‡å¯ESä¹‹åï¼Œåˆ†è¯<code>æ‚Ÿäº†ä¸ªç©º</code>æ•ˆæœï¼š</p><p>å’Œä¸Šé¢ä¸€æ ·ï¼Œå‡ºé”™äº†ï¼Œä½†æ˜¯æš‚æ—¶æ‰¾ä¸åˆ°åŸå› ã€‚</p></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>ElasticSearch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ElasticSearchç¬”è®°04-ESæ ¸å¿ƒæ¦‚å¿µ</title>
    <link href="/posts/2021/01/22/ElasticSearch%E7%AC%94%E8%AE%B005-ES%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5/"/>
    <url>/posts/2021/01/22/ElasticSearch%E7%AC%94%E8%AE%B005-ES%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5/</url>
    
    <content type="html"><![CDATA[<h2 id="ElasticSearchæ ¸å¿ƒæ¦‚å¿µ"><a href="#ElasticSearchæ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="ElasticSearchæ ¸å¿ƒæ¦‚å¿µ"></a>ElasticSearchæ ¸å¿ƒæ¦‚å¿µ</h2><blockquote><p>æ¦‚è¿°</p></blockquote><p>åœ¨å‰é¢çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬æŒæ¡äº†esæ˜¯ä»€ä¹ˆï¼ŒåŒæ—¶ä¹ŸæŠŠesçš„æœåŠ¡å·²ç»å®‰è£…å¯åŠ¨ï¼Œé‚£ä¹ˆesæ˜¯å¦‚ä½•å»å­˜å‚¨æ•°æ®ï¼Œæ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆï¼Œåˆæ˜¯å¦‚ä½•å®ç°æœç´¢çš„å‘¢ï¼Ÿæˆ‘ä»¬å…ˆæ¥èŠèŠElasticsearchçš„ç›¸å…³æ¦‚å¿µå§ï¼</p><p><strong>é›†ç¾¤,èŠ‚ç‚¹,ç´¢å¼•,ç±»å‹,æ–‡æ¡£,åˆ†ç‰‡,æ˜ å°„æ˜¯ä»€ä¹ˆã€‚</strong></p><p>elasticsearchæ˜¯é¢å‘æ–‡æ¡£çš„ï¼Œå…³ç³»è¡Œæ•°æ®åº“å’Œelasticsearchå®¢è§‚çš„å¯¹æ¯”!ä¸€åˆ‡éƒ½æ˜¯jsonã€‚</p><table><thead><tr><th>ReationalDB</th><th>ElasticSearch</th></tr></thead><tbody><tr><td>æ•°æ®åº“ï¼ˆdatabaseï¼‰</td><td>ç´¢å¼•ï¼ˆindicesï¼‰</td></tr><tr><td>è¡¨ï¼ˆtablesï¼‰</td><td>typesï¼ˆ7ç‰ˆæœ¬é›†åä¼šè¢«æŠ›å¼ƒï¼‰</td></tr><tr><td>è¡Œï¼ˆrowsï¼‰</td><td>documents</td></tr><tr><td>å­—æ®µï¼ˆcolumnsï¼‰</td><td>fields</td></tr></tbody></table><p><strong>elasticsearch(é›†ç¾¤)ä¸­å¯ä»¥åŒ…å«å¤šä¸ªç´¢å¼•(æ•°æ®åº“)ï¼Œæ¯ä¸ªç´¢å¼•ä¸­å¯ä»¥åŒ…å«å¤šä¸ªç±»å‹(è¡¨)ï¼Œæ¯ä¸ªç±»å‹å…ˆåˆåŒ…å«å¤šä¸ªæ–‡æ¡£(è¡Œ)ï¼Œæ¯ä¸ªæ–‡æ¡£ä¸­åˆåŒ…å«å¤šä¸ªå­—æ®µ(åˆ—)ã€‚</strong></p><blockquote><p>ç‰©ç†è®¾è®¡</p></blockquote><p>elasticsearchåœ¨åå°æŠŠæ¯ä¸ªç´¢å¼•åˆ’åˆ†æˆå¤šä¸ªåˆ†ç‰‡ï¼Œæ¯ä¸ªåˆ†ç‰‡å¯ä»¥åœ¨é›†ç¾¤ä¸­çš„ä¸åŒæœåŠ¡å™¨é—´è¿ç§»ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°05-ESæ ¸å¿ƒæ¦‚å¿µ/1.png" alt="é›†ç¾¤" style="zoom:80%;"><blockquote><p>é€»è¾‘è®¾è®¡</p></blockquote><p>ä¸€ä¸ªç´¢å¼•ç±»å‹ä¸­ï¼ŒåŒ…å«å¤šä¸ªæ–‡æ¡£ã€‚æ¯”å¦‚æ‰€æ–‡æ¡£1ã€æ–‡æ¡£2ã€‚å½“æˆ‘ä»¬ç´¢å¼•ä¸€ç¯‡æ–‡ç« æ—¶ï¼Œå¯ä»¥é€šè¿‡è¿™æ ·çš„ä¸€å„é¡ºåºæ‰¾åˆ°å®ƒ:ç´¢å¼•&gt;ç±»å‹</p><p>æ–‡æ¡£+idï¼Œé€šè¿‡è¿™ä¸ªç»„åˆæˆ‘ä»¬å°±èƒ½ç´¢å¼•åˆ°æŸä¸ªå…·ä½“çš„æ–‡æ¡£.ã€‚æ³¨æ„:ï¼šidä¸å¿…æ˜¯æ•´æ•°ï¼Œå®é™…ä¸Šä»–æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸².</p><table><thead><tr><th>user</th><th>name</th><th>age</th></tr></thead><tbody><tr><td>1</td><td>qiaowei</td><td>20</td></tr><tr><td>2</td><td>zhangsan</td><td>20</td></tr><tr><td>3</td><td>â€¦</td><td>â€¦</td></tr></tbody></table><p>ä¹‹å‰è¯´elasticsearchæ˜¯é¢å‘æ–‡æ¡£çš„ï¼Œnameå°±ä¹Ÿä¸ºè¿™ç´¢å¼•å’Œæœç´¢æ•°æ®çš„æœ€å°å•ä½æ˜¯æ–‡æ¡£ï¼Œelasticsearchä¸­ï¼Œæ–‡æ¡£æœ‰å‡ ä¸ªé‡è¦å±æ€§:</p><ul><li><p>è‡ªæˆ‘åŒ…å«ï¼Œä¸€ç¯‡æ–‡æ¡£åŒæ—¶åŒ…å«å­—æ®µå’Œå¯¹åº”å€¼ï¼Œä¹Ÿå°±æ˜¯åŒæ—¶åŒ…å«keyï¼Œvalueã€‚</p></li><li><p>å¯ä»¥æ˜¯å±‚æ¬¡å‹çš„ï¼Œä¸€ä¸ªæ–‡æ¡£ä¸­åŒ…å«æ–‡æ¡£ï¼Œå¤æ‚çš„é€»è¾‘å®ä½“å°±æ˜¯è¿™ä¹ˆæ¥çš„ã€‚</p></li><li><p>çµæ´»çš„ç»“æ„ï¼Œæ–‡æ¡£ä¸ä¾èµ–é¢„å…ˆå®šä¹‰çš„æ¨¡å¼ï¼Œæˆ‘ä»¬çŸ¥é“å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œè¦æå‰å®šä¹‰å­—æ®µæ‰èƒ½ä½¿ç”¨ï¼Œåœ¨elasticsearchä¸­ï¼Œå¯¹äºå­—æ®µæ˜¯éå¸¸çµæ´»çš„ï¼Œæœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å¿½ç•¥è¯¥å­—æ®µï¼Œæˆ–è€…åŠ¨æ€çš„æ·»åŠ ä¸€ä¸ªæ–°çš„å­—æ®µã€‚</p></li></ul><p>å°½ç®¡æˆ‘ä»¬å¯ä»¥éšæ„çš„æ–°å¢æˆ–è€…å¿½ç•¥æŸä¸ªå­—æ®µï¼Œä½†æ˜¯ï¼Œæ¯ä¸ªå­—æ®µçš„ç±»å‹éå¸¸é‡è¦ã€‚æ¯”å¦‚ä¸€ä¸ªå¹´é¾„å­—æ®µç±»å‹ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥æ˜¯æ•´å‹ã€‚å› ä¸ºelasticsearchä¼šä¿å­˜å­—æ®µå’Œç±»å‹ä¹‹é—´çš„æ˜ å°„åŠå…¶ä»–çš„è®¾ç½®ã€‚è¿™ç§æ˜ å°„å…·ä½“åˆ°æ¯ä¸ªæ˜ å°„çš„æ¯ç§ç±»å‹ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨elasticsearchä¸­ç±»å‹æœ‰æ—¶å€™ä¹Ÿç§°ä¸ºæ˜ å°„ç±»å‹ã€‚</p><blockquote><p>ç±»å‹</p></blockquote><p>ç±»å‹æ˜¯æ–‡æ¡£çš„é€»è¾‘å®¹å™¨ï¼Œå°±åƒå…³ç³»å‹æ•°æ®åº“ä¸€æ ·ï¼Œè¡¨æ ¼æ˜¯è¡Œçš„å®¹å™¨ã€‚ç±»å‹ä¸­å¯¹äºå­—æ®µçš„å®šä¹‰ç§°ä¸ºæ˜ å°„ï¼Œæ¯”å¦‚nameæ˜ å°„ä¸ºå­—ç¬¦ä¸²ç±»å‹ã€‚æˆ‘ä»¬è¯´æ–‡æ¡£æ˜¯æ— æ¨¡å¼çš„ï¼Œä»–ä»¬ä¸éœ€è¦æ‹¥æœ‰æ˜ å°„ä¸­æ‰€å®šä¹‰çš„æ‰€æœ‰å­—æ®µï¼Œæ¯”å¦‚æ–°å¢ä¸€ä¸ªå­—æ®µï¼Œé‚£ä¹ˆelasticsearchæ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Ÿ</p><p>elasticsearchä¼šè‡ªåŠ¨çš„å°†æ–°çš„å­—æ®µåŠ å…¥æ˜ å°„ï¼Œä½†æ˜¯è¿™ä¸ªå­—æ®µçš„ä¸ç¡®å®šå®ƒæ˜¯ä»€ä¹ˆç±»å‹ï¼Œelasticsearchå°±å¼€å§‹çŒœã€‚å¦‚æœè¿™ä¸ªå€¼æ˜¯18ï¼Œé‚£ä¹ˆelasticsearchä¼šè®¤ä¸ºä»–æ˜¯æ•´å‹ã€‚ä½†æ˜¯elasticsearchä¹Ÿå¯èƒ½çŒœä¸å¯¹ï¼Œæ‰€ä»¥æœ€å®‰å…¨çš„æ–¹å¼å°±æ˜¯æå‰å®šä¹‰å¥½æ‰€éœ€è¦çš„æ˜ å°„ï¼Œè¿™ç‚¹è·Ÿå…³ç³»å‹æ•°æ®åº“æ®Šé€”åŒå½’äº†ï¼Œå…ˆå®šä¹‰å¥½å­—æ®µï¼Œç„¶ååœ¨ä½¿ç”¨ï¼Œåˆ«æ•´ä»€ä¹ˆå¹ºè›¾å­ã€‚</p><blockquote><p>ç´¢å¼•</p></blockquote><p><strong>å°±æ˜¯æ•°æ®åº“</strong>ã€‚</p><p>ç´¢å¼•æ˜¯æ˜ å°„ç±»å‹çš„å®¹å™¨ï¼Œelasticsearchä¸­çš„ç´¢å¼•æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„æ–‡æ¡£é›†åˆã€‚ç´¢å¼•å­˜å‚¨äº†æ˜ å°„ç±»å‹å­—æ®µå’Œå…¶ä»–è®¾ç½®ï¼Œç„¶åä»–ä»¬è¢«å­˜å‚¨åˆ°äº†å„ä¸ªåˆ†ç‰‡ä¸Šäº†ã€‚æˆ‘ä»¬æ¥ç ”ç©¶ä¸‹åˆ†ç‰‡æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p><p><strong>ç‰©ç†è®¾è®¡ï¼šèŠ‚ç‚¹å’Œåˆ†ç‰‡ å¦‚ä½•å·¥ä½œ</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°05-ESæ ¸å¿ƒæ¦‚å¿µ/2.png" alt="æ–°å»ºç´¢å¼•" style="zoom:80%;"><p>ä¸€ä¸ªé›†ç¾¤è‡³å°‘è¦æœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯ä¸€ä¸ªelasticsearchè¿›ç¨‹ï¼ŒèŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªç´¢å¼•é»˜è®¤çš„ï¼Œå¦‚æœä½ åˆ›å»ºç´¢å¼•ï¼Œé‚£ä¹ˆç´¢å¼•å°†ä¼šæœ‰5ä¸ªåˆ†ç‰‡(primary shard,åˆç§°ä¸»åˆ†ç‰‡) æ„æˆçš„ï¼Œæ¯ä¸ªä¸»åˆ†ç‰‡ä¼šæœ‰ä¸€ä¸ªå‰¯æœ¬(replica shard,åˆç§°å¤åˆ¶åˆ†ç‰‡)ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearch%E7%AC%94%E8%AE%B005-ES%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5/3.png" alt="é›†ç¾¤"></p><p>ä¸Šå›¾æ˜¯ä¸€ä¸ªæœ‰3ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤ï¼Œå¯ä»¥çœ‹åˆ°ä¸»åˆ†ç‰‡å’Œå¯¹åº”çš„èµ‹å€¼åˆ†ç‰‡éƒ½ä¸ä¼šåœ¨åŒä¸€ä¸ªèŠ‚ç‚¹å†…ã€‚è¿™æ ·æœ‰åˆ©äºå¦‚æœæŸä¸ªèŠ‚ç‚¹æŒ‚æ‰äº†ï¼Œæ•°æ®ä¹Ÿä¸è‡³äºä¸¢å¤±ã€‚å®é™…ä¸Šï¼Œ<strong>ä¸€ä¸ªåˆ†ç‰‡æ˜¯ä¸€ä¸ªLuceneç´¢å¼•</strong>ï¼Œä¸€ä¸ªåŒ…å«<strong>å€’æ’ç´¢å¼•</strong>çš„æ–‡ä»¶ç›®å½•ã€‚å€’æ’ç´¢å¼•çš„ç»“æ„ä½¿å¾—ElasticSearchåœ¨ä¸æ‰«æå…¨éƒ¨æ–‡æ¡£çš„æƒ…å†µä¸‹ï¼Œå°±èƒ½å‘Šè¯‰ä½ å“ªäº›æ–‡æ¡£åŒ…å«ç‰¹å®šçš„å…³é”®å­—ã€‚ä¸è¿‡ï¼Œä»€ä¹ˆæ˜¯å€’æ’ç´¢å¼•å‘¢ï¼Ÿ</p><blockquote><p>å€’æ’ç´¢å¼•</p></blockquote><p>elasticsearchä½¿ç”¨çš„æ˜¯ä¸€ç§ç§°ä¸ºå€’æ’ç´¢å¼•çš„ç»“æ„ï¼Œé‡‡ç”¨Luceneå€’æ’ç´¢å¼•ä½œä¸ºåº•å±‚ã€‚è¿™ç§ç»“æ„é€‚ç”¨äºå¿«é€Ÿçš„å…¨æ–‡æœç´¢ï¼Œä¸€ä¸ªç´¢å¼•ç”±æ–‡æ¡£ä¸­æ‰€æœ‰ä¸é‡å¤çš„åˆ—è¡¨æ„æˆï¼Œå¯¹äºæ¯ä¸€ä¸ªè¯ï¼Œéƒ½æœ‰ä¸€ä¸ªåŒ…å«å®ƒçš„æ–‡æ¡£åˆ—è¡¨ã€‚ä¾‹å¦‚,ç°åœ¨æœ‰ä¸¤ä¸ªæ–‡æ¡£ï¼Œæ¯ä¸ªæ–‡æ¡£åŒ…å«å¦‚ä¸‹å†…å®¹ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">Study every day, good good up to forever   <span class="hljs-comment"># æ–‡æ¡£ä¸€åŒ…å«çš„å†…å®¹</span><br>To forever, study every day, good good up  <span class="hljs-comment"># æ–‡æ¡£äºŒåŒ…å«çš„å†…å®¹</span><br></code></pre></td></tr></table></figure><table><thead><tr><th>term</th><th>doc_1</th><th>doc_2</th></tr></thead><tbody><tr><td>Study</td><td>âˆš</td><td>x</td></tr><tr><td>To</td><td>x</td><td>x</td></tr><tr><td>every</td><td>âˆš</td><td>âˆš</td></tr><tr><td>forever</td><td>âˆš</td><td>âˆš</td></tr><tr><td>day</td><td>âˆš</td><td>âˆš</td></tr><tr><td>study</td><td>x</td><td>âˆš</td></tr><tr><td>good</td><td>âˆš</td><td>âˆš</td></tr><tr><td>every</td><td>âˆš</td><td>âˆš</td></tr><tr><td>to</td><td>âˆš</td><td>x</td></tr><tr><td>up</td><td>âˆš</td><td>âˆš</td></tr></tbody></table><p>ä¸¤ä¸ªæ–‡æ¡£éƒ½åŒ¹é…ï¼Œä½†æ˜¯ç¬¬ä¸€ä¸ªæ–‡æ¡£æ¯”ç¬¬äºŒä¸ªåŒ¹é…ç¨‹åº¦æ›´é«˜ã€‚å¦‚æœæ²¡æœ‰åˆ«çš„æ¡ä»¶ï¼Œç°åœ¨,è¿™ä¸¤ä¸ªåŒ…å«å…³é”®å­—çš„æ–‡æ¡£éƒ½å°†è¿”å›ã€‚</p><p>å†æ¥çœ‹ä¸€ä¸ªç¤ºä¾‹,æ¯”å¦‚æˆ‘ä»¬é€šè¿‡åšå®¢æ ‡ç­¾æ¥æœç´¢åšå®¢æ–‡ç« .é‚£ä¹ˆå€’æ’ç´¢å¼•åˆ—è¡¨å°±æ˜¯è¿™æ ·çš„ä¸€ä¸ªç»“æ„:</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°05-ESæ ¸å¿ƒæ¦‚å¿µ/4.png" alt="åšå®¢æ–‡ç« " style="zoom:80%;"><p>å¦‚æœè¦æœç´¢å«æœ‰pythonæ ‡ç­¾çš„æ–‡ç« ï¼Œé‚£ç›¸å¯¹æŸ¥æ‰¾æ‰€æœ‰åŸå§‹æ•°æ®è€Œè¨€ï¼ŒæŸ¥æ‰¾å€’æ’ç´¢å¼•åçš„æ•°æ®å°†ä¼šå¿«çš„å¤šï¼Œåªéœ€è¦æŸ¥çœ‹æ ‡ç­¾è¿™ä¸€æ ,ç„¶åè·å–ç›¸å…³æ–‡ç« idå³å¯ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>ElasticSearch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ElasticSearchç¬”è®°03-ElasticSearchå®‰è£…</title>
    <link href="/posts/2021/01/22/ElasticSearch%E7%AC%94%E8%AE%B004-ElasticSearch%E5%AE%89%E8%A3%85/"/>
    <url>/posts/2021/01/22/ElasticSearch%E7%AC%94%E8%AE%B004-ElasticSearch%E5%AE%89%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<h2 id="ElasticSearchå®‰è£…"><a href="#ElasticSearchå®‰è£…" class="headerlink" title="ElasticSearchå®‰è£…"></a>ElasticSearchå®‰è£…</h2><blockquote><p>å£°æ˜</p></blockquote><p>JDKæœ€ä½è¦æ±‚ç‰ˆæœ¬ï¼š1.8ï¼Œelasticsearchçš„ç‰ˆæœ¬å’Œå¯¹åº”æˆ‘ä»¬ä¹‹åçš„Javaçš„æ ¸å¿ƒjaråŒ…ã€‚</p><blockquote><p>ä¸‹è½½</p></blockquote><p>Elasticå®˜ç½‘ï¼š<a href="https://www.elastic.co/cn/">https://www.elastic.co/cn/</a></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearch%E7%AC%94%E8%AE%B004-ElasticSearch%E5%AE%89%E8%A3%85/elastic.png" alt="å®˜ç½‘æˆªå›¾"></p><p>ä¸‹è½½é¡µé¢ï¼š<a href="https://www.elastic.co/cn/elasticsearch/">https://www.elastic.co/cn/elasticsearch/</a></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearch%E7%AC%94%E8%AE%B004-ElasticSearch%E5%AE%89%E8%A3%85/down_elastic.png" alt="ä¸‹è½½é¡µé¢"></p><p>ä¸‹è½½é€‰é¡¹ï¼š<a href="https://www.elastic.co/cn/downloads/elasticsearch">https://www.elastic.co/cn/downloads/elasticsearch</a></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearch%E7%AC%94%E8%AE%B004-ElasticSearch%E5%AE%89%E8%A3%85/down_select.png" alt="ä¸‹è½½é€‰é¡¹"></p><p>ElasticSearchç”¨Windowså’ŒLinuxç¯å¢ƒä¸‹éƒ½å¯ä»¥å­¦ä¹ ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨Windowså­¦ä¹ </p><blockquote><p>å®‰è£…elasticsearch</p></blockquote><ol><li><p>è§£å‹åå³å¯ä½¿ç”¨ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearch%E7%AC%94%E8%AE%B004-ElasticSearch%E5%AE%89%E8%A3%85/unzip.png" alt="è§£å‹"></p></li><li><p>ç†Ÿæ‚‰ç›®å½•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">--bin å¯åŠ¨æ–‡ä»¶<br>--config é…ç½®æ–‡ä»¶<br>|--elasticsearch.yml elasticsearchçš„é…ç½®æ–‡ä»¶ é»˜è®¤9200ç«¯å£<br>|--jvm.options javaè™šæ‹Ÿæœºé…ç½®æ–‡ä»¶<br>|--log4j2.properties æ—¥å¿—é…ç½®æ–‡ä»¶<br>|--roles.yml è§’è‰²é…ç½®æ–‡ä»¶<br>|--users<br>|--users_roles<br>--lib ç›¸å…³jaråŒ…<br>--moudle åŠŸèƒ½æ¨¡å—<br>--plugin æ’ä»¶<br>--logs æ—¥å¿—<br></code></pre></td></tr></table></figure></li><li><p>åœ¨binç›®å½•ä¸‹ï¼ŒåŒå‡»<code>elasticsearch.bat</code>æ–‡ä»¶ï¼Œå¯åŠ¨elasticsearch</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°04-ElasticSearchå®‰è£…/cmd.png" alt="æ‰§è¡Œ" style="zoom:80%;"></li><li><p>è®¿é—®<a href="http://127.0.0.1:9200/">http://127.0.0.1:9200/</a></p><p>è·å¾—jsonå­—ç¬¦ä¸²ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;LAPTOP-F1JRDC9U&quot;</span>,<br>  <span class="hljs-attr">&quot;cluster_name&quot;</span>: <span class="hljs-string">&quot;elasticsearch&quot;</span>,<br>  <span class="hljs-attr">&quot;cluster_uuid&quot;</span>: <span class="hljs-string">&quot;WzTRyCYoSzGCO4BrF0L_Og&quot;</span>,<br>  <span class="hljs-attr">&quot;version&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;number&quot;</span>: <span class="hljs-string">&quot;7.10.2&quot;</span>,<br>    <span class="hljs-attr">&quot;build_flavor&quot;</span>: <span class="hljs-string">&quot;default&quot;</span>,<br>    <span class="hljs-attr">&quot;build_type&quot;</span>: <span class="hljs-string">&quot;zip&quot;</span>,<br>    <span class="hljs-attr">&quot;build_hash&quot;</span>: <span class="hljs-string">&quot;747e1cc71def077253878a59143c1f785afa92b9&quot;</span>,<br>    <span class="hljs-attr">&quot;build_date&quot;</span>: <span class="hljs-string">&quot;2021-01-13T00:42:12.435326Z&quot;</span>,<br>    <span class="hljs-attr">&quot;build_snapshot&quot;</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">&quot;lucene_version&quot;</span>: <span class="hljs-string">&quot;8.7.0&quot;</span>,<br>    <span class="hljs-attr">&quot;minimum_wire_compatibility_version&quot;</span>: <span class="hljs-string">&quot;6.8.0&quot;</span>,<br>    <span class="hljs-attr">&quot;minimum_index_compatibility_version&quot;</span>: <span class="hljs-string">&quot;6.0.0-beta1&quot;</span><br>  &#125;,<br>  <span class="hljs-attr">&quot;tagline&quot;</span>: <span class="hljs-string">&quot;You Know, for Search&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure></li></ol><blockquote><p>å®‰è£…å¯è§†åŒ–ç•Œé¢ï¼šes headæ’ä»¶</p></blockquote><ol><li><p>ä¸‹è½½åœ°å€ï¼š<a href="https://github.com/mobz/elasticsearch-head/archive/master.zip">https://github.com/mobz/elasticsearch-head/archive/master.zip</a></p></li><li><p>è§£å‹å³å¯ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°04-ElasticSearchå®‰è£…/head.png" alt="è§£å‹" style="zoom:75%;"></li><li><p>åœ¨æ­¤ç›®å½•ä¸‹æ‰§è¡Œå®‰è£…å‘½ä»¤<code>npm install  </code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install<br></code></pre></td></tr></table></figure></li><li><p>å®‰è£…å®Œæˆåï¼Œæ‰§è¡Œå¯åŠ¨å‘½ä»¤ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ npm run start<br><br>&gt; elasticsearch-head@0.0.0 start E:\environment\elasticsearch\elasticsearch-head<br>-master<br>&gt; grunt server<br><br>Running <span class="hljs-string">&quot;connect:server&quot;</span> (connect) task<br>Waiting forever...<br>Started connect web server on http://localhost:9100<br></code></pre></td></tr></table></figure></li><li><p>è®¿é—®<a href="http://localhost:9100ï¼Œç‚¹å‡»è¿æ¥ï¼Œç”±äºç«¯å£ä¸ä¸€è‡´å‡ºç°äº†è·¨åŸŸé—®é¢˜ã€‚">http://localhost:9100ï¼Œç‚¹å‡»è¿æ¥ï¼Œç”±äºç«¯å£ä¸ä¸€è‡´å‡ºç°äº†è·¨åŸŸé—®é¢˜ã€‚</a></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearch%E7%AC%94%E8%AE%B004-ElasticSearch%E5%AE%89%E8%A3%85/cross.png" alt="è·¨åŸŸ"></p></li><li><p>åœ¨elasticsearchä¸‹binç›®å½•ä¸‹<code>elasticsearch.yml</code>ä¸‹æ·»åŠ ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">http:</span><br>  <span class="hljs-attr">cors:</span><br>    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">allow-origin:</span> <span class="hljs-string">&quot;*&quot;</span><br></code></pre></td></tr></table></figure></li><li><p>é‡å¯elasticsearchæœåŠ¡ï¼Œå†æ¬¡è¿æ¥ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearch%E7%AC%94%E8%AE%B004-ElasticSearch%E5%AE%89%E8%A3%85/connect.png" alt="è¿æ¥åˆ°è‡ªå·±çš„ä¸»æœº"></p></li></ol><p>è¿™ä¸ªheadæˆ‘ä»¬å°±å¯ä»¥å½“åšæ•°æ®å±•ç¤ºçš„å·¥å…·ï¼Œåé¢æˆ‘ä»¬æ‰€æœ‰çš„æŸ¥è¯¢ä½¿ç”¨Kibanaã€‚</p><blockquote><p>äº†è§£ ELK</p></blockquote><p>ELKæ˜¯Elasticsearchã€Logstashã€Kibanaä¸‰å¤§å¼€æºæ¡†æ¶é¦–å­—æ¯å¤§å†™ç®€ç§°ï¼Œå¸‚é¢ä¸Šä¹Ÿè¢«æˆä¸ºElastic Stackã€‚å…¶ä¸­Elasticsearchæ˜¯ä¸€ä¸ªåŸºäºLuceneã€åˆ†å¸ƒå¼ã€é€šè¿‡Restfulæ–¹å¼è¿›è¡Œäº¤äº’çš„è¿‘å®æ—¶æœç´¢å¹³å°æ¡†æ¶ã€‚Logstashæ˜¯ELKçš„ä¸­å¤®æ•°æ®æµå¼•æ“ï¼Œç”¨æˆ·ä»ä¸åŒç›®æ ‡ï¼ˆæ–‡ä»¶/æ•°æ®å­˜å‚¨/MQï¼‰æ‰‹æœºä¸åŒæ ¼å¼çš„æ•°æ®ï¼Œç»è¿‡è¿‡æ»¤åæ”¯æŒè¾“å‡ºåˆ°ä¸åŒç›®çš„åœ°ï¼ˆæ–‡ä»¶/MQ/redis/elasticsearch/kafkaç­‰ï¼‰ã€‚Kibanaå¯ä»¥å°†elasticsearchçš„æ•°æ®é€šè¿‡å‹å¥½çš„é¡µé¢å±•ç¤ºå‡ºæ¥ï¼Œæä¾›å®æ—¶åˆ†æçš„åŠŸèƒ½ã€‚</p><p>å¸‚é¢ä¸Šå¾ˆå¤šå¼€å‘åªè¦æåˆ°ELKèƒ½å¤Ÿä¸€ç›´è¯´å‡ºå®ƒæ˜¯ä¸€ä¸ªæ—¥å¿—åˆ†ææ¶æ„æŠ€æœ¯æ ˆæ€»ç§°ï¼Œä½†å®é™…ä¸ŠELKä¸ä»…ä»…é€‚ç”¨äºæ—¥å¿—åˆ†æï¼Œå®ƒè¿˜å¯ä»¥æ”¯æŒå…¶ä»–ä»»ä½•æ•°æ®åˆ†æå’Œæ‰‹æœºçš„åœºæ™¯ï¼Œæ—¥å¿—åˆ†æåªæ˜¯æ›´å…·æœ‰ä»£è¡¨æ€§ï¼Œå¹¶éå”¯ä¸€æ€§ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearch%E7%AC%94%E8%AE%B004-ElasticSearch%E5%AE%89%E8%A3%85/elk.png" alt="ELK"></p><blockquote><p>å®‰è£…Kibana</p></blockquote><ol><li><p>ä¸‹è½½åœ°å€ï¼š<a href="https://www.elastic.co/cn/kibana/download">https://www.elastic.co/cn/kibana/download</a></p></li><li><p>è§£å‹å³å¯ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°04-ElasticSearchå®‰è£…/unzip2.png" alt="è§£å‹" style="zoom:67%;"></li><li><p>ç‚¹å‡»binç›®å½•ä¸‹çš„<code>kibana.bat</code>ï¼Œè¿›è¡Œå¯åŠ¨ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°04-ElasticSearchå®‰è£…/start.png" alt="å¯åŠ¨" style="zoom:75%;"></li><li><p>è®¿é—®<a href="http://localhost:5601/">http://localhost:5601</a></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°04-ElasticSearchå®‰è£…/index.png" alt="é¦–é¡µ" style="zoom:75%;"></li><li><p>å¼€å‘å·¥å…·ï¼Œæˆ‘ä»¬çš„ä»£ç å†™åœ¨è¿™é‡Œ</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°04-ElasticSearchå®‰è£…/devt.png" alt="DevTools" style="zoom:75%;"></li><li><p>åœ¨<code>config/kibana.yaml</code>ä¸‹é…ç½®æ±‰åŒ–ï¼Œé‡å¯é¡¹ç›®å˜æˆä¸­æ–‡ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">i18n.locale:</span> <span class="hljs-string">&quot;zh-CN&quot;</span><br></code></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°04-ElasticSearchå®‰è£…/cn.png" alt="ä¸­æ–‡" style="zoom:75%;"></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>ElasticSearch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ElasticSearchç¬”è®°03-ElasticSearchä¸Solrçš„åŒºåˆ«</title>
    <link href="/posts/2021/01/22/ElasticSearch%E7%AC%94%E8%AE%B003-ElasticSearch%E4%B8%8ESolr%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
    <url>/posts/2021/01/22/ElasticSearch%E7%AC%94%E8%AE%B003-ElasticSearch%E4%B8%8ESolr%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    
    <content type="html"><![CDATA[<h2 id="ESå’ŒSolrçš„åŒºåˆ«"><a href="#ESå’ŒSolrçš„åŒºåˆ«" class="headerlink" title="ESå’ŒSolrçš„åŒºåˆ«"></a>ESå’ŒSolrçš„åŒºåˆ«</h2><blockquote><p>ElasticSearchç®€ä»‹</p></blockquote><p>Elasticsearchæ˜¯ä¸€ä¸ªå®æ—¶åˆ†å¸ƒå¼æœç´¢å’Œåˆ†æå¼•æ“ï¼Œå®ƒè®©ä½ ä»¥ä¹‹å‰æœªæœ‰çš„é€Ÿåº¦å¤„ç†å¤§æ•°æ®æˆä¸ºå¯èƒ½ã€‚</p><p>å®ƒç”¨äº<strong>å…¨æ–‡æœç´¢ã€ç»“æ„åŒ–æœç´¢ã€åˆ†æ</strong>ä»¥åŠå°†è¿™ä¸‰è€…æ··åˆä½¿ç”¨ã€‚</p><p>ç»´åŸºç™¾ç§‘ä½¿ç”¨ElasticSearchæä¾›<strong>å…¨æ–‡æœç´¢å¹¶é«˜äº®å…³é”®å­—</strong>ï¼Œä»¥åŠè¾“å…¥<strong>å®æ—¶æœç´¢</strong>ï¼ˆsearch-asyou-typeï¼‰å’Œ<strong>æœç´¢çº é”™</strong>ï¼ˆdid-you-meanï¼‰ç­‰æœç´¢å»ºè®®åŠŸèƒ½ã€‚</p><p>è‹±å›½å«æŠ¥ä½¿ç”¨ElasticSearchç»“åˆç”¨æˆ·æ—¥å¿—å’Œç¤¾äº¤ç½‘ç»œè®¾å±€æä¾›ç»™ä»–ä»¬çš„ç¼–è¾‘ä»¥å®æ—¶çš„åé¦ˆï¼Œä»¥ä¾¿åŠæ—¶äº†è§£å…¬ä¼—å¯¹æ–°å‘è¡¨çš„æ–‡ç« çš„å›åº”ã€‚</p><p>StackOverflowç»“åˆå…¨æ–‡æœç´¢å’Œåœ°ç†ä½ç½®æŸ¥è¯¢ï¼Œä»¥åŠmore-like-thisåŠŸèƒ½æ¥æ‰¾åˆ°ç›¸å…³çš„é—®é¢˜å’Œç­”æ¡ˆã€‚</p><p>Githubä½¿ç”¨Elasticæ£€ç´¢1300äº¿è¡Œçš„ä»£ç ã€‚</p><p>ElasticSearchä¸ä»…ç”¨äºå¤§å‹ä¼ä¸šï¼Œå®ƒè¿˜è®©å‘DataDogä»¥åŠKloutè¿™æ ·çš„åˆ›ä¸šå…¬å¸æœ€åˆçš„æƒ³æ³•ç¼–ç¨‹å¯æ‰©å±•çš„è§£å†³æ–¹æ¡ˆã€‚</p><p>ElasticSearchå¯ä»¥åœ¨ä½ çš„ç¬”è®°æœ¬ä¸Šè¿è¡Œï¼Œä¹Ÿå¯ä»¥åœ¨æ•°ä»¥ç™¾è®¡çš„æœåŠ¡å™¨ä¸Šå¤„ç†PBçº§åˆ«çš„æ•°æ®ã€‚</p><p><strong>ElasticSearchæ˜¯ä¸€ä¸ªåŸºäºApache Lucene(TM)çš„å¼€æºæœç´¢å¼•æ“ã€‚æ— è®ºåœ¨å¼€æºè¿˜æ˜¯ä¸“æœ‰é¢†åŸŸï¼ŒLuceneå¯ä»¥è¢«äººä¸ºæ˜¯è¿„ä»Šä¸ºæ­¢æœ€å…ˆè¿›ã€æ€§èƒ½æœ€å¥½çš„ã€åŠŸèƒ½æœ€å…¨çš„æœç´¢å¼•æ“åº“ã€‚</strong></p><p>ä½†æ˜¯ï¼Œ<strong>LuceneçŸ¥è¯†ä¸€ä¸ªåº“</strong>ï¼Œå¦‚æœè¦ä½¿ç”¨å®ƒï¼Œå¿…é¡»ä½¿ç”¨Javaä½œä¸ºå¼€å‘è¯­è¨€å¹¶å°†å…¶ç›´æ¥é›†æˆåˆ°åº”ç”¨ä¸­ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼ŒLuceneéå¸¸å¤æ‚ï¼Œä½ éœ€è¦æ·±å…¥äº†è§£æ£€ç´¢çš„ç›¸å…³çŸ¥è¯†æ¥ç†è§£å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p><p>ElasticSearchä¹Ÿä½¿ç”¨Javaå¼€å‘å¹¶ä½¿ç”¨Luceneä½œä¸ºå…¶æ ¸å¿ƒæ¥å®ç°æ‰€æœ‰çš„ç´¢å¼•å’Œæœç´¢çš„åŠŸèƒ½ï¼Œä½†æ˜¯å®ƒçš„ç›®çš„æ˜¯é€šè¿‡ç®€å•åœ°<strong>Restful API</strong>æ¥éšè—Luceneçš„å¤æ‚æ€§ï¼Œä»è€Œè®©å…¨æ–‡æœç´¢å˜å¾—ç®€å•ã€‚</p><blockquote><p>Solrç®€ä»‹</p></blockquote><p>Solræ˜¯<strong>Apacheä¸‹çš„ä¸€ä¸ªé¡¶çº§å¼€æºé¡¹ç›®</strong>ï¼Œé‡‡ç”¨<strong>java</strong>å¼€å‘ï¼Œå®ƒæ˜¯<strong>åŸºäºLucene</strong>çš„å…¨æ–‡æœç´¢æœåŠ¡å™¨ã€‚Solræä¾›äº†æ¯”Luceneæ›´ä¸ºä¸°å¯Œçš„æŸ¥è¯¢è¯­è¨€ï¼ŒåŒæ—¶å®ç°äº†å¯é…ç½®ã€å¯æ‰©å±•ï¼Œå¹¶å¯¹ç´¢å¼•ã€æœç´¢æ€§èƒ½è¿›è¡Œäº†ä¼˜åŒ–ã€‚</p><p>Solrå¯ä»¥ç‹¬ç«‹è¿è¡Œï¼Œè¿è¡Œåœ¨Jettyã€Tomcatç­‰è¿™äº›Servletå®¹å™¨ä¸­ï¼ŒSolrç´¢å¼•çš„å®ç°æ–¹æ³•å¾ˆç®€å•ï¼Œ<strong>ç”¨POSTæ–¹æ³•å‘SolræœåŠ¡å™¨å‘é€ä¸€ä¸ªæè¿°FieldåŠå…¶å†…å®¹çš„XMLæ–‡æ¡£ï¼ŒSolræ ¹æ®xmlæ–‡æ¡£æ·»åŠ ã€åˆ é™¤ã€æ›´æ–°ç´¢å¼•</strong>ã€‚Solræœç´¢åªéœ€è¦å‘é€HTTP GETè¯·æ±‚ï¼Œç„¶åå¯¹Solrè¿”å›Xmlã€jsonç­‰æ ¼å¼çš„æŸ¥è¯¢ç»“æœè¿›è¡Œè§£æï¼Œç»„ç»‡é¡µé¢å¸ƒå±€ã€‚Solrä¸æä¾›æ„å»ºUIçš„åŠŸèƒ½ï¼ŒSolræä¾›äº†ä¸€ä¸ªç®¡ç†ç•Œé¢ï¼Œé€šè¿‡ç®¡ç†ç•Œé¢å¯ä»¥æŸ¥è¯¢Solrçš„é…ç½®å’Œè¿è¡Œæƒ…å†µã€‚</p><p>solræ˜¯åŸºäºluceneå¼€å‘ä¼ä¸šçº§æœç´¢æœåŠ¡å™¨ï¼Œå®é™…ä¸Šå°±æ˜¯å°è£…äº†luceneã€‚</p><p>Solræ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ä¼ä¸šçº§æœç´¢åº”ç”¨æœåŠ¡å™¨ï¼Œå®ƒå¯¹å¤–æä¾›<strong>ç±»ä¼¼äºWeb-serviceçš„APIæ¥å£</strong>ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡httpè¯·æ±‚ï¼Œå‘æœç´¢å¼•æ“æœåŠ¡å™¨æäº¤ä¸€å®šæ ¼å¼çš„æ–‡ä»¶ï¼Œç”Ÿæˆç´¢å¼•;ä¹Ÿå¯ä»¥é€šè¿‡æå‡ºæŸ¥æ‰¾è¯·æ±‚ï¼Œå¹¶å¾—åˆ°è¿”å›ç»“æœã€‚</p><blockquote><p>Eså’ŒSolrå·®åˆ«</p></blockquote><p>Elasticsearchæ˜¯ä¸€ä¸ªå®æ—¶åˆ†å¸ƒå¼æœç´¢å’Œåˆ†æå¼•æ“ã€‚å®ƒè®©ä½ ä»¥å‰æ‰€æœªæœ‰çš„é€Ÿåº¦å¤„ç†å¤§æ•°æ®æˆä¸ºå¯èƒ½.ã€‚ç»´åŸºç™¾ç§‘ä½¿ç”¨å®ƒæä¾›å…¨æ–‡æœç´¢å¹¶é«˜äº®å…³é”®å­—ï¼Œä»¥åŠè¾“å…¥å®æ—¶æœç´¢</p><p>Solræ˜¯Apacheä¸‹çš„ä¸€ä¸ªé¡¶çº§å¼€æºé¡¹ç›®,é‡‡ç”¨Javaå¼€å‘ï¼Œå®ƒæ˜¯åŸºäºLuceneçš„å…¨æ–‡æœç´¢æœåŠ¡å™¨ã€‚solræä¾›äº†æ¯”Luceneæ›´ä¸ºä¸°å¯Œçš„æŸ¥è¯¢è¯­è¨€ï¼ŒåŒæ—¶å®ç°äº†å¯é…ç½®ã€å¯æ‰©å±•ï¼Œå¹¶å¯¹ç´¢å¼•ï¼Œæœç´¢æ€§èƒ½è¿›è¡Œä¼˜åŒ–ã€‚å®ƒå¯ä»¥ç‹¬ç«‹è¿è¡Œï¼Œè¿è¡Œåœ¨tomcat ã€jetyç­‰è¿™äº›Servletå®¹å™¨ä¸­ solrå¯¹å¤–æä¾›ç±»ä¼¼äºWeb-serverçš„APIæ¥å£ã€‚</p><blockquote><p>æµ‹è¯•æ¯”è¾ƒ</p></blockquote><p><strong>å½“å•çº¯çš„å¯¹å·²æœ‰æ•°æ®è¿›è¡Œæœç´¢æ—¶ï¼ŒSolræ›´å¿«</strong>ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°03-ElasticSearchä¸Solrçš„åŒºåˆ«/1.png" alt="æƒ…å†µ1" style="zoom:75%;"><p><strong>å½“å®æ—¶å»ºç«‹ç´¢å¼•æ—¶ï¼ˆè¾¹æœè¾¹æ·»åŠ ç´¢å¼•ï¼‰ï¼Œslorä¼šäº§ç”ŸIOé˜»å¡ï¼ŒæŸ¥è¯¢æ€§èƒ½è¾ƒå·®ï¼ŒESåˆ™å…·æœ‰æ˜æ˜¾çš„ä¼˜åŠ¿ã€‚</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°03-ElasticSearchä¸Solrçš„åŒºåˆ«/2.png" alt="æƒ…å†µ2" style="zoom:80%;"><p><strong>éšç€æ•°æ®é‡çš„å¢åŠ ï¼ŒSolrçš„æœç´¢æ•ˆç‡ä¼šå˜å¾—æ›´ä½ï¼Œè€ŒElasticsearchå´æ²¡æœ‰æ˜æ˜¾çš„å˜åŒ–ã€‚</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°03-ElasticSearchä¸Solrçš„åŒºåˆ«/3.png" alt="æƒ…å†µ3" style="zoom:80%;"><p>ç»¼ä¸Šæ‰€è¿°ï¼Œsolrçš„æ¶æ„<code>ä¸é€‚åˆå®æ—¶æœç´¢</code>çš„åº”ç”¨ã€‚</p><p><strong>å®é™…ç”Ÿäº§ç¯å¢ƒæµ‹è¯•</strong></p><p>ä¸‹å›¾ä¸ºå°†æœç´¢å¼•æ“ä»solrè½¬åˆ°Elasticsearchä»¥åçš„å¹³å‡æŸ¥è¯¢é€Ÿåº¦æœ‰äº†50å€çš„æå‡ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearch%E7%AC%94%E8%AE%B003-ElasticSearch%E4%B8%8ESolr%E7%9A%84%E5%8C%BA%E5%88%AB/4.png" alt="æƒ…å†µ4"></p><blockquote><p>æ€»ç»“</p></blockquote><ol><li><p>esåŸºæœ¬æ˜¯<mark>å¼€ç®±å³ç”¨</mark>(è§£å‹å°±å¯ä»¥ç”¨äº†!)ï¼Œéå¸¸ç®€å•ã€‚solrå®‰è£…ç•¥å¾®å¤æ‚ä¸€ä¸¢ä¸¢ï¼</p></li><li><p>Solråˆ©ç”¨<strong>Zookeeperè¿›è¡Œåˆ†å¸ƒå¼ç®¡ç†</strong>ï¼Œè€ŒElasticsearchè‡ªèº«å¸¦æœ‰åˆ†å¸ƒå¼åè°ƒç®¡ç†åŠŸèƒ½ã€‚</p></li><li><p>solræ”¯æŒæ›´å¤šæ ¼å¼çš„æ•°æ®,æ¯”å¦‚JSONã€XMLã€CSVï¼Œ è€Œelasticsearchä»…ä»…æ”¯æŒjsonæ–‡ä»¶æ ¼å¼ã€‚</p></li><li><p>Solrå®˜ç½‘æä¾›çš„åŠŸèƒ½å¾ˆå¤šï¼Œè€Œelasticsearchæœ¬èº«æ›´æ³¨é‡æ ¸å¿ƒåŠŸèƒ½ï¼Œé«˜çº§åŠŸèƒ½å¤šæœ‰ç¬¬ä¸‰æ–¹æ’ä»¶æä¾›ï¼Œä¾‹å¦‚å›¾å½¢åŒ–ç•Œé¢éœ€è¦kibanaå‹å¥½è´¨å±‚æ”¯æ’‘ã€‚</p></li><li><p>SolræŸ¥è¯¢å—ï¼Œä½†æ›´æ–°ç´¢å¼•æ—¶æ…¢(å³æ’å…¥åˆ é™¤æ…¢)ï¼Œç”¨äºç”µå•†ç­‰æŸ¥è¯¢å¤šçš„åº”ç”¨ï¼›ESå»ºç«‹ç´¢å¼•å—(å³æŸ¥è¯¢æ…¢)ï¼Œå³<strong>å®æ—¶æ€§æŸ¥è¯¢å¿«</strong>ï¼Œç”¨äºfacebookæ–°æµªç­‰æœç´¢ã€‚</p></li><li><p>Solræ˜¯ä¼ <strong>ç»Ÿæœç´¢åº”ç”¨</strong>çš„æœ‰åŠ›è§£å†³æ–¹æ¡ˆï¼Œä½†Elasticsearchæ›´é€‚ç”¨äºæ–°å…´çš„<strong>å®æ—¶æœç´¢</strong>åº”ç”¨ã€‚</p></li><li><p>Solræ¯”è¾ƒæˆç†Ÿï¼Œæœ‰ä¸€ä¸ªæ›´å¤§ã€æ›´æˆç†Ÿçš„ç”¨æˆ·ç¾¤ä½“ï¼Œå¼€å‘å¥½è´¡çŒ®è€…ç¤¾åŒºï¼Œè€ŒElasticsearchç›¸å¯¹å¼€å‘ç»´æŠ¤è€…è¾ƒå°‘ï¼Œæ›´æ–°å¤ªå¿«ï¼Œå­¦ä¹ ä½¿ç”¨æˆæœ¬è¾ƒé«˜ã€‚</p></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>ElasticSearch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ElasticSearchç¬”è®°02-æ¦‚è¿°</title>
    <link href="/posts/2021/01/22/ElasticSearch%E7%AC%94%E8%AE%B002-%E6%A6%82%E8%BF%B0/"/>
    <url>/posts/2021/01/22/ElasticSearch%E7%AC%94%E8%AE%B002-%E6%A6%82%E8%BF%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><blockquote><p>å®šä¹‰</p></blockquote><p>Elasticsearchï¼Œç®€ç§°ä¸ºesï¼Œesæ˜¯ä¸€ä¸ªå¼€<strong>æºçš„æ‰©å±•çš„åˆ†å¸ƒå¼å…¨æ–‡æ£€ç´¢å¼•æ“</strong>ï¼Œä»–å¯ä»¥è¿‘ä¹å®æ—¶çš„å­˜å‚¨,æ£€ç´¢æ•°æ®ï¼›æœ¬èº«æ‰©å±•æ€§å¾ˆå¥½ï¼Œå¯ä»¥æ‰©å±•åˆ°ä¸Šç™¾å°æœåŠ¡å™¨ï¼Œå¤„ç†PBçº§åˆ«(å¤§æ•°æ®æ—¶ä»£)çš„æ•°æ®ã€‚esä¹Ÿ<strong>ä½¿ç”¨Javaå¹¶å‘ä½¿ç”¨Luceneä½œä¸ºå…¶æ ¸å¿ƒ</strong>æ¥å®ç°æ‰€æœ‰ç´¢å¼•å’Œæœç´¢çš„åŠŸèƒ½ï¼Œä½†æ˜¯å®ƒçš„ç›®çš„æ˜¯é€šè¿‡ç®€å•çš„<strong>RESTful API</strong> æ¥éšè—Luceneçš„å¤æ‚æ€§ï¼Œä»è€Œè®©å…¨æ–‡æœç´¢å˜å¾—ç®€å•.</p><p>æ®å›½é™…æƒå¨çš„æ•°æ®åº“äº§å“è¯„æµ‹æœºæ„<strong>DB Engines</strong>çš„ç»Ÿè®¡ï¼Œåœ¨2016å¹´1æœˆï¼ŒElasticSearchå·²è¶…è¿‡Solrç­‰,æˆä¸ºæ’åç¬¬ä¸€çš„æœç´¢å¼•æ“ç±»åº”ç”¨ã€‚</p><blockquote><p>å†å²</p></blockquote><p>å¤šå¹´å‰,ä¸€ä¸ªå«åšshay banonçš„åˆšç»“å©šä¸ä¹…çš„å¤±ä¸šå¼€å‘è€…ï¼Œç”±äºå¦»å­è¦å»ä¼¦æ•¦å­¦ä¹ å¨å¸ˆ,ä»–ä¾¿è·Ÿç€å»äº†ã€‚åœ¨ä»–æ‰¾å·¥ä½œçš„è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†ç»™å¦»å­æ„å»ºä¸€ä¸ª<strong>é£Ÿè°±çš„æœç´¢å¼•æ“</strong>ï¼Œä»–å¼€å§‹æ„å»ºä¸€ä¸ªæ—©æœŸç‰ˆæœ¬çš„Luceneã€‚</p><p>åŸºäºLuceneå·¥ä½œä¼šæ¯”è¾ƒå›°éš¾ï¼Œæ‰€ä»¥Shayå¼€å§‹æŠ½è±¡Luceneä»£ç ä»¥ä¾¿Javaç¨‹åºå‘˜å¯ä»¥åœ¨åº”ç”¨ä¸­æ·»åŠ æœç´¢åŠŸèƒ½ã€‚ä»–å‘å¸ƒäº†ä»–çš„ç¬¬ä¸€ä¸ªå¼€æºé¡¹ç›®,å«åšâ€<strong>compass</strong>â€ã€‚åæ¥Shayæ‰¾åˆ°ä¸€ä»½å·¥ä½œï¼Œè¿™ä¸ªå·¥ä½œå¤„åœ¨é«˜æ€§èƒ½å’Œå†…å­˜æ•°æ®ç½‘ç»œçš„åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œå› æ­¤é«˜æ€§èƒ½çš„ã€å®æ—¶çš„ã€åˆ†å¸ƒå¼çš„æœç´¢å¼•æ“ä¹Ÿæ˜¯ç†æ‰€å½“ç„¶éœ€è¦çš„ã€‚ç„¶åä»–å†³å®šé‡å†™Compassåº“,ä½¿å…¶æˆä¸ºä¸€ä¸ªç‹¬ç«‹çš„æœåŠ¡å«åš<strong>Elasticsearch</strong>ã€‚ç¬¬ä¸€ä¸ªå…¬å¼€ç‰ˆæœ¬å‡ºç°åœ¨2010å¹´2æœˆï¼Œåœ¨é‚£ä¹‹åElasticsearchå·²ç»æˆä¸ºGithubä¸Šæœ€å—æ¬¢è¿çš„é¡¹ç›®ä¹‹ä¸€ï¼Œä»£ç è´¡çŒ®è€…è¶…è¿‡300äººã€‚ä¸€å®¶ä¸»è¥Elasticsearchçš„å…¬å¸å°±æ­¤æˆç«‹ï¼Œä»–ä»¬ä¸€è¾¹æä¾›å•†ä¸šæ”¯æŒï¼Œä¸€è¾¹å¼€å‘æ–°åŠŸèƒ½ï¼Œä¸è¿‡Elasticsearchå°†æ°¸è¿œå¼€æºä¸”å¯¹æ‰€æœ‰äººå¯ç”¨ã€‚</p><p> Shayçš„å¦»å­ä¾ç„¶ç­‰å¾…ç€ä»–çš„é£Ÿè°±æœç´¢â€¦â€¦.</p><blockquote><p>ä½¿ç”¨</p></blockquote><ul><li><p>ç»´åŸºç™¾ç§‘ï¼Œç±»ä¼¼ç™¾åº¦ç™¾ç§‘ï¼Œå…¨æ–‡æ£€ç´¢ã€é«˜äº®ã€æœç´¢æ¨èï¼ˆæƒé‡ï¼‰</p></li><li><p>The Guardianï¼ˆå›½å¤–æ–°é—»ç½‘ç«™ï¼‰ï¼Œç±»ä¼¼æœç‹æ–°é—»ï¼Œç”¨æˆ·è¡Œä¸ºæ—¥å¿—ï¼ˆç‚¹å‡»ã€æµè§ˆã€æ”¶è—ã€è¯„è®º + ç¤¾äº¤ç½‘ç»œæ•°æ®ï¼ˆå¯¹æŸæŸæ–°é—»çš„ç›¸å…³çœ‹æ³•ï¼‰ï¼Œæ•°æ®åˆ†æï¼Œç»™åˆ°æ–°é—»æ–‡ç« çš„ä½œè€…ï¼Œè®©ä»–çŸ¥é“ä»–çš„æ–‡ç« å…¬ä¼—åé¦ˆã€‚</p></li><li><p>Stack Overflowï¼ˆå›½å¤–çš„ç¨‹åºå¼‚å¸¸è®¨è®ºè®ºå›ï¼‰ï¼ŒITé—®é¢˜ï¼Œç¨‹åºçš„æŠ¥é”™ï¼Œæäº¤ä¸Šå»ï¼Œä¼šæœ‰äººå’Œä½ è®¨è®ºä¸å›ç­”ï¼Œå…¨æ–‡æ£€ç´¢ï¼Œæœç´¢ç›¸å…³é—®é¢˜å’Œç­”æ¡ˆï¼Œç¨‹åºæŠ¥é”™äº†ï¼Œå°±ä¼šå°†æŠ¥é”™ä¿¡æ¯ç²˜è´´åˆ°é‡Œé¢å»ï¼Œæœç´¢æœ‰æ²¡æœ‰å¯¹åº”çš„ç­”æ¡ˆã€‚</p></li><li><p>Githubï¼ˆå¼€æºä»£ç ç®¡ç†ï¼‰ï¼Œæœç´¢ä¸Šåƒäº¿è¡Œä»£ç ã€‚</p></li><li><p>ç”µå•†ç½‘ç«™ï¼Œæ£€ç´¢å•†å“ã€‚</p></li><li><p>æ—¥å¿—æ•°æ®åˆ†æï¼Œlogstashé‡‡é›†æ•°æ®ï¼ŒESè¿›è¡Œå¤æ‚çš„æ•°æ®åˆ†æï¼Œ<mark>ELKæŠ€æœ¯ï¼ŒelasticSearch+logstash+kibana</mark></p></li><li><p>å•†å“ä»·æ ¼ç›‘æ§ç½‘ç«™ï¼Œç”¨æˆ·è®¾å®šæŸå•†å“çš„ä»·æ ¼é˜ˆå€¼ï¼Œå½“ä½äºè¯¥é˜ˆå€¼çš„æ—¶å€™ï¼Œå‘é€šçŸ¥ç»™ç”¨æˆ·ã€‚æ¯”å¦‚è®¢é˜…ç‰™è†çš„ç›‘æ§ï¼Œé«˜éœ²æ´ç‰™è†çš„å®¶åº­å¥—è£…ä½äº50å…ƒï¼Œå°±é€šçŸ¥æˆ‘å»è´­ä¹°ã€‚</p></li><li><p>BIç³»ç»Ÿï¼Œå•†ä¸šæ™ºèƒ½ï¼ˆBusiness Intelligenceï¼‰ã€‚æ¯”å¦‚è¯´æœ‰ä¸ªå¤§å‹å•†åœºé›†å›¢ï¼ŒBIï¼Œåˆ†æä¸€ä¸‹æŸæŸåŒºåŸŸæœ€è¿‘3å¹´çš„ç”¨æˆ·æ¶ˆè´¹é‡‘é¢çš„è¶‹åŠ¿ä»¥åŠç”¨æˆ·ç¾¤ä½“çš„ç»„æˆæ„æˆï¼Œäº§å‡ºç›¸å…³çš„æ•°æ®æŠ¥è¡¨ã€‚</p></li><li><p>å›½å†…ï¼Œç«™å†…æœç´¢ï¼ˆç”µå•†ã€æ‹›è˜ã€é—¨æˆ·ï¼‰ï¼ŒITç³»ç»Ÿæœç´¢ï¼ˆOAã€CEMã€ERPï¼‰ï¼Œæ•°æ®åˆ†æã€‚</p></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>ElasticSearch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ElasticSearchç¬”è®°01-èŠèŠDoug Cutting</title>
    <link href="/posts/2021/01/21/ElasticSearch%E7%AC%94%E8%AE%B001-%E8%81%8A%E8%81%8ADoug-Cutting/"/>
    <url>/posts/2021/01/21/ElasticSearch%E7%AC%94%E8%AE%B001-%E8%81%8A%E8%81%8ADoug-Cutting/</url>
    
    <content type="html"><![CDATA[<h2 id="èŠèŠDoug-Cutting"><a href="#èŠèŠDoug-Cutting" class="headerlink" title="èŠèŠDoug Cutting"></a>èŠèŠDoug Cutting</h2><blockquote><p>æœ¬æ•…äº‹æ¥è‡ªäºå…¬ä¼—å·ï¼šæ–°æ †è¯¾å ‚</p></blockquote><p>1998å¹´9æœˆ4æ—¥ï¼ŒGoogleå…¬å¸åœ¨ç¾å›½ç¡…è°·æˆç«‹ï¼Œæ­£å¦‚å¤§å®¶æ‰€çŸ¥ï¼Œå®ƒæ˜¯ä¸€å®¶åšæœç´¢å¼•æ“èµ·å®¶çš„å…¬å¸ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearch%E7%AC%94%E8%AE%B001-%E8%81%8A%E8%81%8ADoug-Cutting/google_brand.png" alt="Googleå•†æ ‡"></p><p>æ— ç‹¬æœ‰å¶,ä¸€ä½åå«<strong>Doug Cutting</strong>çš„ç¾å›½å·¥ç¨‹å¸ˆ,ä¹Ÿè¿·ä¸Šäº†<strong>æœç´¢å¼•æ“</strong>ã€‚ä»–åšäº†ä¸€ä¸ªç”¨äºæ–‡æœ¬æœç´¢çš„å‡½æ•°åº“(å§‘ä¸”ç†è§£ä¸ºè½¯ä»¶çš„åŠŸèƒ½ç»„ä»¶)ï¼Œå‘½åä¸º<strong>Lucene</strong>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearch%E7%AC%94%E8%AE%B001-%E8%81%8A%E8%81%8ADoug-Cutting/doug_cutting.png" alt="Doug Cutting"></p><p><strong>Lucene</strong>ä½¿ç”¨<strong>Java</strong>å†™çš„ï¼Œç›®æ ‡æ˜¯ä¸ºå„ç§ä¸­å°å‹åº”ç”¨è½¯ä»¶åŠ å…¥å…¨æ–‡æ£€ç´¢åŠŸèƒ½.å› ä¸ºå¥½ç”¨è€Œä¸”<strong>å¼€æº</strong>(ä»£ç å…¬å¼€),éå¸¸å—ç¨‹åºå‘˜ä»¬ç¨€ç½•ã€‚</p><p>æ—©æœŸçš„æ—¶å€™ï¼Œè¿™ä¸ªé¡¹ç›®è¢«å‘å¸ƒåœ¨Doug Cuttingçš„ä¸ªäººç½‘ç«™å’ŒSourceForgeï¼ˆä¸€ä¸ªå¼€æºè½¯ä»¶ç½‘ç«™ï¼‰ã€‚åæ¥ï¼Œ2001å¹´åº•ï¼ŒLuceneæˆä¸º<strong>Apacheè½¯ä»¶åŸºé‡‘ä¼š</strong>jakartaé¡¹ç›®çš„ä¸€ä¸ªå­é¡¹ç›®ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearch%E7%AC%94%E8%AE%B001-%E8%81%8A%E8%81%8ADoug-Cutting/apache.png" alt="apacheåŸºé‡‘ä¼š"></p><p>2004å¹´ï¼ŒDoug Cuttingå†æ¥å†åŠ±ï¼Œåœ¨Luceneçš„åŸºç¡€ä¸Šï¼Œå’ŒApacheå¼€æºä¼™ä¼´Mike Cafarellaåˆä½œï¼Œå¼€å‘äº†ä¸€æ¬¾å¯ä»¥ä»£æ›¿å½“æ—¶çš„ä¸»æµæœç´¢çš„å¼€æºæœç´¢å¼•æ“ï¼Œå‘½åä¸º<strong>Nutch</strong>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearch%E7%AC%94%E8%AE%B001-%E8%81%8A%E8%81%8ADoug-Cutting/nutch.png" alt="nutch"></p><p>Nutchæ˜¯ä¸€ä¸ªå»ºç«‹åœ¨<strong>Luceneæ ¸å¿ƒ</strong>ä¹‹ä¸Šçš„ç½‘é¡µæœç´¢åº”ç”¨ç¨‹åºï¼Œå¯ä»¥ä¸‹è½½ä¸‹æ¥ç›´æ¥ä½¿ç”¨ã€‚å®ƒåœ¨Luceneçš„åŸºç¡€ä¸ŠåŠ äº†ç½‘ç»œçˆ¬è™«å’Œä¸€äº›ç½‘é¡µç›¸å…³çš„åŠŸèƒ½ï¼Œç›®çš„å°±æ˜¯ä»ä¸€ä¸ªç®€å•çš„ç«™å†…æ£€ç´¢æ¨å¹¿åˆ°å…¨çƒç½‘ç»œçš„æœç´¢ä¸Šï¼Œå°±åƒGoogleä¸€æ ·ã€‚</p><p>Nutchåœ¨ä¸šç•Œçš„å½±å“åŠ›æ¯”Luceneæ›´å¤§ã€‚</p><p>å¤§æ‰¹ç½‘ç«™é‡‡ç”¨äº†Nutchå¹³å°ï¼Œ<strong>å¤§å¤§é™ä½äº†æŠ€æœ¯é—¨æ§›</strong>ï¼Œä½¿ä½æˆæœ¬çš„æ™®é€šè®¡ç®—æœºå–ä»£é«˜ä»·çš„WebæœåŠ¡å™¨æˆä¸ºå¯èƒ½ã€‚ç”šè‡³æœ‰ä¸€æ®µæ—¶é—´ï¼Œåœ¨ç¡…è°·æœ‰äº†ä¸€è‚¡ç”¨Nutchä½æˆæœ¬åˆ›ä¸šçš„æ½®æµã€‚</p><p>éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæ— è®ºæ˜¯Googleè¿˜æ˜¯Nutchï¼Œéƒ½é¢ä¸´<strong>æœç´¢å¯¹è±¡â€œä½“ç§¯â€ä¸æ–­å¢å¤§</strong>çš„é—®é¢˜ã€‚å°¤å…¶æ˜¯Googleï¼Œä½œä¸ºäº’è”ç½‘æœç´¢å¼•æ“ï¼Œéœ€è¦å­˜å‚¨å¤§é‡çš„ç½‘é¡µï¼Œå¹¶<strong>ä¸æ–­ä¼˜åŒ–è‡ªå·±çš„æœç´¢ç®—æ³•ï¼Œæå‡æœç´¢æ•ˆç‡</strong>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearch%E7%AC%94%E8%AE%B001-%E8%81%8A%E8%81%8ADoug-Cutting/google.png" alt="googleä¼˜åŒ–æœç´¢"></p><p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒGoogleç¡®å®æ‰¾åˆ°äº†ä¸å°‘å¥½çš„åŠæ³•,å¹¶ä¸”æ— ç§åœ°åˆ†äº«äº†å‡ºæ¥ï¼Œå¼€æºæ˜¯ä¸€ç§ä¼Ÿå¤§çš„ç²¾ç¥ã€‚</p><p>2003å¹´,Googleå‘è¡¨äº†ä¸€ç¯‡æŠ€æœ¯å­¦æœ¯è®ºæ–‡ï¼Œå…¬å¼€ä»‹ç»äº†è‡ªå·±çš„è°·æ­Œæ–‡ä»¶ç³»ç»Ÿ<strong>GFS</strong>(google File System)ã€‚è¿™æ˜¯googleå…¬å¸ä¸ºäº†<strong>å­˜å‚¨æµ·é‡æœç´ æ•°æ®</strong>è€Œè®¾è®¡çš„<strong>ä¸“ç”¨æ–‡ä»¶ç³»ç»Ÿ</strong>ã€‚</p><p>ç¬¬äºŒå¹´ï¼Œ2004å¹´ï¼ŒDoug CuttingåŸºäºGoogleçš„GFSè®ºæ–‡ï¼Œå®ç°äº†<strong>åˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨ç³»ç»Ÿ</strong>ï¼Œå¹¶å°†å®ƒå‘½åä¸º<strong>NDFS</strong>(<strong>Nutch</strong> Distributed File System)ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°01-èŠèŠDoug-Cutting/gfs_to_ndfs.jpg" alt="åŸºäºGFSå®ç°NDFS" style="zoom:80%;"><p>è¿˜æ˜¯2004å¹´,Googleåˆå‘è¡¨äº†ä¸€ç¯‡æŠ€æœ¯å­¦æœ¯è®ºæ–‡ï¼Œä»‹ç»è‡ªå·±çš„<strong>MapReduce</strong>ç¼–ç¨‹æ¨¡å‹ã€‚è¿™ä¸ªç¼–ç¨‹æ¨¡å‹,ç”¨äºå¤§è§„æ¨¡æ•°æ®é›†(å¤§äº1TB)çš„å¹¶è¡Œåˆ†æè¿ç®—ã€‚</p><p>2005å¹´ï¼ŒDoug Cutting åˆ<strong>åŸºäºMapReduce</strong>ï¼Œåœ¨<strong>Nutchæœç´¢å¼•æ“</strong>å®ç°äº†è¯¥åŠŸèƒ½ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°01-èŠèŠDoug-Cutting/mapreduce.png" alt="MapReduceæ¨¡å‹" style="zoom:80%;"><p>2006å¹´ï¼Œå½“æ—¶ä¾ç„¶å¾ˆå‰å®³çš„<strong>Yahoo(é›…è™)å…¬å¸</strong>ï¼Œæ‹›å®‰äº†Doug Cuttingã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearch%E7%AC%94%E8%AE%B001-%E8%81%8A%E8%81%8ADoug-Cutting/yahoo.png" alt="é›…è™å…¬å¸å•†æ ‡"></p><p>åŠ ç›ŸYahooä¹‹åï¼ŒDougâ€‚Cuttingå°†<strong>NDFS</strong>å’Œ<strong>MapReduce</strong>è¿›è¡Œäº†å‡çº§æ”¹é€ ï¼Œå¹¶é‡æ–°å‘½åä¸º<strong>Hadoop</strong>ï¼ˆNDFSä¹Ÿæ”¹åä¸ºHDFSï¼ŒHadoop Distributed Fileâ€‚Systemï¼‰ã€‚</p><p>è¿™ä¸ªï¼Œå°±æ˜¯åæ¥å¤§åé¼é¼çš„å¤§æ•°æ®æ¡†æ¶ç³»ç»Ÿâ€”â€”Hadoopçš„ç”±æ¥ã€‚è€ŒDougâ€‚Cuttingï¼Œåˆ™è¢«äººä»¬ç§°ä¸º<strong>Hadoopä¹‹çˆ¶</strong>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearch%E7%AC%94%E8%AE%B001-%E8%81%8A%E8%81%8ADoug-Cutting/hadoop_father.png" alt="Hadoopä¹‹çˆ¶"></p><p>æˆ‘ä»¬ç»§ç»­å™è¿°ï¼Œè¿˜æ˜¯2006å¹´ï¼ŒGoogleåˆå‘è¡¨äº†ä¸€ç¯‡è®ºæ–‡ã€‚è¿™æ¬¡ï¼Œå®ƒä»¬ä»‹ç»äº†è‡ªå·±çš„<strong>BigTable</strong>ã€‚è¿™æ˜¯ä¸€ç§<strong>åˆ†å¸ƒå¼æ•°æ®å­˜å‚¨ç³»ç»Ÿ</strong>ï¼Œä¸€ç§ç”¨æ¥å¤„ç†æµ·é‡æ•°æ®çš„<strong>éå…³ç³»å‹æ•°æ®åº“</strong>ã€‚</p><p>Dougâ€‚Cuttingå½“ç„¶æ²¡æœ‰æ”¾è¿‡ï¼Œåœ¨è‡ªå·±çš„<strong>Hadoop</strong>ç³»ç»Ÿé‡Œé¢ï¼Œå¼•å…¥äº†<strong>BigTable</strong>ï¼Œå¹¶å‘½åä¸º<strong>HBase</strong>ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearchç¬”è®°01-èŠèŠDoug-Cutting/bigTable_to_hbase.png" alt="HBase" style="zoom:80%;"><p>å¥½å§ï¼ŒDougâ€‚Cuttingåæ­£å°±æ˜¯ç´§è·ŸGoogleæ—¶ä»£æ­¥ä¼ï¼Œä½ å‡ºä»€ä¹ˆï¼Œæˆ‘å­¦ä»€ä¹ˆã€‚</p><p>æ‰€ä»¥ï¼ŒHadoopçš„æ ¸å¿ƒéƒ¨åˆ†ï¼ŒåŸºæœ¬ä¸Šéƒ½æœ‰Googleçš„å½±å­ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN/source/_posts/ElasticSearch%E7%AC%94%E8%AE%B001-%E8%81%8A%E8%81%8ADoug-Cutting/google_hadoop.png" alt="googleä¸hadoopè”ç³»"></p><p>2008å¹´1æœˆï¼ŒHadoopæˆåŠŸä¸Šä½ï¼Œæ­£å¼æˆä¸ºApacheåŸºé‡‘ä¼šçš„é¡¶çº§é¡¹ç›®ã€‚åŒå¹´2æœˆï¼ŒYahooå®£å¸ƒå»ºæˆäº†ä¸€ä¸ªæ‹¥æœ‰1ä¸‡ä¸ªå†…æ ¸çš„Hadoopé›†ç¾¤ï¼Œå¹¶å°†è‡ªå·±çš„æœç´¢å¼•æ“äº§å“éƒ¨ç½²åœ¨ä¸Šé¢ã€‚7æœˆï¼ŒHadoopæ‰“ç ´ä¸–ç•Œçºªå½•ï¼Œæˆä¸ºæœ€å¿«æ’åº1TBæ•°æ®çš„ç³»ç»Ÿï¼Œç”¨æ—¶209ç§’ã€‚</p><p>æ­¤åï¼Œ<strong>Hadoopä¾¿è¿›å…¥äº†é«˜é€Ÿå‘å±•æœŸï¼Œç›´è‡³ç°åœ¨</strong>ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>ElasticSearch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Redisç¬”è®°17-ç¼“å­˜ç©¿é€ä¸é›ªå´©</title>
    <link href="/posts/2021/01/21/Redis%E7%AC%94%E8%AE%B017-%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E4%B8%8E%E9%9B%AA%E5%B4%A9/"/>
    <url>/posts/2021/01/21/Redis%E7%AC%94%E8%AE%B017-%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E4%B8%8E%E9%9B%AA%E5%B4%A9/</url>
    
    <content type="html"><![CDATA[<h2 id="ç¼“å­˜ç©¿é€ä¸é›ªå´©"><a href="#ç¼“å­˜ç©¿é€ä¸é›ªå´©" class="headerlink" title="ç¼“å­˜ç©¿é€ä¸é›ªå´©"></a>ç¼“å­˜ç©¿é€ä¸é›ªå´©</h2><h3 id="ç¼“å­˜ç©¿é€ï¼ˆæŸ¥ä¸åˆ°ï¼‰"><a href="#ç¼“å­˜ç©¿é€ï¼ˆæŸ¥ä¸åˆ°ï¼‰" class="headerlink" title="ç¼“å­˜ç©¿é€ï¼ˆæŸ¥ä¸åˆ°ï¼‰"></a>ç¼“å­˜ç©¿é€ï¼ˆæŸ¥ä¸åˆ°ï¼‰</h3><blockquote><p>æ¦‚å¿µ</p></blockquote><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œç”¨æˆ·è¯·æ±‚æ•°æ®æ—¶ï¼Œä¼šå…ˆåœ¨ç¼“å­˜(Redis)ä¸­æŸ¥æ‰¾ï¼Œè‹¥æ²¡æ‰¾åˆ°å³ç¼“å­˜æœªå‘½ä¸­ï¼Œå†åœ¨æ•°æ®åº“ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œæ•°é‡å°‘å¯èƒ½é—®é¢˜ä¸å¤§ï¼Œå¯æ˜¯ä¸€æ—¦å¤§é‡çš„è¯·æ±‚æ•°æ®ï¼ˆä¾‹å¦‚ç§’æ€åœºæ™¯ï¼‰ç¼“å­˜éƒ½æ²¡æœ‰å‘½ä¸­çš„è¯ï¼Œå°±ä¼šå…¨éƒ¨è½¬ç§»åˆ°æ•°æ®åº“ä¸Šï¼Œé€ æˆæ•°æ®åº“æå¤§çš„å‹åŠ›ï¼Œå°±æœ‰å¯èƒ½å¯¼è‡´æ•°æ®åº“å´©æºƒã€‚ç½‘ç»œå®‰å…¨ä¸­ä¹Ÿæœ‰äººæ¶æ„ä½¿ç”¨è¿™ç§æ‰‹æ®µè¿›è¡Œæ”»å‡»è¢«ç§°ä¸ºæ´ªæ°´æ”»å‡»ã€‚</p><blockquote><p>è§£å†³æ–¹æ¡ˆ</p></blockquote><p><strong>å¸ƒéš†è¿‡æ»¤å™¨</strong></p><p>å¯¹æ‰€æœ‰å¯èƒ½æŸ¥è¯¢çš„å‚æ•°ä»¥Hashçš„å½¢å¼å­˜å‚¨ï¼Œä»¥ä¾¿å¿«é€Ÿç¡®å®šæ˜¯å¦å­˜åœ¨è¿™ä¸ªå€¼ï¼Œåœ¨æ§åˆ¶å±‚å…ˆè¿›è¡Œæ‹¦æˆªæ ¡éªŒï¼Œæ ¡éªŒä¸é€šè¿‡ç›´æ¥æ‰“å›ï¼Œå‡è½»äº†å­˜å‚¨ç³»ç»Ÿçš„å‹åŠ›ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B017-%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E4%B8%8E%E9%9B%AA%E5%B4%A9/1.png" alt="å¸ƒéš†è¿‡æ»¤å™¨"></p><p><strong>ç¼“å­˜ç©ºå¯¹è±¡</strong></p><p>ä¸€æ¬¡è¯·æ±‚è‹¥åœ¨ç¼“å­˜å’Œæ•°æ®åº“ä¸­éƒ½æ²¡æ‰¾åˆ°ï¼Œå°±åœ¨ç¼“å­˜ä¸­æ–¹ä¸€ä¸ªç©ºå¯¹è±¡ç”¨äºå¤„ç†åç»­è¿™ä¸ªè¯·æ±‚ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B017-%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E4%B8%8E%E9%9B%AA%E5%B4%A9/2.png" alt="ç¼“å­˜ç©ºå¯¹è±¡"></p><p> è¿™æ ·åšæœ‰ä¸€ä¸ªç¼ºé™·ï¼šå­˜å‚¨ç©ºå¯¹è±¡ä¹Ÿéœ€è¦ç©ºé—´ï¼Œå¤§é‡çš„ç©ºå¯¹è±¡ä¼šè€—è´¹ä¸€å®šçš„ç©ºé—´ï¼Œå­˜å‚¨æ•ˆç‡å¹¶ä¸é«˜ã€‚è§£å†³è¿™ä¸ªç¼ºé™·çš„æ–¹å¼å°±æ˜¯è®¾ç½®è¾ƒçŸ­è¿‡æœŸæ—¶é—´</p><p>å³ä½¿å¯¹ç©ºå€¼è®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œè¿˜æ˜¯ä¼šå­˜åœ¨ç¼“å­˜å±‚å’Œå­˜å‚¨å±‚çš„æ•°æ®ä¼šæœ‰ä¸€æ®µæ—¶é—´çª—å£çš„ä¸ä¸€è‡´ï¼Œè¿™å¯¹äºéœ€è¦ä¿æŒä¸€è‡´æ€§çš„ä¸šåŠ¡ä¼šæœ‰å½±å“ã€‚</p><h3 id="ç¼“å­˜å‡»ç©¿ï¼ˆé‡å¤ªå¤§ï¼Œç¼“å­˜è¿‡æœŸï¼‰"><a href="#ç¼“å­˜å‡»ç©¿ï¼ˆé‡å¤ªå¤§ï¼Œç¼“å­˜è¿‡æœŸï¼‰" class="headerlink" title="ç¼“å­˜å‡»ç©¿ï¼ˆé‡å¤ªå¤§ï¼Œç¼“å­˜è¿‡æœŸï¼‰"></a>ç¼“å­˜å‡»ç©¿ï¼ˆé‡å¤ªå¤§ï¼Œç¼“å­˜è¿‡æœŸï¼‰</h3><blockquote><p>æ¦‚å¿µ</p></blockquote><p> ç›¸è¾ƒäºç¼“å­˜ç©¿é€ï¼Œç¼“å­˜å‡»ç©¿çš„ç›®çš„æ€§æ›´å¼ºï¼Œä¸€ä¸ªå­˜åœ¨çš„keyï¼Œåœ¨ç¼“å­˜è¿‡æœŸçš„ä¸€åˆ»ï¼ŒåŒæ—¶æœ‰å¤§é‡çš„è¯·æ±‚ï¼Œè¿™äº›è¯·æ±‚éƒ½ä¼šå‡»ç©¿åˆ°DBï¼Œé€ æˆç¬æ—¶DBè¯·æ±‚é‡å¤§ã€å‹åŠ›éª¤å¢ã€‚è¿™å°±æ˜¯ç¼“å­˜è¢«å‡»ç©¿ï¼Œåªæ˜¯é’ˆå¯¹å…¶ä¸­æŸä¸ªkeyçš„ç¼“å­˜ä¸å¯ç”¨è€Œå¯¼è‡´å‡»ç©¿ï¼Œä½†æ˜¯å…¶ä»–çš„keyä¾ç„¶å¯ä»¥ä½¿ç”¨ç¼“å­˜å“åº”ã€‚</p><p> æ¯”å¦‚çƒ­æœæ’è¡Œä¸Šï¼Œä¸€ä¸ªçƒ­ç‚¹æ–°é—»è¢«åŒæ—¶å¤§é‡è®¿é—®å°±å¯èƒ½å¯¼è‡´ç¼“å­˜å‡»ç©¿ã€‚</p><blockquote><p>è§£å†³æ–¹æ¡ˆ</p></blockquote><ol><li><p><strong>è®¾ç½®çƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸ</strong></p><p>è¿™æ ·å°±ä¸ä¼šå‡ºç°çƒ­ç‚¹æ•°æ®è¿‡æœŸçš„æƒ…å†µï¼Œä½†æ˜¯å½“Rediså†…å­˜ç©ºé—´æ»¡çš„æ—¶å€™ä¹Ÿä¼šæ¸…ç†éƒ¨åˆ†æ•°æ®ï¼Œè€Œä¸”æ­¤ç§æ–¹æ¡ˆä¼šå ç”¨ç©ºé—´ï¼Œä¸€æ—¦çƒ­ç‚¹æ•°æ®å¤šäº†èµ·æ¥ï¼Œå°±ä¼šå ç”¨éƒ¨åˆ†ç©ºé—´ã€‚</p></li><li><p><strong>åŠ äº’æ–¥é”(åˆ†å¸ƒå¼é”)</strong></p><p>åœ¨è®¿é—®keyä¹‹å‰ï¼Œé‡‡ç”¨SETNXï¼ˆset if not existsï¼‰æ¥è®¾ç½®å¦ä¸€ä¸ªçŸ­æœŸkeyæ¥é”ä½å½“å‰keyçš„è®¿é—®ï¼Œè®¿é—®ç»“æŸå†åˆ é™¤è¯¥çŸ­æœŸkeyã€‚ä¿è¯åŒæ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®ã€‚è¿™æ ·å¯¹é”çš„è¦æ±‚å°±ååˆ†é«˜ã€‚</p></li></ol><h3 id="ç¼“å­˜é›ªå´©"><a href="#ç¼“å­˜é›ªå´©" class="headerlink" title="ç¼“å­˜é›ªå´©"></a>ç¼“å­˜é›ªå´©</h3><blockquote><p>æ¦‚å¿µ</p></blockquote><p>å¤§é‡çš„keyè®¾ç½®äº†ç›¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œå¯¼è‡´åœ¨ç¼“å­˜åœ¨åŒä¸€æ—¶åˆ»å…¨éƒ¨å¤±æ•ˆï¼Œé€ æˆç¬æ—¶DBè¯·æ±‚é‡å¤§ã€å‹åŠ›éª¤å¢ï¼Œå¼•èµ·é›ªå´©ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B017-%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E4%B8%8E%E9%9B%AA%E5%B4%A9/3.png" alt="ç¼“å­˜é›ªå´©"></p><blockquote><p>è§£å†³æ–¹æ¡ˆ</p></blockquote><ul><li><p>redisé«˜å¯ç”¨</p><p>è¿™ä¸ªæ€æƒ³çš„å«ä¹‰æ˜¯ï¼Œæ—¢ç„¶redisæœ‰å¯èƒ½æŒ‚æ‰ï¼Œé‚£æˆ‘å¤šå¢è®¾å‡ å°redisï¼Œè¿™æ ·ä¸€å°æŒ‚æ‰ä¹‹åå…¶ä»–çš„è¿˜å¯ä»¥ç»§ç»­å·¥ä½œï¼Œå…¶å®å°±æ˜¯æ­å»ºçš„é›†ç¾¤</p></li><li><p>é™æµé™çº§</p><p>è¿™ä¸ªè§£å†³æ–¹æ¡ˆçš„æ€æƒ³æ˜¯ï¼Œåœ¨ç¼“å­˜å¤±æ•ˆåï¼Œé€šè¿‡åŠ é”æˆ–è€…é˜Ÿåˆ—æ¥æ§åˆ¶è¯»æ•°æ®åº“å†™ç¼“å­˜çš„çº¿ç¨‹æ•°é‡ã€‚æ¯”å¦‚å¯¹æŸä¸ªkeyåªå…è®¸ä¸€ä¸ªçº¿ç¨‹æŸ¥è¯¢æ•°æ®å’Œå†™ç¼“å­˜ï¼Œå…¶ä»–çº¿ç¨‹ç­‰å¾…ã€‚</p></li><li><p>æ•°æ®é¢„çƒ­</p><p>æ•°æ®åŠ çƒ­çš„å«ä¹‰å°±æ˜¯åœ¨æ­£å¼éƒ¨ç½²ä¹‹å‰ï¼Œæˆ‘å…ˆæŠŠå¯èƒ½çš„æ•°æ®å…ˆé¢„å…ˆè®¿é—®ä¸€éï¼Œè¿™æ ·éƒ¨åˆ†å¯èƒ½å¤§é‡è®¿é—®çš„æ•°æ®å°±ä¼šåŠ è½½åˆ°ç¼“å­˜ä¸­ã€‚åœ¨å³å°†å‘ç”Ÿå¤§å¹¶å‘è®¿é—®å‰æ‰‹åŠ¨è§¦å‘åŠ è½½ç¼“å­˜ä¸åŒçš„keyï¼Œè®¾ç½®ä¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œè®©ç¼“å­˜å¤±æ•ˆçš„æ—¶é—´ç‚¹å°½é‡å‡åŒ€ã€‚</p></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Redisç¬”è®°16-å“¨å…µæ¨¡å¼</title>
    <link href="/posts/2021/01/21/Redis%E7%AC%94%E8%AE%B016-%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F/"/>
    <url>/posts/2021/01/21/Redis%E7%AC%94%E8%AE%B016-%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<p>æ›´å¤šä¿¡æ¯å‚è€ƒåšå®¢ï¼š<a href="https://www.jianshu.com/p/06ab9daf921d">https://www.jianshu.com/p/06ab9daf921d</a></p><p><strong>ä¸»ä»åˆ‡æ¢æŠ€æœ¯çš„æ–¹æ³•æ˜¯ï¼šå½“ä¸»æœåŠ¡å™¨å®•æœºåï¼Œéœ€è¦æ‰‹åŠ¨æŠŠä¸€å°ä»æœåŠ¡å™¨åˆ‡æ¢ä¸ºä¸»æœåŠ¡å™¨ï¼Œè¿™å°±éœ€è¦äººå·¥å¹²é¢„ï¼Œè´¹äº‹è´¹åŠ›ï¼Œè¿˜ä¼šé€ æˆä¸€æ®µæ—¶é—´å†…æœåŠ¡ä¸å¯ç”¨ã€‚</strong>è¿™ä¸æ˜¯ä¸€ç§æ¨èçš„æ–¹å¼ï¼Œæ›´å¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä¼˜å…ˆè€ƒè™‘<strong>å“¨å…µæ¨¡å¼</strong>ã€‚</p><p>å•æœºå•ä¸ªå“¨å…µ</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B016-%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F/1.png" alt="å•å“¨å…µ"></p><p>å“¨å…µçš„ä½œç”¨ï¼š</p><ul><li>é€šè¿‡å‘é€å‘½ä»¤ï¼Œè®©RedisæœåŠ¡å™¨è¿”å›ç›‘æ§å…¶è¿è¡ŒçŠ¶æ€ï¼ŒåŒ…æ‹¬ä¸»æœåŠ¡å™¨å’Œä»æœåŠ¡å™¨ã€‚</li><li>å½“å“¨å…µç›‘æµ‹åˆ°masterå®•æœºï¼Œä¼šè‡ªåŠ¨å°†slaveåˆ‡æ¢æˆmasterï¼Œç„¶åé€šè¿‡<strong>å‘å¸ƒè®¢é˜…æ¨¡å¼</strong>é€šçŸ¥å…¶ä»–çš„ä»æœåŠ¡å™¨ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œè®©å®ƒä»¬åˆ‡æ¢ä¸»æœºã€‚</li></ul><p>å¤šå“¨å…µæ¨¡å¼</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B016-%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F/2.png" alt="å¤šå“¨å…µ"></p><p>å“¨å…µçš„æ ¸å¿ƒé…ç½®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sentinel monitor mymaster 127.0.0.1 6379 1<br></code></pre></td></tr></table></figure><p>æ•°å­—1è¡¨ç¤º ï¼šå½“ä¸€ä¸ªå“¨å…µä¸»è§‚è®¤ä¸ºä¸»æœºæ–­å¼€ï¼Œå°±å¯ä»¥å®¢è§‚è®¤ä¸ºä¸»æœºæ•…éšœï¼Œç„¶åå¼€å§‹é€‰ä¸¾æ–°çš„ä¸»æœº</p><blockquote><p>æµ‹è¯•</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">redis-sentinel xxx/sentinel.conf<br></code></pre></td></tr></table></figure><p>æˆåŠŸå¯åŠ¨å“¨å…µæ¨¡å¼</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B016-%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F/3.png" alt="å¯åŠ¨å“¨å…µæ¨¡å¼"></p><p>æ­¤æ—¶å“¨å…µç›‘è§†ç€æˆ‘ä»¬çš„ä¸»æœº6379ï¼Œå½“æˆ‘ä»¬æ–­å¼€ä¸»æœºåï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B016-%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F/4.png" alt="é€‰å–æ–°ä¸»æœº"></p><blockquote><p>å“¨å…µæ¨¡å¼ä¼˜ç¼ºç‚¹</p></blockquote><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ol><li>å“¨å…µé›†ç¾¤ï¼ŒåŸºäºä¸»ä»å¤åˆ¶æ¨¡å¼ï¼Œæ‰€æœ‰ä¸»ä»å¤åˆ¶çš„ä¼˜ç‚¹ï¼Œå®ƒéƒ½æœ‰</li><li>ä¸»ä»å¯ä»¥åˆ‡æ¢ï¼Œæ•…éšœå¯ä»¥è½¬ç§»ï¼Œç³»ç»Ÿçš„å¯ç”¨æ€§æ›´å¥½</li><li>å“¨å…µæ¨¡å¼æ˜¯ä¸»ä»æ¨¡å¼çš„å‡çº§ï¼Œæ‰‹åŠ¨åˆ°è‡ªåŠ¨ï¼Œæ›´åŠ å¥å£®</li></ol><p><strong>ç¼ºç‚¹ï¼š</strong></p><ol><li>Redisä¸å¥½åœ¨çº¿æ‰©å®¹ï¼Œé›†ç¾¤å®¹é‡ä¸€æ—¦è¾¾åˆ°ä¸Šé™ï¼Œåœ¨çº¿æ‰©å®¹å°±ååˆ†éº»çƒ¦</li><li>å®ç°å“¨å…µæ¨¡å¼çš„é…ç½®å…¶å®æ˜¯å¾ˆéº»çƒ¦çš„ï¼Œé‡Œé¢æœ‰å¾ˆå¤šé…ç½®é¡¹</li></ol><blockquote><p>å“¨å…µæ¨¡å¼çš„å…¨éƒ¨é…ç½®</p></blockquote><p>å®Œæ•´çš„å“¨å…µæ¨¡å¼é…ç½®æ–‡ä»¶ sentinel.conf</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> Example sentinel.conf</span><br> <br><span class="hljs-meta">#</span><span class="bash"> å“¨å…µsentinelå®ä¾‹è¿è¡Œçš„ç«¯å£ é»˜è®¤26379</span><br>port 26379<br> <br><span class="hljs-meta">#</span><span class="bash"> å“¨å…µsentinelçš„å·¥ä½œç›®å½•</span><br>dir /tmp<br> <br><span class="hljs-meta">#</span><span class="bash"> å“¨å…µsentinelç›‘æ§çš„redisä¸»èŠ‚ç‚¹çš„ ip port</span> <br><span class="hljs-meta">#</span><span class="bash"> master-name  å¯ä»¥è‡ªå·±å‘½åçš„ä¸»èŠ‚ç‚¹åå­— åªèƒ½ç”±å­—æ¯A-zã€æ•°å­—0-9 ã€è¿™ä¸‰ä¸ªå­—ç¬¦<span class="hljs-string">&quot;.-_&quot;</span>ç»„æˆã€‚</span><br><span class="hljs-meta">#</span><span class="bash"> quorum å½“è¿™äº›quorumä¸ªæ•°sentinelå“¨å…µè®¤ä¸ºmasterä¸»èŠ‚ç‚¹å¤±è” é‚£ä¹ˆè¿™æ—¶ å®¢è§‚ä¸Šè®¤ä¸ºä¸»èŠ‚ç‚¹å¤±è”äº†</span><br><span class="hljs-meta">#</span><span class="bash"> sentinel monitor &lt;master-name&gt; &lt;ip&gt; &lt;redis-port&gt; &lt;quorum&gt;</span><br>sentinel monitor mymaster 127.0.0.1 6379 1<br> <br><span class="hljs-meta">#</span><span class="bash"> å½“åœ¨Rediså®ä¾‹ä¸­å¼€å¯äº†requirepass foobared æˆæƒå¯†ç  è¿™æ ·æ‰€æœ‰è¿æ¥Rediså®ä¾‹çš„å®¢æˆ·ç«¯éƒ½è¦æä¾›å¯†ç </span><br><span class="hljs-meta">#</span><span class="bash"> è®¾ç½®å“¨å…µsentinel è¿æ¥ä¸»ä»çš„å¯†ç  æ³¨æ„å¿…é¡»ä¸ºä¸»ä»è®¾ç½®ä¸€æ ·çš„éªŒè¯å¯†ç </span><br><span class="hljs-meta">#</span><span class="bash"> sentinel auth-pass &lt;master-name&gt; &lt;password&gt;</span><br>sentinel auth-pass mymaster MySUPER--secret-0123passw0rd<br> <br> <br><span class="hljs-meta">#</span><span class="bash"> æŒ‡å®šå¤šå°‘æ¯«ç§’ä¹‹å ä¸»èŠ‚ç‚¹æ²¡æœ‰åº”ç­”å“¨å…µsentinel æ­¤æ—¶ å“¨å…µä¸»è§‚ä¸Šè®¤ä¸ºä¸»èŠ‚ç‚¹ä¸‹çº¿ é»˜è®¤30ç§’</span><br><span class="hljs-meta">#</span><span class="bash"> sentinel down-after-milliseconds &lt;master-name&gt; &lt;milliseconds&gt;</span><br>sentinel down-after-milliseconds mymaster 30000<br> <br><span class="hljs-meta">#</span><span class="bash"> è¿™ä¸ªé…ç½®é¡¹æŒ‡å®šäº†åœ¨å‘ç”Ÿfailoverä¸»å¤‡åˆ‡æ¢æ—¶æœ€å¤šå¯ä»¥æœ‰å¤šå°‘ä¸ªslaveåŒæ—¶å¯¹æ–°çš„masterè¿›è¡Œ åŒæ­¥ï¼Œ</span><br>è¿™ä¸ªæ•°å­—è¶Šå°ï¼Œå®Œæˆfailoveræ‰€éœ€çš„æ—¶é—´å°±è¶Šé•¿ï¼Œ<br>ä½†æ˜¯å¦‚æœè¿™ä¸ªæ•°å­—è¶Šå¤§ï¼Œå°±æ„å‘³ç€è¶Š å¤šçš„slaveå› ä¸ºreplicationè€Œä¸å¯ç”¨ã€‚<br>å¯ä»¥é€šè¿‡å°†è¿™ä¸ªå€¼è®¾ä¸º 1 æ¥ä¿è¯æ¯æ¬¡åªæœ‰ä¸€ä¸ªslave å¤„äºä¸èƒ½å¤„ç†å‘½ä»¤è¯·æ±‚çš„çŠ¶æ€ã€‚<br><span class="hljs-meta">#</span><span class="bash"> sentinel parallel-syncs &lt;master-name&gt; &lt;numslaves&gt;</span><br>sentinel parallel-syncs mymaster 1<br><span class="hljs-meta">#</span><span class="bash"> æ•…éšœè½¬ç§»çš„è¶…æ—¶æ—¶é—´ failover-timeout å¯ä»¥ç”¨åœ¨ä»¥ä¸‹è¿™äº›æ–¹é¢ï¼š</span> <br><span class="hljs-meta">#</span><span class="bash">1. åŒä¸€ä¸ªsentinelå¯¹åŒä¸€ä¸ªmasterä¸¤æ¬¡failoverä¹‹é—´çš„é—´éš”æ—¶é—´ã€‚</span><br><span class="hljs-meta">#</span><span class="bash">2. å½“ä¸€ä¸ªslaveä»ä¸€ä¸ªé”™è¯¯çš„masteré‚£é‡ŒåŒæ­¥æ•°æ®å¼€å§‹è®¡ç®—æ—¶é—´ã€‚ç›´åˆ°slaveè¢«çº æ­£ä¸ºå‘æ­£ç¡®çš„masteré‚£é‡ŒåŒæ­¥æ•°æ®æ—¶ã€‚</span><br><span class="hljs-meta">#</span><span class="bash">3.å½“æƒ³è¦å–æ¶ˆä¸€ä¸ªæ­£åœ¨è¿›è¡Œçš„failoveræ‰€éœ€è¦çš„æ—¶é—´ã€‚</span>  <br><span class="hljs-meta">#</span><span class="bash">4.å½“è¿›è¡Œfailoveræ—¶ï¼Œé…ç½®æ‰€æœ‰slavesæŒ‡å‘æ–°çš„masteræ‰€éœ€çš„æœ€å¤§æ—¶é—´ã€‚ä¸è¿‡ï¼Œå³ä½¿è¿‡äº†è¿™ä¸ªè¶…æ—¶ï¼Œslavesä¾ç„¶ä¼šè¢«æ­£ç¡®é…ç½®ä¸ºæŒ‡å‘masterï¼Œä½†æ˜¯å°±ä¸æŒ‰parallel-syncsæ‰€é…ç½®çš„è§„åˆ™æ¥äº†</span><br><span class="hljs-meta">#</span><span class="bash"> é»˜è®¤ä¸‰åˆ†é’Ÿ</span><br><span class="hljs-meta">#</span><span class="bash"> sentinel failover-timeout &lt;master-name&gt; &lt;milliseconds&gt;</span><br>sentinel failover-timeout mymaster 180000<br> <br><span class="hljs-meta">#</span><span class="bash"> SCRIPTS EXECUTION</span><br> <br><span class="hljs-meta">#</span><span class="bash">é…ç½®å½“æŸä¸€äº‹ä»¶å‘ç”Ÿæ—¶æ‰€éœ€è¦æ‰§è¡Œçš„è„šæœ¬ï¼Œå¯ä»¥é€šè¿‡è„šæœ¬æ¥é€šçŸ¥ç®¡ç†å‘˜ï¼Œä¾‹å¦‚å½“ç³»ç»Ÿè¿è¡Œä¸æ­£å¸¸æ—¶å‘é‚®ä»¶é€šçŸ¥ç›¸å…³äººå‘˜ã€‚</span><br><span class="hljs-meta">#</span><span class="bash">å¯¹äºè„šæœ¬çš„è¿è¡Œç»“æœæœ‰ä»¥ä¸‹è§„åˆ™ï¼š</span><br><span class="hljs-meta">#</span><span class="bash">è‹¥è„šæœ¬æ‰§è¡Œåè¿”å›1ï¼Œé‚£ä¹ˆè¯¥è„šæœ¬ç¨åå°†ä¼šè¢«å†æ¬¡æ‰§è¡Œï¼Œé‡å¤æ¬¡æ•°ç›®å‰é»˜è®¤ä¸º10</span><br><span class="hljs-meta">#</span><span class="bash">è‹¥è„šæœ¬æ‰§è¡Œåè¿”å›2ï¼Œæˆ–è€…æ¯”2æ›´é«˜çš„ä¸€ä¸ªè¿”å›å€¼ï¼Œè„šæœ¬å°†ä¸ä¼šé‡å¤æ‰§è¡Œã€‚</span><br><span class="hljs-meta">#</span><span class="bash">å¦‚æœè„šæœ¬åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ç”±äºæ”¶åˆ°ç³»ç»Ÿä¸­æ–­ä¿¡å·è¢«ç»ˆæ­¢äº†ï¼Œåˆ™åŒè¿”å›å€¼ä¸º1æ—¶çš„è¡Œä¸ºç›¸åŒã€‚</span><br><span class="hljs-meta">#</span><span class="bash">ä¸€ä¸ªè„šæœ¬çš„æœ€å¤§æ‰§è¡Œæ—¶é—´ä¸º60sï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ—¶é—´ï¼Œè„šæœ¬å°†ä¼šè¢«ä¸€ä¸ªSIGKILLä¿¡å·ç»ˆæ­¢ï¼Œä¹‹åé‡æ–°æ‰§è¡Œã€‚</span><br> <br><span class="hljs-meta">#</span><span class="bash">é€šçŸ¥å‹è„šæœ¬:å½“sentinelæœ‰ä»»ä½•è­¦å‘Šçº§åˆ«çš„äº‹ä»¶å‘ç”Ÿæ—¶ï¼ˆæ¯”å¦‚è¯´rediså®ä¾‹çš„ä¸»è§‚å¤±æ•ˆå’Œå®¢è§‚å¤±æ•ˆç­‰ç­‰ï¼‰ï¼Œå°†ä¼šå»è°ƒç”¨è¿™ä¸ªè„šæœ¬ï¼Œ</span><br><span class="hljs-meta">#</span><span class="bash">è¿™æ—¶è¿™ä¸ªè„šæœ¬åº”è¯¥é€šè¿‡é‚®ä»¶ï¼ŒSMSç­‰æ–¹å¼å»é€šçŸ¥ç³»ç»Ÿç®¡ç†å‘˜å…³äºç³»ç»Ÿä¸æ­£å¸¸è¿è¡Œçš„ä¿¡æ¯ã€‚è°ƒç”¨è¯¥è„šæœ¬æ—¶ï¼Œå°†ä¼ ç»™è„šæœ¬ä¸¤ä¸ªå‚æ•°ï¼Œ</span><br><span class="hljs-meta">#</span><span class="bash">ä¸€ä¸ªæ˜¯äº‹ä»¶çš„ç±»å‹ï¼Œ</span><br><span class="hljs-meta">#</span><span class="bash">ä¸€ä¸ªæ˜¯äº‹ä»¶çš„æè¿°ã€‚</span><br><span class="hljs-meta">#</span><span class="bash">å¦‚æœsentinel.confé…ç½®æ–‡ä»¶ä¸­é…ç½®äº†è¿™ä¸ªè„šæœ¬è·¯å¾„ï¼Œé‚£ä¹ˆå¿…é¡»ä¿è¯è¿™ä¸ªè„šæœ¬å­˜åœ¨äºè¿™ä¸ªè·¯å¾„ï¼Œå¹¶ä¸”æ˜¯å¯æ‰§è¡Œçš„ï¼Œå¦åˆ™sentinelæ— æ³•æ­£å¸¸å¯åŠ¨æˆåŠŸã€‚</span><br><span class="hljs-meta">#</span><span class="bash">é€šçŸ¥è„šæœ¬</span><br><span class="hljs-meta">#</span><span class="bash"> sentinel notification-script &lt;master-name&gt; &lt;script-path&gt;</span><br>  sentinel notification-script mymaster /var/redis/notify.sh<br> <br><span class="hljs-meta">#</span><span class="bash"> å®¢æˆ·ç«¯é‡æ–°é…ç½®ä¸»èŠ‚ç‚¹å‚æ•°è„šæœ¬</span><br><span class="hljs-meta">#</span><span class="bash"> å½“ä¸€ä¸ªmasterç”±äºfailoverè€Œå‘ç”Ÿæ”¹å˜æ—¶ï¼Œè¿™ä¸ªè„šæœ¬å°†ä¼šè¢«è°ƒç”¨ï¼Œé€šçŸ¥ç›¸å…³çš„å®¢æˆ·ç«¯å…³äºmasteråœ°å€å·²ç»å‘ç”Ÿæ”¹å˜çš„ä¿¡æ¯ã€‚</span><br><span class="hljs-meta">#</span><span class="bash"> ä»¥ä¸‹å‚æ•°å°†ä¼šåœ¨è°ƒç”¨è„šæœ¬æ—¶ä¼ ç»™è„šæœ¬:</span><br><span class="hljs-meta">#</span><span class="bash"> &lt;master-name&gt; &lt;role&gt; &lt;state&gt; &lt;from-ip&gt; &lt;from-port&gt; &lt;to-ip&gt; &lt;to-port&gt;</span><br><span class="hljs-meta">#</span><span class="bash"> ç›®å‰&lt;state&gt;æ€»æ˜¯â€œfailoverâ€,</span><br><span class="hljs-meta">#</span><span class="bash"> &lt;role&gt;æ˜¯â€œleaderâ€æˆ–è€…â€œobserverâ€ä¸­çš„ä¸€ä¸ªã€‚</span> <br><span class="hljs-meta">#</span><span class="bash"> å‚æ•° from-ip, from-port, to-ip, to-portæ˜¯ç”¨æ¥å’Œæ—§çš„masterå’Œæ–°çš„master(å³æ—§çš„slave)é€šä¿¡çš„</span><br><span class="hljs-meta">#</span><span class="bash"> è¿™ä¸ªè„šæœ¬åº”è¯¥æ˜¯é€šç”¨çš„ï¼Œèƒ½è¢«å¤šæ¬¡è°ƒç”¨ï¼Œä¸æ˜¯é’ˆå¯¹æ€§çš„ã€‚</span><br><span class="hljs-meta">#</span><span class="bash"> sentinel client-reconfig-script &lt;master-name&gt; &lt;script-path&gt;</span><br>sentinel client-reconfig-script mymaster /var/redis/reconfig.sh<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Redisç¬”è®°15-ä¸»ä»å¤åˆ¶</title>
    <link href="/posts/2021/01/21/Redis%E7%AC%94%E8%AE%B015-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/"/>
    <url>/posts/2021/01/21/Redis%E7%AC%94%E8%AE%B015-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/</url>
    
    <content type="html"><![CDATA[<h2 id="ä¸»ä»å¤åˆ¶"><a href="#ä¸»ä»å¤åˆ¶" class="headerlink" title="ä¸»ä»å¤åˆ¶"></a>ä¸»ä»å¤åˆ¶</h2><h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><p> ä¸»ä»å¤åˆ¶ï¼Œæ˜¯æŒ‡å°†ä¸€å°RedisæœåŠ¡å™¨çš„æ•°æ®ï¼Œå¤åˆ¶åˆ°å…¶ä»–çš„RedisæœåŠ¡å™¨ã€‚å‰è€…ç§°ä¸ºä¸»èŠ‚ç‚¹ï¼ˆMaster/Leaderï¼‰,åè€…ç§°ä¸ºä»èŠ‚ç‚¹ï¼ˆSlave/Followerï¼‰ï¼Œ æ•°æ®çš„å¤åˆ¶æ˜¯å•å‘çš„ï¼åªèƒ½ç”±ä¸»èŠ‚ç‚¹å¤åˆ¶åˆ°ä»èŠ‚ç‚¹ï¼ˆä¸»èŠ‚ç‚¹ä»¥å†™ä¸ºä¸»ã€ä»èŠ‚ç‚¹ä»¥è¯»ä¸ºä¸»ï¼‰ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯å°RedisæœåŠ¡å™¨éƒ½æ˜¯ä¸»èŠ‚ç‚¹ï¼Œä¸€ä¸ªä¸»èŠ‚ç‚¹å¯ä»¥æœ‰0ä¸ªæˆ–è€…å¤šä¸ªä»èŠ‚ç‚¹ï¼Œä½†æ¯ä¸ªä»èŠ‚ç‚¹åªèƒ½ç”±ä¸€ä¸ªä¸»èŠ‚ç‚¹ã€‚</p><h3 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h3><ol><li>æ•°æ®å†—ä½™ï¼šä¸»ä»å¤åˆ¶å®ç°äº†æ•°æ®çš„çƒ­å¤‡ä»½ï¼Œæ˜¯æŒä¹…åŒ–ä¹‹å¤–çš„ä¸€ç§æ•°æ®å†—ä½™çš„æ–¹å¼ã€‚</li><li>æ•…éšœæ¢å¤ï¼šå½“ä¸»èŠ‚ç‚¹æ•…éšœæ—¶ï¼Œä»èŠ‚ç‚¹å¯ä»¥æš‚æ—¶æ›¿ä»£ä¸»èŠ‚ç‚¹æä¾›æœåŠ¡ï¼Œæ˜¯ä¸€ç§æœåŠ¡å†—ä½™çš„æ–¹å¼</li><li>è´Ÿè½½å‡è¡¡ï¼šåœ¨ä¸»ä»å¤åˆ¶çš„åŸºç¡€ä¸Šï¼Œé…åˆè¯»å†™åˆ†ç¦»ï¼Œç”±ä¸»èŠ‚ç‚¹è¿›è¡Œå†™æ“ä½œï¼Œä»èŠ‚ç‚¹è¿›è¡Œè¯»æ“ä½œï¼Œåˆ†æ‹…æœåŠ¡å™¨çš„è´Ÿè½½ï¼›å°¤å…¶æ˜¯åœ¨å¤šè¯»å°‘å†™çš„åœºæ™¯ä¸‹ï¼Œé€šè¿‡å¤šä¸ªä»èŠ‚ç‚¹åˆ†æ‹…è´Ÿè½½ï¼Œæé«˜å¹¶å‘é‡ã€‚</li><li>é«˜å¯ç”¨åŸºçŸ³ï¼šä¸»ä»å¤åˆ¶è¿˜æ˜¯å“¨å…µå’Œé›†ç¾¤èƒ½å¤Ÿå®æ–½çš„åŸºç¡€ã€‚</li></ol><h3 id="ä¸ºä»€ä¹ˆä½¿ç”¨é›†ç¾¤"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨é›†ç¾¤" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨é›†ç¾¤"></a>ä¸ºä»€ä¹ˆä½¿ç”¨é›†ç¾¤</h3><ol><li>å•å°æœåŠ¡å™¨éš¾ä»¥è´Ÿè½½å¤§é‡çš„è¯·æ±‚</li><li>å•å°æœåŠ¡å™¨æ•…éšœç‡é«˜ï¼Œç³»ç»Ÿå´©åæ¦‚ç‡å¤§</li><li>å•å°æœåŠ¡å™¨å†…å­˜å®¹é‡æœ‰é™ã€‚</li></ol><h3 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h3><p>æˆ‘ä»¬åœ¨è®²è§£é…ç½®æ–‡ä»¶çš„æ—¶å€™ï¼Œæ³¨æ„åˆ°æœ‰ä¸€ä¸ª<code>replication</code>æ¨¡å— (è§Redis.confä¸­ç¬¬8æ¡)</p><p>æŸ¥çœ‹å½“å‰åº“çš„ä¿¡æ¯ï¼š<code>info replication</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">127.0.0.1:6379&gt; info replication<br><span class="hljs-comment"># Replication</span><br>role:master <span class="hljs-comment"># è§’è‰²</span><br>connected_slaves:0 <span class="hljs-comment"># ä»æœºæ•°é‡</span><br>master_replid:3b54deef5b7b7b7f7dd8acefa23be48879b4fcff<br>master_replid2:0000000000000000000000000000000000000000<br>master_repl_offset:0<br>second_repl_offset:-1<br>repl_backlog_active:0<br>repl_backlog_size:1048576<br>repl_backlog_first_byte_offset:0<br>repl_backlog_histlen:0<br></code></pre></td></tr></table></figure><p>æ—¢ç„¶éœ€è¦å¯åŠ¨å¤šä¸ªæœåŠ¡ï¼Œå°±éœ€è¦å¤šä¸ªé…ç½®æ–‡ä»¶ã€‚æ¯ä¸ªé…ç½®æ–‡ä»¶å¯¹åº”ä¿®æ”¹ä»¥ä¸‹ä¿¡æ¯ï¼š</p><ul><li>ç«¯å£å·</li><li>pidæ–‡ä»¶å</li><li>æ—¥å¿—æ–‡ä»¶å</li><li>rdbæ–‡ä»¶å</li></ul><p>å¯åŠ¨å•æœºå¤šæœåŠ¡é›†ç¾¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@iZ2zeh7ydg2bbydds175q0Z bin]<span class="hljs-comment"># ps -ef|grep redis</span><br>root     24743 24236  0 09:35 pts/0    00:00:00 redis-cli -a zuiweizhiming666 -p 6379<br>root     28082     1  0 10:27 ?        00:00:00 redis-server *:6379<br>root     28092     1  0 10:27 ?        00:00:00 redis-server *:6380<br>root     28186     1  0 10:29 ?        00:00:00 redis-server *:6381<br></code></pre></td></tr></table></figure><h3 id="ä¸€ä¸»äºŒä»é…ç½®"><a href="#ä¸€ä¸»äºŒä»é…ç½®" class="headerlink" title="ä¸€ä¸»äºŒä»é…ç½®"></a>ä¸€ä¸»äºŒä»é…ç½®</h3><p>==é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯å°RedisæœåŠ¡å™¨éƒ½æ˜¯ä¸»èŠ‚ç‚¹ï¼›==æˆ‘ä»¬ä¸€èˆ¬æƒ…å†µä¸‹åªç”¨é…ç½®ä»æœºå°±å¥½äº†ï¼</p><p>è®¤è€å¤§ï¼ä¸€ä¸»ï¼ˆ79ï¼‰äºŒä»ï¼ˆ80ï¼Œ81ï¼‰</p><p>ä½¿ç”¨<code>SLAVEOF host port</code>å°±å¯ä»¥ä¸ºä»æœºé…ç½®ä¸»æœºäº†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash">127.0.0.1:6380&gt; SLAVEOF 127.0.0.1 6379<br>OK<br>127.0.0.1:6380&gt; info replication<br><span class="hljs-comment"># Replication</span><br>role:slave<br>master_host:127.0.0.1<br>master_port:6379<br>master_link_status:up<br>master_last_io_seconds_ago:6<br>master_sync_in_progress:0<br>slave_repl_offset:3430<br>slave_priority:100<br>slave_read_only:1<br>connected_slaves:0<br>master_replid:25d6b768a387a5f2383cf016e666b5cbf1e56900<br>master_replid2:0000000000000000000000000000000000000000<br>master_repl_offset:3430<br>second_repl_offset:-1<br>repl_backlog_active:1<br>repl_backlog_size:1048576<br>repl_backlog_first_byte_offset:15<br>repl_backlog_histlen:3416<br></code></pre></td></tr></table></figure><p>ç„¶åä¸»æœºä¸Šä¹Ÿèƒ½çœ‹åˆ°ä»æœºçš„çŠ¶æ€ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">127.0.0.1:6379&gt; info replication<br><span class="hljs-comment"># Replication</span><br>role:master<br>connected_slaves:2<br>slave0:ip=127.0.0.1,port=6381,state=online,offset=28,lag=1<br>slave1:ip=127.0.0.1,port=6380,state=online,offset=28,lag=1<br>master_replid:25d6b768a387a5f2383cf016e666b5cbf1e56900<br>master_replid2:0000000000000000000000000000000000000000<br>master_repl_offset:28<br>second_repl_offset:-1<br>repl_backlog_active:1<br>repl_backlog_size:1048576<br>repl_backlog_first_byte_offset:1<br>repl_backlog_histlen:28<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬è¿™é‡Œæ˜¯ä½¿ç”¨å‘½ä»¤æ­å»ºï¼Œæ˜¯æš‚æ—¶çš„ï¼Œ==çœŸå®å¼€å‘ä¸­åº”è¯¥åœ¨ä»æœºçš„é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼Œ==è¿™æ ·çš„è¯æ˜¯æ°¸ä¹…çš„ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B015-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/conf.png" alt="é…ç½®æ–‡ä»¶é…ç½®"></p><h3 id="ä½¿ç”¨è§„åˆ™"><a href="#ä½¿ç”¨è§„åˆ™" class="headerlink" title="ä½¿ç”¨è§„åˆ™"></a>ä½¿ç”¨è§„åˆ™</h3><ol><li><p>ä»æœºåªèƒ½è¯»ï¼Œä¸èƒ½å†™ï¼Œä¸»æœºå¯è¯»å¯å†™ä½†æ˜¯å¤šç”¨äºå†™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"> 127.0.0.1:6381&gt; <span class="hljs-built_in">set</span> name sakura <span class="hljs-comment"># ä»æœº6381å†™å…¥å¤±è´¥</span><br>(error) READONLY You can<span class="hljs-string">&#x27;t write against a read only replica.</span><br><span class="hljs-string"></span><br><span class="hljs-string">127.0.0.1:6380&gt; set name sakura # ä»æœº6380å†™å…¥å¤±è´¥</span><br><span class="hljs-string">(error) READONLY You can&#x27;</span>t write against a <span class="hljs-built_in">read</span> only replica.<br><br>127.0.0.1:6379&gt; <span class="hljs-built_in">set</span> name sakura<br>OK<br>127.0.0.1:6379&gt; get name<br><span class="hljs-string">&quot;sakura&quot;</span><br></code></pre></td></tr></table></figure></li><li><p>å½“ä¸»æœºæ–­ç”µå®•æœºåï¼Œé»˜è®¤æƒ…å†µä¸‹ä»æœºçš„è§’è‰²ä¸ä¼šå‘ç”Ÿå˜åŒ– ï¼Œé›†ç¾¤ä¸­åªæ˜¯å¤±å»äº†å†™æ“ä½œï¼Œå½“ä¸»æœºæ¢å¤ä»¥åï¼Œåˆä¼šè¿æ¥ä¸Šä»æœºæ¢å¤åŸçŠ¶ã€‚</p></li><li><p>å½“ä»æœºæ–­ç”µå®•æœºåï¼Œè‹¥ä¸æ˜¯ä½¿ç”¨é…ç½®æ–‡ä»¶é…ç½®çš„ä»æœºï¼Œå†æ¬¡å¯åŠ¨åä½œä¸ºä¸»æœºæ˜¯æ— æ³•è·å–ä¹‹å‰ä¸»æœºçš„æ•°æ®çš„ï¼Œè‹¥æ­¤æ—¶é‡æ–°é…ç½®ç§°ä¸ºä»æœºï¼Œåˆå¯ä»¥è·å–åˆ°ä¸»æœºçš„æ‰€æœ‰æ•°æ®ã€‚è¿™é‡Œå°±è¦æåˆ°ä¸€ä¸ªåŒæ­¥åŸç†ã€‚</p></li><li><p>ç¬¬äºŒæ¡ä¸­æåˆ°ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œä¸»æœºæ•…éšœåï¼Œä¸ä¼šå‡ºç°æ–°çš„ä¸»æœºï¼Œæœ‰ä¸¤ç§æ–¹å¼å¯ä»¥äº§ç”Ÿæ–°çš„ä¸»æœºï¼š</p><ul><li>ä»æœºæ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤<code>slaveof no one</code>,è¿™æ ·æ‰§è¡Œä»¥åä»æœºä¼šç‹¬ç«‹å‡ºæ¥æˆä¸ºä¸€ä¸ªä¸»æœº</li><li>ä½¿ç”¨å“¨å…µæ¨¡å¼ï¼ˆè‡ªåŠ¨é€‰ä¸¾ï¼‰</li></ul></li></ol><blockquote><p>å¦‚æœæ²¡æœ‰è€å¤§äº†ï¼Œè¿™ä¸ªæ—¶å€™èƒ½ä¸èƒ½é€‰æ‹©å‡ºæ¥ä¸€ä¸ªè€å¤§å‘¢ï¼Ÿæ‰‹åŠ¨ï¼</p></blockquote><p>å¦‚æœä¸»æœºæ–­å¼€äº†è¿æ¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>SLAVEOF no one</code>è®©è‡ªå·±å˜æˆä¸»æœºï¼å…¶ä»–çš„èŠ‚ç‚¹å°±å¯ä»¥æ‰‹åŠ¨è¿æ¥åˆ°æœ€æ–°çš„ä¸»èŠ‚ç‚¹ï¼ˆæ‰‹åŠ¨ï¼‰ï¼å¦‚æœè¿™ä¸ªæ—¶å€™è€å¤§ä¿®å¤äº†ï¼Œé‚£ä¹ˆä¹…é‡æ–°è¿æ¥ï¼</p>]]></content>
    
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Redisç¬”è®°14-å‘å¸ƒä¸è®¢é˜…</title>
    <link href="/posts/2021/01/21/Redis%E7%AC%94%E8%AE%B014-%E5%8F%91%E5%B8%83%E4%B8%8E%E8%AE%A2%E9%98%85/"/>
    <url>/posts/2021/01/21/Redis%E7%AC%94%E8%AE%B014-%E5%8F%91%E5%B8%83%E4%B8%8E%E8%AE%A2%E9%98%85/</url>
    
    <content type="html"><![CDATA[<h2 id="å‘å¸ƒä¸è®¢é˜…"><a href="#å‘å¸ƒä¸è®¢é˜…" class="headerlink" title="å‘å¸ƒä¸è®¢é˜…"></a>å‘å¸ƒä¸è®¢é˜…</h2><p>Redis å‘å¸ƒè®¢é˜…(pub/sub)æ˜¯ä¸€ç§æ¶ˆæ¯é€šä¿¡æ¨¡å¼ï¼šå‘é€è€…(pub)å‘é€æ¶ˆæ¯ï¼Œè®¢é˜…è€…(sub)æ¥æ”¶æ¶ˆæ¯ã€‚</p><p>ä¸‹å›¾å±•ç¤ºäº†é¢‘é“ channel1 ï¼Œ ä»¥åŠè®¢é˜…è¿™ä¸ªé¢‘é“çš„ä¸‰ä¸ªå®¢æˆ·ç«¯ â€”â€” client2 ã€ client5 å’Œ client1 ä¹‹é—´çš„å…³ç³»ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B014-%E5%8F%91%E5%B8%83%E4%B8%8E%E8%AE%A2%E9%98%85/1.png" alt="å…³ç³»"></p><p>å½“æœ‰æ–°æ¶ˆæ¯é€šè¿‡ PUBLISH å‘½ä»¤å‘é€ç»™é¢‘é“ channel1 æ—¶ï¼Œ è¿™ä¸ªæ¶ˆæ¯å°±ä¼šè¢«å‘é€ç»™è®¢é˜…å®ƒçš„ä¸‰ä¸ªå®¢æˆ·ç«¯ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B014-%E5%8F%91%E5%B8%83%E4%B8%8E%E8%AE%A2%E9%98%85/2.png" alt="å…³ç³»"></p><h3 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h3><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>PSUBSCRIBE pattern [pattern..]</code></td><td>è®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªç¬¦åˆç»™å®šæ¨¡å¼çš„é¢‘é“ã€‚</td></tr><tr><td><code>PUNSUBSCRIBE pattern [pattern..]</code></td><td>é€€è®¢ä¸€ä¸ªæˆ–å¤šä¸ªç¬¦åˆç»™å®šæ¨¡å¼çš„é¢‘é“ã€‚</td></tr><tr><td><code>PUBSUB subcommand [argument[argument]]</code></td><td>æŸ¥çœ‹è®¢é˜…ä¸å‘å¸ƒç³»ç»ŸçŠ¶æ€ã€‚</td></tr><tr><td><code>PUBLISH channel message</code></td><td>å‘æŒ‡å®šé¢‘é“å‘å¸ƒæ¶ˆæ¯</td></tr><tr><td><code>SUBSCRIBE channel [channel..]</code></td><td>è®¢é˜…ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªé¢‘é“ã€‚</td></tr><tr><td><code>SUBSCRIBE channel [channel..]</code></td><td>é€€è®¢ä¸€ä¸ªæˆ–å¤šä¸ªé¢‘é“</td></tr></tbody></table><h3 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash">------------è®¢é˜…ç«¯---------------------- <br>127.0.0.1:6379&gt; SUBSCRIBE LOL   <span class="hljs-comment"># è®¢é˜…LOLé¢‘é“</span><br>Reading messages... (press Ctrl-C to quit) <span class="hljs-comment"># ç­‰å¾…æ¥æ”¶æ¶ˆæ¯</span><br>1) <span class="hljs-string">&quot;subscribe&quot;</span> <span class="hljs-comment"># è®¢é˜…æˆåŠŸçš„æ¶ˆæ¯</span><br>2) <span class="hljs-string">&quot;LOL&quot;</span><br>3) (<span class="hljs-built_in">integer</span>) 1<br>1) <span class="hljs-string">&quot;message&quot;</span><br>2) <span class="hljs-string">&quot;LOL&quot;</span>       <span class="hljs-comment"># æ¥æ”¶åˆ°æ¥è‡ªLOLé¢‘é“çš„æ¶ˆæ¯ &quot;Atrox&quot;</span><br>3) <span class="hljs-string">&quot;Atrox&quot;</span><br>1) <span class="hljs-string">&quot;message&quot;</span><br>2) <span class="hljs-string">&quot;LOL&quot;</span><br>3) <span class="hljs-string">&quot;Hello,Ali&quot;</span>  <span class="hljs-comment"># æ¥æ”¶åˆ°æ¥è‡ªLOLé¢‘é“çš„æ¶ˆæ¯ &quot;Hello,Ali&quot;</span><br><br>--------------æ¶ˆæ¯å‘å¸ƒç«¯-------------------<br>127.0.0.1:6379&gt; PUBLISH LOL  <span class="hljs-string">&quot;Atrox&quot;</span>  <span class="hljs-comment"># å‘å¸ƒæ¶ˆæ¯åˆ°LOLé¢‘é“</span><br>(<span class="hljs-built_in">integer</span>) 1<br>127.0.0.1:6379&gt; PUBLISH LOL <span class="hljs-string">&quot;Hello,Ali&quot;</span> <span class="hljs-comment"># å‘å¸ƒæ¶ˆæ¯åˆ°LOLé¢‘é“</span><br>(<span class="hljs-built_in">integer</span>) 1<br><br>-----------------æŸ¥çœ‹æ´»è·ƒçš„é¢‘é“------------<br>127.0.0.1:6379&gt; PUBSUB channels<br>1) <span class="hljs-string">&quot;LOL&quot;</span><br></code></pre></td></tr></table></figure><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>æ¯ä¸ª Redis æœåŠ¡å™¨è¿›ç¨‹éƒ½ç»´æŒç€ä¸€ä¸ªè¡¨ç¤ºæœåŠ¡å™¨çŠ¶æ€çš„ redis.h/redisServer ç»“æ„ï¼Œ ç»“æ„çš„ pubsub_channels å±æ€§æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œ è¿™ä¸ªå­—å…¸å°±ç”¨äºä¿å­˜è®¢é˜…é¢‘é“çš„ä¿¡æ¯ï¼Œå…¶ä¸­ï¼Œå­—å…¸çš„é”®ä¸ºæ­£åœ¨è¢«è®¢é˜…çš„é¢‘é“ï¼Œ è€Œå­—å…¸çš„å€¼åˆ™æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œ é“¾è¡¨ä¸­ä¿å­˜äº†æ‰€æœ‰è®¢é˜…è¿™ä¸ªé¢‘é“çš„å®¢æˆ·ç«¯ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B014-%E5%8F%91%E5%B8%83%E4%B8%8E%E8%AE%A2%E9%98%85/3.png" alt="åŸç†"></p><p>å®¢æˆ·ç«¯è®¢é˜…ï¼Œå°±è¢«é“¾æ¥åˆ°å¯¹åº”é¢‘é“çš„é“¾è¡¨çš„å°¾éƒ¨ï¼Œé€€è®¢åˆ™å°±æ˜¯å°†å®¢æˆ·ç«¯èŠ‚ç‚¹ä»é“¾è¡¨ä¸­ç§»é™¤ã€‚</p><h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h3><ol><li>å¦‚æœä¸€ä¸ªå®¢æˆ·ç«¯è®¢é˜…äº†é¢‘é“ï¼Œä½†è‡ªå·±è¯»å–æ¶ˆæ¯çš„é€Ÿåº¦å´ä¸å¤Ÿå¿«çš„è¯ï¼Œé‚£ä¹ˆä¸æ–­ç§¯å‹çš„æ¶ˆæ¯ä¼šä½¿redisè¾“å‡ºç¼“å†²åŒºçš„ä½“ç§¯å˜å¾—è¶Šæ¥è¶Šå¤§ï¼Œè¿™å¯èƒ½ä½¿å¾—redisæœ¬èº«çš„é€Ÿåº¦å˜æ…¢ï¼Œç”šè‡³ç›´æ¥å´©æºƒã€‚</li><li>è¿™å’Œæ•°æ®ä¼ è¾“å¯é æ€§æœ‰å…³ï¼Œå¦‚æœåœ¨è®¢é˜…æ–¹æ–­çº¿ï¼Œé‚£ä¹ˆä»–å°†ä¼šä¸¢å¤±æ‰€æœ‰åœ¨çŸ­çº¿æœŸé—´å‘å¸ƒè€…å‘å¸ƒçš„æ¶ˆæ¯ã€‚</li></ol><h3 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h3><ol><li>æ¶ˆæ¯è®¢é˜…ï¼šå…¬ä¼—å·è®¢é˜…ï¼Œå¾®åšå…³æ³¨ç­‰ç­‰ï¼ˆèµ·å§‹æ›´å¤šæ˜¯ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¥è¿›è¡Œå®ç°ï¼‰</li><li>å¤šäººåœ¨çº¿èŠå¤©å®¤ã€‚</li></ol><p>ç¨å¾®å¤æ‚çš„åœºæ™¯ï¼Œæˆ‘ä»¬å°±ä¼šä½¿ç”¨æ¶ˆæ¯ä¸­é—´ä»¶MQå¤„ç†ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Redisç¬”è®°13-Redisçš„æŒä¹…åŒ–-AOF</title>
    <link href="/posts/2021/01/20/Redis%E7%AC%94%E8%AE%B013-Redis%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96-AOF/"/>
    <url>/posts/2021/01/20/Redis%E7%AC%94%E8%AE%B013-Redis%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96-AOF/</url>
    
    <content type="html"><![CDATA[<h2 id="æŒä¹…åŒ–AOF"><a href="#æŒä¹…åŒ–AOF" class="headerlink" title="æŒä¹…åŒ–AOF"></a>æŒä¹…åŒ–AOF</h2><p><strong>Append Only File</strong></p><p>å°†æˆ‘ä»¬æ‰€æœ‰çš„å‘½ä»¤éƒ½è®°å½•ä¸‹æ¥ï¼Œhistoryï¼Œæ¢å¤çš„æ—¶å€™å°±æŠŠè¿™ä¸ªæ–‡ä»¶å…¨éƒ¨å†æ‰§è¡Œä¸€é</p><blockquote><p>ä»¥æ—¥å¿—çš„å½¢å¼æ¥è®°å½•æ¯ä¸ªå†™çš„æ“ä½œï¼Œå°†Redisæ‰§è¡Œè¿‡çš„æ‰€æœ‰æŒ‡ä»¤è®°å½•ä¸‹æ¥ï¼ˆè¯»æ“ä½œä¸è®°å½•ï¼‰ï¼Œåªè®¸è¿½åŠ æ–‡ä»¶ä½†ä¸å¯ä»¥æ”¹å†™æ–‡ä»¶ï¼Œrediså¯åŠ¨ä¹‹åˆä¼šè¯»å–è¯¥æ–‡ä»¶é‡æ–°æ„å»ºæ•°æ®ï¼Œæ¢è¨€ä¹‹ï¼Œredisé‡å¯çš„è¯å°±æ ¹æ®æ—¥å¿—æ–‡ä»¶çš„å†…å®¹å°†å†™æŒ‡ä»¤ä»å‰åˆ°åæ‰§è¡Œä¸€æ¬¡ä»¥å®Œæˆæ•°æ®çš„æ¢å¤å·¥ä½œã€‚</p></blockquote><h3 id="ä»€ä¹ˆæ˜¯AOF"><a href="#ä»€ä¹ˆæ˜¯AOF" class="headerlink" title="ä»€ä¹ˆæ˜¯AOF"></a>ä»€ä¹ˆæ˜¯AOF</h3><p> å¿«ç…§åŠŸèƒ½ï¼ˆRDBï¼‰å¹¶ä¸æ˜¯éå¸¸è€ä¹…ï¼ˆdurableï¼‰ï¼š å¦‚æœ Redis å› ä¸ºæŸäº›åŸå› è€Œé€ æˆæ•…éšœåœæœºï¼Œ é‚£ä¹ˆæœåŠ¡å™¨å°†ä¸¢å¤±æœ€è¿‘å†™å…¥ã€ä»¥åŠæœªä¿å­˜åˆ°å¿«ç…§ä¸­çš„é‚£äº›æ•°æ®ã€‚ ä» 1.1 ç‰ˆæœ¬å¼€å§‹ï¼Œ Redis å¢åŠ äº†ä¸€ç§å®Œå…¨è€ä¹…çš„æŒä¹…åŒ–æ–¹å¼ï¼š AOF æŒä¹…åŒ–ã€‚</p><p>å¦‚æœè¦ä½¿ç”¨AOFï¼Œéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">appendonly no <span class="hljs-comment"># é»˜è®¤ä¸å¼€å¯aof</span><br><br>appenfilename <span class="hljs-string">&quot;appendonly.aof&quot;</span> é»˜è®¤æ–‡ä»¶å<br></code></pre></td></tr></table></figure><p>ppendonly no yes`åˆ™è¡¨ç¤ºå¯ç”¨AOF</p><p>é»˜è®¤æ˜¯ä¸å¼€å¯çš„ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨é…ç½®ï¼Œç„¶åé‡å¯redisï¼Œå°±å¯ä»¥ç”Ÿæ•ˆäº†ï¼</p><p>å¦‚æœè¿™ä¸ªaofæ–‡ä»¶æœ‰é”™ä½ï¼Œè¿™æ—¶å€™redisæ˜¯å¯åŠ¨ä¸èµ·æ¥çš„ï¼Œæˆ‘éœ€è¦ä¿®æ”¹è¿™ä¸ªaofæ–‡ä»¶</p><p>redisç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå·¥å…·<code>redis-check-aof --fix</code></p><blockquote><p>ä¼˜ç‚¹å’Œç¼ºç‚¹</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">appendonly yes  <span class="hljs-comment"># é»˜è®¤æ˜¯ä¸å¼€å¯aofæ¨¡å¼çš„ï¼Œé»˜è®¤æ˜¯ä½¿ç”¨rdbæ–¹å¼æŒä¹…åŒ–çš„ï¼Œåœ¨å¤§éƒ¨åˆ†çš„æƒ…å†µä¸‹ï¼Œrdbå®Œå…¨å¤Ÿç”¨</span><br>appendfilename <span class="hljs-string">&quot;appendonly.aof&quot;</span><br><br><span class="hljs-comment"># appendfsync always # æ¯æ¬¡ä¿®æ”¹éƒ½ä¼šsync æ¶ˆè€—æ€§èƒ½</span><br>appendfsync everysec <span class="hljs-comment"># æ¯ç§’æ‰§è¡Œä¸€æ¬¡ sync å¯èƒ½ä¼šä¸¢å¤±è¿™ä¸€ç§’çš„æ•°æ®</span><br><span class="hljs-comment"># appendfsync no # ä¸æ‰§è¡Œ sync ,è¿™æ—¶å€™æ“ä½œç³»ç»Ÿè‡ªå·±åŒæ­¥æ•°æ®ï¼Œé€Ÿåº¦æœ€å¿«</span><br></code></pre></td></tr></table></figure><p><strong>ä¼˜ç‚¹</strong></p><ol><li>æ¯ä¸€æ¬¡ä¿®æ”¹éƒ½ä¼šåŒæ­¥ï¼Œæ–‡ä»¶çš„å®Œæ•´æ€§ä¼šæ›´åŠ å¥½</li><li>æ²¡ç§’åŒæ­¥ä¸€æ¬¡ï¼Œå¯èƒ½ä¼šä¸¢å¤±ä¸€ç§’çš„æ•°æ®</li><li>ä»ä¸åŒæ­¥ï¼Œæ•ˆç‡æœ€é«˜</li></ol><p><strong>ç¼ºç‚¹</strong></p><ol><li>ç›¸å¯¹äºæ•°æ®æ–‡ä»¶æ¥è¯´ï¼Œaofè¿œè¿œå¤§äºrdbï¼Œä¿®å¤é€Ÿåº¦æ¯”rdbæ…¢ï¼</li><li>Aofè¿è¡Œæ•ˆç‡ä¹Ÿè¦æ¯”rdbæ…¢ï¼Œæ‰€ä»¥æˆ‘ä»¬redisé»˜è®¤çš„é…ç½®å°±æ˜¯rdbæŒä¹…åŒ–</li></ol><h2 id="RDBå’ŒAOFé€‰æ‹©"><a href="#RDBå’ŒAOFé€‰æ‹©" class="headerlink" title="RDBå’ŒAOFé€‰æ‹©"></a>RDBå’ŒAOFé€‰æ‹©</h2><h3 id="RDB-å’Œ-AOF-å¯¹æ¯”"><a href="#RDB-å’Œ-AOF-å¯¹æ¯”" class="headerlink" title="RDB å’Œ AOF å¯¹æ¯”"></a>RDB å’Œ AOF å¯¹æ¯”</h3><table><thead><tr><th>RDB</th><th>AOF</th><th></th></tr></thead><tbody><tr><td>å¯åŠ¨ä¼˜å…ˆçº§</td><td>ä½</td><td>é«˜</td></tr><tr><td>ä½“ç§¯</td><td>å°</td><td>å¤§</td></tr><tr><td>æ¢å¤é€Ÿåº¦</td><td>å¿«</td><td>æ…¢</td></tr><tr><td>æ•°æ®å®‰å…¨æ€§</td><td>ä¸¢æ•°æ®</td><td>æ ¹æ®ç­–ç•¥å†³å®š</td></tr></tbody></table><h3 id="å¦‚ä½•é€‰æ‹©ä½¿ç”¨å“ªç§æŒä¹…åŒ–æ–¹å¼ï¼Ÿ"><a href="#å¦‚ä½•é€‰æ‹©ä½¿ç”¨å“ªç§æŒä¹…åŒ–æ–¹å¼ï¼Ÿ" class="headerlink" title="å¦‚ä½•é€‰æ‹©ä½¿ç”¨å“ªç§æŒä¹…åŒ–æ–¹å¼ï¼Ÿ"></a>å¦‚ä½•é€‰æ‹©ä½¿ç”¨å“ªç§æŒä¹…åŒ–æ–¹å¼ï¼Ÿ</h3><p>ä¸€èˆ¬æ¥è¯´ï¼Œ å¦‚æœæƒ³è¾¾åˆ°è¶³ä»¥åª²ç¾ PostgreSQL çš„æ•°æ®å®‰å…¨æ€§ï¼Œ ä½ åº”è¯¥åŒæ—¶ä½¿ç”¨ä¸¤ç§æŒä¹…åŒ–åŠŸèƒ½ã€‚</p><p>å¦‚æœä½ éå¸¸å…³å¿ƒä½ çš„æ•°æ®ï¼Œ ä½†ä»ç„¶å¯ä»¥æ‰¿å—æ•°åˆ†é’Ÿä»¥å†…çš„æ•°æ®ä¸¢å¤±ï¼Œ é‚£ä¹ˆä½ å¯ä»¥åªä½¿ç”¨ RDB æŒä¹…åŒ–ã€‚</p><p>æœ‰å¾ˆå¤šç”¨æˆ·éƒ½åªä½¿ç”¨ AOF æŒä¹…åŒ–ï¼Œ ä½†å¹¶ä¸æ¨èè¿™ç§æ–¹å¼ï¼š å› ä¸ºå®šæ—¶ç”Ÿæˆ RDB å¿«ç…§ï¼ˆsnapshotï¼‰éå¸¸ä¾¿äºè¿›è¡Œæ•°æ®åº“å¤‡ä»½ï¼Œ å¹¶ä¸” RDB æ¢å¤æ•°æ®é›†çš„é€Ÿåº¦ä¹Ÿè¦æ¯” AOF æ¢å¤çš„é€Ÿåº¦è¦å¿«ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Redisç¬”è®°12-Redisçš„æŒä¹…åŒ–-RDB</title>
    <link href="/posts/2021/01/20/Redis%E7%AC%94%E8%AE%B012-Redis%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96-RDB/"/>
    <url>/posts/2021/01/20/Redis%E7%AC%94%E8%AE%B012-Redis%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96-RDB/</url>
    
    <content type="html"><![CDATA[<h2 id="æŒä¹…åŒ–-RDB"><a href="#æŒä¹…åŒ–-RDB" class="headerlink" title="æŒä¹…åŒ–-RDB"></a>æŒä¹…åŒ–-RDB</h2><h3 id="ä»€ä¹ˆæ˜¯RDB"><a href="#ä»€ä¹ˆæ˜¯RDB" class="headerlink" title="ä»€ä¹ˆæ˜¯RDB"></a>ä»€ä¹ˆæ˜¯RDB</h3><hr><p>RDBï¼šRedis Databasesï¼Œåœ¨æŒ‡å®šæ—¶é—´é—´éš”åï¼Œå°†å†…å­˜ä¸­çš„æ•°æ®é›†å¿«ç…§å†™å…¥æ•°æ®åº“ ï¼›åœ¨æ¢å¤æ—¶å€™ï¼Œç›´æ¥è¯»å–å¿«ç…§æ–‡ä»¶ï¼Œè¿›è¡Œæ•°æ®çš„æ¢å¤ ï¼›</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B012-Redis%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96-RDB/rdb.png" alt="rdb"></p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ Redis å°†æ•°æ®åº“å¿«ç…§ä¿å­˜åœ¨åå­—ä¸º dump.rdbçš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ã€‚æ–‡ä»¶åå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œè‡ªå®šä¹‰ã€‚</p><h3 id="å·¥ä½œåŸç†"><a href="#å·¥ä½œåŸç†" class="headerlink" title="å·¥ä½œåŸç†"></a>å·¥ä½œåŸç†</h3><hr><p>åœ¨è¿›è¡Œ <strong><code>RDB</code></strong> çš„æ—¶å€™ï¼Œ**<code>redis</code>** çš„ä¸»çº¿ç¨‹æ˜¯ä¸ä¼šåš <strong><code>io</code></strong> æ“ä½œçš„ï¼Œä¸»çº¿ç¨‹ä¼š <strong><code>fork</code></strong> ä¸€ä¸ªå­çº¿ç¨‹æ¥å®Œæˆè¯¥æ“ä½œï¼›</p><ol><li><p>Redis è°ƒç”¨forksã€‚åŒæ—¶æ‹¥æœ‰çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹ã€‚</p></li><li><p>å­è¿›ç¨‹å°†æ•°æ®é›†å†™å…¥åˆ°ä¸€ä¸ªä¸´æ—¶ RDB æ–‡ä»¶ä¸­ã€‚</p></li><li><p>å½“å­è¿›ç¨‹å®Œæˆå¯¹æ–° RDB æ–‡ä»¶çš„å†™å…¥æ—¶ï¼ŒRedis ç”¨æ–° RDB æ–‡ä»¶æ›¿æ¢åŸæ¥çš„ RDB æ–‡ä»¶ï¼Œå¹¶åˆ é™¤æ—§çš„ RDB æ–‡ä»¶ã€‚</p></li></ol><p>è¿™ç§å·¥ä½œæ–¹å¼ä½¿å¾— Redis å¯ä»¥ä»å†™æ—¶å¤åˆ¶ï¼ˆcopy-on-writeï¼‰æœºåˆ¶ä¸­è·ç›Š(å› ä¸ºæ˜¯ä½¿ç”¨å­è¿›ç¨‹è¿›è¡Œå†™æ“ä½œï¼Œè€Œçˆ¶è¿›ç¨‹ä¾ç„¶å¯ä»¥æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚)</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B012-Redis%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96-RDB/rdb_reason.png" alt="rdbåŸç†"></p><h3 id="è§¦å‘æœºåˆ¶"><a href="#è§¦å‘æœºåˆ¶" class="headerlink" title="è§¦å‘æœºåˆ¶"></a>è§¦å‘æœºåˆ¶</h3><hr><ol><li>saveçš„è§„åˆ™æ»¡è¶³çš„æƒ…å†µä¸‹ï¼Œä¼šè‡ªåŠ¨è§¦å‘rdbåŸåˆ™</li><li>æ‰§è¡Œflushallå‘½ä»¤ï¼Œä¹Ÿä¼šè§¦å‘æˆ‘ä»¬çš„rdbåŸåˆ™</li><li>é€€å‡ºredisï¼Œä¹Ÿä¼šè‡ªåŠ¨äº§ç”Ÿrdbæ–‡ä»¶</li></ol><h4 id="save"><a href="#save" class="headerlink" title="save"></a>save</h4><p>ä½¿ç”¨ <code>save</code> å‘½ä»¤ï¼Œä¼šç«‹åˆ»å¯¹å½“å‰å†…å­˜ä¸­çš„æ•°æ®è¿›è¡ŒæŒä¹…åŒ– ,ä½†æ˜¯ä¼šé˜»å¡ï¼Œä¹Ÿå°±æ˜¯ä¸æ¥å—å…¶ä»–æ“ä½œäº†ï¼›</p><blockquote><p>ç”±äº <code>save</code> å‘½ä»¤æ˜¯åŒæ­¥å‘½ä»¤ï¼Œä¼šå ç”¨Redisçš„ä¸»è¿›ç¨‹ã€‚è‹¥Redisæ•°æ®éå¸¸å¤šæ—¶ï¼Œ<code>save</code>å‘½ä»¤æ‰§è¡Œé€Ÿåº¦ä¼šéå¸¸æ…¢ï¼Œé˜»å¡æ‰€æœ‰å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B012-Redis%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96-RDB/save.png" alt="save"></p><h4 id="flushallå‘½ä»¤"><a href="#flushallå‘½ä»¤" class="headerlink" title="flushallå‘½ä»¤"></a>flushallå‘½ä»¤</h4><p><code>flushall</code> å‘½ä»¤ä¹Ÿä¼šè§¦å‘æŒä¹…åŒ– ï¼›</p><h4 id="è§¦å‘æŒä¹…åŒ–è§„åˆ™"><a href="#è§¦å‘æŒä¹…åŒ–è§„åˆ™" class="headerlink" title="è§¦å‘æŒä¹…åŒ–è§„åˆ™"></a>è§¦å‘æŒä¹…åŒ–è§„åˆ™</h4><p>æ»¡è¶³é…ç½®æ¡ä»¶ä¸­çš„è§¦å‘æ¡ä»¶ ï¼›</p><blockquote><p>å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶å¯¹ Redis è¿›è¡Œè®¾ç½®ï¼Œ è®©å®ƒåœ¨â€œ N ç§’å†…æ•°æ®é›†è‡³å°‘æœ‰ M ä¸ªæ”¹åŠ¨â€è¿™ä¸€æ¡ä»¶è¢«æ»¡è¶³æ—¶ï¼Œ è‡ªåŠ¨è¿›è¡Œæ•°æ®é›†ä¿å­˜æ“ä½œã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">save 900 1<br>save 300 10<br>save 60 10000<br></code></pre></td></tr></table></figure></blockquote><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B012-Redis%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96-RDB/tiaojian.png" alt="æ»¡è¶³æ¡ä»¶"></p><h4 id="bgsave"><a href="#bgsave" class="headerlink" title="bgsave"></a>bgsave</h4><p><code>bgsave</code> æ˜¯å¼‚æ­¥è¿›è¡Œï¼Œè¿›è¡ŒæŒä¹…åŒ–çš„æ—¶å€™ï¼Œ<code>redis</code> è¿˜å¯ä»¥å°†ç»§ç»­å“åº”å®¢æˆ·ç«¯è¯·æ±‚ ï¼›</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B012-Redis%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96-RDB/bgsave.png" alt="bgsave"></p><p><strong>bgsaveå’Œsaveå¯¹æ¯”</strong></p><table><thead><tr><th>å‘½ä»¤</th><th>save</th><th>bgsave</th></tr></thead><tbody><tr><td>IOç±»å‹</td><td>åŒæ­¥</td><td>å¼‚æ­¥</td></tr><tr><td>é˜»å¡ï¼Ÿ</td><td>æ˜¯</td><td>æ˜¯ï¼ˆé˜»å¡å‘ç”Ÿåœ¨fock()ï¼Œé€šå¸¸éå¸¸å¿«ï¼‰</td></tr><tr><td>å¤æ‚åº¦</td><td>O(n)</td><td>O(n)</td></tr><tr><td>ä¼˜ç‚¹</td><td>ä¸ä¼šæ¶ˆè€—é¢å¤–çš„å†…å­˜</td><td>ä¸é˜»å¡å®¢æˆ·ç«¯å‘½ä»¤</td></tr><tr><td>ç¼ºç‚¹</td><td>é˜»å¡å®¢æˆ·ç«¯å‘½ä»¤</td><td>éœ€è¦fockå­è¿›ç¨‹ï¼Œæ¶ˆè€—å†…å­˜</td></tr></tbody></table><h3 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h3><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ol><li>é€‚åˆå¤§è§„æ¨¡çš„æ•°æ®æ¢å¤</li><li>å¯¹æ•°æ®çš„å®Œæ•´æ€§è¦æ±‚ä¸é«˜</li></ol><p><strong>ç¼ºç‚¹ï¼š</strong></p><ol><li>éœ€è¦ä¸€å®šçš„æ—¶é—´é—´éš”è¿›è¡Œæ“ä½œï¼Œå¦‚æœredisæ„å¤–å®•æœºäº†ï¼Œè¿™ä¸ªæœ€åä¸€æ¬¡ä¿®æ”¹çš„æ•°æ®å°±æ²¡æœ‰äº†ã€‚</li><li>forkè¿›ç¨‹çš„æ—¶å€™ï¼Œä¼šå ç”¨ä¸€å®šçš„å†…å®¹ç©ºé—´ã€‚</li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Redisç¬”è®°11-Redis.confé…ç½®æ–‡ä»¶åˆ†æ</title>
    <link href="/posts/2021/01/20/Redis%E7%AC%94%E8%AE%B011-Redis-conf%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%88%86%E6%9E%90/"/>
    <url>/posts/2021/01/20/Redis%E7%AC%94%E8%AE%B011-Redis-conf%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%88%86%E6%9E%90/</url>
    
    <content type="html"><![CDATA[<h2 id="Redis-configåˆ†æ"><a href="#Redis-configåˆ†æ" class="headerlink" title="Redis.configåˆ†æ"></a>Redis.configåˆ†æ</h2><blockquote><p>å®¹é‡å•ä½ä¸åŒºåˆ†å¤§å°å†™ï¼ŒGå’ŒGBæœ‰åŒºåˆ«</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Note on units: when memory size is needed, it is possible to specify</span><br><span class="hljs-comment"># it in the usual form of 1k 5GB 4M and so forth:</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># 1k =&gt; 1000 bytes</span><br><span class="hljs-comment"># 1kb =&gt; 1024 bytes</span><br><span class="hljs-comment"># 1m =&gt; 1000000 bytes</span><br><span class="hljs-comment"># 1mb =&gt; 1024*1024 bytes</span><br><span class="hljs-comment"># 1g =&gt; 1000000000 bytes</span><br><span class="hljs-comment"># 1gb =&gt; 1024*1024*1024 bytes</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># units are case insensitive so 1GB 1Gb 1gB are all the same.</span><br></code></pre></td></tr></table></figure><blockquote><p>å¯ä»¥ä½¿ç”¨ include ç»„åˆå¤šä¸ªé…ç½®æ–‡ä»¶</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Include one or more other config files here.  This is useful if you</span><br><span class="hljs-comment"># have a standard template that goes to all Redis servers but also need</span><br><span class="hljs-comment"># to customize a few per-server settings.  Include files can include</span><br><span class="hljs-comment"># other files, so use this wisely.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Note that option &quot;include&quot; won&#x27;t be rewritten by command &quot;CONFIG REWRITE&quot;</span><br><span class="hljs-comment"># from admin or Redis Sentinel. Since Redis always uses the last processed</span><br><span class="hljs-comment"># line as value of a configuration directive, you&#x27;d better put includes</span><br><span class="hljs-comment"># at the beginning of this file to avoid overwriting config change at runtime.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># If instead you are interested in using includes to override configuration</span><br><span class="hljs-comment"># options, it is better to use include as the last line.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># include /path/to/local.conf</span><br><span class="hljs-comment"># include /path/to/other.conf</span><br></code></pre></td></tr></table></figure><blockquote><p>ç½‘è·¯é…ç½®</p></blockquote><p>ç»‘å®šip</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">bind</span> 127.0.0.1      <span class="hljs-comment"># ç»‘å®šip</span><br>protected-mode yes  <span class="hljs-comment"># ä¿æŠ¤æ¨¡å¼</span><br>port 6379           <span class="hljs-comment"># ç«¯å£ </span><br><br></code></pre></td></tr></table></figure><blockquote><p>é€šç”¨é…ç½®</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">daemonize yes       <span class="hljs-comment"># ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼è¿è¡Œï¼Œé»˜è®¤æ˜¯noï¼Œæˆ‘ä»¬éœ€è¦å¼€å¯ä¸ºyes</span><br>pidfile /var/run/redis_6379.pid  <span class="hljs-comment"># å¦‚æœä»¥åå°æ–¹å¼è¿è¡Œï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®šä¸€ä¸ª pid æ–‡ä»¶</span><br></code></pre></td></tr></table></figure><blockquote><p>æ—¥å¿—è¾“å‡ºçº§åˆ«</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Specify the server verbosity level.</span><br><span class="hljs-comment"># This can be one of:</span><br><span class="hljs-comment"># debug (a lot of information, useful for development/testing)</span><br><span class="hljs-comment"># verbose (many rarely useful info, but not a mess like the debug level)</span><br><span class="hljs-comment"># notice (moderately verbose, what you want in production probably)</span><br><span class="hljs-comment"># warning (only very important / critical messages are logged)</span><br>loglevel notice     <span class="hljs-comment"># æ—¥å¿—è¾“å‡ºçº§åˆ«</span><br></code></pre></td></tr></table></figure><blockquote><p>æ—¥å¿—è¾“å‡ºæ–‡ä»¶</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Specify the log file name. Also the empty string can be used to force</span><br><span class="hljs-comment"># Redis to log on the standard output. Note that if you use standard</span><br><span class="hljs-comment"># output for logging but daemonize, logs will be sent to /dev/null</span><br>logfile <span class="hljs-string">&quot;&quot;</span>          <span class="hljs-comment"># æ—¥å¿—æ–‡ä»¶å</span><br></code></pre></td></tr></table></figure><blockquote><p>é»˜è®¤æ•°æ®åº“æ•°é‡</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Set the number of databases. The default database is DB 0, you can select</span><br><span class="hljs-comment"># a different one on a per-connection basis using SELECT &lt;dbid&gt; where</span><br><span class="hljs-comment"># dbid is a number between 0 and &#x27;databases&#x27;-1</span><br>databases 16<br></code></pre></td></tr></table></figure><blockquote><p>å¿«ç…§</p></blockquote><p>æŒä¹…åŒ–ï¼Œåœ¨è§„å®šçš„æ—¶é—´å†…ï¼Œæ‰§è¡Œäº†å¤šå°‘æ¬¡æ“ä½œï¼Œåˆ™ä¼šæŒä¹…åŒ–åˆ°æ–‡ä»¶ .rdb .aof</p><p>redis æ˜¯å†…å­˜æ•°æ®åº“ï¼Œå¦‚æœæ²¡æœ‰æŒä¹…åŒ–ï¼Œé‚£ä¹ˆæ–­ç”µå³å¤±ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å¦‚æœ900ç§’å†…ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªkeyè¿›è¡Œäº†ä¿®æ”¹ï¼Œå°±è¿›è¡ŒæŒä¹…åŒ–æ“ä½œ</span><br>save 900 1<br><span class="hljs-comment"># å¦‚æœ300ç§’å†…ï¼Œè‡³å°‘æœ‰10ä¸ªkeyè¿›è¡Œäº†ä¿®æ”¹ï¼Œå°±è¿›è¡ŒæŒä¹…åŒ–æ“ä½œ</span><br>save 300 10<br><span class="hljs-comment"># å¦‚æœ60ç§’å†…ï¼Œè‡³å°‘æœ‰ä¸€ä¸‡ä¸ªkeyè¿›è¡Œäº†ä¿®æ”¹ï¼Œå°±è¿›è¡ŒæŒä¹…åŒ–æ“ä½œ</span><br>save 60 10000<br><br>stop-writes-on-bgsave-error yes  <span class="hljs-comment"># æŒä¹…åŒ–å‡ºç°é”™è¯¯ï¼Œæ˜¯å¦è¦ç»§ç»­å·¥ä½œ</span><br><br>rdbcompression yes  <span class="hljs-comment"># æ˜¯å¦å‹ç¼© rdb èµ„æºï¼Œéœ€è¦æ¶ˆè€—ä¸€äº›CPUèµ„æº</span><br><br>rdbchecksum yes     <span class="hljs-comment"># ä¿å­˜rdbæ–‡ä»¶çš„æ—¶å€™ï¼Œè¿›è¡Œé”™è¯¯çš„æ£€æŸ¥æ ¡éªŒ</span><br></code></pre></td></tr></table></figure><blockquote><p>Replication ä¸»ä»å¤åˆ¶</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">################################# REPLICATION #################################</span><br><br><span class="hljs-comment"># Master-Replica replication. Use replicaof to make a Redis instance a copy of</span><br><span class="hljs-comment"># another Redis server. A few things to understand ASAP about Redis replication.</span><br></code></pre></td></tr></table></figure><blockquote><p>Securityæ¨¡å—ä¸­è®¾ç½®å¯†ç </p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">requirepass è¦è®¾ç½®çš„å¯†ç <br></code></pre></td></tr></table></figure><p>æˆ–è€…ç›´æ¥å‘½ä»¤è¡Œè®¾ç½®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">config <span class="hljs-built_in">set</span> requirepass <span class="hljs-string">&quot;å¯†ç &quot;</span><br></code></pre></td></tr></table></figure><blockquote><p>CLIENTSï¼šå®¢æˆ·ç«¯è¿æ¥ç›¸å…³</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">maxclients 10000  <span class="hljs-comment">#æœ€å¤§å®¢æˆ·ç«¯æ•°é‡</span><br>maxmemory &lt;bytes&gt; <span class="hljs-comment">#æœ€å¤§å†…å­˜é™åˆ¶</span><br>maxmemory-policy noeviction <span class="hljs-comment"># å†…å­˜è¾¾åˆ°é™åˆ¶å€¼çš„å¤„ç†ç­–ç•¥</span><br></code></pre></td></tr></table></figure><p>redis ä¸­çš„<strong>é»˜è®¤</strong>çš„è¿‡æœŸç­–ç•¥æ˜¯ <strong>volatile-lru</strong> ã€‚</p><p><strong>è®¾ç½®æ–¹å¼</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">config <span class="hljs-built_in">set</span> maxmemory-policy volatile-lru <br>1<br></code></pre></td></tr></table></figure><p><strong>maxmemory-policy çš„å…­ç§ç­–ç•¥</strong></p><p><strong>1ã€volatile-lruï¼š</strong>åªå¯¹è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyè¿›è¡ŒLRUï¼ˆé»˜è®¤å€¼ï¼‰</p><p><strong>2ã€allkeys-lru ï¼š</strong> åˆ é™¤lruç®—æ³•çš„key</p><p><strong>3ã€volatile-randomï¼š</strong>éšæœºåˆ é™¤å³å°†è¿‡æœŸkey</p><p><strong>4ã€allkeys-randomï¼š</strong>éšæœºåˆ é™¤</p><p><strong>5ã€volatile-ttl ï¼š</strong> åˆ é™¤å³å°†è¿‡æœŸçš„</p><p><strong>6ã€noeviction ï¼š</strong> æ°¸ä¸è¿‡æœŸï¼Œè¿”å›é”™è¯¯</p><blockquote><p>APPEND ONLY æ¨¡å¼ aof</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">appendonly no  <span class="hljs-comment"># é»˜è®¤æ˜¯ä¸å¼€å¯aofæ¨¡å¼çš„ï¼Œé»˜è®¤ä½¿ç”¨rdbæ–¹å¼æŒä¹…åŒ–ï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œrdbå®Œå…¨å¤Ÿç”¨</span><br>appendfilename <span class="hljs-string">&quot;appendonly.aof&quot;</span> <span class="hljs-comment"># æŒä¹…åŒ–çš„æ–‡ä»¶çš„åå­—</span><br><br><span class="hljs-comment"># appendfsync always     # æ¯æ¬¡ä¿®æ”¹éƒ½ä¼š syncï¼Œæ¶ˆè€—æ€§å—¯é‚£ä¸ª</span><br>appendfsync everysec     <span class="hljs-comment"># æ¯ç§’æ‰§è¡Œä¸€æ¬¡ syncï¼Œå¯èƒ½ä¼šä¸¢å¤±1sçš„æ•°æ®</span><br><span class="hljs-comment"># appendfsync no         # ä¸æ‰§è¡Œsyncï¼Œè¿™ä¸ªæ—¶å€™æ“ä½œç³»ç»Ÿè¿›è¡ŒåŒæ­¥ é€Ÿåº¦æœ€å¿«</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Redisç¬”è®°10-SpringBootæ•´åˆRedis</title>
    <link href="/posts/2021/01/20/Redis%E7%AC%94%E8%AE%B010-SpringBoot%E6%95%B4%E5%90%88Redis/"/>
    <url>/posts/2021/01/20/Redis%E7%AC%94%E8%AE%B010-SpringBoot%E6%95%B4%E5%90%88Redis/</url>
    
    <content type="html"><![CDATA[<h2 id="SpringBootæ•´åˆRedis"><a href="#SpringBootæ•´åˆRedis" class="headerlink" title="SpringBootæ•´åˆRedis"></a>SpringBootæ•´åˆRedis</h2><blockquote><p>æ–°å»ºmoduleï¼Œå‹¾é€‰SpringBooté¡¹ç›®ï¼Œå‹¾é€‰NoSQLçš„Redisä¾èµ–ã€‚</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- æ“ä½œRedis --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ç‚¹è¿›<code>spring-boot-starter-data-redis</code>åï¼Œæˆ‘ä»¬å‘ç°å…¶æœ¬è´¨æ˜¯ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.data<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.4.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä½†æ˜¯æ‰¾å•Šæ‰¾ï¼Œå‘ç°å…¶ä¸­å¹¶æ²¡æœ‰ Jedis çš„ä»»ä½•ä¾èµ–ï¼Œå…¶å®æ˜¯åœ¨ SpringBoot2.x ä¹‹åï¼ŒåŸæ¥ä½¿ç”¨çš„ Jedis è¢«æ›¿æ¢ä¸ºäº†lettuceã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.lettuce<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lettuce-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>6.0.2.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>Jedisï¼šé‡‡ç”¨çš„ç›´è¿æ–¹æ³•ï¼Œå¤šä¸ªçº¿ç¨‹æ“ä½œçš„åŒ–ï¼Œæ˜¯ä¸å®‰å…¨çš„ï¼Œå¦‚æœæƒ³è¦é¿å…ä¸å®‰å…¨çš„æƒ…å†µï¼Œéœ€è¦ä½¿ç”¨ Jedis Poolï¼Œæ›´åƒ BIOæ¨¡å¼ã€‚</p><p>Lettuceï¼šé‡‡ç”¨ Netty çš„æ–¹å¼ï¼Œå®ä¾‹ä¸­å¯ä»¥åœ¨å¤šä¸ªçº¿ç¨‹ä¸­è¿›è¡Œå…±äº«ï¼Œä¸å­˜åœ¨çº¿ç¨‹ä¸å®‰å…¨çš„æƒ…å†µï¼Œå¯ä»¥å‡å°‘çº¿ç¨‹æ•°æ®äº†ï¼Œæ›´åƒ NIOæ¨¡å¼ã€‚</p><blockquote><p>å‰–ææºç </p></blockquote><p>æˆ‘ä»¬åœ¨å­¦ä¹  SpringBoot è‡ªåŠ¨é…ç½®åŸç†æ—¶ï¼Œæ•´åˆä¸€ä¸ªç»„ä»¶å¹¶è¿›è¡Œé…ç½®ä¸€å®šå­˜åœ¨ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»<code>xxxAutoConfiguration</code>ï¼Œå¹¶ä¸”åœ¨<code>spring.factories</code>ä¸­ä¹Ÿä¸€å®šèƒ½æ‰¾åˆ°è¿™ä¸ªç±»çš„å®Œå…¨é™å®šåï¼ŒRedis ä¹Ÿä¸ä¾‹å¤–ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration,\<br>org.springframework.boot.autoconfigure.data.redis.RedisReactiveAutoConfiguration,\<br>org.springframework.boot.autoconfigure.data.redis.RedisRepositoriesAutoConfiguration,\<br></code></pre></td></tr></table></figure><p>ä»è¿™é‡Œç‚¹è¿›<code>RedisAutoConfiguration</code>ç±»ï¼Œå¯ä»¥çœ‹åˆ°ç»‘å®šäº†ä¸€ä¸ª<code>RedisProperties.class</code>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration(</span><br><span class="hljs-meta">  proxyBeanMethods = false</span><br><span class="hljs-meta">)</span><br><span class="hljs-meta">@ConditionalOnClass(&#123;RedisOperations.class&#125;)</span><br><span class="hljs-meta">@EnableConfigurationProperties(&#123;RedisProperties.class&#125;)</span><br><span class="hljs-meta">@Import(&#123;LettuceConnectionConfiguration.class, JedisConnectionConfiguration.class&#125;)</span><br></code></pre></td></tr></table></figure><p>ç‚¹è¿›å»<code>RedisProperties.class</code>ï¼Œåœ¨<code>application.properties</code>ä¸­å¯ä»¥é…ç½®ä¸‹åˆ—çš„å±æ€§ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RedisProperties</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> database = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">private</span> String url;<br>    <span class="hljs-keyword">private</span> String host = <span class="hljs-string">&quot;localhost&quot;</span>;<br>    <span class="hljs-keyword">private</span> String username;<br>    <span class="hljs-keyword">private</span> String password;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> port = <span class="hljs-number">6379</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> ssl;<br>    <span class="hljs-keyword">private</span> Duration timeout;<br>    <span class="hljs-keyword">private</span> Duration connectTimeout;<br>    <span class="hljs-keyword">private</span> String clientName;<br>    <span class="hljs-keyword">private</span> RedisProperties.ClientType clientType;<br>    <span class="hljs-keyword">private</span> RedisProperties.Sentinel sentinel;<br>    <span class="hljs-keyword">private</span> RedisProperties.Cluster cluster;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedisProperties.Jedis jedis = <span class="hljs-keyword">new</span> RedisProperties.Jedis();<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedisProperties.Lettuce lettuce = <span class="hljs-keyword">new</span> RedisProperties.Lettuce();<br>    ...æ–¹æ³•<br>&#125;<br></code></pre></td></tr></table></figure><p>é‚£å›åˆ°<code>RedisAutoConfiguration</code>ç±»ï¼Œçœ‹è§å®ƒç»™æˆ‘é…ç½®äº†ä¸¤ä¸ªæ¨¡æ¿ç±»<code>redisTemplate</code>å’Œ<code>stringRedisTemplate</code>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ConditionalOnSingleCandidate(RedisConnectionFactory.class)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> RedisTemplate&lt;Object, Object&gt; <span class="hljs-title">redisTemplate</span><span class="hljs-params">(RedisConnectionFactory redisConnectionFactory)</span> </span>&#123;<br>    <span class="hljs-comment">// é»˜è®¤çš„ RedisTemplate æ²¡æœ‰è¿‡å¤šçš„è®¾ç½®ï¼Œrediså¯¹è±¡éƒ½éœ€è¦åºåˆ—åŒ–ã€‚</span><br>    <span class="hljs-comment">// ä¸¤ä¸ªæ³›å‹éƒ½æ˜¯ Objectç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦å¼ºåˆ¶è½¬æ¢&lt;String, Object&gt;</span><br>    RedisTemplate&lt;Object, Object&gt; template = <span class="hljs-keyword">new</span> RedisTemplate();<br>    template.setConnectionFactory(redisConnectionFactory);<br>    <span class="hljs-keyword">return</span> template;<br>&#125;<br><br><span class="hljs-meta">@Bean</span><br><span class="hljs-meta">@ConditionalOnMissingBean</span><br><span class="hljs-meta">@ConditionalOnSingleCandidate(RedisConnectionFactory.class)</span><br><span class="hljs-comment">// ç”±äº Stirng æ˜¯ redis ä¸­æœ€å¸¸ä½¿ç”¨ç±»å‹ï¼Œæ‰€ä»¥å•ç‹¬æå‡ºæ¥ä¸€ä¸ª Bean</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> StringRedisTemplate <span class="hljs-title">stringRedisTemplate</span><span class="hljs-params">(RedisConnectionFactory redisConnectionFactory)</span> </span>&#123;<br>    StringRedisTemplate template = <span class="hljs-keyword">new</span> StringRedisTemplate();<br>    template.setConnectionFactory(redisConnectionFactory);<br>    <span class="hljs-keyword">return</span> template;<br>&#125;<br></code></pre></td></tr></table></figure><p>å½“çœ‹åˆ°xxTemplateæ—¶å¯ä»¥å¯¹æ¯”RestTemplatã€SqlSessionTemplate,é€šè¿‡ä½¿ç”¨è¿™äº›Templateæ¥é—´æ¥æ“ä½œç»„ä»¶ã€‚é‚£ä¹ˆè¿™ä¿©ä¹Ÿä¸ä¼šä¾‹å¤–ã€‚åˆ†åˆ«ç”¨äºæ“ä½œRediså’ŒRedisä¸­çš„Stringæ•°æ®ç±»å‹ã€‚</p><p>åœ¨RedisTemplateä¸Šä¹Ÿæœ‰ä¸€ä¸ªæ¡ä»¶æ³¨è§£<code>@ConditionalOnSingleCandidate(RedisConnectionFactory.class)</code>ï¼Œè¯´æ˜æˆ‘ä»¬æ˜¯å¯ä»¥å¯¹å…¶Templateè¿›è¡Œå®šåˆ¶åŒ–çš„ã€‚</p><blockquote><p>è¿æ¥Redisä¸ä½¿ç”¨</p></blockquote><ol><li><p>ç¼–å†™<code>application.propertiesé…ç½®æ–‡ä»¶</code></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-meta">spring.redis.host</span>=<span class="hljs-string">8.131.49.###</span><br><span class="hljs-meta">spring.redis.port</span>=<span class="hljs-string">6379</span><br><span class="hljs-meta">spring.redis.password</span>=<span class="hljs-string">zuiweizhiming666</span><br></code></pre></td></tr></table></figure></li><li><p>æµ‹è¯•ç±»ä½¿ç”¨ <code>RedisTemplate</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Redis02SpringbootApplicationTests</span> </span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> RedisTemplate redisTemplate;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">contextLoads</span><span class="hljs-params">()</span> </span>&#123;<br><br>        <span class="hljs-comment">// redisTemplate æ“ä½œä¸åŒçš„æ•°æ®ç±»å‹ï¼Œapiå’Œæˆ‘ä»¬çš„æŒ‡ä»¤æ˜¯ä¸€æ ·çš„</span><br>        <span class="hljs-comment">// opsForValue æ“ä½œå­—ç¬¦ä¸² ç±»ä¼¼String</span><br>        <span class="hljs-comment">// opsForList æ“ä½œList ç±»ä¼¼List</span><br>        <span class="hljs-comment">// opsForHah</span><br><br>        <span class="hljs-comment">// é™¤äº†åŸºæœ¬çš„æ“ä½œï¼Œæˆ‘ä»¬å¸¸ç”¨çš„æ–¹æ³•éƒ½å¯ä»¥ç›´æ¥é€šè¿‡redisTemplateæ“ä½œï¼Œæ¯”å¦‚äº‹åŠ¡å’ŒåŸºæœ¬çš„CRUD</span><br><br>        <span class="hljs-comment">// è·å–è¿æ¥å¯¹è±¡</span><br>        <span class="hljs-comment">//RedisConnection connection = redisTemplate.getConnectionFactory().getConnection();</span><br>        <span class="hljs-comment">//connection.flushDb();</span><br>        <span class="hljs-comment">//connection.flushAll();</span><br>        <br>        redisTemplate.opsForValue().set(<span class="hljs-string">&quot;mykey&quot;</span>, <span class="hljs-string">&quot;qiaowei&quot;</span>);<br>        System.out.println(redisTemplate.opsForValue().get(<span class="hljs-string">&quot;mykey&quot;</span>));<br><br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æµ‹è¯•ç»“æœï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">qiaowei<br></code></pre></td></tr></table></figure></li></ol><blockquote><p>åºåˆ—åŒ–é—®é¢˜</p></blockquote><p>ä½†æ˜¯å½“æˆ‘ä»¬å›åˆ°Rediså‘½ä»¤è¡ŒæŸ¥çœ‹æ•°æ®æ—¶ï¼Œä¼šå‘ç°å…¨éƒ½æ˜¯ä¹±ç ï¼Œå¯æ˜¯ç¨‹åºä¸­å´æœ‰æ­£ç¡®çš„è¾“å‡ºã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; keys *<br>1) &quot;\xac\xed\x00\x05t\x00\x05mykey&quot;<br></code></pre></td></tr></table></figure><p> è¿™æ—¶å€™å°±å…³ç³»åˆ°å­˜å‚¨å¯¹è±¡çš„åºåˆ—åŒ–é—®é¢˜ï¼Œåœ¨ç½‘ç»œä¸­ä¼ è¾“çš„å¯¹è±¡ä¹Ÿæ˜¯ä¸€æ ·éœ€è¦åºåˆ—åŒ–ï¼Œå¦è€…å°±å…¨æ˜¯ä¹±ç ã€‚</p><p>æˆ‘ä»¬å›å¤´çœ‹é»˜è®¤çš„<code>RedisTemplate</code>ç±»å†…éƒ¨æœ‰å…³åºåˆ—åŒ–çš„å†…å®¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">private</span> RedisSerializer keySerializer = <span class="hljs-keyword">null</span>;<br><span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">private</span> RedisSerializer valueSerializer = <span class="hljs-keyword">null</span>;<br><span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">private</span> RedisSerializer hashKeySerializer = <span class="hljs-keyword">null</span>;<br><span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">private</span> RedisSerializer hashValueSerializer = <span class="hljs-keyword">null</span>;<br><span class="hljs-keyword">private</span> RedisSerializer&lt;String&gt; stringSerializer = RedisSerializer.string();<br></code></pre></td></tr></table></figure><p>è¿™å°±æ˜¯ï¼Œæˆ‘ä»¬çœ‹åˆ°å‡ ä¸ªå…³äºåºåˆ—åŒ–çš„å‚æ•°ï¼Œè€Œé»˜è®¤çš„åºåˆ—åŒ–å™¨æ˜¯é‡‡ç”¨çš„JDKåºåˆ—åŒ–å™¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.defaultSerializer == <span class="hljs-keyword">null</span>) &#123;<br>    <span class="hljs-keyword">this</span>.defaultSerializer = <span class="hljs-keyword">new</span> JdkSerializationRedisSerializer(<span class="hljs-keyword">this</span>.classLoader != <span class="hljs-keyword">null</span> ? <span class="hljs-keyword">this</span>.classLoader : <span class="hljs-keyword">this</span>.getClass().getClassLoader());<br>&#125;<br></code></pre></td></tr></table></figure><p>è€Œé»˜è®¤çš„RedisTemplateä¸­çš„æ‰€æœ‰åºåˆ—åŒ–å™¨éƒ½æ˜¯ä½¿ç”¨è¿™ä¸ªåºåˆ—åŒ–å™¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.enableDefaultSerializer) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.keySerializer == <span class="hljs-keyword">null</span>) &#123;<br>        <span class="hljs-keyword">this</span>.keySerializer = <span class="hljs-keyword">this</span>.defaultSerializer;<br>        defaultUsed = <span class="hljs-keyword">true</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.valueSerializer == <span class="hljs-keyword">null</span>) &#123;<br>        <span class="hljs-keyword">this</span>.valueSerializer = <span class="hljs-keyword">this</span>.defaultSerializer;<br>        defaultUsed = <span class="hljs-keyword">true</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.hashKeySerializer == <span class="hljs-keyword">null</span>) &#123;<br>        <span class="hljs-keyword">this</span>.hashKeySerializer = <span class="hljs-keyword">this</span>.defaultSerializer;<br>        defaultUsed = <span class="hljs-keyword">true</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.hashValueSerializer == <span class="hljs-keyword">null</span>) &#123;<br>        <span class="hljs-keyword">this</span>.hashValueSerializer = <span class="hljs-keyword">this</span>.defaultSerializer;<br>        defaultUsed = <span class="hljs-keyword">true</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åç»­æˆ‘ä»¬å®šåˆ¶RedisTemplateå°±å¯ä»¥å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚</p><blockquote><p>å®šåˆ¶RedisTemplateçš„æ¨¡æ¿</p></blockquote><p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªBeanåŠ å…¥å®¹å™¨ï¼Œå°±ä¼šè§¦å‘RedisTemplateä¸Šçš„æ¡ä»¶æ³¨è§£ä½¿é»˜è®¤çš„RedisTemplateå¤±æ•ˆï¼Œä»è€Œä½¿ç”¨æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„æ¨¡æ¿ã€‚</p><p><code>RedisSerializer</code>æä¾›äº†å¤šç§åºåˆ—åŒ–æ–¹æ¡ˆï¼š</p><ol><li><p>ç›´æ¥è°ƒç”¨ <code>RedisSerializer</code>çš„é™æ€æ–¹æ³•æ¥è¿”å›åºåˆ—åŒ–å™¨ï¼Œç„¶åset</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B010-SpringBoot%E6%95%B4%E5%90%88Redis/redis_serializer.png" alt="é™æ€æ–¹æ³•"></p></li><li><p>è‡ªå·± new ç›¸åº”çš„å®ç°ç±»ï¼Œç„¶åset</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B010-SpringBoot%E6%95%B4%E5%90%88Redis/self_serializer.png" alt="è‡ªå·±newå®ç°ç±»"></p></li></ol><p>æˆ‘ä»¬æ¥ç¼–å†™è‡ªå·±çš„RedisTemplateæ¨¡æ¿ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ç¼–å†™æˆ‘ä»¬å®šåˆ¶çš„ redisTemplate</span><br><span class="hljs-meta">@Bean</span><br><span class="hljs-meta">@SuppressWarnings(&quot;all&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="hljs-title">redisTemplate</span><span class="hljs-params">(RedisConnectionFactory redisConnectionFactory)</span> </span>&#123;<br>    RedisTemplate&lt;String, Object&gt; template = <span class="hljs-keyword">new</span> RedisTemplate&lt;String, Object&gt;();<br>    template.setConnectionFactory(redisConnectionFactory);<br>    Jackson2JsonRedisSerializer&lt;Object&gt; jackson2JsonRedisSerializer = <span class="hljs-keyword">new</span> Jackson2JsonRedisSerializer&lt;Object&gt;(Object.class);<br>    ObjectMapper om = <span class="hljs-keyword">new</span> ObjectMapper();<br>    om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);<br>    om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);<br>    jackson2JsonRedisSerializer.setObjectMapper(om);<br>    StringRedisSerializer stringRedisSerializer = <span class="hljs-keyword">new</span> StringRedisSerializer();<br>    <span class="hljs-comment">// key é‡‡ç”¨ String çš„åºåˆ—åŒ–æ–¹æ³•</span><br>    template.setKeySerializer(stringRedisSerializer);<br>    <span class="hljs-comment">// hash çš„ key ä¹Ÿé‡‡ç”¨ String çš„åºåˆ—åŒ–æ–¹æ³•</span><br>    template.setHashKeySerializer(stringRedisSerializer);<br>    <span class="hljs-comment">// value åºåˆ—åŒ–é‡‡ç”¨ jackson</span><br>    template.setValueSerializer(jackson2JsonRedisSerializer);<br>    <span class="hljs-comment">// hash çš„ value åºåˆ—åŒ–é‡‡ç”¨jackson</span><br>    template.setHashValueSerializer(jackson2JsonRedisSerializer);<br>    <span class="hljs-comment">// é…ç½®å…·ä½“çš„åºåˆ—åŒ–æ–¹å¼</span><br>    template.setKeySerializer(jackson2JsonRedisSerializer);<br>    <span class="hljs-keyword">return</span> template;<br>&#125;<br></code></pre></td></tr></table></figure><p>é…ç½®å®Œæˆ‘ä»¬è‡ªå·±çš„<code>RedisTemplate</code>ï¼Œæˆ‘ä»¬å»æµ‹è¯•ç±»æµ‹è¯•ä¸€ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> JsonProcessingException </span>&#123;<br>    <span class="hljs-comment">// çœŸå®å¼€å‘ä¸€èˆ¬éƒ½æ˜¯ç”¨ json ä¼ é€’å¯¹è±¡</span><br>    User user = <span class="hljs-keyword">new</span> User(<span class="hljs-string">&quot;ä¹”å¨&quot;</span>, <span class="hljs-number">10</span>);<br>    redisTemplate.opsForValue().set(<span class="hljs-string">&quot;user&quot;</span>, user);<br>    System.out.println(redisTemplate.opsForValue().get(<span class="hljs-string">&quot;user&quot;</span>));<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨Xshellä¸­æŸ¥çœ‹è¯¥key</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; keys *<br>1) &quot;user&quot;<br></code></pre></td></tr></table></figure><blockquote><p>è‡ªå®šä¹‰Rediså·¥å…·</p></blockquote><p>ç”¨RedisTemplateéœ€è¦é¢‘ç¹è°ƒç”¨<code>.opForxxx</code>ç„¶åæ‰èƒ½è¿›è¡Œå¯¹åº”çš„æ“ä½œï¼Œè¿™æ ·ä½¿ç”¨èµ·æ¥ä»£ç æ•ˆç‡ä½ä¸‹ï¼Œå·¥ä½œä¸­ä¸€èˆ¬ä¸ä¼šè¿™æ ·ä½¿ç”¨ï¼Œè€Œæ˜¯å°†è¿™äº›å¸¸ç”¨çš„å…¬å…±APIæŠ½å–å‡ºæ¥å°è£…æˆä¸ºä¸€ä¸ªå·¥å…·ç±»ï¼Œç„¶åç›´æ¥ä½¿ç”¨å·¥å…·ç±»æ¥é—´æ¥æ“ä½œRedis,ä¸ä½†æ•ˆç‡é«˜å¹¶ä¸”æ˜“ç”¨ã€‚</p><p>å‚è€ƒåšå®¢ï¼š<a href="https://www.cnblogs.com/zhzhlong/p/11434284.html">https://www.cnblogs.com/zhzhlong/p/11434284.html</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redisç¬”è®°09-ä½¿ç”¨Jedisæ“ä½œRedis</title>
    <link href="/posts/2021/01/20/Redis%E7%AC%94%E8%AE%B009-%E4%BD%BF%E7%94%A8Jedis%E6%93%8D%E4%BD%9CRedis/"/>
    <url>/posts/2021/01/20/Redis%E7%AC%94%E8%AE%B009-%E4%BD%BF%E7%94%A8Jedis%E6%93%8D%E4%BD%9CRedis/</url>
    
    <content type="html"><![CDATA[<h2 id="Jedis"><a href="#Jedis" class="headerlink" title="Jedis"></a>Jedis</h2><p>ä½¿ç”¨Javaæ¥æ“ä½œRedisï¼ŒJedisæ˜¯Rediså®˜æ–¹æ¨èä½¿ç”¨çš„Javaè¿æ¥redisçš„å®¢æˆ·ç«¯ã€‚</p><blockquote><p>ä»€ä¹ˆæ˜¯Jedisï¼Ÿæ˜¯Rediså®˜æ–¹æ¨èçš„javaè¿æ¥å¼€å‘å·¥å…·ï¼ä½¿ç”¨javaæ“ä½œRedisä¸­é—´ä»¶ã€‚å¦‚æœè¦ä½¿ç”¨javaæ¥æ“ä½œredisï¼Œé‚£ä¹ˆä¸€å®šè¦å¯¹jedisååˆ†ç†Ÿæ‚‰ã€‚</p></blockquote><ol><li><p><strong>å¯¼å…¥Jedisçš„ä¾èµ–å’ŒfastJsonä¾èµ–</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- Jedisçš„ä¾èµ– --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>redis.clients<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jedis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.4.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!-- fastJsonçš„ä¾èµ– --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>fastjson<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.75<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>è¿æ¥æ•°æ®åº“</strong></p><p> é¦–å…ˆåœ¨é˜¿é‡Œäº‘çš„æœåŠ¡å™¨æ§åˆ¶å°å®‰å…¨ç»„ï¼Œæ·»åŠ 6379ç«¯å£</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B009-%E4%BD%BF%E7%94%A8Jedis%E6%93%8D%E4%BD%9CRedis/open_port_6379.png" alt="æœåŠ¡å™¨å®‰å…¨ç»„å¼€å¯6379ç«¯å£"></p><p>ä¿®æ”¹<code>redis.conf</code>é…ç½®æ–‡ä»¶ï¼Œåœ¨å…¶ä¸­è®¾ç½®è®¿é—®redisçš„å¯†ç ï¼šrequirepass å¯†ç </p><p>ï¼Œæ³¨é‡Šæ‰bind 127.0.0.1ï¼Œé‡å¯redis-serveræœåŠ¡ï¼Œè¿›å…¥redisåè¦å…ˆéªŒè¯å¯†ç ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z bin]# redis-cli -a zuiweizhiming666 -p 6379<br>Warning: Using a password with &#x27;-a&#x27; or &#x27;-u&#x27; option on the command line interface may not be safe.<br>127.0.0.1:6379&gt; ping<br>PONG<br></code></pre></td></tr></table></figure><p>é˜²ç«å¢™å¼€å¯6379ç«¯å£ï¼Œå¹¶é‡ç½®é˜²ç«å¢™æœåŠ¡ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z ~]# firewall-cmd --zone=public --add-port=6379/tcp --permanent  &amp;&amp; firewall-cmd --reload<br>success<br>success<br></code></pre></td></tr></table></figure></li></ol><ol start="3"><li><p>æ“ä½œå‘½ä»¤</p><p>æ–°å»ºæµ‹è¯•ç±»<code>TestPing.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestPing</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br><br>    <span class="hljs-comment">// 1. åˆ›å»º Jedis çš„å¯¹è±¡</span><br>    Jedis jedis = <span class="hljs-keyword">new</span> Jedis(<span class="hljs-string">&quot;8.131.49.204&quot;</span>,<span class="hljs-number">6379</span>);<br>    jedis.auth(<span class="hljs-string">&quot;zuiweizhiming666&quot;</span>);<br>    <span class="hljs-comment">// 2. Jedis æ‰€æœ‰çš„å‘½ä»¤å¯¹åº” Redis çš„æ‰€æœ‰æŒ‡ä»¤</span><br>    System.out.println(jedis.ping());  <span class="hljs-comment">// PONG</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>èƒ½å¤Ÿpingé€šå³å¯ã€‚</p></li><li><p>å…³äºäº‹åŠ¡æ“ä½œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestTX</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        Jedis jedis = <span class="hljs-keyword">new</span> Jedis(<span class="hljs-string">&quot;8.131.49.204&quot;</span>);<br>        jedis.auth(<span class="hljs-string">&quot;zuiweizhiming666&quot;</span>);<br><br>        jedis.flushDB();<br><br>        JSONObject jsonObject = <span class="hljs-keyword">new</span> JSONObject();<br>        jsonObject.put(<span class="hljs-string">&quot;hello&quot;</span>,<span class="hljs-string">&quot;world&quot;</span>);<br>        jsonObject.put(<span class="hljs-string">&quot;name&quot;</span>,<span class="hljs-string">&quot;qiaowei&quot;</span>);<br><br>        <span class="hljs-comment">// å¼€å¯äº‹åŠ¡</span><br>        Transaction multi = jedis.multi();<br>        String result = jsonObject.toJSONString();<br>        <span class="hljs-comment">//    jedis.watch(result);</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            multi.set(<span class="hljs-string">&quot;user1&quot;</span>,result );<br>            multi.set(<span class="hljs-string">&quot;user2&quot;</span>,result );<br>            <span class="hljs-keyword">int</span> i  = <span class="hljs-number">1</span> / <span class="hljs-number">0</span>;<br>            multi.exec();<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            <span class="hljs-comment">// æ”¾å¼ƒäº‹åŠ¡</span><br>            multi.discard();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            System.out.println(jedis.get(<span class="hljs-string">&quot;user1&quot;</span>));<br>            System.out.println(jedis.get(<span class="hljs-string">&quot;user2&quot;</span>));<br>            jedis.close();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æ–­å¼€è¿æ¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">jedis.close();<br></code></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Redisç¬”è®°08-äº‹åŠ¡çš„ç›¸å…³æ“ä½œ</title>
    <link href="/posts/2021/01/19/Redis%E7%AC%94%E8%AE%B008-%E4%BA%8B%E5%8A%A1%E7%9A%84%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C/"/>
    <url>/posts/2021/01/19/Redis%E7%AC%94%E8%AE%B008-%E4%BA%8B%E5%8A%A1%E7%9A%84%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C/</url>
    
    <content type="html"><![CDATA[<p>Redisçš„å•æ¡å‘½ä»¤æ˜¯ä¿è¯åŸå­æ€§çš„ï¼Œä½†æ˜¯redisäº‹åŠ¡ä¸èƒ½ä¿è¯åŸå­æ€§ã€‚</p><blockquote><p>Redisäº‹åŠ¡æœ¬è´¨ï¼šä¸€ç»„å‘½ä»¤çš„é›†åˆã€‚</p><p>â€”â€”â€”â€”â€”â€“ é˜Ÿåˆ— set set set æ‰§è¡Œ â€”â€”â€”â€”â€”â€”-</p><p>äº‹åŠ¡ä¸­æ¯æ¡å‘½ä»¤éƒ½ä¼šè¢«åºåˆ—åŒ–ï¼Œæ‰§è¡Œè¿‡ç¨‹ä¸­æŒ‰é¡ºåºæ‰§è¡Œï¼Œä¸å…è®¸å…¶ä»–å‘½ä»¤è¿›è¡Œå¹²æ‰°ã€‚</p><ul><li>ä¸€æ¬¡æ€§</li><li>é¡ºåºæ€§</li><li>æ’ä»–æ€§</li></ul><hr><ol><li>Redisäº‹åŠ¡æ²¡æœ‰éš”ç¦»çº§åˆ«çš„æ¦‚å¿µ</li><li>Rediså•æ¡å‘½ä»¤æ˜¯ä¿è¯åŸå­æ€§çš„ï¼Œä½†æ˜¯äº‹åŠ¡ä¸ä¿è¯åŸå­æ€§ï¼</li></ol></blockquote><h3 id="Redisäº‹åŠ¡æ“ä½œè¿‡ç¨‹"><a href="#Redisäº‹åŠ¡æ“ä½œè¿‡ç¨‹" class="headerlink" title="Redisäº‹åŠ¡æ“ä½œè¿‡ç¨‹"></a>Redisäº‹åŠ¡æ“ä½œè¿‡ç¨‹</h3><ul><li>å¼€å¯äº‹åŠ¡ï¼ˆ<code>multi</code>ï¼‰</li><li>å‘½ä»¤å…¥é˜Ÿ</li><li>æ‰§è¡Œäº‹åŠ¡ï¼ˆ<code>exec</code>ï¼‰</li></ul><p>æ‰€ä»¥äº‹åŠ¡ä¸­çš„å‘½ä»¤åœ¨åŠ å…¥æ—¶éƒ½æ²¡æœ‰è¢«æ‰§è¡Œï¼Œç›´åˆ°æäº¤æ—¶æ‰ä¼šå¼€å§‹æ‰§è¡Œ(Exec)ä¸€æ¬¡æ€§å®Œæˆã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; multi # å¼€å¯äº‹åŠ¡<br>OK<br>127.0.0.1:6379&gt; set k1 v1 # å‘½ä»¤å…¥é˜Ÿ<br>QUEUED<br>127.0.0.1:6379&gt; set k2 v2 # ..<br>QUEUED<br>127.0.0.1:6379&gt; get k1<br>QUEUED<br>127.0.0.1:6379&gt; set k3 v3<br>QUEUED<br>127.0.0.1:6379&gt; keys *<br>QUEUED<br>127.0.0.1:6379&gt; exec # äº‹åŠ¡æ‰§è¡Œ<br>1) OK<br>2) OK<br>3) &quot;v1&quot;<br>4) OK<br>5) 1) &quot;k3&quot;<br>   2) &quot;k2&quot;<br>   3) &quot;k1&quot;<br></code></pre></td></tr></table></figure><p><strong>å–æ¶ˆäº‹åŠ¡(<code>discurd</code>)</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; multi<br>OK<br>127.0.0.1:6379&gt; set k1 v1<br>QUEUED<br>127.0.0.1:6379&gt; set k2 v2<br>QUEUED<br>127.0.0.1:6379&gt; DISCARD # æ”¾å¼ƒäº‹åŠ¡<br>OK<br>127.0.0.1:6379&gt; EXEC <br>(error) ERR EXEC without MULTI # å½“å‰æœªå¼€å¯äº‹åŠ¡<br>127.0.0.1:6379&gt; get k1 # è¢«æ”¾å¼ƒäº‹åŠ¡ä¸­å‘½ä»¤å¹¶æœªæ‰§è¡Œ<br>(nil)<br></code></pre></td></tr></table></figure><h3 id="äº‹åŠ¡é”™è¯¯"><a href="#äº‹åŠ¡é”™è¯¯" class="headerlink" title="äº‹åŠ¡é”™è¯¯"></a>äº‹åŠ¡é”™è¯¯</h3><blockquote><p>ä»£ç è¯­æ³•é”™è¯¯ï¼ˆç¼–è¯‘æ—¶å¼‚å¸¸ï¼‰æ‰€æœ‰çš„å‘½ä»¤éƒ½ä¸æ‰§è¡Œ</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; multi<br>OK<br>127.0.0.1:6379&gt; set k1 v1<br>QUEUED<br>127.0.0.1:6379&gt; set k2 v2<br>QUEUED<br>127.0.0.1:6379&gt; error k1 # è¿™æ˜¯ä¸€æ¡è¯­æ³•é”™è¯¯å‘½ä»¤<br>(error) ERR unknown command `error`, with args beginning with: `k1`, # ä¼šæŠ¥é”™ä½†æ˜¯ä¸å½±å“åç»­å‘½ä»¤å…¥é˜Ÿ <br>127.0.0.1:6379&gt; get k2<br>QUEUED<br>127.0.0.1:6379&gt; EXEC<br>(error) EXECABORT Transaction discarded because of previous errors. # æ‰§è¡ŒæŠ¥é”™<br>127.0.0.1:6379&gt; get k1 <br>(nil) # å…¶ä»–å‘½ä»¤å¹¶æ²¡æœ‰è¢«æ‰§è¡Œ<br></code></pre></td></tr></table></figure><blockquote><p>ä»£ç é€»è¾‘é”™è¯¯ (è¿è¡Œæ—¶å¼‚å¸¸) **å…¶ä»–å‘½ä»¤å¯ä»¥æ­£å¸¸æ‰§è¡Œ ** &gt;&gt;&gt; æ‰€ä»¥ä¸ä¿è¯äº‹åŠ¡åŸå­æ€§</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; multi&gt;<br>OK<br>127.0.0.1:6379&gt; set k1 v1<br>QUEUED<br>127.0.0.1:6379&gt; set k2 v2<br>QUEUED<br>127.0.0.1:6379&gt; INCR k1 # è¿™æ¡å‘½ä»¤é€»è¾‘é”™è¯¯ï¼ˆå¯¹å­—ç¬¦ä¸²è¿›è¡Œå¢é‡ï¼‰<br>QUEUED<br>127.0.0.1:6379&gt; get k2<br>QUEUED<br>127.0.0.1:6379&gt; exec<br>1) OK<br>2) OK<br>3) (error) ERR value is not an integer or out of range # è¿è¡Œæ—¶æŠ¥é”™<br>4) &quot;v2&quot; # å…¶ä»–å‘½ä»¤æ­£å¸¸æ‰§è¡Œ<br><br><span class="hljs-meta">#</span><span class="bash"> è™½ç„¶ä¸­é—´æœ‰ä¸€æ¡å‘½ä»¤æŠ¥é”™äº†ï¼Œä½†æ˜¯åé¢çš„æŒ‡ä»¤ä¾æ—§æ­£å¸¸æ‰§è¡ŒæˆåŠŸäº†ã€‚</span><br><span class="hljs-meta">#</span><span class="bash"> æ‰€ä»¥è¯´Rediså•æ¡æŒ‡ä»¤ä¿è¯åŸå­æ€§ï¼Œä½†æ˜¯Redisäº‹åŠ¡ä¸èƒ½ä¿è¯åŸå­æ€§ã€‚</span><br></code></pre></td></tr></table></figure><h3 id="ç›‘æ§"><a href="#ç›‘æ§" class="headerlink" title="ç›‘æ§"></a>ç›‘æ§</h3><p><strong>æ‚²è§‚é”ï¼š</strong></p><ul><li>å¾ˆæ‚²è§‚ï¼Œè®¤ä¸ºä»€ä¹ˆæ—¶å€™éƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œæ— è®ºåšä»€ä¹ˆéƒ½ä¼šåŠ é”</li></ul><p><strong>ä¹è§‚é”ï¼š</strong></p><ul><li>å¾ˆä¹è§‚ï¼Œè®¤ä¸ºä»€ä¹ˆæ—¶å€™éƒ½ä¸ä¼šå‡ºç°é—®é¢˜ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ï¼æ›´æ–°æ•°æ®çš„æ—¶å€™å»åˆ¤æ–­ä¸€ä¸‹ï¼Œåœ¨æ­¤æœŸé—´æ˜¯å¦æœ‰äººä¿®æ”¹è¿‡è¿™ä¸ªæ•°æ®</li><li>è·å–version</li><li>æ›´æ–°çš„æ—¶å€™æ¯”è¾ƒversion</li></ul><p>ä½¿ç”¨<code>watch key</code>ç›‘æ§æŒ‡å®šæ•°æ®ï¼Œç›¸å½“äºä¹è§‚é”åŠ é”ã€‚</p><blockquote><p>æ­£å¸¸æ‰§è¡Œ</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; set money 100 # è®¾ç½®ä½™é¢:100<br>OK<br>127.0.0.1:6379&gt; set use 0 # æ”¯å‡ºä½¿ç”¨:0<br>OK<br>127.0.0.1:6379&gt; watch money # ç›‘è§†money (ä¸Šé”)<br>OK<br>127.0.0.1:6379&gt; multi<br>OK<br>127.0.0.1:6379&gt; DECRBY money 20<br>QUEUED<br>127.0.0.1:6379&gt; INCRBY use 20<br>QUEUED<br>127.0.0.1:6379&gt; exec # ç›‘è§†å€¼æ²¡æœ‰è¢«ä¸­é€”ä¿®æ”¹ï¼Œäº‹åŠ¡æ­£å¸¸æ‰§è¡Œ<br>1) (integer) 80<br>2) (integer) 20<br></code></pre></td></tr></table></figure><blockquote><p>æµ‹è¯•å¤šçº¿ç¨‹ä¿®æ”¹å€¼ï¼Œä½¿ç”¨watchå¯ä»¥å½“åšredisçš„ä¹è§‚é”æ“ä½œï¼ˆç›¸å½“äºgetversionï¼‰</p></blockquote><p>æˆ‘ä»¬å¯åŠ¨å¦å¤–ä¸€ä¸ªå®¢æˆ·ç«¯æ¨¡æ‹Ÿæ’é˜Ÿçº¿ç¨‹ã€‚</p><p>çº¿ç¨‹1ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; watch money # moneyä¸Šé”<br>OK<br>127.0.0.1:6379&gt; multi<br>OK<br>127.0.0.1:6379&gt; DECRBY money 20<br>QUEUED<br>127.0.0.1:6379&gt; INCRBY use 20<br>QUEUED<br>127.0.0.1:6379&gt; # æ­¤æ—¶äº‹åŠ¡å¹¶æ²¡æœ‰æ‰§è¡Œ<br></code></pre></td></tr></table></figure><p>æ¨¡æ‹Ÿçº¿ç¨‹æ’é˜Ÿï¼Œçº¿ç¨‹2ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; INCRBY money 500 # ä¿®æ”¹äº†çº¿ç¨‹ä¸€ä¸­ç›‘è§†çš„money<br>(integer) 600<br>12<br></code></pre></td></tr></table></figure><p>å›åˆ°çº¿ç¨‹1ï¼Œæ‰§è¡Œäº‹åŠ¡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; EXEC # æ‰§è¡Œä¹‹å‰ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†æˆ‘ä»¬çš„å€¼ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šå¯¼è‡´äº‹åŠ¡æ‰§è¡Œå¤±è´¥<br>(nil) # æ²¡æœ‰ç»“æœï¼Œè¯´æ˜äº‹åŠ¡æ‰§è¡Œå¤±è´¥<br><br>127.0.0.1:6379&gt; get money # çº¿ç¨‹2 ä¿®æ”¹ç”Ÿæ•ˆ<br>&quot;600&quot;<br>127.0.0.1:6379&gt; get use # çº¿ç¨‹1äº‹åŠ¡æ‰§è¡Œå¤±è´¥ï¼Œæ•°å€¼æ²¡æœ‰è¢«ä¿®æ”¹<br>&quot;0&quot;<br></code></pre></td></tr></table></figure><blockquote><p>è§£é”è·å–æœ€æ–°å€¼ï¼Œç„¶åå†åŠ é”è¿›è¡Œäº‹åŠ¡ã€‚</p><p><code>unwatch</code>è¿›è¡Œè§£é”ã€‚</p></blockquote><p>æ³¨æ„ï¼šæ¯æ¬¡æäº¤æ‰§è¡Œexecåéƒ½ä¼šè‡ªåŠ¨é‡Šæ”¾é”ï¼Œä¸ç®¡æ˜¯å¦æˆåŠŸ</p>]]></content>
    
    
    
    <tags>
      
      <tag>Rediså­¦ä¹ </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Redisç¬”è®°07-ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹</title>
    <link href="/posts/2021/01/19/Redis%E7%AC%94%E8%AE%B007-%E4%B8%89%E7%A7%8D%E7%89%B9%E6%AE%8A%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"/>
    <url>/posts/2021/01/19/Redis%E7%AC%94%E8%AE%B007-%E4%B8%89%E7%A7%8D%E7%89%B9%E6%AE%8A%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</url>
    
    <content type="html"><![CDATA[<h2 id="ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹"><a href="#ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹" class="headerlink" title="ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹"></a>ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹</h2><h3 id="Geospatialåœ°ç†ä½ç½®"><a href="#Geospatialåœ°ç†ä½ç½®" class="headerlink" title="Geospatialåœ°ç†ä½ç½®"></a>Geospatialåœ°ç†ä½ç½®</h3><blockquote><p>ä½¿ç”¨ç»çº¬åº¦å®šä½åœ°ç†åæ ‡å¹¶ç”¨ä¸€ä¸ª<strong>æœ‰åºé›†åˆzsetä¿å­˜</strong>ï¼Œæ‰€ä»¥zsetå‘½ä»¤ä¹Ÿå¯ä»¥ä½¿ç”¨</p></blockquote><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>geoadd key longitud(ç»åº¦) latitude(çº¬åº¦) member [..]</code></td><td>å°†å…·ä½“ç»çº¬åº¦çš„åæ ‡å­˜å…¥ä¸€ä¸ªæœ‰åºé›†åˆ</td></tr><tr><td><code>geopos key member [member..]</code></td><td>è·å–é›†åˆä¸­çš„ä¸€ä¸ª/å¤šä¸ªæˆå‘˜åæ ‡</td></tr><tr><td><code>geodist key member1 member2 [unit]</code></td><td>è¿”å›ä¸¤ä¸ªç»™å®šä½ç½®ä¹‹é—´çš„è·ç¦»ã€‚é»˜è®¤ä»¥ç±³ä½œä¸ºå•ä½ã€‚</td></tr><tr><td>`georadius key longitude latitude radius m</td><td>km</td></tr><tr><td><code>GEORADIUSBYMEMBER key member radius...</code></td><td>åŠŸèƒ½ä¸GEORADIUSç›¸åŒï¼Œåªæ˜¯ä¸­å¿ƒä½ç½®ä¸æ˜¯å…·ä½“çš„ç»çº¬åº¦ï¼Œè€Œæ˜¯ä½¿ç”¨ç»“åˆä¸­å·²æœ‰çš„æˆå‘˜ä½œä¸ºä¸­å¿ƒç‚¹ã€‚</td></tr><tr><td><code>geohash key member1 [member2..]</code></td><td>è¿”å›ä¸€ä¸ªæˆ–å¤šä¸ªä½ç½®å…ƒç´ çš„Geohashè¡¨ç¤ºã€‚ä½¿ç”¨Geohashä½ç½®52ç‚¹æ•´æ•°ç¼–ç ã€‚</td></tr></tbody></table><p><strong>æœ‰æ•ˆç»çº¬åº¦</strong></p><blockquote><ul><li>æœ‰æ•ˆçš„ç»åº¦ä»-180åº¦åˆ°180åº¦ã€‚</li><li>æœ‰æ•ˆçš„çº¬åº¦ä»-85.05112878åº¦åˆ°85.05112878åº¦ã€‚</li></ul></blockquote><p>æŒ‡å®šå•ä½çš„å‚æ•° <strong>unit</strong> å¿…é¡»æ˜¯ä»¥ä¸‹å•ä½çš„å…¶ä¸­ä¸€ä¸ªï¼š</p><ul><li><strong>m</strong> è¡¨ç¤ºå•ä½ä¸ºç±³ã€‚</li><li><strong>km</strong> è¡¨ç¤ºå•ä½ä¸ºåƒç±³ã€‚</li><li><strong>mi</strong> è¡¨ç¤ºå•ä½ä¸ºè‹±é‡Œã€‚</li><li><strong>ft</strong> è¡¨ç¤ºå•ä½ä¸ºè‹±å°ºã€‚</li></ul><p><strong>å…³äºGEORADIUSçš„å‚æ•°</strong></p><blockquote><p>é€šè¿‡<code>georadius</code>å°±å¯ä»¥å®Œæˆ <strong>é™„è¿‘çš„äºº</strong>åŠŸèƒ½</p><p>withcoord:å¸¦ä¸Šåæ ‡</p><p>withdist:å¸¦ä¸Šè·ç¦»ï¼Œå•ä½ä¸åŠå¾„å•ä½ç›¸åŒ</p><p>COUNT n : åªæ˜¾ç¤ºå‰nä¸ª(æŒ‰è·ç¦»é€’å¢æ’åº)</p></blockquote><blockquote><p>geoadd</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> getadd æ·»åŠ åœ°ç†ä½ç½®</span><br><span class="hljs-meta">#</span><span class="bash"> è§„åˆ™ï¼šä¸¤çº§æ— æ³•ç›´æ¥æ·»åŠ ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šä¸‹è½½åŸå¸‚æ•°æ®ï¼Œç›´æ¥é€šè¿‡javaç¨‹åºä¸€æ¬¡æ€§å¯¼å…¥ï¼</span><br><span class="hljs-meta">#</span><span class="bash"> æœ‰æ•ˆçš„ç»åº¦ä»-180åº¦åˆ°180åº¦ã€‚</span><br><span class="hljs-meta">#</span><span class="bash"> æœ‰æ•ˆçš„çº¬åº¦ä»-85.05112878åº¦åˆ°85.05112878åº¦ã€‚</span><br><span class="hljs-meta">#</span><span class="bash"> å½“åæ ‡ä½ç½®è¶…å‡ºä¸Šè¿°æŒ‡å®šèŒƒå›´æ—¶ï¼Œè¯¥å‘½ä»¤å°†ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</span><br><span class="hljs-meta">#</span><span class="bash"> 127.0.0.1:6379&gt; geoadd china:city 39.90 116.40 beijin</span><br>(error) ERR invalid longitude,latitude pair 39.900000,116.400000<br><br><span class="hljs-meta">#</span><span class="bash"> å‚æ•° key å€¼</span><br>127.0.0.1:6379&gt; geoadd china:city 116.40 39.90 beijing<br>(integer) 1<br>127.0.0.1:6379&gt; geoadd china:city 121.47 31.23 shanghai<br>(integer) 1<br>127.0.0.1:6379&gt; geoadd china:city 106.50 29.53 chongqing<br>(integer) 1<br>127.0.0.1:6379&gt; geoadd china:city 114.05 22.52 shenzhen<br>(integer) 1<br>127.0.0.1:6379&gt; geoadd china:city 120.16 30.24 hangzhou<br>(integer) 1<br>127.0.0.1:6379&gt; geoadd china:city 108.96 34.26 xian<br>(integer) 1<br></code></pre></td></tr></table></figure><blockquote><p>geopos</p></blockquote><p>è·å¾—å½“å‰å®šä½ï¼šä¸€å®šæ˜¯ä¸€ä¸ªåæ ‡å€¼ï¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; GEOPOS china:city beijing<br>1) 1) &quot;116.39999896287918091&quot;<br>   2) &quot;39.90000009167092543&quot;<br>127.0.0.1:6379&gt; GEOPOS china:city beijing chongqing<br>1) 1) &quot;116.39999896287918091&quot;<br>   2) &quot;39.90000009167092543&quot;<br>2) 1) &quot;106.49999767541885376&quot;<br>   2) &quot;29.52999957900659211&quot;<br></code></pre></td></tr></table></figure><blockquote><p>geodist</p></blockquote><p>ä¸¤åœ°ä¹‹é—´çš„è·ç¦»</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">127.0.0.1:6379&gt; GEODIST china:city beijing shanghai<br><span class="hljs-string">&quot;1067378.7564&quot;</span><br>127.0.0.1:6379&gt; GEODIST china:city beijing shanghai km<br><span class="hljs-string">&quot;1067.3788&quot;</span><br></code></pre></td></tr></table></figure><blockquote><p>georadius ä»¥ç»™å®šçš„ç»çº¬åº¦ä¸ºä¸­å¿ƒï¼Œ æ‰¾å‡ºæŸä¸€åŠå¾„å†…çš„å…ƒç´ </p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; GEORADIUS china:city 110 30 1000 km      # ä»¥110ï¼Œ30 è¿™ä¸ªç»çº¬åº¦ä¸ºä¸­å¿ƒï¼Œå¯»æ‰¾æ–¹åœ†1000kmå†…çš„åŸå¸‚<br>1) &quot;chongqing&quot;<br>2) &quot;xian&quot;<br>3) &quot;shenzhen&quot;<br>4) &quot;hangzhou&quot;<br>127.0.0.1:6379&gt; GEORADIUS china:city 110 30 300 km<br>(empty array)<br>127.0.0.1:6379&gt; GEORADIUS china:city 110 30 500 km<br>1) &quot;chongqing&quot;<br>2) &quot;xian&quot;<br>127.0.0.1:6379&gt; GEORADIUS china:city 110 30 500 km withdist  # æ˜¾ç¤ºåˆ°ä¸­é—´è·ç¦»çš„ä½ç½®<br>1) 1) &quot;chongqing&quot;<br>   2) &quot;341.9374&quot;<br>2) 1) &quot;xian&quot;<br>   2) &quot;483.8340&quot;<br>127.0.0.1:6379&gt; GEORADIUS china:city 110 30 500 km withcoord # æ˜¾ç¤ºä»–äººçš„å®šä½ä¿¡æ¯<br>1) 1) &quot;chongqing&quot;<br>   2) 1) &quot;106.49999767541885376&quot;<br>      2) &quot;29.52999957900659211&quot;<br>2) 1) &quot;xian&quot;<br>   2) 1) &quot;108.96000176668167114&quot;<br>      2) &quot;34.25999964418929977&quot;<br>127.0.0.1:6379&gt; GEORADIUS china:city 110 30 500 km withdist withcoord count 2  # ç­›é€‰å‡ºæŒ‡å®šçš„ç»“æœï¼<br>1) 1) &quot;chongqing&quot;<br>   2) &quot;341.9374&quot;<br>   3) 1) &quot;106.49999767541885376&quot;<br>      2) &quot;29.52999957900659211&quot;<br>2) 1) &quot;xian&quot;<br>   2) &quot;483.8340&quot;<br>   3) 1) &quot;108.96000176668167114&quot;<br>      2) &quot;34.25999964418929977&quot;<br>127.0.0.1:6379&gt; GEORADIUS china:city 110 30 500 km withdist withcoord count 1<br>1) 1) &quot;chongqing&quot;<br>   2) &quot;341.9374&quot;<br>   3) 1) &quot;106.49999767541885376&quot;<br>      2) &quot;29.52999957900659211&quot;<br></code></pre></td></tr></table></figure><blockquote><p>GEORADIUSBYMEMBER</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> æ‰¾å‡ºä½äºæŒ‡å®šå…ƒç´ å‘¨å›´çš„å…¶ä»–å…ƒç´ ï¼</span><br>127.0.0.1:6379&gt; GEORADIUSBYMEMBER china:city beijing 1000 km<br>1) &quot;beijing&quot;<br>2) &quot;xian&quot;<br>127.0.0.1:6379&gt; GEORADIUSBYMEMBER china:city shanghai 1000 km<br>1) &quot;hangzhou&quot;<br>2) &quot;shanghai&quot;<br></code></pre></td></tr></table></figure><blockquote><p>GEOHASH å‘½ä»¤ - è¿”å›ä¸€ä¸ªæˆ–å¤šä¸ªä½ç½®å…ƒç´ çš„ Geohash è¡¨ç¤º</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; GEOHASH china:city beijing chongqing<br>1) &quot;wx4fbxxfke0&quot;<br>2) &quot;wm5xzrybty0&quot;<br></code></pre></td></tr></table></figure><blockquote><p>GEO åº•å±‚çš„å®ç°åŸç†å…¶å®å°±æ˜¯ Zsetï¼æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Zsetå‘½ä»¤æ¥æ“ä½œgeoï¼</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; ZRANGE china:city 0 -1    # æŸ¥çœ‹åœ°å›¾ä¸­å…¨éƒ¨çš„å…ƒç´ <br>1) &quot;chongqing&quot;<br>2) &quot;xian&quot;<br>3) &quot;shenzhen&quot;<br>4) &quot;hangzhou&quot;<br>5) &quot;shanghai&quot;<br>6) &quot;beijing&quot;<br>127.0.0.1:6379&gt; ZREM china:city beijing<br>(integer) 1<br>127.0.0.1:6379&gt; ZRANGE china:city 0 -1    # ç§»é™¤æŒ‡å®šå…ƒç´ ï¼<br>1) &quot;chongqing&quot;<br>2) &quot;xian&quot;<br>3) &quot;shenzhen&quot;<br>4) &quot;hangzhou&quot;<br>5) &quot;shanghai&quot;<br></code></pre></td></tr></table></figure><h3 id="HyperloglogåŸºæ•°ç»Ÿè®¡"><a href="#HyperloglogåŸºæ•°ç»Ÿè®¡" class="headerlink" title="HyperloglogåŸºæ•°ç»Ÿè®¡"></a>HyperloglogåŸºæ•°ç»Ÿè®¡</h3><blockquote><p>Redis HyperLogLog æ˜¯ç”¨æ¥åšåŸºæ•°ç»Ÿè®¡çš„ç®—æ³•ï¼ŒHyperLogLog çš„ä¼˜ç‚¹æ˜¯ï¼Œåœ¨è¾“å…¥å…ƒç´ çš„æ•°é‡æˆ–è€…ä½“ç§¯éå¸¸éå¸¸å¤§æ—¶ï¼Œè®¡ç®—åŸºæ•°æ‰€éœ€çš„ç©ºé—´æ€»æ˜¯å›ºå®šçš„ã€å¹¶ä¸”æ˜¯å¾ˆå°çš„ã€‚</p><p>èŠ±è´¹ 12 KB å†…å­˜ï¼Œå°±å¯ä»¥è®¡ç®—æ¥è¿‘ 2^64 ä¸ªä¸åŒå…ƒç´ çš„åŸºæ•°ã€‚</p><p>å› ä¸º HyperLogLog åªä¼šæ ¹æ®è¾“å…¥å…ƒç´ æ¥è®¡ç®—åŸºæ•°ï¼Œè€Œä¸ä¼šå‚¨å­˜è¾“å…¥å…ƒç´ æœ¬èº«ï¼Œæ‰€ä»¥ HyperLogLog ä¸èƒ½åƒé›†åˆé‚£æ ·ï¼Œè¿”å›è¾“å…¥çš„å„ä¸ªå…ƒç´ ã€‚</p><p>å…¶åº•å±‚ä½¿ç”¨stringæ•°æ®ç±»å‹</p></blockquote><p><strong>ä»€ä¹ˆæ˜¯åŸºæ•°ï¼Ÿ</strong></p><blockquote><p>æ•°æ®é›†ä¸­ä¸é‡å¤çš„å…ƒç´ çš„ä¸ªæ•°ã€‚</p></blockquote><p><strong>åº”ç”¨åœºæ™¯ï¼š</strong></p><p>ç½‘é¡µçš„è®¿é—®é‡ï¼ˆUVï¼‰ï¼šä¸€ä¸ªç”¨æˆ·å¤šæ¬¡è®¿é—®ï¼Œä¹Ÿåªèƒ½ç®—ä½œä¸€ä¸ªäººã€‚</p><blockquote><p>ä¼ ç»Ÿå®ç°ï¼Œå­˜å‚¨ç”¨æˆ·çš„id,ç„¶åæ¯æ¬¡è¿›è¡Œæ¯”è¾ƒã€‚å½“ç”¨æˆ·å˜å¤šä¹‹åè¿™ç§æ–¹å¼åŠå…¶æµªè´¹ç©ºé—´ï¼Œè€Œæˆ‘ä»¬çš„ç›®çš„åªæ˜¯<strong>è®¡æ•°</strong>ï¼ŒHyperloglogå°±èƒ½å¸®åŠ©æˆ‘ä»¬åˆ©ç”¨æœ€å°çš„ç©ºé—´å®Œæˆã€‚</p></blockquote><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>PFADD key element1 [elememt2..]</code></td><td>æ·»åŠ æŒ‡å®šå…ƒç´ åˆ° HyperLogLog ä¸­</td></tr><tr><td><code>PFCOUNT key [key]</code></td><td>è¿”å›ç»™å®š HyperLogLog çš„åŸºæ•°ä¼°ç®—å€¼ã€‚</td></tr><tr><td><code>PFMERGE destkey sourcekey [sourcekey..]</code></td><td>å°†å¤šä¸ª HyperLogLog åˆå¹¶ä¸ºä¸€ä¸ª HyperLogLog</td></tr></tbody></table><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; PFadd myset a b c d e f g h i j  # æ·»åŠ å…ƒç´ <br>(integer) 1<br>127.0.0.1:6379&gt; PFCOUNT myset    # ä¼°ç®—myelemxçš„åŸºæ•°<br>(integer) 10<br>127.0.0.1:6379&gt; PFCOUNT myset2 i j z x c v b n m <br>(integer) 0<br>127.0.0.1:6379&gt; PFadd myset2 i j z x c v b n m <br>(integer) 1<br>127.0.0.1:6379&gt; PFCOUNT myset2<br>(integer) 9<br>127.0.0.1:6379&gt; PFMERGE myset3 myset1 myset2  #åˆå¹¶myset1å’Œmyset2ä½myset3ï¼Œç›¸å½“äºäº¤é›†<br>OK  <br>127.0.0.1:6379&gt; PFCOUNT myset3   # ä¼°ç®—åŸºæ•°<br>(integer) 9<br></code></pre></td></tr></table></figure><h3 id="BitMapsä½å›¾"><a href="#BitMapsä½å›¾" class="headerlink" title="BitMapsä½å›¾"></a>BitMapsä½å›¾</h3><blockquote><p>ä½¿ç”¨ä½å­˜å‚¨ï¼Œä¿¡æ¯çŠ¶æ€åªæœ‰ 0 å’Œ 1</p><p>Bitmapæ˜¯ä¸€ä¸²è¿ç»­çš„2è¿›åˆ¶æ•°å­—ï¼ˆ0æˆ–1ï¼‰ï¼Œæ¯ä¸€ä½æ‰€åœ¨çš„ä½ç½®ä¸ºåç§»(offset)ï¼Œåœ¨bitmapä¸Šå¯æ‰§è¡ŒAND,OR,XOR,NOTä»¥åŠå…¶å®ƒä½æ“ä½œã€‚</p></blockquote><p><strong>åº”ç”¨åœºæ™¯</strong></p><p>ç­¾åˆ°ç»Ÿè®¡ã€çŠ¶æ€ç»Ÿè®¡</p><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>setbit key offset value</code></td><td>ä¸ºæŒ‡å®škeyçš„offsetä½è®¾ç½®å€¼</td></tr><tr><td><code>getbit key offset</code></td><td>è·å–offsetä½çš„å€¼</td></tr><tr><td><code>bitcount key [start end]</code></td><td>ç»Ÿè®¡å­—ç¬¦ä¸²è¢«è®¾ç½®ä¸º1çš„bitæ•°ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šç»Ÿè®¡èŒƒå›´æŒ‰å­—èŠ‚</td></tr><tr><td><code>bitop operration destkey key[key..]</code></td><td>å¯¹ä¸€ä¸ªæˆ–å¤šä¸ªä¿å­˜äºŒè¿›åˆ¶ä½çš„å­—ç¬¦ä¸² key è¿›è¡Œä½å…ƒæ“ä½œï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ° destkey ä¸Šã€‚</td></tr><tr><td><code>BITPOS key bit [start] [end]</code></td><td>è¿”å›å­—ç¬¦ä¸²é‡Œé¢ç¬¬ä¸€ä¸ªè¢«è®¾ç½®ä¸º1æˆ–è€…0çš„bitä½ã€‚startå’Œendåªèƒ½æŒ‰å­—èŠ‚,ä¸èƒ½æŒ‰ä½</td></tr></tbody></table><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs shell">------------setbit--getbit--------------<br>127.0.0.1:6379&gt; setbit sign 0 1 # è®¾ç½®signçš„ç¬¬0ä½ä¸º 1 <br>(integer) 0<br>127.0.0.1:6379&gt; setbit sign 2 1 # è®¾ç½®signçš„ç¬¬2ä½ä¸º 1  ä¸è®¾ç½®é»˜è®¤ æ˜¯0<br>(integer) 0<br>127.0.0.1:6379&gt; setbit sign 3 1<br>(integer) 0<br>127.0.0.1:6379&gt; setbit sign 5 1<br>(integer) 0<br>127.0.0.1:6379&gt; type sign<br>string<br><br>127.0.0.1:6379&gt; getbit sign 2 # è·å–ç¬¬2ä½çš„æ•°å€¼<br>(integer) 1<br>127.0.0.1:6379&gt; getbit sign 3<br>(integer) 1<br>127.0.0.1:6379&gt; getbit sign 4 # æœªè®¾ç½®é»˜è®¤æ˜¯0<br>(integer) 0<br><br>-----------bitcount----------------------------<br>127.0.0.1:6379&gt; BITCOUNT sign # ç»Ÿè®¡signä¸­ä¸º1çš„ä½æ•°<br>(integer) 4<br></code></pre></td></tr></table></figure><p><strong>bitmapsçš„åº•å±‚</strong></p><p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-9PlszjhS-1597890996519)(D:\æˆ‘\MyBlog\ç‹‚ç¥è¯´ Redis.assets\image-20200803234336175.png)]</p><p>è¿™æ ·è®¾ç½®ä»¥åä½ èƒ½getåˆ°çš„å€¼æ˜¯ï¼š<strong>\xA2\x80</strong>ï¼Œæ‰€ä»¥bitmapsæ˜¯ä¸€ä¸²ä»å·¦åˆ°å³çš„äºŒè¿›åˆ¶ä¸²</p>]]></content>
    
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Redisç¬”è®°06-äº”å¤§æ•°æ®ç±»å‹</title>
    <link href="/posts/2021/01/19/Redis%E7%AC%94%E8%AE%B006-%E4%BA%94%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"/>
    <url>/posts/2021/01/19/Redis%E7%AC%94%E8%AE%B006-%E4%BA%94%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</url>
    
    <content type="html"><![CDATA[<h2 id="äº”å¤§æ•°æ®ç±»å‹"><a href="#äº”å¤§æ•°æ®ç±»å‹" class="headerlink" title="äº”å¤§æ•°æ®ç±»å‹"></a>äº”å¤§æ•°æ®ç±»å‹</h2><h3 id="Stringï¼ˆå­—ç¬¦ä¸²ï¼‰"><a href="#Stringï¼ˆå­—ç¬¦ä¸²ï¼‰" class="headerlink" title="Stringï¼ˆå­—ç¬¦ä¸²ï¼‰"></a>Stringï¼ˆå­—ç¬¦ä¸²ï¼‰</h3><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>APPEND key value</code></td><td>å‘æŒ‡å®šçš„keyçš„valueåè¿½åŠ å­—ç¬¦ä¸²</td></tr><tr><td><code>DECR/INCR key</code></td><td>å°†æŒ‡å®škeyçš„valueæ•°å€¼è¿›è¡Œ+1/-1(ä»…å¯¹äºæ•°å­—)</td></tr><tr><td><code>INCRBY/DECRBY key n</code></td><td>æŒ‰æŒ‡å®šçš„æ­¥é•¿å¯¹æ•°å€¼è¿›è¡ŒåŠ å‡</td></tr><tr><td><code>INCRBYFLOAT key n</code></td><td>ä¸ºæ•°å€¼åŠ ä¸Šæµ®ç‚¹å‹æ•°å€¼</td></tr><tr><td><code>STRLEN key</code></td><td>è·å–keyä¿å­˜å€¼çš„å­—ç¬¦ä¸²é•¿åº¦</td></tr><tr><td><code>GETRANGE key start end</code></td><td>æŒ‰èµ·æ­¢ä½ç½®è·å–å­—ç¬¦ä¸²ï¼ˆé—­åŒºé—´ï¼Œèµ·æ­¢ä½ç½®éƒ½å–ï¼‰</td></tr><tr><td><code>SETRANGE key offset value</code></td><td>ç”¨æŒ‡å®šçš„value æ›¿æ¢keyä¸­ offsetå¼€å§‹çš„å€¼</td></tr><tr><td><code>GETSET key value</code></td><td>å°†ç»™å®š key çš„å€¼è®¾ä¸º value ï¼Œå¹¶è¿”å› key çš„æ—§å€¼(old value)ã€‚</td></tr><tr><td><code>SETNX key value</code></td><td>ä»…å½“keyä¸å­˜åœ¨æ—¶è¿›è¡Œset</td></tr><tr><td><code>SETEX key seconds value</code></td><td>set é”®å€¼å¯¹å¹¶è®¾ç½®è¿‡æœŸæ—¶é—´</td></tr><tr><td><code>MSET key1 value1 [key2 value2..]</code></td><td>æ‰¹é‡seté”®å€¼å¯¹</td></tr><tr><td><code>MSETNX key1 value1 [key2 value2..]</code></td><td>æ‰¹é‡è®¾ç½®é”®å€¼å¯¹ï¼Œä»…å½“å‚æ•°ä¸­æ‰€æœ‰çš„keyéƒ½ä¸å­˜åœ¨æ—¶æ‰§è¡Œ</td></tr><tr><td><code>MGET key1 [key2..]</code></td><td>æ‰¹é‡è·å–å¤šä¸ªkeyä¿å­˜çš„å€¼</td></tr><tr><td><code>PSETEX key milliseconds value</code></td><td>å’Œ SETEX å‘½ä»¤ç›¸ä¼¼ï¼Œä½†å®ƒä»¥æ¯«ç§’ä¸ºå•ä½è®¾ç½® key çš„ç”Ÿå­˜æ—¶é—´ï¼Œ</td></tr><tr><td><code>getset key value</code></td><td>å¦‚æœä¸å­˜åœ¨å€¼ï¼Œåˆ™è¿”å›nilï¼Œå¦‚æœå­˜åœ¨å€¼ï¼Œè·å–åŸæ¥çš„å€¼ï¼Œå¹¶è®¾ç½®æ–°çš„å€¼</td></tr></tbody></table><p>Stringçš„ä½¿ç”¨å®ä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################################</span></span><br>127.0.0.1:6379&gt; set key1 v1           # è®¾ç½®å€¼<br>OK<br>127.0.0.1:6379&gt; type key1             # è·å–å€¼ç±»å‹<br>string<br>127.0.0.1:6379&gt; keys *                # è·å¾—æ‰€æœ‰çš„key<br>1) &quot;key1&quot;<br>127.0.0.1:6379&gt; EXISTS key1           # åˆ¤æ–­ä¸€ä¸ªkeyæ˜¯å¦å­˜åœ¨<br>(integer) 1<br>127.0.0.1:6379&gt; APPEND key1 &quot;hello&quot;   # è¿½åŠ å­—ç¬¦ä¸²ï¼Œå¦‚æœå½“å‰keyä¸å­˜åœ¨ï¼Œå°±ç›¸å½“äºsetkey<br>(integer) 7<br>127.0.0.1:6379&gt; get key1 <br>&quot;v1hello&quot;<br>127.0.0.1:6379&gt; STRLEN key1           # è·å–å­—ç¬¦ä¸²çš„é•¿åº¦<br>(integer) 7<br>127.0.0.1:6379&gt; APPEND key1 &quot;qiaowei&quot;<br>(integer) 14<br>127.0.0.1:6379&gt; get key1<br>&quot;v1helloqiaowei&quot;<br>127.0.0.1:6379&gt; STRLEN key1<br>(integer) 14<br><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################################</span></span><br><span class="hljs-meta">#</span><span class="bash"> i++</span><br><span class="hljs-meta">#</span><span class="bash"> æ­¥é•¿ i+=</span> <br>127.0.0.1:6379&gt; set views 0            # åˆå§‹æµè§ˆé‡ä¸º0<br>OK<br>127.0.0.1:6379&gt; get views <br>&quot;0&quot; <br>127.0.0.1:6379&gt; incr views             # è‡ªå¢1 æµè§ˆé‡å˜ä¸º1<br>(integer) 1<br>127.0.0.1:6379&gt; incr views             # è‡ªå¢1 æµè§ˆé‡å˜ä¸º2<br>(integer) 2<br>127.0.0.1:6379&gt; get views<br>&quot;2&quot;<br>127.0.0.1:6379&gt; get views<br>&quot;2&quot;<br>127.0.0.1:6379&gt; decr views             # è‡ªå‡1 æµè§ˆé‡å˜ä¸º1    <br>(integer) 1<br>127.0.0.1:6379&gt; decr views             # è‡ªå‡1 æµè§ˆé‡å˜ä¸º0<br>(integer) 0<br>127.0.0.1:6379&gt; get views<br>&quot;0&quot;<br>127.0.0.1:6379&gt; INCRBY views 10        # è®¾ç½®æ­¥é•¿10 æŒ‡å®šå¢é‡<br>(integer) 10<br>127.0.0.1:6379&gt; INCRBY views 10<br>(integer) 20<br>127.0.0.1:6379&gt; get views<br>&quot;20&quot;<br>127.0.0.1:6379&gt; DECRBY views 10<br>(integer) 10<br>127.0.0.1:6379&gt; DECRBY views 10<br>(integer) 0<br>127.0.0.1:6379&gt; get views<br>&quot;0&quot;<br><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################################</span></span><br><span class="hljs-meta">#</span><span class="bash"> å­—ç¬¦ä¸²èŒƒå›´ range</span><br>127.0.0.1:6379&gt; set key1 &quot;hello,qiaowei&quot;   # è®¾ç½®key1çš„å€¼<br>OK<br>127.0.0.1:6379&gt; get key1<br>&quot;hello,qiaowei&quot;<br>127.0.0.1:6379&gt; GETRANGE key1 0 3          # ä»ä¸‹æ ‡0åˆ°3æˆªå–å­—ç¬¦ä¸²<br>&quot;hell&quot;<br>127.0.0.1:6379&gt; GETRANGE key1 0 -1         # æˆªå–å…¨éƒ¨å­—ç¬¦ä¸²<br>&quot;hello,qiaowei&quot;<br>127.0.0.1:6379&gt; set key2 abcdefg  <br>OK<br>127.0.0.1:6379&gt; get key2<br>&quot;abcdefg&quot;<br>127.0.0.1:6379&gt; SETRANGE key2 1 xxx        # ä»ä¸‹æ ‡1å¼€å§‹æ›¿æ¢ä¸ºxxx<br>(integer) 7<br>127.0.0.1:6379&gt; get key2<br>&quot;axxxefg&quot;<br><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################################</span></span><br><span class="hljs-meta">#</span><span class="bash"> setex (<span class="hljs-built_in">set</span> with expire) <span class="hljs-comment"># è®¾ç½®è¿‡æœŸæ—¶é—´</span></span><br><span class="hljs-meta">#</span><span class="bash"> setnx (<span class="hljs-built_in">set</span> <span class="hljs-keyword">if</span> not exist) <span class="hljs-comment"># å¦‚æœä¸å­˜åœ¨æ‰è®¾ç½®ï¼ˆåœ¨åˆ†å¸ƒå¼é”ä¸­ä¼šå¸¸ç”¨ï¼‰</span></span><br>127.0.0.1:6379&gt; setex key3 30 &quot;hello&quot;      # è®¾ç½®key3å€¼ä¸ºhelloï¼Œ30ç§’åè¿‡æœŸ<br>OK <br>127.0.0.1:6379&gt; ttl key3<br>(integer) 26<br>127.0.0.1:6379&gt; ttl key3<br>(integer) 25<br>127.0.0.1:6379&gt; get key3<br>&quot;hello&quot;<br>127.0.0.1:6379&gt; setnx mykey &quot;redis&quot;        # å¦‚æœmykeyä¸å­˜åœ¨ï¼Œåˆ›å»ºmykey<br>(integer) 1<br>127.0.0.1:6379&gt; keys *<br>1) &quot;key1&quot;<br>2) &quot;key2&quot;<br>3) &quot;mykey&quot;<br>127.0.0.1:6379&gt; setnx mykey &quot;MongoDB&quot;      # å¦‚æœmykeyå­˜åœ¨ï¼Œåˆ›å»ºå¤±è´¥<br>(integer) 0<br>127.0.0.1:6379&gt; keys *<br>1) &quot;key1&quot;<br>2) &quot;key2&quot;<br>3) &quot;mykey&quot;<br>127.0.0.1:6379&gt; get mykey<br>&quot;redis&quot;<br><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################################</span></span><br><span class="hljs-meta">#</span><span class="bash"> mset å’Œ mget</span>  <br>127.0.0.1:6379&gt; mset k1 v1 k2 v2 k3 v3     # åŒæ—¶è®¾ç½®å¤šä¸ªå€¼<br>OK<br>127.0.0.1:6379&gt; keys *<br>1) &quot;k1&quot;<br>2) &quot;k3&quot;<br>3) &quot;k2&quot;<br>127.0.0.1:6379&gt; mget k1 k2 k3              # åŒæ—¶è·å–å¤šä¸ªå€¼<br>1) &quot;v1&quot;<br>2) &quot;v2&quot;<br>3) &quot;v3&quot;<br>127.0.0.1:6379&gt; msetnx k1 v1 k4 v4         # msetnxæ˜¯ä¸€ä¸ªåŸå­æ€§çš„æ“ä½œï¼Œè¦ä¹ˆä¸€èµ·æˆåŠŸï¼Œè¦ä¹ˆä¸€èµ·å¤±è´¥<br>(integer) 0<br>127.0.0.1:6379&gt; get k4<br>(nil)<br><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################################</span></span><br><span class="hljs-meta">#</span><span class="bash"> å¯¹è±¡</span><br>set user:1 &#123;name:zhangsan,age:3&#125; # è®¾ç½®ä¸€ä¸ªuser:1 å¯¹è±¡ å€¼ä¸º jsonå­—ç¬¦æ¥ä¿å­˜ä¸€ä¸ªå¯¹è±¡ï¼<br><span class="hljs-meta">#</span><span class="bash"> è¿™é‡Œçš„keyæ˜¯ä¸€ä¸ªå·§å¦™çš„è®¾è®¡ï¼š user:&#123;id&#125;:&#123;filed&#125; , å¦‚æ­¤è®¾è®¡åœ¨Redisä¸­æ˜¯å®Œå…¨OKäº†ï¼</span><br>127.0.0.1:6379&gt; mset user:1:name zhangsan user:1:age 2<br>OK<br>127.0.0.1:6379&gt; mget user:1:name user:1:age<br>1) &quot;zhangsan&quot;<br>2) &quot;2&quot;<br><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################################</span></span><br><span class="hljs-meta">#</span><span class="bash"> getset å…ˆgetå<span class="hljs-built_in">set</span></span><br>127.0.0.1:6379&gt; getset db redis         # ä¸€å¼€å§‹ä¸å­˜åœ¨å€¼ï¼Œåˆ™è¿”å›nil<br>(nil)<br>127.0.0.1:6379&gt; get db<br>&quot;redis&quot;<br>127.0.0.1:6379&gt; getset db mongodb       # å¦‚æœå­˜åœ¨å€¼ï¼Œè·å–åŸæ¥çš„å€¼å¹¶è®¾ç½®æ–°çš„å€¼<br>&quot;redis&quot;<br>127.0.0.1:6379&gt; get db<br>&quot;mongodb&quot;<br></code></pre></td></tr></table></figure><p>Stringçš„ä½¿ç”¨åœºæ™¯ï¼švalueé™¤äº†æˆ‘ä»¬çš„å­—ç¬¦ä¸²è¿˜å¯ä»¥æ˜¯æˆ‘ä»¬çš„æ•°å­—</p><ul><li>è®¡æ•°å™¨</li><li>ç»Ÿè®¡å¤šå•ä½çš„æ•°é‡</li><li>ç²‰ä¸æ•°</li><li>å¯¹è±¡ç¼“å­˜å­˜å‚¨</li></ul><h3 id="Listï¼ˆåˆ—è¡¨ï¼‰"><a href="#Listï¼ˆåˆ—è¡¨ï¼‰" class="headerlink" title="Listï¼ˆåˆ—è¡¨ï¼‰"></a>Listï¼ˆåˆ—è¡¨ï¼‰</h3><blockquote><p>Redisåˆ—è¡¨æ˜¯ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºæ’åºã€‚ä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨çš„å¤´éƒ¨ï¼ˆå·¦è¾¹ï¼‰æˆ–è€…å°¾éƒ¨ï¼ˆå³è¾¹ï¼‰</p><p>ä¸€ä¸ªåˆ—è¡¨æœ€å¤šå¯ä»¥åŒ…å« 232 - 1 ä¸ªå…ƒç´  (4294967295, æ¯ä¸ªåˆ—è¡¨è¶…è¿‡40äº¿ä¸ªå…ƒç´ )ã€‚</p></blockquote><p>é¦–å…ˆæˆ‘ä»¬åˆ—è¡¨ï¼Œå¯ä»¥ç»è¿‡è§„åˆ™å®šä¹‰å°†å…¶å˜ä¸ºé˜Ÿåˆ—ã€æ ˆã€åŒç«¯é˜Ÿåˆ—ç­‰</p><p><img src="/posts/2021/01/19/Redis%E7%AC%94%E8%AE%B006-%E4%BA%94%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/list.png" alt="åˆ—è¡¨"></p><p>æ­£å¦‚å›¾Redisä¸­Listæ˜¯å¯ä»¥è¿›è¡ŒåŒç«¯æ“ä½œçš„ï¼Œæ‰€ä»¥å‘½ä»¤ä¹Ÿå°±åˆ†ä¸ºäº†LXXXå’ŒRXXXä¸¤ç±»ï¼Œæœ‰æ—¶å€™Lä¹Ÿè¡¨ç¤ºListä¾‹å¦‚LLEN</p><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>LPUSH/RPUSH key value1[value2..]</code></td><td>ä»å·¦è¾¹/å³è¾¹å‘åˆ—è¡¨ä¸­PUSHå€¼(ä¸€ä¸ªæˆ–è€…å¤šä¸ª)ã€‚</td></tr><tr><td><code>LRANGE key start end</code></td><td>è·å–list èµ·æ­¢å…ƒç´ ==ï¼ˆç´¢å¼•ä»å·¦å¾€å³ é€’å¢ï¼‰==</td></tr><tr><td><code>LPUSHX/RPUSHX key value</code></td><td>å‘å·²å­˜åœ¨çš„åˆ—åä¸­pushå€¼ï¼ˆä¸€ä¸ªæˆ–è€…å¤šä¸ªï¼‰</td></tr><tr><td>`LINSERT key BEFORE</td><td>AFTER pivot value`</td></tr><tr><td><code>LLEN key</code></td><td>æŸ¥çœ‹åˆ—è¡¨é•¿åº¦</td></tr><tr><td><code>LINDEX key index</code></td><td>é€šè¿‡ç´¢å¼•è·å–åˆ—è¡¨å…ƒç´ </td></tr><tr><td><code>LSET key index value</code></td><td>é€šè¿‡ç´¢å¼•ä¸ºå…ƒç´ è®¾å€¼</td></tr><tr><td><code>LPOP/RPOP key</code></td><td>ä»æœ€å·¦è¾¹/æœ€å³è¾¹ç§»é™¤å€¼ å¹¶è¿”å›</td></tr><tr><td><code>RPOPLPUSH source destination</code></td><td>å°†åˆ—è¡¨çš„å°¾éƒ¨(å³)æœ€åä¸€ä¸ªå€¼å¼¹å‡ºï¼Œå¹¶è¿”å›ï¼Œç„¶ååŠ åˆ°å¦ä¸€ä¸ªåˆ—è¡¨çš„å¤´éƒ¨</td></tr><tr><td><code>LTRIM key start end</code></td><td>é€šè¿‡ä¸‹æ ‡æˆªå–æŒ‡å®šèŒƒå›´å†…çš„åˆ—è¡¨</td></tr><tr><td><code>LREM key count value</code></td><td>Listä¸­æ˜¯å…è®¸valueé‡å¤çš„ <code>count &gt; 0</code>ï¼šä»å¤´éƒ¨å¼€å§‹æœç´¢ ç„¶ååˆ é™¤æŒ‡å®šçš„value è‡³å¤šåˆ é™¤countä¸ª <code>count &lt; 0</code>ï¼šä»å°¾éƒ¨å¼€å§‹æœç´¢â€¦ <code>count = 0</code>ï¼šåˆ é™¤åˆ—è¡¨ä¸­æ‰€æœ‰çš„æŒ‡å®švalueã€‚</td></tr><tr><td><code>BLPOP/BRPOP key1[key2] timout</code></td><td>ç§»å‡ºå¹¶è·å–åˆ—è¡¨çš„ç¬¬ä¸€ä¸ª/æœ€åä¸€ä¸ªå…ƒç´ ï¼Œ å¦‚æœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡åˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢ã€‚</td></tr><tr><td><code>BRPOPLPUSH source destination timeout</code></td><td>å’Œ<code>RPOPLPUSH</code>åŠŸèƒ½ç›¸åŒï¼Œå¦‚æœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡åˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢ã€‚</td></tr></tbody></table><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><code class="hljs shell">---------------------------LPUSH---RPUSH---LRANGE--------------------------------<br>127.0.0.1:6379&gt; lpush list one     # LPUSH list=&gt;&#123;one&#125;<br>(integer) 1<br>127.0.0.1:6379&gt; lpush list two     # LPUSH list=&gt;&#123;two,one&#125;<br>(integer) 2<br>127.0.0.1:6379&gt; lpush list three   # LPUSH list=&gt;&#123;three,two,one&#125;<br>(integer) 3<br>127.0.0.1:6379&gt; LRANGE list 0 -1   # è·å–å…¨éƒ¨å…ƒç´ <br>1) &quot;three&quot;<br>2) &quot;two&quot;<br>3) &quot;one&quot;<br>127.0.0.1:6379&gt; LRANGE list 0 1    # LRANGE è·å–èµ·æ­¢ä½ç½®èŒƒå›´å†…çš„å…ƒç´ <br>1) &quot;three&quot;<br>2) &quot;two&quot;   <br>127.0.0.1:6379&gt; Rpush list right   # RPUSH list=&gt;&#123;three,two,one,right&#125;<br>(integer) 4<br>127.0.0.1:6379&gt; LRANGE list 0 -1<br>1) &quot;three&quot;<br>2) &quot;two&quot;<br>3) &quot;one&quot;<br>4) &quot;right&quot;<br><br>---------------------------LPOP---RPOP-----------------------------------<br>127.0.0.1:6379&gt; LRANGE list 0 -1   # list=&gt;&#123;three,two,one,right&#125;<br>1) &quot;three&quot; <br>2) &quot;two&quot;<br>3) &quot;one&quot;<br>4) &quot;right&quot;<br>127.0.0.1:6379&gt; LPOP list          # LPOP =&gt; å·¦ä¾§ï¼ˆå¤´éƒ¨ï¼‰å¼¹å‡º three<br>&quot;three&quot;<br>127.0.0.1:6379&gt; LRANGE list 0 -1<br>1) &quot;two&quot;<br>2) &quot;one&quot;<br>3) &quot;right&quot;<br>127.0.0.1:6379&gt; RPOP list          # RPOP =&gt; å³ä¾§ï¼ˆå°¾éƒ¨ï¼‰å¼¹å‡º right <br>&quot;right&quot;<br>127.0.0.1:6379&gt; LRANGE list 0 -1<br>1) &quot;two&quot;<br>2) &quot;one&quot;<br><br>---------------------------LINDEX------------------------------------------<br>127.0.0.1:6379&gt; LRANGE list 0 -1<br>1) &quot;two&quot;<br>2) &quot;one&quot;<br>127.0.0.1:6379&gt; LINDEX list 1      # é€šè¿‡ä¸‹æ ‡è·å¾—listä¸­çš„æŸä¸ªvalue<br>&quot;one&quot;<br>127.0.0.1:6379&gt; LINDEX list 0<br>&quot;two&quot;<br><br>---------------------------Llen--------------------------------------------<br>127.0.0.1:6379&gt; Lpush list one<br>(integer) 1<br>127.0.0.1:6379&gt; Lpush list two<br>(integer) 2<br>127.0.0.1:6379&gt; Lpush list three<br>(integer) 3<br>127.0.0.1:6379&gt; Llen list          # è¿”å›listçš„é•¿åº¦<br>(integer) 3<br><br>---------------------------Lrem--------------------------------------------<br>127.0.0.1:6379&gt; LRANGE list 0 -1<br>1) &quot;three&quot;<br>2) &quot;three&quot;<br>3) &quot;two&quot;<br>4) &quot;one&quot;<br>127.0.0.1:6379&gt; LREM list 1 one    # ç§»é™¤listé›†åˆä¸­çš„1ä¸ªone<br>(integer) 1<br>127.0.0.1:6379&gt; LRANGE list 0 -1   <br>1) &quot;three&quot;<br>2) &quot;three&quot;<br>3) &quot;two&quot;<br>127.0.0.1:6379&gt; LREM list 2 three  # ç§»é™¤<br>(integer) 2<br>127.0.0.1:6379&gt; LRANGE list 0 -1<br>1) &quot;two&quot;<br><br>---------------------------Ltrim-------------------------------------------<br>127.0.0.1:6379&gt; Rpush mylist &quot;hello&quot;<br>(integer) 1<br>127.0.0.1:6379&gt; Rpush mylist &quot;hello1&quot;<br>(integer) 2<br>127.0.0.1:6379&gt; Rpush mylist &quot;hello2&quot;<br>(integer) 3<br>127.0.0.1:6379&gt; Rpush mylist &quot;hello3&quot;<br>(integer) 4<br>127.0.0.1:6379&gt; LTRIM mylist 1 2     # é€šè¿‡ä¸‹æ ‡æˆªå–æŒ‡å®šçš„é•¿åº¦ï¼Œè¿™ä¸ªlistå·²ç»è¢«æ”¹å˜äº†ï¼Œåªå‰©ä¸‹æˆªå–çš„å…ƒç´ <br>OK<br>127.0.0.1:6379&gt; LRANGE mylist 0 -1<br>1) &quot;hello1&quot;<br>2) &quot;hello2&quot;<br><br>---------------------------rpoplpush----------------------------------------<br><span class="hljs-meta">#</span><span class="bash"> ç§»é™¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå°†ä»–ç§»åŠ¨åˆ°æ–°çš„åˆ—è¡¨ä¸­ï¼</span><br>127.0.0.1:6379&gt; rpush mylist &quot;hello&quot;<br>(integer) 1<br>127.0.0.1:6379&gt; rpush mylist &quot;hello1&quot;<br>(integer) 2<br>127.0.0.1:6379&gt; rpush mylist &quot;hello2&quot;<br>(integer) 3<br>127.0.0.1:6379&gt; rpoplpush mylist myotherlist # ç§»é™¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå°†ä»–ç§»åŠ¨åˆ°æ–°çš„åˆ—è¡¨ä¸­ï¼<br>&quot;hello2&quot;<br>127.0.0.1:6379&gt; lrange mylist 0 -1 # æŸ¥çœ‹åŸæ¥çš„åˆ—è¡¨<br>1) &quot;hello&quot;<br>2) &quot;hello1&quot;<br>127.0.0.1:6379&gt; lrange myotherlist 0 -1 # æŸ¥çœ‹ç›®æ ‡åˆ—è¡¨ä¸­ï¼Œç¡®å®å­˜åœ¨æ”¹å€¼ï¼<br>1) &quot;hello2&quot;<br><br>---------------------------Lset-------------------------------------------<br>127.0.0.1:6379&gt; EXISTS list        # åˆ¤æ–­è¿™ä¸ªåˆ—è¡¨æ˜¯å¦å­˜åœ¨<br>(integer) 0 <br>127.0.0.1:6379&gt; lset list 9 item   # å¦‚æœä¸å­˜åœ¨ä½¿ç”¨lsetä¼šæŠ¥é”™<br>(error) ERR no such key<br>127.0.0.1:6379&gt; lpush list value1<br>(integer) 1<br>127.0.0.1:6379&gt; LRANGE list 0 0   <br>1) &quot;value1&quot;<br>127.0.0.1:6379&gt; LSET list 0 item   # å¦‚æœä¸å­˜åœ¨ï¼Œæ›´æ–°ä¸‹æ ‡0çš„å€¼ä¸ºitem<br>OK<br>127.0.0.1:6379&gt; LRANGE list 0 0<br>1) &quot;item&quot;<br><br>---------------------------Linsert-----------------------------------------<br><span class="hljs-meta">#</span><span class="bash"> å°†æŸä¸ªå…·ä½“çš„valueæ’å…¥åˆ°åˆ—æŠŠä½ ä¸­æŸä¸ªå…ƒç´ çš„å‰é¢æˆ–è€…åé¢ï¼</span><br>127.0.0.1:6379&gt; Rpush mylist &quot;hello&quot;<br>(integer) 1<br>127.0.0.1:6379&gt; Rpush mylist &quot;world&quot;<br>(integer) 2<br>127.0.0.1:6379&gt; LINSERT mylist before &quot;world&quot; &quot;beautiful&quot;<br>(integer) 3<br>127.0.0.1:6379&gt; lrange mylist 0 -1<br>1) &quot;hello&quot;<br>2) &quot;beautiful&quot;<br>3) &quot;world&quot;<br>127.0.0.1:6379&gt; LINSERT mylist after &quot;world&quot; &quot;hahah&quot;<br>(integer) 4<br>127.0.0.1:6379&gt; lrange mylist 0 -1<br>1) &quot;hello&quot;<br>2) &quot;beautiful&quot;<br>3) &quot;world&quot;<br></code></pre></td></tr></table></figure><blockquote><p>å°ç»“</p></blockquote><ul><li>ä»–å®é™…ä¸Šæ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œbefore Node after ï¼Œ leftï¼Œright éƒ½å¯ä»¥æ’å…¥å€¼</li><li>å¦‚æœkey ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°çš„é“¾è¡¨</li><li>å¦‚æœkeyå­˜åœ¨ï¼Œæ–°å¢å†…å®¹</li><li>å¦‚æœç§»é™¤äº†æ‰€æœ‰å€¼ï¼Œç©ºé“¾è¡¨ï¼Œä¹Ÿä»£è¡¨ä¸å­˜åœ¨ï¼</li><li>åœ¨ä¸¤è¾¹æ’å…¥æˆ–è€…æ”¹åŠ¨å€¼ï¼Œæ•ˆç‡æœ€é«˜ï¼ ä¸­é—´å…ƒç´ ï¼Œç›¸å¯¹æ¥è¯´æ•ˆç‡ä¼šä½ä¸€ç‚¹~</li></ul><h3 id="Setï¼ˆé›†åˆï¼‰"><a href="#Setï¼ˆé›†åˆï¼‰" class="headerlink" title="Setï¼ˆé›†åˆï¼‰"></a>Setï¼ˆé›†åˆï¼‰</h3><blockquote><p>Redisçš„Setæ˜¯<strong>stringç±»å‹</strong>çš„æ— åºé›†åˆã€‚é›†åˆæˆå‘˜æ˜¯å”¯ä¸€çš„ï¼Œè¿™å°±æ„å‘³ç€é›†åˆä¸­ä¸èƒ½å‡ºç°é‡å¤çš„æ•°æ®ã€‚</p><p>Redis ä¸­ é›†åˆæ˜¯é€šè¿‡å“ˆå¸Œè¡¨å®ç°çš„ï¼Œæ‰€ä»¥æ·»åŠ ï¼Œåˆ é™¤ï¼ŒæŸ¥æ‰¾çš„å¤æ‚åº¦éƒ½æ˜¯O(1)ã€‚</p><p>é›†åˆä¸­æœ€å¤§çš„æˆå‘˜æ•°ä¸º 232 - 1 (4294967295, æ¯ä¸ªé›†åˆå¯å­˜å‚¨40å¤šäº¿ä¸ªæˆå‘˜)ã€‚</p></blockquote><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>SADD key member1[member2..]</code></td><td>å‘é›†åˆä¸­æ— åºå¢åŠ ä¸€ä¸ª/å¤šä¸ªæˆå‘˜</td></tr><tr><td><code>SCARD key</code></td><td>è·å–é›†åˆçš„æˆå‘˜æ•°</td></tr><tr><td><code>SMEMBERS key</code></td><td>è¿”å›é›†åˆä¸­æ‰€æœ‰çš„æˆå‘˜</td></tr><tr><td><code>SISMEMBER key member</code></td><td>æŸ¥è¯¢memberå…ƒç´ æ˜¯å¦æ˜¯é›†åˆçš„æˆå‘˜,ç»“æœæ˜¯æ— åºçš„</td></tr><tr><td><code>SRANDMEMBER key [count]</code></td><td>éšæœºè¿”å›é›†åˆä¸­countä¸ªæˆå‘˜ï¼Œcountç¼ºçœå€¼ä¸º1</td></tr><tr><td><code>SPOP key [count]</code></td><td>éšæœºç§»é™¤å¹¶è¿”å›é›†åˆä¸­countä¸ªæˆå‘˜ï¼Œcountç¼ºçœå€¼ä¸º1</td></tr><tr><td><code>SMOVE source destination member</code></td><td>å°†sourceé›†åˆçš„æˆå‘˜memberç§»åŠ¨åˆ°destinationé›†åˆ</td></tr><tr><td><code>SREM key member1[member2..]</code></td><td>ç§»é™¤é›†åˆä¸­ä¸€ä¸ª/å¤šä¸ªæˆå‘˜</td></tr><tr><td><code>SDIFF key1[key2..]</code></td><td>è¿”å›æ‰€æœ‰é›†åˆçš„å·®é›† key1- key2 - â€¦</td></tr><tr><td><code>SDIFFSTORE destination key1[key2..]</code></td><td>åœ¨SDIFFçš„åŸºç¡€ä¸Šï¼Œå°†ç»“æœä¿å­˜åˆ°é›†åˆä¸­==(è¦†ç›–)==ã€‚ä¸èƒ½ä¿å­˜åˆ°å…¶ä»–ç±»å‹keyå™¢ï¼</td></tr><tr><td><code>SINTER key1 [key2..]</code></td><td>è¿”å›æ‰€æœ‰é›†åˆçš„äº¤é›†</td></tr><tr><td><code>SINTERSTORE destination key1[key2..]</code></td><td>åœ¨SINTERçš„åŸºç¡€ä¸Šï¼Œå­˜å‚¨ç»“æœåˆ°é›†åˆä¸­ã€‚è¦†ç›–</td></tr><tr><td><code>SUNION key1 [key2..]</code></td><td>è¿”å›æ‰€æœ‰é›†åˆçš„å¹¶é›†</td></tr><tr><td><code>SUNIONSTORE destination key1 [key2..]</code></td><td>åœ¨SUNIONçš„åŸºç¡€ä¸Šï¼Œå­˜å‚¨ç»“æœåˆ°åŠå’Œå¼ ã€‚è¦†ç›–</td></tr><tr><td><code>SSCAN KEY [MATCH pattern] [COUNT count]</code></td><td>åœ¨å¤§é‡æ•°æ®ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨æ­¤å‘½ä»¤éå†é›†åˆä¸­å…ƒç´ ï¼Œæ¯æ¬¡éå†éƒ¨åˆ†</td></tr></tbody></table><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs shell">---------------SADD--SCARD--SMEMBERS--SISMEMBER--------------------<br>127.0.0.1:6379&gt; sadd myset &quot;hello&quot;      # å‘myseté›†åˆä¸­æ·»åŠ å…ƒç´ <br>(integer) 1<br>127.0.0.1:6379&gt; sadd myset &quot;qiaowei&quot;<br>(integer) 1<br>127.0.0.1:6379&gt; sadd myset &quot;girl&quot;<br>(integer) 1<br>127.0.0.1:6379&gt; SMEMBERS myset          # æŸ¥çœ‹myseté›†åˆæ‰€æœ‰å…ƒç´ <br>1) &quot;girl&quot;<br>2) &quot;hello&quot;<br>3) &quot;qiaowei&quot;<br>127.0.0.1:6379&gt; SISMEMBER myset girl    # åˆ¤æ–­æŸä¸ªå€¼æ˜¯å¦åœ¨é›†åˆå†…<br>(integer) 1<br>127.0.0.1:6379&gt; SISMEMBER myset haah<br>(integer) 0<br>-------------------------------SCARD--------------------------------<br>127.0.0.1:6379&gt; SMEMBERS myset<br>1) &quot;girl&quot;<br>2) &quot;qiaowei&quot;<br>127.0.0.1:6379&gt; scard myset             # è·å–myseté›†åˆçš„å…ƒç´ ä¸ªæ•°<br>(integer) 2<br>-------------------------------SREM--------------------------------<br>127.0.0.1:6379&gt; SREM myset hello        # ç§»é™¤é›†åˆä¸­æŒ‡å®šå…ƒç´ hello<br>(integer) 1<br>127.0.0.1:6379&gt; scard myset<br>(integer) 2<br>127.0.0.1:6379&gt; SMEMBERS myset          <br>1) &quot;girl&quot;<br>2) &quot;qiaowei&quot;<br>-------------------------------SPOP---------------------------------<br>127.0.0.1:6379&gt; spop myset              # éšå³åˆ é™¤seté›†åˆä¸­çš„å…ƒç´ <br>&quot;girl&quot;<br>127.0.0.1:6379&gt; SMEMBERS myset<br>1) &quot;atrox&quot;<br>2) &quot;qiaowei&quot;<br>127.0.0.1:6379&gt; SPOP myset 2            # éšæœºç§»é™¤å¹¶è¿”å›2ä¸ªå…ƒç´ <br>1) &quot;m1&quot;<br>2) &quot;m4&quot;<br>------------------------------SRANDMEMBER---------------------------<br>127.0.0.1:6379&gt; SRANDMEMBER myset <br>&quot;qiaowei&quot;<br>127.0.0.1:6379&gt; SRANDMEMBER myset<br>&quot;girl&quot;<br>127.0.0.1:6379&gt; SRANDMEMBER myset 2     # éšæœºæŠ½å–æŒ‡å®šä¸ªæ•°å…ƒç´ <br>1) &quot;girl&quot;<br>2) &quot;qiaowei&quot;<br>-------------------------------SMOVE---------------------------------<br>127.0.0.1:6379&gt; sadd myset &quot;hello&quot;<br>(integer) 1<br>127.0.0.1:6379&gt; sadd myset &quot;world&quot;<br>(integer) 1<br>127.0.0.1:6379&gt; sadd myset &quot;kuangshen&quot;<br>(integer) 1<br>127.0.0.1:6379&gt; sadd myset2 &quot;set2&quot;<br>(integer) 1<br>127.0.0.1:6379&gt; smove myset myset2 &quot;kuangshen&quot; #å°†ä¸€ä¸ªæŒ‡å®šçš„å€¼ï¼Œç§»åŠ¨åˆ°å¦å¤–ä¸€ä¸ªseté›†åˆï¼<br>(integer) 1<br>127.0.0.1:6379&gt; SMEMBERS myset<br>1) &quot;world&quot;<br>2) &quot;hello&quot;<br>127.0.0.1:6379&gt; SMEMBERS myset2<br>1) &quot;kuangshen&quot;<br>2) &quot;set2&quot;<br>-----------------------------é›†åˆæ“ä½œ-----------------------------------<br>127.0.0.1:6379&gt; sadd set1 a<br>(integer) 1<br>127.0.0.1:6379&gt; sadd set1 b<br>(integer) 1<br>127.0.0.1:6379&gt; sadd set1 c<br>(integer) 1<br>127.0.0.1:6379&gt; sadd set2 c<br>(integer) 1<br>127.0.0.1:6379&gt; sadd set2 d<br>(integer) 1<br>127.0.0.1:6379&gt; sadd set2 e<br>(integer) 1<br>127.0.0.1:6379&gt; SDIFF set1 set2        # å·®é›†<br>1) &quot;b&quot;<br>2) &quot;a&quot;<br>127.0.0.1:6379&gt; SINTER set1 set2       # äº¤é›†<br>1) &quot;c&quot;<br>127.0.0.1:6379&gt; sunion set1 set2       # å¹¶é›†<br>1) &quot;b&quot;<br>2) &quot;a&quot;<br>3) &quot;c&quot;<br>4) &quot;e&quot;<br>5) &quot;d&quot;<br></code></pre></td></tr></table></figure><p>å¾®åšï¼ŒAç”¨æˆ·å°†æ‰€æœ‰å…³æ³¨çš„äººæ”¾åœ¨ä¸€ä¸ªseté›†åˆä¸­ï¼å°†å®ƒçš„ç²‰ä¸ä¹Ÿæ”¾åœ¨ä¸€ä¸ªé›†åˆä¸­ï¼å…±åŒå…³æ³¨ï¼Œå…±åŒçˆ±å¥½ï¼ŒäºŒåº¦å¥½å‹ï¼Œæ¨èå¥½å‹ï¼ï¼ˆå…­åº¦åˆ†å‰²ç†è®ºï¼‰ã€‚</p><h3 id="Hashï¼ˆå“ˆå¸Œï¼‰"><a href="#Hashï¼ˆå“ˆå¸Œï¼‰" class="headerlink" title="Hashï¼ˆå“ˆå¸Œï¼‰"></a>Hashï¼ˆå“ˆå¸Œï¼‰</h3><blockquote><p>Redis hash æ˜¯ä¸€ä¸ªstringç±»å‹çš„fieldå’Œvalueçš„æ˜ å°„è¡¨ï¼Œhashç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡ã€‚</p><p>Setå°±æ˜¯ä¸€ç§ç®€åŒ–çš„Hash,åªå˜åŠ¨key,è€Œvalueä½¿ç”¨é»˜è®¤å€¼å¡«å……ã€‚å¯ä»¥å°†ä¸€ä¸ªHashè¡¨ä½œä¸ºä¸€ä¸ªå¯¹è±¡è¿›è¡Œå­˜å‚¨ï¼Œè¡¨ä¸­å­˜æ”¾å¯¹è±¡çš„ä¿¡æ¯ã€‚</p></blockquote><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>HSET key field value</code></td><td>å°†å“ˆå¸Œè¡¨ key ä¸­çš„å­—æ®µ field çš„å€¼è®¾ä¸º value ã€‚é‡å¤è®¾ç½®åŒä¸€ä¸ªfieldä¼šè¦†ç›–,è¿”å›0</td></tr><tr><td><code>HMSET key field1 value1 [field2 value2..]</code></td><td>åŒæ—¶å°†å¤šä¸ª field-value (åŸŸ-å€¼)å¯¹è®¾ç½®åˆ°å“ˆå¸Œè¡¨ key ä¸­ã€‚</td></tr><tr><td><code>HSETNX key field value</code></td><td>åªæœ‰åœ¨å­—æ®µ field ä¸å­˜åœ¨æ—¶ï¼Œè®¾ç½®å“ˆå¸Œè¡¨å­—æ®µçš„å€¼ã€‚</td></tr><tr><td><code>HEXISTS key field</code></td><td>æŸ¥çœ‹å“ˆå¸Œè¡¨ key ä¸­ï¼ŒæŒ‡å®šçš„å­—æ®µæ˜¯å¦å­˜åœ¨ã€‚</td></tr><tr><td><code>HGET key field value</code></td><td>è·å–å­˜å‚¨åœ¨å“ˆå¸Œè¡¨ä¸­æŒ‡å®šå­—æ®µçš„å€¼</td></tr><tr><td><code>HMGET key field1 [field2..]</code></td><td>è·å–æ‰€æœ‰ç»™å®šå­—æ®µçš„å€¼</td></tr><tr><td><code>HGETALL key</code></td><td>è·å–åœ¨å“ˆå¸Œè¡¨key çš„æ‰€æœ‰å­—æ®µå’Œå€¼</td></tr><tr><td><code>HKEYS key</code></td><td>è·å–å“ˆå¸Œè¡¨keyä¸­æ‰€æœ‰çš„å­—æ®µ</td></tr><tr><td><code>HLEN key</code></td><td>è·å–å“ˆå¸Œè¡¨ä¸­å­—æ®µçš„æ•°é‡</td></tr><tr><td><code>HVALS key</code></td><td>è·å–å“ˆå¸Œè¡¨ä¸­æ‰€æœ‰å€¼</td></tr><tr><td><code>HDEL key field1 [field2..]</code></td><td>åˆ é™¤å“ˆå¸Œè¡¨keyä¸­ä¸€ä¸ª/å¤šä¸ªfieldå­—æ®µ</td></tr><tr><td><code>HINCRBY key field n</code></td><td>ä¸ºå“ˆå¸Œè¡¨ key ä¸­çš„æŒ‡å®šå­—æ®µçš„æ•´æ•°å€¼åŠ ä¸Šå¢é‡nï¼Œå¹¶è¿”å›å¢é‡åç»“æœ ä¸€æ ·åªé€‚ç”¨äºæ•´æ•°å‹å­—æ®µ</td></tr><tr><td><code>HINCRBYFLOAT key field n</code></td><td>ä¸ºå“ˆå¸Œè¡¨ key ä¸­çš„æŒ‡å®šå­—æ®µçš„æµ®ç‚¹æ•°å€¼åŠ ä¸Šå¢é‡ nã€‚</td></tr><tr><td><code>HSCAN key cursor [MATCH pattern] [COUNT count]</code></td><td>è¿­ä»£å“ˆå¸Œè¡¨ä¸­çš„é”®å€¼å¯¹</td></tr></tbody></table><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">#################################################################</span></span><br>127.0.0.1:6379&gt; hset myhash field1 qiaowei         # è®¾ç½®ä¸€ä¸ªå…·ä½“çš„key-value<br>(integer) 1<br>127.0.0.1:6379&gt; hget myhash field1        # è·å–ä¸€ä¸ªå­—æ®µå€¼<br>&quot;qiaowei&quot;<br>127.0.0.1:6379&gt; hmset myhash field1 hello field2 world   # è®¾ç½®å¤šä¸ªkey-value<br>OK<br>127.0.0.1:6379&gt; hmget myhash field1 field2     # è·å–å¤šä¸ªå­—æ®µå€¼<br>1) &quot;hello&quot;<br>2) &quot;world&quot;<br>127.0.0.1:6379&gt; HGETALL myhash                 # è·å–å…¨éƒ¨æ•°æ®<br>1) &quot;field1&quot;<br>2) &quot;hello&quot;<br>3) &quot;field2&quot;<br>4) &quot;world&quot;<br>127.0.0.1:6379&gt; hdel myhash field1             # åˆ é™¤hashæŒ‡å®škeyå­—æ®µ<br>(integer) 1<br>127.0.0.1:6379&gt; HGETALL myhash<br>1) &quot;field2&quot;<br>2) &quot;world&quot;<br><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">#################################################################</span></span><br><span class="hljs-meta">#</span><span class="bash"> hlen</span><br>127.0.0.1:6379&gt; HGETALL myhash<br>1) &quot;field1&quot;<br>2) &quot;hello&quot;<br>3) &quot;field2&quot;<br>4) &quot;world <br>127.0.0.1:6379&gt; hlen myhash                     # è·å–hashè¡¨çš„å­—æ®µæ•°é‡ <br>(integer) 2<br>2) &quot;world&quot;<br><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">#################################################################</span></span><br>127.0.0.1:6379&gt; HEXISTS myhash field1           # åˆ¤æ–­hashä¸­æŒ‡å®šå­—æ®µæ˜¯å¦å­˜åœ¨<br>(integer) 1<br>127.0.0.1:6379&gt; HEXISTS myhash field3<br>(integer) 0<br><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">#################################################################</span></span><br><span class="hljs-meta">#</span><span class="bash"> åªè·å¾—æ‰€æœ‰field</span><br><span class="hljs-meta">#</span><span class="bash"> åªè·å¾—æ‰€æœ‰value</span><br>127.0.0.1:6379&gt; hkeys myhash    # åªè·å¾—æ‰€æœ‰field<br>1) &quot;field1&quot;<br>2) &quot;field2&quot;<br>127.0.0.1:6379&gt; hvals myhash    # åªè·å¾—æ‰€æœ‰value<br>1) &quot;hello&quot;<br>2) &quot;world&quot;<br><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">#################################################################</span></span><br>incr decr<br>127.0.0.1:6379&gt; hset myhash field3 5 #æŒ‡å®šå¢é‡ï¼<br>(integer) 1<br>127.0.0.1:6379&gt; HINCRBY myhash field3 1<br>(integer) 6<br>127.0.0.1:6379&gt; HINCRBY myhash field3 -1<br>(integer) 5<br>127.0.0.1:6379&gt; hsetnx myhash field4 hello # å¦‚æœä¸å­˜åœ¨åˆ™å¯ä»¥è®¾ç½®<br>(integer) 1<br>127.0.0.1:6379&gt; hsetnx myhash field4 world # å¦‚æœå­˜åœ¨åˆ™ä¸èƒ½è®¾ç½®<br>(integer) 0<br></code></pre></td></tr></table></figure><p>hashå˜æ›´çš„æ•°æ® user name age,å°¤å…¶æ˜¯æ˜¯ç”¨æˆ·ä¿¡æ¯ä¹‹ç±»çš„ï¼Œç»å¸¸å˜åŠ¨çš„ä¿¡æ¯ï¼ hash æ›´é€‚åˆäºå¯¹è±¡çš„å­˜å‚¨ï¼ŒStringæ›´åŠ é€‚åˆå­—ç¬¦ä¸²å­˜å‚¨ï¼</p><h3 id="Zsetï¼ˆæœ‰åºé›†åˆï¼‰"><a href="#Zsetï¼ˆæœ‰åºé›†åˆï¼‰" class="headerlink" title="Zsetï¼ˆæœ‰åºé›†åˆï¼‰"></a>Zsetï¼ˆæœ‰åºé›†åˆï¼‰</h3><blockquote><p>ä¸åŒçš„æ˜¯æ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ªdoubleç±»å‹çš„åˆ†æ•°ï¼ˆscoreï¼‰ã€‚redisæ­£æ˜¯é€šè¿‡åˆ†æ•°æ¥ä¸ºé›†åˆä¸­çš„æˆå‘˜è¿›è¡Œä»å°åˆ°å¤§çš„æ’åºã€‚</p><p>scoreç›¸åŒï¼šæŒ‰å­—å…¸é¡ºåºæ’åº</p><p>æœ‰åºé›†åˆçš„æˆå‘˜æ˜¯å”¯ä¸€çš„,ä½†åˆ†æ•°(score)å´å¯ä»¥é‡å¤</p></blockquote><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>ZADD key score member1 [score2 member2]</code></td><td>å‘æœ‰åºé›†åˆæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ï¼Œæˆ–è€…æ›´æ–°å·²å­˜åœ¨æˆå‘˜çš„åˆ†æ•°</td></tr><tr><td><code>ZCARD key</code></td><td>è·å–æœ‰åºé›†åˆçš„æˆå‘˜æ•°</td></tr><tr><td><code>ZCOUNT key min max</code></td><td>è®¡ç®—åœ¨æœ‰åºé›†åˆä¸­æŒ‡å®šåŒºé—´scoreçš„æˆå‘˜æ•°</td></tr><tr><td><code>ZINCRBY key n member</code></td><td>æœ‰åºé›†åˆä¸­å¯¹æŒ‡å®šæˆå‘˜çš„åˆ†æ•°åŠ ä¸Šå¢é‡ n</td></tr><tr><td><code>ZSCORE key member</code></td><td>è¿”å›æœ‰åºé›†ä¸­ï¼Œæˆå‘˜çš„åˆ†æ•°å€¼</td></tr><tr><td><code>ZRANK key member</code></td><td>è¿”å›æœ‰åºé›†åˆä¸­æŒ‡å®šæˆå‘˜çš„ç´¢å¼•</td></tr><tr><td><code>ZRANGE key start end</code></td><td>é€šè¿‡ç´¢å¼•åŒºé—´è¿”å›æœ‰åºé›†åˆæˆæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜</td></tr><tr><td><code>ZRANGEBYLEX key min max</code></td><td>é€šè¿‡å­—å…¸åŒºé—´è¿”å›æœ‰åºé›†åˆçš„æˆå‘˜</td></tr><tr><td><code>ZRANGEBYSCORE key min max</code></td><td>é€šè¿‡åˆ†æ•°è¿”å›æœ‰åºé›†åˆæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜==-inf å’Œ +infåˆ†åˆ«è¡¨ç¤ºæœ€å°æœ€å¤§å€¼ï¼Œåªæ”¯æŒå¼€åŒºé—´()==</td></tr><tr><td><code>ZLEXCOUNT key min max</code></td><td>åœ¨æœ‰åºé›†åˆä¸­è®¡ç®—æŒ‡å®šå­—å…¸åŒºé—´å†…æˆå‘˜æ•°é‡</td></tr><tr><td><code>ZREM key member1 [member2..]</code></td><td>ç§»é™¤æœ‰åºé›†åˆä¸­ä¸€ä¸ª/å¤šä¸ªæˆå‘˜</td></tr><tr><td><code>ZREMRANGEBYLEX key min max</code></td><td>ç§»é™¤æœ‰åºé›†åˆä¸­ç»™å®šçš„å­—å…¸åŒºé—´çš„æ‰€æœ‰æˆå‘˜</td></tr><tr><td><code>ZREMRANGEBYRANK key start stop</code></td><td>ç§»é™¤æœ‰åºé›†åˆä¸­ç»™å®šçš„æ’ååŒºé—´çš„æ‰€æœ‰æˆå‘˜</td></tr><tr><td><code>ZREMRANGEBYSCORE key min max</code></td><td>ç§»é™¤æœ‰åºé›†åˆä¸­ç»™å®šçš„åˆ†æ•°åŒºé—´çš„æ‰€æœ‰æˆå‘˜</td></tr><tr><td><code>ZREVRANGE key start end</code></td><td>è¿”å›æœ‰åºé›†ä¸­æŒ‡å®šåŒºé—´å†…çš„æˆå‘˜ï¼Œé€šè¿‡ç´¢å¼•ï¼Œåˆ†æ•°ä»é«˜åˆ°åº•</td></tr><tr><td><code>ZREVRANGEBYSCORRE key max min</code></td><td>è¿”å›æœ‰åºé›†ä¸­æŒ‡å®šåˆ†æ•°åŒºé—´å†…çš„æˆå‘˜ï¼Œåˆ†æ•°ä»é«˜åˆ°ä½æ’åº</td></tr><tr><td><code>ZREVRANGEBYLEX key max min</code></td><td>è¿”å›æœ‰åºé›†ä¸­æŒ‡å®šå­—å…¸åŒºé—´å†…çš„æˆå‘˜ï¼ŒæŒ‰å­—å…¸é¡ºåºå€’åº</td></tr><tr><td><code>ZREVRANK key member</code></td><td>è¿”å›æœ‰åºé›†åˆä¸­æŒ‡å®šæˆå‘˜çš„æ’åï¼Œæœ‰åºé›†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å‡(ä»å¤§åˆ°å°)æ’åº</td></tr><tr><td><code>ZINTERSTORE destination numkeys key1 [key2 ..]</code></td><td>è®¡ç®—ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªæœ‰åºé›†çš„äº¤é›†å¹¶å°†ç»“æœé›†å­˜å‚¨åœ¨æ–°çš„æœ‰åºé›†åˆ key ä¸­ï¼Œnumkeysï¼šè¡¨ç¤ºå‚ä¸è¿ç®—çš„é›†åˆæ•°ï¼Œå°†scoreç›¸åŠ ä½œä¸ºç»“æœçš„score</td></tr><tr><td><code>ZUNIONSTORE destination numkeys key1 [key2..]</code></td><td>è®¡ç®—ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªæœ‰åºé›†çš„äº¤é›†å¹¶å°†ç»“æœé›†å­˜å‚¨åœ¨æ–°çš„æœ‰åºé›†åˆ key ä¸­</td></tr><tr><td><code>ZSCAN key cursor [MATCH pattern\] [COUNT count]</code></td><td>è¿­ä»£æœ‰åºé›†åˆä¸­çš„å…ƒç´ ï¼ˆåŒ…æ‹¬å…ƒç´ æˆå‘˜å’Œå…ƒç´ åˆ†å€¼ï¼‰</td></tr></tbody></table><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><code class="hljs shell">-------------------ZADD--ZCARD--ZCOUNT--------------<br>127.0.0.1:6379&gt; ZADD myzset 1 m1 2 m2 3 m3 # å‘æœ‰åºé›†åˆmyzsetä¸­æ·»åŠ æˆå‘˜m1 score=1 ä»¥åŠæˆå‘˜m2 score=2..<br>(integer) 2<br>127.0.0.1:6379&gt; ZCARD myzset # è·å–æœ‰åºé›†åˆçš„æˆå‘˜æ•°<br>(integer) 2<br>127.0.0.1:6379&gt; ZCOUNT myzset 0 1 # è·å–scoreåœ¨ [0,1]åŒºé—´çš„æˆå‘˜æ•°é‡<br>(integer) 1<br>127.0.0.1:6379&gt; ZCOUNT myzset 0 2<br>(integer) 2<br><br>----------------ZINCRBY--ZSCORE--------------------------<br>127.0.0.1:6379&gt; ZINCRBY myzset 5 m2 # å°†æˆå‘˜m2çš„score +5<br>&quot;7&quot;<br>127.0.0.1:6379&gt; ZSCORE myzset m1 # è·å–æˆå‘˜m1çš„score<br>&quot;1&quot;<br>127.0.0.1:6379&gt; ZSCORE myzset m2<br>&quot;7&quot;<br><br>--------------ZRANK--ZRANGE-----------------------------------<br>127.0.0.1:6379&gt; ZRANK myzset m1 # è·å–æˆå‘˜m1çš„ç´¢å¼•ï¼Œç´¢å¼•æŒ‰ç…§scoreæ’åºï¼Œscoreç›¸åŒç´¢å¼•å€¼æŒ‰å­—å…¸é¡ºåºé¡ºåºå¢åŠ <br>(integer) 0<br>127.0.0.1:6379&gt; ZRANK myzset m2<br>(integer) 2<br>127.0.0.1:6379&gt; ZRANGE myzset 0 1 # è·å–ç´¢å¼•åœ¨ 0~1çš„æˆå‘˜<br>1) &quot;m1&quot;<br>2) &quot;m3&quot;<br>127.0.0.1:6379&gt; ZRANGE myzset 0 -1 # è·å–å…¨éƒ¨æˆå‘˜<br>1) &quot;m1&quot;<br>2) &quot;m3&quot;<br>3) &quot;m2&quot;<br><br><span class="hljs-meta">#</span><span class="bash">testset=&gt;&#123;abc,add,amaze,apple,back,java,redis&#125; scoreå‡ä¸º0</span><br>------------------ZRANGEBYLEX---------------------------------<br>127.0.0.1:6379&gt; ZRANGEBYLEX testset - + # è¿”å›æ‰€æœ‰æˆå‘˜<br>1) &quot;abc&quot;<br>2) &quot;add&quot;<br>3) &quot;amaze&quot;<br>4) &quot;apple&quot;<br>5) &quot;back&quot;<br>6) &quot;java&quot;<br>7) &quot;redis&quot;<br>127.0.0.1:6379&gt; ZRANGEBYLEX testset - + LIMIT 0 3 # åˆ†é¡µ æŒ‰ç´¢å¼•æ˜¾ç¤ºæŸ¥è¯¢ç»“æœçš„ 0,1,2æ¡è®°å½•<br>1) &quot;abc&quot;<br>2) &quot;add&quot;<br>3) &quot;amaze&quot;<br>127.0.0.1:6379&gt; ZRANGEBYLEX testset - + LIMIT 3 3 # æ˜¾ç¤º 3,4,5æ¡è®°å½•<br>1) &quot;apple&quot;<br>2) &quot;back&quot;<br>3) &quot;java&quot;<br>127.0.0.1:6379&gt; ZRANGEBYLEX testset (- [apple # æ˜¾ç¤º (-,apple] åŒºé—´å†…çš„æˆå‘˜<br>1) &quot;abc&quot;<br>2) &quot;add&quot;<br>3) &quot;amaze&quot;<br>4) &quot;apple&quot;<br>127.0.0.1:6379&gt; ZRANGEBYLEX testset [apple [java # æ˜¾ç¤º [apple,java]å­—å…¸åŒºé—´çš„æˆå‘˜<br>1) &quot;apple&quot;<br>2) &quot;back&quot;<br>3) &quot;java&quot;<br><br>-----------------------ZRANGEBYSCORE---------------------<br>127.0.0.1:6379&gt; ZRANGEBYSCORE myzset 1 10 # è¿”å›scoreåœ¨ [1,10]ä¹‹é—´çš„çš„æˆå‘˜<br>1) &quot;m1&quot;<br>2) &quot;m3&quot;<br>3) &quot;m2&quot;<br>127.0.0.1:6379&gt; ZRANGEBYSCORE myzset 1 5<br>1) &quot;m1&quot;<br>2) &quot;m3&quot;<br><br>--------------------ZLEXCOUNT-----------------------------<br>127.0.0.1:6379&gt; ZLEXCOUNT testset - +<br>(integer) 7<br>127.0.0.1:6379&gt; ZLEXCOUNT testset [apple [java<br>(integer) 3<br><br>------------------ZREM--ZREMRANGEBYLEX--ZREMRANGBYRANK--ZREMRANGEBYSCORE--------------------------------<br>127.0.0.1:6379&gt; ZREM testset abc # ç§»é™¤æˆå‘˜abc<br>(integer) 1<br>127.0.0.1:6379&gt; ZREMRANGEBYLEX testset [apple [java # ç§»é™¤å­—å…¸åŒºé—´[apple,java]ä¸­çš„æ‰€æœ‰æˆå‘˜<br>(integer) 3<br>127.0.0.1:6379&gt; ZREMRANGEBYRANK testset 0 1 # ç§»é™¤æ’å0~1çš„æ‰€æœ‰æˆå‘˜<br>(integer) 2<br>127.0.0.1:6379&gt; ZREMRANGEBYSCORE myzset 0 3 # ç§»é™¤scoreåœ¨ [0,3]çš„æˆå‘˜<br>(integer) 2<br><br><br><span class="hljs-meta">#</span><span class="bash"> testset=&gt; &#123;abc,add,apple,amaze,back,java,redis&#125; scoreå‡ä¸º0</span><br><span class="hljs-meta">#</span><span class="bash"> myzset=&gt; &#123;(m1,1),(m2,2),(m3,3),(m4,4),(m7,7),(m9,9)&#125;</span><br>----------------ZREVRANGE--ZREVRANGEBYSCORE--ZREVRANGEBYLEX-----------<br>127.0.0.1:6379&gt; ZREVRANGE myzset 0 3 # æŒ‰scoreé€’å‡æ’åºï¼Œç„¶åæŒ‰ç´¢å¼•ï¼Œè¿”å›ç»“æœçš„ 0~3<br>1) &quot;m9&quot;<br>2) &quot;m7&quot;<br>3) &quot;m4&quot;<br>4) &quot;m3&quot;<br>127.0.0.1:6379&gt; ZREVRANGE myzset 2 4 # è¿”å›æ’åºç»“æœçš„ ç´¢å¼•çš„2~4<br>1) &quot;m4&quot;<br>2) &quot;m3&quot;<br>3) &quot;m2&quot;<br>127.0.0.1:6379&gt; ZREVRANGEBYSCORE myzset 6 2 # æŒ‰scoreé€’å‡é¡ºåº è¿”å›é›†åˆä¸­åˆ†æ•°åœ¨[2,6]ä¹‹é—´çš„æˆå‘˜<br>1) &quot;m4&quot;<br>2) &quot;m3&quot;<br>3) &quot;m2&quot;<br>127.0.0.1:6379&gt; ZREVRANGEBYLEX testset [java (add # æŒ‰å­—å…¸å€’åº è¿”å›é›†åˆä¸­(add,java]å­—å…¸åŒºé—´çš„æˆå‘˜<br>1) &quot;java&quot;<br>2) &quot;back&quot;<br>3) &quot;apple&quot;<br>4) &quot;amaze&quot;<br><br>-------------------------ZREVRANK------------------------------<br>127.0.0.1:6379&gt; ZREVRANK myzset m7 # æŒ‰scoreé€’å‡é¡ºåºï¼Œè¿”å›æˆå‘˜m7ç´¢å¼•<br>(integer) 1<br>127.0.0.1:6379&gt; ZREVRANK myzset m2<br>(integer) 4<br><br><br><span class="hljs-meta">#</span><span class="bash"> mathscore=&gt;&#123;(xm,90),(xh,95),(xg,87)&#125; å°æ˜ã€å°çº¢ã€å°åˆšçš„æ•°å­¦æˆç»©</span><br><span class="hljs-meta">#</span><span class="bash"> enscore=&gt;&#123;(xm,70),(xh,93),(xg,90)&#125; å°æ˜ã€å°çº¢ã€å°åˆšçš„è‹±è¯­æˆç»©</span><br>-------------------ZINTERSTORE--ZUNIONSTORE-----------------------------------<br>127.0.0.1:6379&gt; ZINTERSTORE sumscore 2 mathscore enscore # å°†mathscore enscoreè¿›è¡Œåˆå¹¶ ç»“æœå­˜æ”¾åˆ°sumscore<br>(integer) 3<br>127.0.0.1:6379&gt; ZRANGE sumscore 0 -1 withscores # åˆå¹¶åçš„scoreæ˜¯ä¹‹å‰é›†åˆä¸­æ‰€æœ‰scoreçš„å’Œ<br>1) &quot;xm&quot;<br>2) &quot;160&quot;<br>3) &quot;xg&quot;<br>4) &quot;177&quot;<br>5) &quot;xh&quot;<br>6) &quot;188&quot;<br><br>127.0.0.1:6379&gt; ZUNIONSTORE lowestscore 2 mathscore enscore AGGREGATE MIN # å–ä¸¤ä¸ªé›†åˆçš„æˆå‘˜scoreæœ€å°å€¼ä½œä¸ºç»“æœçš„<br>(integer) 3<br>127.0.0.1:6379&gt; ZRANGE lowestscore 0 -1 withscores<br>1) &quot;xm&quot;<br>2) &quot;70&quot;<br>3) &quot;xg&quot;<br>4) &quot;87&quot;<br>5) &quot;xh&quot;<br>6) &quot;93&quot;<br></code></pre></td></tr></table></figure><p>åº”ç”¨æ¡ˆä¾‹ï¼š</p><ul><li>setæ’åº å­˜å‚¨ç­çº§æˆç»©è¡¨ å·¥èµ„è¡¨æ’åºï¼</li><li>æ™®é€šæ¶ˆæ¯ï¼Œ1.é‡è¦æ¶ˆæ¯ 2.å¸¦æƒé‡è¿›è¡Œåˆ¤æ–­</li><li>æ’è¡Œæ¦œåº”ç”¨å®ç°ï¼Œå–Top Næµ‹è¯•</li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Redisç¬”è®°05-RedisKeyåŸºæœ¬å‘½ä»¤</title>
    <link href="/posts/2021/01/19/Redis%E7%AC%94%E8%AE%B005-RedisKey%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/"/>
    <url>/posts/2021/01/19/Redis%E7%AC%94%E8%AE%B005-RedisKey%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<h2 id="RedisKeyåŸºæœ¬å‘½ä»¤"><a href="#RedisKeyåŸºæœ¬å‘½ä»¤" class="headerlink" title="RedisKeyåŸºæœ¬å‘½ä»¤"></a>RedisKeyåŸºæœ¬å‘½ä»¤</h2><p>Redis æ˜¯ä¸€ä¸ªå¼€æºï¼ˆBSDè®¸å¯ï¼‰ï¼Œå†…å­˜å­˜å‚¨çš„æ•°æ®ç»“æ„æœåŠ¡å™¨ï¼Œå¯ç”¨ä½œ<strong>æ•°æ®åº“</strong>ï¼Œ<strong>é«˜é€Ÿç¼“å­˜</strong>å’Œ<strong>æ¶ˆæ¯é˜Ÿåˆ—ä»£ç†</strong>ã€‚å®ƒæ”¯æŒ<b style="color:blue">å­—ç¬¦ä¸²ã€å“ˆå¸Œè¡¨ã€åˆ—è¡¨ã€é›†åˆã€æœ‰åºé›†åˆã€ä¸ºå¾’ã€hyperloglogsç­‰æ•°æ®ç±»å‹</b>ã€‚å†…ç½®äº†å¤åˆ¶ã€Luaè„šæœ¬ã€LRUæ”¶å›ã€äº‹åŠ¡ä»¥åŠä¸åŒçº§åˆ«ç£ç›˜æŒä¹…åŒ–åŠŸèƒ½ï¼ŒåŒæ—¶é€šè¿‡Redis Sentinelæä¾›é«˜å¯ç”¨ï¼Œé€šè¿‡Redis Clusteræä¾›è‡ªåŠ¨åˆ†åŒºã€‚</p><blockquote><p>åœ¨Redisä¸­æ— è®ºä»€ä¹ˆæ•°æ®ç±»å‹ï¼Œåœ¨æ•°æ®åº“ä¸­éƒ½æ˜¯ä»¥key-valueå½¢å¼ä¿å­˜ï¼Œé€šè¿‡è¿›è¡Œå¯¹Redis-keyçš„æ“ä½œï¼Œæ¥å®Œæˆå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ“ä½œã€‚</p></blockquote><p>ä¸‹é¢å­¦ä¹ çš„å‘½ä»¤ï¼š</p><ul><li><code>exists key</code>ï¼šåˆ¤æ–­æŸä¸ªkeyæ˜¯å¦å­˜åœ¨</li><li><code>del key</code>ï¼šåˆ é™¤é”®å€¼å¯¹</li><li><code>move key db</code>ï¼šå°†é”®å€¼å¯¹ç§»åŠ¨åˆ°æŒ‡å®šæ•°æ®åº“</li><li><code>expire key second</code>ï¼šè®¾ç½®é”®å€¼å¯¹çš„è¿‡æœŸæ—¶é—´</li><li><code>type key</code>ï¼šæŸ¥çœ‹valueçš„æ•°æ®ç±»å‹</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; keys * # æŸ¥çœ‹å½“å‰æ•°æ®åº“æ‰€æœ‰key<br>(empty list or set)<br>127.0.0.1:6379&gt; set name qinjiang # set key<br>OK<br>127.0.0.1:6379&gt; set age 20<br>OK<br>127.0.0.1:6379&gt; keys *<br>1) &quot;age&quot;<br>2) &quot;name&quot;<br>127.0.0.1:6379&gt; move age 1 # å°†é”®å€¼å¯¹ç§»åŠ¨åˆ°æŒ‡å®šæ•°æ®åº“<br>(integer) 1<br>127.0.0.1:6379&gt; EXISTS age # åˆ¤æ–­é”®æ˜¯å¦å­˜åœ¨<br>(integer) 0 # ä¸å­˜åœ¨<br>127.0.0.1:6379&gt; EXISTS name<br>(integer) 1 # å­˜åœ¨<br>127.0.0.1:6379&gt; SELECT 1<br>OK<br>127.0.0.1:6379[1]&gt; keys *<br>1) &quot;age&quot;<br>127.0.0.1:6379[1]&gt; del age # åˆ é™¤é”®å€¼å¯¹<br>(integer) 1 # åˆ é™¤ä¸ªæ•°<br><br><br>127.0.0.1:6379&gt; set age 20<br>OK<br>127.0.0.1:6379&gt; EXPIRE age 15 # è®¾ç½®é”®å€¼å¯¹çš„è¿‡æœŸæ—¶é—´<br><br>(integer) 1 # è®¾ç½®æˆåŠŸ å¼€å§‹è®¡æ•°<br>127.0.0.1:6379&gt; ttl age # æŸ¥çœ‹keyçš„è¿‡æœŸå‰©ä½™æ—¶é—´<br>(integer) 13<br>127.0.0.1:6379&gt; ttl age<br>(integer) 11<br>127.0.0.1:6379&gt; ttl age<br>(integer) 9<br>127.0.0.1:6379&gt; ttl age<br>(integer) -2 # -2 è¡¨ç¤ºkeyè¿‡æœŸï¼Œ-1è¡¨ç¤ºkeyæœªè®¾ç½®è¿‡æœŸæ—¶é—´<br><br>127.0.0.1:6379&gt; get age # è¿‡æœŸçš„key ä¼šè¢«è‡ªåŠ¨delete<br>(nil)<br>127.0.0.1:6379&gt; keys *<br>1) &quot;name&quot;<br><br>127.0.0.1:6379&gt; type name # æŸ¥çœ‹valueçš„æ•°æ®ç±»å‹<br>string<br></code></pre></td></tr></table></figure><p>å…³äº<code>TTL</code>å‘½ä»¤ï¼ŒRedisçš„keyï¼Œé€šè¿‡TTLå‘½ä»¤ä¼šè¿”å›keyçš„è¿‡æœŸæ—¶é—´ï¼Œä¸€èˆ¬æœ‰3ç§ï¼š</p><ol><li>å½“å‰keyæ²¡æœ‰è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œæ‰€ä»¥ä¼šè¿”å›-1</li><li>å½“å‰keyæœ‰è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè€Œä¸”keyå·²ç»è¿‡æœŸï¼Œä¼šè¿”å›-2</li><li>å½“å‰keyæœ‰è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè€Œä¸”keyå°šæœªè¿‡æœŸï¼Œä¼šè¿”å›keyçš„æ­£å¸¸å‰©ä½™æ—¶é—´</li></ol><p>å…³äºé‡å‘½å<code>RENAME</code>å’Œ<code>RENAMENX</code></p><ul><li><code>RENAME key newkey</code>ä¿®æ”¹ key çš„åç§°</li><li><code>RENAMENX key newkey</code>ä»…å½“ newkey ä¸å­˜åœ¨æ—¶ï¼Œå°† key æ”¹åä¸º newkey ã€‚</li></ul><p>æ›´å¤šå‘½ä»¤å­¦ä¹ ï¼š<a href="https://www.redis.net.cn/order/">https://www.redis.net.cn/order/</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Redisç¬”è®°04-Redisçš„åŸºæœ¬çŸ¥è¯†</title>
    <link href="/posts/2021/01/19/Redis%E7%AC%94%E8%AE%B004-Redis%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/"/>
    <url>/posts/2021/01/19/Redis%E7%AC%94%E8%AE%B004-Redis%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/</url>
    
    <content type="html"><![CDATA[<h2 id="RedisåŸºç¡€çŸ¥è¯†"><a href="#RedisåŸºç¡€çŸ¥è¯†" class="headerlink" title="RedisåŸºç¡€çŸ¥è¯†"></a>RedisåŸºç¡€çŸ¥è¯†</h2><blockquote><p>redisé»˜è®¤æœ‰16ä¸ªæ•°æ®åº“</p></blockquote><p>é»˜è®¤ä½¿ç”¨çš„æ˜¯ç¬¬0ä¸ª</p><p>16ä¸ªæ•°æ®åº“ä¸ºï¼šDB 0~DB 15ã€‚é»˜è®¤ä½¿ç”¨DB 0 ï¼Œå¯ä»¥ä½¿ç”¨<code>select n</code>åˆ‡æ¢åˆ°DB nï¼Œ<code>dbsize</code>å¯ä»¥æŸ¥çœ‹å½“å‰æ•°æ®åº“çš„å¤§å°ï¼Œä¸keyæ•°é‡ç›¸å…³ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; config get databases # å‘½ä»¤è¡ŒæŸ¥çœ‹æ•°æ®åº“æ•°é‡databases<br>1) &quot;databases&quot;<br>2) &quot;16&quot;<br><br>127.0.0.1:6379&gt; select 8 # åˆ‡æ¢æ•°æ®åº“ DB 8<br>OK<br>127.0.0.1:6379[8]&gt; dbsize # æŸ¥çœ‹æ•°æ®åº“å¤§å°<br>(integer) 0<br><br><span class="hljs-meta">#</span><span class="bash"> ä¸åŒæ•°æ®åº“ä¹‹é—´ æ•°æ®æ˜¯ä¸èƒ½äº’é€šçš„ï¼Œå¹¶ä¸”dbsize æ˜¯æ ¹æ®åº“ä¸­keyçš„ä¸ªæ•°ã€‚</span><br>127.0.0.1:6379&gt; set name qiaowei<br>OK<br>127.0.0.1:6379&gt; SELECT 8<br>OK<br>127.0.0.1:6379[8]&gt; get name # db8ä¸­å¹¶ä¸èƒ½è·å–db0ä¸­çš„é”®å€¼å¯¹ã€‚<br>(nil)<br>127.0.0.1:6379[8]&gt; DBSIZE<br>(integer) 0<br>127.0.0.1:6379[8]&gt; SELECT 0<br>OK<br>127.0.0.1:6379&gt; keys *<br>1) &quot;counter:__rand_int__&quot;<br>2) &quot;mylist&quot;<br>3) &quot;name&quot;<br>4) &quot;key:__rand_int__&quot;<br>5) &quot;myset:__rand_int__&quot;<br>127.0.0.1:6379&gt; DBSIZE # sizeå’Œkeyä¸ªæ•°ç›¸å…³<br>(integer) 5<br></code></pre></td></tr></table></figure><p><code>keys *</code> ï¼šæŸ¥çœ‹å½“å‰æ•°æ®åº“ä¸­æ‰€æœ‰çš„keyã€‚</p><p><code>flushdb</code>ï¼šæ¸…ç©ºå½“å‰æ•°æ®åº“ä¸­çš„é”®å€¼å¯¹ã€‚</p><p><code>flushall</code>ï¼šæ¸…ç©ºæ‰€æœ‰æ•°æ®åº“çš„é”®å€¼å¯¹ã€‚</p><blockquote><p>Redisæ˜¯å•çº¿ç¨‹çš„ï¼ŒRedisæ˜¯åŸºäºå†…å­˜æ“ä½œçš„</p></blockquote><p>æ‰€ä»¥Redisçš„æ€§èƒ½ç“¶é¢ˆä¸æ˜¯CPU,è€Œæ˜¯æœºå™¨å†…å­˜å’Œç½‘ç»œå¸¦å®½ã€‚</p><p>é‚£ä¹ˆä¸ºä»€ä¹ˆRedisçš„é€Ÿåº¦å¦‚æ­¤å¿«å‘¢ï¼Œæ€§èƒ½è¿™ä¹ˆé«˜å‘¢ï¼ŸQPSè¾¾åˆ°10W+</p><blockquote><p>Redisä¸ºä»€ä¹ˆå•çº¿ç¨‹è¿˜è¿™ä¹ˆå¿«ï¼Ÿ</p></blockquote><ul><li>è¯¯åŒº1ï¼šé«˜æ€§èƒ½çš„æœåŠ¡å™¨ä¸€å®šæ˜¯å¤šçº¿ç¨‹çš„ï¼Ÿ</li><li>è¯¯åŒº2ï¼šå¤šçº¿ç¨‹ï¼ˆCPUä¸Šä¸‹æ–‡ä¼šåˆ‡æ¢ï¼ï¼‰ä¸€å®šæ¯”å•çº¿ç¨‹æ•ˆç‡é«˜ï¼</li></ul><p>æ ¸å¿ƒï¼šRedisæ˜¯å°†æ‰€æœ‰çš„æ•°æ®æ”¾åœ¨å†…å­˜ä¸­çš„ï¼Œæ‰€ä»¥è¯´ä½¿ç”¨å•çº¿ç¨‹å»æ“ä½œæ•ˆç‡å°±æ˜¯æœ€é«˜çš„ï¼Œå¤šçº¿ç¨‹ï¼ˆCPUä¸Šä¸‹æ–‡ä¼šåˆ‡æ¢ï¼šè€—æ—¶çš„æ“ä½œï¼ï¼‰ï¼Œå¯¹äºå†…å­˜ç³»ç»Ÿæ¥è¯´ï¼Œå¦‚æœæ²¡æœ‰ä¸Šä¸‹æ–‡åˆ‡æ¢æ•ˆç‡å°±æ˜¯æœ€é«˜çš„ï¼Œå¤šæ¬¡è¯»å†™éƒ½æ˜¯åœ¨ä¸€ä¸ªCPUä¸Šçš„ï¼Œåœ¨å†…å­˜å­˜å‚¨æ•°æ®æƒ…å†µä¸‹ï¼Œå•çº¿ç¨‹å°±æ˜¯æœ€ä½³çš„æ–¹æ¡ˆã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Redisç¬”è®°03-redis-benchmarkæ€§èƒ½æµ‹è¯•</title>
    <link href="/posts/2021/01/18/Redis%E7%AC%94%E8%AE%B003-redis-benchmark%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/"/>
    <url>/posts/2021/01/18/Redis%E7%AC%94%E8%AE%B003-redis-benchmark%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/</url>
    
    <content type="html"><![CDATA[<h2 id="æ€§èƒ½æµ‹è¯•"><a href="#æ€§èƒ½æµ‹è¯•" class="headerlink" title="æ€§èƒ½æµ‹è¯•"></a>æ€§èƒ½æµ‹è¯•</h2><p><strong>redis-benchmark</strong>æ˜¯ä¸€ä¸ªå‹åŠ›æµ‹è¯•å·¥å…·ï¼Œè€Œä¸”æ˜¯å®˜æ–¹è‡ªå¸¦çš„ã€‚</p><p>redis-benchmarkçš„å‘½ä»¤å‚æ•°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B003-redis-benchmark%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/paras.png" alt="å‚æ•°"></p><p>ä¸‹é¢æˆ‘ä»¬æ¥è¿›è¡Œç®€å•æµ‹è¯•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æµ‹è¯•ï¼š100ä¸ªå¹¶å‘è¿æ¥ï¼Œ100000ä¸ªè¯·æ±‚</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B003-redis-benchmark%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/resp.png" alt="æµ‹è¯•ç»“æœ"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linuxç¬”è®°04-å¸¸ç”¨çš„åŸºæœ¬å‘½ä»¤</title>
    <link href="/posts/2021/01/17/Linux%E7%AC%94%E8%AE%B004-%E5%B8%B8%E7%94%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/"/>
    <url>/posts/2021/01/17/Linux%E7%AC%94%E8%AE%B004-%E5%B8%B8%E7%94%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<h2 id="å¸¸ç”¨çš„åŸºæœ¬å‘½ä»¤"><a href="#å¸¸ç”¨çš„åŸºæœ¬å‘½ä»¤" class="headerlink" title="å¸¸ç”¨çš„åŸºæœ¬å‘½ä»¤"></a>å¸¸ç”¨çš„åŸºæœ¬å‘½ä»¤</h2><h3 id="ç›®å½•ç®¡ç†"><a href="#ç›®å½•ç®¡ç†" class="headerlink" title="ç›®å½•ç®¡ç†"></a>ç›®å½•ç®¡ç†</h3><blockquote><p>ç»å¯¹è·¯å¾„ä¸ç›¸å¯¹è·¯å¾„</p></blockquote><p>cdï¼šåˆ‡æ¢ç›®å½•å‘½ä»¤ã€‚</p><p>./ï¼šå½“å‰ç›®å½•</p><p>cd .. è¿”å›ä¸Šä¸€çº§ç›®å½•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@iZ2zeh7ydg2bbydds175q0Z ~]<span class="hljs-comment"># cd /</span><br>[root@iZ2zeh7ydg2bbydds175q0Z /]<span class="hljs-comment"># ls</span><br>bin   dev  home  lib64  mnt  patch  root  sbin  sys  usr  www<br>boot  etc  lib   media  opt  proc   run   srv   tmp  var<br>[root@iZ2zeh7ydg2bbydds175q0Z /]<span class="hljs-comment"># cd home</span><br>[root@iZ2zeh7ydg2bbydds175q0Z home]<span class="hljs-comment"># cd ..</span><br></code></pre></td></tr></table></figure><blockquote><p>lsï¼šåˆ—å‡ºç›®å½•</p></blockquote><p>åœ¨Linuxä¸­ ls å¯èƒ½æ˜¯æœ€ç»å¸¸è¢«ä½¿ç”¨çš„ã€‚</p><p>-aï¼šallï¼ŒæŸ¥çœ‹å…¨éƒ¨çš„æ–‡ä»¶ï¼ŒåŒ…å«éšè—æ–‡ä»¶ã€‚</p><p>-lï¼šåˆ—å‡ºæ‰€æœ‰çš„æ–‡ä»¶ï¼ŒåŒ…å«æ–‡ä»¶çš„å±æ€§å’Œæƒé™ï¼Œæ²¡æœ‰éšè—æ–‡ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@iZ2zeh7ydg2bbydds175q0Z /]<span class="hljs-comment"># ls</span><br>bin   dev  home  lib64  mnt  patch  root  sbin  sys  usr  www<br>boot  etc  lib   media  opt  proc   run   srv   tmp  var<br>[root@iZ2zeh7ydg2bbydds175q0Z /]<span class="hljs-comment"># ls -a</span><br>.             bin   etc   lib64  opt    root  srv  usr<br>..            boot  home  media  patch  run   sys  var<br>.autorelabel  dev   lib   mnt    proc   sbin  tmp  www<br>[root@iZ2zeh7ydg2bbydds175q0Z /]<span class="hljs-comment"># ls -l</span><br>total 24<br>lrwxrwxrwx.   1 root root    7 May 11  2019 bin -&gt; usr/bin<br>dr-xr-xr-x.   5 root root 4096 Feb 18  2020 boot<br>drwxr-xr-x   19 root root 2940 Jan 16 11:10 dev<br>drwxr-xr-x. 100 root root 8192 Jan 16 15:42 etc<br>drwxr-xr-x.   6 root root   60 Jan 16 23:23 home<br>lrwxrwxrwx.   1 root root    7 May 11  2019 lib -&gt; usr/lib<br>lrwxrwxrwx.   1 root root    9 May 11  2019 lib64 -&gt; usr/lib64<br>drwxr-xr-x.   2 root root    6 May 11  2019 media<br>drwxr-xr-x.   2 root root    6 May 11  2019 mnt<br>drwxr-xr-x.   2 root root    6 May 11  2019 opt<br>drwxr-xr-x    2 root root   39 Jan 16 15:32 patch<br>dr-xr-xr-x  128 root root    0 Jan 16 11:10 proc<br>dr-xr-x---.   5 root root  192 Jan 16 15:33 root<br>drwxr-xr-x   32 root root  920 Jan 16 12:02 run<br>lrwxrwxrwx.   1 root root    8 May 11  2019 sbin -&gt; usr/sbin<br>drwxr-xr-x.   2 root root    6 May 11  2019 srv<br>dr-xr-xr-x   13 root root    0 Jan 16 19:10 sys<br>drwxrwxrwt.  11 root root 4096 Jan 17 15:46 tmp<br>drwxr-xr-x.  13 root root  156 Dec 13  2016 usr<br>drwxr-xr-x.  21 root root 4096 Jan 16 15:30 var<br>drwxr-xr-x    6 root root   64 Jan 16 12:02 www<br>[root@iZ2zeh7ydg2bbydds175q0Z /]<span class="hljs-comment"># ls -al</span><br>total 24<br>dr-xr-xr-x.  19 root root  268 Jan 16 15:32 .<br>dr-xr-xr-x.  19 root root  268 Jan 16 15:32 ..<br>-rw-r--r--    1 root root    0 Feb 18  2020 .autorelabel<br>lrwxrwxrwx.   1 root root    7 May 11  2019 bin -&gt; usr/bin<br>dr-xr-xr-x.   5 root root 4096 Feb 18  2020 boot<br>drwxr-xr-x   19 root root 2940 Jan 16 11:10 dev<br>drwxr-xr-x. 100 root root 8192 Jan 16 15:42 etc<br>drwxr-xr-x.   6 root root   60 Jan 16 23:23 home<br>lrwxrwxrwx.   1 root root    7 May 11  2019 lib -&gt; usr/lib<br>lrwxrwxrwx.   1 root root    9 May 11  2019 lib64 -&gt; usr/lib64<br>drwxr-xr-x.   2 root root    6 May 11  2019 media<br>drwxr-xr-x.   2 root root    6 May 11  2019 mnt<br>drwxr-xr-x.   2 root root    6 May 11  2019 opt<br>drwxr-xr-x    2 root root   39 Jan 16 15:32 patch<br>dr-xr-xr-x  128 root root    0 Jan 16 11:10 proc<br>dr-xr-x---.   5 root root  192 Jan 16 15:33 root<br>drwxr-xr-x   32 root root  920 Jan 16 12:02 run<br>lrwxrwxrwx.   1 root root    8 May 11  2019 sbin -&gt; usr/sbin<br>drwxr-xr-x.   2 root root    6 May 11  2019 srv<br>dr-xr-xr-x   13 root root    0 Jan 16 19:10 sys<br>drwxrwxrwt.  11 root root 4096 Jan 17 15:46 tmp<br>drwxr-xr-x.  13 root root  156 Dec 13  2016 usr<br>drwxr-xr-x.  21 root root 4096 Jan 16 15:30 var<br>drwxr-xr-x    6 root root   64 Jan 16 12:02 www<br></code></pre></td></tr></table></figure><blockquote><p>cdï¼šåˆ‡æ¢ç›®å½•</p></blockquote><p>cd ç›®å½•åï¼ˆç»å¯¹è·¯å¾„éƒ½æ˜¯ä»¥/å¼€å¤´çš„ï¼Œç›¸å¯¹è·¯å¾„å¯¹äºå½“å‰ç›®å½•è¯¥å¦‚ä½•å¯»æ‰¾ï¼‰</p><ul><li><p>ä»<code>home</code>ç›®å½•ä»¥ç›¸å¯¹è·¯å¾„è¿›å…¥<code>usr</code>ç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z home]# cd ../usr<br>[root@iZ2zeh7ydg2bbydds175q0Z usr]# <br></code></pre></td></tr></table></figure></li><li><p>åœ¨<code>home</code>ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªç›®å½•<code>AtroxQW</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z /]# cd home<br>[root@iZ2zeh7ydg2bbydds175q0Z home]# mkdir AtroxQW<br>[root@iZ2zeh7ydg2bbydds175q0Z home]# ls<br>AtroxQW  environment  img  redis  www<br></code></pre></td></tr></table></figure></li><li><p>ä»æ ¹ç›®å½•<code>/</code>ä»¥ç»å¯¹è·¯å¾„ï¼Œè·³è½¬åˆ°åˆšæ‰åˆ›å»ºçš„<code>AtroxQW</code>ç›®å½•ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z /]# cd /home/AtroxQW<br>[root@iZ2zeh7ydg2bbydds175q0Z AtroxQW]#<br></code></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨<code>~</code>å›åˆ°å½“å‰çš„ç”¨æˆ·ç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z AtroxQW]# cd ~<br>[root@iZ2zeh7ydg2bbydds175q0Z ~]# pwd<br>/root<br></code></pre></td></tr></table></figure></li></ul><blockquote><p>pwdï¼šæ˜¾ç¤ºå½“å‰ç”¨æˆ·æ‰€åœ¨çš„ç›®å½•</p></blockquote><ul><li><p>è¿›å…¥<code>/bin</code>ç›®å½•ï¼Œå¹¶æ˜¾ç¤ºæ‰€åœ¨ç›®å½•ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z ~]# cd /bin<br>[root@iZ2zeh7ydg2bbydds175q0Z bin]# pwd<br>/bin<br></code></pre></td></tr></table></figure></li></ul><blockquote><p>mkdirï¼šåˆ›å»ºä¸€ä¸ªç›®å½•</p></blockquote><ul><li><p>åœ¨<code>/home</code>ç›®å½•ä¸‹åˆ›å»º<code>test1</code>ç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z home]# mkdir test1<br>[root@iZ2zeh7ydg2bbydds175q0Z home]# ls<br>AtroxQW  environment  img  redis  test1  www<br></code></pre></td></tr></table></figure></li><li><p>ä»¥é€’å½’çš„å½¢å¼ï¼Œåœ¨<code>test1</code>ç›®å½•ä¸‹åˆ›å»º<code>test2</code>ç›®å½•ï¼Œå…¶ä¸­<code>test2</code>ç›®å½•ä¸‹æœ‰<code>test3</code>ç›®å½•ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z home]# mkdir -p test1/test2/test3<br>[root@iZ2zeh7ydg2bbydds175q0Z home]# cd test1<br>[root@iZ2zeh7ydg2bbydds175q0Z test1]# ls<br>test2<br>[root@iZ2zeh7ydg2bbydds175q0Z test1]# cd test2<br>[root@iZ2zeh7ydg2bbydds175q0Z test2]# ls<br>test3<br></code></pre></td></tr></table></figure></li></ul><blockquote><p>rmdirï¼šåˆ é™¤ç›®å½•</p></blockquote><ul><li><p>åˆ é™¤ä¸Šé¢<code>/home</code>ç›®å½•ä¸‹åˆ›å»ºçš„<code>test1/test2/test3</code>å±‚çº§ç›®å½•ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z home]# ls<br>AtroxQW  environment  img  redis  test1  www<br>[root@iZ2zeh7ydg2bbydds175q0Z home]# rmdir test1<br>rmdir: failed to remove &#x27;test1&#x27;: Directory not empty<br></code></pre></td></tr></table></figure></li><li><p>ç”±äºï¼Œ<code>test1</code>ç›®å½•éç©ºï¼Œä¸èƒ½ç›´æ¥åˆ é™¤è¯¥ç›®å½•ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹æ³•åˆ é™¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z home]# rmdir -p test1/test2/test3<br>[root@iZ2zeh7ydg2bbydds175q0Z home]# ls<br>AtroxQW  environment  img  redis  www<br></code></pre></td></tr></table></figure></li><li><p><code>rmdir</code>ä»…èƒ½åˆ é™¤ç©ºçš„ç›®å½•ï¼Œå¦‚æœä¸‹é¢å­˜åœ¨æ–‡ä»¶ï¼Œéœ€è¦å…ˆåˆ é™¤æ–‡ä»¶ã€‚</p></li><li><p>é€’å½’åˆ é™¤å¤šä¸ªç›®å½• åœ¨<code>rmdir</code>ååŠ ä¸Š<code>-p</code>å³å¯ã€‚</p></li></ul><blockquote><p>cpï¼šå¤åˆ¶æ–‡ä»¶æˆ–è€…ç›®å½•</p></blockquote><ul><li><p>å°†<code>/home/img/atrox2.jpg</code>å¤åˆ¶åˆ°<code>/home/AtroxQW</code>ç›®å½•ä¸‹ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z /]# cd /home<br>[root@iZ2zeh7ydg2bbydds175q0Z home]# ls<br>AtroxQW  environment  img  redis  www<br>[root@iZ2zeh7ydg2bbydds175q0Z home]# cd img<br>[root@iZ2zeh7ydg2bbydds175q0Z img]# ls<br>atrox2.jpg<br>[root@iZ2zeh7ydg2bbydds175q0Z img]# cp atrox2.jpg ../AtroxQW<br>[root@iZ2zeh7ydg2bbydds175q0Z img]# cd ../AtroxQW<br>[root@iZ2zeh7ydg2bbydds175q0Z AtroxQW]# ls<br>atrox2.jpg<br></code></pre></td></tr></table></figure></li><li><p>å°†<code>atrox2.jpg</code>å†æ¬¡å¤åˆ¶åˆ°<code>/home/AtroxQW</code>ç›®å½•ä¸‹ï¼Œæ–‡ä»¶åé‡å¤é€‰æ‹©è¦†ç›–ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z img]# cp atrox2.jpg ../AtroxQW<br>cp: overwrite &#x27;../AtroxQW/atrox2.jpg&#x27;? y<br>[root@iZ2zeh7ydg2bbydds175q0Z img]# <br></code></pre></td></tr></table></figure></li></ul><blockquote><p>rmï¼šç§»é™¤æ–‡ä»¶æˆ–è€…ç›®å½•</p></blockquote><p>-fï¼šå¿½ç•¥ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œä¸ä¼šå‡ºç°è­¦å‘Šï¼Œå¼ºåˆ¶åˆ é™¤ã€‚</p><p>-rï¼šé€’å½’åˆ é™¤ç›®å½•</p><p>-iï¼šäº’åŠ¨ï¼Œåˆ é™¤è¯¢é—®æ˜¯å¦åˆ é™¤</p><ul><li><p>åˆ é™¤<code>/home/AtroxQW</code>ç›®å½•ä¸‹çš„å›¾ç‰‡<code>atrox2.jpg</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z /]# clear<br>[root@iZ2zeh7ydg2bbydds175q0Z /]# cd /home/AtroxQW<br>[root@iZ2zeh7ydg2bbydds175q0Z AtroxQW]# ls<br>atrox2.jpg<br>[root@iZ2zeh7ydg2bbydds175q0Z AtroxQW]# rm -rf atrox2.jpg <br>[root@iZ2zeh7ydg2bbydds175q0Z AtroxQW]# ls<br>[root@iZ2zeh7ydg2bbydds175q0Z AtroxQW]# <br></code></pre></td></tr></table></figure></li><li><p>åˆ é™¤ç³»ç»Ÿæ‰€æœ‰çš„æ–‡ä»¶ï¼Œåˆ åº“è·‘è·¯ã€‚<strong>ä¸è¦å°è¯•ï¼</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">rm -rf /<br></code></pre></td></tr></table></figure></li></ul><blockquote><p>mvï¼šç§»åŠ¨æ–‡ä»¶æˆ–è€…ç›®å½•æˆ–è€…é‡å‘½åæ–‡ä»¶</p></blockquote><p>-fï¼šå¼ºåˆ¶ç§»åŠ¨</p><p>-uï¼šåªæ›¿æ¢å·²ç»æ›´æ–°è¿‡çš„æ–‡ä»¶</p><ul><li><p>å°†<code>/home/img</code>ç›®å½•ä¸‹çš„<code>atrox2.jpg</code>ç§»åŠ¨åˆ°<code>/home/AtroxQW</code>ç›®å½•ä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z home]# mv img/atrox2.jpg AtroxQW/<br>[root@iZ2zeh7ydg2bbydds175q0Z home]# ls<br>AtroxQW  environment  img  redis  www<br>[root@iZ2zeh7ydg2bbydds175q0Z home]# cd AtroxQW<br>[root@iZ2zeh7ydg2bbydds175q0Z AtroxQW]# ls<br>atrox2.jpg<br></code></pre></td></tr></table></figure></li><li><p>å°†<code>home/AtroxQW</code>ä¸‹çš„<code>atrox2.jpg</code>é‡å‘½åä¸º<code>atrox3.jpg</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z AtroxQW]# mv atrox2.jpg atrox3.jpg<br>[root@iZ2zeh7ydg2bbydds175q0Z AtroxQW]# ls<br>atrox3.jpg<br></code></pre></td></tr></table></figure></li></ul><h3 id="åŸºæœ¬å±æ€§"><a href="#åŸºæœ¬å±æ€§" class="headerlink" title="åŸºæœ¬å±æ€§"></a>åŸºæœ¬å±æ€§</h3><blockquote><p>æ–‡ä»¶å±æ€§</p></blockquote><p>Linuxç³»ç»Ÿæ˜¯ä¸€ç§å…¸å‹çš„å¤šç”¨æˆ·ç³»ç»Ÿï¼Œä¸åŒçš„ç”¨æˆ·å¤„äºä¸åŒçš„åœ°ä½ï¼Œæ‹¥æœ‰ä¸åŒçš„æƒé™ã€‚ä¸ºäº†ä¿æŠ¤ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼ŒLinuxç³»ç»Ÿå¯¹ä¸åŒçš„ç”¨æˆ·è®¿é—®åŒä¸€æ–‡ä»¶ï¼ˆåŒ…æ‹¬ç›®å½•æ–‡ä»¶ï¼‰çš„æƒé™åšäº†ä¸åŒçš„è§„å®šã€‚</p><p>åœ¨Linuxä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>ll</code>æˆ–è€…<code>ls -ll</code>å‘½ä»¤æ¥æ˜¾ç¤ºä¸€ä¸ªæ–‡ä»¶çš„å±æ€§ä»¥åŠæ–‡ä»¶æ‰€å±çš„ç”¨æˆ·å’Œç»„ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z /]# ls -ll<br>total 24<br>lrwxrwxrwx.   1 root root    7 May 11  2019 bin -&gt; usr/bin<br>dr-xr-xr-x.   5 root root 4096 Feb 18  2020 boot<br>drwxr-xr-x   19 root root 2940 Jan 16 11:10 dev<br>drwxr-xr-x. 100 root root 8192 Jan 16 15:42 etc<br>drwxr-xr-x.   7 root root   75 Jan 17 16:27 home<br>lrwxrwxrwx.   1 root root    7 May 11  2019 lib -&gt; usr/lib<br>lrwxrwxrwx.   1 root root    9 May 11  2019 lib64 -&gt; usr/lib64<br>drwxr-xr-x.   2 root root    6 May 11  2019 media<br>drwxr-xr-x.   2 root root    6 May 11  2019 mnt<br>drwxr-xr-x.   2 root root    6 May 11  2019 opt<br>drwxr-xr-x    2 root root   39 Jan 16 15:32 patch<br>dr-xr-xr-x  128 root root    0 Jan 16 11:10 proc<br>dr-xr-x---.   5 root root  192 Jan 16 15:33 root<br>drwxr-xr-x   32 root root  920 Jan 16 12:02 run<br>lrwxrwxrwx.   1 root root    8 May 11  2019 sbin -&gt; usr/sbin<br>drwxr-xr-x.   2 root root    6 May 11  2019 srv<br>dr-xr-xr-x   13 root root    0 Jan 16 19:10 sys<br>drwxrwxrwt.  11 root root 4096 Jan 17 16:54 tmp<br>drwxr-xr-x.  13 root root  156 Dec 13  2016 usr<br>drwxr-xr-x.  21 root root 4096 Jan 16 15:30 var<br>drwxr-xr-x    6 root root   64 Jan 16 12:02 www<br></code></pre></td></tr></table></figure><p>åœ¨Linuxä¸­ç¬¬ä¸€ä¸ªå­—ç¬¦ä»£è¡¨è¿™ä¸ªæ–‡ä»¶æ˜¯ç›®å½•ã€æ–‡ä»¶æˆ–é“¾æ¥æ–‡ä»¶ç­‰ï¼š</p><ul><li>å½“ä¸º[ d ]åˆ™æ˜¯ç›®å½•</li><li>å½“ä¸º[ - ]åˆ™æ˜¯æ–‡ä»¶ï¼›</li><li>è‹¥æ˜¯[ l ]åˆ™è¡¨ç¤ºä¸ºé“¾æ¥æ–‡æ¡£ ( link file )ï¼›</li><li>è‹¥æ˜¯[ b ]åˆ™è¡¨ç¤ºä¸ºè£…ç½®æ–‡ä»¶é‡Œé¢çš„å¯ä¾›å‚¨å­˜çš„æ¥å£è®¾å¤‡ ( å¯éšæœºå­˜å–è£…ç½® )ï¼›</li><li>è‹¥æ˜¯[ c ]åˆ™è¡¨ç¤ºä¸ºè£…ç½®æ–‡ä»¶é‡Œé¢çš„ä¸²è¡Œç«¯å£è®¾å¤‡ï¼Œä¾‹å¦‚é”®ç›˜ã€é¼ æ ‡ ( ä¸€æ¬¡æ€§è¯»å–è£…ç½® )ã€‚</li></ul><p>æ¥ä¸‹æ¥çš„å­—ç¬¦ä¸­ï¼Œä»¥ä¸‰ä¸ªä¸ºä¸€ç»„ï¼Œä¸”å‡ä¸ºã€rwxã€ çš„ä¸‰ä¸ªå‚æ•°çš„ç»„åˆã€‚</p><p>å…¶ä¸­ï¼Œ[ r ]ä»£è¡¨å¯è¯»(read)ã€[ w ]ä»£è¡¨å¯å†™(write)ã€[ x ]ä»£è¡¨å¯æ‰§è¡Œ(execute)ã€‚</p><p>è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸‰ä¸ªæƒé™çš„ä½ç½®ä¸ä¼šæ”¹å˜ï¼Œå¦‚æœæ²¡æœ‰æƒé™ï¼Œå°±ä¼šå‡ºç°å‡å·[ - ]è€Œå·²ã€‚æ¯ä¸ªæ–‡ä»¶çš„å±æ€§ç”±å·¦è¾¹ç¬¬ä¸€éƒ¨åˆ†çš„10ä¸ªå­—ç¬¦æ¥ç¡®å®šï¼ˆå¦‚ä¸‹å›¾ï¼‰ï¼š</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°04-å¸¸ç”¨çš„åŸºæœ¬å‘½ä»¤/file_properties.jpg" alt="æ–‡ä»¶å±æ€§"><p>åé¢ï¼Œæ˜¯æ”¹æ–‡ä»¶çš„å±ä¸»å’Œæ•°ç»„ï¼Œæœ‰bootæ–‡ä»¶æ¥è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ªç›®å½•æ–‡ä»¶ï¼Œå±ä¸»å’Œæ•°ç»„éƒ½æ˜¯rootã€‚</p><p>å†åé¢ï¼Œå°±æ˜¯æ–‡ä»¶çš„åˆ›å»ºæ—¶é—´ã€‚</p><p>å¦‚æœæ˜¯é“¾æ¥æ–‡ä»¶ï¼Œåé¢ä¼šå‡ºç°ä¸€ä¸ªé“¾æ¥ï¼Œç›¸å½“äºWindowsä¸­å¿«æ·æ–¹å¼ -&gt; ç»å¯¹ä½ç½®ã€‚</p><blockquote><p>ä¿®æ”¹æ–‡ä»¶å±æ€§</p></blockquote><ol><li><p><strong>chgrpï¼šæ›´æ”¹æ–‡ä»¶å±ç»„</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">chgrp [-R] å±ç»„å æ–‡ä»¶å</span><br></code></pre></td></tr></table></figure><p>å°†<code>/home/AtroxQW</code>ç›®å½•ä¸‹çš„<code>atrox3.jpg</code>çš„å±ç»„æ”¹ä¸º<code>AtroxQW</code>ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z AtroxQW]# ls -ll<br>total 900<br>-rw-r--r-- 1 root root 918515 Jan 16 23:23 atrox3.jpg<br>[root@iZ2zeh7ydg2bbydds175q0Z AtroxQW]# chgrp -R AtroxQW atrox3.jpg <br>chgrp: invalid group: â€˜AtroxQWâ€™<br></code></pre></td></tr></table></figure><p>ç°åœ¨ç³»ç»Ÿä¸­æ²¡æœ‰è¿™ä¸ªå±ç»„ï¼Œå¦‚æœæœ‰åˆ™å¯ä»¥ä¿®æ”¹ã€‚</p></li><li><p><strong>chownï¼šæ›´æ”¹æ–‡ä»¶å±ä¸»ï¼Œä¹Ÿå¯ä»¥åŒæ—¶æ›´æ”¹æ–‡ä»¶å±ç»„</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> chown [-R] å±ä¸»å æ–‡ä»¶å</span><br><span class="hljs-meta">#</span><span class="bash"> chown [-R] å±ä¸»å: å±ç»„å æ–‡ä»¶å</span><br></code></pre></td></tr></table></figure></li><li><p><strong>chmodï¼šæ›´æ”¹æ–‡ä»¶çš„9ä¸ªå±æ€§</strong></p><p>è¿™ä¸ªæŒ‡ä»¤ç”¨äºæ›´æ”¹æ–‡ä»¶çš„æƒé™æ“ä½œã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> chomd [-R] xyz æ–‡ä»¶æˆ–ç›®å½•</span><br></code></pre></td></tr></table></figure><p>Linuxæ–‡ä»¶å±æ€§æœ‰ä¸¤ç§è®¾ç½®æ–¹å¼ï¼Œä¸€ç§æ˜¯æ•°å­—ï¼ˆæœ€å¸¸ç”¨ï¼‰ï¼Œä¸€ç§æ˜¯ç¬¦å·ã€‚</p><p>Linuxæ–‡ä»¶çš„åŸºæœ¬æƒé™æœ‰ä¹ä¸ªï¼Œåˆ†åˆ«æ˜¯<code>owner/group/others</code>ä¸‰ä¸­èº«ä»½å„æœ‰è‡ªå·±çš„<code>read/write/execute</code>æƒé™ã€‚</p><p>æ–‡ä»¶çš„æƒé™å­—ç¬¦ä¸ºï¼š[-rwxrwxrwx]ï¼Œè¿™9ä¸ªæƒé™æ˜¯ä¸‰ä¸‰ä¸€ç»„çš„ï¼å…¶ä¸­æˆ‘ä»¬å¯ä»¥ç”¨æ•°å­—æ¥ä»£è¡¨å„ä¸ªæƒé™ï¼Œå„æƒé™çš„æ•°å­—å¯¹ç…§è¡¨å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">r: 4  w: 2  x:1<br></code></pre></td></tr></table></figure><p>æ¯ç§èº«ä»½(owner/group/others)å„è‡ªçš„ä¸‰ä¸ªæƒé™(rwx)åˆ†æ•°æ˜¯éœ€è¦ç´¯åŠ çš„ï¼Œä¾‹å¦‚å½“æƒé™ä¸ºï¼š[-rwxrwxâ€”]åˆ†æ•°åˆ™æ˜¯ï¼š</p><ul><li>owner = rwx = 4 + 2 + 1 = 7</li><li>group = rwx = 4 + 2 + 1 = 7</li><li>others = â€” = 0 + 0 + 0 = 0</li></ul><p>å¯¹äºèµ‹äºˆæƒé™çš„å‘½ä»¤ä¸ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> chmod -R 770 filename</span><br></code></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼Œå°†<code>/home/Atrox/atrox3.jpg</code>æ–‡ä»¶ï¼Œèµ‹äºˆæƒé™æ‰€æœ‰ç”¨æˆ·å¯è¯»å¯å†™å¯æ‰§è¡Œã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z AtroxQW]# ls -ll<br>total 900<br>-rw-r--r-- 1 root root 918515 Jan 16 23:23 atrox3.jpg<br>[root@iZ2zeh7ydg2bbydds175q0Z AtroxQW]# chmod -R 777 atrox3.jpg <br>[root@iZ2zeh7ydg2bbydds175q0Z AtroxQW]# ls<br>atrox3.jpg<br>[root@iZ2zeh7ydg2bbydds175q0Z AtroxQW]# ls -ll<br>total 900<br>-rwxrwxrwx 1 root root 918515 Jan 16 23:23 atrox3.jpg<br></code></pre></td></tr></table></figure></li></ol><h3 id="æ–‡ä»¶å†…å®¹æŸ¥çœ‹"><a href="#æ–‡ä»¶å†…å®¹æŸ¥çœ‹" class="headerlink" title="æ–‡ä»¶å†…å®¹æŸ¥çœ‹"></a>æ–‡ä»¶å†…å®¹æŸ¥çœ‹</h3><blockquote><p>æŸ¥çœ‹æ–‡ä»¶å†…å®¹</p></blockquote><p>Linuxç³»ç»Ÿä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹æ–‡ä»¶çš„å†…å®¹ï¼Œæˆ‘ä»¬é€‰æ‹©<code>/etc/sysconfig/network-scripts</code>ç›®å½•ï¼Œè¿™å…¶ä¸­æœ‰ä¸€ä¸ªé»˜è®¤ç½‘ç»œé…ç½®æ–‡ä»¶<code>ifcfg-eth0</code>ã€‚</p><ul><li><p><strong>cat</strong>ï¼šç”±ç¬¬ä¸€è¡Œå¼€å§‹æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ï¼Œç”¨æ¥è¯»æ–‡ç« æˆ–è€…è¯»å–é…ç½®æ–‡ä»¶ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z network-scripts]# cat ifcfg-eth0 <br><span class="hljs-meta">#</span><span class="bash"> Created by cloud-init on instance boot automatically, <span class="hljs-keyword">do</span> not edit.</span><br><span class="hljs-meta">#</span><br><span class="bash">BOOTPROTO=dhcp</span><br>DEVICE=eth0<br>ONBOOT=yes<br>STARTMODE=auto<br>TYPE=Ethernet<br>USERCTL=no<br></code></pre></td></tr></table></figure></li><li><p><strong>tac</strong>ï¼šä»æœ€åä¸€è¡Œå¼€å§‹æ˜¾ç¤ºï¼Œtac æ˜¯ cat çš„å€’ç€ç‰ˆæœ¬ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z network-scripts]# ls<br>ifcfg-eth0<br>[root@iZ2zeh7ydg2bbydds175q0Z network-scripts]# tac ifcfg-eth0 <br>USERCTL=no<br>TYPE=Ethernet<br>STARTMODE=auto<br>ONBOOT=yes<br>DEVICE=eth0<br>BOOTPROTO=dhcp<br><span class="hljs-meta">#</span><br><span class="bash"><span class="hljs-comment"># Created by cloud-init on instance boot automatically, do not edit.</span></span><br></code></pre></td></tr></table></figure></li><li><p><strong>nl</strong>ï¼šæ˜¾ç¤ºçš„æ—¶å€™ï¼Œè¾“å‡ºè¡Œå·ï¼Œé€‚åˆæŸ¥çœ‹ä»£ç çš„æ—¶å€™ï¼Œè¾ƒä¸ºå¸¸ç”¨ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z network-scripts]# ls<br>ifcfg-eth0<br>[root@iZ2zeh7ydg2bbydds175q0Z network-scripts]# nl ifcfg-eth0 <br>     1# Created by cloud-init on instance boot automatically, do not edit.<br>     2#<br>     3BOOTPROTO=dhcp<br>     4DEVICE=eth0<br>     5ONBOOT=yes<br>     6STARTMODE=auto<br>     7TYPE=Ethernet<br>     8USERCTL=no<br></code></pre></td></tr></table></figure></li><li><p><strong>more</strong>ï¼šä¸€é¡µä¸€é¡µçš„æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>/etc</code>ç›®å½•ä¸‹çš„<code>csh.login</code>æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨<code>space</code>ç©ºæ ¼è¿›è¡Œç¿»é¡µï¼Œ<code>enter</code>å¯ä»¥å‘ä¸‹çœ‹ä¸€è¡Œã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z etc]# more csh.login<br><span class="hljs-meta">#</span><span class="bash"> /etc/csh.login</span><br><br><span class="hljs-meta">#</span><span class="bash"> System wide environment and startup programs, <span class="hljs-keyword">for</span> login setup</span><br><br><span class="hljs-meta">#</span><span class="bash">add sbin directories to the path</span><br>foreach p ( /usr/local/sbin /usr/sbin )<br>switch (&quot;:$&#123;PATH&#125;:&quot;)<br>case &quot;*:$&#123;p&#125;:*&quot;:<br>breaksw<br>default:<br>if ( $uid == 0 ) then<br>                        set path = ( $&#123;p&#125; $&#123;path:q&#125; )<br>else<br>                        set path = ( $&#123;path:q&#125; $&#123;p&#125; )<br>endif<br>breaksw<br>endsw<br>end<br><br>setenv HOSTNAME `/usr/bin/hostname`<br>set history=1000<br><br>if ( -d /etc/profile.d ) then<br>        set nonomatch<br>        foreach i ( /etc/profile.d/*.csh )<br>                if ( -r &quot;$i&quot; ) then<br>                        if ($?prompt) then<br>                              source &quot;$i&quot;<br>                        else<br><span class="hljs-meta">--More--(81%</span><span class="bash">)</span><br></code></pre></td></tr></table></figure></li><li><p><strong>less</strong>ï¼š<code>less</code>ä¸<code>more</code>ç±»ä¼¼ï¼Œä½†æ˜¯æ¯”moreæ›´å¥½çš„æ˜¯ï¼Œå®ƒå¯ä»¥å¾€å‰ç¿»é¡µï¼Œè¿™é‡Œ<code>space</code>ç©ºæ ¼å¯ä»¥ç¿»é¡µï¼Œä¸Šä¸‹é”®ä»£è¡¨ä¸Šä¸‹ç¿»åŠ¨é¡µé¢ï¼Œé€€å‡ºæ—¶æŒ‰<code>q</code>é€€å‡ºå‘½ä»¤å›åˆ°å‘½ä»¤è¡Œã€‚æŸ¥æ‰¾å­—ç¬¦ä¸² /è¦æŸ¥è¯¢çš„å­—ç¬¦å‘ä¸‹æŸ¥è¯¢ï¼Œå‘ä¸ŠæŸ¥è¯¢ä½¿ç”¨ï¼Ÿè¦æŸ¥è¯¢çš„å­—ç¬¦ä¸²ï¼Œn ç»§ç»­æœå¯»ä¸‹ä¸€ä¸ªï¼ŒN ä¸Šå¯»æ‰¾ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z etc]# less csh.login <br><br><br><span class="hljs-meta">#</span><span class="bash"> /etc/csh.login</span><br><br><span class="hljs-meta">#</span><span class="bash"> System wide environment and startup programs, <span class="hljs-keyword">for</span> login setup</span><br><br><span class="hljs-meta">#</span><span class="bash">add sbin directories to the path</span><br>foreach p ( /usr/local/sbin /usr/sbin )<br>        switch (&quot;:$&#123;PATH&#125;:&quot;)<br>        case &quot;*:$&#123;p&#125;:*&quot;:<br>                breaksw<br>        default:<br>                if ( $uid == 0 ) then<br>                        set path = ( $&#123;p&#125; $&#123;path:q&#125; )<br>                else<br>                        set path = ( $&#123;path:q&#125; $&#123;p&#125; )<br>                endif<br>                breaksw<br>        endsw<br>end<br><br>setenv HOSTNAME `/usr/bin/hostname`<br>set history=1000<br><br>if ( -d /etc/profile.d ) then<br>        set nonomatch<br>        foreach i ( /etc/profile.d/*.csh )<br>                if ( -r &quot;$i&quot; ) then<br>                                if ($?prompt) then<br>                                      source &quot;$i&quot;<br>                                else<br>                                      source &quot;$i&quot; &gt;&amp; /dev/null<br>                                endif<br>/set<br></code></pre></td></tr></table></figure></li><li><p><strong>head</strong>ï¼šåªçœ‹å‰å¤šå°‘è¡Œï¼Œé€šè¿‡<code>-n</code>å‚æ•°æ¥æ§åˆ¶æ˜¾ç¤ºè¡Œæ•°ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z etc]# head -n 5 csh.login<br><span class="hljs-meta">#</span><span class="bash"> /etc/csh.login</span><br><br><span class="hljs-meta">#</span><span class="bash"> System wide environment and startup programs, <span class="hljs-keyword">for</span> login setup</span><br><br><span class="hljs-meta">#</span><span class="bash">add sbin directories to the path</span><br></code></pre></td></tr></table></figure></li><li><p><strong>tail</strong>ï¼šåªçœ‹æ–‡ä»¶å°¾éƒ¨å¤šå°‘è¡Œï¼Œé€šè¿‡<code>-n</code>å‚æ•°æ¥æ§åˆ¶æ˜¾ç¤ºè¡Œæ•°ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z etc]# tail -n 5 csh.login <br>                        endif<br>                endif<br>        end<br>        unset i nonomatch<br>endif<br></code></pre></td></tr></table></figure></li></ul><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>man</code>å‘½ä»¤æ¥æŸ¥çœ‹å„ä¸ªå‘½ä»¤çš„ä½¿ç”¨æ–‡æ¡£ï¼Œå¦‚ï¼š<code>man cp</code></p><p>ç»è¿‡æ¼”ç¤ºï¼Œæˆ‘ä»¬æ”¶è·ä¸€ä¸ªç½‘ç»œé…ç½®çš„ç›®å½•ï¼š<code>/etc/sysconfig/network-scripts</code>ï¼Œæˆ‘ä»¬åœ¨å‘½ä»¤è¡Œé€šè¿‡<code>ifconfig</code>å‘½ä»¤ä¹Ÿå¯ä»¥æŸ¥çœ‹ç½‘ç»œé…ç½®ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z /]# ifconfig<br>eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500<br>        inet 172.27.4.42  netmask 255.255.240.0  broadcast 172.27.15.255<br>        inet6 fe80::216:3eff:fe2c:7f4  prefixlen 64  scopeid 0x20&lt;link&gt;<br>        ether 00:16:3e:2c:07:f4  txqueuelen 1000  (Ethernet)<br>        RX packets 576227  bytes 781997326 (745.7 MiB)<br>        RX errors 0  dropped 0  overruns 0  frame 0<br>        TX packets 195816  bytes 48479173 (46.2 MiB)<br>        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0<br><br>lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536<br>        inet 127.0.0.1  netmask 255.0.0.0<br>        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;<br>        loop  txqueuelen 1000  (Local Loopback)<br>        RX packets 174  bytes 13491 (13.1 KiB)<br>        RX errors 0  dropped 0  overruns 0  frame 0<br>        TX packets 174  bytes 13491 (13.1 KiB)<br>        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0<br></code></pre></td></tr></table></figure><blockquote><p>Linuxé“¾æ¥çš„æ¦‚å¿µ</p></blockquote><p>Linuxçš„é“¾æ¥åˆ†ä¸ºä¸¤ç§ï¼šç¡¬é“¾æ¥å’Œè½¯é“¾æ¥ã€‚</p><p><strong>ç¡¬é“¾æ¥</strong>ï¼šAâ€”&gt;Bï¼›å‡è®¾Bæ˜¯Açš„ç¡¬é“¾æ¥ï¼Œé‚£ä¹ˆå®ƒä»¬ä¸¤ä¸ªæŒ‡å‘åŒä¸€ä¸ªæ–‡ä»¶ï¼Œå…è®¸ä¸€ä¸ªæ–‡ä»¶æ‹¥æœ‰å¤šä¸ªè·¯å¾„ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è¿™ä¸ªæœºåˆ¶å»ºç«‹ç¡¬é“¾æ¥åˆ°ä¸€äº›é‡è¦æ–‡ä»¶ä¸Šï¼Œé˜²æ­¢è¯¯åˆ ã€‚</p><p><strong>è½¯é“¾æ¥</strong>ï¼šç±»ä¼¼Windowsä¸‹çš„å¿«æ·æ–¹å¼ï¼Œåˆ é™¤æºæ–‡ä»¶åï¼Œå¿«æ·æ–¹å¼ä¹Ÿå°±è®¿é—®ä¸äº†ã€‚</p><p><code>ln</code>åˆ›å»ºé“¾æ¥å‘½ä»¤</p><p><code>touch</code>åˆ›å»ºæ–‡ä»¶å‘½ä»¤</p><p><code>echo</code>è¾“å…¥å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥è¾“å…¥åˆ°æ–‡ä»¶ä¸­</p><ul><li><p>åœ¨<code>/home</code>ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª<code>f1</code>æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z home]# touch f1<br>[root@iZ2zeh7ydg2bbydds175q0Z home]# ls<br>AtroxQW  environment  f1  img  redis  www<br></code></pre></td></tr></table></figure></li><li><p>åœ¨<code>/home</code>ç›®å½•ä¸‹æ–°å»º<code>f1</code>æ–‡ä»¶ç¡¬é“¾æ¥<code>f2</code>æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z home]# ln f1 f2<br>[root@iZ2zeh7ydg2bbydds175q0Z home]# ls<br>AtroxQW  environment  f1  f2  img  redis  www<br></code></pre></td></tr></table></figure></li><li><p>åœ¨<code>/home</code>ç›®å½•ä¸‹æ–°å»º<code>f1</code>æ–‡ä»¶è½¯é“¾æ¥<code>f3</code>æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z home]# ln -s f1 f3<br>[root@iZ2zeh7ydg2bbydds175q0Z home]# ls<br>AtroxQW  environment  f1  f2  f3  img  redis  www<br></code></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹<code>/home</code>ç›®å½•ä¸‹æ–‡ä»¶å±æ€§</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z home]# ls -ll<br>total 0<br>drwxr-xr-x 2 root  root  24 Jan 17 16:54 AtroxQW<br>drwxr-xr-x 2 root  root   6 Jan 16 23:21 environment<br>-rw-r--r-- 2 root  root   0 Jan 17 19:59 f1<br>-rw-r--r-- 2 root  root   0 Jan 17 19:59 f2<br>lrwxrwxrwx 1 root  root   2 Jan 17 22:28 f3 -&gt; f1<br>drwxr-xr-x 2 root  root   6 Jan 17 16:51 img<br>drwx------ 2 redis redis 62 Jan 16 15:42 redis<br>drwx------ 3 www   www   87 Jan 16 15:42 www<br></code></pre></td></tr></table></figure></li><li><p>å°†â€i love uâ€è¾“å…¥åˆ°<code>f1</code>æ–‡ä»¶ä¸­ï¼Œå¹¶æŸ¥çœ‹<code>f1</code>å†…å®¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z home]# echo &quot;i love u&quot; &gt;&gt;f1<br>[root@iZ2zeh7ydg2bbydds175q0Z home]# cat f1<br>i love u<br></code></pre></td></tr></table></figure></li><li><p>è®¿é—®<code>f2</code>æ–‡ä»¶å†…å®¹å’Œ<code>f3</code>æ–‡ä»¶å†…å®¹ï¼Œ<code>f1</code>å†…å®¹å·²åŒæ­¥åˆ°è¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z home]# cat f2<br>i love u<br>[root@iZ2zeh7ydg2bbydds175q0Z home]# cat f3<br>i love u<br></code></pre></td></tr></table></figure></li><li><p>åˆ é™¤<code>f1</code>ï¼ŒæŸ¥çœ‹<code>f2</code>å’Œ<code>f3</code>çš„çŠ¶æ€ï¼Œç¡¬é“¾æ¥<code>f2</code>æ–‡ä»¶å†…å®¹è¿˜å­˜åœ¨ï¼Œ<code>f3</code>å·²ç»çˆ†çº¢æ— æ•ˆã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z home]# rm -rf f1<br>[root@iZ2zeh7ydg2bbydds175q0Z home]# ls<br>AtroxQW  environment  f2  f3  img  redis  www<br>[root@iZ2zeh7ydg2bbydds175q0Z home]# cat f2<br>i love u<br>[root@iZ2zeh7ydg2bbydds175q0Z home]# cat f3<br>cat: f3: No such file or directory<br></code></pre></td></tr></table></figure></li></ul><h3 id="Vim-ç¼–è¾‘å™¨"><a href="#Vim-ç¼–è¾‘å™¨" class="headerlink" title="Vim ç¼–è¾‘å™¨"></a>Vim ç¼–è¾‘å™¨</h3><blockquote><p>ä»€ä¹ˆæ˜¯Vimç¼–è¾‘å™¨</p></blockquote><p>vim é€šè¿‡ä¸€äº›æ’ä»¶å¯ä»¥å®ç°å’ŒIDEä¸€æ ·çš„åŠŸèƒ½ï¼</p><p>Vimæ˜¯ä» vi å‘å±•å‡ºæ¥çš„ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ã€‚ä»£ç è¡¥å®Œã€ç¼–è¯‘åŠé”™è¯¯è·³è½¬ç­‰æ–¹ä¾¿ç¼–ç¨‹çš„åŠŸèƒ½ç‰¹åˆ«ä¸°å¯Œï¼Œåœ¨ç¨‹åºå‘˜ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚å°¤å…¶æ˜¯Linuxä¸­ï¼Œå¿…é¡»è¦ä¼šä½¿ç”¨Vimï¼ˆæŸ¥çœ‹å†…å®¹ï¼Œç¼–è¾‘å†…å®¹ï¼Œä¿å­˜å†…å®¹ï¼ï¼‰</p><p>ç®€å•çš„æ¥è¯´ï¼Œ vi æ˜¯è€å¼çš„å­—å¤„ç†å™¨ï¼Œä¸è¿‡åŠŸèƒ½å·²ç»å¾ˆé½å…¨äº†ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰å¯ä»¥è¿›æ­¥çš„åœ°æ–¹ã€‚</p><p>vim åˆ™å¯ä»¥è¯´æ˜¯ç¨‹åºå¼€å‘è€…çš„ä¸€é¡¹å¾ˆå¥½ç”¨çš„å·¥å…·ã€‚</p><p>æ‰€æœ‰çš„ Unix Like ç³»ç»Ÿéƒ½ä¼šå†…å»º vi æ–‡ä¹¦ç¼–è¾‘å™¨ï¼Œå…¶ä»–çš„æ–‡ä¹¦ç¼–è¾‘å™¨åˆ™ä¸ä¸€å®šä¼šå­˜åœ¨ã€‚</p><p>è¿ vim çš„å®˜æ–¹ç½‘ç«™ (<a href="http://www.vim.org/">http://www.vim.org</a>) è‡ªå·±ä¹Ÿè¯´ vim æ˜¯ä¸€ä¸ªç¨‹åºå¼€å‘å·¥å…·è€Œä¸æ˜¯æ–‡å­—å¤„ç†è½¯ä»¶ã€‚</p><p>vim é”®ç›˜å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B004-%E5%B8%B8%E7%94%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/vim.jpg" alt="vimé”®ç›˜å›¾"></p><blockquote><p>ä¸‰ç§ä½¿ç”¨æ¨¡å¼</p></blockquote><p>åŸºæœ¬ä¸Š vi/vim å…±åˆ†ä¸ºä¸‰ç§æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯<strong>å‘½ä»¤æ¨¡å¼</strong>ï¼ˆCommand modeï¼‰ï¼Œ<strong>è¾“å…¥æ¨¡å¼</strong>ï¼ˆInsert modeï¼‰å’Œåº•çº¿å‘½ä»¤æ¨¡å¼ï¼ˆLast line modeï¼‰ã€‚è¿™ä¸‰ç§æ¨¡å¼çš„ä½œç”¨åˆ†åˆ«æ˜¯ï¼š</p><p><strong>å‘½ä»¤æ¨¡å¼</strong>ï¼š</p><p>ç”¨æˆ·åˆšåˆšå¯åŠ¨ vi/vimï¼Œä¾¿è¿›å…¥äº†å‘½ä»¤æ¨¡å¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z ~]# vim atrox.txt<br><br><br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>&quot;atrox.txt&quot; [New File]                                   0,0-1         All<br></code></pre></td></tr></table></figure><p>æ­¤çŠ¶æ€ä¸‹æ•²å‡»é”®ç›˜åŠ¨ä½œä¼šè¢«Vimè¯†åˆ«ä¸ºå‘½ä»¤ï¼Œè€Œéè¾“å…¥å­—ç¬¦ã€‚æ¯”å¦‚æˆ‘ä»¬æ­¤æ—¶æŒ‰ä¸‹iï¼Œå¹¶ä¸ä¼šè¾“å…¥ä¸€ä¸ªå­—ç¬¦ï¼Œiè¢«å½“ä½œäº†ä¸€ä¸ªå‘½ä»¤ã€‚</p><p>ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„å‡ ä¸ªå‘½ä»¤ï¼š</p><ul><li>i åˆ‡æ¢åˆ°è¾“å…¥æ¨¡å¼ï¼Œä»¥è¾“å…¥å­—ç¬¦ã€‚</li><li>x åˆ é™¤å½“å‰å…‰æ ‡æ‰€åœ¨å¤„çš„å­—ç¬¦ã€‚</li><li>: åˆ‡æ¢åˆ°åº•çº¿å‘½ä»¤æ¨¡å¼ï¼Œä»¥åœ¨æœ€åº•ä¸€è¡Œè¾“å…¥å‘½ä»¤ã€‚ å¦‚æœæ˜¯ç¼–è¾‘æ¨¡å¼ï¼Œéœ€è¦å…ˆé€€å‡ºç¼–è¾‘æ¨¡å¼ï¼ESC</li></ul><p>è‹¥æƒ³è¦ç¼–è¾‘æ–‡æœ¬ï¼šå¯åŠ¨Vimï¼Œè¿›å…¥äº†å‘½ä»¤æ¨¡å¼ï¼ŒæŒ‰ä¸‹iï¼Œåˆ‡æ¢åˆ°è¾“å…¥æ¨¡å¼ã€‚</p><p>å‘½ä»¤æ¨¡å¼åªæœ‰ä¸€äº›æœ€åŸºæœ¬çš„å‘½ä»¤ï¼Œå› æ­¤ä»è¦ä¾é åº•çº¿å‘½ä»¤æ¨¡å¼è¾“å…¥æ›´å¤šå‘½ä»¤ã€‚</p><p><strong>è¾“å…¥æ¨¡å¼</strong>ï¼š</p><p>åœ¨å‘½ä»¤æ¨¡å¼ä¸‹æŒ‰ä¸‹iå°±è¿›å…¥äº†è¾“å…¥æ¨¡å¼ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z ~]# vim atrox.txt<br><br><br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>~                                                                          <br>-- INSERT --                                             0,1           All<br></code></pre></td></tr></table></figure><p>åœ¨è¾“å…¥æ¨¡å¼ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŒ‰é”®ï¼š</p><ul><li><strong>å­—ç¬¦æŒ‰é”®ä»¥åŠshiftç»„åˆ</strong>ï¼šè¾“å…¥å­—ç¬¦ã€‚</li><li><strong>Enter</strong>ï¼šå›è½¦é”®ï¼Œæ¢è¡Œã€‚</li><li><strong>Back Space</strong>ï¼šé€€æ ¼é”®ï¼Œåˆ é™¤å…‰æ ‡å‰ä¸€ä¸ªå­—ç¬¦ã€‚ </li><li><strong>Del</strong>ï¼šåˆ é™¤é”®ï¼Œåˆ é™¤å…‰æ ‡åä¸€ä¸ªå­—ç¬¦ã€‚</li><li><strong>æ–¹å‘é”®</strong>ï¼šåœ¨æ–‡æœ¬ä¸­ç§»åŠ¨å…‰æ ‡ã€‚</li><li><strong>Home/End</strong>ï¼šç§»åŠ¨å…‰æ ‡åˆ°è¡Œé¦–/è¡Œå°¾ã€‚</li><li><strong>Page Up/Page Down</strong>ï¼šä¸Š/ä¸‹ç¿»é¡µã€‚</li><li><strong>Insert</strong>ï¼šåˆ‡æ¢å…‰æ ‡ä¸ºè¾“å…¥/æ›¿æ¢æ¨¡å¼ï¼Œå…‰æ ‡å°†å˜æˆç«–çº¿/ä¸‹åˆ’çº¿ã€‚</li><li><strong>Esc</strong>ï¼šé€€å‡ºè¾“å…¥æ¨¡å¼ï¼Œåˆ‡æ¢åˆ°å‘½ä»¤æ¨¡å¼ã€‚</li></ul><p><strong>åº•çº¿å‘½ä»¤æ¨¡å¼</strong>ï¼š</p><p>åœ¨å‘½ä»¤æ¨¡å¼ä¸‹æŒ‰ä¸‹:ï¼ˆè‹±æ–‡å†’å·ï¼‰å°±è¿›å…¥äº†åº•çº¿å‘½ä»¤æ¨¡å¼ã€‚å…‰æ ‡å°±ç§»åŠ¨åˆ°äº†æœ€åº•ä¸‹ï¼Œå°±å¯ä»¥åœ¨è¿™é‡Œè¾“å…¥ä¸€äº›åº•çº¿å‘½ä»¤äº†ï¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">~                                                                          <br>:  <br></code></pre></td></tr></table></figure><p>åº•çº¿å‘½ä»¤æ¨¡å¼å¯ä»¥è¾“å…¥å•ä¸ªæˆ–å¤šä¸ªå­—ç¬¦çš„å‘½ä»¤ï¼Œå¯ç”¨çš„å‘½ä»¤éå¸¸å¤šã€‚</p><p>åœ¨åº•çº¿å‘½ä»¤æ¨¡å¼ä¸­ï¼ŒåŸºæœ¬çš„å‘½ä»¤æœ‰ï¼ˆå·²ç»çœç•¥äº†å†’å·ï¼‰ï¼šwq</p><ul><li><strong>q</strong>ï¼šé€€å‡ºç¨‹åº</li><li><strong>w</strong>ï¼šä¿å­˜æ–‡ä»¶</li></ul><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-symbol">~                                                                          </span><br><span class="hljs-symbol"></span>:wq   <br></code></pre></td></tr></table></figure><p>æŒ‰ESCé”®å¯éšæ—¶é€€å‡ºåº•çº¿å‘½ä»¤æ¨¡å¼ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> æŸ¥çœ‹æ–‡ä»¶</span><br>cat atrox.txt<br><span class="hljs-meta">#</span><span class="bash"> å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œä¸ºç¼–è¾‘æ–‡ä»¶ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œä¼šæ–°å»ºæ–‡ä»¶ã€‚</span><br>vim atrox.txt<br></code></pre></td></tr></table></figure><p>ç®€å•çš„è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸‰ä¸ªæ¨¡å¼æƒ³æˆåº•ä¸‹çš„å›¾æ ‡æ¥è¡¨ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B004-%E5%B8%B8%E7%94%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/vim2.jpg" alt="vimä¸‰ç§æ¨¡å¼"></p><blockquote><p>VimæŒ‰é”®è¯´æ˜</p></blockquote><p>é™¤äº†ä¸Šé¢ç®€æ˜“èŒƒä¾‹çš„ i, Esc, :wq ä¹‹å¤–ï¼Œå…¶å® vim è¿˜æœ‰éå¸¸å¤šçš„æŒ‰é”®å¯ä»¥ä½¿ç”¨ã€‚</p><p><strong>ç¬¬ä¸€éƒ¨åˆ†ï¼šä¸€èˆ¬æ¨¡å¼å¯ç”¨çš„å…‰æ ‡ç§»åŠ¨ã€å¤åˆ¶ç²˜è´´ã€æœç´¢æ›¿æ¢ç­‰</strong></p><table><thead><tr><th>ç§»åŠ¨å…‰æ ‡çš„æ–¹æ³•</th><th></th></tr></thead><tbody><tr><td>h æˆ– å‘å·¦ç®­å¤´é”®(â†)</td><td>å…‰æ ‡å‘å·¦ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td>j æˆ– å‘ä¸‹ç®­å¤´é”®(â†“)</td><td>å…‰æ ‡å‘ä¸‹ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td>k æˆ– å‘ä¸Šç®­å¤´é”®(â†‘)</td><td>å…‰æ ‡å‘ä¸Šç§»åŠ¨ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td>l æˆ– å‘å³ç®­å¤´é”®(â†’)</td><td>å…‰æ ‡å‘å³ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td>[Ctrl] + [f]</td><td>å±å¹•ã€å‘ä¸‹ã€ç§»åŠ¨ä¸€é¡µï¼Œç›¸å½“äº [Page Down]æŒ‰é”® (å¸¸ç”¨)</td></tr><tr><td>[Ctrl] + [b]</td><td>å±å¹•ã€å‘ä¸Šã€ç§»åŠ¨ä¸€é¡µï¼Œç›¸å½“äº [Page Up] æŒ‰é”® (å¸¸ç”¨)</td></tr><tr><td>[Ctrl] + [d]</td><td>å±å¹•ã€å‘ä¸‹ã€ç§»åŠ¨åŠé¡µ</td></tr><tr><td>[Ctrl] + [u]</td><td>å±å¹•ã€å‘ä¸Šã€ç§»åŠ¨åŠé¡µ</td></tr><tr><td>+</td><td>å…‰æ ‡ç§»åŠ¨åˆ°éç©ºæ ¼ç¬¦çš„ä¸‹ä¸€è¡Œ</td></tr><tr><td>-</td><td>å…‰æ ‡ç§»åŠ¨åˆ°éç©ºæ ¼ç¬¦çš„ä¸Šä¸€è¡Œï¼Œé…ç½®æ–‡ä»¶ä¸­ç©ºæ ¼è¾ƒå¤šï¼</td></tr><tr><td>æ•°å­— &lt; space&gt;</td><td>é‚£ä¸ª n è¡¨ç¤ºã€æ•°å­—ã€ï¼Œä¾‹å¦‚ 20 ã€‚å¿«æ·åˆ‡æ¢å…‰æ ‡ï¼Œ æ•°å­— + ç©ºæ ¼</td></tr><tr><td>0 æˆ–åŠŸèƒ½é”®[Home]</td><td>è¿™æ˜¯æ•°å­—ã€ 0 ã€ï¼šç§»åŠ¨åˆ°è¿™ä¸€è¡Œçš„æœ€å‰é¢å­—ç¬¦å¤„ (å¸¸ç”¨)</td></tr><tr><td>$ æˆ–åŠŸèƒ½é”®[End]</td><td>ç§»åŠ¨åˆ°è¿™ä¸€è¡Œçš„æœ€åé¢å­—ç¬¦å¤„(å¸¸ç”¨)</td></tr><tr><td>H</td><td>å…‰æ ‡ç§»åŠ¨åˆ°è¿™ä¸ªå±å¹•çš„æœ€ä¸Šæ–¹é‚£ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td>M</td><td>å…‰æ ‡ç§»åŠ¨åˆ°è¿™ä¸ªå±å¹•çš„ä¸­å¤®é‚£ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td>L</td><td>å…‰æ ‡ç§»åŠ¨åˆ°è¿™ä¸ªå±å¹•çš„æœ€ä¸‹æ–¹é‚£ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td>G</td><td>ç§»åŠ¨åˆ°è¿™ä¸ªæ¡£æ¡ˆçš„æœ€åä¸€è¡Œ(å¸¸ç”¨)</td></tr><tr><td>nG</td><td>n ä¸ºæ•°å­—ã€‚ç§»åŠ¨åˆ°è¿™ä¸ªæ¡£æ¡ˆçš„ç¬¬ n è¡Œã€‚ä¾‹å¦‚ 20G åˆ™ä¼šç§»åŠ¨åˆ°è¿™ä¸ªæ¡£æ¡ˆçš„ç¬¬ 20è¡Œ(å¯é…åˆ :set nu)</td></tr><tr><td>gg</td><td>ç§»åŠ¨åˆ°è¿™ä¸ªæ¡£æ¡ˆçš„ç¬¬ä¸€è¡Œï¼Œç›¸å½“äº 1G å•Šï¼(å¸¸ç”¨)</td></tr><tr><td>æ•°å­—<Enter></Enter></td><td>n ä¸ºæ•°å­—ã€‚å…‰æ ‡å‘ä¸‹ç§»åŠ¨ n è¡Œ(å¸¸ç”¨)</td></tr></tbody></table><table><thead><tr><th>æœç´¢æ›¿æ¢</th><th></th></tr></thead><tbody><tr><td>/word</td><td>å‘å…‰æ ‡ä¹‹ä¸‹å¯»æ‰¾ä¸€ä¸ªåç§°ä¸º word çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚è¦åœ¨æ¡£æ¡ˆå†…æœå¯» vbird è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œå°±è¾“å…¥ /vbird å³å¯ï¼(å¸¸ç”¨)</td></tr><tr><td>?word</td><td>å‘å…‰æ ‡ä¹‹ä¸Šå¯»æ‰¾ä¸€ä¸ªå­—ç¬¦ä¸²åç§°ä¸º word çš„å­—ç¬¦ä¸²ã€‚</td></tr><tr><td>n</td><td>è¿™ä¸ª n æ˜¯è‹±æ–‡æŒ‰é”®ã€‚ä»£è¡¨é‡å¤å‰ä¸€ä¸ªæœå¯»çš„åŠ¨ä½œã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œ å¦‚æœåˆšåˆšæˆ‘ä»¬æ‰§è¡Œ /vbirdå»å‘ä¸‹æœå¯» vbird è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™æŒ‰ä¸‹ n åï¼Œä¼šå‘ä¸‹ç»§ç»­æœå¯»ä¸‹ä¸€ä¸ªåç§°ä¸º vbird çš„å­—ç¬¦ä¸²ã€‚å¦‚æœæ˜¯æ‰§è¡Œ ?vbird çš„è¯ï¼Œé‚£ä¹ˆæŒ‰ä¸‹ n åˆ™ä¼šå‘ä¸Šç»§ç»­æœå¯»åç§°ä¸º vbird çš„å­—ç¬¦ä¸²ï¼</td></tr><tr><td>N</td><td>è¿™ä¸ª N æ˜¯è‹±æ–‡æŒ‰é”®ã€‚ä¸ n åˆšå¥½ç›¸åï¼Œä¸ºã€åå‘ã€è¿›è¡Œå‰ä¸€ä¸ªæœå¯»åŠ¨ä½œã€‚ä¾‹å¦‚ /vbirdåï¼ŒæŒ‰ä¸‹ N åˆ™è¡¨ç¤ºã€å‘ä¸Šã€æœå¯» vbird ã€‚</td></tr></tbody></table><table><thead><tr><th>åˆ é™¤ã€å¤åˆ¶ä¸ç²˜è´´</th><th></th></tr></thead><tbody><tr><td>x,X</td><td>åœ¨ä¸€è¡Œå­—å½“ä¸­ï¼Œx ä¸ºå‘ååˆ é™¤ä¸€ä¸ªå­—ç¬¦ (ç›¸å½“äº [del] æŒ‰é”®)ï¼Œ X ä¸ºå‘å‰åˆ é™¤ä¸€ä¸ªå­—ç¬¦(ç›¸å½“äº [backspace] äº¦å³æ˜¯é€€æ ¼é”®) (å¸¸ç”¨)</td></tr><tr><td>nx</td><td>n ä¸ºæ•°å­—ï¼Œè¿ç»­å‘ååˆ é™¤ n ä¸ªå­—ç¬¦ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘è¦è¿ç»­åˆ é™¤ 10 ä¸ªå­—ç¬¦ï¼Œ ã€10xã€ã€‚</td></tr><tr><td>dd</td><td>åˆ é™¤æ¸¸æ ‡æ‰€åœ¨çš„é‚£ä¸€æ•´è¡Œ(å¸¸ç”¨)</td></tr><tr><td>ndd</td><td>n ä¸ºæ•°å­—ã€‚åˆ é™¤å…‰æ ‡æ‰€åœ¨çš„å‘ä¸‹ n è¡Œï¼Œä¾‹å¦‚ 20dd åˆ™æ˜¯åˆ é™¤ 20 è¡Œ (å¸¸ç”¨)</td></tr><tr><td>d1G</td><td>åˆ é™¤å…‰æ ‡æ‰€åœ¨åˆ°ç¬¬ä¸€è¡Œçš„æ‰€æœ‰æ•°æ®</td></tr><tr><td>dG</td><td>åˆ é™¤å…‰æ ‡æ‰€åœ¨åˆ°æœ€åä¸€è¡Œçš„æ‰€æœ‰æ•°æ®</td></tr><tr><td>d$</td><td>åˆ é™¤æ¸¸æ ‡æ‰€åœ¨å¤„ï¼Œåˆ°è¯¥è¡Œçš„æœ€åä¸€ä¸ªå­—ç¬¦</td></tr><tr><td>d0</td><td>é‚£ä¸ªæ˜¯æ•°å­—çš„ 0 ï¼Œåˆ é™¤æ¸¸æ ‡æ‰€åœ¨å¤„ï¼Œåˆ°è¯¥è¡Œçš„æœ€å‰é¢ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td>yy</td><td>å¤åˆ¶æ¸¸æ ‡æ‰€åœ¨çš„é‚£ä¸€è¡Œ(å¸¸ç”¨)</td></tr><tr><td>nyy</td><td>n ä¸ºæ•°å­—ã€‚å¤åˆ¶å…‰æ ‡æ‰€åœ¨çš„å‘ä¸‹ n è¡Œï¼Œä¾‹å¦‚ 20yy åˆ™æ˜¯å¤åˆ¶ 20 è¡Œ(å¸¸ç”¨)</td></tr><tr><td>y1G</td><td>å¤åˆ¶æ¸¸æ ‡æ‰€åœ¨è¡Œåˆ°ç¬¬ä¸€è¡Œçš„æ‰€æœ‰æ•°æ®</td></tr><tr><td>yG</td><td>å¤åˆ¶æ¸¸æ ‡æ‰€åœ¨è¡Œåˆ°æœ€åä¸€è¡Œçš„æ‰€æœ‰æ•°æ®</td></tr><tr><td>y0</td><td>å¤åˆ¶å…‰æ ‡æ‰€åœ¨çš„é‚£ä¸ªå­—ç¬¦åˆ°è¯¥è¡Œè¡Œé¦–çš„æ‰€æœ‰æ•°æ®</td></tr><tr><td>y$</td><td>å¤åˆ¶å…‰æ ‡æ‰€åœ¨çš„é‚£ä¸ªå­—ç¬¦åˆ°è¯¥è¡Œè¡Œå°¾çš„æ‰€æœ‰æ•°æ®</td></tr><tr><td>p,P</td><td>p ä¸ºå°†å·²å¤åˆ¶çš„æ•°æ®åœ¨å…‰æ ‡ä¸‹ä¸€è¡Œè´´ä¸Šï¼ŒP åˆ™ä¸ºè´´åœ¨æ¸¸æ ‡ä¸Šä¸€è¡Œï¼ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ç›®å‰å…‰æ ‡åœ¨ç¬¬ 20 è¡Œï¼Œä¸”å·²ç»å¤åˆ¶äº† 10 è¡Œæ•°æ®ã€‚åˆ™æŒ‰ä¸‹ p åï¼Œ é‚£ 10 è¡Œæ•°æ®ä¼šè´´åœ¨åŸæœ¬çš„ 20è¡Œä¹‹åï¼Œäº¦å³ç”± 21 è¡Œå¼€å§‹è´´ã€‚ä½†å¦‚æœæ˜¯æŒ‰ä¸‹ P å‘¢ï¼Ÿé‚£ä¹ˆåŸæœ¬çš„ç¬¬ 20 è¡Œä¼šè¢«æ¨åˆ°å˜æˆ30 è¡Œã€‚(å¸¸ç”¨)</td></tr><tr><td>J</td><td>å°†å…‰æ ‡æ‰€åœ¨è¡Œä¸ä¸‹ä¸€è¡Œçš„æ•°æ®ç»“åˆæˆåŒä¸€è¡Œ</td></tr><tr><td>c</td><td>é‡å¤åˆ é™¤å¤šä¸ªæ•°æ®ï¼Œä¾‹å¦‚å‘ä¸‹åˆ é™¤ 10 è¡Œï¼Œ[ 10cj ]</td></tr><tr><td>u</td><td>å¤åŸå‰ä¸€ä¸ªåŠ¨ä½œã€‚(å¸¸ç”¨)</td></tr><tr><td>[ctrl]+r</td><td>é‡åšä¸Šä¸€ä¸ªåŠ¨ä½œã€‚(å¸¸ç”¨)</td></tr></tbody></table><p><strong>ç¬¬äºŒéƒ¨åˆ†ï¼šä¸€èˆ¬æ¨¡å¼åˆ‡æ¢åˆ°ç¼–è¾‘æ¨¡å¼çš„å¯ç”¨æŒ‰é’®è¯´æ˜</strong></p><table><thead><tr><th>è¿›å…¥è¾“å…¥æˆ–å–ä»£çš„ç¼–è¾‘æ¨¡å¼</th><th></th></tr></thead><tbody><tr><td>i,I</td><td>è¿›å…¥è¾“å…¥æ¨¡å¼(Insert mode)ï¼ši ä¸ºã€ä»ç›®å‰å…‰æ ‡æ‰€åœ¨å¤„è¾“å…¥ã€ï¼Œ I ä¸ºã€åœ¨ç›®å‰æ‰€åœ¨è¡Œçš„ç¬¬ä¸€ä¸ªéç©ºæ ¼ç¬¦å¤„å¼€å§‹è¾“å…¥ã€ã€‚(å¸¸ç”¨)</td></tr><tr><td>a,A</td><td>è¿›å…¥è¾“å…¥æ¨¡å¼(Insert mode)ï¼ša ä¸ºã€ä»ç›®å‰å…‰æ ‡æ‰€åœ¨çš„ä¸‹ä¸€ä¸ªå­—ç¬¦å¤„å¼€å§‹è¾“å…¥ã€ï¼ŒA ä¸ºã€ä»å…‰æ ‡æ‰€åœ¨è¡Œçš„æœ€åä¸€ä¸ªå­—ç¬¦å¤„å¼€å§‹è¾“å…¥ã€ã€‚(å¸¸ç”¨)</td></tr><tr><td>o,O</td><td>è¿›å…¥è¾“å…¥æ¨¡å¼(Insert mode)ï¼šè¿™æ˜¯è‹±æ–‡å­—æ¯ o çš„å¤§å°å†™ã€‚o ä¸ºã€åœ¨ç›®å‰å…‰æ ‡æ‰€åœ¨çš„ä¸‹ä¸€è¡Œå¤„è¾“å…¥æ–°çš„ä¸€è¡Œã€ï¼›O ä¸ºåœ¨ç›®å‰å…‰æ ‡æ‰€åœ¨å¤„çš„ä¸Šä¸€è¡Œè¾“å…¥æ–°çš„ä¸€è¡Œï¼(å¸¸ç”¨)</td></tr><tr><td>r,R</td><td>è¿›å…¥å–ä»£æ¨¡å¼(Replace mode)ï¼šr åªä¼šå–ä»£å…‰æ ‡æ‰€åœ¨çš„é‚£ä¸€ä¸ªå­—ç¬¦ä¸€æ¬¡ï¼›Rä¼šä¸€ç›´å–ä»£å…‰æ ‡æ‰€åœ¨çš„æ–‡å­—ï¼Œç›´åˆ°æŒ‰ä¸‹ ESC ä¸ºæ­¢ï¼›(å¸¸ç”¨)</td></tr><tr><td>[Esc]</td><td>é€€å‡ºç¼–è¾‘æ¨¡å¼ï¼Œå›åˆ°ä¸€èˆ¬æ¨¡å¼ä¸­(å¸¸ç”¨)</td></tr></tbody></table><p><strong>ç¬¬ä¸‰éƒ¨åˆ†ï¼šä¸€èˆ¬æ¨¡å¼åˆ‡æ¢åˆ°æŒ‡ä»¤è¡Œæ¨¡å¼çš„å¯ç”¨æŒ‰é’®è¯´æ˜</strong></p><table><thead><tr><th>æŒ‡ä»¤è¡Œçš„å­˜å‚¨ã€ç¦»å¼€ç­‰æŒ‡ä»¤</th><th></th></tr></thead><tbody><tr><td>:w</td><td>å°†ç¼–è¾‘çš„æ•°æ®å†™å…¥ç¡¬ç›˜æ¡£æ¡ˆä¸­(å¸¸ç”¨)</td></tr><tr><td>:w!</td><td>è‹¥æ–‡ä»¶å±æ€§ä¸ºã€åªè¯»ã€æ—¶ï¼Œå¼ºåˆ¶å†™å…¥è¯¥æ¡£æ¡ˆã€‚ä¸è¿‡ï¼Œåˆ°åº•èƒ½ä¸èƒ½å†™å…¥ï¼Œ è¿˜æ˜¯è·Ÿä½ å¯¹è¯¥æ¡£æ¡ˆçš„æ¡£æ¡ˆæƒé™æœ‰å…³å•Šï¼</td></tr><tr><td>:q</td><td>ç¦»å¼€ vi (å¸¸ç”¨)</td></tr><tr><td>:q!</td><td>è‹¥æ›¾ä¿®æ”¹è¿‡æ¡£æ¡ˆï¼Œåˆä¸æƒ³å‚¨å­˜ï¼Œä½¿ç”¨ ! ä¸ºå¼ºåˆ¶ç¦»å¼€ä¸å‚¨å­˜æ¡£æ¡ˆã€‚</td></tr><tr><td>:wq</td><td>å‚¨å­˜åç¦»å¼€ï¼Œè‹¥ä¸º :wq! åˆ™ä¸ºå¼ºåˆ¶å‚¨å­˜åç¦»å¼€ (å¸¸ç”¨)</td></tr><tr><td>ZZ</td><td>è¿™æ˜¯å¤§å†™çš„ Z å–”ï¼è‹¥æ¡£æ¡ˆæ²¡æœ‰æ›´åŠ¨ï¼Œåˆ™ä¸å‚¨å­˜ç¦»å¼€ï¼Œè‹¥æ¡£æ¡ˆå·²ç»è¢«æ›´åŠ¨è¿‡ï¼Œåˆ™å‚¨å­˜åç¦»å¼€ï¼</td></tr><tr><td>:w [filename]</td><td>å°†ç¼–è¾‘çš„æ•°æ®å‚¨å­˜æˆå¦ä¸€ä¸ªæ¡£æ¡ˆï¼ˆç±»ä¼¼å¦å­˜æ–°æ¡£ï¼‰</td></tr><tr><td>:r [filename]</td><td>åœ¨ç¼–è¾‘çš„æ•°æ®ä¸­ï¼Œè¯»å…¥å¦ä¸€ä¸ªæ¡£æ¡ˆçš„æ•°æ®ã€‚äº¦å³å°†ã€filenameã€ è¿™ä¸ªæ¡£æ¡ˆå†…å®¹åŠ åˆ°æ¸¸æ ‡æ‰€åœ¨è¡Œåé¢</td></tr><tr><td>:n1,n2 w [filename]</td><td>å°† n1 åˆ° n2 çš„å†…å®¹å‚¨å­˜æˆ filename è¿™ä¸ªæ¡£æ¡ˆã€‚</td></tr><tr><td>:! command</td><td>æš‚æ—¶ç¦»å¼€ vi åˆ°æŒ‡ä»¤è¡Œæ¨¡å¼ä¸‹æ‰§è¡Œ command çš„æ˜¾ç¤ºç»“æœï¼ä¾‹å¦‚ã€:! ls /homeã€å³å¯åœ¨ vi å½“ä¸­çœ‹ /home åº•ä¸‹ä»¥ ls è¾“å‡ºçš„æ¡£æ¡ˆä¿¡æ¯ï¼</td></tr><tr><td>:set nu è®¾ç½®è¡Œå·ï¼Œä»£ç ä¸­ç»å¸¸ä¼šä½¿ç”¨ï¼</td><td>æ˜¾ç¤ºè¡Œå·ï¼Œè®¾å®šä¹‹åï¼Œä¼šåœ¨æ¯ä¸€è¡Œçš„å‰ç¼€æ˜¾ç¤ºè¯¥è¡Œçš„è¡Œå·</td></tr><tr><td>:set nonu</td><td>ä¸ set nu ç›¸åï¼Œä¸ºå–æ¶ˆè¡Œå·ï¼</td></tr></tbody></table><h3 id="è´¦å·ç®¡ç†"><a href="#è´¦å·ç®¡ç†" class="headerlink" title="è´¦å·ç®¡ç†"></a>è´¦å·ç®¡ç†</h3><p>åœ¨å…¬å¸ä¸­ï¼Œæˆ‘ä»¬ç”¨çš„ä¸€èˆ¬ä¸æ˜¯rootè´¦æˆ·ã€‚</p><blockquote><p>ç®€ä»‹</p></blockquote><p>Linuxç³»ç»Ÿæ˜¯ä¸€ä¸ªå¤šç”¨æˆ·å¤šä»»åŠ¡çš„åˆ†æ—¶æ“ä½œç³»ç»Ÿï¼Œä»»ä½•ä¸€ä¸ªè¦ä½¿ç”¨ç³»ç»Ÿèµ„æºçš„ç”¨æˆ·ï¼Œéƒ½å¿…é¡»é¦–å…ˆå‘ç³»ç»Ÿç®¡ç†å‘˜ç”³è¯·ä¸€ä¸ªè´¦å·ï¼Œç„¶åä»¥è¿™ä¸ªè´¦å·çš„èº«ä»½è¿›å…¥ç³»ç»Ÿã€‚</p><p>ç”¨æˆ·çš„è´¦å·ä¸€æ–¹é¢å¯ä»¥å¸®åŠ©ç³»ç»Ÿç®¡ç†å‘˜å¯¹ä½¿ç”¨ç³»ç»Ÿçš„ç”¨æˆ·è¿›è¡Œè·Ÿè¸ªï¼Œå¹¶æ§åˆ¶ä»–ä»¬å¯¹ç³»ç»Ÿèµ„æºçš„è®¿é—®ï¼›å¦ä¸€æ–¹é¢ä¹Ÿå¯ä»¥å¸®åŠ©ç”¨æˆ·ç»„ç»‡æ–‡ä»¶ï¼Œå¹¶ä¸ºç”¨æˆ·æä¾›å®‰å…¨æ€§ä¿æŠ¤ã€‚</p><p>æ¯ä¸ªç”¨æˆ·è´¦å·éƒ½æ‹¥æœ‰ä¸€ä¸ªå”¯ä¸€çš„ç”¨æˆ·åå’Œå„è‡ªçš„å£ä»¤ã€‚</p><p>ç”¨æˆ·åœ¨ç™»å½•æ—¶é”®å…¥æ­£ç¡®çš„ç”¨æˆ·åå’Œå£ä»¤åï¼Œå°±èƒ½å¤Ÿè¿›å…¥ç³»ç»Ÿå’Œè‡ªå·±çš„ä¸»ç›®å½•ã€‚</p><p>å®ç°ç”¨æˆ·è´¦å·çš„ç®¡ç†ï¼Œè¦å®Œæˆçš„å·¥ä½œä¸»è¦æœ‰å¦‚ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ul><li>ç”¨æˆ·è´¦å·çš„æ·»åŠ ã€åˆ é™¤ä¸ä¿®æ”¹ã€‚</li><li>ç”¨æˆ·å£ä»¤çš„ç®¡ç†ã€‚</li><li>ç”¨æˆ·ç»„çš„ç®¡ç†ã€‚</li></ul><blockquote><p>ç”¨æˆ·è´¦å·çš„ç®¡ç†</p></blockquote><p>ç”¨æˆ·è´¦å·çš„ç®¡ç†å·¥ä½œä¸»è¦æ¶‰åŠåˆ°ç”¨æˆ·è´¦å·çš„æ·»åŠ ã€ä¿®æ”¹å’Œåˆ é™¤ã€‚</p><p>æ·»åŠ ç”¨æˆ·è´¦å·å°±æ˜¯åœ¨ç³»ç»Ÿä¸­åˆ›å»ºä¸€ä¸ªæ–°è´¦å·ï¼Œç„¶åä¸ºæ–°è´¦å·åˆ†é…ç”¨æˆ·å·ã€ç”¨æˆ·ç»„ã€ä¸»ç›®å½•å’Œç™»å½•Shellç­‰èµ„æºã€‚</p><p>å±ä¸»ï¼Œå±ç»„ã€‚</p><blockquote><p>useraddï¼šæ·»åŠ ç”¨æˆ·</p></blockquote><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">useradd</span> -é€‰é¡¹ ç”¨æˆ·å<br></code></pre></td></tr></table></figure><p>é€‰é¡¹ï¼š</p><ul><li>-c comment æŒ‡å®šä¸€æ®µæ³¨é‡Šæ€§æè¿°ã€‚</li><li>-d ç›®å½• æŒ‡å®šç”¨æˆ·ä¸»ç›®å½•ï¼Œå¦‚æœæ­¤ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™åŒæ—¶ä½¿ç”¨-mé€‰é¡¹ï¼Œå¯ä»¥åˆ›å»ºä¸»ç›®å½•ã€‚</li><li>-g ç”¨æˆ·ç»„ æŒ‡å®šç”¨æˆ·æ‰€å±çš„ç”¨æˆ·ç»„ã€‚</li><li>-G ç”¨æˆ·ç»„ï¼Œç”¨æˆ·ç»„ æŒ‡å®šç”¨æˆ·æ‰€å±çš„é™„åŠ ç»„ã€‚</li><li>-mã€€ä½¿ç”¨è€…ç›®å½•å¦‚ä¸å­˜åœ¨åˆ™è‡ªåŠ¨å»ºç«‹ã€‚</li><li>-s Shellæ–‡ä»¶ æŒ‡å®šç”¨æˆ·çš„ç™»å½•Shellã€‚</li><li>-u ç”¨æˆ·å· æŒ‡å®šç”¨æˆ·çš„ç”¨æˆ·å·ï¼Œå¦‚æœåŒæ—¶æœ‰-oé€‰é¡¹ï¼Œåˆ™å¯ä»¥é‡å¤ä½¿ç”¨å…¶ä»–ç”¨æˆ·çš„æ ‡è¯†å·</li></ul><p>ç”¨æˆ·åï¼š</p><ul><li>æŒ‡å®šæ–°è´¦å·çš„ç™»å½•åã€‚</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z home]# useradd -m qiaowei<br>[root@iZ2zeh7ydg2bbydds175q0Z home]# ls<br>AtroxQW  environment  img  qiaowei  redis  www<br></code></pre></td></tr></table></figure><p>ç†è§£ä¸€ä¸‹æœ¬è´¨ï¼šLinuxä¸­ä¸€åˆ‡çš†æ–‡ä»¶ï¼Œè¿™é‡Œçš„æ·»åŠ ç”¨æˆ·è¯´ç™½äº†å°±æ˜¯å¾€æŸä¸€ä¸ªæ–‡ä»¶ä¸­å†™å…¥ç”¨æˆ·çš„ä¿¡æ¯äº†ï¼è¿™ä¸ªä¿¡æ¯æˆ‘ä»¬å¯ä»¥åœ¨<code>/etc/passwd</code>ä¸­çœ‹åˆ°ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z etc]# cat passwd<br>root:x:0:0:root:/root:/bin/bash<br>bin:x:1:1:bin:/bin:/sbin/nologin<br>daemon:x:2:2:daemon:/sbin:/sbin/nologin<br>adm:x:3:4:adm:/var/adm:/sbin/nologin<br>lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin<br>sync:x:5:0:sync:/sbin:/bin/sync<br>shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown<br>halt:x:7:0:halt:/sbin:/sbin/halt<br>mail:x:8:12:mail:/var/spool/mail:/sbin/nologin<br>operator:x:11:0:operator:/root:/sbin/nologin<br>games:x:12:100:games:/usr/games:/sbin/nologin<br>ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin<br>nobody:x:65534:65534:Kernel Overflow User:/:/sbin/nologin<br>dbus:x:81:81:System message bus:/:/sbin/nologin<br>systemd-coredump:x:999:997:systemd Core Dumper:/:/sbin/nologin<br>systemd-resolve:x:193:193:systemd Resolver:/:/sbin/nologin<br>tss:x:59:59:Account used by the trousers package to sandbox the tcsd daemon:/dev/null:/sbin/nologin<br>polkitd:x:998:996:User for polkitd:/:/sbin/nologin<br>unbound:x:997:994:Unbound DNS resolver:/etc/unbound:/sbin/nologin<br>libstoragemgmt:x:996:993:daemon account for libstoragemgmt:/var/run/lsm:/sbin/nologin<br>cockpit-ws:x:995:991:User for cockpit-ws:/:/sbin/nologin<br>setroubleshoot:x:994:990::/var/lib/setroubleshoot:/sbin/nologin<br>sssd:x:993:989:User for sssd:/:/sbin/nologin<br>insights:x:992:988:Red Hat Insights:/var/lib/insights:/sbin/nologin<br>sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin<br>chrony:x:991:987::/var/lib/chrony:/sbin/nologin<br>tcpdump:x:72:72::/:/sbin/nologin<br>nscd:x:28:28:NSCD Daemon:/:/sbin/nologin<br>exim:x:93:93::/var/spool/exim:/sbin/nologin<br>postfix:x:89:89::/var/spool/postfix:/sbin/nologin<br>www:x:1000:1000::/home/www:/sbin/nologin<br>mysql:x:1001:1001::/home/mysql:/sbin/nologin<br>rngd:x:990:986:Random Number Generator Daemon:/var/lib/rngd:/sbin/nologin<br>redis:x:1002:1002::/home/redis:/sbin/nologin<br>qiaowei:x:1003:1003::/home/qiaowei:/bin/bash<br></code></pre></td></tr></table></figure><p>æœ€åä¸€è¡Œï¼Œå°±æ˜¯æˆ‘ä»¬åˆšæ‰åˆ›å»ºçš„ç”¨æˆ·ä¿¡æ¯</p><blockquote><p>usermodï¼šä¿®æ”¹ç”¨æˆ·</p></blockquote><p>ä¿®æ”¹ç”¨æˆ·è´¦å·å°±æ˜¯æ ¹æ®å®é™…æƒ…å†µæ›´æ”¹ç”¨æˆ·çš„æœ‰å…³å±æ€§ï¼Œå¦‚ç”¨æˆ·å·ã€ä¸»ç›®å½•ã€ç”¨æˆ·ç»„ã€ç™»å½•Shellç­‰ã€‚</p><p>ä¿®æ”¹å·²æœ‰ç”¨æˆ·çš„ä¿¡æ¯ä½¿ç”¨usermodå‘½ä»¤ï¼Œå…¶æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">usermod é€‰é¡¹ ç”¨æˆ·å<br></code></pre></td></tr></table></figure><p>å¸¸ç”¨çš„é€‰é¡¹åŒ…æ‹¬-c, -d, -m, -g, -G, -s, -uä»¥åŠ-oç­‰ï¼Œè¿™äº›é€‰é¡¹çš„æ„ä¹‰ä¸useraddå‘½ä»¤ä¸­çš„é€‰é¡¹ä¸€æ ·ï¼Œå¯ä»¥ä¸ºç”¨æˆ·æŒ‡å®šæ–°çš„èµ„æºå€¼ã€‚</p><p>ä¾‹å¦‚ï¼šä¿®æ”¹qiaoweiç”¨æˆ·çš„ä¸»ç›®å½•ä¸º<code>/home/z</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z /]# usermod -d /home/z qiaowei<br></code></pre></td></tr></table></figure><p>æŸ¥è¯¢<code>/etc/passwd</code>ï¼Œå‘ç°æœ€åä¸€è¡Œçš„qiaoweiç”¨æˆ·ä¿¡æ¯ä¸»ç›®å½•å·²ç»æ”¹å˜ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">qiaowei:x:1003:1003::/home/z:/bin/bash<br></code></pre></td></tr></table></figure><blockquote><p>suï¼šåˆ‡æ¢ç”¨æˆ·</p></blockquote><ol><li><p>ä»rootåˆ‡æ¢æ™®é€šç”¨æˆ·çš„å‘½ä»¤ä¸ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z /]# su qiaowei<br>[qiaowei@iZ2zeh7ydg2bbydds175q0Z /]$ <br></code></pre></td></tr></table></figure></li><li><p>ä»æ™®é€šç”¨æˆ·åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼šexitæˆ–sudo su</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">[qiaowei@iZ2zeh7ydg2bbydds175q0Z /]$ exit<br>exit<br>[root@iZ2zeh7ydg2bbydds175q0Z /]# <br></code></pre></td></tr></table></figure></li><li><p>åœ¨ç»ˆç«¯è¾“å…¥exitæˆ–logoutæˆ–ä½¿ç”¨å¿«æ·æ–¹å¼ctrl+dï¼Œå¯ä»¥é€€å›åˆ°åŸæ¥ç”¨æˆ·ï¼Œå…¶å®ctrl+dä¹Ÿæ˜¯æ‰§è¡Œçš„exitå‘½ä»¤ã€‚</p></li><li><p>åœ¨åˆ‡æ¢ç”¨æˆ·æ—¶ï¼Œå¦‚æœæƒ³åœ¨åˆ‡æ¢ç”¨æˆ·ä¹‹åä½¿ç”¨æ–°ç”¨æˆ·çš„å·¥ä½œç¯å¢ƒï¼Œå¯ä»¥åœ¨suå’Œusernameä¹‹é—´åŠ -ï¼Œä¾‹å¦‚ï¼šã€su - rootã€‘</p></li><li><p>$è¡¨ç¤ºæ™®é€šç”¨æˆ·ï¼›#è¡¨ç¤ºè¶…çº§ç”¨æˆ·ï¼Œä¹Ÿå°±æ˜¯rootç”¨æˆ·</p></li></ol><blockquote><p>userdelï¼šåˆ é™¤ç”¨æˆ·</p></blockquote><p>å¦‚æœä¸€ä¸ªç”¨æˆ·çš„è´¦å·ä¸å†ä½¿ç”¨ï¼Œå¯ä»¥ä»ç³»ç»Ÿä¸­åˆ é™¤ã€‚</p><p>åˆ é™¤ç”¨æˆ·è´¦å·å°±æ˜¯è¦å°†/etc/passwdç­‰ç³»ç»Ÿæ–‡ä»¶ä¸­çš„è¯¥ç”¨æˆ·è®°å½•åˆ é™¤ï¼Œå¿…è¦æ—¶è¿˜åˆ é™¤ç”¨æˆ·çš„ä¸»ç›®å½•ã€‚</p><p>åˆ é™¤ä¸€ä¸ªå·²æœ‰çš„ç”¨æˆ·è´¦å·ä½¿ç”¨userdelå‘½ä»¤ï¼Œå…¶æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> userdel é€‰é¡¹ ç”¨æˆ·å</span><br></code></pre></td></tr></table></figure><p>å¸¸ç”¨çš„é€‰é¡¹æ˜¯ <strong>-r</strong>ï¼Œå®ƒçš„ä½œç”¨æ˜¯æŠŠç”¨æˆ·çš„ä¸»ç›®å½•ä¸€èµ·åˆ é™¤ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z /]# userdel -r qiaowei<br></code></pre></td></tr></table></figure><p>æ­¤å‘½ä»¤åˆ é™¤ç”¨æˆ·kuangshenåœ¨ç³»ç»Ÿæ–‡ä»¶ä¸­ï¼ˆä¸»è¦æ˜¯/etc/passwd, /etc/shadow, /etc/groupç­‰ï¼‰çš„è®°å½•ï¼ŒåŒæ—¶åˆ é™¤ç”¨æˆ·çš„ä¸»ç›®å½•ã€‚</p><blockquote><p>passwdï¼šç”¨æˆ·å¯†ç ç®¡ç†</p></blockquote><p>ç”¨æˆ·ç®¡ç†çš„ä¸€é¡¹é‡è¦å†…å®¹æ˜¯ç”¨æˆ·å£ä»¤çš„ç®¡ç†ã€‚ç”¨æˆ·è´¦å·åˆšåˆ›å»ºæ—¶æ²¡æœ‰å£ä»¤ï¼Œä½†æ˜¯è¢«ç³»ç»Ÿé”å®šï¼Œæ— æ³•ä½¿ç”¨ï¼Œå¿…é¡»ä¸ºå…¶æŒ‡å®šå£ä»¤åæ‰å¯ä»¥ä½¿ç”¨ï¼Œå³ä½¿æ˜¯æŒ‡å®šç©ºå£ä»¤ã€‚</p><p>æŒ‡å®šå’Œä¿®æ”¹ç”¨æˆ·å£ä»¤çš„Shellå‘½ä»¤æ˜¯passwdã€‚è¶…çº§ç”¨æˆ·å¯ä»¥ä¸ºè‡ªå·±å’Œå…¶ä»–ç”¨æˆ·æŒ‡å®šå£ä»¤ï¼Œæ™®é€šç”¨æˆ·åªèƒ½ç”¨å®ƒä¿®æ”¹è‡ªå·±çš„å£ä»¤ã€‚</p><p>å‘½ä»¤çš„æ ¼å¼ä¸ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> passwd é€‰é¡¹ ç”¨æˆ·å</span><br></code></pre></td></tr></table></figure><p>å¯ä½¿ç”¨çš„é€‰é¡¹ï¼š</p><ul><li>-l é”å®šå£ä»¤ï¼Œå³ç¦ç”¨è´¦å·ã€‚</li><li>-u å£ä»¤è§£é”ã€‚</li><li>-d ä½¿è´¦å·æ— å£ä»¤ã€‚</li><li>-f å¼ºè¿«ç”¨æˆ·ä¸‹æ¬¡ç™»å½•æ—¶ä¿®æ”¹å£ä»¤ã€‚</li></ul><p>å¦‚æœé»˜è®¤ç”¨æˆ·åï¼Œåˆ™ä¿®æ”¹å½“å‰ç”¨æˆ·çš„å£ä»¤ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœå½“å‰ç”¨æˆ·æ˜¯qiaoweiï¼Œåˆ™ä¸‹é¢çš„å‘½ä»¤ä¿®æ”¹è¯¥ç”¨æˆ·è‡ªå·±çš„å£ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> $ passwd</span><br>Old password:******<br>New password:*******<br>Re-enter new password:*******<br></code></pre></td></tr></table></figure><p>å¦‚æœæ˜¯è¶…çº§ç”¨æˆ·ï¼Œå¯ä»¥ç”¨ä¸‹åˆ—å½¢å¼æŒ‡å®šä»»ä½•ç”¨æˆ·çš„å£ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> passwd qiaowei</span><br>New password:*******<br>Re-enter new password:*******<br></code></pre></td></tr></table></figure><p>æ™®é€šç”¨æˆ·ä¿®æ”¹è‡ªå·±çš„å£ä»¤æ—¶ï¼Œpasswdå‘½ä»¤ä¼šå…ˆè¯¢é—®åŸå£ä»¤ï¼ŒéªŒè¯åå†è¦æ±‚ç”¨æˆ·è¾“å…¥ä¸¤éæ–°å£ä»¤ï¼Œå¦‚æœä¸¤æ¬¡è¾“å…¥çš„å£ä»¤ä¸€è‡´ï¼Œåˆ™å°†è¿™ä¸ªå£ä»¤æŒ‡å®šç»™ç”¨æˆ·ï¼›è€Œè¶…çº§ç”¨æˆ·ä¸ºç”¨æˆ·æŒ‡å®šå£ä»¤æ—¶ï¼Œå°±ä¸éœ€è¦çŸ¥é“åŸå£ä»¤ã€‚</p><blockquote><p>å†»ç»“é”å®šè´¦æˆ·</p></blockquote><p>rootï¼Œæ¯”å¦‚qiaoweiè¾èŒäº†ï¼Œå†»ç»“è¿™ä¸ªè´¦å·ï¼Œä¸€æ—¦å†»ç»“ï¼Œè¿™ä¸ªäººå°±ç™»ä¸ä¸Šç³»ç»Ÿäº†ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> passwd -l qiaowei</span> <br><span class="hljs-meta">#</span><span class="bash"> passwd -d qiaowei</span><br></code></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªå‘½ä»¤ä¸ºç”¨ -l(lock) é€‰é¡¹é”å®šæŸä¸€ç”¨æˆ·ï¼Œä½¿å…¶ä¸èƒ½ç™»å½•ã€‚</p><p>ç¬¬äºŒä¸ªå‘½ä»¤ä¸ºå°†ç”¨æˆ·çš„å£ä»¤åˆ é™¤ï¼Œè¿™æ ·ç”¨æˆ·ä¸‹ä¸€æ¬¡ç™»å½•æ—¶ï¼Œç³»ç»Ÿå°±ä¸å†å…è®¸è¯¥ç”¨æˆ·ç™»å½•äº†ã€‚</p><h3 id="ç”¨æˆ·ç»„ç®¡ç†"><a href="#ç”¨æˆ·ç»„ç®¡ç†" class="headerlink" title="ç”¨æˆ·ç»„ç®¡ç†"></a>ç”¨æˆ·ç»„ç®¡ç†</h3><p>æ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªç”¨æˆ·ç»„ï¼Œç³»ç»Ÿå¯ä»¥å¯¹ä¸€ä¸ªç”¨æˆ·ç»„ä¸­çš„æ‰€æœ‰ç”¨æˆ·è¿›è¡Œé›†ä¸­ç®¡ç†ã€‚ä¸åŒLinux ç³»ç»Ÿå¯¹ç”¨æˆ·ç»„çš„è§„å®šæœ‰æ‰€ä¸åŒï¼Œå¦‚Linuxä¸‹çš„ç”¨æˆ·å±äºä¸å®ƒåŒåçš„ç”¨æˆ·ç»„ï¼Œè¿™ä¸ªç”¨æˆ·ç»„åœ¨åˆ›å»ºç”¨æˆ·æ—¶åŒæ—¶åˆ›å»ºã€‚</p><p>ç”¨æˆ·ç»„çš„ç®¡ç†æ¶‰åŠç”¨æˆ·ç»„çš„æ·»åŠ ã€åˆ é™¤å’Œä¿®æ”¹ã€‚ç»„çš„å¢åŠ ã€åˆ é™¤å’Œä¿®æ”¹å®é™…ä¸Šå°±æ˜¯å¯¹<code>/etc/group</code>æ–‡ä»¶çš„æ›´æ–°ã€‚</p><blockquote><p>groupaddï¼šæ·»åŠ æ–°çš„ç”¨æˆ·ç»„</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">groupadd é€‰é¡¹ ç”¨æˆ·ç»„<br></code></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨çš„é€‰é¡¹æœ‰ï¼š</p><ul><li>-g GID æŒ‡å®šæ–°ç”¨æˆ·ç»„çš„ç»„æ ‡è¯†å·ï¼ˆGIDï¼‰ã€‚</li><li>-o ä¸€èˆ¬ä¸-gé€‰é¡¹åŒæ—¶ä½¿ç”¨ï¼Œè¡¨ç¤ºæ–°ç”¨æˆ·ç»„çš„GIDå¯ä»¥ä¸ç³»ç»Ÿå·²æœ‰ç”¨æˆ·ç»„çš„GIDç›¸åŒã€‚</li></ul><ul><li><p>åˆ›å»ºå¼€å‘ç”¨æˆ·ç»„(develop)ç»„çš„IDå·æ˜¯520</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z /]# groupadd -g 520 develop<br></code></pre></td></tr></table></figure><p>å»<code>/etc/group</code>æ–‡ä»¶ä¸­æŸ¥çœ‹åˆšåˆšåˆ›å»ºçš„ç”¨æˆ·ç»„ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z /]# cat /etc/group<br>develop:x:520:<br></code></pre></td></tr></table></figure></li></ul><blockquote><p>groupmodï¼šä¿®æ”¹ç”¨æˆ·ç»„çš„å±æ€§</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">groupmod é€‰é¡¹ ç”¨æˆ·ç»„<br></code></pre></td></tr></table></figure><p>å¸¸ç”¨çš„é€‰é¡¹æœ‰ï¼š</p><ul><li>-g GID ä¸ºç”¨æˆ·ç»„æŒ‡å®šæ–°çš„ç»„æ ‡è¯†å·ã€‚</li><li>-o ä¸-gé€‰é¡¹åŒæ—¶ä½¿ç”¨ï¼Œç”¨æˆ·ç»„çš„æ–°GIDå¯ä»¥ä¸ç³»ç»Ÿå·²æœ‰ç”¨æˆ·ç»„çš„GIDç›¸åŒã€‚</li><li>-næ–°ç”¨æˆ·ç»„ å°†ç”¨æˆ·ç»„çš„åå­—æ”¹ä¸ºæ–°åå­—</li></ul><p>æ¯”å¦‚ï¼Œå°†ä¸Šé¢åˆ›å»ºçš„<code>develop</code>ç”¨æˆ·ç»„æ ‡è¯†å·æ”¹ä¸º666ï¼Œç»„åæ”¹ä¸º<code>operation</code>è¿ç»´ç»„ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z /]# groupmod -g 666 -n operation develop<br></code></pre></td></tr></table></figure><p>å»<code>/etc/group</code>æ–‡ä»¶ä¸­æŸ¥çœ‹åˆšåˆšä¿®æ”¹çš„ç”¨æˆ·ç»„ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">operation:x:666:<br></code></pre></td></tr></table></figure><blockquote><p>newgrpï¼šç”¨æˆ·åˆ‡æ¢ç”¨æˆ·ç»„</p></blockquote><p>å°†å½“å‰<code>qiaowei</code>ç”¨æˆ·ä»å½“å‰ç”¨æˆ·ç»„åˆ‡æ¢åˆ°<code>operation</code>ç”¨æˆ·ç»„</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> newgrp operation</span><br></code></pre></td></tr></table></figure><blockquote><p>groupdelï¼šåˆ é™¤ç”¨æˆ·ç»„</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> groupdel operation</span><br></code></pre></td></tr></table></figure><blockquote><p>/etc/passwd</p></blockquote><p>å®Œæˆç”¨æˆ·ç®¡ç†çš„å·¥ä½œæœ‰è®¸å¤šç§æ–¹æ³•ï¼Œä½†æ˜¯æ¯ä¸€ç§æ–¹æ³•å®é™…ä¸Šéƒ½æ˜¯å¯¹æœ‰å…³çš„ç³»ç»Ÿæ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€‚</p><p>ä¸ç”¨æˆ·å’Œç”¨æˆ·ç»„ç›¸å…³çš„ä¿¡æ¯éƒ½å­˜æ”¾åœ¨ä¸€äº›ç³»ç»Ÿæ–‡ä»¶ä¸­ï¼Œè¿™äº›æ–‡ä»¶åŒ…æ‹¬/etc/passwd, /etc/shadow, /etc/groupç­‰ã€‚</p><p>ä¸‹é¢åˆ†åˆ«ä»‹ç»è¿™äº›æ–‡ä»¶çš„å†…å®¹ã€‚</p><p><strong>/etc/passwdæ–‡ä»¶æ˜¯ç”¨æˆ·ç®¡ç†å·¥ä½œæ¶‰åŠçš„æœ€é‡è¦çš„ä¸€ä¸ªæ–‡ä»¶ã€‚</strong></p><p>Linuxç³»ç»Ÿä¸­çš„æ¯ä¸ªç”¨æˆ·éƒ½åœ¨/etc/passwdæ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªå¯¹åº”çš„è®°å½•è¡Œï¼Œå®ƒè®°å½•äº†è¿™ä¸ªç”¨æˆ·çš„ä¸€äº›åŸºæœ¬å±æ€§ã€‚</p><p>è¿™ä¸ªæ–‡ä»¶å¯¹æ‰€æœ‰ç”¨æˆ·éƒ½æ˜¯å¯è¯»çš„ã€‚å®ƒçš„å†…å®¹ç±»ä¼¼ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs groovy">ï¼ƒ cat <span class="hljs-regexp">/etc/</span>passwd<br><br><span class="hljs-attr">root:</span><span class="hljs-attr">x:</span><span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-attr">Superuser:</span>/:<br><span class="hljs-attr">daemon:</span><span class="hljs-attr">x:</span><span class="hljs-number">1</span>:<span class="hljs-number">1</span>:System <span class="hljs-attr">daemons:</span>/<span class="hljs-attr">etc:</span><br><span class="hljs-attr">bin:</span><span class="hljs-attr">x:</span><span class="hljs-number">2</span>:<span class="hljs-number">2</span>:Owner of system <span class="hljs-attr">commands:</span>/<span class="hljs-attr">bin:</span><br><span class="hljs-attr">sys:</span><span class="hljs-attr">x:</span><span class="hljs-number">3</span>:<span class="hljs-number">3</span>:Owner of system <span class="hljs-attr">files:</span><span class="hljs-regexp">/usr/</span><span class="hljs-attr">sys:</span><br><span class="hljs-attr">adm:</span><span class="hljs-attr">x:</span><span class="hljs-number">4</span>:<span class="hljs-number">4</span>:System <span class="hljs-attr">accounting:</span><span class="hljs-regexp">/usr/</span><span class="hljs-attr">adm:</span><br><span class="hljs-attr">uucp:</span><span class="hljs-attr">x:</span><span class="hljs-number">5</span>:<span class="hljs-number">5</span>:UUCP <span class="hljs-attr">administrator:</span><span class="hljs-regexp">/usr/</span>lib/<span class="hljs-attr">uucp:</span><br><span class="hljs-attr">auth:</span><span class="hljs-attr">x:</span><span class="hljs-number">7</span>:<span class="hljs-number">21</span>:Authentication <span class="hljs-attr">administrator:</span><span class="hljs-regexp">/tcb/</span>files/<span class="hljs-attr">auth:</span><br><span class="hljs-attr">cron:</span><span class="hljs-attr">x:</span><span class="hljs-number">9</span>:<span class="hljs-number">16</span>:Cron <span class="hljs-attr">daemon:</span><span class="hljs-regexp">/usr/</span>spool/<span class="hljs-attr">cron:</span><br><span class="hljs-attr">listen:</span><span class="hljs-attr">x:</span><span class="hljs-number">37</span>:<span class="hljs-number">4</span>:Network <span class="hljs-attr">daemon:</span><span class="hljs-regexp">/usr/</span>net/<span class="hljs-attr">nls:</span><br><span class="hljs-attr">lp:</span><span class="hljs-attr">x:</span><span class="hljs-number">71</span>:<span class="hljs-number">18</span>:Printer <span class="hljs-attr">administrator:</span><span class="hljs-regexp">/usr/</span>spool/<span class="hljs-attr">lp:</span><br></code></pre></td></tr></table></figure><p>ä»ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ/etc/passwdä¸­ä¸€è¡Œè®°å½•å¯¹åº”ç€ä¸€ä¸ªç”¨æˆ·ï¼Œæ¯è¡Œè®°å½•åˆè¢«å†’å·(:)åˆ†éš”ä¸º7ä¸ªå­—æ®µï¼Œå…¶æ ¼å¼å’Œå…·ä½“å«ä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">ç”¨æˆ·å:å£ä»¤:ç”¨æˆ·æ ‡è¯†å·:ç»„æ ‡è¯†å·:æ³¨é‡Šæ€§æè¿°:ä¸»ç›®å½•:ç™»å½•<span class="hljs-keyword">Shell</span><br></code></pre></td></tr></table></figure><p>1ï¼‰â€ç”¨æˆ·åâ€æ˜¯ä»£è¡¨ç”¨æˆ·è´¦å·çš„å­—ç¬¦ä¸²ã€‚</p><p>é€šå¸¸é•¿åº¦ä¸è¶…è¿‡8ä¸ªå­—ç¬¦ï¼Œå¹¶ä¸”ç”±å¤§å°å†™å­—æ¯å’Œ/æˆ–æ•°å­—ç»„æˆã€‚ç™»å½•åä¸­ä¸èƒ½æœ‰å†’å·(:)ï¼Œå› ä¸ºå†’å·åœ¨è¿™é‡Œæ˜¯åˆ†éš”ç¬¦ã€‚</p><p>ä¸ºäº†å…¼å®¹èµ·è§ï¼Œç™»å½•åä¸­æœ€å¥½ä¸è¦åŒ…å«ç‚¹å­—ç¬¦(.)ï¼Œå¹¶ä¸”ä¸ä½¿ç”¨è¿å­—ç¬¦(-)å’ŒåŠ å·(+)æ‰“å¤´ã€‚</p><p>2ï¼‰â€œå£ä»¤â€ä¸€äº›ç³»ç»Ÿä¸­ï¼Œå­˜æ”¾ç€åŠ å¯†åçš„ç”¨æˆ·å£ä»¤å­—ã€‚</p><p>è™½ç„¶è¿™ä¸ªå­—æ®µå­˜æ”¾çš„åªæ˜¯ç”¨æˆ·å£ä»¤çš„åŠ å¯†ä¸²ï¼Œä¸æ˜¯æ˜æ–‡ï¼Œä½†æ˜¯ç”±äº/etc/passwdæ–‡ä»¶å¯¹æ‰€æœ‰ç”¨æˆ·éƒ½å¯è¯»ï¼Œæ‰€ä»¥è¿™ä»æ˜¯ä¸€ä¸ªå®‰å…¨éšæ‚£ã€‚å› æ­¤ï¼Œç°åœ¨è®¸å¤šLinux ç³»ç»Ÿï¼ˆå¦‚SVR4ï¼‰éƒ½ä½¿ç”¨äº†shadowæŠ€æœ¯ï¼ŒæŠŠçœŸæ­£çš„åŠ å¯†åçš„ç”¨æˆ·å£ä»¤å­—å­˜æ”¾åˆ°/etc/shadowæ–‡ä»¶ä¸­ï¼Œè€Œåœ¨/etc/passwdæ–‡ä»¶çš„å£ä»¤å­—æ®µä¸­åªå­˜æ”¾ä¸€ä¸ªç‰¹æ®Šçš„å­—ç¬¦ï¼Œä¾‹å¦‚â€œxâ€æˆ–è€…â€œ*â€ã€‚</p><p>3ï¼‰â€œç”¨æˆ·æ ‡è¯†å·â€æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œç³»ç»Ÿå†…éƒ¨ç”¨å®ƒæ¥æ ‡è¯†ç”¨æˆ·ã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹å®ƒä¸ç”¨æˆ·åæ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚å¦‚æœå‡ ä¸ªç”¨æˆ·åå¯¹åº”çš„ç”¨æˆ·æ ‡è¯†å·æ˜¯ä¸€æ ·çš„ï¼Œç³»ç»Ÿå†…éƒ¨å°†æŠŠå®ƒä»¬è§†ä¸ºåŒä¸€ä¸ªç”¨æˆ·ï¼Œä½†æ˜¯å®ƒä»¬å¯ä»¥æœ‰ä¸åŒçš„å£ä»¤ã€ä¸åŒçš„ä¸»ç›®å½•ä»¥åŠä¸åŒçš„ç™»å½•Shellç­‰ã€‚</p><p>é€šå¸¸ç”¨æˆ·æ ‡è¯†å·çš„å–å€¼èŒƒå›´æ˜¯0ï½65 535ã€‚0æ˜¯è¶…çº§ç”¨æˆ·rootçš„æ ‡è¯†å·ï¼Œ1ï½99ç”±ç³»ç»Ÿä¿ç•™ï¼Œä½œä¸ºç®¡ç†è´¦å·ï¼Œæ™®é€šç”¨æˆ·çš„æ ‡è¯†å·ä»100å¼€å§‹ã€‚åœ¨Linuxç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªç•Œé™æ˜¯500ã€‚</p><p>4ï¼‰â€œç»„æ ‡è¯†å·â€å­—æ®µè®°å½•çš„æ˜¯ç”¨æˆ·æ‰€å±çš„ç”¨æˆ·ç»„ã€‚</p><p>å®ƒå¯¹åº”ç€/etc/groupæ–‡ä»¶ä¸­çš„ä¸€æ¡è®°å½•ã€‚</p><p>5)â€œæ³¨é‡Šæ€§æè¿°â€å­—æ®µè®°å½•ç€ç”¨æˆ·çš„ä¸€äº›ä¸ªäººæƒ…å†µã€‚</p><p>ä¾‹å¦‚ç”¨æˆ·çš„çœŸå®å§“åã€ç”µè¯ã€åœ°å€ç­‰ï¼Œè¿™ä¸ªå­—æ®µå¹¶æ²¡æœ‰ä»€ä¹ˆå®é™…çš„ç”¨é€”ã€‚åœ¨ä¸åŒçš„Linux ç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªå­—æ®µçš„æ ¼å¼å¹¶æ²¡æœ‰ç»Ÿä¸€ã€‚åœ¨è®¸å¤šLinuxç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªå­—æ®µå­˜æ”¾çš„æ˜¯ä¸€æ®µä»»æ„çš„æ³¨é‡Šæ€§æè¿°æ–‡å­—ï¼Œç”¨ä½œfingerå‘½ä»¤çš„è¾“å‡ºã€‚</p><p>6)â€œä¸»ç›®å½•â€ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·çš„èµ·å§‹å·¥ä½œç›®å½•ã€‚</p><p>å®ƒæ˜¯ç”¨æˆ·åœ¨ç™»å½•åˆ°ç³»ç»Ÿä¹‹åæ‰€å¤„çš„ç›®å½•ã€‚åœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸­ï¼Œå„ç”¨æˆ·çš„ä¸»ç›®å½•éƒ½è¢«ç»„ç»‡åœ¨åŒä¸€ä¸ªç‰¹å®šçš„ç›®å½•ä¸‹ï¼Œè€Œç”¨æˆ·ä¸»ç›®å½•çš„åç§°å°±æ˜¯è¯¥ç”¨æˆ·çš„ç™»å½•åã€‚å„ç”¨æˆ·å¯¹è‡ªå·±çš„ä¸»ç›®å½•æœ‰è¯»ã€å†™ã€æ‰§è¡Œï¼ˆæœç´¢ï¼‰æƒé™ï¼Œå…¶ä»–ç”¨æˆ·å¯¹æ­¤ç›®å½•çš„è®¿é—®æƒé™åˆ™æ ¹æ®å…·ä½“æƒ…å†µè®¾ç½®ã€‚</p><p>7)ç”¨æˆ·ç™»å½•åï¼Œè¦å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹ï¼Œè´Ÿè´£å°†ç”¨æˆ·çš„æ“ä½œä¼ ç»™å†…æ ¸ï¼Œè¿™ä¸ªè¿›ç¨‹æ˜¯ç”¨æˆ·ç™»å½•åˆ°ç³»ç»Ÿåè¿è¡Œçš„å‘½ä»¤è§£é‡Šå™¨æˆ–æŸä¸ªç‰¹å®šçš„ç¨‹åºï¼Œå³Shellã€‚</p><p>Shellæ˜¯ç”¨æˆ·ä¸Linuxç³»ç»Ÿä¹‹é—´çš„æ¥å£ã€‚Linuxçš„Shellæœ‰è®¸å¤šç§ï¼Œæ¯ç§éƒ½æœ‰ä¸åŒçš„ç‰¹ç‚¹ã€‚å¸¸ç”¨çš„æœ‰sh(Bourne Shell), csh(C Shell), ksh(Korn Shell), tcsh(TENEX/TOPS-20 type C Shell), bash(Bourne Again Shell)ç­‰ã€‚</p><p>ç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥æ ¹æ®ç³»ç»Ÿæƒ…å†µå’Œç”¨æˆ·ä¹ æƒ¯ä¸ºç”¨æˆ·æŒ‡å®šæŸä¸ªShellã€‚å¦‚æœä¸æŒ‡å®šShellï¼Œé‚£ä¹ˆç³»ç»Ÿä½¿ç”¨shä¸ºé»˜è®¤çš„ç™»å½•Shellï¼Œå³è¿™ä¸ªå­—æ®µçš„å€¼ä¸º/bin/shã€‚</p><p>ç”¨æˆ·çš„ç™»å½•Shellä¹Ÿå¯ä»¥æŒ‡å®šä¸ºæŸä¸ªç‰¹å®šçš„ç¨‹åºï¼ˆæ­¤ç¨‹åºä¸æ˜¯ä¸€ä¸ªå‘½ä»¤è§£é‡Šå™¨ï¼‰ã€‚</p><p>åˆ©ç”¨è¿™ä¸€ç‰¹ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥é™åˆ¶ç”¨æˆ·åªèƒ½è¿è¡ŒæŒ‡å®šçš„åº”ç”¨ç¨‹åºï¼Œåœ¨è¯¥åº”ç”¨ç¨‹åºè¿è¡Œç»“æŸåï¼Œç”¨æˆ·å°±è‡ªåŠ¨é€€å‡ºäº†ç³»ç»Ÿã€‚æœ‰äº›Linux ç³»ç»Ÿè¦æ±‚åªæœ‰é‚£äº›åœ¨ç³»ç»Ÿä¸­ç™»è®°äº†çš„ç¨‹åºæ‰èƒ½å‡ºç°åœ¨è¿™ä¸ªå­—æ®µä¸­ã€‚</p><p>8)ç³»ç»Ÿä¸­æœ‰ä¸€ç±»ç”¨æˆ·ç§°ä¸ºä¼ªç”¨æˆ·ï¼ˆpseudo usersï¼‰ã€‚</p><p>è¿™äº›ç”¨æˆ·åœ¨/etc/passwdæ–‡ä»¶ä¸­ä¹Ÿå æœ‰ä¸€æ¡è®°å½•ï¼Œä½†æ˜¯ä¸èƒ½ç™»å½•ï¼Œå› ä¸ºå®ƒä»¬çš„ç™»å½•Shellä¸ºç©ºã€‚å®ƒä»¬çš„å­˜åœ¨ä¸»è¦æ˜¯æ–¹ä¾¿ç³»ç»Ÿç®¡ç†ï¼Œæ»¡è¶³ç›¸åº”çš„ç³»ç»Ÿè¿›ç¨‹å¯¹æ–‡ä»¶å±ä¸»çš„è¦æ±‚ã€‚</p><p>å¸¸è§çš„ä¼ªç”¨æˆ·å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs powershell">ä¼ª ç”¨ æˆ· å« ä¹‰<br>bin æ‹¥æœ‰å¯æ‰§è¡Œçš„ç”¨æˆ·å‘½ä»¤æ–‡ä»¶<br>sys æ‹¥æœ‰ç³»ç»Ÿæ–‡ä»¶<br>adm æ‹¥æœ‰å¸æˆ·æ–‡ä»¶<br>uucp UUCPä½¿ç”¨<br><span class="hljs-built_in">lp</span> <span class="hljs-built_in">lp</span>æˆ–lpdå­ç³»ç»Ÿä½¿ç”¨<br>nobody NFSä½¿ç”¨<br></code></pre></td></tr></table></figure><blockquote><p>/etc/shadow</p></blockquote><p><strong>1ã€é™¤äº†ä¸Šé¢åˆ—å‡ºçš„ä¼ªç”¨æˆ·å¤–ï¼Œè¿˜æœ‰è®¸å¤šæ ‡å‡†çš„ä¼ªç”¨æˆ·ï¼Œä¾‹å¦‚ï¼šaudit, cron, mail, usenetç­‰ï¼Œå®ƒä»¬ä¹Ÿéƒ½å„è‡ªä¸ºç›¸å…³çš„è¿›ç¨‹å’Œæ–‡ä»¶æ‰€éœ€è¦ã€‚</strong></p><p>ç”±äº/etc/passwdæ–‡ä»¶æ˜¯æ‰€æœ‰ç”¨æˆ·éƒ½å¯è¯»çš„ï¼Œå¦‚æœç”¨æˆ·çš„å¯†ç å¤ªç®€å•æˆ–è§„å¾‹æ¯”è¾ƒæ˜æ˜¾çš„è¯ï¼Œä¸€å°æ™®é€šçš„è®¡ç®—æœºå°±èƒ½å¤Ÿå¾ˆå®¹æ˜“åœ°å°†å®ƒç ´è§£ï¼Œå› æ­¤å¯¹å®‰å…¨æ€§è¦æ±‚è¾ƒé«˜çš„Linuxç³»ç»Ÿéƒ½æŠŠåŠ å¯†åçš„å£ä»¤å­—åˆ†ç¦»å‡ºæ¥ï¼Œå•ç‹¬å­˜æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯/etc/shadowæ–‡ä»¶ã€‚æœ‰è¶…çº§ç”¨æˆ·æ‰æ‹¥æœ‰è¯¥æ–‡ä»¶è¯»æƒé™ï¼Œè¿™å°±ä¿è¯äº†ç”¨æˆ·å¯†ç çš„å®‰å…¨æ€§ã€‚</p><p><strong>2ã€/etc/shadowä¸­çš„è®°å½•è¡Œä¸/etc/passwdä¸­çš„ä¸€ä¸€å¯¹åº”ï¼Œå®ƒç”±pwconvå‘½ä»¤æ ¹æ®/etc/passwdä¸­çš„æ•°æ®è‡ªåŠ¨äº§ç”Ÿ</strong></p><p>å®ƒçš„æ–‡ä»¶æ ¼å¼ä¸/etc/passwdç±»ä¼¼ï¼Œç”±è‹¥å¹²ä¸ªå­—æ®µç»„æˆï¼Œå­—æ®µä¹‹é—´ç”¨â€:â€éš”å¼€ã€‚è¿™äº›å­—æ®µæ˜¯ï¼š</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">ç™»å½•å:åŠ å¯†å£ä»¤:æœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´:æœ€å°æ—¶é—´é—´éš”:æœ€å¤§æ—¶é—´é—´éš”:è­¦å‘Šæ—¶é—´:ä¸æ´»åŠ¨æ—¶é—´:å¤±æ•ˆæ—¶é—´:æ ‡å¿—</span><br></code></pre></td></tr></table></figure><ol><li>â€œç™»å½•åâ€æ˜¯ä¸/etc/passwdæ–‡ä»¶ä¸­çš„ç™»å½•åç›¸ä¸€è‡´çš„ç”¨æˆ·è´¦å·</li><li>â€œå£ä»¤â€å­—æ®µå­˜æ”¾çš„æ˜¯åŠ å¯†åçš„ç”¨æˆ·å£ä»¤å­—ï¼Œé•¿åº¦ä¸º13ä¸ªå­—ç¬¦ã€‚å¦‚æœä¸ºç©ºï¼Œåˆ™å¯¹åº”ç”¨æˆ·æ²¡æœ‰å£ä»¤ï¼Œç™»å½•æ—¶ä¸éœ€è¦å£ä»¤ï¼›å¦‚æœå«æœ‰ä¸å±äºé›†åˆ { ./0-9A-Za-z }ä¸­çš„å­—ç¬¦ï¼Œåˆ™å¯¹åº”çš„ç”¨æˆ·ä¸èƒ½ç™»å½•ã€‚</li><li>â€œæœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´â€è¡¨ç¤ºçš„æ˜¯ä»æŸä¸ªæ—¶åˆ»èµ·ï¼Œåˆ°ç”¨æˆ·æœ€åä¸€æ¬¡ä¿®æ”¹å£ä»¤æ—¶çš„å¤©æ•°ã€‚æ—¶é—´èµ·ç‚¹å¯¹ä¸åŒçš„ç³»ç»Ÿå¯èƒ½ä¸ä¸€æ ·ã€‚ä¾‹å¦‚åœ¨SCO Linux ä¸­ï¼Œè¿™ä¸ªæ—¶é—´èµ·ç‚¹æ˜¯1970å¹´1æœˆ1æ—¥ã€‚</li><li>â€œæœ€å°æ—¶é—´é—´éš”â€æŒ‡çš„æ˜¯ä¸¤æ¬¡ä¿®æ”¹å£ä»¤ä¹‹é—´æ‰€éœ€çš„æœ€å°å¤©æ•°ã€‚</li><li>â€œæœ€å¤§æ—¶é—´é—´éš”â€æŒ‡çš„æ˜¯å£ä»¤ä¿æŒæœ‰æ•ˆçš„æœ€å¤§å¤©æ•°ã€‚</li><li>â€œè­¦å‘Šæ—¶é—´â€å­—æ®µè¡¨ç¤ºçš„æ˜¯ä»ç³»ç»Ÿå¼€å§‹è­¦å‘Šç”¨æˆ·åˆ°ç”¨æˆ·å¯†ç æ­£å¼å¤±æ•ˆä¹‹é—´çš„å¤©æ•°ã€‚</li><li>â€œä¸æ´»åŠ¨æ—¶é—´â€è¡¨ç¤ºçš„æ˜¯ç”¨æˆ·æ²¡æœ‰ç™»å½•æ´»åŠ¨ä½†è´¦å·ä»èƒ½ä¿æŒæœ‰æ•ˆçš„æœ€å¤§å¤©æ•°ã€‚</li><li>â€œå¤±æ•ˆæ—¶é—´â€å­—æ®µç»™å‡ºçš„æ˜¯ä¸€ä¸ªç»å¯¹çš„å¤©æ•°ï¼Œå¦‚æœä½¿ç”¨äº†è¿™ä¸ªå­—æ®µï¼Œé‚£ä¹ˆå°±ç»™å‡ºç›¸åº”è´¦å·çš„ç”Ÿå­˜æœŸã€‚æœŸæ»¡åï¼Œè¯¥è´¦å·å°±ä¸å†æ˜¯ä¸€ä¸ªåˆæ³•çš„è´¦å·ï¼Œä¹Ÿå°±ä¸èƒ½å†ç”¨æ¥ç™»å½•äº†ã€‚</li></ol><blockquote><p>/etc/group</p></blockquote><p>ç”¨æˆ·ç»„çš„æ‰€æœ‰ä¿¡æ¯éƒ½å­˜æ”¾åœ¨/etc/groupæ–‡ä»¶ä¸­ã€‚</p><p>å°†ç”¨æˆ·åˆ†ç»„æ˜¯Linux ç³»ç»Ÿä¸­å¯¹ç”¨æˆ·è¿›è¡Œç®¡ç†åŠæ§åˆ¶è®¿é—®æƒé™çš„ä¸€ç§æ‰‹æ®µã€‚</p><p>æ¯ä¸ªç”¨æˆ·éƒ½å±äºæŸä¸ªç”¨æˆ·ç»„ï¼›ä¸€ä¸ªç»„ä¸­å¯ä»¥æœ‰å¤šä¸ªç”¨æˆ·ï¼Œä¸€ä¸ªç”¨æˆ·ä¹Ÿå¯ä»¥å±äºä¸åŒçš„ç»„ã€‚</p><p>å½“ä¸€ä¸ªç”¨æˆ·åŒæ—¶æ˜¯å¤šä¸ªç»„ä¸­çš„æˆå‘˜æ—¶ï¼Œåœ¨/etc/passwdæ–‡ä»¶ä¸­è®°å½•çš„æ˜¯ç”¨æˆ·æ‰€å±çš„ä¸»ç»„ï¼Œä¹Ÿå°±æ˜¯ç™»å½•æ—¶æ‰€å±çš„é»˜è®¤ç»„ï¼Œè€Œå…¶ä»–ç»„ç§°ä¸ºé™„åŠ ç»„ã€‚</p><p>ç”¨æˆ·è¦è®¿é—®å±äºé™„åŠ ç»„çš„æ–‡ä»¶æ—¶ï¼Œå¿…é¡»é¦–å…ˆä½¿ç”¨newgrpå‘½ä»¤ä½¿è‡ªå·±æˆä¸ºæ‰€è¦è®¿é—®çš„ç»„ä¸­çš„æˆå‘˜ã€‚</p><p>ç”¨æˆ·ç»„çš„æ‰€æœ‰ä¿¡æ¯éƒ½å­˜æ”¾åœ¨/etc/groupæ–‡ä»¶ä¸­ã€‚æ­¤æ–‡ä»¶çš„æ ¼å¼ä¹Ÿç±»ä¼¼äº/etc/passwdæ–‡ä»¶ï¼Œç”±å†’å·(:)éš”å¼€è‹¥å¹²ä¸ªå­—æ®µï¼Œè¿™äº›å­—æ®µæœ‰ï¼š</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">ç»„å:å£ä»¤:ç»„æ ‡è¯†å·:ç»„å†…ç”¨æˆ·åˆ—è¡¨</span><br></code></pre></td></tr></table></figure><ol><li>â€œç»„åâ€æ˜¯ç”¨æˆ·ç»„çš„åç§°ï¼Œç”±å­—æ¯æˆ–æ•°å­—æ„æˆã€‚ä¸/etc/passwdä¸­çš„ç™»å½•åä¸€æ ·ï¼Œç»„åä¸åº”é‡å¤ã€‚</li><li>â€œå£ä»¤â€å­—æ®µå­˜æ”¾çš„æ˜¯ç”¨æˆ·ç»„åŠ å¯†åçš„å£ä»¤å­—ã€‚ä¸€èˆ¬Linux ç³»ç»Ÿçš„ç”¨æˆ·ç»„éƒ½æ²¡æœ‰å£ä»¤ï¼Œå³è¿™ä¸ªå­—æ®µä¸€èˆ¬ä¸ºç©ºï¼Œæˆ–è€…æ˜¯*ã€‚</li><li>â€œç»„æ ‡è¯†å·â€ä¸ç”¨æˆ·æ ‡è¯†å·ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè¢«ç³»ç»Ÿå†…éƒ¨ç”¨æ¥æ ‡è¯†ç»„ã€‚</li><li>â€œç»„å†…ç”¨æˆ·åˆ—è¡¨â€æ˜¯å±äºè¿™ä¸ªç»„çš„æ‰€æœ‰ç”¨æˆ·çš„åˆ—è¡¨/b]ï¼Œä¸åŒç”¨æˆ·ä¹‹é—´ç”¨é€—å·(,)åˆ†éš”ã€‚è¿™ä¸ªç”¨æˆ·ç»„å¯èƒ½æ˜¯ç”¨æˆ·çš„ä¸»ç»„ï¼Œä¹Ÿå¯èƒ½æ˜¯é™„åŠ ç»„ã€‚</li></ol><h3 id="ç£ç›˜ç®¡ç†"><a href="#ç£ç›˜ç®¡ç†" class="headerlink" title="ç£ç›˜ç®¡ç†"></a>ç£ç›˜ç®¡ç†</h3><blockquote><p>æ¦‚è¿°</p></blockquote><p>Linuxç£ç›˜ç®¡ç†å¥½åç›´æ¥å…³ç³»åˆ°æ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½é—®é¢˜ã€‚</p><p>Linuxç£ç›˜ç®¡ç†å¸¸ç”¨å‘½ä»¤ä¸º dfã€duã€‚</p><ul><li>df ï¼šåˆ—å‡ºæ–‡ä»¶ç³»ç»Ÿçš„æ•´ä½“ç£ç›˜ä½¿ç”¨é‡</li><li>duï¼šæ£€æŸ¥ç£ç›˜ç©ºé—´ä½¿ç”¨é‡</li></ul><blockquote><p>df</p></blockquote><p>dfå‘½ä»¤å‚æ•°åŠŸèƒ½ï¼šæ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜ç©ºé—´å ç”¨æƒ…å†µã€‚å¯ä»¥åˆ©ç”¨è¯¥å‘½ä»¤æ¥è·å–ç¡¬ç›˜è¢«å ç”¨äº†å¤šå°‘ç©ºé—´ï¼Œç›®å‰è¿˜å‰©ä¸‹å¤šå°‘ç©ºé—´ç­‰ä¿¡æ¯ã€‚</p><p>è¯­æ³•ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">df</span> <span class="hljs-selector-attr">[-ahikHTm]</span> <span class="hljs-selector-attr">[ç›®å½•æˆ–æ–‡ä»¶å]</span><br></code></pre></td></tr></table></figure><p>é€‰é¡¹ä¸å‚æ•°ï¼š</p><ul><li>-a ï¼šåˆ—å‡ºæ‰€æœ‰çš„æ–‡ä»¶ç³»ç»Ÿï¼ŒåŒ…æ‹¬ç³»ç»Ÿç‰¹æœ‰çš„ /proc ç­‰æ–‡ä»¶ç³»ç»Ÿï¼›</li><li>-k ï¼šä»¥ KBytes çš„å®¹é‡æ˜¾ç¤ºå„æ–‡ä»¶ç³»ç»Ÿï¼›</li><li>-m ï¼šä»¥ MBytes çš„å®¹é‡æ˜¾ç¤ºå„æ–‡ä»¶ç³»ç»Ÿï¼›</li><li>-h ï¼šä»¥äººä»¬è¾ƒæ˜“é˜…è¯»çš„ GBytes, MBytes, KBytes ç­‰æ ¼å¼è‡ªè¡Œæ˜¾ç¤ºï¼›</li><li>-H ï¼šä»¥ M=1000K å–ä»£ M=1024K çš„è¿›ä½æ–¹å¼ï¼›</li><li>-T ï¼šæ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿç±»å‹, è¿åŒè¯¥ partition çš„ filesystem åç§° (ä¾‹å¦‚ ext3) ä¹Ÿåˆ—å‡ºï¼›</li><li>-i ï¼šä¸ç”¨ç¡¬ç›˜å®¹é‡ï¼Œè€Œä»¥ inode çš„æ•°é‡æ¥æ˜¾ç¤º</li></ul><p>æµ‹è¯•ï¼š</p><p>å°†ç³»ç»Ÿå†…æ‰€æœ‰çš„ (ä¸å«ç‰¹æ®Šå†…å­˜å†…çš„æ–‡ä»¶ç³»ç»Ÿä¸ swap) éƒ½ä»¥ 1 Kbytes çš„å®¹é‡æ¥åˆ—å‡ºæ¥ï¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z /]# df<br>Filesystem     1K-blocks    Used Available Use% Mounted on<br>devtmpfs         1920368       0   1920368   0% /dev<br>tmpfs            1935776       0   1935776   0% /dev/shm<br>tmpfs            1935776     496   1935280   1% /run<br>tmpfs            1935776       0   1935776   0% /sys/fs/cgroup<br>/dev/vda1       41931756 5389692  36542064  13% /<br>tmpfs             387152       0    387152   0% /run/user/0<br></code></pre></td></tr></table></figure><p>å°†å®¹é‡ç»“æœä»¥æ˜“è¯»çš„å®¹é‡æ ¼å¼æ˜¾ç¤ºå‡ºæ¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z /]# df -h<br>Filesystem      Size  Used Avail Use% Mounted on<br>devtmpfs        1.9G     0  1.9G   0% /dev<br>tmpfs           1.9G     0  1.9G   0% /dev/shm<br>tmpfs           1.9G  496K  1.9G   1% /run<br>tmpfs           1.9G     0  1.9G   0% /sys/fs/cgroup<br>/dev/vda1        40G  5.2G   35G  13% /<br>tmpfs           379M     0  379M   0% /run/user/0<br></code></pre></td></tr></table></figure><p>å°†ç³»ç»Ÿå†…çš„æ‰€æœ‰ç‰¹æ®Šæ–‡ä»¶æ ¼å¼åŠåç§°éƒ½åˆ—å‡ºæ¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z /]# df -aT<br>Filesystem     Type        1K-blocks    Used Available Use% Mounted on<br>sysfs          sysfs               0       0         0    - /sys<br>proc           proc                0       0         0    - /proc<br>devtmpfs       devtmpfs      1920368       0   1920368   0% /dev<br>securityfs     securityfs          0       0         0    - /sys/kernel/security<br>tmpfs          tmpfs         1935776       0   1935776   0% /dev/shm<br>devpts         devpts              0       0         0    - /dev/pts<br>tmpfs          tmpfs         1935776     496   1935280   1% /run<br>tmpfs          tmpfs         1935776       0   1935776   0% /sys/fs/cgroup<br>cgroup         cgroup              0       0         0    - /sys/fs/cgroup/systemd<br>pstore         pstore              0       0         0    - /sys/fs/pstore<br>bpf            bpf                 0       0         0    - /sys/fs/bpf<br>cgroup         cgroup              0       0         0    - /sys/fs/cgroup/hugetlb<br>cgroup         cgroup              0       0         0    - /sys/fs/cgroup/freezer<br>cgroup         cgroup              0       0         0    - /sys/fs/cgroup/perf_event<br>cgroup         cgroup              0       0         0    - /sys/fs/cgroup/net_cls,net_prio<br>cgroup         cgroup              0       0         0    - /sys/fs/cgroup/devices<br>cgroup         cgroup              0       0         0    - /sys/fs/cgroup/blkio<br>cgroup         cgroup              0       0         0    - /sys/fs/cgroup/memory<br>cgroup         cgroup              0       0         0    - /sys/fs/cgroup/cpu,cpuacct<br>cgroup         cgroup              0       0         0    - /sys/fs/cgroup/cpuset<br>cgroup         cgroup              0       0         0    - /sys/fs/cgroup/pids<br>cgroup         cgroup              0       0         0    - /sys/fs/cgroup/rdma<br>configfs       configfs            0       0         0    - /sys/kernel/config<br>/dev/vda1      xfs          41931756 5389672  36542084  13% /<br>systemd-1      -                   -       -         -    - /proc/sys/fs/binfmt_misc<br>mqueue         mqueue              0       0         0    - /dev/mqueue<br>debugfs        debugfs             0       0         0    - /sys/kernel/debug<br>hugetlbfs      hugetlbfs           0       0         0    - /dev/hugepages<br>tracefs        tracefs             0       0         0    - /sys/kernel/debug/tracing<br>tmpfs          tmpfs          387152       0    387152   0% /run/user/0<br>binfmt_misc    binfmt_misc         0       0         0    - /proc/sys/fs/binfmt_misc<br></code></pre></td></tr></table></figure><p>å°† /etc åº•ä¸‹çš„å¯ç”¨çš„ç£ç›˜å®¹é‡ä»¥æ˜“è¯»çš„å®¹é‡æ ¼å¼æ˜¾ç¤º</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z /]# df -h /etc<br>Filesystem      Size  Used Avail Use% Mounted on<br>/dev/vda1        40G  5.2G   35G  13% /<br></code></pre></td></tr></table></figure><blockquote><p>du</p></blockquote><p>Linux duå‘½ä»¤ä¹Ÿæ˜¯æŸ¥çœ‹ä½¿ç”¨ç©ºé—´çš„ï¼Œä½†æ˜¯ä¸dfå‘½ä»¤ä¸åŒçš„æ˜¯Linux duå‘½ä»¤æ˜¯å¯¹æ–‡ä»¶å’Œç›®å½•ç£ç›˜ä½¿ç”¨çš„ç©ºé—´çš„æŸ¥çœ‹ï¼Œè¿˜æ˜¯å’Œdfå‘½ä»¤æœ‰ä¸€äº›åŒºåˆ«çš„ï¼Œè¿™é‡Œä»‹ç»Linux duå‘½ä»¤ã€‚</p><p>è¯­æ³•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">du [-ahskm] æ–‡ä»¶æˆ–ç›®å½•åç§°<br></code></pre></td></tr></table></figure><p>é€‰é¡¹ä¸å‚æ•°ï¼š</p><ul><li>-a ï¼šåˆ—å‡ºæ‰€æœ‰çš„æ–‡ä»¶ä¸ç›®å½•å®¹é‡ï¼Œå› ä¸ºé»˜è®¤ä»…ç»Ÿè®¡ç›®å½•åº•ä¸‹çš„æ–‡ä»¶é‡è€Œå·²ã€‚</li><li>-h ï¼šä»¥äººä»¬è¾ƒæ˜“è¯»çš„å®¹é‡æ ¼å¼ (G/M) æ˜¾ç¤ºï¼›</li><li>-s ï¼šåˆ—å‡ºæ€»é‡è€Œå·²ï¼Œè€Œä¸åˆ—å‡ºæ¯ä¸ªå„åˆ«çš„ç›®å½•å ç”¨å®¹é‡ï¼›</li><li>-S ï¼šä¸åŒ…æ‹¬å­ç›®å½•ä¸‹çš„æ€»è®¡ï¼Œä¸ -s æœ‰ç‚¹å·®åˆ«ã€‚</li><li>-k ï¼šä»¥ KBytes åˆ—å‡ºå®¹é‡æ˜¾ç¤ºï¼›</li><li>-m ï¼šä»¥ MBytes åˆ—å‡ºå®¹é‡æ˜¾ç¤ºï¼›</li></ul><p>æµ‹è¯•ï¼š</p><p>åªåˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤¹å®¹é‡ï¼ˆåŒ…æ‹¬éšè—æ–‡ä»¶å¤¹ï¼‰:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z home]# du<br>4./www/.oracle_jre_usage<br>16./www<br>12./redis<br>0./environment<br>0./img<br>900./AtroxQW<br>16./qiaowei<br>944.<br></code></pre></td></tr></table></figure><p>æ˜¾ç¤ºå‡ºæ–‡ä»¶å¤¹é‡Œé¢çš„å†…å®¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z home]# du -a<br>4./www/.bash_logout<br>4./www/.bash_profile<br>4./www/.bashrc<br>4./www/.oracle_jre_usage/aa694b02fe91242e.timestamp<br>4./www/.oracle_jre_usage<br>16./www<br>4./redis/.bash_logout<br>4./redis/.bash_profile<br>4./redis/.bashrc<br>12./redis<br>0./environment<br>0./img<br>900./AtroxQW/atrox3.jpg<br>900./AtroxQW<br>4./qiaowei/.bash_logout<br>4./qiaowei/.bash_profile<br>4./qiaowei/.bashrc<br>4./qiaowei/.bash_history<br>16./qiaowei<br>944.<br></code></pre></td></tr></table></figure><p>æ£€æŸ¥æ ¹ç›®å½•åº•ä¸‹æ¯ä¸ªç›®å½•æ‰€å ç”¨çš„å®¹é‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z home]# du -sm /*<br>0/bin<br>198/boot<br>0/dev<br>23/etc<br>1/home<br>0/lib<br>0/lib64<br>0/media<br>0/mnt<br>0/opt<br>1/patch<br>0/proc<br>1/root<br>1/run<br>0/sbin<br>0/srv<br>0/sys<br>77/tmp<br>2613/usr<br>200/var<br></code></pre></td></tr></table></figure><p>é€šé…ç¬¦ * æ¥ä»£è¡¨æ¯ä¸ªç›®å½•ã€‚</p><p>ä¸ df ä¸ä¸€æ ·çš„æ˜¯ï¼Œdu è¿™ä¸ªå‘½ä»¤å…¶å®ä¼šç›´æ¥åˆ°æ–‡ä»¶ç³»ç»Ÿå†…å»æœå¯»æ‰€æœ‰çš„æ–‡ä»¶æ•°æ®ã€‚</p><blockquote><p>ç£ç›˜æŒ‚è½½ä¸å¸é™¤</p></blockquote><p>æ ¹æ–‡ä»¶ç³»ç»Ÿä¹‹å¤–çš„å…¶ä»–æ–‡ä»¶è¦æƒ³èƒ½å¤Ÿè¢«è®¿é—®ï¼Œéƒ½å¿…é¡»é€šè¿‡â€œå…³è”â€è‡³æ ¹æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æŸä¸ªç›®å½•æ¥å®ç°ï¼Œæ­¤å…³è”æ“ä½œå³ä¸ºâ€œæŒ‚è½½â€ï¼Œæ­¤ç›®å½•å³ä¸ºâ€œæŒ‚è½½ç‚¹â€,è§£é™¤æ­¤å…³è”å…³ç³»çš„è¿‡ç¨‹ç§°ä¹‹ä¸ºâ€œå¸è½½â€</p><p>Linux çš„ç£ç›˜æŒ‚è½½ä½¿ç”¨mountå‘½ä»¤ï¼Œå¸è½½ä½¿ç”¨umountå‘½ä»¤ã€‚</p><p>ç£ç›˜æŒ‚è½½è¯­æ³•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">mount [-t æ–‡ä»¶ç³»ç»Ÿ] [-L Labelå] [-o é¢å¤–é€‰é¡¹] [-n] è£…ç½®æ–‡ä»¶å æŒ‚è½½ç‚¹<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> å°† /dev/hdc6 æŒ‚è½½åˆ° /mnt/hdc6 ä¸Šé¢ï¼</span><br>[root@www ~]# mkdir /mnt/hdc6<br>[root@www ~]# mount /dev/hdc6 /mnt/hdc6<br>[root@www ~]# df<br>Filesystem           1K-blocks     Used Available Use% Mounted on<br>/dev/hdc6              1976312     42072   1833836   3% /mnt/hdc6<br></code></pre></td></tr></table></figure><p>ç£ç›˜å¸è½½å‘½ä»¤ umount è¯­æ³•ï¼š</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">umount</span> [-<span class="hljs-meta">fn</span>] è£…ç½®æ–‡ä»¶åæˆ–æŒ‚è½½ç‚¹<br></code></pre></td></tr></table></figure><p>é€‰é¡¹ä¸å‚æ•°ï¼š</p><ul><li>-f ï¼šå¼ºåˆ¶å¸é™¤ï¼å¯ç”¨åœ¨ç±»ä¼¼ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ (NFS) æ— æ³•è¯»å–åˆ°çš„æƒ…å†µä¸‹ï¼›</li><li>-n ï¼šä¸å‡çº§ /etc/mtab æƒ…å†µä¸‹å¸é™¤ã€‚</li></ul><p>å¸è½½/dev/hdc6</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@www</span> ~]<span class="hljs-meta"># umount /dev/hdc6</span><br></code></pre></td></tr></table></figure><h3 id="è¿›ç¨‹ç®¡ç†"><a href="#è¿›ç¨‹ç®¡ç†" class="headerlink" title="è¿›ç¨‹ç®¡ç†"></a>è¿›ç¨‹ç®¡ç†</h3><blockquote><p>åŸºæœ¬æ¦‚å¿µ</p></blockquote><ol><li>åœ¨Linuxä¸­ï¼Œæ¯ä¸€ä¸ªç¨‹åºéƒ½æ˜¯æœ‰è‡ªå·±çš„ä¸€ä¸ªè¿›ç¨‹ï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªidå·ã€‚</li><li>æ¯ä¸€ä¸ªè¿›ç¨‹ï¼Œéƒ½æœ‰ä¸€ä¸ªçˆ¶è¿›ç¨‹ã€‚</li><li>è¿›ç¨‹å¯ä»¥æœ‰ä¸¤ç§å­˜åœ¨æ–¹å¼ï¼šå‰å°æˆ–è€…åå°</li><li>ä¸€èˆ¬çš„è¯æœåŠ¡æ˜¯åå°è¿è¡Œçš„ï¼ŒåŸºæœ¬çš„ç¨‹åºéƒ½æ˜¯å‰å°è¿è¡Œçš„</li></ol><blockquote><p>å‘½ä»¤</p></blockquote><p><strong>ps</strong>ï¼šæŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­æ­£åœ¨æ‰§è¡Œçš„å„ç§è¿›ç¨‹çš„ä¿¡æ¯ï¼</p><p>ps -xxï¼š</p><ul><li>-a ï¼šæ˜¾ç¤ºå½“å‰ç»ˆç«¯è¿è¡Œçš„æ‰€æœ‰çš„è¿›ç¨‹ä¿¡æ¯</li><li>-uï¼šä»¥ç”¨æˆ·çš„ä¿¡æ¯æ˜¾ç¤ºè¿›ç¨‹</li><li>-xï¼šæ˜¾ç¤ºåå°è¿è¡Œè¿›ç¨‹çš„å‚æ•°</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> æŸ¥çœ‹æ‰€æœ‰çš„è¿›ç¨‹</span><br>ps -aux|<br><span class="hljs-meta">#</span><span class="bash"> | åœ¨Linuxä¸­|ä¸ºç®¡é“ç¬¦  A|B</span><br><span class="hljs-meta">#</span><span class="bash"> grep æŸ¥æ‰¾æ–‡ä»¶ä¸­ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸²ã€‚</span><br>ps -aux|grep mysql<br>ps -aux|grep java<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹å…³äºmysqlçš„è¿›ç¨‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z home]# ps aux| grep mysql<br>root      1255  0.0  0.0  12964  3404 ?        S    Jan16   0:00 /bin/sh /www/server/mysql/bin/mysqld_safe --datadir=/www/server/data --pid-file=/www/server/data/iZ2zeh7ydg2bbydds175q0Z.pid<br>mysql     1929  0.4 10.2 1822928 397932 ?      Sl   Jan16  12:44 /www/server/mysql/bin/mysqld --basedir=/www/server/mysql --datadir=/www/server/data --plugin-dir=/www/server/mysql/lib/plugin --user=mysql --log-error=iZ2zeh7ydg2bbydds175q0Z.err --open-files-limit=65535 --pid-file=/www/server/data/iZ2zeh7ydg2bbydds175q0Z.pid --socket=/tmp/mysql.sock --port=3306<br>root      8018  0.0  0.0  12112  1064 pts/1    S+   16:55   0:00 grep --color=auto mysql<br></code></pre></td></tr></table></figure><p><strong>ps-ef</strong>ï¼šæŸ¥çœ‹çˆ¶è¿›ç¨‹çš„ä¿¡æ¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">ps -ef|grep mysql #çœ‹çˆ¶è¿›ç¨‹ï¼Œæˆ‘ä»¬ä¸€èˆ¬å¯ä»¥é€šè¿‡ç›®å½•æ ‘ç»“æ„æ¥æŸ¥çœ‹<br>pstree -pu<br>-p æ˜¾ç¤ºçˆ¶id<br>-u æ˜¾ç¤ºç”¨æˆ·ç»„<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z home]# pstree -pu<br>systemd(1)â”€â”¬â”€AliYunDun(27808)â”€â”¬â”€&#123;AliYunDun&#125;(27809)<br>           â”‚                  â”œâ”€&#123;AliYunDun&#125;(27810)<br>           â”‚                  â”œâ”€&#123;AliYunDun&#125;(27821)<br>           â”‚                  â”œâ”€&#123;AliYunDun&#125;(27822)<br>           â”‚                  â”œâ”€&#123;AliYunDun&#125;(27823)<br>           â”‚                  â”œâ”€&#123;AliYunDun&#125;(27824)<br>           â”‚                  â”œâ”€&#123;AliYunDun&#125;(27825)<br>           â”‚                  â”œâ”€&#123;AliYunDun&#125;(27826)<br>           â”‚                  â”œâ”€&#123;AliYunDun&#125;(27827)<br>           â”‚                  â”œâ”€&#123;AliYunDun&#125;(27828)<br>           â”‚                  â”œâ”€&#123;AliYunDun&#125;(27829)<br>           â”‚                  â”œâ”€&#123;AliYunDun&#125;(27830)<br>           â”‚                  â”œâ”€&#123;AliYunDun&#125;(27831)<br>           â”‚                  â”œâ”€&#123;AliYunDun&#125;(27832)<br>           â”‚                  â”œâ”€&#123;AliYunDun&#125;(27833)<br>           â”‚                  â”œâ”€&#123;AliYunDun&#125;(27834)<br>           â”‚                  â”œâ”€&#123;AliYunDun&#125;(27835)<br>           â”‚                  â”œâ”€&#123;AliYunDun&#125;(27836)<br>           â”‚                  â”œâ”€&#123;AliYunDun&#125;(27837)<br>           â”‚                  â”œâ”€&#123;AliYunDun&#125;(27838)<br>           â”‚                  â”œâ”€&#123;AliYunDun&#125;(27839)<br>           â”‚                  â”œâ”€&#123;AliYunDun&#125;(27840)<br>           â”‚                  â””â”€&#123;AliYunDun&#125;(27845)<br>           â”œâ”€AliYunDunUpdate(27739)â”€â”¬â”€&#123;AliYunDunUpdate&#125;(27740)<br>           â”‚                        â”œâ”€&#123;AliYunDunUpdate&#125;(27741)<br>           â”‚                        â””â”€&#123;AliYunDunUpdate&#125;(27745)<br>           â”œâ”€BT-Panel(27877)â”€â”€â”€&#123;BT-Panel&#125;(27878)<br>           â”œâ”€BT-Task(27899)â”€â”¬â”€sh(8252)â”€â”€â”€python(8253)<br>           â”‚                â”œâ”€&#123;BT-Task&#125;(27900)<br>           â”‚                â”œâ”€&#123;BT-Task&#125;(27901)<br>           â”‚                â”œâ”€&#123;BT-Task&#125;(27902)<br>           â”‚                â”œâ”€&#123;BT-Task&#125;(27903)<br>           â”‚                â”œâ”€&#123;BT-Task&#125;(27904)<br>           â”‚                â”œâ”€&#123;BT-Task&#125;(27905)<br>           â”‚                â”œâ”€&#123;BT-Task&#125;(27906)<br>           â”‚                â””â”€&#123;BT-Task&#125;(27907)<br>           â”œâ”€NetworkManager(970)â”€â”¬â”€&#123;NetworkManager&#125;(973)<br>           â”‚                     â””â”€&#123;NetworkManager&#125;(974)<br>           â”œâ”€agetty(1090)<br>           â”œâ”€agetty(1091)<br>           â”œâ”€aliyun-service(1080)â”€â”¬â”€&#123;aliyun-service&#125;(1094)<br>           â”‚                      â”œâ”€&#123;aliyun-service&#125;(1095)<br>           â”‚                      â”œâ”€&#123;aliyun-service&#125;(1096)<br>           â”‚                      â”œâ”€&#123;aliyun-service&#125;(1103)<br>           â”‚                      â”œâ”€&#123;aliyun-service&#125;(1106)<br>           â”‚                      â”œâ”€&#123;aliyun-service&#125;(1108)<br>           â”‚                      â””â”€&#123;aliyun-service&#125;(1190)<br>           â”œâ”€assist_daemon(814)â”€â”¬â”€&#123;assist_daemon&#125;(853)<br>           â”‚                    â”œâ”€&#123;assist_daemon&#125;(860)<br>           â”‚                    â”œâ”€&#123;assist_daemon&#125;(861)<br>           â”‚                    â”œâ”€&#123;assist_daemon&#125;(1129)<br>           â”‚                    â”œâ”€&#123;assist_daemon&#125;(1130)<br>           â”‚                    â”œâ”€&#123;assist_daemon&#125;(1131)<br>           â”‚                    â””â”€&#123;assist_daemon&#125;(1132)<br>           â”œâ”€atd(1084)<br>           â”œâ”€auditd(773)â”€â”¬â”€sedispatch(775)<br>           â”‚             â”œâ”€&#123;auditd&#125;(774)<br>           â”‚             â””â”€&#123;auditd&#125;(776)<br>           â”œâ”€chronyd(816,chrony)<br>           â”œâ”€crond(10343)<br>           â”œâ”€dbus-daemon(810,dbus)<br>           â”œâ”€firewalld(28583)â”€â”¬â”€&#123;firewalld&#125;(28661)<br>           â”‚                  â””â”€&#123;firewalld&#125;(28680)<br>           â”œâ”€httpd(10916)â”€â”¬â”€httpd(10919,www)â”€â”¬â”€&#123;httpd&#125;(10986)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10987)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10988)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10989)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10990)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10991)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10992)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10993)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10994)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10995)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10996)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10997)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10998)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10999)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11000)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11001)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11002)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11003)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11004)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11005)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11006)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11007)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11008)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11009)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11010)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11011)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11012)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11013)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11014)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11015)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11016)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11017)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11018)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11019)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11020)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11021)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11022)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11062)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11063)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11064)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11065)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11066)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11067)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11068)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11069)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11070)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11071)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11072)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11073)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11074)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11075)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11076)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11077)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11078)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11079)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11080)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11081)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11082)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11083)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11084)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11085)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11086)<br>           â”‚              â”‚                  â””â”€&#123;httpd&#125;(11087)<br>           â”‚              â”œâ”€httpd(10920,www)â”€â”¬â”€&#123;httpd&#125;(10922)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10923)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10924)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10925)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10926)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10927)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10928)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10929)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10930)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10931)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10932)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10933)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10934)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10935)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10936)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10937)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10938)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10939)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10940)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10941)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10942)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10943)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10944)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10945)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10946)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10947)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10948)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10949)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10950)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10951)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10952)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10953)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10954)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10955)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10956)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10957)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10958)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10960)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10961)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10962)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10963)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10964)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10965)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10966)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10967)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10968)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10969)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10970)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10971)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10972)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10973)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10974)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10975)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10976)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10977)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10978)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10979)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10980)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10981)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10982)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10983)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(10984)<br>           â”‚              â”‚                  â””â”€&#123;httpd&#125;(10985)<br>           â”‚              â”œâ”€httpd(10921,www)â”€â”¬â”€&#123;httpd&#125;(11024)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11025)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11026)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11027)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11028)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11029)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11030)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11031)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11032)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11033)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11034)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11035)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11036)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11037)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11038)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11039)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11040)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11041)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11042)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11043)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11044)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11045)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11046)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11047)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11048)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11049)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11050)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11051)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11052)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11053)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11054)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11055)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11056)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11057)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11058)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11059)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11060)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11088)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11089)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11090)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11091)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11092)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11093)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11094)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11095)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11096)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11097)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11098)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11099)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11100)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11101)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11102)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11103)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11104)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11105)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11106)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11107)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11108)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11109)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11110)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11111)<br>           â”‚              â”‚                  â”œâ”€&#123;httpd&#125;(11112)<br>           â”‚              â”‚                  â””â”€&#123;httpd&#125;(11113)<br>           â”‚              â””â”€httpd(18750,www)â”€â”¬â”€&#123;httpd&#125;(18751)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18752)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18753)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18754)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18755)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18756)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18757)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18758)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18759)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18760)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18761)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18762)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18763)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18764)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18765)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18766)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18767)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18768)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18769)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18770)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18771)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18772)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18773)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18774)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18775)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18776)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18777)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18778)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18779)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18780)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18781)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18782)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18783)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18784)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18785)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18786)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18787)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18789)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18790)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18791)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18792)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18793)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18794)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18795)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18796)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18797)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18798)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18799)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18800)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18801)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18802)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18803)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18804)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18805)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18806)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18807)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18808)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18809)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18810)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18811)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18812)<br>           â”‚                                 â”œâ”€&#123;httpd&#125;(18813)<br>           â”‚                                 â””â”€&#123;httpd&#125;(18814)<br>           â”œâ”€jsvc(13252)â”€â”€â”€jsvc(13253,www)â”€â”¬â”€&#123;jsvc&#125;(13254)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13255)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13256)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13257)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13258)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13259)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13260)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13261)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13262)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13263)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13264)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13265)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13266)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13267)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13270)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13271)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13272)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13273)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13274)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13275)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13276)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13277)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13278)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13279)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13280)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13281)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13282)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13283)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13284)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13285)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13286)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13287)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13288)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13289)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13290)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13291)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13292)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13293)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13294)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13295)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13296)<br>           â”‚                               â”œâ”€&#123;jsvc&#125;(13297)<br>           â”‚                               â””â”€&#123;jsvc&#125;(13298)<br>           â”œâ”€lsmd(803,libstoragemgmt)<br>           â”œâ”€master(17692)â”€â”¬â”€pickup(4334,postfix)<br>           â”‚               â””â”€qmgr(17694,postfix)<br>           â”œâ”€mcelog(801)<br>           â”œâ”€mysqld_safe(1255)â”€â”€â”€mysqld(1929,mysql)â”€â”¬â”€&#123;mysqld&#125;(1935)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1936)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1937)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1938)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1939)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1940)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1941)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1969)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1970)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1971)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1972)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1973)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1974)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1975)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1976)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1977)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1978)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1979)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1980)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1981)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1982)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1983)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1988)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1989)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1990)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1991)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1992)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1993)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1996)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1997)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1998)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(1999)<br>           â”‚                                        â”œâ”€&#123;mysqld&#125;(2000)<br>           â”‚                                        â””â”€&#123;mysqld&#125;(31149)<br>           â”œâ”€polkitd(802,polkitd)â”€â”¬â”€&#123;polkitd&#125;(888)<br>           â”‚                      â”œâ”€&#123;polkitd&#125;(890)<br>           â”‚                      â”œâ”€&#123;polkitd&#125;(896)<br>           â”‚                      â”œâ”€&#123;polkitd&#125;(897)<br>           â”‚                      â””â”€&#123;polkitd&#125;(906)<br>           â”œâ”€redis-server(18249,redis)â”€â”¬â”€&#123;redis-server&#125;(18250)<br>           â”‚                           â”œâ”€&#123;redis-server&#125;(18251)<br>           â”‚                           â”œâ”€&#123;redis-server&#125;(18252)<br>           â”‚                           â””â”€&#123;redis-server&#125;(18253)<br>           â”œâ”€rngd(11597)â”€â”¬â”€&#123;rngd&#125;(11598)<br>           â”‚             â””â”€&#123;rngd&#125;(11599)<br>           â”œâ”€rsyslogd(1079)â”€â”¬â”€&#123;rsyslogd&#125;(1105)<br>           â”‚                â””â”€&#123;rsyslogd&#125;(1110)<br>           â”œâ”€smartd(807)<br>           â”œâ”€sshd(1083)â”€â”€â”€sshd(20824)â”€â”€â”€sshd(20838)â”€â”€â”€bash(20839)â”€â”¬â”€pstree+<br>           â”‚                                                      â”œâ”€vim(21+<br>           â”‚                                                      â””â”€vim(22+<br>           â”œâ”€sssd(797)â”€â”¬â”€sssd_be(908)<br>           â”‚           â””â”€sssd_nss(909)<br>           â”œâ”€systemd(1267)â”€â”€â”€(sd-pam)(1270)<br>           â”œâ”€systemd-journal(588)<br>           â”œâ”€systemd-logind(914)<br>           â”œâ”€systemd-resolve(1034,systemd-resolve)<br>           â”œâ”€systemd-udevd(621)<br>           â””â”€tuned(975)â”€â”¬â”€&#123;tuned&#125;(1046)<br>                        â”œâ”€&#123;tuned&#125;(1050)<br>                        â””â”€&#123;tuned&#125;(1067)<br></code></pre></td></tr></table></figure><p>ç»“æŸè¿›ç¨‹ï¼šæ€æ‰è¿›ç¨‹ï¼Œç­‰ä»·äºWindowç»“æŸä»»åŠ¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">kill -9 è¿›ç¨‹id<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linuxç¬”è®°03-Linuxç³»ç»Ÿåˆæ¢</title>
    <link href="/posts/2021/01/17/Linux%E7%AC%94%E8%AE%B003-Linux%E7%B3%BB%E7%BB%9F%E5%88%9D%E6%8E%A2/"/>
    <url>/posts/2021/01/17/Linux%E7%AC%94%E8%AE%B003-Linux%E7%B3%BB%E7%BB%9F%E5%88%9D%E6%8E%A2/</url>
    
    <content type="html"><![CDATA[<h2 id="Linuxç³»ç»Ÿåˆæ¢"><a href="#Linuxç³»ç»Ÿåˆæ¢" class="headerlink" title="Linuxç³»ç»Ÿåˆæ¢"></a>Linuxç³»ç»Ÿåˆæ¢</h2><blockquote><p><strong>å¼€æœºç™»å½•</strong></p></blockquote><p>å¼€æœºä¼šå¯åŠ¨è®¸å¤šç¨‹åºï¼Œå®ƒä»¬åœ¨Windowsä¸­å«åšâ€œæœåŠ¡â€(service)ï¼Œåœ¨Linuxå°±å«åšâ€œ<strong>å®ˆæŠ¤è¿›ç¨‹</strong>â€(daemon)ã€‚</p><p>å¼€æœºæˆåŠŸåï¼Œä¼šæ˜¾ç¤ºä¸€ä¸ªæ–‡æœ¬ç™»å½•ç•Œé¢ã€‚è¿™ä¸ªç•Œé¢å°±æ˜¯æˆ‘ä»¬ç»å¸¸çœ‹åˆ°çš„ç™»å½•ç•Œé¢ï¼Œåœ¨è¿™ä¸ªç™»å½•ç•Œé¢ä¼šæç¤ºç”¨æˆ·è¾“å…¥ç”¨æˆ·åï¼Œè€Œç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå°†ä½œä¸ºå‚æ•°ä¼ ç»™loginç¨‹åºæ¥éªŒè¯ç”¨æˆ·çš„èº«ä»½ï¼Œå¯†ç æ˜¯ä¸æ˜æ–‡æ˜¾ç¤ºçš„ï¼Œè¾“å®Œç¡®è®¤å›è½¦å³å¯ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œç”¨æˆ·çš„ç™»å½•æ–¹å¼æœ‰ä¸‰ç§ï¼š</p><ul><li>å‘½ä»¤è¡Œç™»å½•</li><li>SSHç™»å½•</li><li>å›¾å½¢ç•Œé¢ç™»å½•</li></ul><p>æœ€é«˜æƒé™è´¦æˆ·ä¸ºrootï¼Œå¯ä»¥æ“ä½œä¸€åˆ‡ã€‚</p><blockquote><p><strong>å…³æœº</strong></p></blockquote><p>åœ¨Linuxé¢†åŸŸå†…å¤§å¤šç”¨åœ¨æœåŠ¡å™¨ä¸Šï¼Œå¾ˆå°‘æœ‰å…³æœºçš„æ“ä½œï¼Œæ¯•ç«ŸæœåŠ¡å™¨ä¸Šè·‘ä¸€ä¸ªæœåŠ¡æ˜¯é™æœŸå†…æ°¸æ— æ­¢å¢ƒçš„ã€‚é™¤éç‰¹æ®Šæƒ…å†µä¸‹ï¼Œä¸å¾—å·²æ‰ä¼šå…³æœºã€‚</p><p>å…³æœºæŒ‡ä»¤ä¸ºï¼šshutdown</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs bash">sync <span class="hljs-comment"># å°†æ•°æ®ç”±å†…å­˜åŒæ­¥åˆ°ç¡¬ç›˜ä¸­</span><br><br>shutdown <span class="hljs-comment"># å…³æœºæŒ‡ä»¤ï¼Œå¯ä»¥ man shutdown æ¥çœ‹å¸®åŠ©æ–‡æ¡£</span><br><br>shutdown -h 10 <span class="hljs-comment"># ç³»ç»Ÿå°†åœ¨10åˆ†é’Ÿåå…³æœº</span><br><br>shutdown -h +10 <span class="hljs-comment"># ç³»ç»Ÿå°†åœ¨10åˆ†é’Ÿåå…³æœº</span><br><br>shutdown -h now <span class="hljs-comment"># ç«‹åˆ»å…³æœº</span><br><br>shutdown -h 20:25 <span class="hljs-comment"># ç³»ç»Ÿåœ¨ä»Šå¤©20:25å…³æœº</span><br><br>shutdown -r now <span class="hljs-comment"># ç³»ç»Ÿç«‹åˆ»é‡å¯</span><br><br>shutdown -r now +10 <span class="hljs-comment"># ç³»ç»Ÿ10åˆ†é’Ÿåé‡å¯</span><br><br>reboot <span class="hljs-comment"># é‡å¯ï¼Œç­‰åŒäºshutdown -r now</span><br><br>halt <span class="hljs-comment"># å…³é—­ç³»ç»Ÿï¼Œç­‰åŒäºshutdown -h now </span><br><br>poweroff <span class="hljs-comment"># å…³é—­ç³»ç»Ÿï¼Œç­‰åŒäºshutdown -h now </span><br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šä¸ç®¡æ˜¯é‡å¯ç³»ç»Ÿè¿˜æ˜¯å…³é—­ç³»ç»Ÿï¼Œé¦–å…ˆè¦è¿è¡Œ <strong>sync</strong> å‘½ä»¤ï¼ŒæŠŠå†…å­˜æ•°æ®åŒæ­¥åˆ°ç£ç›˜ä¸­ã€‚</p><blockquote><p>ç³»ç»Ÿç›®å½•ç»“æ„</p></blockquote><p>ç™»å½•Linuxç³»ç»Ÿåï¼Œåœ¨å½“å‰å‘½ä»¤çª—å£è¾“å…¥å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ls / <span class="hljs-comment"># æ˜¾ç¤ºæ ¹ç›®å½•ä¸‹çš„æ–‡ä»¶</span><br></code></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼Œå¦‚ä¸‹æ‰€ç¤º</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@iZ2zeh7ydg2bbydds175q0Z ~] ls /<br>bin   dev  home  lib64  mnt  patch  root  sbin  sys  usr  www<br>boot  etc  lib   media  opt  proc   run   srv   tmp  var<br></code></pre></td></tr></table></figure><p>æ ‘å½¢ç›®å½•ç»“æ„ï¼š</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°03-Linuxç³»ç»Ÿåˆæ¢/tree_dir.jpg" alt="æ ‘å½¢ç›®å½•" style="zoom:67%;"><p>ä»¥ä¸‹æ˜¯å¯¹è¿™äº›ç›®å½•çš„è§£é‡Šï¼š</p><ul><li><p><strong>/bin</strong>ï¼šbinæ˜¯Binaryçš„ç¼©å†™ï¼Œè¿™ä¸ªç›®å½•å­˜æ”¾ç€æœ€ç»å¸¸ä½¿ç”¨çš„å‘½ä»¤ã€‚</p></li><li><p><strong>/boo</strong>tï¼šè¿™é‡Œå­˜æ”¾çš„æ˜¯å¯åŠ¨Linuxæ—¶ä½¿ç”¨çš„ä¸€äº›æ ¸å¿ƒæ–‡ä»¶ï¼ŒåŒ…æ‹¬ä¸€äº›è¿æ¥æ–‡ä»¶ä»¥åŠé•œåƒæ–‡ä»¶ã€‚</p></li><li><p><strong>/dev</strong>ï¼šdevæ˜¯Deviceçš„ç¼©å†™ï¼Œå­˜æ”¾çš„æ˜¯Linuxçš„å¤–éƒ¨è®¾å¤‡ï¼Œåœ¨Linuxä¸­è®¿é—®è®¾å¤‡çš„æ–¹å¼å’Œè®¿é—®æ–‡ä»¶çš„æ–¹å¼æ˜¯ç›¸åŒçš„ã€‚</p></li><li><p><strong>/etc</strong>ï¼šè¿™ä¸ªç›®å½•ç”¨æ¥å­˜æ”¾æ‰€æœ‰çš„ç³»ç»Ÿç®¡ç†æ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶å’Œå­ç›®å½•ã€‚</p></li><li><p><strong>/home</strong>ï¼šç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œåœ¨Linuxä¸­ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„ç›®å½•ï¼Œä¸€èˆ¬è¯¥ç›®å½•åæ˜¯ä»¥ç”¨æˆ·çš„è´¦å·åå‘½åçš„ã€‚</p></li><li><p><strong>/lib</strong>ï¼šè¿™ä¸ªç›®å½•å­˜æ”¾ç€ç³»ç»Ÿæœ€åŸºæœ¬çš„åŠ¨æ€è¿æ¥å…±äº«åº“ï¼Œå…¶ä½œç”¨ç±»ä¼¼äºWindowsä¸­çš„DLL(Dynamic Link Library)æ–‡ä»¶ã€‚</p></li><li><p><strong>/lost+found</strong>ï¼šè¿™ä¸ªç›®å½•ä¸€èˆ¬æƒ…å†µä¸ºç©ºï¼Œå½“ç³»ç»Ÿéæ³•å…³æœºåï¼Œè¿™é‡Œå°±å­˜æ”¾äº†ä¸€äº›æ–‡ä»¶ã€‚</p></li><li><p><strong>/media</strong>ï¼šLinuxç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«ä¸€äº›è®¾å¤‡ï¼Œä¾‹å¦‚Uç›˜ã€å…‰é©±ç­‰ï¼Œå½“è¯†åˆ«åï¼ŒLinuxä¼šæŠŠè¯†åˆ«çš„è®¾å¤‡æŒ‚è½½åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚</p></li><li><p><strong>/mnt</strong>ï¼šç³»ç»Ÿæä¾›è¯¥ç›®å½•æ˜¯ä¸ºäº†è®©ç”¨æˆ·ä¸´æ—¶æŒ‚è½½åˆ«çš„æ–‡ä»¶ç³»ç»Ÿçš„ã€‚æˆ‘ä»¬å¯ä»¥æŠŠå…‰é©±æŒ‚è½½åœ¨/mntä¸Šï¼Œç„¶åè¿›å…¥è¯¥ç›®å½•å°±å¯ä»¥æŸ¥çœ‹å…‰é©±çš„å†…å®¹ï¼Œåé¢æˆ‘ä»¬ä¼šæŠŠä¸€äº›æœ¬åœ°æ–‡ä»¶æŒ‚è½½åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚</p></li><li><p><strong>/opt</strong>ï¼šè¿™æ˜¯ç»™ä¸»æœºé¢å¤–å®‰è£…è½¯ä»¶æ‰€æ‘†æ”¾çš„ç›®å½•ã€‚æ¯”å¦‚å®‰è£…ä¸€ä¸ªOracleæ•°æ®åº“å°±å¯ä»¥æ”¾åˆ°è¿™ä¸ªç›®å½•ä¸‹ï¼Œé»˜è®¤ä¸ºç©ºã€‚</p></li><li><p><strong>/proc</strong>ï¼šè¿™ä¸ªç›®å½•æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„ç›®å½•ï¼Œå®ƒæ˜¯ç³»ç»Ÿå†…å­˜çš„æ˜ å°„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç›´æ¥è®¿é—®è¿™ä¸ªç›®å½•æ¥è·å–ç³»ç»Ÿä¿¡æ¯ã€‚</p></li><li><p><strong>/root</strong>ï¼šè¯¥ç›®å½•ä¸ºç³»ç»Ÿç®¡ç†å‘˜ï¼Œä¹Ÿç§°ä¸ºè¶…çº§æƒé™è€…çš„ç”¨æˆ·ä¸»ç›®å½•ã€‚</p></li><li><p><strong>/sbin</strong>ï¼šsæ˜¯Super Userçš„æ„æ€ï¼Œè¿™é‡Œå­˜æ”¾çš„æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨çš„ç³»ç»Ÿç®¡ç†ç¨‹åºã€‚</p></li><li><p><strong>/srv</strong>ï¼šè¯¥ç›®å½•å­˜æ”¾çš„æ˜¯ä¸€äº›æœåŠ¡å™¨å¯åŠ¨ä¹‹åéœ€è¦æå–çš„æ•°æ®ã€‚</p></li><li><p><strong>/sys</strong>ï¼šæ–‡ä»¶ç³»ç»Ÿã€‚</p></li><li><p><strong>/tmp</strong>ï¼šè¯¥ç›®å½•ç”¨æ¥å­˜æ”¾ä¸€äº›ä¸´æ—¶æ–‡ä»¶ã€‚ç”¨å®Œå³ä¸¢çš„æ–‡ä»¶ï¼Œå¯ä»¥æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œæ¯”å¦‚è¯´å®‰è£…åŒ…ã€‚</p></li><li><p><strong>/usr</strong>ï¼šè¿™æ˜¯éå¸¸é‡è¦çš„ä¸€ä¸ªç›®å½•ï¼Œç”¨æˆ·çš„å¾ˆå¤šåº”ç”¨ç¨‹åºå’Œæ–‡ä»¶éƒ½æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œç±»ä¼¼äºWindowsä¸­çš„<code>Programming files</code>ç›®å½•</p></li><li><p><strong>/usr/bin</strong>ï¼šç³»ç»Ÿç”¨æˆ·ä½¿ç”¨çš„åº”ç”¨ç¨‹åºã€‚</p></li><li><p><strong>/usr/sbin</strong>ï¼šè¶…çº§ç”¨æˆ·ä½¿ç”¨çš„æ¯”è¾ƒé«˜çº§çš„ç®¡ç†ç¨‹åºå’Œç³»ç»Ÿå®ˆæŠ¤ç¨‹åºã€‚</p></li><li><p><strong>/var</strong>ï¼šè¿™ä¸ªç›®å½•ä¸­å­˜æ”¾ç€ä¸æ–­æ‰©å……ç€çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬ä¹ æƒ¯å°†é‚£äº›ç»å¸¸è¢«ä¿®æ”¹çš„æ–‡ä»¶æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚åŒ…æ‹¬å„ç§æ—¥å¿—æ–‡ä»¶ã€‚</p></li><li><p><strong>/run</strong>ï¼šè¿™æ˜¯ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿï¼Œå­˜å‚¨ç³»ç»Ÿå¯åŠ¨ä»¥æ¥çš„ä¿¡æ¯ï¼Œå½“ç³»ç»Ÿé‡å¯åï¼Œè¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶åº”è¯¥è¢«åˆ æ‰æˆ–æ¸…é™¤ã€‚</p></li><li><p>/wwwï¼šå­˜æ”¾æœåŠ¡å™¨ç½‘ç«™ç›¸å…³çš„èµ„æºï¼Œç¯å¢ƒï¼Œç½‘ç«™çš„é¡¹ç›®ã€‚</p></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º</title>
    <link href="/posts/2021/01/16/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    <url>/posts/2021/01/16/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<h2 id="Linuxç¯å¢ƒæ­å»º"><a href="#Linuxç¯å¢ƒæ­å»º" class="headerlink" title="Linuxç¯å¢ƒæ­å»º"></a>Linuxç¯å¢ƒæ­å»º</h2><blockquote><p><strong>å‰è¨€</strong></p></blockquote><p>åœ¨å­¦ä¹ Linuxä¹‹å‰ï¼Œæˆ‘éœ€è¦æŠŠLinuxçš„ç¯å¢ƒæ­å»ºå¥½ï¼Œå…¶å®Linuxæ“ä½œç³»ç»Ÿæœ¬èº«ä¹Ÿå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªå¤§çš„è½¯ä»¶ã€‚ä¸‹é¢æˆ‘å°†ä¼šä»¥ä¸¤ç§æ–¹å¼æ­å»ºLinuxç¯å¢ƒï¼Œç¬¬ä¸€ç§æ–¹å¼æ˜¯åœ¨<strong>åœ¨æœ¬åœ°è™šæ‹Ÿæœºä¸Šå®‰è£…CentOS</strong>ï¼Œå…è´¹ï¼›ç¬¬äºŒç§æ–¹å¼æ˜¯<strong>è´­ä¹°äº‘æœåŠ¡å™¨</strong>ï¼Œåœ¨æœåŠ¡å™¨å‘½ä»¤è¡Œæ­å»ºç¯å¢ƒã€‚</p><p><strong>å®‰è£…è™šæ‹Ÿæœºä¼šå ç”¨å†…å­˜ç©ºé—´ï¼Œä½†æ˜¯æ²¡æœ‰ç»æµå‹åŠ›ï¼Œæ¯”è¾ƒå¿«æ·ï¼›è´­ä¹°æœåŠ¡å™¨ä¼šäº§ç”Ÿæ¶ˆè´¹ï¼Œä½†æœ€æ¥è¿‘åŸç”Ÿçš„çº¿ä¸Šå¼€å‘</strong>ã€‚è¿™ä¸¤ç§æ–¹å¼ï¼Œå„æœ‰åˆ©å¼Šï¼Œå…„å¼Ÿç›Ÿå‚è€ƒå³å¯ã€‚</p><blockquote><p><strong>æ–¹å¼ä¸€ï¼šè™šæ‹Ÿæœºå®‰è£…CentOS</strong></p></blockquote><p>é¦–å…ˆåœ¨å®‰è£…CentOSä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆåœ¨æœ¬åœ°å®‰è£…è™šæ‹Ÿæœº <strong>VMware Workstation</strong>ï¼Œè¿™é‡Œæˆ‘ä»¬ä»åå†›ç§‘æŠ€å›­ä¸‹è½½VMware16 proã€‚å½“ç„¶ï¼Œå¦‚æœæœ‰ç»æµæ¡ä»¶ï¼Œå»ºè®®ä»å®˜ç½‘è´­ä¹°æ­£ç‰ˆè™šæ‹Ÿæœºï¼Œä¸‹é¢æ˜¯ä¸‹è½½åœ°å€ï¼š</p><p>åå†›ç§‘æŠ€å›­ä¸‹è½½è™šæ‹Ÿæœºï¼š<a href="https://www.onlinedown.net/soft/2062.htm/">https://www.onlinedown.net/soft/2062.htm/</a></p><blockquote><p><strong>VMware Workstationå®‰è£…æ­¥éª¤</strong></p></blockquote><ol><li><p>åŒå‡»è¿è¡ŒVMware Workstation15è¿è¡Œç¨‹åºï¼Œæ‰“å¼€å¦‚ä¸‹å›¾<strong>å®‰è£…å‘å¯¼ç•Œé¢</strong>ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/install_guide.png" alt="å®‰è£…å‘å¯¼ç•Œé¢"></li><li><p>é˜…è¯»å¦‚ä¸‹å›¾ VMware è™šæ‹Ÿæœºç”¨æˆ·è®¸å¯åè®®ï¼Œ<strong>å‹¾é€‰æˆ‘æ¥å—åè®®</strong>ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/agreement.png" alt="å‹¾é€‰æ¥å—åè®®"></p></li><li><p><strong>è‡ªå®šä¹‰å®‰è£…ç›®å½•</strong>ï¼šé»˜è®¤å®‰è£…åœ¨Cç›˜ç›®å½•ä¸‹ï¼Œæˆ‘å¯ä»¥ç‚¹å‡»â€œæ›´æ”¹â€æŒ‰é’®è‡ªå®šä¹‰å®‰è£…è·¯å¾„ï¼Œå¹¶ç‚¹å‡»ä¸‹ä¸€æ­¥ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/change_path.png" alt="è‡ªå®šä¹‰å®‰è£…ç›®å½•"></p></li><li><p>åœ¨<strong>ç”¨æˆ·ä½“éªŒè®¾ç½®ç•Œé¢</strong>ï¼Œè¿™é‡Œé€‰æ‹©é»˜è®¤è®¾ç½®å³å¯ï¼Œç›´æ¥ç‚¹å‡»ä¸‹ä¸€æ­¥ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/UE.png" alt="ç”¨æˆ·ä½“éªŒè®¾ç½®ç•Œé¢"></p></li><li><p><strong>åˆ›å»ºå¿«æ·æ–¹å¼</strong>ï¼Œæ¡Œé¢å¿«æ·æ–¹å¼ä»¥åŠå¼€å§‹èœå•ç¨‹åºæ–‡ä»¶å¤¹ï¼Œè‡ªé€‰ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/shortcut.png" alt="å¿«æ·æ–¹å¼"></p></li><li><p>ç¡®è®¤ä¿¡æ¯æ— è¯¯ï¼Œ<strong>ç‚¹å‡»å®‰è£…</strong>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/install.png" alt="å‡†å¤‡å¥½å®‰è£…"></p></li><li><p>ç­‰å¾…VMware Workstation 16 Proå®‰è£…è¿‡ç¨‹ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/install_pro.png" alt="ç­‰å¾…å®‰è£…"></p></li><li><p>åœ¨å®‰è£…æˆåŠŸç•Œé¢ï¼Œè¾“å…¥<strong>è®¸å¯è¯ç§˜é’¥</strong>ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘æ¨è3æ¡è®¸å¯è¯ç§˜é’¥ï¼š</p><p><em>ZF3R0-FHED2-M80TY-8QYGC-NPKYF</em><br><em>YF390-0HF8P-M81RQ-2DXQE-M2UT6</em><br><em>ZF71R-DMX85-08DQY-8YMNC-PPHV8</em></p></li></ol><p>   <img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/secret_key.png" alt="è®¸å¯è¯ç§˜é’¥"></p><ol start="9"><li><p><strong>å®‰è£…å‘å¯¼å®Œæˆ</strong>ï¼Œé€€å‡ºå³å¯ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/install_finish.png" alt="å®‰è£…å®Œæˆ"></p></li><li><p>æ‰“å¼€è½¯ä»¶ï¼Œå¯ä»¥çœ‹åˆ°<strong>è½¯ä»¶çš„ä¸»ç•Œé¢</strong>ï¼Œå¹¶ä¸”å·²ç»å®Œç¾æ¿€æ´»ï¼</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/work_ui.png" alt="è½¯ä»¶ç•Œé¢" style="zoom: 50%;"></li><li><p>è¯¦ç»†æ“ä½œå¯ä»¥æŸ¥çœ‹VMware pro 16.0çš„ä½¿ç”¨æ–‡æ¡£</p><p>æ–‡æ¡£åœ°å€ï¼š<a href="https://docs.vmware.com/cn/VMware-Workstation-Pro/16.0/com.vmware.ws.using.doc/GUID-0EE752F8-C159-487A-9159-FE1F646EE4CA.html">https://docs.vmware.com/cn/VMware-Workstation-Pro/16.0/com.vmware.ws.using.doc/GUID-0EE752F8-C159-487A-9159-FE1F646EE4CA.html</a></p></li></ol><p>å…¶å®å‘¢ï¼Œè¿˜æœ‰ä¸€ç§ç®€å•çš„å®‰è£…è™šæ‹Ÿæœºæ–¹æ³•ï¼Œé‚£å°±æ˜¯æµæ°“è½¯ä»¶360çš„<strong>è½¯ä»¶ç®¡å®¶</strong>ï¼ä½†æ˜¯ï¼Œå®ƒçš„ç‰ˆæœ¬å¥½åƒåœæ›´å¾ˆä¹…äº†ï¼Œä¸è¿‡ä¹Ÿä¸å¤±ä¸ºä¸€ç§èµ„æºï¼Œè§‰å¾—å®‰è£…éº»çƒ¦çš„æœ‹å‹ï¼Œå¯ä»¥ä½¿ç”¨360ä¸€é”®å®‰è£…ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/install_360.png" alt="360è½¯ä»¶ç®¡å®¶" style="zoom: 67%;"><blockquote><p><strong>è™šæ‹Ÿæœºå®‰è£…å®Œæ¯•ä¹‹åå‘¢ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è™šæ‹Ÿæœºä¸Šå®‰è£…CentOSã€‚</strong></p></blockquote><p>ä»å“ªé‡Œå®‰è£…CentOS 8å‘¢ï¼Ÿæˆ‘ä»¬é¢å‰æœ‰æ¥ä¸¤ç§é€‰æ‹©ï¼Œä¸€ç§æ˜¯ä»å®˜ç½‘ä¸‹è½½ï¼Œä¸€ç§æ˜¯é•œåƒä¸‹è½½ï¼Œä¸‹é¢æˆ‘ä¸€ä¸€æŠŠä¸‹è½½åœ°å€åˆ—ä¸¾å‡ºæ¥ã€‚</p><p><strong>ä¸‹è½½CentOS 8</strong> </p><p>å®˜ç½‘CentOS 8ä¸‹è½½ï¼š<a href="https://www.centos.org/download/">https://www.centos.org/download/</a></p><p>é˜¿é‡ŒCentOS 8ä¸‹è½½ï¼š<a href="https://mirrors.aliyun.com/centos/8/isos/x86_64/">https://mirrors.aliyun.com/centos/8/isos/x86_64/</a></p><p>æ¸…åCentOS 8ä¸‹è½½ï¼š<a href="https://mirrors.tuna.tsinghua.edu.cn/centos/8/isos/x86_64/">https://mirrors.tuna.tsinghua.edu.cn/centos/8/isos/x86_64/</a></p><p>æ‰¾ä¸ªå¤§ç‚¹çš„æ–‡ä»¶å¤¹ï¼Œç„¶åæŠŠCentOS 8ä¸‹è½½åˆ°è¯¥æ–‡ä»¶å¤¹ä¸‹å³å¯ï¼Œæˆ‘è¿™é‡Œé€Ÿåº¦è¿˜å¯ä»¥6M/sï¼Œ25åˆ†é’Ÿå°±ä¸‹è½½å®Œäº†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/download_centos.png" alt="ä¸‹è½½CentOS 8"></p><p><strong>åˆ›å»ºè™šæ‹Ÿæœº</strong></p><ol><li><p>æ‰“å¼€VMwareï¼Œç‚¹å‡»<strong>åˆ›å»ºæ–°çš„è™šæ‹Ÿæœº</strong>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/new_virtual_machine.png" alt="åˆ›å»ºæ–°çš„è™šæ‹Ÿæœº" style="zoom:75%;"></li><li><p>åœ¨<strong>æ–°å»ºè™šæ‹Ÿæœºå‘å¯¼ç•Œé¢</strong>ï¼Œé€‰æ‹©<strong>è‡ªå®šä¹‰é«˜çº§</strong>ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/advanced.png" alt="è‡ªå®šä¹‰é«˜çº§é€‰é¡¹"></p></li><li><p>åœ¨é€‰æ‹©<strong>è™šæ‹Ÿæœºç¡¬ä»¶å…¼å®¹æ€§</strong>ç•Œé¢ï¼Œé‡‡ç”¨é»˜è®¤è®¾ç½®ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/handware.png" alt="è™šæ‹Ÿæœºç¡¬ä»¶å…¼å®¹"></p></li><li><p>åœ¨<strong>å®‰è£…å®¢æˆ·æœºæ“ä½œç³»ç»Ÿç•Œé¢</strong>ï¼Œé€‰æ‹©<strong>ç¨åå®‰è£…æ“ä½œç³»ç»Ÿ</strong>ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/install_os.png" alt="ç¨åå®‰è£…OS"></p></li><li><p>é€‰æ‹©Linuxï¼Œ<strong>ç‰ˆæœ¬é€‰æ‹©Linux 4 Ã—64ä½</strong>ï¼Œå› ä¸ºCentOS 8ç³»åˆ—åŸºäº Linux å†…æ ¸ 4.18ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/os_version.png" alt="é€‰æ‹©Linuxæ“ä½œç³»ç»Ÿå’Œç‰ˆæœ¬"></p></li><li><p><strong>å‘½åè™šæ‹Ÿæœºé¡µé¢</strong>ï¼Œè™šæ‹Ÿæœºåç§°éšä¾¿èµ·ï¼Œå®‰è£…ä½ç½®å°½é‡é€‰ç©ºé—´å¤§çš„ç£ç›˜ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/define_virtual_machine.png" alt="å‘½åè™šæ‹Ÿæœº"></p></li><li><p><strong>å¤„ç†æœºé…ç½®é¡µé¢</strong>ï¼Œæ ¹æ®è‡ªå·±çš„ä¸»æœºCPUé…ç½®ç¡®å®šï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/cpu.png" alt="å¤„ç†æœºé…ç½®"></p></li><li><p><strong>åˆ†é…è™šæ‹Ÿæœºå†…å­˜ç•Œé¢</strong>ï¼Œæˆ‘çš„ç”µè„‘å†…å­˜8Gï¼Œæˆ‘åˆ†é…ç»™å®ƒ1Gï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/memory.png" alt="åˆ†é…è™šæ‹Ÿæœºå†…å­˜"></p></li><li><p>è®¾ç½®**è™šæ‹Ÿæœºç½‘ç»œè¿æ¥æ¨¡å¼(**NAT)ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/nat.png" alt="è®¾ç½®ç½‘ç»œè¿æ¥æ¨¡å¼"></p></li><li><p><strong>é€‰æ‹©I/Oæ§åˆ¶å™¨ç±»å‹</strong>ï¼Œé€‰å®šLSI Logicï¼ˆæ¨èï¼‰å³å¯ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/io.png" alt="é€‰æ‹©I/Oæ§åˆ¶å™¨ç±»å‹"></p></li><li><p><strong>é€‰æ‹©ç£ç›˜ç±»å‹</strong>ï¼Œé€‰æ‹©æ¨èçš„SCSIç±»å‹å³å¯ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/scsi.png" alt="é€‰æ‹©ç£ç›˜ç±»å‹"></p></li><li><p><strong>é€‰æ‹©ç£ç›˜</strong>ï¼Œä»ç„¶æ˜¯é€‰æ‹©é»˜è®¤çš„åˆ›å»ºæ–°è™šæ‹Ÿç£ç›˜ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/new_virtual.png" alt="åˆ›å»ºæ–°è™šæ‹Ÿç£ç›˜"></p></li><li><p><strong>æŒ‡å®šç£ç›˜å®¹é‡</strong>ï¼Œæ ¹æ®è‡ªå·±çš„éœ€è¦åˆ†é…ç£ç›˜å®¹é‡ï¼Œå‹¾é€‰å°†è™šæ‹Ÿç£ç›˜æ‹†åˆ†æˆå¤šä¸ªæ–‡ä»¶ï¼ˆæ–¹ä¾¿ç”¨å‚¨å­˜è®¾å¤‡æ‹·è´å¤åˆ¶è™šæ‹Ÿæœºåˆ°å…¶ä»–è®¾å¤‡ï¼‰ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/disk_size.png" alt="æŒ‡å®šç£ç›˜å®¹é‡"></p></li><li><p><strong>æŒ‡å®šç£ç›˜æ–‡ä»¶å­˜å‚¨ä½ç½®</strong>ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©Eç›˜ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/centos_path.png" alt="æŒ‡å®šç£ç›˜æ–‡ä»¶å­˜å‚¨ä½ç½®"></p></li><li><p><strong>å‡†å¤‡å¥½åˆ›å»ºè™šæ‹Ÿæœºç•Œé¢</strong>ï¼Œå¦‚æœæƒ³å®‰è£…å›¾å½¢ç•Œé¢ï¼Œå¯ä»¥è‡ªå®šä¹‰ç¡¬ä»¶ä¿®æ”¹å†…å­˜å’Œç£ç›˜å¤§å°ï¼Œç‚¹å‡»å®Œæˆã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/ready.png" alt="å®Œæˆåˆ›å»º"></p></li></ol><p><strong>å®‰è£…CentOS 8</strong></p><ol><li><p>åˆ›å»ºå¥½è™šæ‹Ÿæœºåï¼Œç‚¹å‡»<strong>ç¼–è¾‘è™šæ‹Ÿæœºè®¾ç½®</strong>ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/config.png" alt="ç¼–è¾‘è™šæ‹Ÿæœºè®¾ç½®" style="zoom: 67%;"></li><li><p>é€‰æ‹©<strong>CD/DVD</strong>ï¼Œå‹¾é€‰å¯åŠ¨æ—¶è¿æ¥ï¼Œå†<strong>é€‰æ‹©ä½¿ç”¨ISOæ˜ åƒæ–‡ä»¶</strong>ï¼Œæ‰¾åˆ°ä¸‹è½½å¥½çš„ç³»ç»Ÿé•œåƒæ–‡ä»¶æ·»åŠ è¿›å»ï¼Œæœ€åç¡®å®šã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/cd.png" alt="é€‰æ‹©ISOæ˜ åƒæ–‡ä»¶" style="zoom: 80%;"></li><li><p>ç‚¹å‡»<strong>å¼€å¯è™šæ‹Ÿæœº</strong>ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/start_machine.png" alt="å¼€å¯è™šæ‹Ÿæœº" style="zoom: 67%;"></li><li><p><strong>å¯åŠ¨è™šæ‹Ÿæœºå¤±è´¥</strong>ï¼Œå¼¹å‡ºé”™è¯¯ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/error.png" alt="Intel VT-xç¦ç”¨"></p></li><li><p><strong>å€Ÿé‰´åšæ–‡</strong><a href="http://www.xitongcheng.com/jiaocheng/xtazjc_article_38955.html">http://www.xitongcheng.com/jiaocheng/xtazjc_article_38955.html</a></p><p>Intel VT-xå®Œæ•´åç§°æ˜¯Intel Virtualization Technologyï¼Œå°±æ˜¯Intelè™šæ‹ŸæŠ€æœ¯ï¼Œå¼€å¯å®ƒå¯ä»¥è®©ç¡¬ä»¶å¹³å°åŒæ—¶è¿è¡Œå¤šä¸ªæ“ä½œç³»ç»Ÿï¼Œæ˜¯è™šæ‹Ÿæœºè½¯ä»¶è¿è¡Œå¿…å¤‡çš„æŠ€æœ¯ä¹‹ä¸€ï¼Œå¦‚æœç¦ç”¨ï¼Œå°±ä¼šå¼¹å‡ºâ€œæ­¤ä¸»æœºæ”¯æŒIntel VT-x,ä½†Intel VT-xå¤„äºç¦ç”¨çŠ¶æ€â€è¿™ä¸ªæç¤ºï¼Œè§£å†³åŠæ³•å°±æ˜¯è¿›BIOSå¼€å¯Intel Virtualization Technologyã€‚</p><p>æˆ‘çš„ç¬”è®°æœ¬æ˜¯è”æƒ³ï¼Œæ‰€ä»¥æˆ‘çš„æ“ä½œæ˜¯ï¼š</p><ul><li><p>å¼€æœºç‚¹å‡»F2è¿›å…¥BIOSï¼Œæ¥ç€è¿›å…¥åˆ°biosçš„ç•Œé¢ã€‚</p></li><li><p>é€‰æ‹©æ ‡é¢˜æ çš„configurationé€‰é¡¹ï¼Œåœ¨ç•Œé¢çš„ä¸‹æ–¹å°±å¯ä»¥çœ‹åˆ°intel virtual technologyçš„é€‰é¡¹ï¼Œä¹Ÿå°±æ˜¯intelè™šæ‹ŸåŒ–æŠ€æœ¯é€‰é¡¹ï¼Œåœ¨å…¶åè¾¹æ˜¾ç¤ºdisabledé€‰é¡¹ï¼Œä¹Ÿå°±æ˜¯ç¦ç”¨çš„æ„æ€ï¼ŒæŒ‰å›è½¦é”®ã€‚</p></li><li><p>æ¥ç€ä¼šå¼¹å‡ºä¸€ä¸ªå°çª—å£çš„é€‰é¡¹ï¼Œåœ¨å…¶ä¸­é€‰æ‹©enabledé€‰é¡¹ï¼Œä¹Ÿå°±æ˜¯å¯ç”¨çš„æ„æ€ï¼ŒåŒæ ·æ˜¯æŒ‰å›è½¦é”®ç¡®è®¤é€‰æ‹©ã€‚</p></li><li><p>æ¥ç€å°±å¯ä»¥çœ‹åˆ°intel virtual technologyé€‰é¡¹åè¾¹çš„æ ‡è¯†å˜æˆäº†enabledé€‰é¡¹ï¼Œä¹Ÿå°±æ˜¯æ­¤æ—¶å¯ç”¨äº†è¯¥åŠŸèƒ½ã€‚</p></li></ul></li><li><p>æŒ‰ç…§5å½“ä¸­åšæ–‡çš„è¯´æ³•ï¼Œé‡å¯åï¼Œä¸ç®¡æ€ä¹ˆæŒ‰F2éƒ½ä¸ä¼šè¿›å…¥BIOSç•Œé¢ï¼Œæœç´¢å¤„ç†åŠæ³•ï¼Œå¾—åˆ°åŸå› ï¼š<strong>Win10ç³»ç»Ÿé»˜è®¤æ‰“å¼€äº†ã€å¿«é€Ÿå¯åŠ¨ã€‘ï¼Œä¼šå¯¼è‡´ç¬”è®°æœ¬å¼€æœºè¿‡å¿«ï¼Œæ— æ³•è¿›å…¥BIOSå¼€å¯intel vt-xã€‚</strong></p><p>ã€å¿«é€Ÿå¯åŠ¨ã€‘åŸç†ï¼šå…³æœºæ—¶ Windows 10 ä¼šå°†å½“å‰æ‰€æœ‰ç³»ç»ŸçŠ¶æ€å†™å…¥åˆ°ä¼‘çœ æ–‡ä»¶ä¸­ï¼Œç„¶åå†å…³æœºï¼Œå½“å†æ¬¡å¯åŠ¨è®¡ç®—æœºæ—¶ï¼ŒWindwos å°±ä¸ç”¨å†é‡æ–°åŠ è½½ç³»ç»Ÿå†…æ ¸ã€é©±åŠ¨ç¨‹åºå’Œç³»ç»ŸçŠ¶æ€ï¼Œè€Œæ˜¯ç›´æ¥ä»ä¼‘çœ æ–‡ä»¶è¿›è¡ŒåŠ è½½å¹¶åˆ·å…¥å†…å­˜ï¼Œå®Œæˆä¹‹åç›´æ¥å‘ç”¨æˆ·æ¨é€ Windwos ç™»å½•ç•Œé¢ã€‚</p><p><strong>è§£å†³åŠæ³•</strong>ï¼š</p><ol><li><p>å…³é—­ã€å¿«é€Ÿå¯åŠ¨ã€‘</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/power.png" alt="è¿›å…¥æ§åˆ¶é¢æ¿ç”µæºé€‰é¡¹"></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/no_quick_start.png" alt="    "></p></li><li><p>windowsæ¢å¤åŠŸèƒ½</p><p>é¦–å…ˆï¼Œé€‰æ‹©æ¢å¤ä¸­çš„ç«‹å³é‡æ–°å¯åŠ¨</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/advance_start.png" alt="ç‚¹å‡»ç«‹å³é‡æ–°å¯åŠ¨" style="zoom:67%;"><p>ç„¶åï¼Œé‡å¯åï¼Œä¼šè¿›å…¥<strong>é«˜çº§é€‰é¡¹</strong>ï¼Œé€‰æ‹©<strong>ç–‘éš¾è§£ç­”</strong>ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/problem.png" alt="ç–‘éš¾è§£ç­”" style="zoom: 67%;"><p>é€‰æ‹©UFFIå›ºä»¶è®¾ç½®ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/å›ºä»¶.png" alt="UFFIå›ºä»¶è®¾ç½®" style="zoom:67%;"><p>è‡ªåŠ¨é‡å¯ï¼Œè¿›å…¥BIOSç•Œé¢ã€‚é€‰æ‹©æ ‡é¢˜æ çš„configurationé€‰é¡¹ï¼Œåœ¨ç•Œé¢çš„ä¸‹æ–¹å°±å¯ä»¥çœ‹åˆ°intel virtual technologyçš„é€‰é¡¹ï¼Œä¹Ÿå°±æ˜¯intelè™šæ‹ŸåŒ–æŠ€æœ¯é€‰é¡¹ï¼Œåœ¨å…¶åè¾¹æ˜¾ç¤ºdisabledé€‰é¡¹ï¼Œä¹Ÿå°±æ˜¯ç¦ç”¨çš„æ„æ€ï¼ŒæŒ‰å›è½¦é”®ã€‚æ¥ç€ä¼šå¼¹å‡ºä¸€ä¸ªå°çª—å£çš„é€‰é¡¹ï¼Œåœ¨å…¶ä¸­é€‰æ‹©enabledé€‰é¡¹ï¼Œä¹Ÿå°±æ˜¯å¯ç”¨çš„æ„æ€ï¼ŒåŒæ ·æ˜¯æŒ‰å›è½¦é”®ç¡®è®¤é€‰æ‹©ã€‚æ¥ç€å°±å¯ä»¥çœ‹åˆ°intel virtual technologyé€‰é¡¹åè¾¹çš„æ ‡è¯†å˜æˆäº†enabledé€‰é¡¹ï¼Œä¹Ÿå°±æ˜¯æ­¤æ—¶å¯ç”¨äº†è¯¥åŠŸèƒ½ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/ç½‘ç»œè™šæ‹Ÿ.png" alt="å¼€å¯ç½‘ç»œè™šæ‹Ÿé€‰é¡¹" style="zoom:67%;"><p>æœ€åï¼ŒF10ä¿å­˜è®¾ç½®å¹¶é€€å‡ºï¼Œé‡å¯å³å¯ã€‚</p></li></ol></li><li><p>å†æ¬¡å¼€å¯è™šæ‹Ÿæœºï¼Œé€‰æ‹© <strong>Install CentOS Linux8</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/install_8.png" alt="å®‰è£…CentOS 8" style="zoom:67%;"></li><li><p>å®‰è£…å®Œæˆåï¼Œ<strong>é€‰æ‹©è¯­è¨€</strong>ï¼Œç‚¹å‡»ç»§ç»­ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/select_la.png" alt="é€‰æ‹©è¯­è¨€" style="zoom:67%;"></li><li><p>é¦–å…ˆæ‰“å¼€<strong>ç½‘ç»œå’Œä¸»æœºå</strong>ï¼Œç»™è™šæ‹Ÿæœºè¿ä¸Šç½‘ç»œã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/open_int.png" alt="æ‰“å¼€ç½‘ç»œå’Œä¸»æœºå" style="zoom: 67%;"><p>å¦‚æœç½‘ç»œè¿æ¥ä¸ä¸Šï¼Œå¤šåŠæ˜¯DHCPé—®é¢˜ï¼Œå‚è€ƒåšå®¢ï¼š<a href="https://blog.csdn.net/suoyudong/article/details/83037670">https://blog.csdn.net/suoyudong/article/details/83037670</a></p></li><li><p>ç‚¹å‡»æ—¶é—´å’Œæ—¥æœŸï¼Œè®¾ç½®ç³»ç»Ÿæ—¶é—´å¹¶æ›´æ”¹æ—¶åŒº(æ‰“å¼€ç½‘ç»œæ—¶é—´)ï¼š</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/date.png" alt="ä¿®æ”¹æ—¶åŒº" style="zoom:67%;"></li><li><p>é€‰æ‹©å®‰è£…ç›®çš„åœ°ï¼Œè¿›è¡Œè‡ªå®šä¹‰é…ç½®ï¼Œç‚¹å‡»å®Œæˆã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/install_loc.png" alt="é€‰æ‹©å®‰è£…ç›®çš„åœ°" style="zoom:67%;"></li><li><p>æ·»åŠ ç£ç›˜åˆ†åŒº</p><p>ä¸‹é¢æ˜¯Linuxçš„åˆ†åŒºçŸ¥è¯†ï¼š</p><ul><li><p>äº¤æ¢åˆ†åŒº(sqap):äº¤æ¢åˆ†åŒºå’ŒWindowsçš„è™šæ‹Ÿå†…å­˜å¾ˆåƒã€‚æˆ‘ä»¬è™šæ‹Ÿæœºå†…å­˜ä¸º1Gï¼Œæˆ‘ä»¬åˆ’ç»™å®ƒ2Gã€‚</p></li><li><p>å¯åŠ¨åˆ†åŒº(boot):200MBè¶³å¤Ÿ</p></li><li><p>æ ¹åˆ†åŒº(/)ï¼šå‰©ä½™ç©ºé—´éƒ½ç»™æ ¹åˆ†åŒºï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å•ç‹¬åˆ’å‡º/dataåˆ†åŒºï¼Œä¸“é—¨ç”¨æ¥å­˜å‚¨å­˜æ•°æ®ï¼Œä¸è¿‡è¿™é‡Œæˆ‘ä»¬å…ˆä¸è¿™æ ·åšï¼Œç›´æ¥å…¨éƒ¨éƒ½ç»™æ ¹åˆ†åŒºã€‚</p></li></ul><p>æŒ‰ç…§ä¸‹å›¾é¡ºåºä¾æ¬¡è¿›è¡Œè®¾ç½®ï¼š</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/boot.png" alt="bootåˆ†åŒº" style="zoom:67%;"><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/swap.png" alt="swapåˆ†åŒº" style="zoom:67%;"></li></ol><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/æ ¹.png" alt="æ ¹åˆ†åŒº" style="zoom:67%;"><ol start="11"><li><p>ç‚¹å‡»å®Œæˆåä¼šå¼¹å‡º<strong>æ›´æ”¹æ‘˜è¦é¡µé¢</strong>ï¼Œç‚¹å‡»æ¥å—æ›´æ”¹ï¼š</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/accept_change.png" alt="æ¥å—æ›´æ”¹" style="zoom:67%;"></li><li><p><strong>ä¿®æ”¹rootå¯†ç </strong>ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/change_pwd.png" alt="ä¿®æ”¹rootå¯†ç " style="zoom:67%;"></li><li><p>åˆ›å»ºç”¨æˆ·,è¿™é‡Œæˆ‘åˆ›å»ºçš„ç”¨æˆ·å…¨åæ˜¯AtroxQWï¼Œç”¨æˆ·åæ˜¯atroxqwï¼Œå¹¶è®¾ç½®ä¸ºç®¡ç†å‘˜ã€‚è¿™ä¸€æ­¥å¿˜äº†æˆªå›¾ï¼Œé‡‡ç”¨ç½‘ä¸Šçš„å›¾ç‰‡ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/create_user.png" alt="åˆ›å»ºç”¨æˆ·" style="zoom: 80%;"></li><li><p>ç‚¹å‡»<strong>å¼€å§‹å®‰è£…</strong>ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/install_2.png" alt="å¼€å§‹å®‰è£…" style="zoom:67%;"></li><li><p>å®‰è£…è¿‡ç¨‹ä¸­æŠ¥é”™ï¼ŒError in posttrans scriptlet in rpm package kmod-kv</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/error2.png" alt="å®‰è£…æŠ¥é”™" style="zoom: 67%;"></li><li><p>å‚è€ƒåšæ–‡<a href="https://blog.csdn.net/weixin_42789947/article/details/108687277?utm_medium=distribute.pc_relevant_t0.none-task-blog-OPENSEARCH-1.control&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-OPENSEARCH-1.control%EF%BC%8C%E5%88%86%E5%8C%BA%E7%9A%84%E7%9A%84%E6%97%B6%E5%80%99%E6%8A%8A/boot%E5%88%86%E5%8C%BA%E7%9A%84%E5%A4%A7%E5%B0%8F%E6%94%B9%E6%88%90300M%EF%BC%8C%E5%AE%9E%E6%B5%8B%E6%9C%89%E6%95%88%E3%80%82">https://blog.csdn.net/weixin_42789947/article/details/108687277?utm_medium=distribute.pc_relevant_t0.none-task-blog-OPENSEARCH-1.control&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-OPENSEARCH-1.controlï¼Œåˆ†åŒºçš„çš„æ—¶å€™æŠŠ/bootåˆ†åŒºçš„å¤§å°æ”¹æˆ300Mï¼Œå®æµ‹æœ‰æ•ˆã€‚</a></p></li><li><p>å®‰è£…å®Œæˆåç‚¹å‡»é‡å¯ç³»ç»Ÿã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/restart.png" alt="é‡å¯ç³»ç»Ÿ" style="zoom:67%;"></li><li><p>é‡å¯å®Œæˆåç‚¹å‡»LICENS INFORMATIONæ¥å—è®¸å¯è¯,å‹¾é€‰åŒæ„è®¸å¯ï¼Œç„¶åç‚¹å‡»å®Œæˆã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/accept_license.png" alt="æ¥å—è®¸å¯è¯" style="zoom:67%;"><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/ui.png" alt="åŒæ„è®¸å¯åè®®" style="zoom:67%;"></li><li><p>æ¥å—è®¸å¯è¯ä¹‹åï¼Œç‚¹å‡»ç»“æŸé…ç½®ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/finish_config.png" alt="ç»“æŸé…ç½®" style="zoom:67%;"></li><li><p>æ¥åˆ°ç™»å½•ç•Œé¢ï¼Œç‚¹å‡»æœªåˆ—å‡ºï¼Œä»¥rootç”¨æˆ·ç™»å½•ï¼Œæ–¹ä¾¿åé¢é…ç½®æ“ä½œï¼š</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/root.png" alt="ä»¥rootç”¨æˆ·ç™»å½•" style="zoom:67%;"></li><li><p>åœ¨æ¬¢è¿é¡µé€‰æ‹©è¯­è¨€ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/select_la2.png" alt="é€‰æ‹©è¯­è¨€" style="zoom:67%;"></li><li><p>é€‰æ‹©é”®ç›˜å¸ƒå±€ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/select_kb.png" alt="é”®ç›˜å¸ƒå±€" style="zoom:67%;"></li><li><p>æ‰“å¼€ä½ç½®æœåŠ¡</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/loc.png" alt="ä½ç½®æœåŠ¡" style="zoom:67%;"></li><li><p>è¿æ¥åœ¨çº¿è´¦å·æˆ–è€…ç›´æ¥è·³è¿‡ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/account.png" alt="è¿æ¥åœ¨çº¿è´¦å·" style="zoom:67%;"></li><li><p>å¼€å§‹ä½¿ç”¨CentOS Linuxç³»ç»Ÿã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/use.png" alt="ä½¿ç”¨ç³»ç»Ÿ" style="zoom:67%;"></li><li><p>æ‰“å¼€å‘½ä»¤è¡Œæµ‹è¯•ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/all_finish.png" alt="æµ‹è¯•å‘½ä»¤è¡Œ" style="zoom:67%;"></li><li><p>å®‰è£…å®Œæˆï¼Œå¤§åŠŸå‘Šæˆå•¦ï¼Œæœ¬åœ°Linuxç¯å¢ƒå°±å‡†å¤‡å¥½å•¦ï¼</p></li></ol><blockquote><p>æ–¹å¼äºŒï¼šè¿æ¥é˜¿é‡Œäº‘æœåŠ¡å™¨</p></blockquote><ol><li><p>è´­ä¹°å®Œé˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œ<strong>é…ç½®å®‰å…¨ç»„çš„ç«¯å£å·</strong>ï¼Œè·å–å…¬ç½‘IPã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linux%E7%AC%94%E8%AE%B002-Linux%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/IP.png" alt="é˜¿é‡Œäº‘æœåŠ¡å™¨é…ç½®"></p></li></ol><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/safe.png" alt="å®‰å…¨ç»„" style="zoom:67%;"><ol start="2"><li><p><strong>å®‰è£…xshellå’Œxftpè½¯ä»¶</strong>ï¼Œè¿™é‡Œæ¨èä»å®˜ç½‘ä¸‹è½½ï¼Œå­¦ç”Ÿå…è´¹è¯•ç”¨xshellå’Œxftpã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/xshell.png" alt="xshell" style="zoom:67%;"><p>å½“ç„¶ï¼Œè¿˜æœ‰ä¸€ä¸ªæ¸ é“ï¼Œ360è½¯ä»¶ç®¡å®¶ï¼Œä½†æ˜¯<img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/ye.png" alt="img" style="zoom: 80%;">ä¸ç”¨ã€‚</p></li><li><p><strong>xshellè¿æ¥é˜¿é‡Œäº‘æœåŠ¡å™¨</strong>ï¼Œæ–°å»ºè¿æ¥ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/new_con.png" alt="æ–°å»ºè¿æ¥" style="zoom:67%;"></li><li><p><strong>æ·»åŠ æ–°å»ºä¼šè¯çš„ç›¸å…³ä¿¡æ¯</strong>ï¼ŒåŒ…æ‹¬å…¬ç½‘idå’Œä¸€äº›æè¿°ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/con_info.png" alt="ä¼šè¯ä¿¡æ¯" style="zoom:67%;"></li><li><p><strong>ç™»å½•ç”¨æˆ·åå¡«å†™root</strong>ï¼Œé€‰æ‹©è®°ä½ç”¨æˆ·åã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/name.png" alt="ç™»å½•ç”¨æˆ·å" style="zoom:67%;"></li><li><p>å¡«å†™ç™»å½•å¯†ç ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/pws.png" alt="å¯†ç " style="zoom:67%;"></li><li><p>è¿æ¥æˆåŠŸï¼Œåœ¨å‘½ä»¤è¡Œè¿›è¡Œæ“ä½œã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/con_suc.png" alt="xshellè¿æ¥é˜¿é‡Œäº‘æœåŠ¡å™¨" style="zoom:67%;"></li><li><p>ä¸Šä¼ æ–‡ä»¶ï¼Œå¯åŠ¨xshellä¸Šé¢èœå•æ çš„xftpã€‚æ¯”å¦‚è¯´æˆ‘ä»¬ä¸Šä¼ ä¸€å¼ å›¾ç‰‡åˆ°é˜¿é‡Œäº‘æœåŠ¡å™¨ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°02-Linuxç¯å¢ƒæ­å»º/upimg.png" alt="xftpä¸Šä¼ æ–‡ä»¶" style="zoom:67%;"></li><li><p>åˆ°æ­¤ï¼ŒXshellè¿æ¥é˜¿é‡Œäº‘ç»“æŸï¼</p></li></ol><blockquote><p>Linuxè·å–å®å¡”æ£‰è¢«ç™»å½•åœ°å€ã€è´¦å·å’Œå¯†ç </p></blockquote><ul><li><p>é¦–å…ˆç”¨xshellé€šè¿‡å…¬ç½‘è¿æ¥æœåŠ¡å™¨ï¼›</p></li><li><p>è¿æ¥æˆåŠŸåï¼Œåœ¨xshellç»ˆç«¯è¾“å…¥å‘½ä»¤ï¼š/etc/init.d/bt </p></li><li><p>è¿›å…¥å®å¡”é¢æ¿å‘½ä»¤è¡Œ: è¾“å…¥å‘½ä»¤ç¼–å·ï¼š14</p></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linuxç¬”è®°01-å…¥é—¨æ¦‚è¿°</title>
    <link href="/posts/2021/01/16/Linux%E7%AC%94%E8%AE%B001-%E5%85%A5%E9%97%A8%E6%A6%82%E8%BF%B0/"/>
    <url>/posts/2021/01/16/Linux%E7%AC%94%E8%AE%B001-%E5%85%A5%E9%97%A8%E6%A6%82%E8%BF%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="Linuxå…¥é—¨æ¦‚è¿°"><a href="#Linuxå…¥é—¨æ¦‚è¿°" class="headerlink" title="Linuxå…¥é—¨æ¦‚è¿°"></a>Linuxå…¥é—¨æ¦‚è¿°</h2><blockquote><p><strong>æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å­¦ä¹ Linuxï¼Ÿ</strong></p></blockquote><p>Linuxè¯ç”Ÿäº†è¿™ä¹ˆå¤šå¹´ï¼Œä»¥å‰è¿˜å–Šç€å¦‚ä½•èƒ½å–ä»£windowsç³»ç»Ÿï¼Œ<strong>ç°åœ¨è¿™ä¸ªå£å·å·²ç»å°å¤šäº†</strong>ã€‚ä»»ä½•äº‹ç‰©å‘å±•éƒ½æœ‰å…¶å±€é™æ€§éƒ½æœ‰å…¶å¤©èŠ±æ¿ã€‚å°±å¦‚åŒåœ¨å›½å†…å†æä¸€ä¸ªç¤¾äº¤è½¯ä»¶å–ä»£è…¾è®¯ä¸€æ ·ï¼Œæƒ³æƒ³è€Œå·²åŸºæœ¬ä¸å¯èƒ½ï¼Œå› ä¸ºç”¨æˆ·å·²ç»ä¹ æƒ¯äºä½¿ç”¨å¾®ä¿¡äº¤æµï¼Œä¸æ˜¯è¯´æŠ€æœ¯ä¸Šå®ç°ä¸äº†è§£è€Œæ˜¯è€ç™¾å§“å·²ç»ä¹ æƒ¯äº†ï¼Œæƒ³è®©ä»–ä»¬ä¸ç”¨ï¼Œå³ä½¿ä»–ä»¬è‡ªå·±ä¸ç”¨äº²æˆšæœ‹å‹è¿˜æ˜¯è¦ç”¨ï¼Œ<strong>ä¹ æƒ¯æˆè‡ªç„¶çš„äº‹æƒ…</strong>ã€‚</p><p>åŒç†ï¼Œå½“ä¸–ç•Œä¸Šå¤§éƒ¨åˆ†ç”¨æˆ·å·²ç»ä¹ æƒ¯äº†Windowsæ“ä½œç³»ç»Ÿï¼Œå†è®©å¤§å®¶åˆ‡æ¢åˆ°é™Œç”Ÿçš„Linuxæ“ä½œç³»ç»ŸåŸºæœ¬ä¸Šæ˜¯ä¸å¯èƒ½çš„äº‹æƒ…ã€‚<strong>æ”¹å˜ä¸€ä¸ªäººå·²ç»å…»æˆçš„ä¹ æƒ¯æ˜¯æœ‰éš¾åº¦çš„ï¼Œå¦‚æœä¸æ˜¯å…·æœ‰å†å²æ€§ã€é©å‘½æ€§çš„å˜é©ï¼ŒLinuxåŸºæœ¬ä¸Šæ²¡æœ‰åŠæ³•æ·±å…¥åˆ°æ™®é€šå¤§ä¼—çš„ç”Ÿæ´»ä¸­</strong>ã€‚</p><p>ä½†æ˜¯ï¼Œ<mark>è¿™å¹¶ä¸æ„å‘³ç€Linuxæ²¡æœ‰ç”¨æ­¦ä¹‹åœ°</mark>ã€‚åœ¨<strong>æœåŠ¡å™¨é¢†åŸŸå’Œå¼€å‘è€…ç¤¾åŒº</strong>ï¼ŒLinuxæœ‰è¶Šæ¥è¶Šå—æ¬¢è¿çš„è¶‹åŠ¿ï¼Œä»¥è‡³äºç°åœ¨çš„å¼€å‘å²—ä½å¤šå¤šå°‘å°‘æœ‰ç€å¯¹Linuxæ“ä½œçš„éœ€æ±‚ã€‚è®¸å¤šç¨‹åºå‘˜éƒ½è§‰å¾—ä¸æ‡‚Linuxä¸èƒ½é€‚åº”ç°åœ¨çš„åˆ†å¸ƒå¼ã€é›†ç¾¤ç­‰å¼€å‘ç¯å¢ƒï¼Œè¿™ä¹Ÿä»ç”¨æˆ·çš„è§’åº¦åæ˜ äº†<strong>Linuxåœ¨å¼€æºç¤¾åŒºçš„åœ°ä½ä¾ç„¶å·ç„¶ä¸åŠ¨</strong>ã€‚</p><blockquote><p><strong>Linuxç®€ä»‹</strong></p></blockquote><p>Linuxå†…æ ¸æœ€åˆåªæ˜¯ç”±èŠ¬å…°äººæ—çº³æ–¯Â·æ‰˜ç“¦å…¹ï¼ˆ<mark>Linus Torvalds</mark>&gt;ï¼‰åœ¨èµ«å°”è¾›åŸºå¤§å­¦ä¸Šå­¦æ—¶<strong>å‡ºäºä¸ªäººçˆ±å¥½è€Œç¼–å†™</strong>çš„ã€‚</p><p><strong>Linux æ˜¯ä¸€å¥—å…è´¹ä½¿ç”¨å’Œè‡ªç”±ä¼ æ’­çš„ç±» Unix æ“ä½œç³»ç»Ÿ</strong>ï¼Œæ˜¯ä¸€ä¸ªåŸºäº POSIXï¼ˆå¯ç§»æ¤æ“ä½œç³»ç»Ÿæ¥å£ï¼‰ å’Œ<br>UNIX çš„å¤šç”¨æˆ·ã€å¤šä»»åŠ¡ã€æ”¯æŒå¤šçº¿ç¨‹å’Œå¤š CPU çš„æ“ä½œç³»ç»Ÿã€‚</p><p>Linux èƒ½è¿è¡Œä¸»è¦çš„ UNIX å·¥å…·è½¯ä»¶ã€åº”ç”¨ç¨‹åºå’Œç½‘ç»œåè®®ã€‚å®ƒæ”¯æŒ 32 ä½å’Œ 64 ä½ç¡¬ä»¶ã€‚Linux ç»§æ‰¿äº†<br>Unix ä»¥ç½‘ç»œä¸ºæ ¸å¿ƒçš„è®¾è®¡æ€æƒ³ï¼Œæ˜¯ä¸€ä¸ªæ€§èƒ½ç¨³å®šçš„<strong>å¤šç”¨æˆ·ç½‘ç»œæ“ä½œç³»ç»Ÿ</strong>ã€‚</p><blockquote><p><strong>Linuxå‘è¡Œç‰ˆ</strong></p></blockquote><p>Linuxçš„å‘è¡Œç‰ˆï¼Œé€šä¿—çš„è¯´å°±æ˜¯å°†Linuxå†…æ ¸ä¸åº”ç”¨è½¯ä»¶åšä¸€ä¸ªæ‰“åŒ…ï¼Œä¸‹å›¾æ˜¯Linuxçš„å„ä¸ªå‘è¡Œç‰ˆã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°01-å…¥é—¨æ¦‚è¿°/Linux_distributions.png" alt="Linuxå‘è¡Œç‰ˆ" style="zoom:75%;"><p>ç›®å‰å¸‚é¢ä¸Šè¾ƒçŸ¥åçš„å‘è¡Œç‰ˆæœ‰ï¼šUbuntuã€RedHatã€CentOSã€Debianã€Fedoraã€SuSEã€OpenSUSEã€<br>Arch Linuxã€SolusOS ç­‰ï¼Œä¸‹å›¾æ˜¯å„ä¸ªå‘è¡Œç‰ˆçš„å›¾æ ‡ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°01-å…¥é—¨æ¦‚è¿°/Linux_distributions_logo.png" alt="Linuxå‘è¡Œç‰ˆçš„logo" style="zoom:60%;"><blockquote><p><strong>Linuxåº”ç”¨é¢†åŸŸ</strong></p></blockquote><p>ä»Šå¤©ï¼Œå„ç§åœºåˆéƒ½æœ‰ä½¿ç”¨Linuxå‘è¡Œç‰ˆçš„ç°è±¡ï¼Œä»åµŒå…¥å¼åˆ°è¶…çº§è®¡ç®—æœºï¼ŒLinuxå°¤å…¶åœ¨æœåŠ¡å™¨é¢†åŸŸç¡®å®šäº†åœ°ä½ã€‚é€šå¸¸æœåŠ¡å™¨ä½¿ç”¨ LAMPï¼ˆLinux + Apache + MySQL + PHPï¼‰æˆ–è€… LNMPï¼ˆLinux + Nginx + MySQL + PHPï¼‰ç»„åˆã€‚</p><p>ç›®å‰ï¼ŒLinuxä¸ä»…åœ¨å®¶åº­ä¸ä¼ä¸šä¸­è¢«å¹¿æ³›ä½¿ç”¨ï¼Œå¹¶ä¸”åœ¨æ”¿åºœä¸­ä¹Ÿå¤‡å—æ¬¢è¿ã€‚</p><ul><li>å·´è¥¿è”é‚¦æ”¿åºœç”±äºæ”¯æŒ Linux è€Œä¸–ç•Œé—»åã€‚</li><li>æœ‰æ–°é—»æŠ¥é“ä¿„ç½—æ–¯å†›é˜Ÿè‡ªå·±åˆ¶é€ çš„ Linux å‘å¸ƒç‰ˆçš„ï¼Œåšä¸º G.H.ost é¡¹ç›®å·²ç»å–å¾—æˆæœã€‚</li><li>å°åº¦çš„ Kerala è”é‚¦è®¡åˆ’åœ¨å‘å…¨è”é‚¦çš„é«˜ä¸­æ¨å¹¿ä½¿ç”¨ Linuxã€‚</li><li>ä¸­åäººæ°‘å…±å’Œå›½ä¸ºå–å¾—æŠ€æœ¯ç‹¬ç«‹ï¼Œåœ¨é¾™èŠ¯å¤„ç†å™¨ä¸­æ’ä»–æ€§åœ°ä½¿ç”¨ Linuxã€‚</li><li>åœ¨è¥¿ç­ç‰™çš„ä¸€äº›åœ°åŒºå¼€å‘äº†è‡ªå·±çš„ Linux å‘å¸ƒç‰ˆï¼Œå¹¶ä¸”åœ¨æ”¿åºœä¸æ•™è‚²é¢†åŸŸå¹¿æ³›ä½¿ç”¨ï¼Œå¦‚Extremadura åœ°åŒºçš„ gnuLinEx å’Œ Andalusia åœ°åŒºçš„ Guadalinexã€‚</li><li>è‘¡è„ç‰™åŒæ ·ä½¿ç”¨è‡ªå·±çš„ Linux å‘å¸ƒç‰ˆ Caixa MÃ¡gicaï¼Œç”¨äº Magalh?es ç¬”è®°æœ¬ç”µè„‘å’Œ e-escola æ”¿åºœè½¯ä»¶ã€‚</li><li>æ³•å›½å’Œå¾·å›½åŒæ ·å¼€å§‹é€æ­¥é‡‡ç”¨ Linuxã€‚</li></ul><blockquote><p><strong>Linux V.S. Windows</strong></p></blockquote><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Linuxç¬”è®°01-å…¥é—¨æ¦‚è¿°/Linux_vs_Windows.jpg" alt="Linuxä¸Windowsçš„æ¯”è¾ƒ" style="zoom:80%;">]]></content>
    
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Redisç¬”è®°02-Redisç¯å¢ƒæ­å»º</title>
    <link href="/posts/2021/01/15/Redis%E7%AC%94%E8%AE%B002-Redis%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    <url>/posts/2021/01/15/Redis%E7%AC%94%E8%AE%B002-Redis%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€æ¦‚è¿°"><a href="#ä¸€ã€æ¦‚è¿°" class="headerlink" title="ä¸€ã€æ¦‚è¿°"></a>ä¸€ã€æ¦‚è¿°</h2><h3 id="1-Redisæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-Redisæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1. Redisæ˜¯ä»€ä¹ˆï¼Ÿ"></a>1. Redisæ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>Redisï¼ˆRemote Dictionary Server )ï¼Œå³è¿œç¨‹å­—å…¸æœåŠ¡ã€‚</p><p>æ˜¯ä¸€ä¸ªå¼€æºçš„ä½¿ç”¨ANSI Cè¯­è¨€ç¼–å†™ã€æ”¯æŒç½‘ç»œã€å¯åŸºäºå†…å­˜äº¦å¯æŒä¹…åŒ–çš„æ—¥å¿—å‹ã€<strong>Key-Valueæ•°æ®åº“</strong>ï¼Œå¹¶æä¾›å¤šç§è¯­è¨€çš„APIã€‚</p><p>ä¸memcachedä¸€æ ·ï¼Œä¸ºäº†ä¿è¯æ•ˆç‡ï¼Œ<strong>æ•°æ®éƒ½æ˜¯ç¼“å­˜åœ¨å†…å­˜ä¸­</strong>ã€‚åŒºåˆ«çš„æ˜¯redisä¼šå‘¨æœŸæ€§çš„æŠŠæ›´æ–°çš„æ•°æ®å†™å…¥ç£ç›˜æˆ–è€…æŠŠä¿®æ”¹æ“ä½œå†™å…¥è¿½åŠ çš„è®°å½•æ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨æ­¤åŸºç¡€ä¸Šå®ç°äº†master-slave(ä¸»ä»)åŒæ­¥ã€‚</p><h3 id="2-Redisèƒ½å¹²ä»€ä¹ˆï¼Ÿ"><a href="#2-Redisèƒ½å¹²ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2.Redisèƒ½å¹²ä»€ä¹ˆï¼Ÿ"></a>2.Redisèƒ½å¹²ä»€ä¹ˆï¼Ÿ</h3><ol><li>å†…å­˜å­˜å‚¨ã€æŒä¹…åŒ–ï¼Œå†…å­˜æ˜¯æ–­ç”µå³å¤±çš„ï¼Œæ‰€ä»¥éœ€è¦æŒä¹…åŒ–ï¼ˆRDBã€AOFï¼‰</li><li>é«˜æ•ˆç‡ã€ç”¨äºé«˜é€Ÿç¼“å†²</li><li>å‘å¸ƒè®¢é˜…ç³»ç»Ÿ</li><li>åœ°å›¾ä¿¡æ¯åˆ†æ</li><li>è®¡æ—¶å™¨ã€è®¡æ•°å™¨(egï¼šæµè§ˆé‡)</li><li>ã€‚ã€‚ã€‚</li></ol><h3 id="3-Redisçš„ç‰¹æ€§"><a href="#3-Redisçš„ç‰¹æ€§" class="headerlink" title="3. Redisçš„ç‰¹æ€§"></a>3. Redisçš„ç‰¹æ€§</h3><ol><li><p>å¤šæ ·çš„æ•°æ®ç±»å‹</p></li><li><p>æŒä¹…åŒ–</p></li><li><p>é›†ç¾¤</p></li><li><p>äº‹åŠ¡</p><p>â€¦</p></li></ol><h2 id="äºŒã€Redisç¯å¢ƒæ­å»º"><a href="#äºŒã€Redisç¯å¢ƒæ­å»º" class="headerlink" title="äºŒã€Redisç¯å¢ƒæ­å»º"></a>äºŒã€Redisç¯å¢ƒæ­å»º</h2><p>å®˜ç½‘ï¼š<a href="https://redis.io/">https://redis.io/</a></p><p>ä¸­æ–‡ç½‘ï¼š<a href="http://www.redis.cn/">http://www.redis.cn/</a></p><p>æ¨èä½¿ç”¨LinuxæœåŠ¡å™¨å­¦ä¹ ã€‚</p><p>windowsç‰ˆæœ¬çš„Rediså·²ç»åœæ›´å¾ˆä¹…äº†â€¦</p><h2 id="ä¸‰ã€Windowså®‰è£…"><a href="#ä¸‰ã€Windowså®‰è£…" class="headerlink" title="ä¸‰ã€Windowså®‰è£…"></a>ä¸‰ã€Windowså®‰è£…</h2><p>åœ¨githubä¸Šä¸‹è½½ï¼š<a href="https://github.com/microsoftarchive/redis">https://github.com/microsoftarchive/redis</a></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B002-Redis%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/windows_redis.png" alt="githubåœ°å€"></p><p>ä¸‹è½½å®Œæˆåè§£å‹åˆ°æœ¬åœ°çš„ç¯å¢ƒæ–‡ä»¶å¤¹ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B002-Redis%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/environment.png" alt="è§£å‹å‹ç¼©åŒ…"></p><h2 id="å››ã€Linuxå®‰è£…"><a href="#å››ã€Linuxå®‰è£…" class="headerlink" title="å››ã€Linuxå®‰è£…"></a>å››ã€Linuxå®‰è£…</h2><ol><li><p>åœ¨å®˜ç½‘<a href="https://redis.io/%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E5%8C%85%60redis-6.0.10.tar.gz%60">https://redis.io/ä¸‹è½½å®‰è£…åŒ…`redis-6.0.10.tar.gz`</a></p></li><li><p>å°†è¯¥å‹ç¼©åŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Š<code>/home/AtroxQW</code>ç›®å½•ä¸‹ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B002-Redis%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/linux_redis.png" alt="å‹ç¼©åŒ…ä¸Šä¼ æœåŠ¡å™¨"></p><p>åœ¨Linuxå‘½ä»¤è¡ŒæŸ¥çœ‹<code>/home/AtroxQW</code>ç›®å½•ä¸‹æœ‰æ²¡æœ‰å‹ç¼©åŒ…ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z /]# cd /home/AtroxQW/<br>[root@iZ2zeh7ydg2bbydds175q0Z AtroxQW]# ls<br>atrox3.jpg  redis-6.0.10.tar.gz<br></code></pre></td></tr></table></figure></li><li><p>å°†å‹ç¼©åŒ…ç§»åŠ¨åˆ°<code>/opt</code>ç›®å½•ä¸‹ï¼Œè§£å‹Redisçš„å®‰è£…åŒ…ï¼Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z AtroxQW]# mv redis-6.0.10.tar.gz /opt<br>[root@iZ2zeh7ydg2bbydds175q0Z AtroxQW]# cd /opt<br>[root@iZ2zeh7ydg2bbydds175q0Z opt]# ls<br>redis-6.0.10.tar.gz<br>[root@iZ2zeh7ydg2bbydds175q0Z opt]# tar -zxvf redis-6.0.10.tar.gz <br></code></pre></td></tr></table></figure><p>è§£å‹å®Œæˆã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z opt]# ls<br>redis-6.0.10  redis-6.0.10.tar.gz<br></code></pre></td></tr></table></figure><p>è¿›å…¥è§£å‹åçš„redisä¸‹çš„ç›®å½•æ–‡ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z opt]# cd redis-6.0.10/<br>[root@iZ2zeh7ydg2bbydds175q0Z redis-6.0.10]# ls<br>00-RELEASENOTES  deps       README.md        runtest-moduleapi  tests<br>BUGS             INSTALL    redis.conf       runtest-sentinel   TLS.md<br>CONTRIBUTING     Makefile   runtest          sentinel.conf      utils<br>COPYING          MANIFESTO  runtest-cluster  src<br></code></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>redis.conf</code>æ˜¯redisçš„é…ç½®æ–‡ä»¶ã€‚</p></li><li><p>åŸºæœ¬çš„ç¯å¢ƒå®‰è£…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z redis-6.0.10]# yum install gcc-c++<br>Repository epel is listed more than once in the configuration<br>Last metadata expiration check: 1:01:24 ago on Mon 18 Jan 2021 07:09:00 PM CST.<br>Package gcc-c++-8.3.1-5.1.el8.x86_64 is already installed.<br>Dependencies resolved.<br>Nothing to do.<br>Complete!<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œmakeå‘½ä»¤ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z redis-6.0.10]# make<br></code></pre></td></tr></table></figure><p>å†æ¬¡æ‰§è¡Œmakeå‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z redis-6.0.10]# make<br>cd src &amp;&amp; make all<br>make[1]: Entering directory &#x27;/opt/redis-6.0.10/src&#x27;<br>    CC Makefile.dep<br><br>Hint: It&#x27;s a good idea to run &#x27;make test&#x27; ;)<br><br>make[1]: Leaving directory &#x27;/opt/redis-6.0.10/src&#x27;<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œmake installå‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z redis-6.0.10]# make install<br>cd src &amp;&amp; make install<br>make[1]: Entering directory &#x27;/opt/redis-6.0.10/src&#x27;<br><br>Hint: It&#x27;s a good idea to run &#x27;make test&#x27; ;)<br><br>    INSTALL install<br>    INSTALL install<br>    INSTALL install<br>    INSTALL install<br>    INSTALL install<br>make[1]: Leaving directory &#x27;/opt/redis-6.0.10/src&#x27;<br></code></pre></td></tr></table></figure></li><li><p>redisçš„é»˜è®¤å®‰è£…è·¯å¾„ <code>usr/local/bin</code></p></li><li><p>å°†redisçš„é…ç½®æ–‡ä»¶<code>redis.config</code>å¤åˆ¶åˆ°<code>/usr/local/bin/AtroxConfig</code>ï¼Œä¹‹åå°±æ˜¯ç”¨è¿™ä¸ªé…ç½®æ–‡ä»¶è¿›è¡Œå¯åŠ¨ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z bin]# mkdir AtroxConfig<br>[root@iZ2zeh7ydg2bbydds175q0Z bin]# cp /opt/redis-6.0.10/redis.conf AtroxConfig<br>[root@iZ2zeh7ydg2bbydds175q0Z bin]# cd AtroxConfig/<br>[root@iZ2zeh7ydg2bbydds175q0Z AtroxConfig]# ls<br>redis.conf<br></code></pre></td></tr></table></figure></li><li><p>redisé»˜è®¤ä¸æ˜¯åå°å¯åŠ¨çš„ï¼Œéœ€è¦ä¿®æ”¹<code>redis.config</code>é…ç½®æ–‡ä»¶ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">å°†daemonize no ä¿®æ”¹ä¸º daemonize yes<br></code></pre></td></tr></table></figure></li><li><p>å¯åŠ¨RedisæœåŠ¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z bin]# redis-server AtroxConfig/redis.conf <br></code></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨rediså®¢æˆ·ç«¯è¿æ¥æŒ‡å®šçš„ç«¯å£å·ï¼Œæµ‹è¯•è®¾ç½®keyå’ŒæŸ¥è¯¢keyã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z bin]# redis-cli -p 6379<br>127.0.0.1:6379&gt; ping<br>PONG<br>127.0.0.1:6379&gt; set name AtroxQW<br>OK<br>127.0.0.1:6379&gt; get name<br>&quot;AtroxQW&quot;<br>127.0.0.1:6379&gt; keys *<br>1) &quot;name&quot;<br></code></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹redisè¿›ç¨‹æ˜¯å¦å¼€å¯ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z bin]# ps -ef|grep redis<br>redis    18249     1  0 Jan16 ?        00:04:02 /www/server/redis/src/redi-server 127.0.0.1:6379<br>root     26739 20013  0 20:24 pts/0    00:00:00 redis-cli -p 6379<br>root     26909 26875  0 20:27 pts/2    00:00:00 grep --color=auto redis<br></code></pre></td></tr></table></figure></li><li><p>å¦‚ä½•å…³é—­RedisæœåŠ¡å‘¢ï¼Ÿä½¿ç”¨shutdownå¹¶é€€å‡º</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; shutdown<br>not connected&gt; exit<br></code></pre></td></tr></table></figure><p>å†æŸ¥çœ‹redisè¿›ç¨‹æ˜¯å¦å¼€å¯ï¼Œå‘ç°å·²ç»å…³é—­ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@iZ2zeh7ydg2bbydds175q0Z bin]# ps -ef|grep redis<br>root     27025 26875  0 20:29 pts/2    00:00:00 grep --color=auto redis<br></code></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Redisç¬”è®°01-NoSQLè¿½æ ¹æº¯æº</title>
    <link href="/posts/2021/01/15/Redis%E7%AC%94%E8%AE%B001-NoSQL%E8%BF%BD%E6%A0%B9%E6%BA%AF%E6%BA%90/"/>
    <url>/posts/2021/01/15/Redis%E7%AC%94%E8%AE%B001-NoSQL%E8%BF%BD%E6%A0%B9%E6%BA%AF%E6%BA%90/</url>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€ä¸ºä»€ä¹ˆä½¿ç”¨NoSQLï¼Ÿ"><a href="#ä¸€ã€ä¸ºä»€ä¹ˆä½¿ç”¨NoSQLï¼Ÿ" class="headerlink" title="ä¸€ã€ä¸ºä»€ä¹ˆä½¿ç”¨NoSQLï¼Ÿ"></a>ä¸€ã€ä¸ºä»€ä¹ˆä½¿ç”¨NoSQLï¼Ÿ</h2><p>è¯´åˆ°ä¸ºä»€ä¹ˆä½¿ç”¨NoSQLï¼Œè¦ä»äº’è”ç½‘ç½‘ç«™æ¶æ„çš„å‘å±•å†å²è®²èµ·ã€‚</p><h3 id="1-å•æœºMySQLæ—¶ä»£"><a href="#1-å•æœºMySQLæ—¶ä»£" class="headerlink" title="1. å•æœºMySQLæ—¶ä»£"></a>1. å•æœºMySQLæ—¶ä»£</h3><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B001-NoSQL%E8%BF%BD%E6%A0%B9%E6%BA%AF%E6%BA%90/stand_alone_mysql.png" alt="å•æœºMySQLæ¶æ„å›¾"></p><p>90å¹´ä»£,ä¸€ä¸ªç½‘ç«™çš„è®¿é—®é‡ä¸€èˆ¬ä¸ä¼šå¤ªå¤§ï¼Œå•ä¸ªæ•°æ®åº“å®Œå…¨å¤Ÿç”¨ã€‚éšç€ç”¨æˆ·å¢å¤šï¼Œç½‘ç«™å‡ºç°ä»¥ä¸‹é—®é¢˜</p><ol><li>æ•°æ®é‡å¢åŠ åˆ°ä¸€å®šç¨‹åº¦ï¼Œå•æœºæ•°æ®åº“å°±æ”¾ä¸ä¸‹äº†</li><li>æ•°æ®çš„ç´¢å¼•ï¼ˆB+ Treeï¼‰,ä¸€ä¸ªæœºå™¨å†…å­˜ä¹Ÿå­˜æ”¾ä¸ä¸‹</li><li>è®¿é—®é‡å˜å¤§åï¼ˆè¯»å†™æ··åˆï¼‰ï¼Œä¸€å°æœåŠ¡å™¨æ‰¿å—ä¸ä½ã€‚</li></ol><h3 id="2-Memcached-ç¼“å­˜-MySQL-å‚ç›´æ‹†åˆ†-è¯»å†™åˆ†ç¦»"><a href="#2-Memcached-ç¼“å­˜-MySQL-å‚ç›´æ‹†åˆ†-è¯»å†™åˆ†ç¦»" class="headerlink" title="2. Memcached(ç¼“å­˜) + MySQL + å‚ç›´æ‹†åˆ†(è¯»å†™åˆ†ç¦»)"></a>2. Memcached(ç¼“å­˜) + MySQL + å‚ç›´æ‹†åˆ†(è¯»å†™åˆ†ç¦»)</h3><p>ç½‘ç«™80%çš„æƒ…å†µéƒ½æ˜¯åœ¨è¯»ï¼Œæ¯æ¬¡éƒ½è¦å»æŸ¥è¯¢æ•°æ®åº“çš„è¯å°±ååˆ†çš„éº»çƒ¦ï¼æ‰€ä»¥è¯´æˆ‘ä»¬å¸Œæœ›å‡è½»æ•°æ®åº“çš„å‹åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¼“å­˜æ¥ä¿è¯æ•ˆç‡ï¼</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B001-NoSQL%E8%BF%BD%E6%A0%B9%E6%BA%AF%E6%BA%90/cache_read_wirite_separation.png" alt="ç¼“å­˜+è¯»å†™åˆ†ç¦»æ¶æ„"></p><p>ä¼˜åŒ–è¿‡ç¨‹ç»å†äº†ä»¥ä¸‹å‡ ä¸ªè¿‡ç¨‹ï¼š</p><ol><li>ä¼˜åŒ–æ•°æ®åº“çš„æ•°æ®ç»“æ„å’Œç´¢å¼•(éš¾åº¦å¤§)</li><li>æ–‡ä»¶ç¼“å­˜ï¼Œé€šè¿‡IOæµè·å–æ¯”æ¯æ¬¡éƒ½è®¿é—®æ•°æ®åº“æ•ˆç‡ç•¥é«˜ï¼Œä½†æ˜¯æµé‡çˆ†ç‚¸å¼å¢é•¿æ—¶å€™ï¼ŒIOæµä¹Ÿæ‰¿å—ä¸äº†</li><li>MemCache,å½“æ—¶æœ€çƒ­é—¨çš„æŠ€æœ¯ï¼Œé€šè¿‡åœ¨æ•°æ®åº“å’Œæ•°æ®åº“è®¿é—®å±‚ä¹‹é—´åŠ ä¸Šä¸€å±‚ç¼“å­˜ï¼Œç¬¬ä¸€æ¬¡è®¿é—®æ—¶æŸ¥è¯¢æ•°æ®åº“ï¼Œå°†ç»“æœä¿å­˜åˆ°ç¼“å­˜ï¼Œåç»­çš„æŸ¥è¯¢å…ˆæ£€æŸ¥ç¼“å­˜ï¼Œè‹¥æœ‰ç›´æ¥æ‹¿å»ä½¿ç”¨ï¼Œæ•ˆç‡æ˜¾è‘—æå‡ã€‚</li></ol><h3 id="3-åˆ†åº“åˆ†è¡¨-æ°´å¹³æ‹†åˆ†-MySQLé›†ç¾¤"><a href="#3-åˆ†åº“åˆ†è¡¨-æ°´å¹³æ‹†åˆ†-MySQLé›†ç¾¤" class="headerlink" title="3. åˆ†åº“åˆ†è¡¨ + æ°´å¹³æ‹†åˆ† + MySQLé›†ç¾¤"></a>3. åˆ†åº“åˆ†è¡¨ + æ°´å¹³æ‹†åˆ† + MySQLé›†ç¾¤</h3><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B001-NoSQL%E8%BF%BD%E6%A0%B9%E6%BA%AF%E6%BA%90/history_3.png" alt="æ¶æ„"></p><h3 id="4-ç°ä»£"><a href="#4-ç°ä»£" class="headerlink" title="4. ç°ä»£"></a>4. ç°ä»£</h3><p> å¦‚ä»Šä¿¡æ¯é‡äº•å–·å¼å¢é•¿ï¼Œå„ç§å„æ ·çš„æ•°æ®å‡ºç°ï¼ˆç”¨æˆ·å®šä½æ•°æ®ï¼Œå›¾ç‰‡æ•°æ®ç­‰ï¼‰ï¼Œå¤§æ•°æ®çš„èƒŒæ™¯ä¸‹å…³ç³»å‹æ•°æ®åº“ï¼ˆRDBMSï¼‰æ— æ³•æ»¡è¶³å¤§é‡æ•°æ®è¦æ±‚ã€‚Nosqlæ•°æ®åº“å°±èƒ½è½»æ¾è§£å†³è¿™äº›é—®é¢˜ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B001-NoSQL%E8%BF%BD%E6%A0%B9%E6%BA%AF%E6%BA%90/modern_arch.png" alt="ç°ä»£ç½‘ç«™æ¶æ„"></p><h3 id><a href="#" class="headerlink" title></a></h3><h3 id="5-ä½¿ç”¨NoSQLçš„åŸå› "><a href="#5-ä½¿ç”¨NoSQLçš„åŸå› " class="headerlink" title="5. ä½¿ç”¨NoSQLçš„åŸå› "></a>5. ä½¿ç”¨NoSQLçš„åŸå› </h3><p>ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯ï¼Œç¤¾äº¤ç½‘ç»œï¼Œåœ°ç†ä½ç½®ã€‚ç”¨æˆ·è‡ªå·±äº§ç”Ÿçš„æ•°æ®ï¼Œç”¨æˆ·æ—¥å¿—ç­‰ç­‰çˆ†å‘å¼å¢é•¿ï¼è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨NoSQLæ•°æ®åº“çš„ï¼ŒNosqlå¯ä»¥å¾ˆå¥½çš„å¤„ç†ä»¥ä¸Šçš„æƒ…å†µï¼</p><h2 id="äºŒã€ä»€ä¹ˆæ˜¯NoSQL"><a href="#äºŒã€ä»€ä¹ˆæ˜¯NoSQL" class="headerlink" title="äºŒã€ä»€ä¹ˆæ˜¯NoSQL"></a>äºŒã€ä»€ä¹ˆæ˜¯NoSQL</h2><p><strong>NoSQL = Not Only SQLï¼ˆä¸ä»…ä»…æ˜¯SQLï¼‰</strong></p><p>Not Only Structured Query Language</p><p>å…³ç³»å‹æ•°æ®åº“ï¼šåˆ—+è¡Œï¼ŒåŒä¸€ä¸ªè¡¨ä¸‹æ•°æ®çš„ç»“æ„æ˜¯ä¸€æ ·çš„ã€‚</p><p>éå…³ç³»å‹æ•°æ®åº“ï¼šæ•°æ®å­˜å‚¨æ²¡æœ‰å›ºå®šçš„æ ¼å¼ï¼Œå¹¶ä¸”å¯ä»¥è¿›è¡Œæ¨ªå‘æ‰©å±•ã€‚</p><p>NoSQLæ³›æŒ‡éå…³ç³»å‹æ•°æ®åº“ï¼Œéšç€web2.0äº’è”ç½‘çš„è¯ç”Ÿï¼Œä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“å¾ˆéš¾å¯¹ä»˜web2.0æ—¶ä»£ï¼å°¤å…¶æ˜¯è¶…å¤§è§„æ¨¡çš„é«˜å¹¶å‘çš„ç¤¾åŒºï¼Œæš´éœ²å‡ºæ¥å¾ˆå¤šéš¾ä»¥å…‹æœçš„é—®é¢˜ï¼ŒNoSQLåœ¨å½“ä»Šå¤§æ•°æ®ç¯å¢ƒä¸‹å‘å±•çš„ååˆ†è¿…é€Ÿï¼ŒRedisæ˜¯å‘å±•æœ€å¿«çš„ã€‚</p><h2 id="ä¸‰ã€NoSQLçš„ç‰¹ç‚¹"><a href="#ä¸‰ã€NoSQLçš„ç‰¹ç‚¹" class="headerlink" title="ä¸‰ã€NoSQLçš„ç‰¹ç‚¹"></a>ä¸‰ã€NoSQLçš„ç‰¹ç‚¹</h2><ol><li><p>æ–¹ä¾¿æ‰©å±•ï¼ˆæ•°æ®ä¹‹é—´æ²¡æœ‰å…³ç³»ï¼Œå¾ˆå¥½æ‰©å±•ï¼ï¼‰</p></li><li><p>å¤§æ•°æ®é‡é«˜æ€§èƒ½ï¼ˆRedisä¸€ç§’å¯ä»¥å†™8ä¸‡æ¬¡ï¼Œè¯»11ä¸‡æ¬¡ï¼ŒNoSQLçš„ç¼“å­˜è®°å½•çº§ï¼Œæ˜¯ä¸€ç§ç»†ç²’åº¦çš„ç¼“å­˜ï¼Œæ€§èƒ½ä¼šæ¯”è¾ƒé«˜ï¼ï¼‰</p></li><li><p>æ•°æ®ç±»å‹æ˜¯å¤šæ ·å‹çš„ï¼ï¼ˆä¸éœ€è¦äº‹å…ˆè®¾è®¡æ•°æ®åº“ï¼Œéšå–éšç”¨ï¼‰</p></li><li><p>ä¼ ç»Ÿçš„ RDBMS å’Œ NoSQLå¯¹æ¯”</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">ä¼ ç»Ÿçš„ RDBMS(å…³ç³»å‹æ•°æ®åº“)<br><span class="hljs-bullet">- </span>ç»“æ„åŒ–ç»„ç»‡<br><span class="hljs-bullet">- </span>SQL<br><span class="hljs-bullet">- </span>æ•°æ®å’Œå…³ç³»éƒ½å­˜åœ¨å•ç‹¬çš„è¡¨ä¸­ row col<br><span class="hljs-bullet">- </span>æ“ä½œï¼Œæ•°æ®å®šä¹‰è¯­è¨€<br><span class="hljs-bullet">- </span>ä¸¥æ ¼çš„ä¸€è‡´æ€§<br><span class="hljs-bullet">- </span>åŸºç¡€çš„äº‹åŠ¡<br><span class="hljs-bullet">- </span>...<br></code></pre></td></tr></table></figure><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">Nosql<br><span class="hljs-bullet">- </span>ä¸ä»…ä»…æ˜¯æ•°æ®<br><span class="hljs-bullet">- </span>æ²¡æœ‰å›ºå®šçš„æŸ¥è¯¢è¯­è¨€<br><span class="hljs-bullet">- </span>é”®å€¼å¯¹å­˜å‚¨ï¼Œåˆ—å­˜å‚¨ï¼Œæ–‡æ¡£å­˜å‚¨ï¼Œå›¾å½¢æ•°æ®åº“ï¼ˆç¤¾äº¤å…³ç³»ï¼‰<br><span class="hljs-bullet">- </span>æœ€ç»ˆä¸€è‡´æ€§<br><span class="hljs-bullet">- </span>CAPå®šç†å’ŒBASE<br><span class="hljs-bullet">- </span>é«˜æ€§èƒ½ï¼Œé«˜å¯ç”¨ï¼Œé«˜æ‰©å±•<br><span class="hljs-bullet">- </span>...<br></code></pre></td></tr></table></figure></li></ol><blockquote><p>äº†è§£ï¼š3V + 3é«˜</p></blockquote><p>å¤§æ•°æ®æ—¶ä»£çš„3V ï¼šä¸»è¦æ˜¯<strong>æè¿°é—®é¢˜</strong>çš„</p><ol><li>æµ·é‡Velume</li><li>å¤šæ ·Variety</li><li>å®æ—¶Velocity</li></ol><p>å¤§æ•°æ®æ—¶ä»£çš„3é«˜ ï¼š ä¸»è¦æ˜¯<strong>å¯¹ç¨‹åºçš„è¦æ±‚</strong></p><ol><li>é«˜å¹¶å‘</li><li>é«˜å¯æ‰©</li><li>é«˜æ€§èƒ½</li></ol><p>çœŸæ­£åœ¨å…¬å¸ä¸­çš„å®è·µï¼šNoSQL + RDBMS ä¸€èµ·ä½¿ç”¨æ‰æ˜¯æœ€å¼ºçš„ã€‚</p><h2 id="å››ã€é˜¿é‡Œå·´å·´æ¶æ„æ¼”è¿›åˆ†æ"><a href="#å››ã€é˜¿é‡Œå·´å·´æ¶æ„æ¼”è¿›åˆ†æ" class="headerlink" title="å››ã€é˜¿é‡Œå·´å·´æ¶æ„æ¼”è¿›åˆ†æ"></a>å››ã€é˜¿é‡Œå·´å·´æ¶æ„æ¼”è¿›åˆ†æ</h2><p>æ¨èé˜…è¯»ï¼šé˜¿é‡Œäº‘çš„è¿™ç¾¤ç–¯å­<a href="https://yq.aliyun.com/articles/653511">https://yq.aliyun.com/articles/653511</a></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B001-NoSQL%E8%BF%BD%E6%A0%B9%E6%BA%AF%E6%BA%90/tb.png" alt="ä¸€å¼ ç”µå•†ç½‘ç«™æˆªå›¾"></p><p>æ€è€ƒé—®é¢˜ï¼šè¿™ä¹ˆå¤šä¸œè¥¿éš¾é“éƒ½æ˜¯åœ¨ä¸€ä¸ªæ•°æ®åº“ä¸­çš„å—?</p><p>è¿™é‡Œæˆ‘ä»¬ä»¥é˜¿é‡Œå·´å·´çš„ç½‘ç«™æ¼”è¿›å†å²ä¸ºä¾‹è¿›è¡Œåˆ†æã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B001-NoSQL%E8%BF%BD%E6%A0%B9%E6%BA%AF%E6%BA%90/ali_history.png" alt="é˜¿é‡Œå·´å·´æ¼”è¿›å²"></p><p>éšç€ï¼Œç½‘ç«™åŠŸèƒ½çš„å®Œå–„ï¼Œæ•°æ®æ¶æ„ä¹Ÿå˜å¾—æ—¥ç›Šå¤æ‚ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B001-NoSQL%E8%BF%BD%E6%A0%B9%E6%BA%AF%E6%BA%90/data_complex.png" alt="æ—¥ç›Šå¤æ‚çš„æ•°æ®æ¶æ„"></p><p>é˜¿é‡Œå·´å·´ç»™å‡ºçš„æ–¹æ¡ˆæ˜¯ï¼Œç¼–å†™UDSLç»Ÿä¸€æ•°æ®æœåŠ¡å¹³å°</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B001-NoSQL%E8%BF%BD%E6%A0%B9%E6%BA%AF%E6%BA%90/UDSL.png" alt="UDSL"></p><p>å†ç„¶åï¼Œè¿›è¡Œäº†çƒ­ç‚¹ç¼“å­˜çš„è®¾è®¡ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Redis%E7%AC%94%E8%AE%B001-NoSQL%E8%BF%BD%E6%A0%B9%E6%BA%AF%E6%BA%90/hot_pot_cache.png" alt="UDSLçƒ­ç‚¹ç¼“å­˜è®¾è®¡"></p><h2 id="äº”ã€ä¸åŒç±»å‹æ•°æ®çš„å®¹å™¨"><a href="#äº”ã€ä¸åŒç±»å‹æ•°æ®çš„å®¹å™¨" class="headerlink" title="äº”ã€ä¸åŒç±»å‹æ•°æ®çš„å®¹å™¨"></a>äº”ã€ä¸åŒç±»å‹æ•°æ®çš„å®¹å™¨</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å•†å“ä¿¡æ¯</span><br>- ä¸€èˆ¬å­˜æ”¾åœ¨å…³ç³»å‹æ•°æ®åº“ï¼šMysql,é˜¿é‡Œå·´å·´ä½¿ç”¨çš„Mysqléƒ½æ˜¯ç»è¿‡å†…éƒ¨æ”¹åŠ¨çš„ã€‚<br><br><span class="hljs-comment"># å•†å“æè¿°ã€è¯„è®º(æ–‡å­—å±…å¤š)</span><br>- æ–‡æ¡£å‹æ•°æ®åº“ï¼šMongoDB<br><br><span class="hljs-comment"># å›¾ç‰‡</span><br>- åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ FastDFS<br>- æ·˜å®ï¼šTFS<br>- Google: GFS<br>- Hadoop: HDFS<br>- é˜¿é‡Œäº‘: oss<br><br><span class="hljs-comment"># å•†å“å…³é”®å­— ç”¨äºæœç´¢</span><br>- æœç´¢å¼•æ“ï¼šsolr,elasticsearch<br>- é˜¿é‡Œï¼šIsearch å¤šéš†<br><br><span class="hljs-comment"># å•†å“çƒ­é—¨çš„æ³¢æ®µä¿¡æ¯</span><br>- å†…å­˜æ•°æ®åº“ï¼šRedisï¼ŒMemcache<br><br><span class="hljs-comment"># å•†å“äº¤æ˜“ï¼Œå¤–éƒ¨æ”¯ä»˜æ¥å£</span><br>- ç¬¬ä¸‰æ–¹åº”ç”¨<br></code></pre></td></tr></table></figure><h2 id="å…­ã€NoSQLçš„å››å¤§åˆ†ç±»"><a href="#å…­ã€NoSQLçš„å››å¤§åˆ†ç±»" class="headerlink" title="å…­ã€NoSQLçš„å››å¤§åˆ†ç±»"></a>å…­ã€NoSQLçš„å››å¤§åˆ†ç±»</h2><blockquote><p><strong>KVé”®å€¼å¯¹</strong></p></blockquote><ul><li>æ–°æµªï¼š<strong>Redis</strong></li><li>ç¾å›¢ï¼šRedis + Tair</li><li>é˜¿é‡Œã€ç™¾åº¦ï¼šRedis + Memcache</li></ul><blockquote><p>æ–‡æ¡£å‹æ•°æ®åº“ï¼ˆbsonæ•°æ®æ ¼å¼ï¼‰ï¼š</p></blockquote><ul><li><strong>MongoDB</strong>(æŒæ¡)<ul><li>åŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„æ•°æ®åº“ã€‚C++ç¼–å†™ï¼Œç”¨äºå¤„ç†å¤§é‡æ–‡æ¡£ã€‚</li><li>MongoDBæ˜¯RDBMSå’ŒNoSQLçš„ä¸­é—´äº§å“ã€‚MongoDBæ˜¯éå…³ç³»å‹æ•°æ®åº“ä¸­åŠŸèƒ½æœ€ä¸°å¯Œçš„ï¼ŒNoSQLä¸­æœ€åƒå…³ç³»å‹æ•°æ®åº“çš„æ•°æ®åº“ã€‚</li></ul></li><li>ConthDB</li></ul><blockquote><p>åˆ—å­˜å‚¨æ•°æ®åº“</p></blockquote><ul><li><strong>HBase</strong>(å¤§æ•°æ®å¿…å­¦)</li><li>åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</li></ul><blockquote><p>å›¾å…³ç³»æ•°æ®åº“</p></blockquote><p>ç”¨äºå¹¿å‘Šæ¨èï¼Œç¤¾äº¤ç½‘ç»œ</p><ul><li><strong>Neo4j</strong>ã€InfoGrid</li></ul><table><thead><tr><th><strong>åˆ†ç±»</strong></th><th><strong>Examplesä¸¾ä¾‹</strong></th><th><strong>å…¸å‹åº”ç”¨åœºæ™¯</strong></th><th><strong>æ•°æ®æ¨¡å‹</strong></th><th><strong>ä¼˜ç‚¹</strong></th><th><strong>ç¼ºç‚¹</strong></th></tr></thead><tbody><tr><td><strong>é”®å€¼å¯¹ï¼ˆkey-valueï¼‰</strong></td><td>Tokyo Cabinet/Tyrant, Redis, Voldemort, Oracle BDB</td><td>å†…å®¹ç¼“å­˜ï¼Œä¸»è¦ç”¨äºå¤„ç†å¤§é‡æ•°æ®çš„é«˜è®¿é—®è´Ÿè½½ï¼Œä¹Ÿç”¨äºä¸€äº›æ—¥å¿—ç³»ç»Ÿç­‰ç­‰ã€‚</td><td>Key æŒ‡å‘ Value çš„é”®å€¼å¯¹ï¼Œé€šå¸¸ç”¨hash tableæ¥å®ç°</td><td>æŸ¥æ‰¾é€Ÿåº¦å¿«</td><td>æ•°æ®æ— ç»“æ„åŒ–ï¼Œé€šå¸¸åªè¢«å½“ä½œå­—ç¬¦ä¸²æˆ–è€…äºŒè¿›åˆ¶æ•°æ®</td></tr><tr><td><strong>åˆ—å­˜å‚¨æ•°æ®åº“</strong></td><td>Cassandra, HBase, Riak</td><td>åˆ†å¸ƒå¼çš„æ–‡ä»¶ç³»ç»Ÿ</td><td>ä»¥åˆ—ç°‡å¼å­˜å‚¨ï¼Œå°†åŒä¸€åˆ—æ•°æ®å­˜åœ¨ä¸€èµ·</td><td>æŸ¥æ‰¾é€Ÿåº¦å¿«ï¼Œå¯æ‰©å±•æ€§å¼ºï¼Œæ›´å®¹æ˜“è¿›è¡Œåˆ†å¸ƒå¼æ‰©å±•</td><td>åŠŸèƒ½ç›¸å¯¹å±€é™</td></tr><tr><td><strong>æ–‡æ¡£å‹æ•°æ®åº“</strong></td><td>CouchDB, MongoDb</td><td>Webåº”ç”¨ï¼ˆä¸Key-Valueç±»ä¼¼ï¼ŒValueæ˜¯ç»“æ„åŒ–çš„ï¼Œä¸åŒçš„æ˜¯æ•°æ®åº“èƒ½å¤Ÿäº†è§£Valueçš„å†…å®¹ï¼‰</td><td>Key-Valueå¯¹åº”çš„é”®å€¼å¯¹ï¼ŒValueä¸ºç»“æ„åŒ–æ•°æ®</td><td>æ•°æ®ç»“æ„è¦æ±‚ä¸ä¸¥æ ¼ï¼Œè¡¨ç»“æ„å¯å˜ï¼Œä¸éœ€è¦åƒå…³ç³»å‹æ•°æ®åº“ä¸€æ ·éœ€è¦é¢„å…ˆå®šä¹‰è¡¨ç»“æ„</td><td>æŸ¥è¯¢æ€§èƒ½ä¸é«˜ï¼Œè€Œä¸”ç¼ºä¹ç»Ÿä¸€çš„æŸ¥è¯¢è¯­æ³•ã€‚</td></tr><tr><td><strong>å›¾å½¢(Graph)æ•°æ®åº“</strong></td><td>Neo4J, InfoGrid, Infinite Graph</td><td>ç¤¾äº¤ç½‘ç»œï¼Œæ¨èç³»ç»Ÿç­‰ã€‚ä¸“æ³¨äºæ„å»ºå…³ç³»å›¾è°±</td><td>å›¾ç»“æ„</td><td>åˆ©ç”¨å›¾ç»“æ„ç›¸å…³ç®—æ³•ã€‚æ¯”å¦‚æœ€çŸ­è·¯å¾„å¯»å€ï¼ŒNåº¦å…³ç³»æŸ¥æ‰¾ç­‰</td><td>å¾ˆå¤šæ—¶å€™éœ€è¦å¯¹æ•´ä¸ªå›¾åšè®¡ç®—æ‰èƒ½å¾—å‡ºéœ€è¦çš„ä¿¡æ¯ï¼Œè€Œä¸”è¿™ç§ç»“æ„ä¸å¤ªå¥½åšåˆ†å¸ƒå¼çš„é›†ç¾¤</td></tr></tbody></table>]]></content>
    
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringCloudç¬”è®°09-Zuulè·¯ç”±ç½‘å…³</title>
    <link href="/posts/2021/01/14/SpringCloud%E7%AC%94%E8%AE%B009-Zuul%E8%B7%AF%E7%94%B1%E7%BD%91%E5%85%B3/"/>
    <url>/posts/2021/01/14/SpringCloud%E7%AC%94%E8%AE%B009-Zuul%E8%B7%AF%E7%94%B1%E7%BD%91%E5%85%B3/</url>
    
    <content type="html"><![CDATA[<h2 id="Zullè·¯ç”±ç½‘å…³"><a href="#Zullè·¯ç”±ç½‘å…³" class="headerlink" title="Zullè·¯ç”±ç½‘å…³"></a>Zullè·¯ç”±ç½‘å…³</h2><h3 id="ä¸€ã€æ¦‚è¿°"><a href="#ä¸€ã€æ¦‚è¿°" class="headerlink" title="ä¸€ã€æ¦‚è¿°"></a>ä¸€ã€æ¦‚è¿°</h3><blockquote><p>ä»€ä¹ˆæ˜¯zuulï¼Ÿ</p></blockquote><p> ZullåŒ…å«äº†å¯¹è¯·æ±‚çš„<strong>è·¯ç”±</strong>(ç”¨æ¥è·³è½¬çš„)å’Œ<strong>è¿‡æ»¤</strong>ä¸¤ä¸ªæœ€ä¸»è¦åŠŸèƒ½ï¼š</p><p> å…¶ä¸­<strong>è·¯ç”±åŠŸèƒ½è´Ÿè´£å°†å¤–éƒ¨è¯·æ±‚è½¬å‘åˆ°å…·ä½“çš„å¾®æœåŠ¡å®ä¾‹ä¸Šï¼Œæ˜¯å®ç°å¤–éƒ¨è®¿é—®ç»Ÿä¸€å…¥å£çš„åŸºç¡€</strong>ï¼Œè€Œè¿‡<strong>æ»¤å™¨åŠŸèƒ½åˆ™è´Ÿè´£å¯¹è¯·æ±‚çš„å¤„ç†è¿‡ç¨‹è¿›è¡Œå¹²é¢„ï¼Œæ˜¯å®ç°è¯·æ±‚æ ¡éªŒï¼ŒæœåŠ¡èšåˆç­‰åŠŸèƒ½çš„åŸºç¡€</strong>ã€‚Zuulå’ŒEurekaè¿›è¡Œæ•´åˆï¼Œå°†Zuulè‡ªèº«æ³¨å†Œä¸ºEurekaæœåŠ¡æ²»ç†ä¸‹çš„åº”ç”¨ï¼ŒåŒæ—¶ä»Eurekaä¸­è·å¾—å…¶ä»–æœåŠ¡çš„æ¶ˆæ¯ï¼Œä¹Ÿå³ä»¥åçš„è®¿é—®å¾®æœåŠ¡éƒ½æ˜¯é€šè¿‡Zuulè·³è½¬åè·å¾—ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B009-Zuul%E8%B7%AF%E7%94%B1%E7%BD%91%E5%85%B3/zuul1.png" alt="zuulä½œç”¨"></p><p><strong>æ³¨æ„</strong>ï¼šZuul æœåŠ¡æœ€ç»ˆè¿˜æ˜¯ä¼šæ³¨å†Œè¿› Eureka</p><p><strong>æä¾›</strong>ï¼šä»£ç† + è·¯ç”± + è¿‡æ»¤ ä¸‰å¤§åŠŸèƒ½ï¼</p><blockquote><p>Zuul èƒ½å¹²å˜›ï¼Ÿ</p></blockquote><ul><li>è·¯ç”±</li><li>è¿‡æ»¤</li></ul><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://github.com/Netflix/zuul/">https://github.com/Netflix/zuul/</a></p><h4 id="å…¥é—¨æ¡ˆä¾‹"><a href="#å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="å…¥é—¨æ¡ˆä¾‹"></a>å…¥é—¨æ¡ˆä¾‹</h4><p><strong>æ–°å»ºspringcloud-zuulæ¨¡å—ï¼Œå¹¶å¯¼å…¥ä¾èµ–</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å¯¼å…¥zuulä¾èµ–--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-zuul<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.6.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>application.yml</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">9527</span><br><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">springcloud-zuul</span> <span class="hljs-comment">#å¾®æœåŠ¡åç§°</span><br><br><span class="hljs-comment"># eureka æ³¨å†Œä¸­å¿ƒé…ç½®</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">service-url:</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://eureka7001.com:7001/eureka/,http://eureka7002.com:7002/eureka/,http://eureka7003.com:7003/eureka/</span><br>  <span class="hljs-attr">instance:</span> <span class="hljs-comment">#å®ä¾‹çš„id</span><br>    <span class="hljs-attr">instance-id:</span> <span class="hljs-string">zuul9527.com</span><br>    <span class="hljs-attr">prefer-ip-address:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># æ˜¾ç¤ºip</span><br><br><span class="hljs-attr">info:</span><br>  <span class="hljs-attr">app.name:</span> <span class="hljs-string">haust.springcloud</span> <span class="hljs-comment"># é¡¹ç›®åç§°</span><br>  <span class="hljs-attr">company.name:</span> <span class="hljs-string">æ²³å—ç§‘æŠ€å¤§å­¦è¥¿è‹‘æ ¡åŒº</span> <span class="hljs-comment"># å…¬å¸åç§°</span><br><br><span class="hljs-comment"># zull è·¯ç”±ç½‘å…³é…ç½®</span><br><span class="hljs-attr">zuul:</span><br>  <span class="hljs-comment"># è·¯ç”±ç›¸å…³é…ç½®</span><br>  <span class="hljs-comment"># åŸæ¥è®¿é—®è·¯ç”± eg:http://www.cspStudy.com:9527/springcloud-provider-dept/dept/get/1</span><br>  <span class="hljs-comment"># zullè·¯ç”±é…ç½®åè®¿é—®è·¯ç”± eg:http://www.cspstudy.com:9527/haust/mydept/dept/get/1</span><br>  <span class="hljs-attr">routes:</span><br>    <span class="hljs-attr">mydept.serviceId:</span> <span class="hljs-string">springcloud-provider-dept</span> <span class="hljs-comment"># eurekaæ³¨å†Œä¸­å¿ƒçš„æœåŠ¡æä¾›æ–¹è·¯ç”±åç§°</span><br>    <span class="hljs-attr">mydept.path:</span> <span class="hljs-string">/mydept/**</span> <span class="hljs-comment"># å°†eurekaæ³¨å†Œä¸­å¿ƒçš„æœåŠ¡æä¾›æ–¹è·¯ç”±åç§° æ”¹ä¸ºè‡ªå®šä¹‰è·¯ç”±åç§°</span><br>  <span class="hljs-comment"># ä¸èƒ½å†ä½¿ç”¨è¿™ä¸ªè·¯å¾„è®¿é—®äº†ï¼Œ*ï¼š å¿½ç•¥,éšè—å…¨éƒ¨çš„æœåŠ¡åç§°~</span><br>  <span class="hljs-attr">ignored-services:</span> <span class="hljs-string">&quot;*&quot;</span><br>  <span class="hljs-comment"># è®¾ç½®å…¬å…±çš„å‰ç¼€</span><br>  <span class="hljs-attr">prefix:</span> <span class="hljs-string">/haust</span><br></code></pre></td></tr></table></figure><p><strong>ä¸»å¯åŠ¨ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@EnableZuulProxy</span> <span class="hljs-comment">// å¼€å¯Zuul</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ZuulApplication_9527</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        SpringApplication.run(ZuulApplication_9527.class,args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æµ‹è¯•</strong></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B009-Zuul%E8%B7%AF%E7%94%B1%E7%BD%91%E5%85%B3/1.png" alt="æŸ¥çœ‹æ˜¯å¦è¢«æ³¨å†Œ"></p><p>å¯ä»¥çœ‹åˆ°ï¼ŒZullè·¯ç”±ç½‘å…³è¢«æ³¨å†Œåˆ°Eurekaæ³¨å†Œä¸­å¿ƒä¸­äº†ï¼</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B009-Zuul%E8%B7%AF%E7%94%B1%E7%BD%91%E5%85%B3/2.png" alt="æ²¡æœ‰ç»è¿‡è·¯ç”±ç½‘å…³é…ç½®çš„æƒ…å†µ"></p><p>æ‰€ä»¥ç»è¿‡Zullè·¯ç”±ç½‘å…³é…ç½®åï¼Œè®¿é—®çš„è·¯ç”±ä¸ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B009-Zuul%E8%B7%AF%E7%94%B1%E7%BD%91%E5%85%B3/3.png" alt="ç»è¿‡è·¯ç”±ç½‘å…³é…ç½®çš„æƒ…å†µ"></p><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œå¾®æœåŠ¡åç§°è¢«æ›¿æ¢å¹¶éšè—ï¼Œæ¢æˆäº†æˆ‘ä»¬è‡ªå®šä¹‰çš„å¾®æœåŠ¡åç§°mydeptï¼ŒåŒæ—¶åŠ ä¸Šäº†å‰ç¼€haustï¼Œè¿™æ ·å°±åšåˆ°äº†å¯¹è·¯ç”±fanè®¿é—®çš„åŠ å¯†å¤„ç†ï¼</p>]]></content>
    
    
    
    <tags>
      
      <tag>SpringCloud</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringCloud08ç¬”è®°-Hystrix:æœåŠ¡ç†”æ–­</title>
    <link href="/posts/2021/01/14/SpringCloud%E7%AC%94%E8%AE%B008-Hystrix-%E6%9C%8D%E5%8A%A1%E7%86%94%E6%96%AD/"/>
    <url>/posts/2021/01/14/SpringCloud%E7%AC%94%E8%AE%B008-Hystrix-%E6%9C%8D%E5%8A%A1%E7%86%94%E6%96%AD/</url>
    
    <content type="html"><![CDATA[<h2 id="Hystrixï¼šæœåŠ¡ç†”æ–­"><a href="#Hystrixï¼šæœåŠ¡ç†”æ–­" class="headerlink" title="Hystrixï¼šæœåŠ¡ç†”æ–­"></a>Hystrixï¼šæœåŠ¡ç†”æ–­</h2><blockquote><p>åˆ†å¸ƒå¼ç³»ç»Ÿé¢ä¸´çš„é—®é¢˜</p></blockquote><p>å¤æ‚åˆ†å¸ƒå¼ä½“ç³»ç»“æ„ä¸­çš„åº”ç”¨ç¨‹åºæœ‰æ•°åä¸ªä¾èµ–å…³ç³»ï¼Œæ¯ä¸ªä¾èµ–å…³ç³»åœ¨æŸäº›æ—¶å€™å°†ä¸å¯é¿å…å¤±è´¥ï¼</p><h3 id="ä¸€ã€æœåŠ¡é›ªå´©"><a href="#ä¸€ã€æœåŠ¡é›ªå´©" class="headerlink" title="ä¸€ã€æœåŠ¡é›ªå´©"></a>ä¸€ã€æœåŠ¡é›ªå´©</h3><p>å¤šä¸ªå¾®æœåŠ¡ä¹‹é—´è°ƒç”¨çš„æ—¶å€™ï¼Œå‡è®¾å¾®æœåŠ¡Aè°ƒç”¨å¾®æœåŠ¡Bå’Œå¾®æœåŠ¡Cï¼Œå¾®æœåŠ¡Bå’Œå¾®æœåŠ¡Cåˆè°ƒç”¨å…¶ä»–çš„å¾®æœåŠ¡ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„â€œæ‰‡å‡ºâ€ï¼Œå¦‚æœæ‰‡å‡ºçš„é“¾è·¯ä¸Š<strong>æŸä¸ªå¾®æœåŠ¡çš„è°ƒç”¨å“åº”æ—¶é—´è¿‡é•¿ï¼Œæˆ–è€…ä¸å¯ç”¨</strong>ï¼Œå¯¹å¾®æœåŠ¡Açš„è°ƒç”¨å°±ä¼šå ç”¨è¶Šæ¥è¶Šå¤šçš„ç³»ç»Ÿèµ„æºï¼Œè¿›è€Œå¼•èµ·ç³»ç»Ÿå´©æºƒï¼Œæ‰€è°“çš„â€œé›ªå´©æ•ˆåº”â€ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B008-Hystrix-%E6%9C%8D%E5%8A%A1%E7%86%94%E6%96%AD/%E6%9C%8D%E5%8A%A1%E9%9B%AA%E5%B4%A9.png" alt="æœåŠ¡é›ªå´©"></p><p> å¯¹äºé«˜æµé‡çš„åº”ç”¨æ¥è¯´ï¼Œå•ä¸€çš„åç«¯ä¾èµ–å¯èƒ½ä¼šå¯¼è‡´æ‰€æœ‰æœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰èµ„æºéƒ½åœ¨å‡ åç§’å†…é¥±å’Œã€‚æ¯”å¤±è´¥æ›´ç³Ÿç³•çš„æ˜¯ï¼Œè¿™äº›åº”ç”¨ç¨‹åºè¿˜å¯èƒ½å¯¼è‡´æœåŠ¡ä¹‹é—´çš„å»¶è¿Ÿå¢åŠ ï¼Œå¤‡ä»½é˜Ÿåˆ—ï¼Œçº¿ç¨‹å’Œå…¶ä»–ç³»ç»Ÿèµ„æºç´§å¼ ï¼Œå¯¼è‡´æ•´ä¸ªç³»ç»Ÿå‘ç”Ÿæ›´å¤šçš„çº§è”æ•…éšœï¼Œ<strong>è¿™äº›éƒ½è¡¨ç¤ºéœ€è¦å¯¹æ•…éšœå’Œå»¶è¿Ÿè¿›è¡Œéš”ç¦»å’Œç®¡ç†ï¼Œä»¥è¾¾åˆ°å•ä¸ªä¾èµ–å…³ç³»çš„å¤±è´¥è€Œä¸å½±å“æ•´ä¸ªåº”ç”¨ç¨‹åºæˆ–ç³»ç»Ÿè¿è¡Œ</strong>ã€‚</p><p> æˆ‘ä»¬éœ€è¦ï¼Œ<strong>å¼ƒè½¦ä¿å¸…</strong>ï¼</p><h3 id><a href="#" class="headerlink" title></a></h3><h3 id="äºŒã€ä»€ä¹ˆæ˜¯Hystrix"><a href="#äºŒã€ä»€ä¹ˆæ˜¯Hystrix" class="headerlink" title="äºŒã€ä»€ä¹ˆæ˜¯Hystrix"></a>äºŒã€ä»€ä¹ˆæ˜¯Hystrix</h3><p><strong>ystrix</strong>æ˜¯ä¸€ä¸ªåº”ç”¨äºå¤„ç†åˆ†å¸ƒå¼ç³»ç»Ÿçš„å»¶è¿Ÿå’Œå®¹é”™çš„å¼€æºåº“ï¼Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿé‡Œï¼Œè®¸å¤šä¾èµ–ä¸å¯é¿å…çš„ä¼šè°ƒç”¨å¤±è´¥ï¼Œæ¯”å¦‚è¶…æ—¶ï¼Œå¼‚å¸¸ç­‰ï¼Œ<strong>Hystrix</strong> èƒ½å¤Ÿä¿è¯åœ¨ä¸€ä¸ªä¾èµ–å‡ºé—®é¢˜çš„æƒ…å†µä¸‹ï¼Œä¸ä¼šå¯¼è‡´æ•´ä¸ªä½“ç³»æœåŠ¡å¤±è´¥ï¼Œé¿å…çº§è”æ•…éšœï¼Œä»¥æé«˜åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¼¹æ€§ã€‚</p><p> â€œ<strong>æ–­è·¯å™¨</strong>â€æœ¬èº«æ˜¯ä¸€ç§å¼€å…³è£…ç½®ï¼Œå½“æŸä¸ªæœåŠ¡å•å…ƒå‘ç”Ÿæ•…éšœä¹‹åï¼Œé€šè¿‡æ–­è·¯å™¨çš„æ•…éšœç›‘æ§ (ç±»ä¼¼ç†”æ–­ä¿é™©ä¸) ï¼Œ<strong>å‘è°ƒç”¨æ–¹è¿”å›ä¸€ä¸ªæœåŠ¡é¢„æœŸçš„ï¼Œå¯å¤„ç†çš„å¤‡é€‰å“åº” (FallBack) ï¼Œè€Œä¸æ˜¯é•¿æ—¶é—´çš„ç­‰å¾…æˆ–è€…æŠ›å‡ºè°ƒç”¨æ–¹æ³•æ— æ³•å¤„ç†çš„å¼‚å¸¸ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯äº†æœåŠ¡è°ƒç”¨æ–¹çš„çº¿ç¨‹ä¸ä¼šè¢«é•¿æ—¶é—´ï¼Œä¸å¿…è¦çš„å ç”¨</strong>ï¼Œä»è€Œé¿å…äº†æ•…éšœåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„è”“å»¶ï¼Œä¹ƒè‡³é›ªå´©ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B008-Hystrix-%E6%9C%8D%E5%8A%A1%E7%86%94%E6%96%AD/%E6%9C%8D%E5%8A%A1%E7%86%94%E6%96%AD.png" alt="æœåŠ¡ç†”æ–­"></p><h3 id="ä¸‰ã€Hystrixèƒ½å¹²ä»€ä¹ˆ"><a href="#ä¸‰ã€Hystrixèƒ½å¹²ä»€ä¹ˆ" class="headerlink" title="ä¸‰ã€Hystrixèƒ½å¹²ä»€ä¹ˆ"></a>ä¸‰ã€Hystrixèƒ½å¹²ä»€ä¹ˆ</h3><ul><li>æœåŠ¡é™çº§</li><li>æœåŠ¡ç†”æ–­</li><li>æœåŠ¡é™æµ</li><li>æ¥è¿‘å®æ—¶çš„ç›‘æ§</li><li>â€¦</li></ul><p>å½“ä¸€åˆ‡æ­£å¸¸æ—¶ï¼Œè¯·æ±‚æµå¯ä»¥å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B008-Hystrix-%E6%9C%8D%E5%8A%A1%E7%86%94%E6%96%AD/1.png" alt="æ­£å¸¸è¯·æ±‚æµ"></p><p>å½“è®¸å¤šåç«¯ç³»ç»Ÿä¸­æœ‰ä¸€ä¸ªæ½œåœ¨é˜»å¡æœåŠ¡æ—¶ï¼Œå®ƒå¯ä»¥é˜»æ­¢æ•´ä¸ªç”¨æˆ·è¯·æ±‚ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B008-Hystrix-%E6%9C%8D%E5%8A%A1%E7%86%94%E6%96%AD/2.png" alt="é˜»å¡è¯·æ±‚æµ"></p><p>éšç€å¤§å®¹é‡é€šä¿¡é‡çš„å¢åŠ ï¼Œå•ä¸ªåç«¯ä¾èµ–é¡¹çš„æ½œåœ¨æ€§ä¼šå¯¼è‡´æ‰€æœ‰æœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰èµ„æºåœ¨å‡ ç§’é’Ÿå†…é¥±å’Œã€‚</p><p>åº”ç”¨ç¨‹åºä¸­é€šè¿‡ç½‘ç»œæˆ–å®¢æˆ·ç«¯åº“å¯èƒ½å¯¼è‡´ç½‘ç»œè¯·æ±‚çš„æ¯ä¸ªç‚¹éƒ½æ˜¯æ½œåœ¨æ•…éšœçš„æ¥æºã€‚æ¯”å¤±è´¥æ›´ç³Ÿç³•çš„æ˜¯ï¼Œè¿™äº›åº”ç”¨ç¨‹åºè¿˜å¯èƒ½å¯¼è‡´æœåŠ¡ä¹‹é—´çš„å»¶è¿Ÿå¢åŠ ï¼Œä»è€Œå¤‡ä»½é˜Ÿåˆ—ã€çº¿ç¨‹å’Œå…¶ä»–ç³»ç»Ÿèµ„æºï¼Œä»è€Œå¯¼è‡´æ›´å¤šè·¨ç³»ç»Ÿçš„çº§è”æ•…éšœã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B008-Hystrix-%E6%9C%8D%E5%8A%A1%E7%86%94%E6%96%AD/3.png" alt="çº§è”æ•…éšœ"></p><p>å½“ä½¿ç”¨<strong>Hystrix</strong>åŒ…è£…æ¯ä¸ªåŸºç¡€ä¾èµ–é¡¹æ—¶ï¼Œä¸Šé¢çš„å›¾è¡¨ä¸­æ‰€ç¤ºçš„ä½“ç³»ç»“æ„ä¼šå‘ç”Ÿç±»ä¼¼äºä»¥ä¸‹å…³ç³»å›¾çš„å˜åŒ–ã€‚<strong>æ¯ä¸ªä¾èµ–é¡¹æ˜¯ç›¸äº’éš”ç¦»çš„</strong>ï¼Œé™åˆ¶åœ¨å»¶è¿Ÿå‘ç”Ÿæ—¶å®ƒå¯ä»¥å¡«å……çš„èµ„æºä¸­ï¼Œå¹¶åŒ…å«åœ¨å›é€€é€»è¾‘ä¸­ï¼Œè¯¥é€»è¾‘å†³å®šåœ¨ä¾èµ–é¡¹ä¸­å‘ç”Ÿä»»ä½•ç±»å‹çš„æ•…éšœæ—¶è¦åšå‡ºä»€ä¹ˆæ ·çš„å“åº”ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B008-Hystrix-%E6%9C%8D%E5%8A%A1%E7%86%94%E6%96%AD/4.png" alt="å‘ç”Ÿæ•…éšœçš„å“åº”"></p><h3 id="å››ã€æœåŠ¡ç†”æ–­"><a href="#å››ã€æœåŠ¡ç†”æ–­" class="headerlink" title="å››ã€æœåŠ¡ç†”æ–­"></a>å››ã€æœåŠ¡ç†”æ–­</h3><h5 id="ä»€ä¹ˆæ˜¯æœåŠ¡ç†”æ–­"><a href="#ä»€ä¹ˆæ˜¯æœåŠ¡ç†”æ–­" class="headerlink" title="ä»€ä¹ˆæ˜¯æœåŠ¡ç†”æ–­?"></a>ä»€ä¹ˆæ˜¯æœåŠ¡ç†”æ–­?</h5><p> <strong>ç†”æ–­æœºåˆ¶æ˜¯èµŒèµ¢é›ªå´©æ•ˆåº”çš„ä¸€ç§å¾®æœåŠ¡é“¾è·¯ä¿æŠ¤æœºåˆ¶</strong>ã€‚</p><p> å½“æ‰‡å‡ºé“¾è·¯çš„æŸä¸ªå¾®æœåŠ¡ä¸å¯ç”¨æˆ–è€…å“åº”æ—¶é—´å¤ªé•¿æ—¶ï¼Œä¼šè¿›è¡ŒæœåŠ¡çš„é™çº§ï¼Œ<strong>è¿›è€Œç†”æ–­è¯¥èŠ‚ç‚¹å¾®æœåŠ¡çš„è°ƒç”¨ï¼Œå¿«é€Ÿè¿”å›é”™è¯¯çš„å“åº”ä¿¡æ¯</strong>ã€‚æ£€æµ‹åˆ°è¯¥èŠ‚ç‚¹å¾®æœåŠ¡è°ƒç”¨å“åº”æ­£å¸¸åæ¢å¤è°ƒç”¨é“¾è·¯ã€‚åœ¨SpringCloudæ¡†æ¶é‡Œç†”æ–­æœºåˆ¶é€šè¿‡Hystrixå®ç°ã€‚Hystrixä¼šç›‘æ§å¾®æœåŠ¡é—´è°ƒç”¨çš„çŠ¶å†µï¼Œå½“å¤±è´¥çš„è°ƒç”¨åˆ°ä¸€å®šé˜€å€¼ç¼ºçœæ˜¯<strong>5ç§’å†…20æ¬¡è°ƒç”¨å¤±è´¥ï¼Œå°±ä¼šå¯åŠ¨ç†”æ–­æœºåˆ¶</strong>ã€‚ç†”æ–­æœºåˆ¶çš„æ³¨è§£æ˜¯ï¼š<code>@HystrixCommand</code>ã€‚</p><p>æœåŠ¡ç†”æ–­è§£å†³å¦‚ä¸‹é—®é¢˜ï¼š</p><ul><li>å½“æ‰€ä¾èµ–çš„å¯¹è±¡ä¸ç¨³å®šæ—¶ï¼Œèƒ½å¤Ÿèµ·åˆ°å¿«é€Ÿå¤±è´¥çš„ç›®çš„ï¼›</li><li>å¿«é€Ÿå¤±è´¥åï¼Œèƒ½å¤Ÿæ ¹æ®ä¸€å®šçš„ç®—æ³•åŠ¨æ€è¯•æ¢æ‰€ä¾èµ–å¯¹è±¡æ˜¯å¦æ¢å¤ã€‚</li></ul><h5 id="å…¥é—¨æ¡ˆä¾‹"><a href="#å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="å…¥é—¨æ¡ˆä¾‹"></a>å…¥é—¨æ¡ˆä¾‹</h5><p>æ–°å»ºspringcloud-provider-dept-hystrix-8001æ¨¡å—å¹¶æ‹·è´springcloud-provider-deptâ€“8001å†…çš„<strong>pom.xmlã€resource</strong>å’ŒJavaä»£ç è¿›è¡Œåˆå§‹åŒ–å¹¶è°ƒæ•´ã€‚</p><p><strong>å¯¼å…¥hystrixä¾èµ–</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- Hystrixçš„ä¾èµ– --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0.2.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>è°ƒæ•´ymlé…ç½®æ–‡ä»¶</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># Eurekaçš„é…ç½®ï¼Œæ³¨å†ŒæœåŠ¡</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">service-url:</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://eureka7001.com:7001/eureka/,http://eureka7002.com:7002/eureka/,http://eureka7003.com:7003/eureka/</span><br>    <span class="hljs-attr">fetch-registry:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">instance:</span><br>    <span class="hljs-attr">instance-id:</span> <span class="hljs-string">springcloud-provider-dept-hystrix-8001</span> <span class="hljs-comment"># ä¿®æ”¹Eurekaä¸Šå·²æ³¨å†ŒæœåŠ¡çš„é»˜è®¤æè¿°ä¿¡æ¯</span><br>    <span class="hljs-attr">prefer-ip-address:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p><strong>ä¿®æ”¹controller</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DeptController</span> </span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> DeptService deptService;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ®idæŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯</span><br><span class="hljs-comment">     * å¦‚æœæ ¹æ®idæŸ¥è¯¢å‡ºç°å¼‚å¸¸,åˆ™èµ°hystrixGetè¿™æ®µå¤‡é€‰ä»£ç </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@HystrixCommand(fallbackMethod = &quot;hystrixGet&quot;)</span><br>    <span class="hljs-meta">@RequestMapping(&quot;/dept/get/&#123;id&#125;&quot;)</span><span class="hljs-comment">//æ ¹æ®idæŸ¥è¯¢</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Dept <span class="hljs-title">get</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Long id)</span></span>&#123;<br>        Dept dept = deptService.queryById(id);<br>        <span class="hljs-keyword">if</span> (dept==<span class="hljs-keyword">null</span>)&#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(<span class="hljs-string">&quot;è¿™ä¸ªid=&gt;&quot;</span>+id+<span class="hljs-string">&quot;,ä¸å­˜åœ¨è¯¥ç”¨æˆ·ï¼Œæˆ–ä¿¡æ¯æ— æ³•æ‰¾åˆ°~&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> dept;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ®idæŸ¥è¯¢å¤‡é€‰æ–¹æ¡ˆ(ç†”æ–­)</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Dept <span class="hljs-title">hystrixGet</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Long id)</span></span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Dept().setDeptno(id)<br>            .setDname(<span class="hljs-string">&quot;è¿™ä¸ªid=&gt;&quot;</span>+id+<span class="hljs-string">&quot;,æ²¡æœ‰å¯¹åº”çš„ä¿¡æ¯,null---@Hystrix~&quot;</span>)<br>            .setDb_source(<span class="hljs-string">&quot;åœ¨MySQLä¸­æ²¡æœ‰è¿™ä¸ªæ•°æ®åº“&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>ä¸ºä¸»å¯åŠ¨ç±»æ·»åŠ å¯¹ç†”æ–­çš„æ”¯æŒæ³¨è§£@EnableCircuitBreaker</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å¯åŠ¨ç±»</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@EnableEurekaClient</span> <span class="hljs-comment">// åœ¨æœåŠ¡å¯åŠ¨åè‡ªåŠ¨æ³¨å†Œåˆ°Eurekaä¸­</span><br><span class="hljs-meta">@EnableDiscoveryClient</span> <span class="hljs-comment">// æœåŠ¡å‘ç°</span><br><span class="hljs-comment">// æ·»åŠ å¯¹ç†”æ–­çš„æ”¯æŒ</span><br><span class="hljs-meta">@EnableCircuitBreaker</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DeptProviderHystrix_8001</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        SpringApplication.run(DeptProviderHystrix_8001.class, args);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p><p>ä½¿ç”¨ç†”æ–­åï¼Œå½“è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„idæ—¶ï¼Œå‰å°é¡µå±•ç¤ºæ•°æ®å¦‚ä¸‹:</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B008-Hystrix-%E6%9C%8D%E5%8A%A1%E7%86%94%E6%96%AD/5.png" alt="idä¸å­˜åœ¨"></p><p>è€Œä¸é€‚ç”¨ç†”æ–­çš„springcloud-provider-deptâ€“8001æ¨¡å—è®¿é—®ç›¸åŒåœ°å€ä¼šå‡ºç°Error Page;</p><p>å› æ­¤ï¼Œ<strong>ä¸ºäº†é¿å…å› æŸä¸ªå¾®æœåŠ¡åå°å‡ºç°å¼‚å¸¸æˆ–é”™è¯¯è€Œå¯¼è‡´æ•´ä¸ªåº”ç”¨æˆ–ç½‘é¡µæŠ¥é”™ï¼Œä½¿ç”¨ç†”æ–­æ˜¯å¿…è¦çš„</strong></p><h3 id="äº”ã€æœåŠ¡é™çº§"><a href="#äº”ã€æœåŠ¡é™çº§" class="headerlink" title="äº”ã€æœåŠ¡é™çº§"></a>äº”ã€æœåŠ¡é™çº§</h3><h5 id="ä»€ä¹ˆæ˜¯æœåŠ¡é™çº§"><a href="#ä»€ä¹ˆæ˜¯æœåŠ¡é™çº§" class="headerlink" title="ä»€ä¹ˆæ˜¯æœåŠ¡é™çº§?"></a>ä»€ä¹ˆæ˜¯æœåŠ¡é™çº§?</h5><p> æœåŠ¡é™çº§æ˜¯æŒ‡ å½“æœåŠ¡å™¨å‹åŠ›å‰§å¢çš„æƒ…å†µä¸‹ï¼Œæ ¹æ®å®é™…ä¸šåŠ¡æƒ…å†µåŠæµé‡ï¼Œå¯¹ä¸€äº›æœåŠ¡å’Œé¡µé¢æœ‰ç­–ç•¥çš„ä¸å¤„ç†ï¼Œæˆ–æ¢ç§ç®€å•çš„æ–¹å¼å¤„ç†ï¼Œä»è€Œé‡Šæ”¾æœåŠ¡å™¨èµ„æºä»¥ä¿è¯æ ¸å¿ƒä¸šåŠ¡æ­£å¸¸è¿ä½œæˆ–é«˜æ•ˆè¿ä½œã€‚è¯´ç™½äº†ï¼Œ<strong>å°±æ˜¯å°½å¯èƒ½çš„æŠŠç³»ç»Ÿèµ„æºè®©ç»™ä¼˜å…ˆçº§é«˜çš„æœåŠ¡</strong>ã€‚</p><p>èµ„æºæœ‰é™ï¼Œè€Œè¯·æ±‚æ˜¯æ— é™çš„ã€‚å¦‚æœåœ¨å¹¶å‘é«˜å³°æœŸï¼Œä¸åšæœåŠ¡é™çº§å¤„ç†ï¼Œä¸€æ–¹é¢è‚¯å®šä¼šå½±å“æ•´ä½“æœåŠ¡çš„æ€§èƒ½ï¼Œä¸¥é‡çš„è¯å¯èƒ½ä¼šå¯¼è‡´å®•æœºæŸäº›é‡è¦çš„æœåŠ¡ä¸å¯ç”¨ã€‚æ‰€ä»¥ï¼Œä¸€èˆ¬åœ¨é«˜å³°æœŸï¼Œä¸ºäº†ä¿è¯æ ¸å¿ƒåŠŸèƒ½æœåŠ¡çš„å¯ç”¨æ€§ï¼Œéƒ½è¦å¯¹æŸäº›æœåŠ¡é™çº§å¤„ç†ã€‚æ¯”å¦‚å½“åŒ11æ´»åŠ¨æ—¶ï¼ŒæŠŠäº¤æ˜“æ— å…³çš„æœåŠ¡ç»Ÿç»Ÿé™çº§ï¼Œå¦‚æŸ¥çœ‹èš‚èšæ·±æ—ï¼ŒæŸ¥çœ‹å†å²è®¢å•ç­‰ç­‰ã€‚</p><p>æœåŠ¡é™çº§ä¸»è¦ç”¨äºä»€ä¹ˆåœºæ™¯å‘¢ï¼Ÿå½“æ•´ä¸ªå¾®æœåŠ¡æ¶æ„æ•´ä½“çš„è´Ÿè½½è¶…å‡ºäº†é¢„è®¾çš„ä¸Šé™é˜ˆå€¼æˆ–å³å°†åˆ°æ¥çš„æµé‡é¢„è®¡å°†ä¼šè¶…è¿‡é¢„è®¾çš„é˜ˆå€¼æ—¶ï¼Œä¸ºäº†ä¿è¯é‡è¦æˆ–åŸºæœ¬çš„æœåŠ¡èƒ½æ­£å¸¸è¿è¡Œï¼Œå¯ä»¥å°†ä¸€äº› ä¸é‡è¦ æˆ– ä¸ç´§æ€¥ çš„æœåŠ¡æˆ–ä»»åŠ¡è¿›è¡ŒæœåŠ¡çš„ å»¶è¿Ÿä½¿ç”¨ æˆ– æš‚åœä½¿ç”¨ã€‚</p><p>é™çº§çš„æ–¹å¼å¯ä»¥æ ¹æ®ä¸šåŠ¡æ¥ï¼Œå¯ä»¥å»¶è¿ŸæœåŠ¡ï¼Œæ¯”å¦‚å»¶è¿Ÿç»™ç”¨æˆ·å¢åŠ ç§¯åˆ†ï¼Œåªæ˜¯æ”¾åˆ°ä¸€ä¸ªç¼“å­˜ä¸­ï¼Œç­‰æœåŠ¡å¹³ç¨³ä¹‹åå†æ‰§è¡Œ ï¼›æˆ–è€…åœ¨ç²’åº¦èŒƒå›´å†…å…³é—­æœåŠ¡ï¼Œæ¯”å¦‚å…³é—­ç›¸å…³æ–‡ç« çš„æ¨èã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B008-Hystrix-%E6%9C%8D%E5%8A%A1%E7%86%94%E6%96%AD/%E6%9C%8D%E5%8A%A1%E9%99%8D%E7%BA%A7.png" alt="æœåŠ¡é™çº§"></p><p>ç”±ä¸Šå›¾å¯å¾—ï¼Œ<strong>å½“æŸä¸€æ—¶é—´å†…æœåŠ¡Açš„è®¿é—®é‡æš´å¢ï¼Œè€ŒBå’ŒCçš„è®¿é—®é‡è¾ƒå°‘ï¼Œä¸ºäº†ç¼“è§£AæœåŠ¡çš„å‹åŠ›ï¼Œè¿™æ—¶å€™éœ€è¦Bå’ŒCæš‚æ—¶å…³é—­ä¸€äº›æœåŠ¡åŠŸèƒ½ï¼Œå»æ‰¿æ‹…Açš„éƒ¨åˆ†æœåŠ¡ï¼Œä»è€Œä¸ºAåˆ†æ‹…å‹åŠ›ï¼Œå«åšæœåŠ¡é™çº§</strong>ã€‚</p><h5 id="æœåŠ¡é™çº§éœ€è¦è€ƒè™‘çš„é—®é¢˜"><a href="#æœåŠ¡é™çº§éœ€è¦è€ƒè™‘çš„é—®é¢˜" class="headerlink" title="æœåŠ¡é™çº§éœ€è¦è€ƒè™‘çš„é—®é¢˜"></a>æœåŠ¡é™çº§éœ€è¦è€ƒè™‘çš„é—®é¢˜</h5><ul><li>1ï¼‰é‚£äº›æœåŠ¡æ˜¯æ ¸å¿ƒæœåŠ¡ï¼Œå“ªäº›æœåŠ¡æ˜¯éæ ¸å¿ƒæœåŠ¡</li><li>2ï¼‰é‚£äº›æœåŠ¡å¯ä»¥æ”¯æŒé™çº§ï¼Œé‚£äº›æœåŠ¡ä¸èƒ½æ”¯æŒé™çº§ï¼Œé™çº§ç­–ç•¥æ˜¯ä»€ä¹ˆ</li><li>3ï¼‰é™¤æœåŠ¡é™çº§ä¹‹å¤–æ˜¯å¦å­˜åœ¨æ›´å¤æ‚çš„ä¸šåŠ¡æ”¾é€šåœºæ™¯ï¼Œç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ</li></ul><h5 id="è‡ªåŠ¨é™çº§åˆ†ç±»"><a href="#è‡ªåŠ¨é™çº§åˆ†ç±»" class="headerlink" title="è‡ªåŠ¨é™çº§åˆ†ç±»"></a>è‡ªåŠ¨é™çº§åˆ†ç±»</h5><p>1ï¼‰è¶…æ—¶é™çº§ï¼šä¸»è¦é…ç½®å¥½è¶…æ—¶æ—¶é—´å’Œè¶…æ—¶é‡è¯•æ¬¡æ•°å’Œæœºåˆ¶ï¼Œå¹¶ä½¿ç”¨å¼‚æ­¥æœºåˆ¶æ¢æµ‹å›å¤æƒ…å†µ</p><p>2ï¼‰å¤±è´¥æ¬¡æ•°é™çº§ï¼šä¸»è¦æ˜¯ä¸€äº›ä¸ç¨³å®šçš„apiï¼Œå½“å¤±è´¥è°ƒç”¨æ¬¡æ•°è¾¾åˆ°ä¸€å®šé˜€å€¼è‡ªåŠ¨é™çº§ï¼ŒåŒæ ·è¦ä½¿ç”¨å¼‚æ­¥æœºåˆ¶æ¢æµ‹å›å¤æƒ…å†µ</p><p>3ï¼‰æ•…éšœé™çº§ï¼šæ¯”å¦‚è¦è°ƒç”¨çš„è¿œç¨‹æœåŠ¡æŒ‚æ‰äº†ï¼ˆç½‘ç»œæ•…éšœã€DNSæ•…éšœã€httpæœåŠ¡è¿”å›é”™è¯¯çš„çŠ¶æ€ç ã€rpcæœåŠ¡æŠ›å‡ºå¼‚å¸¸ï¼‰ï¼Œåˆ™å¯ä»¥ç›´æ¥é™çº§ã€‚é™çº§åçš„å¤„ç†æ–¹æ¡ˆæœ‰ï¼šé»˜è®¤å€¼ï¼ˆæ¯”å¦‚åº“å­˜æœåŠ¡æŒ‚äº†ï¼Œè¿”å›é»˜è®¤ç°è´§ï¼‰ã€å…œåº•æ•°æ®ï¼ˆæ¯”å¦‚å¹¿å‘ŠæŒ‚äº†ï¼Œè¿”å›æå‰å‡†å¤‡å¥½çš„ä¸€äº›é™æ€é¡µé¢ï¼‰ã€ç¼“å­˜ï¼ˆä¹‹å‰æš‚å­˜çš„ä¸€äº›ç¼“å­˜æ•°æ®ï¼‰</p><p>4ï¼‰é™æµé™çº§ï¼šç§’æ€æˆ–è€…æŠ¢è´­ä¸€äº›é™è´­å•†å“æ—¶ï¼Œæ­¤æ—¶å¯èƒ½ä¼šå› ä¸ºè®¿é—®é‡å¤ªå¤§è€Œå¯¼è‡´ç³»ç»Ÿå´©æºƒï¼Œæ­¤æ—¶ä¼šä½¿ç”¨é™æµæ¥è¿›è¡Œé™åˆ¶è®¿é—®é‡ï¼Œå½“è¾¾åˆ°é™æµé˜€å€¼ï¼Œåç»­è¯·æ±‚ä¼šè¢«é™çº§ï¼›é™çº§åçš„å¤„ç†æ–¹æ¡ˆå¯ä»¥æ˜¯ï¼šæ’é˜Ÿé¡µé¢ï¼ˆå°†ç”¨æˆ·å¯¼æµåˆ°æ’é˜Ÿé¡µé¢ç­‰ä¸€ä¼šé‡è¯•ï¼‰ã€æ— è´§ï¼ˆç›´æ¥å‘ŠçŸ¥ç”¨æˆ·æ²¡è´§äº†ï¼‰ã€é”™è¯¯é¡µï¼ˆå¦‚æ´»åŠ¨å¤ªç«çˆ†äº†ï¼Œç¨åé‡è¯•ï¼‰ã€‚</p><h5 id="å…¥é—¨æ¡ˆä¾‹-1"><a href="#å…¥é—¨æ¡ˆä¾‹-1" class="headerlink" title="å…¥é—¨æ¡ˆä¾‹"></a>å…¥é—¨æ¡ˆä¾‹</h5><p>åœ¨springcloud-apiæ¨¡å—ä¸‹çš„serviceåŒ…ä¸­æ–°å»ºé™çº§é…ç½®ç±»<code>DeptClientServiceFallBackFactory.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DeptClientServiceFallBackFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">FallbackFactory</span> </span>&#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> DeptClientService <span class="hljs-title">create</span><span class="hljs-params">(Throwable cause)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> DeptClientService() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-function"><span class="hljs-keyword">public</span> Dept <span class="hljs-title">queryById</span><span class="hljs-params">(Long id)</span> </span>&#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Dept()<br>                        .setDeptno(id)<br>                        .setDname(<span class="hljs-string">&quot;id=&gt;&quot;</span> + id + <span class="hljs-string">&quot;æ²¡æœ‰å¯¹åº”çš„ä¿¡æ¯ï¼Œå®¢æˆ·ç«¯æä¾›äº†é™çº§çš„ä¿¡æ¯ï¼Œè¿™ä¸ªæœåŠ¡ç°åœ¨å·²ç»è¢«å…³é—­&quot;</span>)<br>                        .setDb_source(<span class="hljs-string">&quot;æ²¡æœ‰æ•°æ®~&quot;</span>);<br>            &#125;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Dept&gt; <span class="hljs-title">queryAll</span><span class="hljs-params">()</span> </span>&#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>            &#125;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-function"><span class="hljs-keyword">public</span> Boolean <span class="hljs-title">addDept</span><span class="hljs-params">(Dept dept)</span> </span>&#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>            &#125;<br>        &#125;;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨<code>DeptClientService</code>ä¸­æŒ‡å®šé™çº§é…ç½®ç±»<code>DeptClientServiceFallBackFactory</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span> <span class="hljs-comment">//æ³¨å†Œåˆ°springå®¹å™¨ä¸­</span><br><span class="hljs-comment">//@FeignClient:å¾®æœåŠ¡å®¢æˆ·ç«¯æ³¨è§£,value:æŒ‡å®šå¾®æœåŠ¡çš„åå­—,è¿™æ ·å°±å¯ä»¥ä½¿Feignå®¢æˆ·ç«¯ç›´æ¥æ‰¾åˆ°å¯¹åº”çš„å¾®æœåŠ¡</span><br><span class="hljs-meta">@FeignClient(value = &quot;SPRINGCLOUD-PROVIDER-DEPT&quot;,fallbackFactory = DeptClientServiceFallBackFactory.class)</span><span class="hljs-comment">//fallbackFactoryæŒ‡å®šé™çº§é…ç½®ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">DeptClientService</span> </span>&#123;<br><br>    <span class="hljs-meta">@GetMapping(&quot;/dept/get/&#123;id&#125;&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Dept <span class="hljs-title">queryById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Long id)</span></span>;<br><br>    <span class="hljs-meta">@GetMapping(&quot;/dept/list&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Dept&gt; <span class="hljs-title">queryAll</span><span class="hljs-params">()</span></span>;<br><br>    <span class="hljs-meta">@GetMapping(&quot;/dept/add&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Boolean <span class="hljs-title">addDept</span><span class="hljs-params">(Dept dept)</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨<strong>springcloud-consumer-dept-feign</strong>æ¨¡å—ä¸­å¼€å¯é™çº§ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">80</span><br><br><span class="hljs-comment"># Eurekaé…ç½®</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">register-with-eureka:</span> <span class="hljs-literal">false</span> <span class="hljs-comment"># ä¸å‘ Eurekaæ³¨å†Œè‡ªå·±</span><br>    <span class="hljs-attr">service-url:</span> <span class="hljs-comment"># ä»ä¸‰ä¸ªæ³¨å†Œä¸­å¿ƒä¸­éšæœºå–ä¸€ä¸ªå»è®¿é—®</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://eureka7001.com:7001/eureka/,http://eureka7002.com:7002/eureka/,http://eureka7003.com:7003/eureka/</span><br><br><span class="hljs-comment"># å¼€å¯é™çº§feign.hystrix</span><br><span class="hljs-attr">feign:</span><br>  <span class="hljs-attr">hystrix:</span><br>    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><h3 id="å…­ã€æœåŠ¡ç†”æ–­å’ŒæœåŠ¡é™çº§çš„åŒºåˆ«"><a href="#å…­ã€æœåŠ¡ç†”æ–­å’ŒæœåŠ¡é™çº§çš„åŒºåˆ«" class="headerlink" title="å…­ã€æœåŠ¡ç†”æ–­å’ŒæœåŠ¡é™çº§çš„åŒºåˆ«"></a>å…­ã€æœåŠ¡ç†”æ–­å’ŒæœåŠ¡é™çº§çš„åŒºåˆ«</h3><ul><li><strong>æœåŠ¡ç†”æ–­â€”&gt;æœåŠ¡ç«¯</strong>ï¼šæŸä¸ªæœåŠ¡è¶…æ—¶æˆ–å¼‚å¸¸ï¼Œå¼•èµ·ç†”æ–­~ï¼Œç±»ä¼¼äºä¿é™©ä¸(è‡ªæˆ‘ç†”æ–­)</li><li><strong>æœåŠ¡é™çº§â€”&gt;å®¢æˆ·ç«¯</strong>ï¼šä»æ•´ä½“ç½‘ç«™è¯·æ±‚è´Ÿè½½è€ƒè™‘ï¼Œå½“æŸä¸ªæœåŠ¡ç†”æ–­æˆ–è€…å…³é—­ä¹‹åï¼ŒæœåŠ¡å°†ä¸å†è¢«è°ƒç”¨ï¼Œæ­¤æ—¶åœ¨å®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬å¯ä»¥å‡†å¤‡ä¸€ä¸ª FallBackFactory ï¼Œè¿”å›ä¸€ä¸ªé»˜è®¤çš„å€¼(ç¼ºçœå€¼)ã€‚ä¼šå¯¼è‡´æ•´ä½“çš„æœåŠ¡ä¸‹é™ï¼Œä½†æ˜¯å¥½æ­¹èƒ½ç”¨ï¼Œæ¯”ç›´æ¥æŒ‚æ‰å¼ºã€‚</li><li>è§¦å‘åŸå› ä¸å¤ªä¸€æ ·ï¼ŒæœåŠ¡ç†”æ–­ä¸€èˆ¬æ˜¯æŸä¸ªæœåŠ¡ï¼ˆä¸‹æ¸¸æœåŠ¡ï¼‰æ•…éšœå¼•èµ·ï¼Œè€ŒæœåŠ¡é™çº§ä¸€èˆ¬æ˜¯ä»æ•´ä½“è´Ÿè·è€ƒè™‘ï¼›ç®¡ç†ç›®æ ‡çš„å±‚æ¬¡ä¸å¤ªä¸€æ ·ï¼Œç†”æ–­å…¶å®æ˜¯ä¸€ä¸ªæ¡†æ¶çº§çš„å¤„ç†ï¼Œæ¯ä¸ªå¾®æœåŠ¡éƒ½éœ€è¦ï¼ˆæ— å±‚çº§ä¹‹åˆ†ï¼‰ï¼Œè€Œé™çº§ä¸€èˆ¬éœ€è¦å¯¹ä¸šåŠ¡æœ‰å±‚çº§ä¹‹åˆ†ï¼ˆæ¯”å¦‚é™çº§ä¸€èˆ¬æ˜¯ä»æœ€å¤–å›´æœåŠ¡å¼€å§‹ï¼‰</li><li>å®ç°æ–¹å¼ä¸å¤ªä¸€æ ·ï¼ŒæœåŠ¡é™çº§å…·æœ‰ä»£ç ä¾µå…¥æ€§(ç”±æ§åˆ¶å™¨å®Œæˆ/æˆ–è‡ªåŠ¨é™çº§)ï¼Œç†”æ–­ä¸€èˆ¬ç§°ä¸º<strong>è‡ªæˆ‘ç†”æ–­</strong>ã€‚</li></ul><p><strong>ç†”æ–­ï¼Œé™çº§ï¼Œé™æµ</strong>ï¼š</p><p>é™æµï¼šé™åˆ¶å¹¶å‘çš„è¯·æ±‚è®¿é—®é‡ï¼Œè¶…è¿‡é˜ˆå€¼åˆ™æ‹’ç»ï¼›</p><p>é™çº§ï¼šæœåŠ¡åˆ†ä¼˜å…ˆçº§ï¼Œç‰ºç‰²éæ ¸å¿ƒæœåŠ¡ï¼ˆä¸å¯ç”¨ï¼‰ï¼Œä¿è¯æ ¸å¿ƒæœåŠ¡ç¨³å®šï¼›ä»æ•´ä½“è´Ÿè·è€ƒè™‘ï¼›</p><p>ç†”æ–­ï¼šä¾èµ–çš„ä¸‹æ¸¸æœåŠ¡æ•…éšœè§¦å‘ç†”æ–­ï¼Œé¿å…å¼•å‘æœ¬ç³»ç»Ÿå´©æºƒï¼›ç³»ç»Ÿè‡ªåŠ¨æ‰§è¡Œå’Œæ¢å¤</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">management:</span><br>  <span class="hljs-attr">endpoints:</span><br>    <span class="hljs-attr">web:</span><br>      <span class="hljs-attr">exposure:</span><br>        <span class="hljs-attr">include:</span> [<span class="hljs-string">&quot;health&quot;</span>,<span class="hljs-string">&quot;info&quot;</span>,<span class="hljs-string">&quot;hystrix.stream&quot;</span>]<br></code></pre></td></tr></table></figure><h3 id="ä¸ƒã€Dashboardæµç›‘æ§"><a href="#ä¸ƒã€Dashboardæµç›‘æ§" class="headerlink" title="ä¸ƒã€Dashboardæµç›‘æ§"></a>ä¸ƒã€Dashboardæµç›‘æ§</h3><p>æ–°å»ºspringcloud-consumer-hystrix-dashboardæ¨¡å—</p><p><strong>æ·»åŠ ä¾èµ–</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--Hystrixä¾èµ–--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-hystrix<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.6.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!--dashboardä¾èµ–--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-hystrix-dashboard<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.6.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!--Ribbon--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-ribbon<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.6.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!--Eureka--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-eureka<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.6.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!--å®ä½“ç±»+web--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.haust<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springcloud-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!--çƒ­éƒ¨ç½²--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-devtools<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>ä¸»å¯åŠ¨ç±»</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-comment">// å¼€å¯Dashboard</span><br><span class="hljs-meta">@EnableHystrixDashboard</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DeptConsumerDashboard_9001</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        SpringApplication.run(DeptConsumerDashboard_9001.class,args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç»™springcloud-provider-dept-hystrix-8001æ¨¡å—ä¸‹çš„ä¸»å¯åŠ¨ç±»æ·»åŠ å¦‚ä¸‹ä»£ç ,æ·»åŠ ç›‘æ§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@EnableEurekaClient</span> <span class="hljs-comment">//EnableEurekaClient å®¢æˆ·ç«¯çš„å¯åŠ¨ç±»ï¼Œåœ¨æœåŠ¡å¯åŠ¨åè‡ªåŠ¨å‘æ³¨å†Œä¸­å¿ƒæ³¨å†ŒæœåŠ¡</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DeptProvider_8001</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        SpringApplication.run(DeptProvider_8001.class,args);<br>    &#125;<br><br>    <span class="hljs-comment">//å¢åŠ ä¸€ä¸ª Servlet</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> ServletRegistrationBean <span class="hljs-title">hystrixMetricsStreamServlet</span><span class="hljs-params">()</span></span>&#123;<br>        ServletRegistrationBean registrationBean = <span class="hljs-keyword">new</span> ServletRegistrationBean(<span class="hljs-keyword">new</span> HystrixMetricsStreamServlet());<br>        <span class="hljs-comment">//è®¿é—®è¯¥é¡µé¢å°±æ˜¯ç›‘æ§é¡µé¢</span><br>        registrationBean.addUrlMappings(<span class="hljs-string">&quot;/actuator/hystrix.stream&quot;</span>);<br><br>        <span class="hljs-keyword">return</span> registrationBean;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è®¿é—®ï¼š<a href="http://localhost:9001/hystrix">http://localhost:9001/hystrix</a></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B008-Hystrix-%E6%9C%8D%E5%8A%A1%E7%86%94%E6%96%AD/dashboard.png" alt="Hystrix Dashboard"></p><p>è¿›å…¥ç›‘æ§é¡µé¢ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B008-Hystrix-%E6%9C%8D%E5%8A%A1%E7%86%94%E6%96%AD/dash1.png" alt="Hystrix Dashboard"></p><p>æ•ˆæœå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B008-Hystrix-%E6%9C%8D%E5%8A%A1%E7%86%94%E6%96%AD/dash2.png" alt="Hystrix Dashboardç›‘æ§"></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B008-Hystrix-%E6%9C%8D%E5%8A%A1%E7%86%94%E6%96%AD/dash3.png" alt="Hystrix Dashboardç›‘æ§è®²è§£"></p>]]></content>
    
    
    
    <tags>
      
      <tag>SpringCloud</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringCloudç¬”è®°07-Feign:è´Ÿè½½å‡è¡¡(åŸºäºæœåŠ¡ç«¯)</title>
    <link href="/posts/2021/01/14/SpringCloud%E7%AC%94%E8%AE%B007-Feign-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1-%E5%9F%BA%E4%BA%8E%E6%9C%8D%E5%8A%A1%E7%AB%AF/"/>
    <url>/posts/2021/01/14/SpringCloud%E7%AC%94%E8%AE%B007-Feign-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1-%E5%9F%BA%E4%BA%8E%E6%9C%8D%E5%8A%A1%E7%AB%AF/</url>
    
    <content type="html"><![CDATA[<h2 id="Feignï¼šè´Ÿè½½å‡è¡¡ï¼ˆåŸºäºæœåŠ¡ç«¯ï¼‰"><a href="#Feignï¼šè´Ÿè½½å‡è¡¡ï¼ˆåŸºäºæœåŠ¡ç«¯ï¼‰" class="headerlink" title="Feignï¼šè´Ÿè½½å‡è¡¡ï¼ˆåŸºäºæœåŠ¡ç«¯ï¼‰"></a>Feignï¼šè´Ÿè½½å‡è¡¡ï¼ˆåŸºäºæœåŠ¡ç«¯ï¼‰</h2><h3 id="ä¸€ã€Feignç®€ä»‹"><a href="#ä¸€ã€Feignç®€ä»‹" class="headerlink" title="ä¸€ã€Feignç®€ä»‹"></a>ä¸€ã€Feignç®€ä»‹</h3><p>Feignæ˜¯å£°æ˜å¼Web Serviceå®¢æˆ·ç«¯ï¼Œå®ƒè®©å¾®æœåŠ¡ä¹‹é—´çš„è°ƒç”¨å˜å¾—æ›´ç®€å•ï¼Œç±»ä¼¼controllerè°ƒç”¨serviceã€‚SpringCloudé›†æˆäº†Ribbonå’ŒEurekaï¼Œå¯ä»¥ä½¿ç”¨Feiginæä¾›è´Ÿè½½å‡è¡¡çš„httpå®¢æˆ·ç«¯</p><p><strong>åªéœ€è¦åˆ›å»ºä¸€ä¸ªæ¥å£ï¼Œç„¶åæ·»åŠ æ³¨è§£å³å¯~</strong></p><p>Feignï¼Œä¸»è¦æ˜¯ç¤¾åŒºç‰ˆï¼Œå¤§å®¶éƒ½ä¹ æƒ¯é¢å‘æ¥å£ç¼–ç¨‹ã€‚è¿™ä¸ªæ˜¯å¾ˆå¤šå¼€å‘äººå‘˜çš„è§„èŒƒã€‚è°ƒç”¨å¾®æœåŠ¡è®¿é—®ä¸¤ç§æ–¹æ³•</p><ol><li>å¾®æœåŠ¡åå­— ã€ribbonã€‘</li><li>æ¥å£å’Œæ³¨è§£ ã€feignã€‘</li></ol><p><strong>Feignèƒ½å¹²ä»€ä¹ˆï¼Ÿ</strong></p><ul><li>Feignæ—¨åœ¨ä½¿ç¼–å†™Java Httpå®¢æˆ·ç«¯å˜å¾—æ›´å®¹æ˜“</li><li>å‰é¢åœ¨ä½¿ç”¨<strong>Ribbon</strong> + <strong>RestTemplate</strong>æ—¶ï¼Œåˆ©ç”¨<strong>RestTemplate</strong>å¯¹Httpè¯·æ±‚çš„å°è£…å¤„ç†ï¼Œå½¢æˆäº†ä¸€å¥—æ¨¡æ¿åŒ–çš„è°ƒç”¨æ–¹æ³•ã€‚ä½†æ˜¯åœ¨å®é™…å¼€å‘ä¸­ï¼Œç”±äºå¯¹æœåŠ¡ä¾èµ–çš„è°ƒç”¨å¯èƒ½ä¸æ­¢ä¸€å¤„ï¼Œå¾€å¾€ä¸€ä¸ªæ¥å£ä¼šè¢«å¤šå¤„è°ƒç”¨ï¼Œæ‰€ä»¥é€šå¸¸éƒ½ä¼šé’ˆå¯¹æ¯ä¸ªå¾®æœåŠ¡è‡ªè¡Œå°è£…ä¸€ä¸ªå®¢æˆ·ç«¯ç±»æ¥åŒ…è£…è¿™äº›ä¾èµ–æœåŠ¡çš„è°ƒç”¨ã€‚æ‰€ä»¥ï¼Œ<strong>Feign</strong>åœ¨æ­¤åŸºç¡€ä¸Šåšäº†è¿›ä¸€æ­¥çš„å°è£…ï¼Œç”±ä»–æ¥å¸®åŠ©æˆ‘ä»¬å®šä¹‰å’Œå®ç°ä¾èµ–æœåŠ¡æ¥å£çš„å®šä¹‰ï¼Œåœ¨Feignçš„å®ç°ä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ›å»ºä¸€ä¸ªæ¥å£å¹¶ä½¿ç”¨æ³¨è§£çš„æ–¹å¼æ¥é…ç½®å®ƒ (ç±»ä¼¼ä»¥å‰Daoæ¥å£ä¸Šæ ‡æ³¨Mapperæ³¨è§£ï¼Œç°åœ¨æ˜¯ä¸€ä¸ªå¾®æœåŠ¡æ¥å£ä¸Šé¢æ ‡æ³¨ä¸€ä¸ªFeignæ³¨è§£)ï¼Œå³å¯å®Œæˆå¯¹æœåŠ¡æä¾›æ–¹çš„æ¥å£ç»‘å®šï¼Œç®€åŒ–äº†ä½¿ç”¨Spring Cloud Ribbon æ—¶ï¼Œè‡ªåŠ¨å°è£…æœåŠ¡è°ƒç”¨å®¢æˆ·ç«¯çš„å¼€å‘é‡ã€‚</li></ul><p><strong>Feigné»˜è®¤é›†æˆäº†Ribbon</strong></p><ul><li>åˆ©ç”¨<strong>Ribbon</strong>ç»´æŠ¤äº†MicroServiceCloud-Deptçš„æœåŠ¡åˆ—è¡¨ä¿¡æ¯ï¼Œå¹¶ä¸”é€šè¿‡è½®è¯¢å®ç°äº†å®¢æˆ·ç«¯çš„è´Ÿè½½å‡è¡¡ï¼Œè€Œä¸<strong>Ribbon</strong>ä¸åŒçš„æ˜¯ï¼Œé€šè¿‡<strong>Feign</strong>åªéœ€è¦å®šä¹‰æœåŠ¡ç»‘å®šæ¥å£ä¸”ä»¥å£°æ˜å¼çš„æ–¹æ³•ï¼Œä¼˜é›…è€Œç®€å•çš„å®ç°äº†æœåŠ¡è°ƒç”¨ã€‚</li></ul><h3 id="äºŒã€Feignçš„ä½¿ç”¨æ­¥éª¤"><a href="#äºŒã€Feignçš„ä½¿ç”¨æ­¥éª¤" class="headerlink" title="äºŒã€Feignçš„ä½¿ç”¨æ­¥éª¤"></a>äºŒã€Feignçš„ä½¿ç”¨æ­¥éª¤</h3><ol><li><p>åˆ›å»º<code>springcloud-consumer-dept-feign</code>æ¨¡å—</p></li><li><p>æ‹·è´springcloud-consumer-dept-80æ¨¡å—ä¸‹çš„pom.xmlï¼Œresourceï¼Œä»¥åŠjavaä»£ç åˆ°springcloud-consumer-feignæ¨¡å—ï¼Œå¹¶æ·»åŠ feignä¾èµ–ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--Feignçš„ä¾èµ–--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-feign<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.6.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>æ”¹é€ <code>springcloud-apiæ¨¡å—</code></p><p><code>pom.xml</code>æ·»åŠ  feignä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--Feignçš„ä¾èµ–--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-feign<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.6.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ–°å»ºserviceåŒ…ï¼Œå¹¶æ–°å»º<code>DeptClientService</code>æ¥å£ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// @FeignClient:å¾®æœåŠ¡å®¢æˆ·ç«¯æ³¨è§£,value:æŒ‡å®šå¾®æœåŠ¡çš„åå­—,è¿™æ ·å°±å¯ä»¥ä½¿Feignå®¢æˆ·ç«¯ç›´æ¥æ‰¾åˆ°å¯¹åº”çš„å¾®æœåŠ¡</span><br><span class="hljs-meta">@FeignClient(value = &quot;SPRINGCLOUD-PROVIDER-DEPT&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">DeptClientService</span> </span>&#123;<br><br>    <span class="hljs-meta">@GetMapping(&quot;/dept/get/&#123;id&#125;&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Dept <span class="hljs-title">queryById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Long id)</span></span>;<br><br>    <span class="hljs-meta">@GetMapping(&quot;/dept/list&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Dept <span class="hljs-title">queryAll</span><span class="hljs-params">()</span></span>;<br><br>    <span class="hljs-meta">@GetMapping(&quot;/dept/add&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Dept <span class="hljs-title">addDept</span><span class="hljs-params">(Dept dept)</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹<code>springcloud-consumer-dept-feign</code>æ¨¡å—ä¸‹æ§åˆ¶å±‚çš„<code>DeptConsumerController.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DeptConsumerController</span> </span>&#123;<br><br>    <span class="hljs-comment">// ç†è§£ï¼šæ¶ˆè´¹è€…ï¼Œä¸åº”è¯¥æœ‰serviceå±‚</span><br>    <span class="hljs-comment">// RestTemplate ... ä¾›æˆ‘ä»¬ç›´æ¥è°ƒç”¨ï¼æ³¨å†Œåˆ°springä¸­</span><br>    <span class="hljs-comment">// (url, å®ä½“: Map, Class&lt;T&gt; responseType)</span><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> RestTemplate restTemplate; <span class="hljs-comment">// æä¾›å¤šç§ä¾¿æ·è®¿é—®è¿œç¨‹httpæœåŠ¡çš„æ–¹æ³•ï¼Œç®€å•çš„restfulæœåŠ¡æ¨¡æ¿</span><br><br>    <span class="hljs-meta">@Autowired</span><br>    DeptClientService deptClientService ;<br><br>    <span class="hljs-meta">@RequestMapping(&quot;/consumer/dept/add&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">add</span><span class="hljs-params">(Dept dept)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.deptClientService.addDept(dept);<br>    &#125;<br><br>    <span class="hljs-meta">@RequestMapping(&quot;/consumer/dept/get/&#123;id&#125;&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Dept <span class="hljs-title">get</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Long id)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.deptClientService.queryById(id);<br>    &#125;<br><br>    <span class="hljs-meta">@RequestMapping(&quot;/consumer/dept/list&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Dept&gt; <span class="hljs-title">list</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.deptClientService.queryAll();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>Feignå’ŒRibbonäºŒè€…å¯¹æ¯”ï¼Œå‰è€…æ˜¾ç°å‡ºé¢å‘æ¥å£ç¼–ç¨‹ç‰¹ç‚¹ï¼Œä»£ç çœ‹èµ·æ¥æ›´æ¸…çˆ½ï¼Œè€Œä¸”Feignè°ƒç”¨æ–¹å¼æ›´ç¬¦åˆæˆ‘ä»¬ä¹‹å‰åœ¨åšSSMæˆ–è€…SprngBooté¡¹ç›®æ—¶ï¼ŒControllerå±‚è°ƒç”¨Serviceå±‚çš„ç¼–ç¨‹ä¹ æƒ¯ï¼</p></li><li><p>ä¿®æ”¹ä¸»é…ç½®ç±»<code>FeignDeptConsumer_80</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@EnableEurekaClient</span><br><span class="hljs-meta">@EnableFeignClients(basePackages = &#123;&quot;com.atrox.springcloud&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FeignDeptConsumer_80</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        SpringApplication.run(FeignDeptConsumer_80.class, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å¯åŠ¨å³å¯ã€‚</p></li></ol><h3 id="ä¸‰ã€Feignå’ŒRibbonå¦‚ä½•é€‰æ‹©ï¼Ÿ"><a href="#ä¸‰ã€Feignå’ŒRibbonå¦‚ä½•é€‰æ‹©ï¼Ÿ" class="headerlink" title="ä¸‰ã€Feignå’ŒRibbonå¦‚ä½•é€‰æ‹©ï¼Ÿ"></a>ä¸‰ã€Feignå’ŒRibbonå¦‚ä½•é€‰æ‹©ï¼Ÿ</h3><p><strong>æ ¹æ®ä¸ªäººä¹ æƒ¯è€Œå®šï¼Œå¦‚æœå–œæ¬¢RESTé£æ ¼ä½¿ç”¨Ribbonï¼›å¦‚æœå–œæ¬¢ç¤¾åŒºç‰ˆçš„é¢å‘æ¥å£é£æ ¼ä½¿ç”¨Feign.</strong></p><p>Feign æœ¬è´¨ä¸Šä¹Ÿæ˜¯å®ç°äº† Ribbonï¼Œåªä¸è¿‡åè€…æ˜¯åœ¨è°ƒç”¨æ–¹å¼ä¸Šï¼Œä¸ºäº†æ»¡è¶³ä¸€äº›å¼€å‘è€…ä¹ æƒ¯çš„æ¥å£è°ƒç”¨ä¹ æƒ¯ï¼</p><p>ä¸‹é¢æˆ‘ä»¬å…³é—­springcloud-consumer-dept-80 è¿™ä¸ªæœåŠ¡æ¶ˆè´¹æ–¹ï¼Œæ¢ç”¨springcloud-consumer-dept-feign(ç«¯å£è¿˜æ˜¯80) æ¥ä»£æ›¿ï¼š(ä¾ç„¶å¯ä»¥æ­£å¸¸è®¿é—®ï¼Œå°±æ˜¯è°ƒç”¨æ–¹å¼ç›¸æ¯”äºRibbonå˜åŒ–äº†)</p>]]></content>
    
    
    
    <tags>
      
      <tag>SpringCloud</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringCloudç¬”è®°06-Ribbon:è´Ÿè½½å‡è¡¡ï¼ˆåŸºäºå®¢æˆ·ç«¯ï¼‰</title>
    <link href="/posts/2021/01/13/SpringCloud%E7%AC%94%E8%AE%B006-Ribbon-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%EF%BC%88%E5%9F%BA%E4%BA%8E%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%89/"/>
    <url>/posts/2021/01/13/SpringCloud%E7%AC%94%E8%AE%B006-Ribbon-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%EF%BC%88%E5%9F%BA%E4%BA%8E%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h2 id="Ribbonï¼šè´Ÿè½½å‡è¡¡ï¼ˆåŸºäºå®¢æˆ·ç«¯ï¼‰"><a href="#Ribbonï¼šè´Ÿè½½å‡è¡¡ï¼ˆåŸºäºå®¢æˆ·ç«¯ï¼‰" class="headerlink" title="Ribbonï¼šè´Ÿè½½å‡è¡¡ï¼ˆåŸºäºå®¢æˆ·ç«¯ï¼‰"></a>Ribbonï¼šè´Ÿè½½å‡è¡¡ï¼ˆåŸºäºå®¢æˆ·ç«¯ï¼‰</h2><h3 id="ä¸€ã€è´Ÿè½½å‡è¡¡ä»¥åŠRibbon"><a href="#ä¸€ã€è´Ÿè½½å‡è¡¡ä»¥åŠRibbon" class="headerlink" title="ä¸€ã€è´Ÿè½½å‡è¡¡ä»¥åŠRibbon"></a>ä¸€ã€è´Ÿè½½å‡è¡¡ä»¥åŠRibbon</h3><p><strong>Ribbonæ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><ul><li>Spring Cloud Ribbon æ˜¯åŸºäºNetflix Ribbon å®ç°çš„ä¸€å¥—<strong>å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡çš„å·¥å…·</strong>ã€‚</li><li>ç®€å•çš„è¯´ï¼ŒRibbon æ˜¯ Netflix å‘å¸ƒçš„å¼€æºé¡¹ç›®ï¼Œä¸»è¦åŠŸèƒ½æ˜¯æä¾›å®¢æˆ·ç«¯çš„è½¯ä»¶è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œå°† Netflix çš„ä¸­é—´å±‚æœåŠ¡è¿æ¥åœ¨ä¸€èµ·ã€‚Ribbon çš„å®¢æˆ·ç«¯ç»„ä»¶æä¾›ä¸€ç³»åˆ—å®Œæ•´çš„é…ç½®é¡¹ï¼Œå¦‚ï¼šè¿æ¥è¶…æ—¶ã€é‡è¯•ç­‰ã€‚ç®€å•çš„è¯´ï¼Œå°±æ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­åˆ—å‡º LoadBalancer (ç®€ç§°LBï¼šè´Ÿè½½å‡è¡¡) åé¢æ‰€æœ‰çš„åŠå…¶ï¼ŒRibbon ä¼šè‡ªåŠ¨çš„å¸®åŠ©ä½ åŸºäºæŸç§è§„åˆ™ (å¦‚ç®€å•è½®è¯¢ï¼Œéšæœºè¿æ¥ç­‰ç­‰) å»è¿æ¥è¿™äº›æœºå™¨ã€‚æˆ‘ä»¬ä¹Ÿå®¹æ˜“ä½¿ç”¨ Ribbon å®ç°è‡ªå®šä¹‰çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼</li></ul><p><strong>Ribbonèƒ½å¹²å˜›ï¼Ÿ</strong></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B006-Ribbon-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%EF%BC%88%E5%9F%BA%E4%BA%8E%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%89/ribbon_1.png" alt="ribbonçš„ä½œç”¨"></p><ul><li>LBï¼Œå³è´Ÿè½½å‡è¡¡ (LoadBalancer) ï¼Œåœ¨å¾®æœåŠ¡æˆ–åˆ†å¸ƒå¼é›†ç¾¤ä¸­ç»å¸¸ç”¨çš„ä¸€ç§åº”ç”¨ã€‚</li><li>è´Ÿè½½å‡è¡¡ç®€å•çš„è¯´å°±æ˜¯å°†ç”¨æˆ·çš„è¯·æ±‚å¹³æ‘Šçš„åˆ†é…åˆ°å¤šä¸ªæœåŠ¡ä¸Šï¼Œä»è€Œè¾¾åˆ°ç³»ç»Ÿçš„HA (é«˜ç”¨)ã€‚</li><li>å¸¸è§çš„è´Ÿè½½å‡è¡¡è½¯ä»¶æœ‰ Nginxã€Lvs ç­‰ç­‰ã€‚</li><li>Dubboã€SpringCloud ä¸­å‡ç»™æˆ‘ä»¬æä¾›äº†è´Ÿè½½å‡è¡¡ï¼Œ<strong>SpringCloud çš„è´Ÿè½½å‡è¡¡ç®—æ³•å¯ä»¥è‡ªå®šä¹‰</strong>ã€‚</li><li>è´Ÿè½½å‡è¡¡ç®€å•åˆ†ç±»ï¼š<ul><li>é›†ä¸­å¼LB<ul><li>å³åœ¨æœåŠ¡çš„æä¾›æ–¹å’Œæ¶ˆè´¹æ–¹ä¹‹é—´ä½¿ç”¨ç‹¬ç«‹çš„LBè®¾æ–½ï¼Œå¦‚**Nginx(åå‘ä»£ç†æœåŠ¡å™¨)**ï¼Œç”±è¯¥è®¾æ–½è´Ÿè´£æŠŠè®¿é—®è¯·æ±‚é€šè¿‡æŸç§ç­–ç•¥è½¬å‘è‡³æœåŠ¡çš„æä¾›æ–¹ï¼</li></ul></li><li>è¿›ç¨‹å¼ LB<ul><li>å°†LBé€»è¾‘é›†æˆåˆ°æ¶ˆè´¹æ–¹ï¼Œæ¶ˆè´¹æ–¹ä»æœåŠ¡æ³¨å†Œä¸­å¿ƒè·çŸ¥æœ‰å“ªäº›åœ°å€å¯ç”¨ï¼Œç„¶åè‡ªå·±å†ä»è¿™äº›åœ°å€ä¸­é€‰å‡ºä¸€ä¸ªåˆé€‚çš„æœåŠ¡å™¨ã€‚</li><li><strong>Ribbon å°±å±äºè¿›ç¨‹å†…LB</strong>ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªç±»åº“ï¼Œé›†æˆäºæ¶ˆè´¹æ–¹è¿›ç¨‹ï¼Œæ¶ˆè´¹æ–¹é€šè¿‡å®ƒæ¥è·å–åˆ°æœåŠ¡æä¾›æ–¹çš„åœ°å€ï¼</li></ul></li></ul></li></ul><h3 id="äºŒã€é›†æˆRibbon"><a href="#äºŒã€é›†æˆRibbon" class="headerlink" title="äºŒã€é›†æˆRibbon"></a>äºŒã€é›†æˆRibbon</h3><p><strong>springcloud-consumer-dept-80</strong>å‘pom.xmlä¸­æ·»åŠ Ribbonå’ŒEurekaä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- é›†æˆäº†Ribbon --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!-- Eurekaå®¢æˆ·ç«¯é…ç½® --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-eureka<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.6.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>åœ¨<code>application.yml</code>æ–‡ä»¶ä¸­é…ç½®Eureka</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># Eurekaé…ç½®</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">register-with-eureka:</span> <span class="hljs-literal">false</span> <span class="hljs-comment"># ä¸å‘ Eurekaæ³¨å†Œè‡ªå·±</span><br>    <span class="hljs-attr">service-url:</span> <span class="hljs-comment"># ä»ä¸‰ä¸ªæ³¨å†Œä¸­å¿ƒä¸­éšæœºå–ä¸€ä¸ªå»è®¿é—®</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://eureka7001.com:7001/eureka/,http://eureka7002.com:7002/eureka/,http://eureka7003.com:7003/eureka/</span><br><br></code></pre></td></tr></table></figure><p>ä¸»å¯åŠ¨ç±»åŠ ä¸Š@EnableEurekaClientæ³¨è§£ï¼Œå¼€å¯Eureka</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@EnableEurekaClient</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DeptConsumer_80</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        SpringApplication.run(DeptConsumer_80.class, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è‡ªå®šä¹‰Springé…ç½®ç±»ï¼šConfigBean.java é…ç½®è´Ÿè½½å‡è¡¡å®ç°RestTemplate</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConfigBean</span> </span>&#123; <span class="hljs-comment">// ç±»ä¼¼äº@Configuration --- spring application</span><br><br>    <span class="hljs-comment">// é…ç½®è´Ÿè½½å‡è¡¡å®ç°RestTmplate</span><br>    <span class="hljs-meta">@LoadBalanced</span> <span class="hljs-comment">// Ribbonçš„ä½œç”¨</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> RestTemplate <span class="hljs-title">getRestTemplate</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> RestTemplate();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹conrollerï¼šDeptConsumerController.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// é€šè¿‡ribbonå®ç°è´Ÿè½½å‡è¡¡ï¼Œæˆ‘ä»¬è¿™é‡Œçš„åœ°å€åº”è¯¥æ˜¯ä¸€ä¸ªå˜é‡ï¼Œé€šè¿‡æœåŠ¡åæ¥è®¿é—®ã€‚</span><br><span class="hljs-comment">//  private static final String REST_URL_PREFIX = &quot;http://localhost:8001&quot;;</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String REST_URL_PREFIX = <span class="hljs-string">&quot;http://SPRINGCLOUD-PROVIDER-DEPT&quot;</span>;<br></code></pre></td></tr></table></figure><p>å¯åŠ¨é›†ç¾¤ï¼Œå’ŒæœåŠ¡ç«¯ï¼Œæœ€åå¯åŠ¨å®¢æˆ·ç«¯ï¼Œç”¨<a href="http://localhost:88/comsume/dept/list%E8%BF%9B%E8%A1%8C%E8%AF%B7%E6%B1%82%E6%B5%8B%E8%AF%95%E3%80%82">http://localhost:88/comsume/dept/listè¿›è¡Œè¯·æ±‚æµ‹è¯•ã€‚</a></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B006-Ribbon-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%EF%BC%88%E5%9F%BA%E4%BA%8E%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%89/ribbon_2.png" alt="æµ‹è¯•ç»“æœ"></p><h3 id="ä¸‰ã€ä½¿ç”¨Ribbonå®ç°è´Ÿè½½å‡è¡¡"><a href="#ä¸‰ã€ä½¿ç”¨Ribbonå®ç°è´Ÿè½½å‡è¡¡" class="headerlink" title="ä¸‰ã€ä½¿ç”¨Ribbonå®ç°è´Ÿè½½å‡è¡¡"></a>ä¸‰ã€ä½¿ç”¨Ribbonå®ç°è´Ÿè½½å‡è¡¡</h3><p>å®ç°åŸç†ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B006-Ribbon-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%EF%BC%88%E5%9F%BA%E4%BA%8E%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%89/%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86.png" alt="å®ç°åŸç†"></p><ol><li><p>æ–°å»ºä¸¤ä¸ªæ•°æ®åº“dept02ã€dept03ä¾›ä»¥åçš„ä¸¤ä¸ªæœåŠ¡æä¾›è€…ä½¿ç”¨ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B006-Ribbon-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%EF%BC%88%E5%9F%BA%E4%BA%8E%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%89/db_3.png" alt="æ–°å»ºçš„ä¸¤ä¸ªæ•°æ®åº“"></p></li><li><p>å‚ç…§springcloud-provider-dept-8001ï¼Œæ–°å»ºä¸¤ä¸ªæœåŠ¡æä¾›è€…æ¨¡å—ï¼šspringcloud-provider-dept-8002ã€springcloud-provider-dept-8003</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B006-Ribbon-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%EF%BC%88%E5%9F%BA%E4%BA%8E%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%89/3provider.png" alt="3ä¸ªæœåŠ¡æä¾›è€…æ¨¡å—"></p></li><li><p>åœ¨pomæ–‡ä»¶ä¸­å¼•å…¥springcloud-provider-dept-8001çš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- EurekaæœåŠ¡ç«¯çš„ä¾èµ– --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-eureka<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.6.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- actuatorå®Œå–„ç›‘æ§ä¿¡æ¯ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- æˆ‘ä»¬éœ€è¦æ‹¿åˆ°å®ä½“ç±»ï¼Œæ‰€ä»¥è¦é…ç½®api module --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.atrox<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springcloud-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- Junitå•å…ƒæµ‹è¯•çš„ä¾èµ– --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- MySQLæ•°æ®åº“è¿æ¥çš„ä¾èµ– --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- Druidæ•°æ®æºçš„ä¾èµ– --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- Logbackçš„ä¾èµ– --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>ch.qos.logback<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>logback-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- SpringBootå¯åŠ¨å™¨çš„ä¾èµ– --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- SpringBoot-testçš„ä¾èµ– --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- SpringBoot-webå¯åŠ¨å™¨çš„ä¾èµ– --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- jettyåº”ç”¨æœåŠ¡å™¨çš„ä¾èµ– --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-jetty<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- Devtoolsçƒ­éƒ¨ç½²å·¥å…·çš„ä¾èµ– --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-devtools<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä¿®æ”¹resourcesç›®å½•ä¸‹mapperæ–‡ä»¶çš„æŸ¥è¯¢è¯­å¥çš„åº“ä¸ºè‡ªå·±å“åº”çš„åº“ã€‚</p><p>ä¿®æ”¹<code>application.yml</code>ä¸­çš„ç«¯å£å·å’ŒEurekaçš„é…ç½®ï¼Œæ³¨å†ŒæœåŠ¡</p></li><li><p>å¯åŠ¨8001ã€8002ã€8003ä¸‰ä¸ªæœåŠ¡æä¾›è€…å’Œ7001ã€7002ã€7003æ³¨å†Œä¸­å¿ƒé›†ç¾¤ã€‚éšä¾¿è®¿é—®ttp://eureka7001.com:7001/æŸ¥çœ‹ç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B006-Ribbon-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%EF%BC%88%E5%9F%BA%E4%BA%8E%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%89/ribbon_3.png" alt="3ä¸ªæœåŠ¡æä¾›è€…"></p></li></ol><ol start="5"><li><p>å¯åŠ¨å®¢æˆ·ç«¯80ï¼ŒæŸ¥çœ‹ribbonçš„è´Ÿè½½å‡è¡¡æ•ˆæœï¼Œè®¿é—®<a href="http://localhost:88/consumer/dept/list">http://localhost:88/consumer/dept/list</a></p><p>ç¬¬ä¸€æ¬¡è®¿é—®çš„æ˜¯æœåŠ¡æä¾›è€…8001:</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B006-Ribbon-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%EF%BC%88%E5%9F%BA%E4%BA%8E%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%89/ribbon_4.png" alt="é»˜è®¤è´Ÿè½½å‡è¡¡"></p><p>ç¬¬äºŒæ¬¡è®¿é—®çš„æ˜¯æœåŠ¡æä¾›è€…8002:</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B006-Ribbon-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%EF%BC%88%E5%9F%BA%E4%BA%8E%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%89/ribbon_5.png" alt="é»˜è®¤è´Ÿè½½å‡è¡¡"></p><p>ç¬¬ä¸‰æ¬¡è®¿é—®çš„æ˜¯æœåŠ¡æä¾›è€…8003:</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B006-Ribbon-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%EF%BC%88%E5%9F%BA%E4%BA%8E%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%89/ribbon_6.png" alt="é»˜è®¤è´Ÿè½½å‡è¡¡"></p></li></ol><p>ä»¥ä¸Šè¿™ç§<strong>æ¯æ¬¡è®¿é—®<a href="http://localhost/consumer/dept/list%E9%9A%8F%E6%9C%BA%E8%AE%BF%E9%97%AE%E9%9B%86%E7%BE%A4%E4%B8%AD%E6%9F%90%E4%B8%AA%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%85%EF%BC%8C%E8%BF%99%E7%A7%8D%E6%83%85%E5%86%B5%E5%8F%AB%E5%81%9A%E8%BD%AE%E8%AF%A2">http://localhost/consumer/dept/listéšæœºè®¿é—®é›†ç¾¤ä¸­æŸä¸ªæœåŠ¡æä¾›è€…ï¼Œè¿™ç§æƒ…å†µå«åšè½®è¯¢</a></strong>ï¼Œè½®è¯¢ç®—æ³•åœ¨SpringCloudä¸­å¯ä»¥è‡ªå®šä¹‰ã€‚</p><h3 id="å››ã€åˆ‡æ¢å’Œè‡ªå®šä¹‰è´Ÿè½½å‡è¡¡ç­–ç•¥"><a href="#å››ã€åˆ‡æ¢å’Œè‡ªå®šä¹‰è´Ÿè½½å‡è¡¡ç­–ç•¥" class="headerlink" title="å››ã€åˆ‡æ¢å’Œè‡ªå®šä¹‰è´Ÿè½½å‡è¡¡ç­–ç•¥"></a>å››ã€åˆ‡æ¢å’Œè‡ªå®šä¹‰è´Ÿè½½å‡è¡¡ç­–ç•¥</h3><p><strong>å¦‚ä½•åˆ‡æ¢è´Ÿè½½å‡è¡¡ç­–ç•¥å‘¢ï¼Ÿ</strong></p><p>åœ¨springcloud-provider-dept-80æ¨¡å—ä¸‹çš„ConfigBeanä¸­è¿›è¡Œé…ç½®ï¼Œåˆ‡æ¢ä½¿ç”¨ä¸åŒçš„è§„åˆ™</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConfigBean</span> </span>&#123;<span class="hljs-comment">//@Configuration -- spring  applicationContext.xml</span><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * IRule:</span><br><span class="hljs-comment">     * RoundRobinRule è½®è¯¢ç­–ç•¥</span><br><span class="hljs-comment">     * RandomRule éšæœºç­–ç•¥</span><br><span class="hljs-comment">     * AvailabilityFilteringRule ï¼š ä¼šå…ˆè¿‡æ»¤æ‰ï¼Œè·³é—¸ï¼Œè®¿é—®æ•…éšœçš„æœåŠ¡~ï¼Œå¯¹å‰©ä¸‹çš„è¿›è¡Œè½®è¯¢~</span><br><span class="hljs-comment">     * RetryRule ï¼š ä¼šå…ˆæŒ‰ç…§è½®è¯¢è·å–æœåŠ¡~ï¼Œå¦‚æœæœåŠ¡è·å–å¤±è´¥ï¼Œåˆ™ä¼šåœ¨æŒ‡å®šçš„æ—¶é—´å†…è¿›è¡Œï¼Œé‡è¯•</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> IRule <span class="hljs-title">myRule</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> RandomRule();<span class="hljs-comment">//ä½¿ç”¨éšæœºç­–ç•¥</span><br>        <span class="hljs-comment">//return new RoundRobinRule();//ä½¿ç”¨è½®è¯¢ç­–ç•¥</span><br>        <span class="hljs-comment">//return new AvailabilityFilteringRule();//ä½¿ç”¨è½®è¯¢ç­–ç•¥</span><br>        <span class="hljs-comment">//return new RetryRule();//ä½¿ç”¨è½®è¯¢ç­–ç•¥</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å¦‚ä½•è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Ÿ</strong></p><p>é¦–å…ˆåœ¨ä¸<code>springcloud</code>åŒ…åŒçº§å»ºç«‹<code>myRule</code>åŒ…ï¼Œåœ¨<code>myRule</code>åŒ…ä¸‹å»ºç«‹ä¸€ä¸ªé…ç½®ç±»<code>AtroxRule.java</code>ï¼Œæ³¨æ„ï¼š<strong>è¯¥åŒ…ä¸è¦å’Œä¸»å¯åŠ¨ç±»æ‰€åœ¨çš„åŒ…åŒçº§ï¼Œè¦è·Ÿå¯åŠ¨ç±»æ‰€åœ¨åŒ…åŒçº§</strong></p><p>ä¸»å¯åŠ¨ç±»å¼€å¯è´Ÿè½½å‡è¡¡å¹¶æŒ‡å®šè‡ªå®šä¹‰çš„MyRuleé…ç½®ç±»:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//Ribbon å’Œ Eureka æ•´åˆä»¥åï¼Œå®¢æˆ·ç«¯å¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œä¸ç”¨å…³å¿ƒIPåœ°å€å’Œç«¯å£å·</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@EnableEurekaClient</span><br><span class="hljs-comment">//åœ¨å¾®æœåŠ¡å¯åŠ¨çš„æ—¶å€™å°±èƒ½åŠ è½½è‡ªå®šä¹‰çš„Ribbonç±»(è‡ªå®šä¹‰çš„è§„åˆ™ä¼šè¦†ç›–åŸæœ‰é»˜è®¤çš„è§„åˆ™)</span><br><span class="hljs-meta">@RibbonClient(name = &quot;SPRINGCLOUD-PROVIDER-DEPT&quot;,configuration = MyRule.class)</span><span class="hljs-comment">//å¼€å¯è´Ÿè½½å‡è¡¡,å¹¶æŒ‡å®šè‡ªå®šä¹‰çš„è§„åˆ™</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DeptConsumer_80</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        SpringApplication.run(DeptConsumer_80.class, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å®šä¹‰çš„è§„åˆ™(è¿™é‡Œæˆ‘ä»¬å‚è€ƒRibbonä¸­é»˜è®¤çš„è§„åˆ™ä»£ç è‡ªå·±ç¨å¾®æ”¹åŠ¨):<code>AtroxRule.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AtroxRule</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractLoadBalancerRule</span> </span>&#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ¯ä¸ªæœåŠ¡è®¿é—®5æ¬¡åˆ™æ¢ä¸‹ä¸€ä¸ªæœåŠ¡(æ€»å…±3ä¸ªæœåŠ¡)</span><br><span class="hljs-comment">   * &lt;p&gt;</span><br><span class="hljs-comment">   * total=0,é»˜è®¤=0,å¦‚æœ=5,æŒ‡å‘ä¸‹ä¸€ä¸ªæœåŠ¡èŠ‚ç‚¹</span><br><span class="hljs-comment">   * index=0,é»˜è®¤=0,å¦‚æœtotal=5,index+1</span><br><span class="hljs-comment">   */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> total = <span class="hljs-number">0</span>;<span class="hljs-comment">//è¢«è°ƒç”¨çš„æ¬¡æ•°</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> currentIndex = <span class="hljs-number">0</span>;<span class="hljs-comment">//å½“å‰æ˜¯è°åœ¨æä¾›æœåŠ¡</span><br><br>    <span class="hljs-comment">//@edu.umd.cs.findbugs.annotations.SuppressWarnings(value = &quot;RCN_REDUNDANT_NULLCHECK_OF_NULL_VALUE&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Server <span class="hljs-title">choose</span><span class="hljs-params">(ILoadBalancer lb, Object key)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (lb == <span class="hljs-keyword">null</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>        &#125;<br>        Server server = <span class="hljs-keyword">null</span>;<br><br>        <span class="hljs-keyword">while</span> (server == <span class="hljs-keyword">null</span>) &#123;<br>            <span class="hljs-keyword">if</span> (Thread.interrupted()) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>            &#125;<br>            List&lt;Server&gt; upList = lb.getReachableServers();<span class="hljs-comment">//è·å¾—å½“å‰æ´»ç€çš„æœåŠ¡</span><br>            List&lt;Server&gt; allList = lb.getAllServers();<span class="hljs-comment">//è·å–æ‰€æœ‰çš„æœåŠ¡</span><br><br>            <span class="hljs-keyword">int</span> serverCount = allList.size();<br>            <span class="hljs-keyword">if</span> (serverCount == <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-comment">/*</span><br><span class="hljs-comment">         * No servers. End regardless of pass, because subsequent passes</span><br><span class="hljs-comment">         * only get more restrictive.</span><br><span class="hljs-comment">         */</span><br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>            &#125;<br><br>            <span class="hljs-comment">//int index = chooseRandomInt(serverCount);//ç”ŸæˆåŒºé—´éšæœºæ•°</span><br>            <span class="hljs-comment">//server = upList.get(index);//ä»æˆ–æ´»ç€çš„æœåŠ¡ä¸­,éšæœºè·å–ä¸€ä¸ª</span><br><br>            <span class="hljs-comment">//=====================è‡ªå®šä¹‰ä»£ç =========================</span><br><br>            <span class="hljs-keyword">if</span> (total &lt; <span class="hljs-number">5</span>) &#123;<br>                server = upList.get(currentIndex);<br>                total++;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                total = <span class="hljs-number">0</span>;<br>                currentIndex++;<br>                <span class="hljs-keyword">if</span> (currentIndex &gt; upList.size()) &#123;<br>                    currentIndex = <span class="hljs-number">0</span>;<br>                &#125;<br>                server = upList.get(currentIndex);<span class="hljs-comment">//ä»æ´»ç€çš„æœåŠ¡ä¸­,è·å–æŒ‡å®šçš„æœåŠ¡æ¥è¿›è¡Œæ“ä½œ</span><br>            &#125;<br><br>            <span class="hljs-comment">//======================================================</span><br><br>            <span class="hljs-keyword">if</span> (server == <span class="hljs-keyword">null</span>) &#123;<br>                <span class="hljs-comment">/*</span><br><span class="hljs-comment">         * The only time this should happen is if the server list were</span><br><span class="hljs-comment">         * somehow trimmed. This is a transient condition. Retry after</span><br><span class="hljs-comment">         * yielding.</span><br><span class="hljs-comment">         */</span><br>                Thread.yield();<br>                <span class="hljs-keyword">continue</span>;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (server.isAlive()) &#123;<br>                <span class="hljs-keyword">return</span> (server);<br>            &#125;<br>            <span class="hljs-comment">// Shouldn&#x27;t actually happen.. but must be transient or a bug.</span><br>            server = <span class="hljs-keyword">null</span>;<br>            Thread.yield();<br>        &#125;<br>        <span class="hljs-keyword">return</span> server;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">int</span> <span class="hljs-title">chooseRandomInt</span><span class="hljs-params">(<span class="hljs-keyword">int</span> serverCount)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> ThreadLocalRandom.current().nextInt(serverCount);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Server <span class="hljs-title">choose</span><span class="hljs-params">(Object key)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> choose(getLoadBalancer(), key);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initWithNiwsConfig</span><span class="hljs-params">(IClientConfig clientConfig)</span> </span>&#123;<br>        <span class="hljs-comment">// TODO Auto-generated method stub</span><br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>SpringCloud</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringCloudç¬”è®°05-EurekaæœåŠ¡æ³¨å†Œä¸å‘ç°</title>
    <link href="/posts/2021/01/13/SpringCloud%E7%AC%94%E8%AE%B005-Eureka%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/"/>
    <url>/posts/2021/01/13/SpringCloud%E7%AC%94%E8%AE%B005-Eureka%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="EurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒ"><a href="#EurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒ" class="headerlink" title="EurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒ"></a>EurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒ</h2><h3 id="ä¸€ã€ä»€ä¹ˆæ˜¯Eureka"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯Eureka" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯Eureka"></a>ä¸€ã€ä»€ä¹ˆæ˜¯Eureka</h3><ul><li>Netflixåœ¨æ¶‰åŠEurekaæ—¶ï¼Œéµå¾ªçš„å°±æ˜¯APIåŸåˆ™.</li><li>Eurekaæ˜¯Netflixçš„æœ‰ä¸ªå­æ¨¡å—ï¼Œä¹Ÿæ˜¯æ ¸å¿ƒæ¨¡å—ä¹‹ä¸€ã€‚Eurekaæ˜¯åŸºäºRESTçš„æœåŠ¡ï¼Œç”¨äºå®šä½æœåŠ¡ï¼Œä»¥å®ç°äº‘ç«¯ä¸­é—´ä»¶å±‚æœåŠ¡å‘ç°å’Œæ•…éšœè½¬ç§»ï¼ŒæœåŠ¡æ³¨å†Œä¸å‘ç°å¯¹äºå¾®æœåŠ¡æ¥è¯´æ˜¯éå¸¸é‡è¦çš„ï¼Œæœ‰äº†æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼Œåªéœ€è¦ä½¿ç”¨æœåŠ¡çš„æ ‡è¯†ç¬¦ï¼Œå°±å¯ä»¥è®¿é—®åˆ°æœåŠ¡ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹æœåŠ¡è°ƒç”¨çš„é…ç½®æ–‡ä»¶äº†ï¼ŒåŠŸèƒ½ç±»ä¼¼äºDubboçš„æ³¨å†Œä¸­å¿ƒï¼Œæ¯”å¦‚Zookeeper.</li></ul><h3 id="äºŒã€åŸç†ç†è§£"><a href="#äºŒã€åŸç†ç†è§£" class="headerlink" title="äºŒã€åŸç†ç†è§£"></a>äºŒã€åŸç†ç†è§£</h3><p><strong>EurekaåŸºæœ¬çš„æ¶æ„</strong></p><ul><li>Springcloud å°è£…äº†Netflixå…¬å¸å¼€å‘çš„Eurekaæ¨¡å—æ¥å®ç°æœåŠ¡æ³¨å†Œä¸å‘ç° (å¯¹æ¯”Zookeeper).</li><li>Eurekaé‡‡ç”¨äº†C-Sçš„æ¶æ„è®¾è®¡ï¼ŒEurekaServerä½œä¸ºæœåŠ¡æ³¨å†ŒåŠŸèƒ½çš„æœåŠ¡å™¨ï¼Œä»–æ˜¯æœåŠ¡æ³¨å†Œä¸­å¿ƒ.</li><li>è€Œç³»ç»Ÿä¸­çš„å…¶ä»–å¾®æœåŠ¡ï¼Œä½¿ç”¨Eurekaçš„å®¢æˆ·ç«¯è¿æ¥åˆ°EurekaServerå¹¶ç»´æŒå¿ƒè·³è¿æ¥ã€‚è¿™æ ·ç³»ç»Ÿçš„ç»´æŠ¤äººå‘˜å°±å¯ä»¥é€šè¿‡EurekaServeræ¥ç›‘æ§ç³»ç»Ÿä¸­å„ä¸ªå¾®æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œï¼ŒSpringcloud çš„ä¸€äº›å…¶ä»–æ¨¡å— (æ¯”å¦‚Zuul) å°±å¯ä»¥é€šè¿‡EurekaServeræ¥å‘ç°ç³»ç»Ÿä¸­çš„å…¶ä»–å¾®æœåŠ¡ï¼Œå¹¶æ‰§è¡Œç›¸å…³çš„é€»è¾‘.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B005-Eureka%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/eureka.png" alt="eurekaæ¶æ„"></p><ul><li><p>å’Œ Dubboæ¶æ„å¯¹æ¯”</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B005-Eureka%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/dubbo.png" alt="eurekaæ¶æ„"></p></li></ul><ul><li>Eureka åŒ…å«ä¸¤ä¸ªç»„ä»¶ï¼š<strong>Eureka Server</strong> å’Œ <strong>Eureka Client</strong>.</li><li>Eureka Server æä¾›æœåŠ¡æ³¨å†Œï¼Œå„ä¸ªèŠ‚ç‚¹å¯åŠ¨åï¼Œå›åœ¨EurekaServerä¸­è¿›è¡Œæ³¨å†Œï¼Œè¿™æ ·Eureka Serverä¸­çš„æœåŠ¡æ³¨å†Œè¡¨ä¸­å°†ä¼šå‚¨å­˜æ‰€æœ‰è¯¾ç”¨æœåŠ¡èŠ‚ç‚¹çš„ä¿¡æ¯ï¼ŒæœåŠ¡èŠ‚ç‚¹çš„ä¿¡æ¯å¯ä»¥åœ¨ç•Œé¢ä¸­ç›´è§‚çš„çœ‹åˆ°.</li><li>Eureka Client æ˜¯ä¸€ä¸ªJavaå®¢æˆ·ç«¯ï¼Œç”¨äºç®€åŒ–EurekaServerçš„äº¤äº’ï¼Œå®¢æˆ·ç«¯åŒæ—¶ä¹Ÿå…·å¤‡ä¸€ä¸ªå†…ç½®çš„ï¼Œä½¿ç”¨è½®è¯¢è´Ÿè½½ç®—æ³•çš„è´Ÿè½½å‡è¡¡å™¨ã€‚åœ¨åº”ç”¨å¯åŠ¨åï¼Œå°†ä¼šå‘EurekaServerå‘é€å¿ƒè·³ (é»˜è®¤å‘¨æœŸä¸º30ç§’) ã€‚å¦‚æœEureka Serveråœ¨å¤šä¸ªå¿ƒè·³å‘¨æœŸå†…æ²¡æœ‰æ¥æ”¶åˆ°æŸä¸ªèŠ‚ç‚¹çš„å¿ƒè·³ï¼ŒEurekaServerå°†ä¼šä»æœåŠ¡æ³¨å†Œè¡¨ä¸­æŠŠè¿™ä¸ªæœåŠ¡èŠ‚ç‚¹ç§»é™¤æ‰ (é»˜è®¤å‘¨æœŸä¸º90s).</li></ul><p><strong>ä¸‰å¤§è§’è‰²</strong></p><ul><li>Eureka Serverï¼šæä¾›æœåŠ¡çš„æ³¨å†Œä¸å‘ç°</li><li>Service Providerï¼šæœåŠ¡ç”Ÿäº§æ–¹ï¼Œå°†è‡ªèº«æœåŠ¡æ³¨å†Œåˆ°Eurekaä¸­ï¼Œä»è€Œä½¿æœåŠ¡æ¶ˆè´¹æ–¹èƒ½ç‹—æ‰¾åˆ°</li><li>Service Consumerï¼šæœåŠ¡æ¶ˆè´¹æ–¹ï¼Œä»Eurekaä¸­è·å–æ³¨å†ŒæœåŠ¡åˆ—è¡¨ï¼Œä»è€Œæ‰¾åˆ°æ¶ˆè´¹æœåŠ¡</li></ul><h3 id="ä¸‰ã€æ„å»ºEurekaæ³¨å†Œä¸­å¿ƒ"><a href="#ä¸‰ã€æ„å»ºEurekaæ³¨å†Œä¸­å¿ƒ" class="headerlink" title="ä¸‰ã€æ„å»ºEurekaæ³¨å†Œä¸­å¿ƒ"></a>ä¸‰ã€æ„å»ºEurekaæ³¨å†Œä¸­å¿ƒ</h3><ol><li><p>æ–°å»º<code>springcloud-eureka-7001</code> å­æ¨¡å—ã€‚</p></li><li><p>pomæ–‡ä»¶å¯¼å…¥ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å¯¼åŒ… --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- eureka-server --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-eureka-server<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.6.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- Devtools --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-devtools<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™<code>application.yml</code>é…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml">server:<br>  port: 7001<br><br># Eurekaé…ç½®<br>eureka:<br>  instance:<br>    hostname: localhost # Eureka æœåŠ¡ç«¯çš„å®ä¾‹åç§°<br>  client:<br>    register-with-eureka: false # è¡¨ç¤ºæ˜¯å¦å‘Eurekaæ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±<br>    fetch-registry: false # å¦‚æœä¸ºfalseï¼Œåˆ™è¡¨ç¤ºè‡ªå·±ä¸ºæ³¨å†Œä¸­å¿ƒ<br>    service-url: # ç›‘æ§é¡µé¢<br>      defaultZone: http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/<br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™ä¸»å¯åŠ¨ç±»ï¼Œå¹¶ä½¿ç”¨æ³¨è§£è¡¨åè‡ªå·±æ˜¯æ³¨å†Œä¸­å¿ƒ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å¯åŠ¨ä¹‹åï¼Œè®¿é—®http://localhost:7001</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@EnableEurekaServer</span> <span class="hljs-comment">// æœåŠ¡ç«¯çš„å¯åŠ¨ç±»ï¼Œå¯ä»¥æ¥å—åˆ«äººæ³¨å†Œè¿›æ¥</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EurekaServer_7001</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        SpringApplication.run(EurekaServer_7001.class, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å¯åŠ¨åè®¿é—®<a href="http://localhost:7001/">http://localhost:7001/</a> å¾—åˆ°ä»¥ä¸‹é¡µé¢ï¼Œå¹¶æ— æœåŠ¡æ³¨å†Œè¿›æ¥ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B005-Eureka%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/eureka_server.png" alt="æ³¨å†Œä¸­å¿ƒ"></p></li></ol><h3 id="å››ã€é…ç½®EurekaæœåŠ¡ç«¯"><a href="#å››ã€é…ç½®EurekaæœåŠ¡ç«¯" class="headerlink" title="å››ã€é…ç½®EurekaæœåŠ¡ç«¯"></a>å››ã€é…ç½®EurekaæœåŠ¡ç«¯</h3><h4 id="1-é…ç½®æ­¥éª¤"><a href="#1-é…ç½®æ­¥éª¤" class="headerlink" title="1. é…ç½®æ­¥éª¤"></a>1. é…ç½®æ­¥éª¤</h4><p>åœ¨è¿™ç±»ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¹‹å‰çš„<strong>springlouc-provider-dept-8001</strong></p><ol><li><p>åœ¨pomæ–‡ä»¶ä¸­å¯¼å…¥EurekaæœåŠ¡ç«¯ä¾èµ–</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs pom">&lt;!-- EurekaæœåŠ¡ç«¯çš„ä¾èµ– --&gt;<br>&lt;dependency&gt;<br>&lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt;<br>    &lt;artifactId&gt;spring-cloud-starter-eureka&lt;&#x2F;artifactId&gt;<br>    &lt;version&gt;1.4.6.RELEASE&lt;&#x2F;version&gt;<br>&lt;&#x2F;dependency&gt;<br></code></pre></td></tr></table></figure></li><li><p>åœ¨<code>application.yml</code>ä¸­æ–°å¢EurekaæœåŠ¡ç«¯é…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8001</span><br><br><span class="hljs-comment"># mybatisé…ç½®</span><br><span class="hljs-attr">mybatis:</span><br>  <span class="hljs-attr">type-aliases-package:</span> <span class="hljs-string">com.atrox.springcloud.pojo</span><br>  <span class="hljs-attr">mapper-locations:</span> <span class="hljs-string">classpath:/mybatis/mapper/*.xml</span><br>  <span class="hljs-attr">config-location:</span> <span class="hljs-string">classpath:/mybatis/mybatis-config.xml</span><br><br><span class="hljs-comment"># springé…ç½®</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">springcloud-provider-dept</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">type:</span> <span class="hljs-string">com.alibaba.druid.pool.DruidDataSource</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/db01?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">zuiweizhiming666</span><br><br><span class="hljs-comment"># Eurekaçš„é…ç½®ï¼Œæ³¨å†ŒæœåŠ¡</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">service-url:</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://localhost:7001/eureka</span><br></code></pre></td></tr></table></figure></li><li><p>ä¸ºä¸»å¯åŠ¨ç±»æ·»åŠ @EnableEurekaClientæ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å¯åŠ¨ç±»</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@EnableEurekaClient</span> <span class="hljs-comment">// åœ¨æœåŠ¡å¯åŠ¨åè‡ªåŠ¨æ³¨å†Œåˆ°Eurekaä¸­</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DeptProvider_8001</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        SpringApplication.run(DeptProvider_8001.class, args);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å…ˆå¯åŠ¨7001æœåŠ¡ç«¯åå¯åŠ¨8001å®¢æˆ·ç«¯è¿›è¡Œæµ‹è¯•ï¼Œç„¶åè®¿é—®ç›‘æ§é¡µ<a href="http://localhost:7001/">http://localhost:7001/</a> äº§çœ‹ç»“æœå¦‚å›¾ï¼ŒæˆåŠŸ.</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B005-Eureka%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/eureka_1.png" alt="æˆåŠŸæ³¨å†Œ"></p></li><li><p>ä¿®æ”¹Eurekaä¸Šå·²æ³¨å†ŒæœåŠ¡çš„é»˜è®¤æè¿°ä¿¡æ¯</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># Eurekaçš„é…ç½®ï¼Œæ³¨å†ŒæœåŠ¡</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">service-url:</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://localhost:7001/eureka</span><br>  <span class="hljs-attr">instance:</span><br>    <span class="hljs-attr">instance-id:</span> <span class="hljs-string">springcloud-provider-dept8001</span> <span class="hljs-comment"># ä¿®æ”¹Eurekaä¸Šå·²æ³¨å†ŒæœåŠ¡çš„é»˜è®¤æè¿°ä¿¡æ¯</span><br></code></pre></td></tr></table></figure><p>ç»“æœå¦‚å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B005-Eureka%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/eureka_2.png" alt="ä¿®æ”¹æ³¨å†ŒæœåŠ¡çš„é»˜è®¤æè¿°ä¿¡æ¯"></p></li><li><p>å¦‚æœæ­¤æ—¶åœæ‰springcloud-provider-dept-8001 ç­‰<strong>30s</strong>å ç›‘æ§ä¼šå¼€å¯ä¿æŠ¤æœºåˆ¶ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B005-Eureka%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/eureka_3.png" alt="eurekaçš„ä¿æŠ¤æœºåˆ¶"></p></li><li><p>é…ç½®å…³äºæœåŠ¡åŠ è½½çš„ç›‘æ§ä¿¡æ¯</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B005-Eureka%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/eureka_5.png" alt="è·³è½¬åˆ°ç›‘æ§ä¿¡æ¯çš„é“¾æ¥"></p><p>é¦–å…ˆåœ¨pom.xmlä¸­æ·»åŠ å®Œå–„ç›‘æ§ä¿¡æ¯çš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- actuatorå®Œå–„ç›‘æ§ä¿¡æ¯ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ç„¶ååœ¨<code>application.yml</code>ä¸­æ·»åŠ é…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># Eurekaçš„é…ç½®ï¼Œæ³¨å†ŒæœåŠ¡</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">service-url:</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://localhost:7001/eureka</span><br>  <span class="hljs-attr">instance:</span><br>    <span class="hljs-attr">instance-id:</span> <span class="hljs-string">springcloud-provider-dept8001</span> <span class="hljs-comment"># ä¿®æ”¹Eurekaä¸Šå·²æ³¨å†ŒæœåŠ¡çš„é»˜è®¤æè¿°ä¿¡æ¯</span><br><br><span class="hljs-comment"># ç›‘æ§Eurekaçš„infoé…ç½®</span><br><span class="hljs-attr">info:</span><br>  <span class="hljs-attr">app.name:</span> <span class="hljs-string">atrox-springcloud</span><br>  <span class="hljs-attr">company.name:</span> <span class="hljs-string">http://AtroxQW.github.io</span><br></code></pre></td></tr></table></figure><p> ç‚¹å‡»æ‰€æ³¨å†ŒæœåŠ¡çš„Statusçš„é“¾æ¥åï¼Œè¿›å…¥ä¿¡æ¯é¡µé¢ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B005-Eureka%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/eureka_4.png" alt="ä¿¡æ¯é¡µé¢"></p></li></ol><h4 id="2-EureKaè‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼šå¥½æ­»ä¸å¦‚èµ–æ´»ç€"><a href="#2-EureKaè‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼šå¥½æ­»ä¸å¦‚èµ–æ´»ç€" class="headerlink" title="2. EureKaè‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼šå¥½æ­»ä¸å¦‚èµ–æ´»ç€"></a>2. EureKaè‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼šå¥½æ­»ä¸å¦‚èµ–æ´»ç€</h4><p>ä¸€å¥è¯æ€»ç»“å°±æ˜¯ï¼š<strong>æŸæ—¶åˆ»æŸä¸€ä¸ªå¾®æœåŠ¡ä¸å¯ç”¨ï¼Œeurekaä¸ä¼šç«‹å³æ¸…ç†ï¼Œä¾æ—§ä¼šå¯¹è¯¥å¾®æœåŠ¡çš„ä¿¡æ¯è¿›è¡Œä¿å­˜ï¼</strong></p><ul><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“eureka serveråœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°å®ä¾‹çš„å¿ƒè·³ï¼Œä¾¿ä¼šæŠŠè¯¥å®ä¾‹ä»æ³¨å†Œè¡¨ä¸­åˆ é™¤ï¼ˆ<strong>é»˜è®¤æ˜¯90ç§’</strong>ï¼‰ï¼Œä½†æ˜¯ï¼Œå¦‚æœçŸ­æ—¶é—´å†…ä¸¢å¤±å¤§é‡çš„å®ä¾‹å¿ƒè·³ï¼Œä¾¿ä¼šè§¦å‘eureka serverçš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œæ¯”å¦‚åœ¨å¼€å‘æµ‹è¯•æ—¶ï¼Œéœ€è¦é¢‘ç¹åœ°é‡å¯å¾®æœåŠ¡å®ä¾‹ï¼Œä½†æ˜¯æˆ‘ä»¬å¾ˆå°‘ä¼šæŠŠeureka serverä¸€èµ·é‡å¯ï¼ˆå› ä¸ºåœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¸ä¼šä¿®æ”¹eurekaæ³¨å†Œä¸­å¿ƒï¼‰ï¼Œ<strong>å½“ä¸€åˆ†é’Ÿå†…æ”¶åˆ°çš„å¿ƒè·³æ•°å¤§é‡å‡å°‘æ—¶ï¼Œä¼šè§¦å‘è¯¥ä¿æŠ¤æœºåˆ¶</strong>ã€‚å¯ä»¥åœ¨eurekaç®¡ç†ç•Œé¢çœ‹åˆ°Renews thresholdå’ŒRenews(last min)ï¼Œå½“åè€…ï¼ˆæœ€åä¸€åˆ†é’Ÿæ”¶åˆ°çš„å¿ƒè·³æ•°ï¼‰å°äºå‰è€…ï¼ˆå¿ƒè·³é˜ˆå€¼ï¼‰çš„æ—¶å€™ï¼Œè§¦å‘ä¿æŠ¤æœºåˆ¶ï¼Œä¼šå‡ºç°çº¢è‰²çš„è­¦å‘Šï¼š<code>EMERGENCY!EUREKA MAY BE INCORRECTLY CLAIMING INSTANCES ARE UP WHEN THEY&#39;RE NOT.RENEWALS ARE LESSER THAN THRESHOLD AND HENCE THE INSTANCES ARE NOT BEGING EXPIRED JUST TO BE SAFE.</code>ä»è­¦å‘Šä¸­å¯ä»¥çœ‹åˆ°ï¼Œeurekaè®¤ä¸ºè™½ç„¶æ”¶ä¸åˆ°å®ä¾‹çš„å¿ƒè·³ï¼Œä½†å®ƒè®¤ä¸ºå®ä¾‹è¿˜æ˜¯å¥åº·çš„ï¼Œeurekaä¼šä¿æŠ¤è¿™äº›å®ä¾‹ï¼Œä¸ä¼šæŠŠå®ƒä»¬ä»æ³¨å†Œè¡¨ä¸­åˆ æ‰ã€‚</li><li>è¯¥ä¿æŠ¤æœºåˆ¶çš„ç›®çš„æ˜¯é¿å…ç½‘ç»œè¿æ¥æ•…éšœï¼Œåœ¨å‘ç”Ÿç½‘ç»œæ•…éšœæ—¶ï¼Œå¾®æœåŠ¡å’Œæ³¨å†Œä¸­å¿ƒä¹‹é—´æ— æ³•æ­£å¸¸é€šä¿¡ï¼Œä½†æœåŠ¡æœ¬èº«æ˜¯å¥åº·çš„ï¼Œä¸åº”è¯¥æ³¨é”€è¯¥æœåŠ¡ï¼Œå¦‚æœeurekaå› ç½‘ç»œæ•…éšœè€ŒæŠŠå¾®æœåŠ¡è¯¯åˆ äº†ï¼Œé‚£å³ä½¿ç½‘ç»œæ¢å¤äº†ï¼Œè¯¥å¾®æœåŠ¡ä¹Ÿä¸ä¼šé‡æ–°æ³¨å†Œåˆ°eureka serveräº†ï¼Œå› ä¸ºåªæœ‰åœ¨å¾®æœåŠ¡å¯åŠ¨çš„æ—¶å€™æ‰ä¼šå‘èµ·æ³¨å†Œè¯·æ±‚ï¼Œåé¢åªä¼šå‘é€å¿ƒè·³å’ŒæœåŠ¡åˆ—è¡¨è¯·æ±‚ï¼Œè¿™æ ·çš„è¯ï¼Œè¯¥å®ä¾‹è™½ç„¶æ˜¯è¿è¡Œç€ï¼Œä½†æ°¸è¿œä¸ä¼šè¢«å…¶å®ƒæœåŠ¡æ‰€æ„ŸçŸ¥ã€‚æ‰€ä»¥ï¼Œeureka serveråœ¨çŸ­æ—¶é—´å†…ä¸¢å¤±è¿‡å¤šçš„å®¢æˆ·ç«¯å¿ƒè·³æ—¶ï¼Œä¼šè¿›å…¥è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ï¼Œè¯¥æ¨¡å¼ä¸‹ï¼Œeurekaä¼šä¿æŠ¤æ³¨å†Œè¡¨ä¸­çš„ä¿¡æ¯ï¼Œä¸åœ¨æ³¨é”€ä»»ä½•å¾®æœåŠ¡ï¼Œå½“ç½‘ç»œæ•…éšœæ¢å¤åï¼Œeurekaä¼šè‡ªåŠ¨é€€å‡ºä¿æŠ¤æ¨¡å¼ã€‚è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼å¯ä»¥è®©é›†ç¾¤æ›´åŠ å¥å£®ã€‚</li><li>ä½†æ˜¯æˆ‘ä»¬åœ¨å¼€å‘æµ‹è¯•é˜¶æ®µï¼Œéœ€è¦é¢‘ç¹åœ°é‡å¯å‘å¸ƒï¼Œå¦‚æœè§¦å‘äº†ä¿æŠ¤æœºåˆ¶ï¼Œåˆ™æ—§çš„æœåŠ¡å®ä¾‹æ²¡æœ‰è¢«åˆ é™¤ï¼Œè¿™æ—¶è¯·æ±‚æœ‰å¯èƒ½è·‘åˆ°æ—§çš„å®ä¾‹ä¸­ï¼Œè€Œè¯¥å®ä¾‹å·²ç»å…³é—­äº†ï¼Œè¿™å°±å¯¼è‡´è¯·æ±‚é”™è¯¯ï¼Œå½±å“å¼€å‘æµ‹è¯•ã€‚æ‰€ä»¥ï¼Œåœ¨å¼€å‘æµ‹è¯•é˜¶æ®µï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè‡ªæˆ‘ä¿æŠ¤æ¨¡å¼å…³é—­ï¼Œåªéœ€åœ¨eureka serveré…ç½®æ–‡ä»¶ä¸­åŠ ä¸Šå¦‚ä¸‹é…ç½®å³å¯ï¼š<code>eureka.server.enable-self-preservation=false</code>ã€ä¸æ¨èå…³é—­è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ã€‘</li></ul><p>è¯¦ç»†å†…å®¹å¯ä»¥å‚è€ƒä¸‹è¿™ç¯‡åšå®¢å†…å®¹ï¼š<a href="https://blog.csdn.net/wudiyong22/article/details/80827594">https://blog.csdn.net/wudiyong22/article/details/80827594</a></p><h4 id="3-å¯¹æ³¨å†Œè¿›æ¥çš„å¾®æœåŠ¡ï¼Œè·å–ä¸€äº›æ¶ˆæ¯ï¼ˆå›¢é˜Ÿå¼€å‘ï¼‰"><a href="#3-å¯¹æ³¨å†Œè¿›æ¥çš„å¾®æœåŠ¡ï¼Œè·å–ä¸€äº›æ¶ˆæ¯ï¼ˆå›¢é˜Ÿå¼€å‘ï¼‰" class="headerlink" title="3. å¯¹æ³¨å†Œè¿›æ¥çš„å¾®æœåŠ¡ï¼Œè·å–ä¸€äº›æ¶ˆæ¯ï¼ˆå›¢é˜Ÿå¼€å‘ï¼‰"></a>3. å¯¹æ³¨å†Œè¿›æ¥çš„å¾®æœåŠ¡ï¼Œè·å–ä¸€äº›æ¶ˆæ¯ï¼ˆå›¢é˜Ÿå¼€å‘ï¼‰</h4><p>åœ¨<code>DeptController</code>ç±»ä¸­æ·»åŠ æ–°æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æ³¨å†Œè¿›æ¥çš„å¾®æœåŠ¡ï¼Œè·å–ä¸€äº›æ¶ˆæ¯</span><br><span class="hljs-meta">@GetMapping(&quot;/dept/discovery&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">Discovery</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// è·å–å¾®æœåŠ¡åˆ—è¡¨çš„æ¸…å•</span><br>    List&lt;String&gt; services = client.getServices();<br>    System.out.println(<span class="hljs-string">&quot;discovery=&gt;service:&quot;</span> + services);<br>    <span class="hljs-comment">// å¾—åˆ°ä¸€ä¸ªå…·ä½“çš„å¾®æœåŠ¡ä¿¡æ¯ï¼Œé€šè¿‡å…·ä½“çš„å¾®æœåŠ¡idï¼ŒapplicationName</span><br>    List&lt;ServiceInstance&gt; instances = client.getInstances(<span class="hljs-string">&quot;SPRINGCLOUD-PROVIDER-DEPT&quot;</span>);<br>    <span class="hljs-keyword">for</span> (ServiceInstance instance : instances) &#123;<br>        System.out.println(<br>            instance.getHost() + <span class="hljs-string">&quot;\t&quot;</span> +<br>            instance.getPort() + <span class="hljs-string">&quot;\t&quot;</span>+<br>            instance.getUri() + <span class="hljs-string">&quot;\t&quot;</span> +<br>            instance.getServiceId()<br>        );<br>    &#125;;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.client;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸»å¯åŠ¨ç±»ä¸­åŠ å…¥@EnableDiscoveryClient æ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å¯åŠ¨ç±»</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@EnableEurekaClient</span> <span class="hljs-comment">// åœ¨æœåŠ¡å¯åŠ¨åè‡ªåŠ¨æ³¨å†Œåˆ°Eurekaä¸­</span><br><span class="hljs-meta">@EnableDiscoveryClient</span> <span class="hljs-comment">// æœåŠ¡å‘ç°</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DeptProvider_8001</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        SpringApplication.run(DeptProvider_8001.class, args);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨<a href="http://localhost:8001/dept/discovery%E8%BF%9B%E8%A1%8C%E8%AE%BF%E9%97%AE">http://localhost:8001/dept/discoveryè¿›è¡Œè®¿é—®</a></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B005-Eureka%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/eureka_6.png" alt="è®¿é—®ç»“æœ"></p><p>æ§åˆ¶å°</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B005-Eureka%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/eureka_7.png" alt="æ§åˆ¶å°è¾“å‡º"></p><h3 id="äº”ã€Eurekaé›†ç¾¤ç¯å¢ƒé…ç½®"><a href="#äº”ã€Eurekaé›†ç¾¤ç¯å¢ƒé…ç½®" class="headerlink" title="äº”ã€Eurekaé›†ç¾¤ç¯å¢ƒé…ç½®"></a>äº”ã€Eurekaé›†ç¾¤ç¯å¢ƒé…ç½®</h3><h4 id="1-åˆå§‹åŒ–"><a href="#1-åˆå§‹åŒ–" class="headerlink" title="1. åˆå§‹åŒ–"></a>1. åˆå§‹åŒ–</h4><p>æ–°å»ºspringcloud-eureka-7002ã€springcloud-eureka-7003 æ¨¡å—</p><ol><li><p>ä¸ºpom.xmlæ·»åŠ ä¾èµ– (ä¸springcloud-eureka-7001ç›¸åŒ)</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å¯¼åŒ… --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- eureka-server --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-eureka-server<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.6.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- Devtools --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-devtools<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>application.ymlé…ç½®(ä¸springcloud-eureka-7001ç›¸åŒ)</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">7003</span><br><br><span class="hljs-comment"># Eurekaé…ç½®</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">instance:</span><br>    <span class="hljs-attr">hostname:</span> <span class="hljs-string">localhost</span> <span class="hljs-comment"># Eureka æœåŠ¡ç«¯çš„å®ä¾‹åç§°</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">register-with-eureka:</span> <span class="hljs-literal">false</span> <span class="hljs-comment"># è¡¨ç¤ºæ˜¯å¦å‘Eurekaæ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±</span><br>    <span class="hljs-attr">fetch-registry:</span> <span class="hljs-literal">false</span> <span class="hljs-comment"># å¦‚æœä¸ºfalseï¼Œåˆ™è¡¨ç¤ºè‡ªå·±ä¸ºæ³¨å†Œä¸­å¿ƒ</span><br>    <span class="hljs-attr">service-url:</span> <span class="hljs-comment"># ç›‘æ§é¡µé¢</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/</span><br></code></pre></td></tr></table></figure></li><li><p>æ·»åŠ ä¸»å¯åŠ¨ç±»(ä¸springcloud-eureka-7001ç›¸åŒ)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å¯åŠ¨ä¹‹åï¼Œè®¿é—®http://localhost:7001</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@EnableEurekaServer</span> <span class="hljs-comment">// æœåŠ¡ç«¯çš„å¯åŠ¨ç±»ï¼Œå¯ä»¥æ¥å—åˆ«äººæ³¨å†Œè¿›æ¥</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EurekaServer_7002</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        SpringApplication.run(EurekaServer_7002.class, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><h4 id="2-é›†ç¾¤æˆå‘˜ç›¸äº’å…³è”"><a href="#2-é›†ç¾¤æˆå‘˜ç›¸äº’å…³è”" class="headerlink" title="2.é›†ç¾¤æˆå‘˜ç›¸äº’å…³è”"></a>2.é›†ç¾¤æˆå‘˜ç›¸äº’å…³è”</h4><p>é…ç½®ä¸€äº›è‡ªå®šä¹‰æœ¬æœºåå­—ï¼Œæ‰¾åˆ°æœ¬æœºhostsæ–‡ä»¶å¹¶æ‰“å¼€</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B005-Eureka%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/hosts.png" alt="ä¿®æ”¹æœ¬æœºhostsæ–‡ä»¶"></p><p>åœ¨hostsæ–‡ä»¶æœ€ååŠ ä¸Šï¼Œè¦è®¿é—®çš„æœ¬æœºåç§°ï¼Œé»˜è®¤æ˜¯localhost</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B005-Eureka%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/hosts_1.png" alt="ä¿®æ”¹æœ¬æœºhostsæ–‡ä»¶"></p><p>ä¿®æ”¹application.ymlçš„é…ç½®ï¼Œå¦‚å›¾ä¸ºspringcloud-eureka-7001é…ç½®ï¼Œåœ¨é›†ç¾¤ä¸­å…³è”å…¶ä»–ä¸¤ä¸ªé›†ç¾¤ï¼Œspringcloud-eureka-7002/springcloud-eureka-7003åŒæ ·åˆ†åˆ«ä¿®æ”¹ä¸ºå…¶å¯¹åº”çš„åç§°å³å¯ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">7001</span><br><br><span class="hljs-comment"># Eurekaé…ç½®</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">instance:</span><br>    <span class="hljs-attr">hostname:</span> <span class="hljs-string">eureka7001.com</span> <span class="hljs-comment"># Eureka æœåŠ¡ç«¯çš„å®ä¾‹åç§°</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">register-with-eureka:</span> <span class="hljs-literal">false</span> <span class="hljs-comment"># è¡¨ç¤ºæ˜¯å¦å‘Eurekaæ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±</span><br>    <span class="hljs-attr">fetch-registry:</span> <span class="hljs-literal">false</span> <span class="hljs-comment"># å¦‚æœä¸ºfalseï¼Œåˆ™è¡¨ç¤ºè‡ªå·±ä¸ºæ³¨å†Œä¸­å¿ƒ</span><br>    <span class="hljs-attr">service-url:</span> <span class="hljs-comment"># ç›‘æ§é¡µé¢</span><br>      <span class="hljs-comment"># å•æœºï¼š defaultZone: http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/</span><br>      <span class="hljs-comment"># é›†ç¾¤ï¼ˆå…³è”ï¼‰</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://eureka7002.com:7002/eureka/,http://eureka7003.com:7003/eureka/</span><br></code></pre></td></tr></table></figure><p>éšåï¼Œä¿®æ”¹springcloud-provider-dept-8001ä¸‹çš„ymlé…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹<strong>Eurekaé…ç½®ï¼šé…ç½®æœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># Eurekaçš„é…ç½®ï¼Œæ³¨å†ŒæœåŠ¡</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">service-url:</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://eureka7001.com:7001/eureka/,http://eureka7002.com:7002/eureka/,http://eureka7003.com:7003/eureka/</span><br>  <span class="hljs-attr">instance:</span><br>    <span class="hljs-attr">instance-id:</span> <span class="hljs-string">springcloud-provider-dept8001</span> <span class="hljs-comment"># ä¿®æ”¹Eurekaä¸Šå·²æ³¨å†ŒæœåŠ¡çš„é»˜è®¤æè¿°ä¿¡æ¯</span><br></code></pre></td></tr></table></figure><p>æœ€åï¼Œå¯åŠ¨3ä¸ªæ³¨å†Œä¸­å¿ƒï¼Œé›†ç¾¤å°±æ­å»ºå¥½äº†ï¼Œå†å¯åŠ¨é¡¹ç›®ï¼Œå°±æŒ‚è½½åˆ°äº†â€œ3ä¸ªæœåŠ¡å™¨ä¸Šâ€äº†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B005-Eureka%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/hosts_2.png" alt="é›†ç¾¤æ¨¡æ‹Ÿ"></p><h3 id="å…­ã€Eurekaå’ŒZookeeperçš„åŒºåˆ«"><a href="#å…­ã€Eurekaå’ŒZookeeperçš„åŒºåˆ«" class="headerlink" title="å…­ã€Eurekaå’ŒZookeeperçš„åŒºåˆ«"></a>å…­ã€Eurekaå’ŒZookeeperçš„åŒºåˆ«</h3><p><strong>1.å›é¡¾CAPåŸåˆ™</strong></p><ul><li><p>RDBMS (MySQL\Oracle\sqlServer) ===&gt; ACID</p></li><li><p>NoSQL (Redis\MongoDB) ===&gt; CAP</p></li></ul><p><strong>2. ACIDæ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><ul><li>A (Atomicity) åŸå­æ€§</li><li>C (Consistency) ä¸€è‡´æ€§</li><li>I (Isolation) éš”ç¦»æ€§</li><li>D (Durability) æŒä¹…æ€§</li></ul><p><strong>3. CAPæ˜¯ä»€ä¹ˆ?</strong></p><ul><li>C (Consistency) å¼ºä¸€è‡´æ€§</li><li>A (Availability) å¯ç”¨æ€§</li><li>P (Partition tolerance) åˆ†åŒºå®¹é”™æ€§</li></ul><p>CAPçš„ä¸‰è¿›äºŒï¼šCAã€APã€CP</p><p><strong>4.CAPç†è®ºçš„æ ¸å¿ƒ</strong></p><ul><li>ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸å¯èƒ½åŒæ—¶å¾ˆå¥½çš„æ»¡è¶³ä¸€è‡´æ€§ï¼Œå¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§è¿™ä¸‰ä¸ªéœ€æ±‚</li><li>æ ¹æ®CAPåŸç†ï¼Œå°†NoSQLæ•°æ®åº“åˆ†æˆäº†æ»¡è¶³CAåŸåˆ™ï¼Œæ»¡è¶³CPåŸåˆ™å’Œæ»¡è¶³APåŸåˆ™ä¸‰å¤§ç±»<ul><li>CAï¼šå•ç‚¹é›†ç¾¤ï¼Œæ»¡è¶³ä¸€è‡´æ€§ï¼Œå¯ç”¨æ€§çš„ç³»ç»Ÿï¼Œé€šå¸¸å¯æ‰©å±•æ€§è¾ƒå·®</li><li>CPï¼šæ»¡è¶³ä¸€è‡´æ€§ï¼Œåˆ†åŒºå®¹é”™çš„ç³»ç»Ÿï¼Œé€šå¸¸æ€§èƒ½ä¸æ˜¯ç‰¹åˆ«é«˜</li><li>APï¼šæ»¡è¶³å¯ç”¨æ€§ï¼Œåˆ†åŒºå®¹é”™çš„ç³»ç»Ÿï¼Œé€šå¸¸å¯èƒ½å¯¹ä¸€è‡´æ€§è¦æ±‚ä½ä¸€äº›</li></ul></li></ul><p><strong>5.ä½œä¸ºåˆ†å¸ƒå¼æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ŒEurekaæ¯”Zookeeperå¥½åœ¨å“ªé‡Œï¼Ÿ</strong></p><p>è‘—åçš„CAPç†è®ºæŒ‡å‡ºï¼Œä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸å¯èƒ½åŒæ—¶æ»¡è¶³C (ä¸€è‡´æ€§) ã€A (å¯ç”¨æ€§) ã€P (å®¹é”™æ€§)ï¼Œç”±äºåˆ†åŒºå®¹é”™æ€§På†åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æ˜¯å¿…é¡»è¦ä¿è¯çš„ï¼Œå› æ­¤æˆ‘ä»¬åªèƒ½å†Aå’ŒCä¹‹é—´è¿›è¡Œæƒè¡¡ã€‚</p><ul><li>Zookeeper ä¿è¯çš„æ˜¯ CP â€”&gt; æ»¡è¶³ä¸€è‡´æ€§ï¼Œåˆ†åŒºå®¹é”™çš„ç³»ç»Ÿï¼Œé€šå¸¸æ€§èƒ½ä¸æ˜¯ç‰¹åˆ«é«˜</li><li>Eureka ä¿è¯çš„æ˜¯ AP â€”&gt; æ»¡è¶³å¯ç”¨æ€§ï¼Œåˆ†åŒºå®¹é”™çš„ç³»ç»Ÿï¼Œé€šå¸¸å¯èƒ½å¯¹ä¸€è‡´æ€§è¦æ±‚ä½ä¸€äº›</li></ul><p><strong>Zookeeperä¿è¯çš„æ˜¯CP</strong></p><p> å½“å‘æ³¨å†Œä¸­å¿ƒæŸ¥è¯¢æœåŠ¡åˆ—è¡¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å®¹å¿æ³¨å†Œä¸­å¿ƒè¿”å›çš„æ˜¯å‡ åˆ†é’Ÿä»¥å‰çš„æ³¨å†Œä¿¡æ¯ï¼Œä½†ä¸èƒ½æ¥æ”¶æœåŠ¡ç›´æ¥downæ‰ä¸å¯ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>æœåŠ¡æ³¨å†ŒåŠŸèƒ½å¯¹å¯ç”¨æ€§çš„è¦æ±‚è¦é«˜äºä¸€è‡´æ€§</strong>ã€‚ä½†zookeeperä¼šå‡ºç°è¿™æ ·ä¸€ç§æƒ…å†µï¼Œå½“masterèŠ‚ç‚¹å› ä¸ºç½‘ç»œæ•…éšœä¸å…¶ä»–èŠ‚ç‚¹å¤±å»è”ç³»æ—¶ï¼Œå‰©ä½™èŠ‚ç‚¹ä¼šé‡æ–°è¿›è¡Œleaderé€‰ä¸¾ã€‚é—®é¢˜åœ¨äºï¼Œé€‰ä¸¾leaderçš„æ—¶é—´å¤ªé•¿ï¼Œ30-120sï¼Œä¸”é€‰ä¸¾æœŸé—´æ•´ä¸ªzookeeperé›†ç¾¤æ˜¯ä¸å¯ç”¨çš„ï¼Œè¿™å°±å¯¼è‡´åœ¨é€‰ä¸¾æœŸé—´æ³¨å†ŒæœåŠ¡ç˜«ç—ªã€‚åœ¨äº‘éƒ¨ç½²çš„ç¯å¢ƒä¸‹ï¼Œå› ä¸ºç½‘ç»œé—®é¢˜ä½¿å¾—zookeeperé›†ç¾¤å¤±å»masterèŠ‚ç‚¹æ˜¯è¾ƒå¤§æ¦‚ç‡å‘ç”Ÿçš„äº‹ä»¶ï¼Œè™½ç„¶æœåŠ¡æœ€ç»ˆèƒ½å¤Ÿæ¢å¤ï¼Œä½†æ˜¯ï¼Œæ¼«é•¿çš„é€‰ä¸¾æ—¶é—´å¯¼è‡´æ³¨å†Œé•¿æœŸä¸å¯ç”¨ï¼Œæ˜¯ä¸å¯å®¹å¿çš„ã€‚</p><p><strong>Eurekaä¿è¯çš„æ˜¯AP</strong></p><p> Eurekaçœ‹æ˜ç™½äº†è¿™ä¸€ç‚¹ï¼Œå› æ­¤åœ¨è®¾è®¡æ—¶å°±ä¼˜å…ˆä¿è¯å¯ç”¨æ€§ã€‚<strong>Eurekaå„ä¸ªèŠ‚ç‚¹éƒ½æ˜¯å¹³ç­‰çš„</strong>ï¼Œå‡ ä¸ªèŠ‚ç‚¹æŒ‚æ‰ä¸ä¼šå½±å“æ­£å¸¸èŠ‚ç‚¹çš„å·¥ä½œï¼Œå‰©ä½™çš„èŠ‚ç‚¹ä¾ç„¶å¯ä»¥æä¾›æ³¨å†Œå’ŒæŸ¥è¯¢æœåŠ¡ã€‚è€ŒEurekaçš„å®¢æˆ·ç«¯åœ¨å‘æŸä¸ªEurekaæ³¨å†Œæ—¶ï¼Œå¦‚æœå‘ç°è¿æ¥å¤±è´¥ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ‡æ¢è‡³å…¶ä»–èŠ‚ç‚¹ï¼Œåªè¦æœ‰ä¸€å°Eurekaè¿˜åœ¨ï¼Œå°±èƒ½ä¿ä½æ³¨å†ŒæœåŠ¡çš„å¯ç”¨æ€§ï¼Œåªä¸è¿‡æŸ¥åˆ°çš„ä¿¡æ¯å¯èƒ½ä¸æ˜¯æœ€æ–°çš„ï¼Œé™¤æ­¤ä¹‹å¤–ï¼ŒEurekaè¿˜æœ‰ä¹‹ä¸­è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œå¦‚æœåœ¨15åˆ†é’Ÿå†…è¶…è¿‡85%çš„èŠ‚ç‚¹éƒ½æ²¡æœ‰æ­£å¸¸çš„å¿ƒè·³ï¼Œé‚£ä¹ˆEurekaå°±è®¤ä¸ºå®¢æˆ·ç«¯ä¸æ³¨å†Œä¸­å¿ƒå‡ºç°äº†ç½‘ç»œæ•…éšœï¼Œæ­¤æ—¶ä¼šå‡ºç°ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p><ul><li>Eurekaä¸åœ¨ä»æ³¨å†Œåˆ—è¡¨ä¸­ç§»é™¤å› ä¸ºé•¿æ—¶é—´æ²¡æ”¶åˆ°å¿ƒè·³è€Œåº”è¯¥è¿‡æœŸçš„æœåŠ¡</li><li>Eurekaä»ç„¶èƒ½å¤Ÿæ¥å—æ–°æœåŠ¡çš„æ³¨å†Œå’ŒæŸ¥è¯¢è¯·æ±‚ï¼Œä½†æ˜¯ä¸ä¼šè¢«åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹ä¸Š (å³ä¿è¯å½“å‰èŠ‚ç‚¹ä¾ç„¶å¯ç”¨)</li><li>å½“ç½‘ç»œç¨³å®šæ—¶ï¼Œå½“å‰å®ä¾‹æ–°çš„æ³¨å†Œä¿¡æ¯ä¼šè¢«åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹ä¸­</li></ul><p>å› æ­¤ï¼ŒEurekaå¯ä»¥å¾ˆå¥½çš„åº”å¯¹å› ç½‘ç»œæ•…éšœå¯¼è‡´éƒ¨åˆ†èŠ‚ç‚¹å¤±å»è”ç³»çš„æƒ…å†µï¼Œè€Œä¸ä¼šåƒzookeeperé‚£æ ·ä½¿æ•´ä¸ªæ³¨å†ŒæœåŠ¡ç˜«ç—ª</p>]]></content>
    
    
    
    <tags>
      
      <tag>SpringCloud</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringCloudç¬”è®°04-Restå­¦ä¹ ç¯å¢ƒæ­å»º:æœåŠ¡æä¾›è€…</title>
    <link href="/posts/2021/01/13/SpringCloud%E7%AC%94%E8%AE%B004-Rest%E5%AD%A6%E4%B9%A0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    <url>/posts/2021/01/13/SpringCloud%E7%AC%94%E8%AE%B004-Rest%E5%AD%A6%E4%B9%A0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<h2 id="Restå­¦ä¹ ç¯å¢ƒæ­å»º"><a href="#Restå­¦ä¹ ç¯å¢ƒæ­å»º" class="headerlink" title="Restå­¦ä¹ ç¯å¢ƒæ­å»º"></a>Restå­¦ä¹ ç¯å¢ƒæ­å»º</h2><h3 id="ä¸€ã€ä»‹ç»"><a href="#ä¸€ã€ä»‹ç»" class="headerlink" title="ä¸€ã€ä»‹ç»"></a>ä¸€ã€ä»‹ç»</h3><ul><li>æˆ‘ä»¬ä¼šä½¿ç”¨ä¸€ä¸ªDeptéƒ¨é—¨æ¨¡å—åšä¸€ä¸ªå¾®æœåŠ¡é€šç”¨æ¡ˆä¾‹<strong>Consumeræ¶ˆè´¹è€…ï¼ˆClientï¼‰é€šè¿‡RESTè°ƒç”¨Provideræä¾›è€…ï¼ˆServerï¼‰æä¾›çš„æœåŠ¡ã€‚</strong></li><li>å›é¡¾Springã€SpringMVCã€MyBatisç­‰ä»¥å¾€çš„å­¦ä¹ çŸ¥è¯†ã€‚</li><li>Mavençš„åˆ†åŒ…åˆ†æ¨¡å—æ¶æ„å¤ä¹ ã€‚</li></ul><blockquote><p>ä¸€ä¸ªç®€å•çš„Mavenæ¨¡å—ç»“æ„æ˜¯è¿™æ ·çš„ï¼š</p><p>â€“ app-parent: ä¸€ä¸ªçˆ¶é¡¹ç›®(app-parent)èšåˆäº†å¾ˆå¤šå­é¡¹ç›®(app-util\app-dao\app-webâ€¦)<br>     |â€“ pom.xml<br>     |<br>     |â€“ app-core<br>     ||â€”- pom.xml<br>     |<br>     |â€“ app-web<br>     ||â€”- pom.xml<br>     â€¦â€¦</p></blockquote><p>ä¸€ä¸ªçˆ¶å·¥ç¨‹å¸¦ç€å¤šä¸ªModuleå­æ¨¡å—ã€‚</p><p>MicroServiceCloudçˆ¶å·¥ç¨‹(Project)ä¸‹åˆæ¬¡å¸¦ç€3ä¸ªå­æ¨¡å—(Module)ï¼š</p><ul><li><strong>microservicecloud-api ã€å°è£…çš„æ•´ä½“entity/æ¥å£/å…¬å…±é…ç½®ç­‰ã€‘</strong></li><li><strong>microservicecloud-consumer-dept-80 ã€æœåŠ¡æä¾›è€…ã€‘</strong></li><li><strong>microservicecloud-provider-dept-8001 ã€æœåŠ¡æ¶ˆè´¹è€…ã€‘</strong></li></ul><h3 id="äºŒã€SpringCloudç‰ˆæœ¬é€‰æ‹©"><a href="#äºŒã€SpringCloudç‰ˆæœ¬é€‰æ‹©" class="headerlink" title="äºŒã€SpringCloudç‰ˆæœ¬é€‰æ‹©"></a>äºŒã€SpringCloudç‰ˆæœ¬é€‰æ‹©</h3><p>æ°¸è¿œæœ€æ–°çš„ <strong>2020.0.0</strong>ï¼Œå‡ºäº†é—®é¢˜å†é™ç‰ˆæœ¬ï¼Œå‹‡æ•¢è¯•é”™ã€‚</p><h3 id="ä¸‰ã€åˆ›å»ºçˆ¶å·¥ç¨‹"><a href="#ä¸‰ã€åˆ›å»ºçˆ¶å·¥ç¨‹" class="headerlink" title="ä¸‰ã€åˆ›å»ºçˆ¶å·¥ç¨‹"></a>ä¸‰ã€åˆ›å»ºçˆ¶å·¥ç¨‹</h3><ul><li>æ–°å»ºçˆ¶å·¥ç¨‹é¡¹ç›®springcloudï¼Œåˆ‡è®°<strong>Packagingæ˜¯pomæ¨¡å¼</strong>ã€‚</li><li>å®šä¹‰pomæ–‡ä»¶ï¼Œå°†åç»­å„ä¸ªå­æ¨¡å—å…¬ç”¨çš„jaråŒ…çš„ç‰ˆæœ¬ç»Ÿä¸€æå–å‡ºæ¥ç®¡ç†ã€‚</li></ul><p><strong>pom.xml</strong>:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.atrox<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>SpringCloud_Study<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-api<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>springcloud-provider-dept-8001<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span><br><br>  <span class="hljs-comment">&lt;!-- æ‰“åŒ…æ–¹å¼ pom --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">maven.complier.source</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.complier.source</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">maven.complier.target</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.complier.target</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">junit.version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">junit.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">lombok.version</span>&gt;</span>1.18.16<span class="hljs-tag">&lt;/<span class="hljs-name">lombok.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">log4j.version</span>&gt;</span>1.2.17<span class="hljs-tag">&lt;/<span class="hljs-name">log4j.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">logback.version</span>&gt;</span>1.2.3<span class="hljs-tag">&lt;/<span class="hljs-name">logback.version</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- SpringCloudçš„ä¾èµ– --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2020.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- SpringBootçš„ä¾èµ– --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.4.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- mysqlæ•°æ®åº“çš„ä¾èµ– --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.22<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- Druidæ•°æ®æºçš„ä¾èµ– --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- SpringBootå¯åŠ¨å™¨çš„ä¾èµ– --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- Log4jæ—¥å¿—çš„ä¾èµ– --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;log4j.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- Juintå•å…ƒæµ‹è¯•çš„ä¾èµ– --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;junit.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- Lombokæ³¨è§£çš„ä¾èµ– --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;lombok.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- Logbackæ—¥å¿—çš„ä¾èµ– --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>ch.qos.logback<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>logback-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;logback.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure><p>çˆ¶å·¥ç¨‹ä¸ºspringcloudï¼Œå…¶ä¸‹é¢æœ‰å¤šä¸ªå­moduleã€‚</p><p>springcloud-consumer-dept-80è®¿é—®springcloud-provider-dept-8001ä¸‹çš„controllerä½¿ç”¨RESTæ–¹å¼ã€‚</p><h3 id="å››ã€åˆ›å»ºAPIæ¨¡å—"><a href="#å››ã€åˆ›å»ºAPIæ¨¡å—" class="headerlink" title="å››ã€åˆ›å»ºAPIæ¨¡å—"></a>å››ã€åˆ›å»ºAPIæ¨¡å—</h3><p>æˆ‘ä»¬é¦–å…ˆå»ºç«‹APIå­æ¨¡å—ï¼Œæ¥è¿›è¡Œå®ä½“ç±»çš„å°è£…ã€‚</p><p>pomæ–‡ä»¶åªéœ€è¦å¯¼å…¥lombokçš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å»ºç«‹<code>com.atrox.springcloud.pojo</code>ç›®å½•ï¼Œåœ¨è¯¥ç›®å½•ä¸‹Deptå®ä½“ç±»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@NoArgsConstructor</span><br><span class="hljs-meta">@Accessors(chain = true)</span> <span class="hljs-comment">// é“¾å¼å†™æ³•</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dept</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Serializable</span> </span>&#123; <span class="hljs-comment">// Dept å®ä½“ç±»ï¼Œå¿…é¡»å®ç°åºåˆ—åŒ–</span><br><br>    <span class="hljs-keyword">private</span> Long deptno;<br>    <span class="hljs-keyword">private</span> String dname;<br><br>    <span class="hljs-comment">// è¿™ä¸ªæ•°æ®å­˜åœ¨é‚£ä¸ªæ•°æ®åº“çš„å­—æ®µï¼›å¾®æœåŠ¡ï¼Œä¸€ä¸ªæœåŠ¡å¯¹åº”ä¸€ä¸ªæ•°æ®åº“ï¼ŒåŒä¸€ä¸ªä¿¡æ¯å¯èƒ½å­˜åœ¨ä¸åŒçš„æ•°æ®åº“</span><br>    <span class="hljs-keyword">private</span> String db_source;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Dept</span><span class="hljs-params">(String dname)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.dname = dname;<br>    &#125;<br><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">  é“¾å¼å†™æ³•ï¼š</span><br><span class="hljs-comment">    Dept dept = new Dept();</span><br><span class="hljs-comment">    dept.setDeptNo(11).setDname(&#x27;sss&#x27;).setDb_Source(&#x27;001&#x27;);</span><br><span class="hljs-comment">   */</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="äº”ã€åˆ›å»ºæœåŠ¡æä¾›è€…Provider"><a href="#äº”ã€åˆ›å»ºæœåŠ¡æä¾›è€…Provider" class="headerlink" title="äº”ã€åˆ›å»ºæœåŠ¡æä¾›è€…Provider"></a>äº”ã€åˆ›å»ºæœåŠ¡æä¾›è€…Provider</h3><p>åœ¨æ­¤å­æ¨¡å—æˆ‘ä»¬ç”¨æ¥æä¾›æœåŠ¡ï¼Œé¦–å…ˆåœ¨pomæ–‡ä»¶ä¸­å¼•å…¥æˆ‘ä»¬æ‰€éœ€çš„ä¾èµ–ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- æˆ‘ä»¬éœ€è¦æ‹¿åˆ°å®ä½“ç±»ï¼Œæ‰€ä»¥è¦é…ç½®api module --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.atrox<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springcloud-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- Junitå•å…ƒæµ‹è¯•çš„ä¾èµ– --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- MySQLæ•°æ®åº“è¿æ¥çš„ä¾èµ– --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- Druidæ•°æ®æºçš„ä¾èµ– --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- Logbackçš„ä¾èµ– --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>ch.qos.logback<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>logback-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- SpringBootå¯åŠ¨å™¨çš„ä¾èµ– --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- SpringBoot-testçš„ä¾èµ– --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- SpringBoot-webå¯åŠ¨å™¨çš„ä¾èµ– --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- jettyåº”ç”¨æœåŠ¡å™¨çš„ä¾èµ– --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-jetty<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- Devtoolsçƒ­éƒ¨ç½²å·¥å…·çš„ä¾èµ– --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-devtools<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ç„¶åï¼Œæˆ‘ä»¬ç¼–å†™<code>applicaiton.yml</code>è¿›è¡Œé…ç½®ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8001</span><br><br><span class="hljs-comment"># mybatisé…ç½®</span><br><span class="hljs-attr">mybatis:</span><br>  <span class="hljs-attr">type-aliases-package:</span> <span class="hljs-string">com.atrox.springcloud.pojo</span><br>  <span class="hljs-attr">mapper-locations:</span> <span class="hljs-string">classpath:/mybatis/mapper/*.xml</span><br>  <span class="hljs-attr">config-location:</span> <span class="hljs-string">classpath:/mybatis/mybatis-config.xml</span><br><br><span class="hljs-comment"># springé…ç½®</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">springcloud-provider-dept</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">type:</span> <span class="hljs-string">com.alibaba.druid.pool.DruidDataSource</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/db01?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">zuiweizhiming666</span><br></code></pre></td></tr></table></figure><p>éšåï¼Œå»ºç«‹<code>com.atrox.springcloud.dao</code>ç›®å½•ï¼Œåœ¨è¯¥ç›®å½•ä¸‹å»ºç«‹<code>DeptDao</code>æ¥å£ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Mapper</span><br><span class="hljs-meta">@Repository</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">DeptDao</span> </span>&#123;<br><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">addDept</span><span class="hljs-params">(Dept dept)</span></span>;<br><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> Dept <span class="hljs-title">queryById</span><span class="hljs-params">(Long id)</span></span>;<br><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Dept&gt; <span class="hljs-title">queryAll</span><span class="hljs-params">()</span></span>;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>ç¼–å†™DeptDaoæ¥å£å®Œæ¯•åï¼Œåœ¨<code>resources</code>ç›®å½•ä¸‹åˆ›å»º<code>mybatis.mapper</code>ç›®å½•ï¼Œåœ¨è¯¥ç›®å½•ä¸‹å»ºç«‹<code>DeptMapper.xml</code>æ–‡ä»¶ã€‚</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> ?&gt;<br>&lt;!DOCTYPE mapper<br>        PUBLIC <span class="hljs-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span><br>        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;<br><br>&lt;mapper namespace=<span class="hljs-string">&quot;com.atrox.springcloud.dao.DeptDao&quot;</span>&gt;<br><br>  &lt;insert id=<span class="hljs-string">&quot;addDept&quot;</span> parameterType=<span class="hljs-string">&quot;Dept&quot;</span>&gt;<br>    insert into db01.dept (dname, db_source) values (#&#123;name&#125;,DATABASE());<br>  &lt;/insert&gt;<br><br>  &lt;select id=<span class="hljs-string">&quot;queryById&quot;</span> parameterType=<span class="hljs-string">&quot;Long&quot;</span> resultType=<span class="hljs-string">&quot;com.atrox.springcloud.pojo.Dept&quot;</span>&gt;<br>    select * from db01.dept where deptno = #&#123;deptno&#125;;<br>  &lt;/select&gt;<br><br>  &lt;select id=<span class="hljs-string">&quot;queryAll&quot;</span> resultType=<span class="hljs-string">&quot;com.atrox.springcloud.pojo.Dept&quot;</span>&gt;<br>    select * from db01.dept;<br>  &lt;/select&gt;<br><br>&lt;/mapper&gt;<br></code></pre></td></tr></table></figure><p>ç¼–å†™é€šç”¨æ˜ å°„æ–‡ä»¶åï¼Œä¸‹ä¸€å±‚æ˜¯<code>com.atrox.springcloud.service</code>ï¼Œå»ºç«‹<code>DeptService</code>æ¥å£ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">DeptService</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">addDept</span><span class="hljs-params">(Dept dept)</span></span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Dept <span class="hljs-title">queryById</span><span class="hljs-params">(Long id)</span></span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Dept&gt; <span class="hljs-title">queryAll</span><span class="hljs-params">()</span></span>;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶ååœ¨åŒçº§ç›®å½•ä¸‹å»ºç«‹<code>DeptServiceImpl</code>å®ç°ç±»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DeptServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">DeptService</span></span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> DeptDao deptDao;<br><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">addDept</span><span class="hljs-params">(Dept dept)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> deptDao.addDept(dept);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Dept <span class="hljs-title">queryById</span><span class="hljs-params">(Long id)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> deptDao.queryById(id);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Dept&gt; <span class="hljs-title">queryAll</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> deptDao.queryAll();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>éšåï¼Œç¼–å†™æ§åˆ¶å±‚ï¼Œå»ºç«‹<code>com.atrox.springcloud.controller</code>ç›®å½•ï¼Œå»ºç«‹<code>DeptController</code>ç±»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æä¾›RestfulæœåŠ¡</span><br><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DeptController</span> </span>&#123;<br><br>  <span class="hljs-meta">@Autowired</span><br>  DeptService deptService;<br><br>  <span class="hljs-meta">@PostMapping(&quot;/dept/add&quot;)</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">addDept</span><span class="hljs-params">(Dept dept)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> deptService.addDept(dept);<br>  &#125;<br><br>  <span class="hljs-meta">@GetMapping(&quot;/dept/get/&#123;id&#125;&quot;)</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> Dept <span class="hljs-title">queryById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Long id)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> deptService.queryById(id);<br>  &#125;<br><br>  <span class="hljs-meta">@GetMapping(&quot;/dept/list&quot;)</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Dept&gt; <span class="hljs-title">queryAll</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> deptService.queryAll();<br>  &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>éšåï¼Œæ·»åŠ ä¸»å¯åŠ¨ç±»<code>DeptProvider_8001</code>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å¯åŠ¨ç±»</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DeptProvider_8001</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        SpringApplication.run(DeptProvider_8001.class, args);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>æœ€åï¼Œå†ç½‘é¡µæµ‹è¯•å³å¯ã€‚</p><h3 id="å…­ã€åˆ›å»ºæœåŠ¡æ¶ˆè´¹è€…Consumer"><a href="#å…­ã€åˆ›å»ºæœåŠ¡æ¶ˆè´¹è€…Consumer" class="headerlink" title="å…­ã€åˆ›å»ºæœåŠ¡æ¶ˆè´¹è€…Consumer"></a>å…­ã€åˆ›å»ºæœåŠ¡æ¶ˆè´¹è€…Consumer</h3><p>é¦–å…ˆï¼Œåœ¨<code>application.yml</code>ä¸­è®¾ç½®æ¶ˆè´¹è€…ç«¯å£å·ä¸º80ã€‚</p><p>ç„¶åï¼Œå»ºç«‹<code>com.atrox.springcloud.config</code>ç›®å½•ï¼Œåœ¨æ­¤ç›®å½•ä¸‹å»ºç«‹<code>ConfigBean</code>ç±»ï¼Œæ¥è£…è½½æ‰€æœ‰çš„Bean,å°†RestTemplateæ”¾å…¥Springå®¹å™¨ä¸­ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConfigBean</span> </span>&#123; <span class="hljs-comment">// ç±»ä¼¼äº@Configuration --- spring application</span><br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> RestTemplate <span class="hljs-title">getRestTemplate</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> RestTemplate();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶åï¼Œå»ºç«‹<code>com.atrox.springclud.controller</code>ç›®å½•ï¼Œåœ¨æ­¤ç›®å½•ä¸‹å»ºç«‹<code>DeptConsumerController</code>ç±»,ä½¿ç”¨Restæ–¹å¼è°ƒç”¨è¿œç¨‹httpæœåŠ¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DeptConsumerController</span> </span>&#123;<br><br>    <span class="hljs-comment">// ç†è§£ï¼šæ¶ˆè´¹è€…ï¼Œä¸åº”è¯¥æœ‰serviceå±‚</span><br>    <span class="hljs-comment">// RestTemplate ... ä¾›æˆ‘ä»¬ç›´æ¥è°ƒç”¨ï¼æ³¨å†Œåˆ°springä¸­</span><br>    <span class="hljs-comment">// (url, å®ä½“: Map, Class&lt;T&gt; responseType)</span><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> RestTemplate restTemplate; <span class="hljs-comment">// æä¾›å¤šç§ä¾¿æ·è®¿é—®è¿œç¨‹httpæœåŠ¡çš„æ–¹æ³•ï¼Œç®€å•çš„restfulæœåŠ¡æ¨¡æ¿</span><br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String REST_URL_PREFIX = <span class="hljs-string">&quot;http://localhost:8001&quot;</span>;<br><br>    <span class="hljs-meta">@RequestMapping(&quot;/consumer/dept/add&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">add</span><span class="hljs-params">(Dept dept)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> restTemplate.postForObject(REST_URL_PREFIX + <span class="hljs-string">&quot;/dept/add&quot;</span>, dept, Boolean.class);<br>    &#125;<br><br>    <span class="hljs-meta">@RequestMapping(&quot;/consumer/dept/get/&#123;id&#125;&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Dept <span class="hljs-title">get</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Long id)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> restTemplate.getForObject(REST_URL_PREFIX + <span class="hljs-string">&quot;/dept/get/&quot;</span> + id, Dept.class);<br>    &#125;<br><br>    <span class="hljs-meta">@RequestMapping(&quot;/consumer/dept/list&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Dept&gt; <span class="hljs-title">list</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> restTemplate.getForObject(REST_URL_PREFIX + <span class="hljs-string">&quot;/dept/list&quot;</span>, List.class);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>æœ€åï¼Œå»ºç«‹<code>DeptConsumer_80</code>å¯åŠ¨ç±»ï¼Œå¼€å¯ç½‘é¡µæµ‹è¯•å³å¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DeptConsumer_80</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        SpringApplication.run(DeptConsumer_80.class, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>SpringCloud</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringCloudç¬”è®°03-SpringCloudå…¥é—¨æ¦‚è¿°</title>
    <link href="/posts/2021/01/12/SpringCloud%E7%AC%94%E8%AE%B003-SpringCloud%E5%85%A5%E9%97%A8%E6%A6%82%E8%BF%B0/"/>
    <url>/posts/2021/01/12/SpringCloud%E7%AC%94%E8%AE%B003-SpringCloud%E5%85%A5%E9%97%A8%E6%A6%82%E8%BF%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="SpringCloudå…¥é—¨æ¦‚è¿°"><a href="#SpringCloudå…¥é—¨æ¦‚è¿°" class="headerlink" title="SpringCloudå…¥é—¨æ¦‚è¿°"></a>SpringCloudå…¥é—¨æ¦‚è¿°</h2><h3 id="ä¸€ã€SpringCloudæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä¸€ã€SpringCloudæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸€ã€SpringCloudæ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä¸€ã€SpringCloudæ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>è¯¦æƒ…è¯·æŸ¥çœ‹Springå®˜ç½‘ï¼š<a href="https://spring.io/">https://spring.io</a></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B003-SpringCloud%E5%85%A5%E9%97%A8%E6%A6%82%E8%BF%B0/SpringCloud.png" alt="SpringCloudæ˜¯ä»€ä¹ˆ"></p><p>SpringCloudçš„ç”Ÿæ€ä¸æµç¨‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B003-SpringCloud%E5%85%A5%E9%97%A8%E6%A6%82%E8%BF%B0/SpringCloud_process.png" alt="SpringCloudçš„æµç¨‹"></p><h3 id="äºŒã€SpringCloudå’ŒSpringBootçš„å…³ç³»"><a href="#äºŒã€SpringCloudå’ŒSpringBootçš„å…³ç³»" class="headerlink" title="äºŒã€SpringCloudå’ŒSpringBootçš„å…³ç³»"></a>äºŒã€SpringCloudå’ŒSpringBootçš„å…³ç³»</h3><ul><li><strong>Springbootä¸“æ³¨äºæ–¹ä¾¿åœ°å¼€å‘å•ä¸ªä¸ªä½“å¾®æœåŠ¡</strong></li><li><strong>SpringCloudæ˜¯å…³æ³¨å…¨å±€çš„å¾®æœåŠ¡åè°ƒæ²»ç†æ¡†æ¶</strong>ã€‚å®ƒå°†SpringBootå¼€å‘çš„ä¸€ä¸ªä¸ªå•ä½“å¾®æœåŠ¡ï¼Œæ•´åˆå¹¶ç®¡ç†èµ·æ¥ï¼Œä¸ºå„ä¸ªå¾®æœåŠ¡ä¹‹é—´æä¾›ï¼šé…ç½®ç®¡ç†ã€æœåŠ¡å‘ç°ã€æ–­è·¯å™¨ã€è·¯ç”±ã€ä¸ºä»£ç†ã€æ—¶é—´æ€»æ ˆã€å…¨å±€é”ã€å†³ç­–ç«é€‰ã€åˆ†å¸ƒå¼ä¼šè¯ç­‰ç­‰é›†æˆæœåŠ¡</li><li>SpringBootå¯ä»¥ç¦»å¼€SpringCloudç‹¬ç«‹ä½¿ç”¨ï¼Œå¼€å‘é¡¹ç›®ï¼›ä½†æ˜¯SpringBootç¦»ä¸å¼€SpringBootï¼Œå±äºä¾èµ–å…³ç³»</li></ul><h3 id="ä¸‰ã€Dubboå’ŒSpringCloudæŠ€æœ¯é€‰å‹"><a href="#ä¸‰ã€Dubboå’ŒSpringCloudæŠ€æœ¯é€‰å‹" class="headerlink" title="ä¸‰ã€Dubboå’ŒSpringCloudæŠ€æœ¯é€‰å‹"></a>ä¸‰ã€Dubboå’ŒSpringCloudæŠ€æœ¯é€‰å‹</h3><h4 id="1-åˆ†å¸ƒå¼-æœåŠ¡æ²»ç†Dubbo"><a href="#1-åˆ†å¸ƒå¼-æœåŠ¡æ²»ç†Dubbo" class="headerlink" title="1. åˆ†å¸ƒå¼ + æœåŠ¡æ²»ç†Dubbo"></a>1. åˆ†å¸ƒå¼ + æœåŠ¡æ²»ç†Dubbo</h4><p>ç›®å‰æˆç†Ÿçš„äº’è”ç½‘é‚£ä¸ªæ¶æ„ï¼Œé‡‡ç”¨<strong>åº”ç”¨æœåŠ¡åŒ–æ‹†åˆ†+æ¶ˆæ¯ä¸­é—´ä»¶çš„æ¶æ„</strong></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B003-SpringCloud%E5%85%A5%E9%97%A8%E6%A6%82%E8%BF%B0/%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%84.png" alt="äº’è”ç½‘æ¶æ„"></p><h4 id="2-Dubbo-å’Œ-SpringCloudå¯¹æ¯”"><a href="#2-Dubbo-å’Œ-SpringCloudå¯¹æ¯”" class="headerlink" title="2. Dubbo å’Œ SpringCloudå¯¹æ¯”"></a>2. Dubbo å’Œ SpringCloudå¯¹æ¯”</h4><p>æˆ‘ä»¬å¯ä»¥å¯¹æ¯”ä¸€ä¸‹ç¤¾åŒºæ´»è·ƒåº¦ï¼š</p><p><strong>Dubbo</strong>ï¼š<a href="https://github.com/dubbo">https://github.com/dubbo</a></p><p><strong>SpringCloud</strong>ï¼š<a href="https://github.com/spring-cloud">https://github.com/spring-cloud</a></p><p><strong>å¯¹æ¯”ç»“æœ</strong>ï¼š</p><table><thead><tr><th>Dubbo</th><th>SpringCloud</th><th></th></tr></thead><tbody><tr><td>æœåŠ¡æ³¨å†Œä¸­å¿ƒ</td><td>Zookeeper</td><td>Spring Cloud Netfilx Eureka</td></tr><tr><td>æœåŠ¡è°ƒç”¨æ–¹å¼</td><td>RPC</td><td>REST API</td></tr><tr><td>æœåŠ¡ç›‘æ§</td><td>Dubbo-monitor</td><td>Spring Boot Admin</td></tr><tr><td>æ–­è·¯å™¨</td><td>ä¸å®Œå–„</td><td>Spring Cloud Netfilx Hystrix</td></tr><tr><td>æœåŠ¡ç½‘å…³</td><td>æ— </td><td>Spring Cloud Netfilx Zuul</td></tr><tr><td>åˆ†å¸ƒå¼é…ç½®</td><td>æ— </td><td>Spring Cloud Config</td></tr><tr><td>æœåŠ¡è·Ÿè¸ª</td><td>æ— </td><td>Spring Cloud Sleuth</td></tr><tr><td>æ¶ˆæ¯æ€»æ ˆ</td><td>æ— </td><td>Spring Cloud Bus</td></tr><tr><td>æ•°æ®æµ</td><td>æ— </td><td>Spring Cloud Stream</td></tr><tr><td>æ‰¹é‡ä»»åŠ¡</td><td>æ— </td><td>Spring Cloud Task</td></tr></tbody></table><p><strong>æœ€å¤§åŒºåˆ«ï¼šSpring Cloud æŠ›å¼ƒäº†Dubboçš„RPCé€šä¿¡ï¼Œé‡‡ç”¨çš„æ˜¯åŸºäºHTTPçš„RESTæ–¹å¼</strong></p><p>ä¸¥æ ¼è¯´ï¼Œè¿™ä¸¤ç§æ–¹å¼å„æœ‰ä¼˜åŠ£ã€‚è™½ç„¶ä»ä¸€å®šç¨‹åº¦ä¸Šæ¥è¯´ï¼Œåè€…ç‰ºç‰²äº†æœåŠ¡è°ƒåº¦çš„æ€§èƒ½ï¼Œä½†ä¹Ÿé¿å…äº†ä¸Šé¢æåˆ°çš„åŸç”ŸRPCå¸¦æ¥çš„é—®é¢˜ã€‚è€Œä¸”RESTç›¸æ¯”RPCæ›´åŠ çµæ´»ï¼ŒæœåŠ¡æä¾›æ–¹å’Œè°ƒç”¨æ–¹çš„ä¾èµ–åªä¾é ä¸€çº¸å¥‘çº¦ï¼Œä¸å­˜åœ¨ä»£ç çº§åˆ«çš„å¼ºä¾èµ–ï¼Œè¿™ä¸ªæœ‰ç‚¹åœ¨å½“ä¸‹å¿«é€Ÿæ¼”åŒ–çš„å¾®æœåŠ¡ç¯å¢ƒä¸‹ï¼Œæ˜¾å¾—æ›´åŠ åˆé€‚ã€‚</p><p><strong>æ€»ç»“ï¼š</strong>äºŒè€…è§£å†³çš„é—®é¢˜åŸŸä¸ä¸€æ ·ï¼šDubboçš„å®šä½æ˜¯ä¸€æ¬¾RPCæ¡†æ¶ï¼Œè€ŒSpringCloudçš„ç›®æ ‡æ˜¯å¾®æœåŠ¡æ¶æ„ä¸‹çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆã€‚</p><h3 id="å››ã€SpringCloudèƒ½åšä»€ä¹ˆï¼Ÿ"><a href="#å››ã€SpringCloudèƒ½åšä»€ä¹ˆï¼Ÿ" class="headerlink" title="å››ã€SpringCloudèƒ½åšä»€ä¹ˆï¼Ÿ"></a>å››ã€SpringCloudèƒ½åšä»€ä¹ˆï¼Ÿ</h3><ul><li>Distributed/versioned configuration åˆ†å¸ƒå¼/ç‰ˆæœ¬æ§åˆ¶é…ç½®</li><li>Service registration and discovery æœåŠ¡æ³¨å†Œä¸å‘ç°</li><li>Routing è·¯ç”±</li><li>Service-to-service calls æœåŠ¡åˆ°æœåŠ¡çš„è°ƒç”¨</li><li>Load balancing è´Ÿè½½å‡è¡¡é…ç½®</li><li>Circuit Breakers æ–­è·¯å™¨</li><li>Distributed messaging åˆ†å¸ƒå¼æ¶ˆæ¯ç®¡ç†</li></ul><h3 id="äº”ã€SpringCloudä¸‹è½½"><a href="#äº”ã€SpringCloudä¸‹è½½" class="headerlink" title="äº”ã€SpringCloudä¸‹è½½"></a>äº”ã€SpringCloudä¸‹è½½</h3><p>å®˜ç½‘ï¼š<a href="http://projects.spring.io/spring-cloud/">http://projects.spring.io/spring-cloud/</a></p><p><strong>ç‰ˆæœ¬å·ä¸ä¹‹å‰ç›¸æ¯”æ˜¯æœ‰ä¸€äº›ç‰¹æ®Šçš„ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringCloud%E7%AC%94%E8%AE%B003-SpringCloud%E5%85%A5%E9%97%A8%E6%A6%82%E8%BF%B0/version.png" alt="SpringCloudç‰ˆæœ¬å·"></p><p>SpringCloudæ²¡æœ‰é‡‡ç”¨æ•°å­—ç¼–å·çš„æ–¹å¼å‘½åç‰ˆæœ¬å·ï¼Œè€Œæ˜¯é‡‡ç”¨äº†ä¼¦æ•¦åœ°é“ç«™çš„åç§°ï¼Œ<strong>åŒæ—¶æ ¹æ®å­—æ¯è¡¨çš„é¡ºåºæ¥å¯¹åº”ç‰ˆæœ¬æ—¶é—´é¡ºåº</strong>ï¼Œæ¯”å¦‚æœ€æ—©çš„Realseç‰ˆæœ¬ï¼šAngelï¼Œç¬¬äºŒä¸ªRealseç‰ˆæœ¬ï¼šBrixtonï¼Œç„¶åæ˜¯Camdenã€Dalstonã€Edgwareã€‚</p><h3 id="å…­ã€ç›¸å…³æ–‡æ¡£ã€ç¤¾åŒº"><a href="#å…­ã€ç›¸å…³æ–‡æ¡£ã€ç¤¾åŒº" class="headerlink" title="å…­ã€ç›¸å…³æ–‡æ¡£ã€ç¤¾åŒº"></a>å…­ã€ç›¸å…³æ–‡æ¡£ã€ç¤¾åŒº</h3><ul><li><p><strong>SpringCloud Netflix ä¸­æ–‡æ–‡æ¡£ï¼š<a href="https://springcloud.cc/spring-cloud-netflix.html">https://springcloud.cc/spring-cloud-netflix.html</a></strong></p></li><li><p><strong>SpringCloud ä¸­æ–‡APIæ–‡æ¡£(å®˜æ–¹æ–‡æ¡£ç¿»è¯‘ç‰ˆ)ï¼š<a href="https://springcloud.cc/spring-cloud-dalston.html">https://springcloud.cc/spring-cloud-dalston.html</a></strong></p></li><li><p><strong>SpringCloudä¸­å›½ç¤¾åŒºï¼š<a href="http://springcloud.cn/">http://springcloud.cn/</a></strong></p></li><li><p><strong>SpringCloudä¸­æ–‡ç½‘ï¼š<a href="https://springcloud.cc/">https://springcloud.cc</a></strong></p></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>SpringCloud</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringCloudç¬”è®°02-å¾®æœåŠ¡æ¦‚è¿°</title>
    <link href="/posts/2021/01/12/SpringCloud%E7%AC%94%E8%AE%B002-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A6%82%E8%BF%B0/"/>
    <url>/posts/2021/01/12/SpringCloud%E7%AC%94%E8%AE%B002-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A6%82%E8%BF%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="å¾®æœåŠ¡æ¦‚è¿°"><a href="#å¾®æœåŠ¡æ¦‚è¿°" class="headerlink" title="å¾®æœåŠ¡æ¦‚è¿°"></a>å¾®æœåŠ¡æ¦‚è¿°</h2><h3 id="ä¸€ã€ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ"></a>ä¸€ã€ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ</h3><blockquote><p>ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ</p></blockquote><p>å¾®æœåŠ¡(Microservice Architecture) æ˜¯è¿‘å‡ å¹´æµè¡Œçš„ä¸€ç§æ¶æ„æ€æƒ³ï¼Œå…³äºå®ƒçš„æ¦‚å¿µå¾ˆéš¾ä¸€è¨€ä»¥è”½ä¹‹ã€‚</p><p>ç©¶ç«Ÿä»€ä¹ˆæ˜¯å¾®æœåŠ¡å‘¢ï¼Ÿæˆ‘ä»¬åœ¨æ­¤å¼•ç”¨ThoughtWorks å…¬å¸çš„é¦–å¸­ç§‘å­¦å®¶ Martin Fowler äº2014å¹´æå‡ºçš„ä¸€æ®µè¯ï¼š</p><p>åŸæ–‡ï¼š<a href="https://martinfowler.com/articles/microservices.html">https://martinfowler.com/articles/microservices.html</a></p><p>æ±‰åŒ–ï¼š<a href="https://www.cnblogs.com/liuning8023/p/4493156.html">https://www.cnblogs.com/liuning8023/p/4493156.html</a></p><ul><li>å°±ç›®å‰è€Œè¨€ï¼Œå¯¹äºå¾®æœåŠ¡ï¼Œä¸šç•Œå¹¶æ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€çš„ï¼Œæ ‡å‡†çš„å®šä¹‰ã€‚</li><li>ä½†é€šå¸¸è€Œè¨€ï¼Œå¾®æœåŠ¡æ¶æ„æ˜¯ä¸€ç§æ¶æ„æ¨¡å¼ï¼Œæˆ–è€…è¯´æ˜¯ä¸€ç§æ¶æ„é£æ ¼ï¼Œ<strong>å®ƒä½“é•¿å°†å•ä¸€çš„åº”ç”¨ç¨‹åºåˆ’åˆ†æˆä¸€ç»„å°çš„æœåŠ¡</strong>ï¼Œæ¯ä¸ªæœåŠ¡è¿è¡Œåœ¨å…¶ç‹¬ç«‹çš„è‡ªå·±çš„è¿›ç¨‹å†…ï¼ŒæœåŠ¡ä¹‹é—´äº’ç›¸åè°ƒï¼Œäº’ç›¸é…ç½®ï¼Œä¸ºç”¨æˆ·æä¾›æœ€ç»ˆä»·å€¼ï¼ŒæœåŠ¡ä¹‹é—´é‡‡ç”¨è½»é‡çº§çš„é€šä¿¡æœºåˆ¶(<strong>HTTP</strong>)äº’ç›¸æ²Ÿé€šï¼Œæ¯ä¸ªæœåŠ¡éƒ½å›´ç»•ç€å…·ä½“çš„ä¸šåŠ¡è¿›è¡Œæ„å»ºï¼Œå¹¶ä¸”èƒ½ç‹—è¢«ç‹¬ç«‹çš„éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¦å¤–ï¼Œåº”å°½é‡é¿å…ç»Ÿä¸€çš„ï¼Œé›†ä¸­å¼çš„æœåŠ¡ç®¡ç†æœºåˆ¶ï¼Œå¯¹å…·ä½“çš„ä¸€ä¸ªæœåŠ¡è€Œè¨€ï¼Œåº”è¯¥æ ¹æ®ä¸šåŠ¡ä¸Šä¸‹æ–‡ï¼Œé€‰æ‹©åˆé€‚çš„è¯­è¨€ï¼Œå·¥å…·(<strong>Maven</strong>)å¯¹å…¶è¿›è¡Œæ„å»ºï¼Œå¯ä»¥æœ‰ä¸€ä¸ªéå¸¸è½»é‡çº§çš„é›†ä¸­å¼ç®¡ç†æ¥åè°ƒè¿™äº›æœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒçš„è¯­è¨€æ¥ç¼–å†™æœåŠ¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸åŒçš„æ•°æ®å­˜å‚¨ã€‚</li></ul><blockquote><p>å†æ¥ä»æŠ€æœ¯ç»´åº¦è§’åº¦ç†è§£ä¸‹ï¼š</p></blockquote><p>å¾®æœåŠ¡åŒ–çš„æ ¸å¿ƒå°±æ˜¯å°†ä¼ ç»Ÿçš„ä¸€ç«™å¼åº”ç”¨ï¼Œæ ¹æ®ä¸šåŠ¡æ‹†åˆ†æˆä¸€ä¸ªä¸€ä¸ªçš„æœåŠ¡ï¼Œå½»åº•åœ°å»è€¦åˆï¼Œæ¯ä¸€ä¸ªå¾®æœåŠ¡æä¾›å•ä¸ªä¸šåŠ¡åŠŸèƒ½çš„æœåŠ¡ï¼Œä¸€ä¸ªæœåŠ¡åšä¸€ä»¶äº‹æƒ…ï¼Œä»æŠ€æœ¯è§’åº¦çœ‹å°±æ˜¯ä¸€ç§å°è€Œç‹¬ç«‹çš„å¤„ç†è¿‡ç¨‹ï¼Œç±»ä¼¼è¿›ç¨‹çš„æ¦‚å¿µï¼Œèƒ½å¤Ÿè‡ªè¡Œå•ç‹¬å¯åŠ¨æˆ–é”€æ¯ï¼Œæ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„æ•°æ®åº“ã€‚</p><h3 id="äºŒã€å¾®æœåŠ¡ä¸å¾®æœåŠ¡æ¶æ„"><a href="#äºŒã€å¾®æœåŠ¡ä¸å¾®æœåŠ¡æ¶æ„" class="headerlink" title="äºŒã€å¾®æœåŠ¡ä¸å¾®æœåŠ¡æ¶æ„"></a>äºŒã€å¾®æœåŠ¡ä¸å¾®æœåŠ¡æ¶æ„</h3><blockquote><p>å¾®æœåŠ¡</p></blockquote><p>å¼ºè°ƒçš„æ˜¯æœåŠ¡çš„å¤§å°ï¼Œå®ƒå…³æ³¨çš„æ˜¯æŸä¸€ä¸ªç‚¹ï¼Œæ˜¯å…·ä½“è§£å†³æŸä¸€ä¸ªé—®é¢˜/æä¾›è½åœ°å¯¹åº”æœåŠ¡çš„ä¸€ä¸ªæœåŠ¡åº”ç”¨ï¼Œç‹­ä¹‰çš„çœ‹ï¼Œå¯ä»¥çœ‹ä½œæ˜¯IDEAä¸­çš„ä¸€ä¸ªä¸ªå¾®æœåŠ¡å·¥ç¨‹ï¼Œæˆ–è€…Moudelã€‚IDEA å·¥å…·é‡Œé¢ä½¿ç”¨Mavenå¼€å‘çš„ä¸€ä¸ªä¸ªç‹¬ç«‹çš„å°Moudelï¼Œå®ƒå…·ä½“æ˜¯ä½¿ç”¨SpringBootå¼€å‘çš„ä¸€ä¸ªå°æ¨¡å—ï¼Œä¸“ä¸šçš„äº‹æƒ…äº¤ç»™ä¸“ä¸šçš„æ¨¡å—æ¥åšï¼Œä¸€ä¸ªæ¨¡å—å°±åšç€ä¸€ä»¶äº‹æƒ…ã€‚å¼ºè°ƒçš„æ˜¯ä¸€ä¸ªä¸ªçš„ä¸ªä½“ï¼Œæ¯ä¸ªä¸ªä½“å®Œæˆä¸€ä¸ªå…·ä½“çš„ä»»åŠ¡æˆ–è€…åŠŸèƒ½ã€‚</p><blockquote><p>å¾®æœåŠ¡æ¶æ„</p></blockquote><p>ä¸€ç§æ–°çš„æ¶æ„å½¢å¼ï¼ŒMartin Fowler äº2014å¹´æå‡ºã€‚</p><p>å¾®æœåŠ¡æ¶æ„æ˜¯ä¸€ç§æ¶æ„æ¨¡å¼ï¼Œå®ƒä½“é•¿å°†å•ä¸€åº”ç”¨ç¨‹åºåˆ’åˆ†æˆä¸€ç»„å°çš„æœåŠ¡ï¼ŒæœåŠ¡ä¹‹é—´ç›¸äº’åè°ƒï¼Œäº’ç›¸é…åˆï¼Œä¸ºç”¨æˆ·æä¾›æœ€ç»ˆä»·å€¼ã€‚æ¯ä¸ªæœåŠ¡è¿è¡Œåœ¨å…¶ç‹¬ç«‹çš„è¿›ç¨‹ä¸­ï¼ŒæœåŠ¡ä¸æœåŠ¡ä¹‹é—´é‡‡ç”¨è½»é‡çº§çš„é€šä¿¡æœºåˆ¶**(å¦‚HTTP)<strong>äº’ç›¸åä½œï¼Œæ¯ä¸ªæœåŠ¡éƒ½å›´ç»•ç€å…·ä½“çš„ä¸šåŠ¡è¿›è¡Œæ„å»ºï¼Œå¹¶ä¸”èƒ½å¤Ÿè¢«ç‹¬ç«‹çš„éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¦å¤–ï¼Œåº”å°½é‡é¿å…ç»Ÿä¸€çš„ï¼Œé›†ä¸­å¼çš„æœåŠ¡ç®¡ç†æœºåˆ¶ï¼Œå¯¹å…·ä½“çš„ä¸€ä¸ªæœåŠ¡è€Œè¨€ï¼Œåº”æ ¹æ®ä¸šåŠ¡ä¸Šä¸‹æ–‡ï¼Œé€‰æ‹©åˆé€‚çš„è¯­è¨€ã€å·¥å…·</strong>(å¦‚Maven)**å¯¹å…¶è¿›è¡Œæ„å»ºã€‚</p><h3 id="ä¸‰ã€å¾®æœåŠ¡çš„ä¼˜ç¼ºç‚¹"><a href="#ä¸‰ã€å¾®æœåŠ¡çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¸‰ã€å¾®æœåŠ¡çš„ä¼˜ç¼ºç‚¹"></a>ä¸‰ã€å¾®æœåŠ¡çš„ä¼˜ç¼ºç‚¹</h3><blockquote><p>ä¼˜ç‚¹</p></blockquote><ul><li>å•ä¸€èŒè´£åŸåˆ™ï¼›</li><li>æ¯ä¸ªæœåŠ¡è¶³å¤Ÿå†…èšï¼Œè¶³å¤Ÿå°ï¼Œä»£ç å®¹æ˜“ç†è§£ï¼Œè¿™æ ·èƒ½èšç„¦ä¸€ä¸ªæŒ‡å®šçš„ä¸šåŠ¡åŠŸèƒ½æˆ–ä¸šåŠ¡éœ€æ±‚ï¼›</li><li>å¼€å‘ç®€å•ï¼Œå¼€å‘æ•ˆç‡é«˜ï¼Œä¸€ä¸ªæœåŠ¡å¯èƒ½å°±æ˜¯ä¸“ä¸€çš„åªå¹²ä¸€ä»¶äº‹ï¼›</li><li>å¾®æœåŠ¡èƒ½å¤Ÿè¢«å°å›¢é˜Ÿå•ç‹¬å¼€å‘ï¼Œè¿™ä¸ªå›¢é˜Ÿåªéœ€2-5ä¸ªå¼€å‘äººå‘˜ç»„æˆï¼›</li><li>å¾®æœåŠ¡æ˜¯æ¾è€¦åˆçš„ï¼Œæ˜¯æœ‰åŠŸèƒ½æ„ä¹‰çš„æœåŠ¡ï¼Œæ— è®ºæ˜¯åœ¨å¼€å‘é˜¶æ®µæˆ–éƒ¨ç½²é˜¶æ®µéƒ½æ˜¯ç‹¬ç«‹çš„ï¼›</li><li>å¾®æœåŠ¡èƒ½ä½¿ç”¨ä¸åŒçš„è¯­è¨€å¼€å‘ï¼›</li><li>æ˜“äºå’Œç¬¬ä¸‰æ–¹é›†æˆï¼Œå¾®æœåŠ¡å…è®¸å®¹æ˜“ä¸”çµæ´»çš„æ–¹å¼é›†æˆè‡ªåŠ¨éƒ¨ç½²ï¼Œé€šè¿‡æŒç»­é›†æˆå·¥å…·ï¼Œå¦‚jenkinsï¼ŒHudsonï¼Œbambooï¼›</li><li>å¾®æœåŠ¡æ˜“äºè¢«ä¸€ä¸ªå¼€å‘äººå‘˜ç†è§£ï¼Œä¿®æ”¹å’Œç»´æŠ¤ï¼Œè¿™æ ·å°å›¢é˜Ÿèƒ½å¤Ÿæ›´å…³æ³¨è‡ªå·±çš„å·¥ä½œæˆæœï¼Œæ— éœ€é€šè¿‡åˆä½œæ‰èƒ½ä½“ç°ä»·å€¼ï¼›</li><li>å¾®æœåŠ¡å…è®¸åˆ©ç”¨å’Œèåˆæœ€æ–°æŠ€æœ¯ï¼›</li><li><strong>å¾®æœåŠ¡åªæ˜¯ä¸šåŠ¡é€»è¾‘çš„ä»£ç ï¼Œä¸ä¼šå’ŒHTMLï¼ŒCSSï¼Œæˆ–å…¶ä»–çš„ç•Œé¢æ··åˆ;</strong></li><li><strong>æ¯ä¸ªå¾®æœåŠ¡éƒ½æœ‰è‡ªå·±çš„å­˜å‚¨èƒ½åŠ›ï¼Œå¯ä»¥æœ‰è‡ªå·±çš„æ•°æ®åº“ï¼Œä¹Ÿå¯ä»¥æœ‰ç»Ÿä¸€çš„æ•°æ®åº“ï¼›</strong></li></ul><blockquote><p>ç¼ºç‚¹</p></blockquote><ul><li>å¼€å‘äººå‘˜è¦å¤„ç†åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¤æ‚æ€§ï¼›</li><li>å¤šæœåŠ¡è¿ç»´éš¾åº¦ï¼Œéšç€æœåŠ¡çš„å¢åŠ ï¼Œè¿ç»´çš„å‹åŠ›ä¹Ÿåœ¨å¢å¤§ï¼›</li><li>ç³»ç»Ÿéƒ¨ç½²ä¾èµ–é—®é¢˜ï¼›</li><li>æœåŠ¡é—´é€šä¿¡æˆæœ¬é—®é¢˜ï¼›</li><li>æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼›</li><li>ç³»ç»Ÿé›†æˆæµ‹è¯•é—®é¢˜ï¼›</li><li>æ€§èƒ½å’Œç›‘æ§é—®é¢˜ï¼›</li></ul><h3 id="å››ã€å¾®æœåŠ¡çš„æŠ€æœ¯æ ˆæœ‰å“ªäº›ï¼Ÿ"><a href="#å››ã€å¾®æœåŠ¡çš„æŠ€æœ¯æ ˆæœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="å››ã€å¾®æœåŠ¡çš„æŠ€æœ¯æ ˆæœ‰å“ªäº›ï¼Ÿ"></a>å››ã€å¾®æœåŠ¡çš„æŠ€æœ¯æ ˆæœ‰å“ªäº›ï¼Ÿ</h3><table><thead><tr><th><strong>å¾®æœåŠ¡æŠ€æœ¯æ¡ç›®</strong></th><th>è½åœ°æŠ€æœ¯</th></tr></thead><tbody><tr><td>æœåŠ¡å¼€å‘</td><td>SpringBootã€Springã€SpringMVCç­‰</td></tr><tr><td>æœåŠ¡é…ç½®ä¸ç®¡ç†</td><td>Netfixå…¬å¸çš„Archaiusã€é˜¿é‡Œçš„Diamondç­‰</td></tr><tr><td>æœåŠ¡æ³¨å†Œä¸å‘ç°</td><td>Eurekaã€Consulã€Zookeeperç­‰</td></tr><tr><td>æœåŠ¡è°ƒç”¨</td><td>Restã€PRCã€gRPC</td></tr><tr><td>æœåŠ¡ç†”æ–­å™¨</td><td>Hystrixã€Envoyç­‰</td></tr><tr><td>è´Ÿè½½å‡è¡¡</td><td>Ribbonã€Nginxç­‰</td></tr><tr><td>æœåŠ¡æ¥å£è°ƒç”¨(å®¢æˆ·ç«¯è°ƒç”¨æœåŠ¡çš„ç®€åŒ–å·¥å…·)</td><td>Feginç­‰</td></tr><tr><td>æ¶ˆæ¯é˜Ÿåˆ—</td><td>Kafkaã€RabbitMQã€ActiveMQç­‰</td></tr><tr><td>æœåŠ¡é…ç½®ä¸­å¿ƒç®¡ç†</td><td>SpringCloudConfigã€Chefç­‰</td></tr><tr><td>æœåŠ¡è·¯ç”±(APIç½‘å…³)</td><td>Zuulç­‰</td></tr><tr><td>æœåŠ¡ç›‘æ§</td><td>Zabbixã€Nagiosã€Metricsã€Specatatorç­‰</td></tr><tr><td>å…¨é“¾è·¯è¿½è¸ª</td><td>Zipkinã€Braveã€Dapperç­‰</td></tr><tr><td>æ•°æ®æµæ“ä½œå¼€å‘åŒ…</td><td>SpringCloud Stream(å°è£…ä¸Redisï¼ŒRabbitï¼ŒKafkaç­‰å‘é€æ¥æ”¶æ¶ˆæ¯)</td></tr><tr><td>æ—¶é—´æ¶ˆæ¯æ€»æ ˆ</td><td>SpringCloud Bus</td></tr><tr><td>æœåŠ¡éƒ¨ç½²</td><td>Dockerã€OpenStackã€Kubernetesç­‰</td></tr></tbody></table><h3 id="äº”ã€ä¸ºä»€ä¹ˆé€‰æ‹©SpringCloudä½œä¸ºä¸ºæœåŠ¡æ¶æ„"><a href="#äº”ã€ä¸ºä»€ä¹ˆé€‰æ‹©SpringCloudä½œä¸ºä¸ºæœåŠ¡æ¶æ„" class="headerlink" title="äº”ã€ä¸ºä»€ä¹ˆé€‰æ‹©SpringCloudä½œä¸ºä¸ºæœåŠ¡æ¶æ„"></a>äº”ã€ä¸ºä»€ä¹ˆé€‰æ‹©SpringCloudä½œä¸ºä¸ºæœåŠ¡æ¶æ„</h3><ol><li><p>é€‰å‹ä¾æ®</p><ol><li><p>æ•´ä½“è§£å†³æ–¹æ¡ˆå’Œæ¡†æ¶æˆç†Ÿåº¦</p></li><li><p>ç¤¾åŒºçƒ­åº¦</p></li><li><p>å¯ç»´æŠ¤æ€§</p></li><li><p>å­¦ä¹ æ›²çº¿</p></li><li><p>å½“å‰å„å¤§ITå…¬å¸ç”¨çš„å¾®æœåŠ¡æ¶æ„æœ‰å“ªäº›ï¼Ÿ</p><ol><li>é˜¿é‡Œï¼šdubbo+HFS</li><li>äº¬ä¸œï¼šJFS</li><li>æ–°æµªï¼šMotan</li><li>å½“å½“ç½‘ï¼šDubboX</li></ol></li></ol></li><li><p>å„å¾®æœåŠ¡æ¡†æ¶å¯¹æ¯”</p><table><thead><tr><th><strong>åŠŸèƒ½ç‚¹/æœåŠ¡æ¡†æ¶</strong></th><th>Netflix/SpringCloud</th><th>Motan</th><th>gRPC</th><th>Thri t</th><th>Dubbo/DubboX</th></tr></thead><tbody><tr><td>åŠŸèƒ½å®šä½</td><td>å®Œæ•´çš„å¾®æœåŠ¡æ¡†æ¶</td><td>RPCæ¡†æ¶ï¼Œä½†æ•´åˆäº†ZKæˆ–Consulï¼Œå®ç°é›†ç¾¤ç¯å¢ƒçš„åŸºæœ¬æœåŠ¡æ³¨å†Œå‘ç°</td><td>RPCæ¡†æ¶</td><td>RPCæ¡†æ¶</td><td>æœåŠ¡æ¡†æ¶</td></tr><tr><td>æ”¯æŒRest</td><td>æ˜¯ï¼ŒRibbonæ”¯æŒå¤šç§å¯æ‹”æ’çš„åºåˆ—å·é€‰æ‹©</td><td>å¦</td><td>å¦</td><td>å¦</td><td>å¦</td></tr><tr><td>æ”¯æŒRPC</td><td>å¦</td><td>æ˜¯(Hession2)</td><td>æ˜¯</td><td>æ˜¯</td><td>æ˜¯</td></tr><tr><td>æ”¯æŒå¤šè¯­è¨€</td><td>æ˜¯(Restå½¢å¼)</td><td>å¦</td><td>æ˜¯</td><td>æ˜¯</td><td>å¦</td></tr><tr><td>è´Ÿè½½å‡è¡¡</td><td>æ˜¯(æœåŠ¡ç«¯zuul+å®¢æˆ·ç«¯Ribbon)ï¼Œzuul-æœåŠ¡ï¼ŒåŠ¨æ€è·¯ç”±ï¼Œäº‘ç«¯è´Ÿè½½å‡è¡¡Eurekaï¼ˆé’ˆå¯¹ä¸­é—´å±‚æœåŠ¡å™¨ï¼‰</td><td>æ˜¯(å®¢æˆ·ç«¯)</td><td>å¦</td><td>å¦</td><td>æ˜¯(å®¢æˆ·ç«¯)</td></tr><tr><td>é…ç½®æœåŠ¡</td><td>Netfix Archaiusï¼ŒSpring Cloud Config Server é›†ä¸­é…ç½®</td><td>æ˜¯(Zookeeperæä¾›)</td><td>å¦</td><td>å¦</td><td>å¦</td></tr><tr><td>æœåŠ¡è°ƒç”¨é“¾ç›‘æ§</td><td>æ˜¯(zuul)ï¼Œzuulæä¾›è¾¹ç¼˜æœåŠ¡ï¼ŒAPIç½‘å…³</td><td>å¦</td><td>å¦</td><td>å¦</td><td>å¦</td></tr><tr><td>é«˜å¯ç”¨/å®¹é”™</td><td>æ˜¯(æœåŠ¡ç«¯Hystrix+å®¢æˆ·ç«¯Ribbon)</td><td>æ˜¯(å®¢æˆ·ç«¯)</td><td>å¦</td><td>å¦</td><td>æ˜¯(å®¢æˆ·ç«¯)</td></tr><tr><td>å…¸å‹åº”ç”¨æ¡ˆä¾‹</td><td>Netflix</td><td>Sina</td><td>Google</td><td>Facebook</td><td></td></tr><tr><td>ç¤¾åŒºæ´»è·ƒç¨‹åº¦</td><td>é«˜</td><td>ä¸€èˆ¬</td><td>é«˜</td><td>ä¸€èˆ¬</td><td>2017å¹´åé‡æ–°å¼€å§‹ç»´æŠ¤ï¼Œä¹‹å‰ä¸­æ–­äº†5å¹´</td></tr><tr><td>å­¦ä¹ éš¾åº¦</td><td>ä¸­ç­‰</td><td>ä½</td><td>é«˜</td><td>é«˜</td><td>ä½</td></tr><tr><td>æ–‡æ¡£ä¸°å¯Œç¨‹åº¦</td><td>é«˜</td><td>ä¸€èˆ¬</td><td>ä¸€èˆ¬</td><td>ä¸€èˆ¬</td><td>é«˜</td></tr><tr><td>å…¶ä»–</td><td>Spring Cloud Busä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå¸¦æ¥äº†æ›´å¤šç®¡ç†ç«¯ç‚¹</td><td>æ”¯æŒé™çº§</td><td>Netflixå†…éƒ¨åœ¨å¼€å‘é›†æˆgRPC</td><td>IDLå®šä¹‰</td><td>å®è·µçš„å…¬å¸æ¯”è¾ƒå¤š</td></tr></tbody></table></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>SpringCloud</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringCloudç¬”è®°01-å¾®æœåŠ¡æ¶æ„æ ¸å¿ƒé—®é¢˜</title>
    <link href="/posts/2021/01/12/SpringCloud%E7%AC%94%E8%AE%B001-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E6%A0%B8%E5%BF%83%E9%97%AE%E9%A2%98/"/>
    <url>/posts/2021/01/12/SpringCloud%E7%AC%94%E8%AE%B001-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E6%A0%B8%E5%BF%83%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h2 id="å¾®æœåŠ¡æ¶æ„çš„4ä¸ªæ ¸å¿ƒé—®é¢˜"><a href="#å¾®æœåŠ¡æ¶æ„çš„4ä¸ªæ ¸å¿ƒé—®é¢˜" class="headerlink" title="å¾®æœåŠ¡æ¶æ„çš„4ä¸ªæ ¸å¿ƒé—®é¢˜"></a>å¾®æœåŠ¡æ¶æ„çš„4ä¸ªæ ¸å¿ƒé—®é¢˜</h2><h3 id="ä¸€ã€æ ¸å¿ƒé—®é¢˜"><a href="#ä¸€ã€æ ¸å¿ƒé—®é¢˜" class="headerlink" title="ä¸€ã€æ ¸å¿ƒé—®é¢˜"></a>ä¸€ã€æ ¸å¿ƒé—®é¢˜</h3><ol><li><p><strong>æœåŠ¡å¾ˆå¤šï¼Œå®¢æˆ·ç«¯è¯¥æ€ä¹ˆè®¿é—®ï¼Ÿ</strong></p></li><li><p><strong>è¿™ä¹ˆå¤šæœåŠ¡ï¼ŒæœåŠ¡ä¹‹é—´å¦‚ä½•é€šä¿¡ï¼Ÿ</strong></p></li><li><p><strong>è¿™ä¹ˆå¤šæœåŠ¡ï¼Œåº”è¯¥å¦‚ä½•æ²»ç†</strong>ï¼Ÿ</p></li><li><p><strong>æœåŠ¡æŒ‚äº†æ€ä¹ˆåŠï¼Ÿ</strong></p></li></ol><h3 id="äºŒã€3ç§ä¸»æµè§£å†³æ–¹æ¡ˆ"><a href="#äºŒã€3ç§ä¸»æµè§£å†³æ–¹æ¡ˆ" class="headerlink" title="äºŒã€3ç§ä¸»æµè§£å†³æ–¹æ¡ˆ"></a>äºŒã€3ç§ä¸»æµè§£å†³æ–¹æ¡ˆ</h3><ul><li>SpringCloud NetFlix</li><li>Apache Dubbo Zookeeper</li><li>SpringCloud  Alibaba</li></ul><h3 id="ä¸‰ã€è¯¦ç»†æ–¹æ¡ˆ"><a href="#ä¸‰ã€è¯¦ç»†æ–¹æ¡ˆ" class="headerlink" title="ä¸‰ã€è¯¦ç»†æ–¹æ¡ˆ"></a>ä¸‰ã€è¯¦ç»†æ–¹æ¡ˆ</h3><ol><li><p><strong>SpringCloud NetFlix ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆ</strong></p><p>APIç½‘å…³ï¼Œzuulç»„ä»¶</p><p>Feign â€”HttpClinet â€” Httpé€šä¿¡æ–¹å¼ï¼ŒåŒæ­¥ã€é˜»å¡</p><p>æœåŠ¡æ³¨å†Œå‘ç°ï¼šEureka</p><p>ç†”æ–­æœºåˆ¶ï¼šHystrix</p></li><li><p>Apache Dubbo Zookeeper åŠè‡ªåŠ¨ï¼Œéœ€è¦æ•´åˆåˆ«äººçš„</p><p>APIï¼šæ²¡æœ‰ï¼Œæ‰¾ç¬¬ä¸‰æ–¹ç»„ä»¶ï¼Œæˆ–è€…è‡ªå·±å®ç°</p><p>Dubbo</p><p>Zookeeper</p><p>æ²¡æœ‰ï¼šå€ŸåŠ©Hystrix</p></li><li></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>SpringCloud</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBootç¬”è®°14-å¼‚æ­¥ã€å®šæ—¶ã€é‚®ä»¶ä»»åŠ¡</title>
    <link href="/posts/2021/01/11/SpringBoot%E7%AC%94%E8%AE%B014-%E5%BC%82%E6%AD%A5%E3%80%81%E5%AE%9A%E6%97%B6%E3%80%81%E9%82%AE%E4%BB%B6%E4%BB%BB%E5%8A%A1/"/>
    <url>/posts/2021/01/11/SpringBoot%E7%AC%94%E8%AE%B014-%E5%BC%82%E6%AD%A5%E3%80%81%E5%AE%9A%E6%97%B6%E3%80%81%E9%82%AE%E4%BB%B6%E4%BB%BB%E5%8A%A1/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€å‰è¨€"><a href="#ä¸€ã€å‰è¨€" class="headerlink" title="ä¸€ã€å‰è¨€"></a>ä¸€ã€å‰è¨€</h3><blockquote><p>åœ¨æˆ‘ä»¬çš„å·¥ä½œä¸­ï¼Œå¸¸å¸¸ä¼šç”¨åˆ°å¼‚æ­¥å¤„ç†ä»»åŠ¡ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨ç½‘ç«™ä¸Šå‘é€é‚®ä»¶ï¼Œåå°ä¼šå»å‘é€é‚®ä»¶ï¼Œæ­¤æ—¶å‰å°ä¼šé€ æˆå“åº”ä¸åŠ¨ï¼Œç›´åˆ°é‚®ä»¶å‘é€å®Œæ¯•ï¼Œå“åº”æ‰ä¼šæˆåŠŸï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬ä¼šé‡‡ç”¨å¤šçº¿ç¨‹çš„æ–¹å¼å»å¤„ç†è¿™äº›ä»»åŠ¡ã€‚è¿˜æœ‰ä¸€äº›å®šæ—¶ä»»åŠ¡ï¼Œæ¯”å¦‚éœ€è¦åœ¨æ¯å¤©å‡Œæ™¨çš„æ—¶å€™ï¼Œåˆ†æä¸€æ¬¡å‰ä¸€å¤©çš„æ—¥å¿—ä¿¡æ¯ã€‚è¿˜æœ‰å°±æ˜¯é‚®ä»¶çš„å‘é€ï¼Œå¾®ä¿¡çš„å‰èº«ä¹Ÿæ˜¯é‚®ä»¶æœåŠ¡å‘¢ï¼Ÿè¿™äº›ä¸œè¥¿éƒ½æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿå…¶å®SpringBootéƒ½ç»™æˆ‘ä»¬æä¾›äº†å¯¹åº”çš„æ”¯æŒï¼Œæˆ‘ä»¬ä¸Šæ‰‹ä½¿ç”¨ååˆ†çš„ç®€å•ï¼Œåªéœ€è¦å¼€å¯ä¸€äº›æ³¨è§£æ”¯æŒï¼Œé…ç½®ä¸€äº›é…ç½®æ–‡ä»¶å³å¯ï¼é‚£æˆ‘ä»¬æ¥çœ‹çœ‹å§~  </p></blockquote><h3 id="äºŒã€å¼‚æ­¥ä»»åŠ¡"><a href="#äºŒã€å¼‚æ­¥ä»»åŠ¡" class="headerlink" title="äºŒã€å¼‚æ­¥ä»»åŠ¡"></a>äºŒã€å¼‚æ­¥ä»»åŠ¡</h3><ol><li><p>åˆ›å»ºä¸€ä¸ªserviceåŒ…</p></li><li><p>åˆ›å»ºä¸€ä¸ªç±»AsyncService</p><p>å¼‚æ­¥å¤„ç†è¿˜æ˜¯éå¸¸å¸¸ç”¨çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨ç½‘ç«™ä¸Šå‘é€é‚®ä»¶ï¼Œåå°ä¼šå»å‘é€é‚®ä»¶ï¼Œæ­¤æ—¶å‰å°ä¼šé€ æˆå“åº”ä¸åŠ¨ï¼Œç›´åˆ°é‚®ä»¶å‘é€å®Œæ¯•ï¼Œå“åº”æ‰ä¼šæˆåŠŸï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬ä¼šé‡‡ç”¨å¤šçº¿ç¨‹çš„æ–¹å¼å»å¤„ç†è¿™äº›ä»»åŠ¡ã€‚</p><p>ç¼–å†™æ–¹æ³•ï¼Œå‡è£…æ­£åœ¨å¤„ç†æ•°æ®ï¼Œä½¿ç”¨çº¿ç¨‹è®¾ç½®ä¸€äº›å»¶æ—¶ï¼Œæ¨¡æ‹ŸåŒæ­¥ç­‰å¾…çš„æƒ…å†µï¼›</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AsyncService</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">hello</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            Thread.sleep(<span class="hljs-number">3000</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;ä¸šåŠ¡è¿›è¡Œä¸­....&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li><p>ç¼–å†™controlleråŒ…</p></li><li><p>ç¼–å†™AsyncControllerç±»</p><p>æˆ‘ä»¬å»å†™ä¸€ä¸ªControlleræµ‹è¯•ä¸€ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AsyncController</span> </span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    AsyncService asyncService;<br><br>    <span class="hljs-meta">@GetMapping(&quot;/hello&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">hello</span><span class="hljs-params">()</span></span>&#123;<br>        asyncService.hello();<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>è®¿é—®<a href="http://localhost:8080/hello%E8%BF%9B%E8%A1%8C%E6%B5%8B%E8%AF%95%EF%BC%8C3%E7%A7%92%E5%90%8E%E5%87%BA%E7%8E%B0success%EF%BC%8C%E8%BF%99%E6%98%AF%E5%90%8C%E6%AD%A5%E7%AD%89%E5%BE%85%E7%9A%84%E6%83%85%E5%86%B5%E3%80%82">http://localhost:8080/helloè¿›è¡Œæµ‹è¯•ï¼Œ3ç§’åå‡ºç°successï¼Œè¿™æ˜¯åŒæ­¥ç­‰å¾…çš„æƒ…å†µã€‚</a></p><p>é—®é¢˜ï¼šæˆ‘ä»¬å¦‚æœæƒ³è®©ç”¨æˆ·ç›´æ¥å¾—åˆ°æ¶ˆæ¯ï¼Œå°±åœ¨åå°ä½¿ç”¨å¤šçº¿ç¨‹çš„æ–¹å¼è¿›è¡Œå¤„ç†å³å¯ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½éœ€è¦è‡ªå·±æ‰‹åŠ¨å»ç¼–å†™å¤šçº¿ç¨‹çš„å®ç°çš„è¯ï¼Œå¤ªéº»çƒ¦äº†ï¼Œæˆ‘ä»¬åªéœ€è¦ç”¨ä¸€ä¸ªç®€å•çš„åŠæ³•ï¼Œåœ¨æˆ‘ä»¬çš„æ–¹æ³•ä¸ŠåŠ ä¸€ä¸ªç®€å•çš„æ³¨è§£å³å¯ï¼Œå¦‚ä¸‹ï¼š</p></li><li><p>ç»™helloæ–¹æ³•æ·»<strong>åŠ @Asyncæ³¨è§£</strong>ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//å‘Šè¯‰Springè¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•</span><br><span class="hljs-meta">@Async</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">hello</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>        Thread.sleep(<span class="hljs-number">3000</span>);<br>    &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>        e.printStackTrace();<br>    &#125;<br>    System.out.println(<span class="hljs-string">&quot;ä¸šåŠ¡è¿›è¡Œä¸­....&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>SpringBootå°±ä¼šè‡ªå·±å¼€ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œè¿›è¡Œè°ƒç”¨ï¼ä½†æ˜¯è¦è®©è¿™ä¸ªæ³¨è§£ç”Ÿæ•ˆï¼Œæˆ‘ä»¬è¿˜éœ€è¦<strong>åœ¨ä¸»ç¨‹åºä¸Šæ·»åŠ ä¸€ä¸ªæ³¨è§£@EnableAsync</strong> ï¼Œå¼€å¯å¼‚æ­¥æ³¨è§£åŠŸèƒ½ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@EnableAsync</span> <span class="hljs-comment">//å¼€å¯å¼‚æ­¥æ³¨è§£åŠŸèƒ½</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SpringbootTaskApplication</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        SpringApplication.run(SpringbootTaskApplication.class, args);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li></ol><p>â€‹    </p><ol start="7"><li>é‡å¯æµ‹è¯•ï¼Œç½‘é¡µç¬é—´å“åº”ï¼Œåå°ä»£ç ä¾æ—§æ‰§è¡Œï¼</li></ol><h3 id="ä¸‰ã€é‚®ä»¶ä»»åŠ¡"><a href="#ä¸‰ã€é‚®ä»¶ä»»åŠ¡" class="headerlink" title="ä¸‰ã€é‚®ä»¶ä»»åŠ¡"></a>ä¸‰ã€é‚®ä»¶ä»»åŠ¡</h3><p>é‚®ä»¶å‘é€ï¼Œåœ¨æˆ‘ä»¬çš„æ—¥å¸¸å¼€å‘ä¸­ï¼Œä¹Ÿéå¸¸çš„å¤šï¼ŒSpringbootä¹Ÿå¸®æˆ‘ä»¬åšäº†æ”¯æŒ</p><ul><li>é‚®ä»¶å‘é€éœ€è¦å¼•å…¥spring-boot-start-mail</li><li>SpringBoot è‡ªåŠ¨é…ç½®MailSenderAutoConfiguration</li><li>å®šä¹‰MailPropertieså†…å®¹ï¼Œé…ç½®åœ¨application.ymlä¸­</li><li>è‡ªåŠ¨è£…é…JavaMailSender</li><li>æµ‹è¯•é‚®ä»¶å‘é€</li></ul><p><strong>æµ‹è¯•</strong>ï¼š</p><ol><li><p>å¼•å…¥pomä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-mail<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>çœ‹å®ƒå¼•å…¥çš„ä¾èµ–ï¼Œå¯ä»¥çœ‹åˆ° jakarta.mail</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.sun.mail<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jakarta.mail<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.6.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹è‡ªåŠ¨é…ç½®ç±»ï¼šMailSenderAutoConfiguration</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Import(&#123; MailSenderJndiConfiguration.class, MailSenderPropertiesConfiguration.class &#125;)</span><br></code></pre></td></tr></table></figure><p>ç‚¹è¿›MailSenderJndiConfigurationï¼Œè¿™ä¸ªç±»ä¸­å­˜åœ¨beanï¼ŒJavaMailSenderImpl</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br><span class="hljs-function">JavaMailSenderImpl <span class="hljs-title">mailSender</span><span class="hljs-params">(Session session)</span> </span>&#123;<br>    JavaMailSenderImpl sender = <span class="hljs-keyword">new</span> JavaMailSenderImpl();<br>    sender.setDefaultEncoding(<span class="hljs-keyword">this</span>.properties.getDefaultEncoding().name());<br>    sender.setSession(session);<br>    <span class="hljs-keyword">return</span> sender;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬å»çœ‹ä¸‹é…ç½®æ–‡ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ConfigurationProperties(</span><br><span class="hljs-meta">    prefix = &quot;spring.mail&quot;</span><br><span class="hljs-meta">)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MailProperties</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Charset DEFAULT_CHARSET;<br>    <span class="hljs-keyword">private</span> String host;<br>    <span class="hljs-keyword">private</span> Integer port;<br>    <span class="hljs-keyword">private</span> String username;<br>    <span class="hljs-keyword">private</span> String password;<br>    <span class="hljs-keyword">private</span> String protocol = <span class="hljs-string">&quot;smtp&quot;</span>;<br>    <span class="hljs-keyword">private</span> Charset defaultEncoding;<br>    <span class="hljs-keyword">private</span> Map&lt;String, String&gt; properties;<br>    <span class="hljs-keyword">private</span> String jndiName;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™é…ç½®æ–‡ä»¶</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-meta">spring.mail.username</span>=<span class="hljs-string">454921269@qq.com</span><br><span class="hljs-comment"># QQæˆæƒç </span><br><span class="hljs-meta">spring.mail.password</span>=<span class="hljs-string">jfsoqryszenzcbaf</span><br><span class="hljs-meta">spring.mail.host</span>=<span class="hljs-string">smtp.qq.com</span><br><span class="hljs-comment"># å¼€å¯åŠ å¯†éªŒè¯</span><br><span class="hljs-meta">spring.mail.properties.mail.smtl.ssl.enable</span>=<span class="hljs-string">true</span><br></code></pre></td></tr></table></figure><p>è·å–æˆæƒç ï¼šåœ¨QQé‚®ç®±ä¸­çš„è®¾ç½®-&gt;è´¦æˆ·-&gt;å¼€å¯pop3å’ŒsmtpæœåŠ¡</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B014-%E5%BC%82%E6%AD%A5%E3%80%81%E5%AE%9A%E6%97%B6%E3%80%81%E9%82%AE%E4%BB%B6%E4%BB%BB%E5%8A%A1/QQ%E9%82%AE%E7%AE%B1.png" alt="QQé‚®ç®±è·å–æˆæƒç "></p><p>ç„¶åï¼ŒæŒ‰ç…§è¦æ±‚å‘é€çŸ­ä¿¡</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBootç¬”è®°14-å¼‚æ­¥ã€å®šæ—¶ã€é‚®ä»¶ä»»åŠ¡/å‘çŸ­ä¿¡.jpg" alt="å‘çŸ­ä¿¡" style="zoom: 20%;"><p>ç„¶åï¼ŒæˆåŠŸè·å–æˆæƒç </p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B014-%E5%BC%82%E6%AD%A5%E3%80%81%E5%AE%9A%E6%97%B6%E3%80%81%E9%82%AE%E4%BB%B6%E4%BB%BB%E5%8A%A1/%E6%8E%88%E6%9D%83%E7%A0%81.png" alt="è·å–æˆæƒç "></p></li></ol><ol start="4"><li><p>å‘é€ç®€å•é‚®ä»¶æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Autowired</span><br>JavaMailSenderImpl mailSender;<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">contextLoads</span><span class="hljs-params">()</span> </span>&#123;<br><br>    <span class="hljs-comment">// ä¸€ä¸ªç®€å•çš„é‚®ä»¶</span><br>    SimpleMailMessage mailMessage = <span class="hljs-keyword">new</span> SimpleMailMessage();<br>    mailMessage.setSubject(<span class="hljs-string">&quot;ä¹”å¨ï¼Œä½ å¥½&quot;</span>);<br>    mailMessage.setText(<span class="hljs-string">&quot;æš—è£”å‰‘é­”æ•™å­¦&quot;</span>);<br>    mailMessage.setTo(<span class="hljs-string">&quot;454921269@qq.com&quot;</span>);<br>    mailMessage.setFrom(<span class="hljs-string">&quot;454921269@qq.com&quot;</span>);<br>    mailSender.send(mailMessage);<br><br>&#125;<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹é‚®ç®±ï¼Œå‘é€æˆåŠŸ</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B014-%E5%BC%82%E6%AD%A5%E3%80%81%E5%AE%9A%E6%97%B6%E3%80%81%E9%82%AE%E4%BB%B6%E4%BB%BB%E5%8A%A1/%E7%AE%80%E5%8D%95%E9%82%AE%E4%BB%B6.png" alt="ç®€å•é‚®ä»¶å‘é€"></p></li></ol><ol start="5"><li><p>å¤æ‚é‚®ä»¶å‘é€æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Autowired</span><br>JavaMailSenderImpl mailSender;<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">contextLoads2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> MessagingException </span>&#123;<br><br>    <span class="hljs-comment">// ä¸€ä¸ªå¤æ‚çš„é‚®ä»¶</span><br>    MimeMessage mimeMessage = mailSender.createMimeMessage();<br>    <span class="hljs-comment">// ç»„è£…</span><br>    MimeMessageHelper helper = <span class="hljs-keyword">new</span> MimeMessageHelper(mimeMessage,<span class="hljs-keyword">true</span>,<span class="hljs-string">&quot;utf-8&quot;</span> );<br>    helper.setSubject(<span class="hljs-string">&quot;èŠœæ¹–ï¼èµ·é£ï¼&quot;</span>);<br>    helper.setText(<span class="hljs-string">&quot;&lt;h1 style=&#x27;color:red&#x27;&gt;è‚‰è›‹è‘±é¸¡ï¼&lt;/h1&gt;&quot;</span>,<span class="hljs-keyword">true</span>);<br>    <span class="hljs-comment">// é™„ä»¶</span><br>    helper.addAttachment(<span class="hljs-string">&quot;å¤§å¸é©¬.jpg&quot;</span>, <span class="hljs-keyword">new</span> File(<span class="hljs-string">&quot;E:\\blog\\source\\_posts\\SpringBootç¬”è®°14-å¼‚æ­¥ã€å®šæ—¶ã€é‚®ä»¶ä»»åŠ¡\\å¤§å¸é©¬.jpg&quot;</span>));<br><br>    helper.setTo(<span class="hljs-string">&quot;454921269@qq.com&quot;</span>);<br>    helper.setFrom(<span class="hljs-string">&quot;454921269@qq.com&quot;</span>);<br>    mailSender.send(mimeMessage);<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    æŸ¥çœ‹é‚®ç®±ï¼Œå‘é€æˆåŠŸ.</p><p>â€‹    <img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B014-%E5%BC%82%E6%AD%A5%E3%80%81%E5%AE%9A%E6%97%B6%E3%80%81%E9%82%AE%E4%BB%B6%E4%BB%BB%E5%8A%A1/%E5%A4%8D%E6%9D%82%E9%82%AE%E4%BB%B6.png" alt="å‘é€å¤æ‚é‚®ä»¶"></p></li></ol><h3 id="å››ã€å®šæ—¶ä»»åŠ¡"><a href="#å››ã€å®šæ—¶ä»»åŠ¡" class="headerlink" title="å››ã€å®šæ—¶ä»»åŠ¡"></a>å››ã€å®šæ—¶ä»»åŠ¡</h3><p>é¡¹ç›®å¼€å‘ä¸­ç»å¸¸éœ€è¦æ‰§è¡Œä¸€äº›å®šæ—¶ä»»åŠ¡ï¼Œæ¯”å¦‚éœ€è¦åœ¨æ¯å¤©å‡Œæ™¨çš„æ—¶å€™ï¼Œåˆ†æä¸€æ¬¡å‰ä¸€å¤©çš„æ—¥å¿—ä¿¡æ¯ï¼ŒSpringä¸ºæˆ‘ä»¬æä¾›äº†å¼‚æ­¥æ‰§è¡Œä»»åŠ¡è°ƒåº¦çš„æ–¹å¼ï¼Œæä¾›äº†ä¸¤ä¸ªæ¥å£ã€‚</p><ul><li>TaskExecutoræ¥å£</li><li>TaskScheduleræ¥å£</li></ul><p>ä¸¤ä¸ªæ³¨è§£ï¼š</p><ul><li>@EnableScheduling</li><li>@Scheduled</li></ul><p><strong>cronè¡¨è¾¾å¼ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B014-%E5%BC%82%E6%AD%A5%E3%80%81%E5%AE%9A%E6%97%B6%E3%80%81%E9%82%AE%E4%BB%B6%E4%BB%BB%E5%8A%A1/cron1.webp" alt="è¡¨è¾¾å¼å­—æ®µ"></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B014-%E5%BC%82%E6%AD%A5%E3%80%81%E5%AE%9A%E6%97%B6%E3%80%81%E9%82%AE%E4%BB%B6%E4%BB%BB%E5%8A%A1/cron2.png" alt="ç‰¹æ®Šå­—ç¬¦"></p><p><strong>æµ‹è¯•æ­¥éª¤ï¼š</strong></p><ol><li><p>åˆ›å»ºä¸€ä¸ªScheduledService</p><p>æˆ‘ä»¬é‡Œé¢å­˜åœ¨ä¸€ä¸ªhelloæ–¹æ³•ï¼Œä»–éœ€è¦å®šæ—¶æ‰§è¡Œï¼Œæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ScheduledService</span> </span>&#123;<br><br>    <span class="hljs-comment">// åœ¨ä¸€ä¸ªç‰¹å®šçš„æ—¶é—´æ‰§è¡Œè¿™ä¸ªæ–¹æ³•</span><br>    <span class="hljs-comment">// cronè¡¨è¾¾å¼</span><br>    <span class="hljs-comment">// ç§’ åˆ† æ—¶ æ—¥ æœˆ å‘¨å‡ </span><br>    <span class="hljs-comment">// æ¯å¤©çš„18ç‚¹58åˆ†0ç§’æ‰§è¡Œ</span><br>    <span class="hljs-meta">@Scheduled(cron = &quot;0 58 18 * * ?&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">hello</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;helloï¼Œä½ è¢«æ‰§è¡Œäº†~&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>è¿™é‡Œå†™å®Œå®šæ—¶ä»»åŠ¡ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸»ç¨‹åºä¸Šå¢åŠ @EnableScheduling å¼€å¯å®šæ—¶ä»»åŠ¡åŠŸèƒ½</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@EnableAsync</span> <span class="hljs-comment">//å¼€å¯å¼‚æ­¥æ³¨è§£åŠŸèƒ½</span><br><span class="hljs-meta">@EnableScheduling</span> <span class="hljs-comment">//å¼€å¯åŸºäºæ³¨è§£çš„å®šæ—¶ä»»åŠ¡</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SpringbootTaskApplication</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        SpringApplication.run(SpringbootTaskApplication.class, args);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æˆ‘ä»¬æ¥è¯¦ç»†äº†è§£ä¸‹cronè¡¨è¾¾å¼</p><p><a href="http://www.bejson.com/othertools/cron/">http://www.bejson.com/othertools/cron/</a></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ï¼ˆ1ï¼‰0/2 <span class="hljs-emphasis">* *</span> <span class="hljs-emphasis">* *</span> ?   è¡¨ç¤ºæ¯2ç§’ æ‰§è¡Œä»»åŠ¡<br>ï¼ˆ1ï¼‰0 0/2 <span class="hljs-emphasis">* *</span> <span class="hljs-emphasis">* ?   è¡¨ç¤ºæ¯2åˆ†é’Ÿ æ‰§è¡Œä»»åŠ¡</span><br><span class="hljs-emphasis">ï¼ˆ1ï¼‰0 0 2 1 *</span> ?   è¡¨ç¤ºåœ¨æ¯æœˆçš„1æ—¥çš„å‡Œæ™¨2ç‚¹è°ƒæ•´ä»»åŠ¡<br>ï¼ˆ2ï¼‰0 15 10 ? <span class="hljs-emphasis">* MON-FRI   è¡¨ç¤ºå‘¨ä¸€åˆ°å‘¨äº”æ¯å¤©ä¸Šåˆ10:15æ‰§è¡Œä½œä¸š</span><br><span class="hljs-emphasis">ï¼ˆ3ï¼‰0 15 10 ? 6L 2002-2006   è¡¨ç¤º2002-2006å¹´çš„æ¯ä¸ªæœˆçš„æœ€åä¸€ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ10:15æ‰§è¡Œä½œ</span><br><span class="hljs-emphasis">ï¼ˆ4ï¼‰0 0 10,14,16 *</span> <span class="hljs-emphasis">* ?   æ¯å¤©ä¸Šåˆ10ç‚¹ï¼Œä¸‹åˆ2ç‚¹ï¼Œ4ç‚¹</span><br><span class="hljs-emphasis">ï¼ˆ5ï¼‰0 0/30 9-17 *</span> <span class="hljs-emphasis">* ?   æœä¹æ™šäº”å·¥ä½œæ—¶é—´å†…æ¯åŠå°æ—¶</span><br><span class="hljs-emphasis">ï¼ˆ6ï¼‰0 0 12 ? *</span> WED   è¡¨ç¤ºæ¯ä¸ªæ˜ŸæœŸä¸‰ä¸­åˆ12ç‚¹<br>ï¼ˆ7ï¼‰0 0 12 <span class="hljs-emphasis">* *</span> ?   æ¯å¤©ä¸­åˆ12ç‚¹è§¦å‘<br>ï¼ˆ8ï¼‰0 15 10 ? <span class="hljs-emphasis">* *</span>   æ¯å¤©ä¸Šåˆ10:15è§¦å‘<br>ï¼ˆ9ï¼‰0 15 10 <span class="hljs-emphasis">* *</span> ?     æ¯å¤©ä¸Šåˆ10:15è§¦å‘<br>ï¼ˆ10ï¼‰0 15 10 <span class="hljs-emphasis">* *</span> ?   æ¯å¤©ä¸Šåˆ10:15è§¦å‘<br>ï¼ˆ11ï¼‰0 15 10 <span class="hljs-emphasis">* *</span> ? 2005   2005å¹´çš„æ¯å¤©ä¸Šåˆ10:15è§¦å‘<br>ï¼ˆ12ï¼‰0 <span class="hljs-emphasis">* 14 *</span> <span class="hljs-emphasis">* ?     åœ¨æ¯å¤©ä¸‹åˆ2ç‚¹åˆ°ä¸‹åˆ2:59æœŸé—´çš„æ¯1åˆ†é’Ÿè§¦å‘</span><br><span class="hljs-emphasis">ï¼ˆ13ï¼‰0 0/5 14 *</span> <span class="hljs-emphasis">* ?   åœ¨æ¯å¤©ä¸‹åˆ2ç‚¹åˆ°ä¸‹åˆ2:55æœŸé—´çš„æ¯5åˆ†é’Ÿè§¦å‘</span><br><span class="hljs-emphasis">ï¼ˆ14ï¼‰0 0/5 14,18 *</span> <span class="hljs-emphasis">* ?     åœ¨æ¯å¤©ä¸‹åˆ2ç‚¹åˆ°2:55æœŸé—´å’Œä¸‹åˆ6ç‚¹åˆ°6:55æœŸé—´çš„æ¯5åˆ†é’Ÿè§¦å‘</span><br><span class="hljs-emphasis">ï¼ˆ15ï¼‰0 0-5 14 *</span> <span class="hljs-emphasis">* ?   åœ¨æ¯å¤©ä¸‹åˆ2ç‚¹åˆ°ä¸‹åˆ2:05æœŸé—´çš„æ¯1åˆ†é’Ÿè§¦å‘</span><br><span class="hljs-emphasis">ï¼ˆ16ï¼‰0 10,44 14 ? 3 WED   æ¯å¹´ä¸‰æœˆçš„æ˜ŸæœŸä¸‰çš„ä¸‹åˆ2:10å’Œ2:44è§¦å‘</span><br><span class="hljs-emphasis">ï¼ˆ17ï¼‰0 15 10 ? *</span> MON-FRI   å‘¨ä¸€è‡³å‘¨äº”çš„ä¸Šåˆ10:15è§¦å‘<br>ï¼ˆ18ï¼‰0 15 10 15 <span class="hljs-emphasis">* ?   æ¯æœˆ15æ—¥ä¸Šåˆ10:15è§¦å‘</span><br><span class="hljs-emphasis">ï¼ˆ19ï¼‰0 15 10 L *</span> ?   æ¯æœˆæœ€åä¸€æ—¥çš„ä¸Šåˆ10:15è§¦å‘<br>ï¼ˆ20ï¼‰0 15 10 ? <span class="hljs-emphasis">* 6L   æ¯æœˆçš„æœ€åä¸€ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ10:15è§¦å‘</span><br><span class="hljs-emphasis">ï¼ˆ21ï¼‰0 15 10 ? *</span> 6L 2002-2005   2002å¹´è‡³2005å¹´çš„æ¯æœˆçš„æœ€åä¸€ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ10:15è§¦å‘<br>ï¼ˆ22ï¼‰0 15 10 ? <span class="hljs-emphasis">* 6#3   æ¯æœˆçš„ç¬¬ä¸‰ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ10:15è§¦å‘</span><br></code></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBootç¬”è®°13-é¡¹ç›®é›†æˆSwagger</title>
    <link href="/posts/2021/01/11/SpringBoot%E7%AC%94%E8%AE%B013-%E9%A1%B9%E7%9B%AE%E9%9B%86%E6%88%90Swagger/"/>
    <url>/posts/2021/01/11/SpringBoot%E7%AC%94%E8%AE%B013-%E9%A1%B9%E7%9B%AE%E9%9B%86%E6%88%90Swagger/</url>
    
    <content type="html"><![CDATA[<h2 id="SpringBooté¡¹ç›®é›†æˆSwagger"><a href="#SpringBooté¡¹ç›®é›†æˆSwagger" class="headerlink" title="SpringBooté¡¹ç›®é›†æˆSwagger"></a>SpringBooté¡¹ç›®é›†æˆSwagger</h2><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B013-%E9%A1%B9%E7%9B%AE%E9%9B%86%E6%88%90Swagger/logo.png" alt="Swaggerå®˜ç½‘"></p><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>äº†è§£Swaggerçš„æ¦‚å¿µåŠä½œç”¨</li><li>æŒæ¡åœ¨é¡¹ç›®ä¸­é›†æˆSwaggerè‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£</li></ul><h3 id="ä¸€ã€Swaggerç®€ä»‹"><a href="#ä¸€ã€Swaggerç®€ä»‹" class="headerlink" title="ä¸€ã€Swaggerç®€ä»‹"></a>ä¸€ã€Swaggerç®€ä»‹</h3><p><strong>å‰åç«¯åˆ†ç¦»</strong></p><ul><li>å‰ç«¯ -&gt; å‰ç«¯æ§åˆ¶å±‚ã€è§†å›¾å±‚</li><li>åç«¯ -&gt; åç«¯æ§åˆ¶å±‚ã€æœåŠ¡å±‚ã€æ•°æ®è®¿é—®å±‚</li><li>å‰åç«¯é€šè¿‡APIè¿›è¡Œäº¤äº’</li><li>å‰åç«¯ç›¸å¯¹ç‹¬ç«‹ä¸”æ¾è€¦åˆ</li></ul><p><strong>äº§ç”Ÿçš„é—®é¢˜</strong></p><ul><li>å‰åç«¯é›†æˆï¼Œå‰ç«¯æˆ–è€…åç«¯æ— æ³•åšåˆ°â€œåŠæ—¶åå•†ï¼Œå°½æ—©è§£å†³â€ï¼Œæœ€ç»ˆå¯¼è‡´é—®é¢˜é›†ä¸­çˆ†å‘</li></ul><p><strong>è§£å†³æ–¹æ¡ˆ</strong></p><ul><li>é¦–å…ˆå®šä¹‰schema [ è®¡åˆ’çš„æçº² ]ï¼Œå¹¶å®æ—¶è·Ÿè¸ªæœ€æ–°çš„APIï¼Œé™ä½é›†æˆé£é™©</li></ul><p><strong>Swagger</strong></p><ul><li>å·ç§°ä¸–ç•Œä¸Šæœ€æµè¡Œçš„APIæ¡†æ¶</li><li>Restful Api æ–‡æ¡£åœ¨çº¿è‡ªåŠ¨ç”Ÿæˆå™¨ =&gt; <strong>API æ–‡æ¡£ ä¸API å®šä¹‰åŒæ­¥æ›´æ–°</strong></li><li>ç›´æ¥è¿è¡Œï¼Œåœ¨çº¿æµ‹è¯•API</li><li>æ”¯æŒå¤šç§è¯­è¨€ ï¼ˆå¦‚ï¼šJavaï¼ŒPHPç­‰ï¼‰</li><li>å®˜ç½‘ï¼š<a href="https://swagger.io/">https://swagger.io/</a></li></ul><h3 id="äºŒã€SpringBooté›†æˆSwagger"><a href="#äºŒã€SpringBooté›†æˆSwagger" class="headerlink" title="äºŒã€SpringBooté›†æˆSwagger"></a>äºŒã€SpringBooté›†æˆSwagger</h3><ol><li><p>æ–°å»ºä¸€ä¸ªSpringBoot-webé¡¹ç›®</p></li><li><p>æ·»åŠ Mavenä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- springfox-boot-starter --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.springfox<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springfox-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™HelloControllerï¼Œæµ‹è¯•ç¡®ä¿è¿è¡ŒæˆåŠŸï¼</p></li><li><p>è¦ä½¿ç”¨Swaggerï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªé…ç½®ç±»-SwaggerConfigæ¥é…ç½® Swagger</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@EnableSwagger2</span>  <span class="hljs-comment">// å¼€å¯Swagger2</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SwaggerConfig</span> </span>&#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>åŒæ—¶æˆ‘ä»¬è¦åœ¨ä¸»å¯åŠ¨ç±»ä¸ŠåŠ ä¸€ä¸ªæ³¨è§£@EnableOpenApi</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@EnableOpenApi</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SwaggerProApplication</span> </span>&#123;<br><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>    SpringApplication.run(SwaggerProApplication.class, args);<br>  &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>è®¿é—®æµ‹è¯•ï¼š<a href="http://localhost:8080/swagger-ui/index.html%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0swagger%E7%9A%84%E7%95%8C%E9%9D%A2%EF%BC%9B">http://localhost:8080/swagger-ui/index.htmlï¼Œå¯ä»¥çœ‹åˆ°swaggerçš„ç•Œé¢ï¼›</a></p><p>â€‹    </p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B013-%E9%A1%B9%E7%9B%AE%E9%9B%86%E6%88%90Swagger/index.png" alt="swaggeré¡µé¢"></p></li></ol><h3 id="ä¸‰ã€é…ç½®Swagger"><a href="#ä¸‰ã€é…ç½®Swagger" class="headerlink" title="ä¸‰ã€é…ç½®Swagger"></a>ä¸‰ã€é…ç½®Swagger</h3><ol><li><p>Swaggerå®ä¾‹Beanæ˜¯Docketï¼Œæ‰€ä»¥é€šè¿‡é…ç½®Docketå®ä¾‹æ¥é…ç½®Swagggerã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span> <span class="hljs-comment">//é…ç½®docketä»¥é…ç½®Swaggerå…·ä½“å‚æ•°</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> Docket <span class="hljs-title">docket</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Docket(DocumentationType.SWAGGER_2);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å¯ä»¥é€šè¿‡apiInfo()å±æ€§é…ç½®æ–‡æ¡£ä¿¡æ¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// é…ç½®Swaggerä¿¡æ¯=apiInfo</span><br><span class="hljs-function"><span class="hljs-keyword">private</span> ApiInfo <span class="hljs-title">apiInfo</span><span class="hljs-params">()</span> </span>&#123;<br><br>    <span class="hljs-comment">// ä½œè€…ä¿¡æ¯</span><br>    Contact contact = <span class="hljs-keyword">new</span> Contact(<span class="hljs-string">&quot;ä¹”å¨&quot;</span>, <span class="hljs-string">&quot;http://AtroxQW.github.io&quot;</span>, <span class="hljs-string">&quot;454921269@qq.com&quot;</span>);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ApiInfo(<span class="hljs-string">&quot;ä¹”å¨çš„APIæ–‡æ¡£&quot;</span>,<br>                       <span class="hljs-string">&quot;è†å¬ç­ç»çš„æ­»å¯‚å§&quot;</span>,<br>                       <span class="hljs-string">&quot;1.0&quot;</span>,<br>                       <span class="hljs-string">&quot;http://AtroxQW.github.io&quot;</span>,<br>                       contact,<br>                       <span class="hljs-string">&quot;Apache 2.0&quot;</span>,<br>                       <span class="hljs-string">&quot;http://www.apache.org/licenses/LICENSE-2.0&quot;</span>,<br>                       <span class="hljs-keyword">new</span> ArrayList());<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>Docketå®ä¾‹å…³è”ä¸Š apiInfo()</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// é…ç½®äº†Swaggerçš„Docketçš„beanå®ä¾‹</span><br><span class="hljs-meta">@Bean</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> Docket <span class="hljs-title">docket</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Docket(DocumentationType.SWAGGER_2)<br>        .apiInfo(apiInfo());<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>é‡å¯é¡¹ç›®ï¼Œè®¿é—®æµ‹è¯• <a href="http://localhost:8080/swagger-ui.html">http://localhost:8080/swagger-ui.html</a>  çœ‹ä¸‹æ•ˆæœï¼›</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B013-%E9%A1%B9%E7%9B%AE%E9%9B%86%E6%88%90Swagger/apiInfo.png" alt="é…ç½®æ–‡æ¡£ä¿¡æ¯"></p></li></ol><h3 id="å››ã€é…ç½®æ‰«ææ¥å£"><a href="#å››ã€é…ç½®æ‰«ææ¥å£" class="headerlink" title="å››ã€é…ç½®æ‰«ææ¥å£"></a>å››ã€é…ç½®æ‰«ææ¥å£</h3><ol><li><p>æ„å»ºDocketæ—¶é€šè¿‡select()æ–¹æ³•é…ç½®æ€ä¹ˆæ‰«ææ¥å£ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> Docket <span class="hljs-title">docket</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Docket(DocumentationType.SWAGGER_2)<br>        .apiInfo(apiInfo())<br>        .select()<span class="hljs-comment">// é€šè¿‡.select()æ–¹æ³•ï¼Œå»é…ç½®æ‰«ææ¥å£,RequestHandlerSelectorsé…ç½®å¦‚ä½•æ‰«ææ¥å£</span><br>        .apis(RequestHandlerSelectors.basePackage(<span class="hljs-string">&quot;com.kuang.swagger.controller&quot;</span>))<br>        .build();<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>é‡å¯é¡¹ç›®æµ‹è¯•ï¼Œç”±äºæˆ‘ä»¬é…ç½®æ ¹æ®åŒ…çš„è·¯å¾„æ‰«ææ¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½çœ‹åˆ°ä¸€ä¸ªç±»</p></li><li><p>é™¤äº†é€šè¿‡åŒ…è·¯å¾„é…ç½®æ‰«ææ¥å£å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡é…ç½®å…¶ä»–æ–¹å¼æ‰«ææ¥å£ï¼Œè¿™é‡Œæ³¨é‡Šä¸€ä¸‹æ‰€æœ‰çš„é…ç½®æ–¹å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java">any() <span class="hljs-comment">// æ‰«ææ‰€æœ‰ï¼Œé¡¹ç›®ä¸­çš„æ‰€æœ‰æ¥å£éƒ½ä¼šè¢«æ‰«æåˆ°</span><br>none() <span class="hljs-comment">// ä¸æ‰«ææ¥å£</span><br><span class="hljs-comment">// é€šè¿‡æ–¹æ³•ä¸Šçš„æ³¨è§£æ‰«æï¼Œå¦‚withMethodAnnotation(GetMapping.class)åªæ‰«ægetè¯·æ±‚</span><br>withMethodAnnotation(<span class="hljs-keyword">final</span> Class&lt;? extends Annotation&gt; annotation)<br><span class="hljs-comment">// é€šè¿‡ç±»ä¸Šçš„æ³¨è§£æ‰«æï¼Œå¦‚.withClassAnnotation(Controller.class)åªæ‰«ææœ‰controlleræ³¨è§£çš„ç±»ä¸­çš„æ¥å£</span><br>withClassAnnotation(<span class="hljs-keyword">final</span> Class&lt;? extends Annotation&gt; annotation)<br>basePackage(<span class="hljs-keyword">final</span> String basePackage) <span class="hljs-comment">// æ ¹æ®åŒ…è·¯å¾„æ‰«ææ¥å£</span><br></code></pre></td></tr></table></figure></li><li><p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é…ç½®æ¥å£æ‰«æè¿‡æ»¤ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> Docket <span class="hljs-title">docket</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Docket(DocumentationType.SWAGGER_2)<br>        .apiInfo(apiInfo())<br>        .select()<span class="hljs-comment">// é€šè¿‡.select()æ–¹æ³•ï¼Œå»é…ç½®æ‰«ææ¥å£,RequestHandlerSelectorsé…ç½®å¦‚ä½•æ‰«ææ¥å£</span><br>        .apis(RequestHandlerSelectors.basePackage(<span class="hljs-string">&quot;com.atrox.controller&quot;</span>))<br>        <span class="hljs-comment">// é…ç½®å¦‚ä½•é€šè¿‡pathè¿‡æ»¤,å³è¿™é‡Œåªæ‰«æè¯·æ±‚ä»¥/atroxå¼€å¤´çš„æ¥å£</span><br>        .paths(PathSelectors.ant(<span class="hljs-string">&quot;/atrox/**&quot;</span>))<br>        .build();<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>è¿™é‡Œçš„å¯é€‰å€¼è¿˜æœ‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">any() <span class="hljs-comment">// ä»»ä½•è¯·æ±‚éƒ½æ‰«æ</span><br>none() <span class="hljs-comment">// ä»»ä½•è¯·æ±‚éƒ½ä¸æ‰«æ</span><br>regex(<span class="hljs-keyword">final</span> String pathRegex) <span class="hljs-comment">// é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æ§åˆ¶</span><br>ant(<span class="hljs-keyword">final</span> String antPattern) <span class="hljs-comment">// é€šè¿‡ant()æ§åˆ¶</span><br></code></pre></td></tr></table></figure></li></ol><h3 id="äº”ã€é…ç½®Swaggerå¼€å…³"><a href="#äº”ã€é…ç½®Swaggerå¼€å…³" class="headerlink" title="äº”ã€é…ç½®Swaggerå¼€å…³"></a>äº”ã€é…ç½®Swaggerå¼€å…³</h3><ol><li><p>é€šè¿‡enable()æ–¹æ³•é…ç½®æ˜¯å¦å¯ç”¨swaggerï¼Œå¦‚æœæ˜¯falseï¼Œswaggerå°†ä¸èƒ½åœ¨æµè§ˆå™¨ä¸­è®¿é—®äº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> Docket <span class="hljs-title">docket</span><span class="hljs-params">()</span> </span>&#123;<br>   <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Docket(DocumentationType.SWAGGER_2)<br>      .apiInfo(apiInfo())<br>      .enable(<span class="hljs-keyword">false</span>) <span class="hljs-comment">//é…ç½®æ˜¯å¦å¯ç”¨Swaggerï¼Œå¦‚æœæ˜¯falseï¼Œåœ¨æµè§ˆå™¨å°†æ— æ³•è®¿é—®</span><br>      .select()<span class="hljs-comment">// é€šè¿‡.select()æ–¹æ³•ï¼Œå»é…ç½®æ‰«ææ¥å£,RequestHandlerSelectorsé…ç½®å¦‚ä½•æ‰«ææ¥å£</span><br>      .apis(RequestHandlerSelectors.basePackage(<span class="hljs-string">&quot;com.kuang.swagger.controller&quot;</span>))<br>       <span class="hljs-comment">// é…ç½®å¦‚ä½•é€šè¿‡pathè¿‡æ»¤,å³è¿™é‡Œåªæ‰«æè¯·æ±‚ä»¥/kuangå¼€å¤´çš„æ¥å£</span><br>      .paths(PathSelectors.ant(<span class="hljs-string">&quot;/kuang/**&quot;</span>))<br>      .build();<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å¦‚ä½•åŠ¨æ€é…ç½®å½“é¡¹ç›®å¤„äºtestã€devç¯å¢ƒæ—¶æ˜¾ç¤ºswaggerï¼Œå¤„äºprodæ—¶ä¸æ˜¾ç¤ºï¼Ÿ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> Docket <span class="hljs-title">docket</span><span class="hljs-params">(Environment environment)</span> </span>&#123;<br>    <span class="hljs-comment">// è®¾ç½®è¦æ˜¾ç¤ºswaggerçš„ç¯å¢ƒ</span><br>    Profiles of = Profiles.of(<span class="hljs-string">&quot;dev&quot;</span>, <span class="hljs-string">&quot;test&quot;</span>);<br>    <span class="hljs-comment">// åˆ¤æ–­å½“å‰æ˜¯å¦å¤„äºè¯¥ç¯å¢ƒ</span><br>    <span class="hljs-comment">// é€šè¿‡ enable() æ¥æ”¶æ­¤å‚æ•°åˆ¤æ–­æ˜¯å¦è¦æ˜¾ç¤º</span><br>    <span class="hljs-keyword">boolean</span> b = environment.acceptsProfiles(of);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Docket(DocumentationType.SWAGGER_2)<br>        .apiInfo(apiInfo())<br>        .enable(b) <span class="hljs-comment">//é…ç½®æ˜¯å¦å¯ç”¨Swaggerï¼Œå¦‚æœæ˜¯falseï¼Œåœ¨æµè§ˆå™¨å°†æ— æ³•è®¿é—®</span><br>        .select()<span class="hljs-comment">// é€šè¿‡.select()æ–¹æ³•ï¼Œå»é…ç½®æ‰«ææ¥å£,RequestHandlerSelectorsé…ç½®å¦‚ä½•æ‰«ææ¥å£</span><br>        .apis(RequestHandlerSelectors.basePackage(<span class="hljs-string">&quot;com.kuang.swagger.controller&quot;</span>))<br>        <span class="hljs-comment">// é…ç½®å¦‚ä½•é€šè¿‡pathè¿‡æ»¤,å³è¿™é‡Œåªæ‰«æè¯·æ±‚ä»¥/kuangå¼€å¤´çš„æ¥å£</span><br>        .paths(PathSelectors.ant(<span class="hljs-string">&quot;/kuang/**&quot;</span>))<br>        .build();<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><h3 id="å…­ã€é…ç½®APIåˆ†ç»„"><a href="#å…­ã€é…ç½®APIåˆ†ç»„" class="headerlink" title="å…­ã€é…ç½®APIåˆ†ç»„"></a>å…­ã€é…ç½®APIåˆ†ç»„</h3><ol><li><p>å¦‚æœæ²¡æœ‰é…ç½®åˆ†ç»„ï¼Œé»˜è®¤æ˜¯defaultã€‚é€šè¿‡groupName()æ–¹æ³•å³å¯é…ç½®åˆ†ç»„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> Docket <span class="hljs-title">docket</span><span class="hljs-params">(Environment environment)</span> </span>&#123;<br>   <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Docket(DocumentationType.SWAGGER_2).apiInfo(apiInfo())<br>      .groupName(<span class="hljs-string">&quot;ä¹”å¨&quot;</span>) <span class="hljs-comment">// é…ç½®åˆ†ç»„</span><br>       <span class="hljs-comment">// çœç•¥é…ç½®....</span><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>é‡å¯é¡¹ç›®æŸ¥çœ‹åˆ†ç»„</p></li><li><p>å¦‚ä½•é…ç½®å¤šä¸ªåˆ†ç»„ï¼Ÿé…ç½®å¤šä¸ªåˆ†ç»„åªéœ€è¦é…ç½®å¤šä¸ªdocketå³å¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> Docket <span class="hljs-title">docket1</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Docket(DocumentationType.SWAGGER_2).groupName(<span class="hljs-string">&quot;group1&quot;</span>);<br>&#125;<br><span class="hljs-meta">@Bean</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> Docket <span class="hljs-title">docket2</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Docket(DocumentationType.SWAGGER_2).groupName(<span class="hljs-string">&quot;group2&quot;</span>);<br>&#125;<br><span class="hljs-meta">@Bean</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> Docket <span class="hljs-title">docket3</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Docket(DocumentationType.SWAGGER_2).groupName(<span class="hljs-string">&quot;group3&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>é‡å¯é¡¹ç›®æŸ¥çœ‹å³å¯</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B013-%E9%A1%B9%E7%9B%AE%E9%9B%86%E6%88%90Swagger/group.png" alt="åˆ†ç»„"></p></li></ol><h3 id="ä¸ƒã€å®ä½“é…ç½®"><a href="#ä¸ƒã€å®ä½“é…ç½®" class="headerlink" title="ä¸ƒã€å®ä½“é…ç½®"></a>ä¸ƒã€å®ä½“é…ç½®</h3><ol><li><p>æ–°å»ºä¸€ä¸ªå®ä½“ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ApiModel(&quot;ç”¨æˆ·å®ä½“&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-meta">@ApiModelProperty(&quot;ç”¨æˆ·å&quot;)</span><br>    <span class="hljs-keyword">public</span> String username;<br>    <span class="hljs-meta">@ApiModelProperty(&quot;å¯†ç &quot;)</span><br>    <span class="hljs-keyword">public</span> String password;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>åªè¦è¿™ä¸ªå®ä½“åœ¨<strong>è¯·æ±‚æ¥å£</strong>çš„è¿”å›å€¼ä¸Šï¼ˆå³ä½¿æ˜¯æ³›å‹ï¼‰ï¼Œéƒ½èƒ½æ˜ å°„åˆ°å®ä½“é¡¹ä¸­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/getUser&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">getUser</span><span class="hljs-params">()</span></span>&#123;<br>   <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> User();<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>é‡å¯æŸ¥çœ‹æµ‹è¯•</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B013-%E9%A1%B9%E7%9B%AE%E9%9B%86%E6%88%90Swagger/pojo.webp" alt="å®ä½“ç±»é…ç½®"></p></li></ol><p>æ³¨ï¼šå¹¶ä¸æ˜¯å› ä¸º@ApiModelè¿™ä¸ªæ³¨è§£è®©å®ä½“æ˜¾ç¤ºåœ¨è¿™é‡Œäº†ï¼Œè€Œæ˜¯åªè¦å‡ºç°åœ¨æ¥å£æ–¹æ³•çš„è¿”å›å€¼ä¸Šçš„å®ä½“éƒ½ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œï¼Œè€Œ@ApiModelå’Œ@ApiModelPropertyè¿™ä¸¤ä¸ªæ³¨è§£åªæ˜¯ä¸ºå®ä½“æ·»åŠ æ³¨é‡Šçš„ã€‚</p><p>@ApiModelä¸ºç±»æ·»åŠ æ³¨é‡Š</p><p>@ApiModelPropertyä¸ºç±»å±æ€§æ·»åŠ æ³¨é‡Š</p><h3 id="å…«ã€å¸¸ç”¨æ³¨è§£"><a href="#å…«ã€å¸¸ç”¨æ³¨è§£" class="headerlink" title="å…«ã€å¸¸ç”¨æ³¨è§£"></a>å…«ã€å¸¸ç”¨æ³¨è§£</h3><p>Swaggerçš„æ‰€æœ‰æ³¨è§£å®šä¹‰åœ¨io.swagger.annotationsåŒ…ä¸‹</p><p>ä¸‹é¢åˆ—ä¸€äº›ç»å¸¸ç”¨åˆ°çš„ï¼Œæœªåˆ—ä¸¾å‡ºæ¥çš„å¯ä»¥å¦è¡ŒæŸ¥é˜…è¯´æ˜ï¼š</p><table><thead><tr><th>Swaggeræ³¨è§£</th><th>ç®€å•è¯´æ˜</th></tr></thead><tbody><tr><td>@Api(tags = â€œxxxæ¨¡å—è¯´æ˜â€)</td><td>ä½œç”¨åœ¨æ¨¡å—ç±»ä¸Š</td></tr><tr><td>@ApiOperation(â€œxxxæ¥å£è¯´æ˜â€)</td><td>ä½œç”¨åœ¨æ¥å£æ–¹æ³•ä¸Š</td></tr><tr><td>@ApiModel(â€œxxxPOJOè¯´æ˜â€)</td><td>ä½œç”¨åœ¨æ¨¡å‹ç±»ä¸Šï¼šå¦‚VOã€BO</td></tr><tr><td>@ApiModelProperty(value = â€œxxxå±æ€§è¯´æ˜â€,hidden = true)</td><td>ä½œç”¨åœ¨ç±»æ–¹æ³•å’Œå±æ€§ä¸Šï¼Œhiddenè®¾ç½®ä¸ºtrueå¯ä»¥éšè—è¯¥å±æ€§</td></tr><tr><td>@ApiParam(â€œxxxå‚æ•°è¯´æ˜â€)</td><td>ä½œç”¨åœ¨å‚æ•°ã€æ–¹æ³•å’Œå­—æ®µä¸Šï¼Œç±»ä¼¼@ApiModelProperty</td></tr></tbody></table><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ç»™è¯·æ±‚çš„æ¥å£é…ç½®ä¸€äº›æ³¨é‡Š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ApiOperation(&quot;ä¹”å¨çš„æ¥å£&quot;)</span><br><span class="hljs-meta">@PostMapping(&quot;/atrox&quot;)</span><br><span class="hljs-meta">@ResponseBody</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">kuang</span><span class="hljs-params">(<span class="hljs-meta">@ApiParam(&quot;è¿™ä¸ªåå­—ä¼šè¢«è¿”å›&quot;)</span>String username)</span></span>&#123;<br>   <span class="hljs-keyword">return</span> username;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™æ ·çš„è¯ï¼Œå¯ä»¥ç»™ä¸€äº›æ¯”è¾ƒéš¾ç†è§£çš„å±æ€§æˆ–è€…æ¥å£ï¼Œå¢åŠ ä¸€äº›é…ç½®ä¿¡æ¯ï¼Œè®©äººæ›´å®¹æ˜“é˜…è¯»ï¼</p><p>ç›¸è¾ƒäºä¼ ç»Ÿçš„Postmanæˆ–Curlæ–¹å¼æµ‹è¯•æ¥å£ï¼Œä½¿ç”¨swaggerç®€ç›´å°±æ˜¯å‚»ç“œå¼æ“ä½œï¼Œä¸éœ€è¦é¢å¤–è¯´æ˜æ–‡æ¡£(å†™å¾—å¥½æœ¬èº«å°±æ˜¯æ–‡æ¡£)è€Œä¸”æ›´ä¸å®¹æ˜“å‡ºé”™ï¼Œåªéœ€è¦å½•å…¥æ•°æ®ç„¶åç‚¹å‡»Executeï¼Œå¦‚æœå†é…åˆè‡ªåŠ¨åŒ–æ¡†æ¶ï¼Œå¯ä»¥è¯´åŸºæœ¬å°±ä¸éœ€è¦äººä¸ºæ“ä½œäº†ã€‚</p><p>Swaggeræ˜¯ä¸ªä¼˜ç§€çš„å·¥å…·ï¼Œç°åœ¨å›½å†…å·²ç»æœ‰å¾ˆå¤šçš„ä¸­å°å‹äº’è”ç½‘å…¬å¸éƒ½åœ¨ä½¿ç”¨å®ƒï¼Œç›¸è¾ƒäºä¼ ç»Ÿçš„è¦å…ˆå‡ºWordæ¥å£æ–‡æ¡£å†æµ‹è¯•çš„æ–¹å¼ï¼Œæ˜¾ç„¶è¿™æ ·ä¹Ÿæ›´ç¬¦åˆç°åœ¨çš„å¿«é€Ÿè¿­ä»£å¼€å‘è¡Œæƒ…ã€‚å½“ç„¶äº†ï¼Œæé†’ä¸‹å¤§å®¶åœ¨æ­£å¼ç¯å¢ƒè¦è®°å¾—å…³é—­Swaggerï¼Œä¸€æ¥å‡ºäºå®‰å…¨è€ƒè™‘äºŒæ¥ä¹Ÿå¯ä»¥èŠ‚çœè¿è¡Œæ—¶å†…å­˜ã€‚</p><h3 id="ä¹ã€æ‰©å±•ï¼šå…¶ä»–çš®è‚¤"><a href="#ä¹ã€æ‰©å±•ï¼šå…¶ä»–çš®è‚¤" class="headerlink" title="ä¹ã€æ‰©å±•ï¼šå…¶ä»–çš®è‚¤"></a>ä¹ã€æ‰©å±•ï¼šå…¶ä»–çš®è‚¤</h3><p>æˆ‘ä»¬å¯ä»¥å¯¼å…¥ä¸åŒçš„åŒ…å®ç°ä¸åŒçš„çš®è‚¤å®šä¹‰ï¼š</p><ol><li><p>é»˜è®¤çš„ <strong>è®¿é—® <a href="http://localhost:8080/swagger-ui/index.html">http://localhost:8080/swagger-ui/index.html</a></strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.springfox<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B013-%E9%A1%B9%E7%9B%AE%E9%9B%86%E6%88%90Swagger/group.png" alt="é»˜è®¤çš®è‚¤"></p></li></ol><ol start="2"><li><p>bootstrap-ui  <strong>è®¿é—® <a href="http://localhost:8080/doc.html">http://localhost:8080/doc.html</a></strong></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;!-- å¼•å…¥swagger-bootstrap-uiåŒ… /doc.html--&gt;<br>&lt;dependency&gt;<br>   &lt;groupId&gt;com.github.xiaoymin&lt;/groupId&gt;<br>   &lt;artifactId&gt;swagger-bootstrap-ui&lt;/artifactId&gt;<br>   &lt;version&gt;1.9.1&lt;/version&gt;<br>&lt;/dependency&gt;<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B013-%E9%A1%B9%E7%9B%AE%E9%9B%86%E6%88%90Swagger/bootstrap.png" alt="bootstrapçš®è‚¤"></p></li></ol><ol start="3"><li><p>Layui-ui  <strong>è®¿é—® <a href="http://localhost:8080/docs.html">http://localhost:8080/docs.html</a></strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å¼•å…¥swagger-ui-layeråŒ… /docs.html--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.caspar-chen<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>swagger-ui-layer<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B013-%E9%A1%B9%E7%9B%AE%E9%9B%86%E6%88%90Swagger/layui.png" alt="layuiçš®è‚¤"></p></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBootç¬”è®°12-æ•´åˆMyBatis</title>
    <link href="/posts/2021/01/10/SpringBoot%E7%AC%94%E8%AE%B012-%E6%95%B4%E5%90%88MyBatis/"/>
    <url>/posts/2021/01/10/SpringBoot%E7%AC%94%E8%AE%B012-%E6%95%B4%E5%90%88MyBatis/</url>
    
    <content type="html"><![CDATA[<h2 id="æ•´åˆMyBatis"><a href="#æ•´åˆMyBatis" class="headerlink" title="æ•´åˆMyBatis"></a>æ•´åˆMyBatis</h2><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="http://mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/">http://mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/</a></p><p>Mavenä»“åº“åœ°å€ï¼š<a href="https://mvnrepository.com/artifact/org.mybatis.spring.boot/mybatis-spring-boot-starter/2.1.1">https://mvnrepository.com/artifact/org.mybatis.spring.boot/mybatis-spring-boot-starter/2.1.1</a></p><h3 id="ä¸€ã€æ•´åˆæµ‹è¯•"><a href="#ä¸€ã€æ•´åˆæµ‹è¯•" class="headerlink" title="ä¸€ã€æ•´åˆæµ‹è¯•"></a>ä¸€ã€æ•´åˆæµ‹è¯•</h3><ol><li><p>å¯¼å…¥ MyBatis æ‰€éœ€è¦çš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯å’Œmybatisé…ç½®</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-meta">spring.datasource.username</span>=<span class="hljs-string">root</span><br><span class="hljs-meta">spring.datasource.password</span>=<span class="hljs-string">zuiweizhiming666</span><br><span class="hljs-meta">spring.datasource.driver-class-name</span>=<span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br><span class="hljs-meta">spring.datasource.url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/mybatis?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai</span><br><br><span class="hljs-comment"># æ•´åˆmybatis</span><br><span class="hljs-meta">mybatis.type-aliases-package</span>=<span class="hljs-string">com.atrox.pojo</span><br><span class="hljs-meta">mybatis.mapper-locations</span>=<span class="hljs-string">classpath:mybatis/mapper/*.xml</span><br></code></pre></td></tr></table></figure></li><li><p>æµ‹è¯•æ•°æ®åº“æ˜¯å¦è¿æ¥æˆåŠŸ</p></li><li><p>åˆ›å»ºå®ä½“ç±»User</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.atrox.pojo;<br><br><span class="hljs-keyword">import</span> lombok.AllArgsConstructor;<br><span class="hljs-keyword">import</span> lombok.Data;<br><span class="hljs-keyword">import</span> lombok.NoArgsConstructor;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@NoArgsConstructor</span><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String pwd;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>åˆ›å»ºmapperç›®å½•ä»¥åŠå¯¹åº”çš„Mapperæ¥å£UserMapper</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * @Mapperæ³¨è§£è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªmybatisçš„mapperç±»</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Repository</span><br><span class="hljs-meta">@Mapper</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserMapper</span> </span>&#123;<br><br>  <span class="hljs-function">List&lt;User&gt; <span class="hljs-title">queryUserList</span><span class="hljs-params">()</span></span>;<br>  <span class="hljs-function">User <span class="hljs-title">queryUserById</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span></span>;<br>  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">addUser</span><span class="hljs-params">(User user)</span></span>;<br>  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">updateUser</span><span class="hljs-params">(User user)</span></span>;<br>  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">deleteUser</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span></span>;<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>åœ¨resourcesç›®åˆ›å»ºmybatis/mapperç›®å½•ï¼Œå†åœ¨æ­¤ç›®å½•ä¸‹åˆ›å»ºå¯¹åº”çš„Mapperæ˜ å°„æ–‡ä»¶UserMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span></span><br><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.atrox.mapper.UserMapper&quot;</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;queryUserList&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span><br>    select * from user;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;queryUserById&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span><br>    select * from user where id = #&#123;id&#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;addUser&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span><br>    insert into user (id,name,pwd) values (#&#123;id&#125;,#&#123;name&#125;,#&#123;pwd&#125;)<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;updateUser&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span><br>    update user set name = #&#123;name&#125;,pwd=#&#123;pwd&#125; where id = #&#123;id&#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;deleteUser&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;int&quot;</span>&gt;</span><br>    delete from user where id = #&#123;id&#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™Controllerå±‚è¿›è¡Œæµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserController</span> </span>&#123;<br>  <span class="hljs-meta">@Autowired</span><br>  <span class="hljs-keyword">private</span> UserMapper userMapper;<br><br>  <span class="hljs-meta">@GetMapping(&quot;/queryList&quot;)</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">queryUserList</span><span class="hljs-params">()</span> </span>&#123;<br>    List&lt;User&gt; userList = userMapper.queryUserList();<br>    <span class="hljs-keyword">for</span> (User user : userList) &#123;<br>      System.out.println(user);<br>    &#125;<br>    <span class="hljs-keyword">return</span> userList;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å¯åŠ¨é¡¹ç›®è®¿é—®ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B012-%E6%95%B4%E5%90%88MyBatis/querylist.png" alt="è®¿é—®ç»“æœ"></p></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBootç¬”è®°11-æ•´åˆDruidæ•°æ®æº</title>
    <link href="/posts/2021/01/09/SpringBoot%E7%AC%94%E8%AE%B011-%E6%95%B4%E5%90%88Druid%E6%95%B0%E6%8D%AE%E6%BA%90/"/>
    <url>/posts/2021/01/09/SpringBoot%E7%AC%94%E8%AE%B011-%E6%95%B4%E5%90%88Druid%E6%95%B0%E6%8D%AE%E6%BA%90/</url>
    
    <content type="html"><![CDATA[<h2 id="é›†æˆDruid"><a href="#é›†æˆDruid" class="headerlink" title="é›†æˆDruid"></a>é›†æˆDruid</h2><h3 id="ä¸€ã€Druidç®€ä»‹"><a href="#ä¸€ã€Druidç®€ä»‹" class="headerlink" title="ä¸€ã€Druidç®€ä»‹"></a>ä¸€ã€Druidç®€ä»‹</h3><p>Javaç¨‹åºå¾ˆå¤§ä¸€éƒ¨åˆ†è¦æ“ä½œæ•°æ®åº“ï¼Œä¸ºäº†æé«˜å¿ƒæ¢—æ“ä½œæ•°æ®åº“çš„åŒæ—¶ï¼Œæœ‰ä¸å¾—ä¸ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ã€‚</p><p>Druidæ˜¯é˜¿é‡Œå·´å·´å¼€æºå¹³å°ä¸Šä¸€ä¸ªæ•°æ®åº“è¿æ¥æ± å®ç°ï¼Œç»“åˆäº†C3P0ã€DNCPç­‰DBæ± çš„ä¼˜ç‚¹ï¼ŒåŒæ—¶åŠ å…¥äº†æ—¥å¿—ç›‘æ§ã€‚</p><p>Druidå¯ä»¥å¾ˆå¥½åœ°ç›‘æ§DBæ± è¿æ¥å’ŒSQLæ‰§è¡Œæƒ…å†µï¼Œå¤©ç”Ÿå°±æ˜¯é’ˆå¯¹ç›‘æ§è€Œç”Ÿçš„DBè¿æ¥æ± ã€‚</p><p>Druidå·²ç»åœ¨é˜¿é‡Œå·´å·´éƒ¨ç½²äº†è¶…è¿‡600ä¸ªåº”ç”¨ï¼Œç»è¿‡ä¸€å¹´å¤šç”Ÿäº§ç¯å¢ƒå¤§è§„æ¨¡éƒ¨ç½²çš„ä¸¥è‹›è€ƒéªŒã€‚</p><p>Spring Boot 2.0 ä»¥ä¸Šé»˜è®¤ä½¿ç”¨ Hikari æ•°æ®æºï¼Œå¯ä»¥è¯´ Hikari ä¸ Driud éƒ½æ˜¯å½“å‰ Java Web ä¸Šæœ€ä¼˜ç§€çš„æ•°æ®æºï¼Œæˆ‘ä»¬æ¥é‡ç‚¹ä»‹ç» Spring Boot å¦‚ä½•é›†æˆ Druid æ•°æ®æºï¼Œå¦‚ä½•å®ç°æ•°æ®åº“ç›‘æ§ã€‚</p><p>Githubåœ°å€ï¼š<a href="https://github.com/alibaba/druid/">https://github.com/alibaba/druid/</a></p><p><strong>com.alibaba.druid.pool.DruidDataSourceåŸºæœ¬é…ç½®å‚æ•°å¦‚ä¸‹ï¼š</strong></p><table><thead><tr><th><strong>é…ç½®</strong></th><th><strong>ç¼ºçœå€¼</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>name</td><td></td><td>é…ç½®è¿™ä¸ªå±æ€§çš„æ„ä¹‰åœ¨äºï¼Œå¦‚æœå­˜åœ¨å¤šä¸ªæ•°æ®æºï¼Œç›‘æ§çš„æ—¶å€™å¯ä»¥é€šè¿‡åå­—æ¥åŒºåˆ†å¼€æ¥ã€‚ å¦‚æœæ²¡æœ‰é…ç½®ï¼Œå°†ä¼šç”Ÿæˆä¸€ä¸ªåå­—ï¼Œæ ¼å¼æ˜¯ï¼šâ€œDataSource-â€ + System.identityHashCode(this)</td></tr><tr><td>jdbcUrl</td><td></td><td>è¿æ¥æ•°æ®åº“çš„urlï¼Œä¸åŒæ•°æ®åº“ä¸ä¸€æ ·ã€‚ä¾‹å¦‚ï¼š mysql : jdbc:mysql://10.20.153.104:3306/druid2 oracle : jdbc:oracle:thin:@10.20.149.85:1521:ocnauto</td></tr><tr><td>username</td><td></td><td>è¿æ¥æ•°æ®åº“çš„ç”¨æˆ·å</td></tr><tr><td>password</td><td></td><td>è¿æ¥æ•°æ®åº“çš„å¯†ç ã€‚å¦‚æœä½ ä¸å¸Œæœ›å¯†ç ç›´æ¥å†™åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ConfigFilterã€‚è¯¦ç»†çœ‹è¿™é‡Œï¼š<a href="https://github.com/alibaba/druid/wiki/%E4%BD%BF%E7%94%A8ConfigFilter">https://github.com/alibaba/druid/wiki/%E4%BD%BF%E7%94%A8ConfigFilter</a></td></tr><tr><td>driverClassName</td><td>æ ¹æ®urlè‡ªåŠ¨è¯†åˆ«</td><td>è¿™ä¸€é¡¹å¯é…å¯ä¸é…ï¼Œå¦‚æœä¸é…ç½®druidä¼šæ ¹æ®urlè‡ªåŠ¨è¯†åˆ«dbTypeï¼Œç„¶åé€‰æ‹©ç›¸åº”çš„driverClassName(å»ºè®®é…ç½®ä¸‹)</td></tr><tr><td>initialSize</td><td>0</td><td>åˆå§‹åŒ–æ—¶å»ºç«‹ç‰©ç†è¿æ¥çš„ä¸ªæ•°ã€‚åˆå§‹åŒ–å‘ç”Ÿåœ¨æ˜¾ç¤ºè°ƒç”¨initæ–¹æ³•ï¼Œæˆ–è€…ç¬¬ä¸€æ¬¡getConnectionæ—¶</td></tr><tr><td>maxActive</td><td>8</td><td>æœ€å¤§è¿æ¥æ± æ•°é‡</td></tr><tr><td>maxIdle</td><td>8</td><td>å·²ç»ä¸å†ä½¿ç”¨ï¼Œé…ç½®äº†ä¹Ÿæ²¡æ•ˆæœ</td></tr><tr><td>minIdle</td><td></td><td>æœ€å°è¿æ¥æ± æ•°é‡</td></tr><tr><td>maxWait</td><td></td><td>è·å–è¿æ¥æ—¶æœ€å¤§ç­‰å¾…æ—¶é—´ï¼Œå•ä½æ¯«ç§’ã€‚é…ç½®äº†maxWaitä¹‹åï¼Œç¼ºçœå¯ç”¨å…¬å¹³é”ï¼Œå¹¶å‘æ•ˆç‡ä¼šæœ‰æ‰€ä¸‹é™ï¼Œå¦‚æœéœ€è¦å¯ä»¥é€šè¿‡é…ç½®useUnfairLockå±æ€§ä¸ºtrueä½¿ç”¨éå…¬å¹³é”ã€‚</td></tr><tr><td>poolPreparedStatements</td><td>false</td><td>æ˜¯å¦ç¼“å­˜preparedStatementï¼Œä¹Ÿå°±æ˜¯PSCacheã€‚PSCacheå¯¹æ”¯æŒæ¸¸æ ‡çš„æ•°æ®åº“æ€§èƒ½æå‡å·¨å¤§ï¼Œæ¯”å¦‚è¯´oracleã€‚åœ¨mysqlä¸‹å»ºè®®å…³é—­ã€‚</td></tr><tr><td>maxOpenPreparedStatements</td><td>-1</td><td>è¦å¯ç”¨PSCacheï¼Œå¿…é¡»é…ç½®å¤§äº0ï¼Œå½“å¤§äº0æ—¶ï¼ŒpoolPreparedStatementsè‡ªåŠ¨è§¦å‘ä¿®æ”¹ä¸ºtrueã€‚åœ¨Druidä¸­ï¼Œä¸ä¼šå­˜åœ¨Oracleä¸‹PSCacheå ç”¨å†…å­˜è¿‡å¤šçš„é—®é¢˜ï¼Œå¯ä»¥æŠŠè¿™ä¸ªæ•°å€¼é…ç½®å¤§ä¸€äº›ï¼Œæ¯”å¦‚è¯´100</td></tr><tr><td>validationQuery</td><td></td><td>ç”¨æ¥æ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆçš„sqlï¼Œè¦æ±‚æ˜¯ä¸€ä¸ªæŸ¥è¯¢è¯­å¥ã€‚å¦‚æœvalidationQueryä¸ºnullï¼ŒtestOnBorrowã€testOnReturnã€testWhileIdleéƒ½ä¸ä¼šå…¶ä½œç”¨ã€‚</td></tr><tr><td>validationQueryTimeout</td><td></td><td>å•ä½:ç§’ï¼Œæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆçš„è¶…æ—¶æ—¶é—´ã€‚åº•å±‚è°ƒç”¨jdbc Statementå¯¹è±¡çš„void setQueryTimeout(int seconds)æ–¹æ³•</td></tr><tr><td>testOnBorrow</td><td>true</td><td>ç”³è¯·è¿æ¥æ—¶æ‰§è¡ŒvalidationQueryæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆï¼Œåšäº†è¿™ä¸ªé…ç½®ä¼šé™ä½æ€§èƒ½</td></tr><tr><td>testOnReturn</td><td>false</td><td>å½’è¿˜è¿æ¥æ—¶æ‰§è¡ŒvalidationQueryæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆï¼Œåšäº†è¿™ä¸ªé…ç½®ä¼šé™ä½æ€§èƒ½</td></tr><tr><td>testWhileIdle</td><td>false</td><td>å»ºè®®é…ç½®ä¸ºtrueï¼Œä¸å½±å“æ€§èƒ½ï¼Œå¹¶ä¸”ä¿è¯å®‰å…¨æ€§ã€‚ç”³è¯·è¿æ¥çš„æ—¶å€™æ£€æµ‹ï¼Œå¦‚æœç©ºé—²æ—¶é—´å¤§äºtimeBetweenEvictionRunsMillisï¼Œæ‰§è¡ŒvalidationQueryæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆ</td></tr><tr><td>timeBetweenEvictionRunsMillis</td><td>1åˆ†é’Ÿ ( 1.0.14 )</td><td>æœ‰ä¸¤ä¸ªå«ä¹‰ï¼š 1) Destroyçº¿ç¨‹ä¼šæ£€æµ‹è¿æ¥çš„é—´éš”æ—¶é—´ 2) testWhileIdleçš„åˆ¤æ–­ä¾æ®ï¼Œè¯¦ç»†çœ‹testWhileIdleå±æ€§çš„è¯´æ˜</td></tr><tr><td>numTestsPerEvictionRun</td><td></td><td>ä¸å†ä½¿ç”¨ï¼Œä¸€ä¸ªDruidDataSourceåªæ”¯æŒä¸€ä¸ªEvictionRun</td></tr><tr><td>minEvictableIdleTimeMillis</td><td>30åˆ†é’Ÿ ( 1.0.14 )</td><td>è¿æ¥ä¿æŒç©ºé—²è€Œä¸è¢«é©±é€çš„æœ€é•¿æ—¶é—´</td></tr><tr><td>connectionInitSqls</td><td></td><td>ç‰©ç†è¿æ¥åˆå§‹åŒ–çš„æ—¶å€™æ‰§è¡Œçš„sql</td></tr><tr><td>exceptionSorter</td><td>æ ¹æ®dbTypeè‡ªåŠ¨è¯†åˆ«</td><td>å½“æ•°æ®åº“æŠ›å‡ºä¸€äº›ä¸å¯æ¢å¤çš„å¼‚å¸¸æ—¶ï¼ŒæŠ›å¼ƒè¿æ¥</td></tr><tr><td>filters</td><td></td><td>å±æ€§ç±»å‹æ˜¯å­—ç¬¦ä¸²ï¼Œé€šè¿‡åˆ«åçš„æ–¹å¼é…ç½®æ‰©å±•æ’ä»¶ï¼Œå¸¸ç”¨çš„æ’ä»¶æœ‰ï¼š ç›‘æ§ç»Ÿè®¡ç”¨çš„filter:statæ—¥å¿—ç”¨çš„filter:log4jé˜²å¾¡sqlæ³¨å…¥çš„filter:wall</td></tr><tr><td>proxyFilters</td><td></td><td>ç±»å‹æ˜¯List&lt;com.alibaba.druid.filter.Filter&gt;ï¼Œå¦‚æœåŒæ—¶é…ç½®äº†filterså’ŒproxyFiltersï¼Œæ˜¯ç»„åˆå…³ç³»ï¼Œå¹¶éæ›¿æ¢å…³ç³»</td></tr></tbody></table><h3 id="äºŒã€é…ç½®æ•°æ®æº"><a href="#äºŒã€é…ç½®æ•°æ®æº" class="headerlink" title="äºŒã€é…ç½®æ•°æ®æº"></a>äºŒã€é…ç½®æ•°æ®æº</h3><ol><li><p>æ·»åŠ ä¸ŠDruidæ•°æ®æºä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--Druid--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>åˆ‡æ¢æ•°æ®æºï¼šä¹‹å‰å·²ç»è¯´è¿‡ Spring Boot 2.0 ä»¥ä¸Šé»˜è®¤ä½¿ç”¨ com.zaxxer.hikari.HikariDataSource æ•°æ®æºï¼Œä½†å¯ä»¥ é€šè¿‡ spring.datasource.type æŒ‡å®šæ•°æ®æºã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/mybatis?useUnicode=true&amp;characterEndoing=utf-8&amp;serverTimezone=Asia/Shanghai</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">zuiweizhiming666</span><br>    <span class="hljs-attr">type:</span> <span class="hljs-string">com.alibaba.druid.pool.DruidDataSource</span><br></code></pre></td></tr></table></figure></li><li><p>æ•°æ®æºåˆ‡æ¢ä¹‹åï¼Œåœ¨æµ‹è¯•ç±»ä¸­æ³¨å…¥ DataSourceï¼Œç„¶åè·å–åˆ°å®ƒï¼Œè¾“å‡ºä¸€çœ‹ä¾¿çŸ¥æ˜¯å¦æˆåŠŸåˆ‡æ¢ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">com</span>.<span class="hljs-title">alibaba</span>.<span class="hljs-title">druid</span>.<span class="hljs-title">pool</span>.<span class="hljs-title">DruidDataSource</span></span><br></code></pre></td></tr></table></figure></li><li><p>åˆ‡æ¢æˆåŠŸï¼æ—¢ç„¶åˆ‡æ¢æˆåŠŸï¼Œå°±å¯ä»¥è®¾ç½®æ•°æ®æºè¿æ¥åˆå§‹åŒ–å¤§å°ã€æœ€å¤§è¿æ¥æ•°ã€ç­‰å¾…æ—¶é—´ã€æœ€å°è¿æ¥æ•° ç­‰è®¾ç½®é¡¹ï¼›å¯ä»¥æŸ¥çœ‹æºç </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/mybatis?useUnicode=true&amp;characterEndoing=utf-8&amp;serverTimezone=Asia/Shanghai</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">zuiweizhiming666</span><br>    <span class="hljs-attr">type:</span> <span class="hljs-string">com.alibaba.druid.pool.DruidDataSource</span><br><br>    <span class="hljs-comment">#Spring Boot é»˜è®¤æ˜¯ä¸æ³¨å…¥è¿™äº›å±æ€§å€¼çš„ï¼Œéœ€è¦è‡ªå·±ç»‘å®š</span><br>    <span class="hljs-comment">#druid æ•°æ®æºä¸“æœ‰é…ç½®</span><br>    <span class="hljs-attr">initialSize:</span> <span class="hljs-number">5</span><br>    <span class="hljs-attr">minIdle:</span> <span class="hljs-number">5</span><br>    <span class="hljs-attr">maxActive:</span> <span class="hljs-number">20</span><br>    <span class="hljs-attr">maxWait:</span> <span class="hljs-number">60000</span><br>    <span class="hljs-attr">timeBetweenEvictionRunsMillis:</span> <span class="hljs-number">60000</span><br>    <span class="hljs-attr">minEvictableIdleTimeMillis:</span> <span class="hljs-number">300000</span><br>    <span class="hljs-attr">validationQuery:</span> <span class="hljs-string">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-string">FROM</span> <span class="hljs-string">DUAL</span><br>    <span class="hljs-attr">testWhileIdle:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">testOnBorrow:</span> <span class="hljs-literal">false</span><br>    <span class="hljs-attr">testOnReturn:</span> <span class="hljs-literal">false</span><br>    <span class="hljs-attr">poolPreparedStatements:</span> <span class="hljs-literal">true</span><br><br>    <span class="hljs-comment">#é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„filtersï¼Œstat:ç›‘æ§ç»Ÿè®¡ã€log4jï¼šæ—¥å¿—è®°å½•ã€wallï¼šé˜²å¾¡sqlæ³¨å…¥</span><br>    <span class="hljs-comment">#å¦‚æœå…è®¸æ—¶æŠ¥é”™  java.lang.ClassNotFoundException: org.apache.log4j.Priority</span><br>    <span class="hljs-comment">#åˆ™å¯¼å…¥ log4j ä¾èµ–å³å¯ï¼ŒMaven åœ°å€ï¼šhttps://mvnrepository.com/artifact/log4j/log4j</span><br>    <span class="hljs-attr">filters:</span> <span class="hljs-string">stat,wall,log4j</span><br>    <span class="hljs-attr">maxPoolPreparedStatementPerConnectionSize:</span> <span class="hljs-number">20</span><br>    <span class="hljs-attr">useGlobalDataSourceStat:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">connectionProperties:</span> <span class="hljs-string">druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500</span><br></code></pre></td></tr></table></figure></li><li><p>å¯¼å…¥log4jçš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--log4j--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.17<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>ç°åœ¨éœ€è¦ç¨‹åºå‘˜è‡ªå·±ä¸º DruidDataSource ç»‘å®šå…¨å±€é…ç½®æ–‡ä»¶ä¸­çš„å‚æ•°ï¼Œå†æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼Œè€Œä¸å†ä½¿ç”¨ Spring Boot çš„è‡ªåŠ¨ç”Ÿæˆäº†ï¼›æˆ‘ä»¬éœ€è¦ è‡ªå·±æ·»åŠ  DruidDataSource ç»„ä»¶åˆ°å®¹å™¨ä¸­ï¼Œå¹¶ç»‘å®šå±æ€§ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DruidConfig</span> </span>&#123;<br><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">       å°†è‡ªå®šä¹‰çš„ Druidæ•°æ®æºæ·»åŠ åˆ°å®¹å™¨ä¸­ï¼Œä¸å†è®© Spring Boot è‡ªåŠ¨åˆ›å»º</span><br><span class="hljs-comment">       ç»‘å®šå…¨å±€é…ç½®æ–‡ä»¶ä¸­çš„ druid æ•°æ®æºå±æ€§åˆ° com.alibaba.druid.pool.DruidDataSourceä»è€Œè®©å®ƒä»¬ç”Ÿæ•ˆ</span><br><span class="hljs-comment">       @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)ï¼šä½œç”¨å°±æ˜¯å°† å…¨å±€é…ç½®æ–‡ä»¶ä¸­</span><br><span class="hljs-comment">       å‰ç¼€ä¸º spring.datasourceçš„å±æ€§å€¼æ³¨å…¥åˆ° com.alibaba.druid.pool.DruidDataSource çš„åŒåå‚æ•°ä¸­</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> DataSource <span class="hljs-title">druidDataSource</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> DruidDataSource();<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure></li></ol><h3 id="ä¸‰ã€é…ç½®Druidæ•°æ®æºç›‘æ§"><a href="#ä¸‰ã€é…ç½®Druidæ•°æ®æºç›‘æ§" class="headerlink" title="ä¸‰ã€é…ç½®Druidæ•°æ®æºç›‘æ§"></a>ä¸‰ã€é…ç½®Druidæ•°æ®æºç›‘æ§</h3><p>Druid æ•°æ®æºå…·æœ‰ç›‘æ§çš„åŠŸèƒ½ï¼Œå¹¶æä¾›äº†ä¸€ä¸ª web ç•Œé¢æ–¹ä¾¿ç”¨æˆ·æŸ¥çœ‹ï¼Œç±»ä¼¼å®‰è£… è·¯ç”±å™¨ æ—¶ï¼Œäººå®¶ä¹Ÿæä¾›äº†ä¸€ä¸ªé»˜è®¤çš„ web é¡µé¢ã€‚</p><p>æ‰€ä»¥ç¬¬ä¸€æ­¥éœ€è¦è®¾ç½® Druid çš„åå°ç®¡ç†é¡µé¢ï¼Œæ¯”å¦‚ ç™»å½•è´¦å·ã€å¯†ç  ç­‰ï¼›é…ç½®åå°ç®¡ç†ï¼›</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// åå°ç›‘æ§åŠŸèƒ½</span><br><span class="hljs-comment">// å› ä¸ºSpringbootå†…ç½®äº†servletå®¹å™¨ï¼Œæ‰€ä»¥æ²¡æœ‰web.xmlï¼Œæ›¿æ¢æ–¹æ³•ï¼šServletRegistrationBean</span><br><span class="hljs-meta">@Bean</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> ServletRegistrationBean <span class="hljs-title">statViewServlet</span><span class="hljs-params">()</span> </span>&#123;<br>    ServletRegistrationBean&lt;StatViewServlet&gt; bean = <span class="hljs-keyword">new</span> ServletRegistrationBean&lt;&gt;(<span class="hljs-keyword">new</span> StatViewServlet(), <span class="hljs-string">&quot;/druid/*&quot;</span>);<br>    <span class="hljs-comment">// åå°éœ€è¦æœ‰äººç™»é™†ï¼Œè´¦å·å¯†ç é…ç½®</span><br>    HashMap&lt;String, String&gt; initParameters = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>    <span class="hljs-comment">// æ·»åŠ é…ç½®</span><br>    <span class="hljs-comment">// ç™»é™†keyæ˜¯å›ºå®šçš„loginUsernameå’ŒloginPassword</span><br>    initParameters.put(<span class="hljs-string">&quot;loginUsername&quot;</span>, <span class="hljs-string">&quot;admin&quot;</span>);<br>    initParameters.put(<span class="hljs-string">&quot;loginPassword&quot;</span>, <span class="hljs-string">&quot;123456&quot;</span>);<br>    <span class="hljs-comment">// å…è®¸è°å¯ä»¥è®¿é—® localhost æˆ–è€… æŸä¸ªå…·ä½“çš„äºº æˆ–è€…ç©ºå­—ç¬¦ä¸²è¡¨ç¤ºä»»ä½•äººå¯ä»¥è®¿é—®</span><br>    initParameters.put(<span class="hljs-string">&quot;allow&quot;</span>,<span class="hljs-string">&quot;&quot;</span>);<br>    <span class="hljs-comment">// ç¦æ­¢è°å¯ä»¥è®¿é—® initParameters.put(&quot;qiaowei&quot;,&quot;192.168.11.123&quot;);</span><br>    <span class="hljs-comment">// è®¾ç½®åˆå§‹åŒ–å‚æ•°</span><br>    bean.setInitParameters(initParameters);<br>    <span class="hljs-keyword">return</span> bean;<br>&#125;<br></code></pre></td></tr></table></figure><p>é…ç½®å®Œæ¯•åï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©è®¿é—® ï¼š<a href="http://localhost:8080/druid/login.html">http://localhost:8080/druid/login.html</a></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B011-%E6%95%B4%E5%90%88Druid%E6%95%B0%E6%8D%AE%E6%BA%90/druid_login.png" alt="druidåå°"></p><p>è¿›å…¥ä¹‹å</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B011-%E6%95%B4%E5%90%88Druid%E6%95%B0%E6%8D%AE%E6%BA%90/druid_admin.png" alt="druidç›‘æ§"></p><h3 id="å››ã€é…ç½®Druid-Web-ç›‘æ§-filter-è¿‡æ»¤å™¨"><a href="#å››ã€é…ç½®Druid-Web-ç›‘æ§-filter-è¿‡æ»¤å™¨" class="headerlink" title="å››ã€é…ç½®Druid Web ç›‘æ§ filter è¿‡æ»¤å™¨"></a>å››ã€é…ç½®Druid Web ç›‘æ§ filter è¿‡æ»¤å™¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// è¿‡æ»¤å™¨</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> FilterRegistrationBean <span class="hljs-title">webStatFilter</span><span class="hljs-params">()</span> </span>&#123;<br>    FilterRegistrationBean bean = <span class="hljs-keyword">new</span> FilterRegistrationBean();<br>    bean.setFilter(<span class="hljs-keyword">new</span> WebStatFilter());<br>    <span class="hljs-comment">// å¯ä»¥è¿‡æ»¤å“ªäº›è¯·æ±‚å‘¢ï¼Ÿ</span><br>    HashMap&lt;String, String&gt; initParameters = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>    <span class="hljs-comment">// å“ªäº›ä¸œè¥¿ä¸è¿›è¡Œç»Ÿè®¡</span><br>    initParameters.put(<span class="hljs-string">&quot;exclusions&quot;</span>, <span class="hljs-string">&quot;*.js,*.css,/druid/*&quot;</span>);<br>    bean.setInitParameters(initParameters);<br>    <span class="hljs-keyword">return</span> bean;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBootç¬”è®°10-æ•´åˆJDBC</title>
    <link href="/posts/2021/01/09/SpringBoot%E7%AC%94%E8%AE%B010-%E6%95%B4%E5%90%88JDBC/"/>
    <url>/posts/2021/01/09/SpringBoot%E7%AC%94%E8%AE%B010-%E6%95%B4%E5%90%88JDBC/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€SpringDataç®€ä»‹"><a href="#ä¸€ã€SpringDataç®€ä»‹" class="headerlink" title="ä¸€ã€SpringDataç®€ä»‹"></a>ä¸€ã€SpringDataç®€ä»‹</h3><p>å¯¹äºæ•°æ®è®¿é—®å±‚ï¼Œæ— è®ºæ˜¯SQLï¼ˆå…³ç³»å‹æ•°æ®åº“ï¼‰è¿˜æ˜¯NOSQLï¼ˆéå…³ç³»å‹æ•°æ®åº“ï¼‰ï¼ŒSpringBoot åº•å±‚éƒ½æ˜¯é‡‡ç”¨ Sping Data çš„æ–¹å¼ç»Ÿä¸€å¤„ç†ã€‚</p><p>SpringBoot åº•å±‚éƒ½æ˜¯é‡‡ç”¨ Spring Data çš„æ–¹å¼è¿›è¡Œç»Ÿä¸€å¤„ç†å„ç§æ•°æ®åº“ï¼ŒSpring Data ä¹Ÿæ˜¯ Spring ä¸­ä¸ Spring Bootã€Spring Cloud ç­‰é½åçš„çŸ¥åé¡¹ç›®ã€‚</p><p>Spring Data å®˜ç½‘ï¼š<a href="https://spring.io/projects/spring-data">https://spring.io/projects/spring-data</a></p><p>æ•°æ®åº“ç›¸å…³çš„å¯åŠ¨å™¨ï¼šå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š</p><p><a href="https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#using-boot-starter">https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#using-boot-starter</a></p><h3 id="äºŒã€æ•´åˆJDBC"><a href="#äºŒã€æ•´åˆJDBC" class="headerlink" title="äºŒã€æ•´åˆJDBC"></a>äºŒã€æ•´åˆJDBC</h3><h4 id="1-åˆ›å»ºæµ‹è¯•é¡¹ç›®æµ‹è¯•æ•°æ®æº"><a href="#1-åˆ›å»ºæµ‹è¯•é¡¹ç›®æµ‹è¯•æ•°æ®æº" class="headerlink" title="1.  åˆ›å»ºæµ‹è¯•é¡¹ç›®æµ‹è¯•æ•°æ®æº"></a>1.  åˆ›å»ºæµ‹è¯•é¡¹ç›®æµ‹è¯•æ•°æ®æº</h4><ol><li><p>æˆ‘ä»¬å»æ–°å»ºä¸€ä¸ªé¡¹ç›®æµ‹è¯•ï¼šspringboot-data-jdbcï¼Œå¼•å…¥ç›¸å…³çš„åŸºç¡€æ¨¡å—ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B010-%E6%95%B4%E5%90%88JDBC/dep.png" alt="é€‰æ‹©ä¾èµ–"></p></li><li><p>é¡¹ç›®æ­å»ºä¹‹åï¼Œå‘ç°SpringBootè‡ªåŠ¨å¸®æˆ‘ä»¬å¯¼å…¥äº†å¦‚ä¸‹çš„å¯åŠ¨å™¨:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--JDBC--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!--MySQL--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™yamlé…ç½®æ–‡ä»¶application.ymlè¿æ¥æ•°æ®åº“ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/mybatis?useUnicode=true&amp;characterEndoing=utf-8&amp;serverTimezone=Asia/Shanghai</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">zuiweizhiming666</span><br></code></pre></td></tr></table></figure></li><li><p>é…ç½®å®Œè¿™äº›ç¯å¢ƒï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†ï¼Œå› ä¸ºSpringBootå·²ç»é»˜è®¤å¸®æˆ‘ä»¬è¿›è¡Œäº†è‡ªåŠ¨é…ç½®ï¼›å»æµ‹è¯•ç±»æµ‹è¯•ä¸€ä¸‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">contextLoads</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException </span>&#123;<br><br>    <span class="hljs-comment">// æŸ¥çœ‹ä¸€ä¸‹é»˜è®¤çš„æ•°æ®æºï¼šcom.zaxxer.hikari.HikariDataSource</span><br>    System.out.println(dataSource.getClass());<br>    <span class="hljs-comment">// è·å¾—æ•°æ®åº“è¿æ¥</span><br>    Connection connection = dataSource.getConnection();<br>    System.out.println(connection);<br>    <span class="hljs-comment">// xxxx Template: SpringBootå·²ç»é…ç½®å¥½æ¨¡æ¿beanï¼Œæ‹¿æ¥å³ç”¨</span><br>    <span class="hljs-comment">// jdbc/redis Template</span><br><br>    <span class="hljs-comment">// å…³é—­æ•°æ®åº“è¿æ¥</span><br>    connection.close();<br><br>&#125;<br></code></pre></td></tr></table></figure><p>ç»“æœå¯ä»¥çœ‹åˆ°ï¼ŒSpringBooté»˜è®¤ç»™æˆ‘ä»¬é…ç½®çš„æ•°æ®æºä¸ºï¼šcom.zaxxer.hikari.HikariDataSourceã€‚</p><p>æˆ‘ä»¬æ¥å…¨å±€æœç´¢ä¸€ä¸‹ï¼Œæ‰¾åˆ°æ•°æ®æºçš„æ‰€æœ‰è‡ªåŠ¨é…ç½®éƒ½åœ¨ï¼š<code>DataSourceAutoConfiguration</code>æ–‡ä»¶ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Import(&#123; DataSourceConfiguration.Hikari.class, DataSourceConfiguration.Tomcat.class,</span><br><span class="hljs-meta">         DataSourceConfiguration.Dbcp2.class, DataSourceConfiguration.OracleUcp.class,</span><br><span class="hljs-meta">         DataSourceConfiguration.Generic.class, DataSourceJmxConfiguration.class &#125;)</span><br></code></pre></td></tr></table></figure><p>è¿™äº›å¯¼å…¥çš„ç±»éƒ½åœ¨<code>DataSourceConfiguration</code>é…ç½®ç±»ä¸‹ï¼Œå¯ä»¥çœ‹å‡ºSpringBooté»˜è®¤ä½¿ç”¨Hikariä½œä¸ºæ•°æ®æºã€‚</p><p><strong>HikariDataSource å·ç§° Java WEB å½“å‰é€Ÿåº¦æœ€å¿«çš„æ•°æ®æºï¼Œç›¸æ¯”äºä¼ ç»Ÿçš„ C3P0 ã€DBCPã€Tomcat jdbc ç­‰è¿æ¥æ± æ›´åŠ ä¼˜ç§€ï¼›</strong></p><p><strong>å¯ä»¥ä½¿ç”¨ spring.datasource.type æŒ‡å®šè‡ªå®šä¹‰çš„æ•°æ®æºç±»å‹ï¼Œå€¼ä¸º è¦ä½¿ç”¨çš„è¿æ¥æ± å®ç°çš„å®Œå…¨é™å®šåã€‚</strong></p><p>å…³äºæ•°æ®æºæˆ‘ä»¬å¹¶ä¸åšä»‹ç»ï¼Œæœ‰äº†æ•°æ®åº“è¿æ¥ï¼Œæ˜¾ç„¶å°±å¯ä»¥ CRUD æ“ä½œæ•°æ®åº“äº†ã€‚ä½†æ˜¯æˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸€ä¸ªå¯¹è±¡ <strong>JdbcTemplate</strong></p></li></ol><h3 id="2-JDBCTemplate"><a href="#2-JDBCTemplate" class="headerlink" title="2. JDBCTemplate"></a>2. JDBCTemplate</h3><ol><li><p>æœ‰äº†æ•°æ®æºï¼ˆcom.zaxxer.hikari.HikariDataSourceï¼‰ï¼Œç„¶åå¯ä»¥æ‹¿åˆ°æ•°æ®åº“è¿æ¥ï¼ˆjava.sql.Connectionï¼‰ï¼Œæœ‰äº†è¿æ¥ï¼Œå°±å¯ä»¥ä½¿ç”¨åŸç”Ÿçš„JDBCè¯­å¥æ¥æ“ä½œæ•°æ®åº“</p></li><li><p>å³ä½¿ä¸é€‚ç”¨ç¬¬ä¸‰æ–¹æ•°æ®åº“æ“ä½œæ¡†æ¶ï¼Œå¦‚MyBatisç­‰ï¼ŒSpringæœ¬èº«ä¹Ÿå¯¹åŸç”Ÿçš„JDBCåšäº†è½»é‡çº§çš„é¥­å‘¢è¯¥åº„ï¼Œå³JdbcTemplateã€‚</p></li><li><p>æ•°æ®åº“æ“ä½œçš„æ‰€æœ‰CRUDæ–¹æ³•éƒ½åœ¨JdbcTemplateä¸­ã€‚</p></li><li><p>Springbootä¸ç¦æä¾›äº†é»˜è®¤çš„æ•°æ®æºï¼ŒåŒæ—¶é»˜è®¤å·²ç»é…ç½®å¥½äº†JdbcTemplateæ”¾åœ¨å®¹å™¨ä¸­ï¼Œç¨‹åºå‘˜åªéœ€è¦è‡ªå·±æ³¨å…¥å³å¯ä½¿ç”¨ã€‚</p></li><li><p>JdbcTemplateçš„è‡ªåŠ¨é…ç½®æ˜¯ä¾èµ– org.springframework.boot.autoconfigure.jdbc åŒ…ä¸‹çš„ JdbcTemplateConfiguration ç±»</p></li></ol><p><strong>JdbcTemplateä¸»è¦æä¾›ä»¥ä¸‹å‡ ç±»æ–¹æ³•ï¼š</strong></p><ul><li>executeæ–¹æ³•ï¼šå¯ä»¥ç”¨äºæ‰§è¡Œä»»ä½•SQLè¯­å¥ï¼Œä¸€èˆ¬ç”¨äºæ‰§è¡ŒDDLè¯­å¥ã€‚</li><li>updateæ–¹æ³•åŠbatchUpdateæ–¹æ³•ï¼šupdateæ–¹æ³•ç”¨äºæ‰§è¡Œæ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤ç­‰è¯­å¥ï¼›batchUpdateæ–¹æ³•ç”¨äºæ‰§è¡Œæ‰¹å¤„ç†ç›¸å…³è¯­å¥ã€‚</li><li>queryæ–¹æ³•åŠqueryForXXXæ–¹æ³•ï¼šç”¨äºæ‰§è¡ŒæŸ¥è¯¢ç›¸å…³è¯­å¥ã€‚</li><li>callæ–¹æ³•ï¼šç”¨äºæ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ã€å‡½æ•°ç›¸å…³è¯­å¥ã€‚</li></ul><h3 id="3-æµ‹è¯•"><a href="#3-æµ‹è¯•" class="headerlink" title="3. æµ‹è¯•"></a>3. æµ‹è¯•</h3><p>ç¼–å†™ä¸€ä¸ªControllerï¼Œæ³¨å…¥ jdbcTemplateï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•è¿›è¡Œè®¿é—®æµ‹è¯•ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JDBCController</span> </span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    JdbcTemplate jdbcTemplate;<br><br>    <span class="hljs-comment">// æŸ¥è¯¢æ•°æ®åº“çš„æ‰€æœ‰ä¿¡æ¯</span><br>    <span class="hljs-comment">// æ€è€ƒï¼šæ²¡æœ‰å®ä½“ç±»ï¼Œæ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œå¦‚ä½•è·å–ï¼Ÿ ä½¿ç”¨Map</span><br>    <span class="hljs-meta">@GetMapping(&quot;/userList&quot;)</span><br>    <span class="hljs-keyword">public</span> List&lt;Map&lt;String,Object&gt;&gt; userList() &#123;<br>        String sql = <span class="hljs-string">&quot;select * from mybatis.user&quot;</span>;<br>        List&lt;Map&lt;String, Object&gt;&gt; maps = jdbcTemplate.queryForList(sql);<br>        <span class="hljs-keyword">return</span> maps;<br>    &#125;<br><br>    <span class="hljs-meta">@GetMapping(&quot;/addUser&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">addUser</span><span class="hljs-params">()</span> </span>&#123;<br>        String sql = <span class="hljs-string">&quot;insert into mybatis.user(id,name,pwd) values (5,&#x27;å°æ˜&#x27;,&#x27;123456&#x27;)&quot;</span>;<br>        jdbcTemplate.update(sql);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;insert-ok&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@GetMapping(&quot;/updateUser/&#123;id&#125;&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">updateUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> <span class="hljs-keyword">int</span> id)</span> </span>&#123;<br>        String sql = <span class="hljs-string">&quot;update mybatis.user set name = ?,pwd = ? where id =&quot;</span> + id;<br>        <span class="hljs-comment">// å°è£…</span><br>        Object[] objects = <span class="hljs-keyword">new</span> Object[<span class="hljs-number">2</span>];<br>        objects[<span class="hljs-number">0</span>] = <span class="hljs-string">&quot;å°æ˜2&quot;</span>;<br>        objects[<span class="hljs-number">1</span>] = <span class="hljs-string">&quot;zzzzzz&quot;</span>;<br>        jdbcTemplate.update(sql, objects);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;update-ok&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@GetMapping(&quot;/deleteUser/&#123;id&#125;&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">deleteUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> <span class="hljs-keyword">int</span> id)</span> </span>&#123;<br>        String sql = <span class="hljs-string">&quot;delete from mybatis.user where id = ?&quot;</span>;<br>        jdbcTemplate.update(sql,id);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;delete-ok&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•è¯·æ±‚ï¼Œç»“æœæ­£å¸¸ï¼›</p><p>åˆ°æ­¤ï¼ŒCURDçš„åŸºæœ¬æ“ä½œï¼Œä½¿ç”¨ JDBC å°±æå®šäº†ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBootç¬”è®°09-é¡µé¢å›½é™…åŒ–</title>
    <link href="/posts/2021/01/09/SpringBoot%E7%AC%94%E8%AE%B009-%E9%A1%B5%E9%9D%A2%E5%9B%BD%E9%99%85%E5%8C%96/"/>
    <url>/posts/2021/01/09/SpringBoot%E7%AC%94%E8%AE%B009-%E9%A1%B5%E9%9D%A2%E5%9B%BD%E9%99%85%E5%8C%96/</url>
    
    <content type="html"><![CDATA[<h2 id="é¡µé¢å›½é™…åŒ–"><a href="#é¡µé¢å›½é™…åŒ–" class="headerlink" title="é¡µé¢å›½é™…åŒ–"></a>é¡µé¢å›½é™…åŒ–</h2><h3 id="ä¸€ã€å‡†å¤‡å·¥ä½œ"><a href="#ä¸€ã€å‡†å¤‡å·¥ä½œ" class="headerlink" title="ä¸€ã€å‡†å¤‡å·¥ä½œ"></a>ä¸€ã€å‡†å¤‡å·¥ä½œ</h3><p>åœ¨IDEAä¸­ç»Ÿä¸€è®¾ç½®propertiesçš„ç¼–ç é—®é¢˜ï¼š<strong>utf-8</strong></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B009-%E9%A1%B5%E9%9D%A2%E5%9B%BD%E9%99%85%E5%8C%96/file_encoding.png" alt="è®¾ç½®ç¼–ç "></p><h3 id="äºŒã€ç¼–å†™é…ç½®æ–‡ä»¶"><a href="#äºŒã€ç¼–å†™é…ç½®æ–‡ä»¶" class="headerlink" title="äºŒã€ç¼–å†™é…ç½®æ–‡ä»¶"></a>äºŒã€ç¼–å†™é…ç½®æ–‡ä»¶</h3><p>ç¼–å†™å›½é™…åŒ–é…ç½®æ–‡ä»¶ï¼ŒæŠ½å–é¡µé¢éœ€è¦æ˜¾ç¤ºçš„å›½é™…åŒ–é¡µé¢æ¶ˆæ¯ã€‚æˆ‘ä»¬å¯ä»¥å»ç™»å½•é¡µé¢æŸ¥çœ‹ä¸€ä¸‹ï¼Œå“ªäº›å†…å®¹æˆ‘ä»¬éœ€è¦ç¼–å†™å›½é™…åŒ–çš„é…ç½®ã€‚</p><ol><li><p>æˆ‘ä»¬åœ¨<code>resources</code>èµ„æºæ–‡ä»¶ä¸‹æ–°å»ºä¸€ä¸ª<code>i18n</code>ç›®å½•ï¼Œå­˜æ”¾å›½é™…åŒ–é…ç½®æ–‡ä»¶</p></li><li><p>å»ºç«‹ä¸€ä¸ªlogin.propertiesæ–‡ä»¶ï¼Œè¿˜æœ‰ä¸€ä¸ªlogin_zh_CN.propertiesï¼›å‘ç°IDEAè‡ªåŠ¨è¯†åˆ«äº†æˆ‘ä»¬è¦åšå›½é™…åŒ–æ“ä½œï¼›æ–‡ä»¶å¤¹å˜äº†</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B009-%E9%A1%B5%E9%9D%A2%E5%9B%BD%E9%99%85%E5%8C%96/i18n.png" alt="æ–°ç”Ÿæˆèµ„æºåŒ…"></p></li><li><p>æˆ‘ä»¬å¯ä»¥å†æ·»åŠ ä¸€ä¸ªè‹±æ–‡çš„ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B009-%E9%A1%B5%E9%9D%A2%E5%9B%BD%E9%99%85%E5%8C%96/i18n_2.png" alt="æ·»åŠ è‹±æ–‡"></p></li><li><p>ç¼–å†™é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ideaä¸‹é¢æœ‰ä¸€ä¸ª<strong>è§†å›¾é€‰é¡¹</strong> : Resource Bundleï¼Œç‚¹å‡»è¿›å»å°±å¯ä»¥ç›´æ¥æ·»åŠ å±æ€§ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B009-%E9%A1%B5%E9%9D%A2%E5%9B%BD%E9%99%85%E5%8C%96/bundle.png" alt="å¯è§†åŒ–ç¼–å†™"></p></li></ol><ol start="5"><li><p>è¿™ä¸ªè§†å›¾æˆ‘ä»¬ç‚¹å‡» + å·å°±å¯ä»¥ç›´æ¥æ·»åŠ å±æ€§äº†,å³è¾¹çš„ä¸‰ä¸ªæ–‡æœ¬æ¡†å¯ä»¥è¾“å…¥å¯¹åº”çš„å±æ€§å€¼</p></li><li><p>ç„¶åä¾æ¬¡æ·»åŠ å…¶ä»–é¡µé¢å†…å®¹å³å¯ï¼ˆé”®çš„åå­—å¯ä»¥éšä¾¿å–ï¼Œå€¼æŒ‰ç…§é¡µé¢ä¸Šçš„æ¥ï¼‰</p></li><li><p>ç„¶åã€‚æŸ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶</p><p><strong>login.properties</strong>ï¼šé»˜è®¤</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-meta">login.btn</span>=<span class="hljs-string">ç™»å½•</span><br><span class="hljs-meta">login.password</span>=<span class="hljs-string">å¯†ç </span><br><span class="hljs-meta">login.remember</span>=<span class="hljs-string">è®°ä½æˆ‘</span><br><span class="hljs-meta">login.tip</span>=<span class="hljs-string">è¯·ç™»å½•</span><br><span class="hljs-meta">login.username</span>=<span class="hljs-string">ç”¨æˆ·å</span><br></code></pre></td></tr></table></figure><p><strong>login_en_US.properties</strong>ï¼šè‹±æ–‡</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-meta">login.btn</span>=<span class="hljs-string">Sign in</span><br><span class="hljs-meta">login.password</span>=<span class="hljs-string">Password</span><br><span class="hljs-meta">login.remember</span>=<span class="hljs-string">Remember me</span><br><span class="hljs-meta">login.tip</span>=<span class="hljs-string">please sign in</span><br><span class="hljs-meta">login.username</span>=<span class="hljs-string">Username</span><br></code></pre></td></tr></table></figure><p><strong>login_zh_CN.properties</strong>ï¼šä¸­æ–‡</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-meta">login.btn</span>=<span class="hljs-string">ç™»å½•</span><br><span class="hljs-meta">login.password</span>=<span class="hljs-string">å¯†ç </span><br><span class="hljs-meta">login.remember</span>=<span class="hljs-string">è®°ä½æˆ‘</span><br><span class="hljs-meta">login.tip</span>=<span class="hljs-string">è¯·ç™»å½•</span><br><span class="hljs-meta">login.username</span>=<span class="hljs-string">ç”¨æˆ·å</span><br></code></pre></td></tr></table></figure></li></ol><h3 id="ä¸‰ã€é…ç½®æ–‡ä»¶ç”Ÿæ•ˆæ¢ç©¶"><a href="#ä¸‰ã€é…ç½®æ–‡ä»¶ç”Ÿæ•ˆæ¢ç©¶" class="headerlink" title="ä¸‰ã€é…ç½®æ–‡ä»¶ç”Ÿæ•ˆæ¢ç©¶"></a>ä¸‰ã€é…ç½®æ–‡ä»¶ç”Ÿæ•ˆæ¢ç©¶</h3><p>çœ‹ä¸€ä¸‹SpringBootå¯¹å›½é™…åŒ–çš„è‡ªåŠ¨é…ç½®ï¼è¿™é‡Œåˆæ¶‰åŠåˆ°ä¸€ä¸ªç±»ï¼š<code>MessageSourceAutoConfiguration</code></p><p>åœ¨è¿™ä¸ªç±»ä¸­æœ‰ä¸€ä¸ªæ–¹æ³•ï¼š<code>messageSource</code>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> MessageSource <span class="hljs-title">messageSource</span><span class="hljs-params">(MessageSourceProperties properties)</span> </span>&#123;<br>    ResourceBundleMessageSource messageSource = <span class="hljs-keyword">new</span> ResourceBundleMessageSource();<br>    <span class="hljs-keyword">if</span> (StringUtils.hasText(properties.getBasename())) &#123;<br>        messageSource.setBasenames(StringUtils<br>                                   .commaDelimitedListToStringArray(StringUtils.trimAllWhitespace(properties.getBasename())));<br>    &#125;<br>    <span class="hljs-keyword">if</span> (properties.getEncoding() != <span class="hljs-keyword">null</span>) &#123;<br>        messageSource.setDefaultEncoding(properties.getEncoding().name());<br>    &#125;<br>    messageSource.setFallbackToSystemLocale(properties.isFallbackToSystemLocale());<br>    Duration cacheDuration = properties.getCacheDuration();<br>    <span class="hljs-keyword">if</span> (cacheDuration != <span class="hljs-keyword">null</span>) &#123;<br>        messageSource.setCacheMillis(cacheDuration.toMillis());<br>    &#125;<br>    messageSource.setAlwaysUseMessageFormat(properties.isAlwaysUseMessageFormat());<br>    messageSource.setUseCodeAsDefaultMessage(properties.isUseCodeAsDefaultMessage());<br>    <span class="hljs-keyword">return</span> messageSource;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç‚¹å‡»æ­¤æ–¹æ³•çš„å½¢å‚æ‰€å±çš„ç±»<code>MessageSourceProperties</code>ï¼Œæœ‰ä¸€ä¸ªå±æ€§é…ç½®äº†é»˜è®¤çš„å›½é™…åŒ–èµ„æºæ–‡ä»¶å</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> String basename = <span class="hljs-string">&quot;messages&quot;</span>;<br></code></pre></td></tr></table></figure><p>å¥½ï¼Œå›åˆ°åˆšæ‰çš„ç±»<code>MessageSourceAutoConfiguration</code>çš„æ–¹æ³•<code>messageSource</code>ä¸­æ¥ï¼Œç¬¬ä¸€æ¡è¯­å¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">ResourceBundleMessageSource messageSource = <span class="hljs-keyword">new</span> ResourceBundleMessageSource();<br></code></pre></td></tr></table></figure><p>ç‚¹è¿›<code>ResourceBundleMessageSource</code>ä¼šå‘ç°ç”¨åˆ°äº†ä¸€ä¸ªç±»<code>Locale</code>çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">protected</span> String <span class="hljs-title">resolveCodeWithoutArguments</span><span class="hljs-params">(String code, Locale locale)</span></span><br></code></pre></td></tr></table></figure><p>ç‚¹è¿›<code>Locale</code>ç±»ï¼Œå‘ç°å…¶ä¸­å®šä¹‰äº†è®¸å¤šå¸¸é‡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">static</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Locale FRENCH = createConstant(<span class="hljs-string">&quot;fr&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br><span class="hljs-keyword">static</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Locale ITALIAN = createConstant(<span class="hljs-string">&quot;it&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br><span class="hljs-keyword">static</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Locale JAPANESE = createConstant(<span class="hljs-string">&quot;ja&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br><span class="hljs-keyword">static</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Locale CHINESE = createConstant(<span class="hljs-string">&quot;zh&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br></code></pre></td></tr></table></figure><p><strong>å›å½’åˆ°è®©é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ</strong>ï¼š</p><p>çœŸå®çš„æƒ…å†µæˆ‘ä»¬æŠŠè¿™äº›æ”¾åœ¨äº†å›½é™…åŒ–é…ç½®æ–‡ä»¶æ”¾åœ¨äº†<code>i18n</code>ç›®å½•ä¸‹ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å»application.propertiesé…ç½®è¿™ä¸ªmessagesçš„è·¯å¾„ã€‚</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-meta">spring.messages.basename</span>=<span class="hljs-string">i18n.login</span><br></code></pre></td></tr></table></figure><h3 id="å››ã€é…ç½®é¡µé¢å›½é™…åŒ–å€¼"><a href="#å››ã€é…ç½®é¡µé¢å›½é™…åŒ–å€¼" class="headerlink" title="å››ã€é…ç½®é¡µé¢å›½é™…åŒ–å€¼"></a>å››ã€é…ç½®é¡µé¢å›½é™…åŒ–å€¼</h3><p>å»é¡µé¢è·å–å›½é™…åŒ–çš„å€¼ï¼ŒæŸ¥çœ‹Thymeleafçš„æ–‡æ¡£ï¼Œæ‰¾åˆ°messageå–å€¼æ“ä½œä¸ºï¼š#{â€¦}ã€‚æˆ‘ä»¬å»é¡µé¢æµ‹è¯•ä¸‹</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-signin&quot;</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;dashboard.html&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;mb-4&quot;</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">&quot;@&#123;/img/bootstrap-solid.svg&#125;&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;72&quot;</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&quot;72&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;h3 mb-3 font-weight-normal&quot;</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;#&#123;login.tip&#125;&quot;</span>&gt;</span>Please sign in<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;sr-only&quot;</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;#&#123;login.username&#125;&quot;</span>&gt;</span>Username<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-control&quot;</span> <span class="hljs-attr">th:placeholder</span>=<span class="hljs-string">&quot;#&#123;login.username&#125;&quot;</span> <span class="hljs-attr">required</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">autofocus</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;sr-only&quot;</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;#&#123;login.password&#125;&quot;</span>&gt;</span>Password<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-control&quot;</span> <span class="hljs-attr">th:placeholder</span>=<span class="hljs-string">&quot;#&#123;login.password&#125;&quot;</span> <span class="hljs-attr">required</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;checkbox mb-3&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;remember-me&quot;</span>&gt;</span> [[#&#123;login.remember&#125;]]<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-lg btn-primary btn-block&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span>[[#&#123;login.btn&#125;]]<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;mt-5 mb-3 text-muted&quot;</span>&gt;</span>Â© 2017-2018<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-sm&quot;</span>&gt;</span>ä¸­æ–‡<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-sm&quot;</span>&gt;</span>English<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å»å¯åŠ¨é¡¹ç›®ï¼Œè®¿é—®ä¸€ä¸‹ï¼Œå‘ç°å·²ç»è‡ªåŠ¨è¯†åˆ«ä¸ºä¸­æ–‡çš„äº†</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B009-%E9%A1%B5%E9%9D%A2%E5%9B%BD%E9%99%85%E5%8C%96/ch_page.png" alt="é…ç½®ä¸­æ–‡"></p><p><strong>ä½†æˆ‘ä»¬æƒ³çœ‹çš„æ˜¯ï¼Œå¯ä»¥æ ¹æ®æŒ‰é’®è‡ªåŠ¨åˆ‡æ¢ä¸­æ–‡å’Œè‹±æ–‡</strong></p><h3 id="äº”ã€é…ç½®å›½é™…åŒ–è§£æ"><a href="#äº”ã€é…ç½®å›½é™…åŒ–è§£æ" class="headerlink" title="äº”ã€é…ç½®å›½é™…åŒ–è§£æ"></a>äº”ã€é…ç½®å›½é™…åŒ–è§£æ</h3><p>åœ¨Springä¸­æœ‰ä¸€ä¸ªç±»<code>Locale(åŒºåŸŸ)</code>ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªå«åš``LocaleResolver`çš„è§£æå™¨ã€‚</p><p>å»<code>WebMvcAutoConfiguration</code>æ–‡ä»¶ï¼Œå¯»æ‰¾ä¸€ä¸‹ï¼Œçœ‹åˆ°SpringBooté»˜è®¤é…ç½®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> LocaleResolver <span class="hljs-title">localeResolver</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.webProperties.getLocaleResolver() == WebProperties.LocaleResolver.FIXED) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> FixedLocaleResolver(<span class="hljs-keyword">this</span>.webProperties.getLocale());<br>    &#125;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.mvcProperties.getLocaleResolver() == WebMvcProperties.LocaleResolver.FIXED) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> FixedLocaleResolver(<span class="hljs-keyword">this</span>.mvcProperties.getLocale());<br>    &#125;<br>    AcceptHeaderLocaleResolver localeResolver = <span class="hljs-keyword">new</span> AcceptHeaderLocaleResolver();<br>    Locale locale = (<span class="hljs-keyword">this</span>.webProperties.getLocale() != <span class="hljs-keyword">null</span>) ? <span class="hljs-keyword">this</span>.webProperties.getLocale()<br>        : <span class="hljs-keyword">this</span>.mvcProperties.getLocale();<br>    localeResolver.setDefaultLocale(locale);<br>    <span class="hljs-keyword">return</span> localeResolver;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªç±»ä¸­æœ‰ä¸€ä¸ªç±» <code>AcceptHeaderLocaleResolver</code>,ç‚¹è¿›å»çœ‹ä¸€ä¸‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AcceptHeaderLocaleResolver</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">LocaleResolver</span></span><br></code></pre></td></tr></table></figure><p>å’Œè§†å›¾è§£æå™¨ç±»ä¼¼ï¼Œåªè¦å®ç° <code>LocaleResolver</code> æ¥å£çš„å°±æ˜¯ä¸€ä¸ªåœ°åŒºè§£æå™¨</p><p>æ‰€ä»¥ç°åœ¨æƒ³ç‚¹å‡»é“¾æ¥è®©æˆ‘ä»¬çš„å›½é™…åŒ–èµ„æºç”Ÿæ•ˆï¼Œå°±éœ€è¦è®©æˆ‘ä»¬è‡ªå·±çš„<code>Locale</code>ç”Ÿæ•ˆ</p><p>æˆ‘ä»¬å¯ä»¥æ¨¡ä»¿æºç å»è‡ªå·±å†™ä¸€ä¸ªè‡ªå·±çš„<code>LocaleResolver</code>ï¼Œå¯ä»¥åœ¨é“¾æ¥ä¸Šæºå¸¦åŒºåŸŸä¿¡æ¯ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹å‰ç«¯é¡µé¢æ§åˆ¶ä¸­ï¼Œè‹±æ–‡çš„è·³è½¬é“¾æ¥</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- è¿™é‡Œä¼ å…¥å‚æ•°ä¸éœ€è¦ä½¿ç”¨ ï¼Ÿä½¿ç”¨ ï¼ˆkey=valueï¼‰--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-sm&quot;</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/index.html(l=&#x27;zh_CN&#x27;)&#125;&quot;</span>&gt;</span>ä¸­æ–‡<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-sm&quot;</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/index.html(l=&#x27;en_US&#x27;)&#125;&quot;</span>&gt;</span>English<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å»å†™ä¸€ä¸ªå¤„ç†çš„ç»„ä»¶ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyLocaleResolver</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">LocaleResolver</span> </span>&#123;<br><br>    <span class="hljs-comment">// è§£æè¯·æ±‚</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Locale <span class="hljs-title">resolveLocale</span><span class="hljs-params">(HttpServletRequest httpServletRequest)</span> </span>&#123;<br>        <span class="hljs-comment">// è·å–è¯·æ±‚ä¸­çš„è¯­è¨€å‚æ•°</span><br>        String language = httpServletRequest.getParameter(<span class="hljs-string">&quot;l&quot;</span>);<br>        <span class="hljs-comment">// å¦‚æœæ²¡æœ‰å°±æ˜¯ç”¨é»˜è®¤çš„</span><br>        Locale locale = Locale.getDefault();<br>        <span class="hljs-comment">// å¦‚æœè¯·æ±‚çš„é“¾æ¥æºå¸¦äº†å›½é™…åŒ–çš„å‚æ•°</span><br>        <span class="hljs-keyword">if</span> (!StringUtils.isEmpty(language)) &#123;<br>            <span class="hljs-comment">// zh_CN</span><br>            String[] split = language.split(<span class="hljs-string">&quot;_&quot;</span>);<br>            <span class="hljs-comment">// å›½å®¶ï¼Œåœ°åŒºåˆ†å‰²</span><br>            locale = <span class="hljs-keyword">new</span> Locale(split[<span class="hljs-number">0</span>], split[<span class="hljs-number">1</span>]);<br>        &#125;<br>        <span class="hljs-keyword">return</span> locale;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setLocale</span><span class="hljs-params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Locale locale)</span> </span>&#123;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸ºäº†è®©æˆ‘ä»¬çš„åŒºåŸŸåŒ–ä¿¡æ¯èƒ½å¤Ÿç”Ÿæ•ˆï¼Œæˆ‘ä»¬éœ€è¦å†é…ç½®ä¸€ä¸‹è¿™ä¸ªç»„ä»¶,<strong>åœ¨æˆ‘ä»¬è‡ªå·±çš„MvcConofigä¸‹æ·»åŠ bean</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æ”¾åœ¨Springçš„Beansé‡Œé¢ï¼Œè‡ªå·±çš„å›½é™…åŒ–ç»„ä»¶å°±ç”Ÿæ•ˆäº†ï¼</span><br><span class="hljs-meta">@Bean</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> LocaleResolver <span class="hljs-title">localeResolver</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> MyLocaleResolver();<br>&#125;<br></code></pre></td></tr></table></figure><p>é‡å¯é¡¹ç›®ï¼Œæ¥è®¿é—®ä¸€ä¸‹ï¼Œå‘ç°ç‚¹å‡»æŒ‰é’®å¯ä»¥å®ç°æˆåŠŸåˆ‡æ¢ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBootç¬”è®°08-MVCè‡ªåŠ¨é…ç½®åŸç†</title>
    <link href="/posts/2021/01/09/SpringBoot%E7%AC%94%E8%AE%B008-MVC%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86/"/>
    <url>/posts/2021/01/09/SpringBoot%E7%AC%94%E8%AE%B008-MVC%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h2 id="MVCè‡ªåŠ¨é…ç½®åŸç†"><a href="#MVCè‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="MVCè‡ªåŠ¨é…ç½®åŸç†"></a>MVCè‡ªåŠ¨é…ç½®åŸç†</h2><h3 id="ä¸€ã€å®˜ç½‘é˜…è¯»"><a href="#ä¸€ã€å®˜ç½‘é˜…è¯»" class="headerlink" title="ä¸€ã€å®˜ç½‘é˜…è¯»"></a>ä¸€ã€å®˜ç½‘é˜…è¯»</h3><p>åœ¨è¿›è¡Œé¡¹ç›®ç¼–å†™å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦çŸ¥é“ä¸€ä¸ªä¸œè¥¿ï¼Œå°±æ˜¯SpringBootå¯¹æˆ‘ä»¬çš„SpringMVCè¿˜åšäº†å“ªäº›é…ç½®ï¼ŒåŒ…æ‹¬å¦‚ä½•æ‰©å±•ï¼Œå¦‚ä½•å®šåˆ¶ã€‚</p><p>åªæœ‰æŠŠè¿™äº›éƒ½ææ¸…æ¥šäº†ï¼Œæˆ‘ä»¬åœ¨ä¹‹åä½¿ç”¨æ‰ä¼šæ›´åŠ å¾—å¿ƒåº”æ‰‹ã€‚é€”å¾„ä¸€ï¼šæºç åˆ†æï¼Œé€”å¾„äºŒï¼šå®˜æ–¹æ–‡æ¡£ï¼</p><p>åœ°å€ï¼š<a href="https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#boot-features-spring-mvc-auto-configuration">https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#boot-features-spring-mvc-auto-configuration</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs apl">Spring MVC Auto-configuration<br>&#x2F;&#x2F; Spring Bootä¸ºSpring MVCæä¾›äº†è‡ªåŠ¨é…ç½®ï¼Œå®ƒå¯ä»¥å¾ˆå¥½åœ°ä¸å¤§å¤šæ•°åº”ç”¨ç¨‹åºä¸€èµ·å·¥ä½œã€‚<br>Spring Boot provides auto-configuration for Spring MVC that works well with most applications.<br>&#x2F;&#x2F; è‡ªåŠ¨é…ç½®åœ¨Springé»˜è®¤è®¾ç½®çš„åŸºç¡€ä¸Šæ·»åŠ äº†ä»¥ä¸‹åŠŸèƒ½ï¼š<br>The auto-configuration adds the following features on top of Springâ€™s defaults:<br>&#x2F;&#x2F; åŒ…å«è§†å›¾è§£æå™¨<br>Inclusion of ContentNegotiatingViewResolver and BeanNameViewResolver beans.<br>&#x2F;&#x2F; æ”¯æŒé™æ€èµ„æºæ–‡ä»¶å¤¹çš„è·¯å¾„ï¼Œä»¥åŠwebjars<br>Support for serving static resources, including support for WebJars <br>&#x2F;&#x2F; è‡ªåŠ¨æ³¨å†Œäº†Converterï¼š<br>&#x2F;&#x2F; è½¬æ¢å™¨ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ç½‘é¡µæäº¤æ•°æ®åˆ°åå°è‡ªåŠ¨å°è£…æˆä¸ºå¯¹è±¡çš„ä¸œè¥¿ï¼Œæ¯”å¦‚æŠŠ&quot;1&quot;å­—ç¬¦ä¸²è‡ªåŠ¨è½¬æ¢ä¸ºintç±»å‹<br>&#x2F;&#x2F; Formatterï¼šã€æ ¼å¼åŒ–å™¨ï¼Œæ¯”å¦‚é¡µé¢ç»™æˆ‘ä»¬äº†ä¸€ä¸ª2019-8-10ï¼Œå®ƒä¼šç»™æˆ‘ä»¬è‡ªåŠ¨æ ¼å¼åŒ–ä¸ºDateå¯¹è±¡ã€‘<br>Automatic registration of Converter, GenericConverter, and Formatter beans.<br>&#x2F;&#x2F; HttpMessageConverters<br>&#x2F;&#x2F; SpringMVCç”¨æ¥è½¬æ¢Httpè¯·æ±‚å’Œå“åº”çš„çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦æŠŠä¸€ä¸ªUserå¯¹è±¡è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²ï¼Œå¯ä»¥å»çœ‹å®˜ç½‘æ–‡æ¡£è§£é‡Šï¼›<br>Support for HttpMessageConverters (covered later in this document).<br>&#x2F;&#x2F; å®šä¹‰é”™è¯¯ä»£ç ç”Ÿæˆè§„åˆ™çš„<br>Automatic registration of MessageCodesResolver (covered later in this document).<br>&#x2F;&#x2F; é¦–é¡µå®šåˆ¶<br>Static index.html support.<br>&#x2F;&#x2F; å›¾æ ‡å®šåˆ¶<br>Custom Favicon support (covered later in this document).<br>&#x2F;&#x2F; åˆå§‹åŒ–æ•°æ®ç»‘å®šå™¨ï¼šå¸®æˆ‘ä»¬æŠŠè¯·æ±‚æ•°æ®ç»‘å®šåˆ°JavaBeanä¸­ï¼<br>Automatic use of a ConfigurableWebBindingInitializer bean (covered later in this document).<br><br>&#x2F;*<br>å¦‚æœæ‚¨å¸Œæœ›ä¿ç•™Spring Boot MVCåŠŸèƒ½ï¼Œå¹¶ä¸”å¸Œæœ›æ·»åŠ å…¶ä»–MVCé…ç½®ï¼ˆæ‹¦æˆªå™¨ã€æ ¼å¼åŒ–ç¨‹åºã€è§†å›¾æ§åˆ¶å™¨å’Œå…¶ä»–åŠŸèƒ½ï¼‰ï¼Œåˆ™å¯ä»¥æ·»åŠ è‡ªå·±<br>çš„@configurationç±»ï¼Œç±»å‹ä¸ºwebmvcconfiguerï¼Œä½†ä¸æ·»åŠ @EnableWebMvcã€‚å¦‚æœå¸Œæœ›æä¾›<br>RequestMappingHandlerMappingã€RequestMappingHandlerAdapteræˆ–ExceptionHandlerExceptionResolverçš„è‡ªå®šä¹‰<br>å®ä¾‹ï¼Œåˆ™å¯ä»¥å£°æ˜WebMVCregistrationAdapterå®ä¾‹æ¥æä¾›æ­¤ç±»ç»„ä»¶ã€‚<br>*&#x2F;<br>If you want to keep Spring Boot MVC features and you want to add additional MVC configuration <br>(interceptors, formatters, view controllers, and other features), you can add your own <br>@Configuration class of type WebMvcConfigurer but without @EnableWebMvc. If you wish to provide <br>custom instances of RequestMappingHandlerMapping, RequestMappingHandlerAdapter, or <br>ExceptionHandlerExceptionResolver, you can declare a WebMvcRegistrationsAdapter instance to provide such components.<br><br>&#x2F;&#x2F; å¦‚æœæ‚¨æƒ³å®Œå…¨æ§åˆ¶Spring MVCï¼Œå¯ä»¥æ·»åŠ è‡ªå·±çš„@Configurationï¼Œå¹¶ç”¨@EnableWebMvcè¿›è¡Œæ³¨é‡Šã€‚<br>If you want to take complete control of Spring MVC, you can add your own @Configuration annotated with @EnableWebMvc.<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬æ¥ä»”ç»†å¯¹ç…§ï¼Œçœ‹ä¸€ä¸‹å®ƒæ€ä¹ˆå®ç°çš„ï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬SpringBootå·²ç»å¸®æˆ‘ä»¬è‡ªåŠ¨é…ç½®å¥½äº†SpringMVCï¼Œç„¶åè‡ªåŠ¨é…ç½®äº†å“ªäº›ä¸œè¥¿å‘¢ï¼Ÿ</p><h3 id="äºŒã€ContentNegotiatingViewResolver-å†…å®¹åå•†è§†å›¾è§£æå™¨"><a href="#äºŒã€ContentNegotiatingViewResolver-å†…å®¹åå•†è§†å›¾è§£æå™¨" class="headerlink" title="äºŒã€ContentNegotiatingViewResolver å†…å®¹åå•†è§†å›¾è§£æå™¨"></a>äºŒã€ContentNegotiatingViewResolver å†…å®¹åå•†è§†å›¾è§£æå™¨</h3><p>è‡ªåŠ¨é…ç½®äº†ViewResolverï¼Œå°±æ˜¯æˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„SpringMVCçš„è§†å›¾è§£æå™¨ï¼›</p><p>å³æ ¹æ®æ–¹æ³•çš„è¿”å›å€¼å–å¾—è§†å›¾å¯¹è±¡ï¼ˆViewï¼‰ï¼Œç„¶åç”±è§†å›¾å¯¹è±¡å†³å®šå¦‚ä½•æ¸²æŸ“ï¼ˆè½¬å‘ï¼Œé‡å®šå‘ï¼‰ã€‚</p><p>æˆ‘ä»¬å»çœ‹çœ‹è¿™é‡Œçš„æºç ï¼šæˆ‘ä»¬æ‰¾åˆ° <code>WebMvcAutoConfiguration</code> ï¼Œ ç„¶åæœç´¢<code>ContentNegotiatingViewResolver</code>ã€‚æ‰¾åˆ°å¦‚ä¸‹æ–¹æ³•:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br><span class="hljs-meta">@ConditionalOnBean(ViewResolver.class)</span><br><span class="hljs-meta">@ConditionalOnMissingBean(name = &quot;viewResolver&quot;, value = ContentNegotiatingViewResolver.class)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> ContentNegotiatingViewResolver <span class="hljs-title">viewResolver</span><span class="hljs-params">(BeanFactory beanFactory)</span> </span>&#123;<br>    ContentNegotiatingViewResolver resolver = <span class="hljs-keyword">new</span> ContentNegotiatingViewResolver();<br>    resolver.setContentNegotiationManager(beanFactory.getBean(ContentNegotiationManager.class));<br>    <span class="hljs-comment">// ContentNegotiatingViewResolverä½¿ç”¨æ‰€æœ‰å…¶ä»–è§†å›¾è§£æå™¨æ¥å®šä½è§†å›¾ï¼Œå› æ­¤å®ƒåº”è¯¥å…·æœ‰è¾ƒé«˜çš„ä¼˜å…ˆçº§</span><br>    resolver.setOrder(Ordered.HIGHEST_PRECEDENCE);<br>    <span class="hljs-keyword">return</span> resolver;<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥ç‚¹è¿›è¿™ç±»çœ‹çœ‹ï¼æ‰¾åˆ°å¯¹åº”çš„è§£æè§†å›¾çš„ä»£ç :</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Nullable</span> <span class="hljs-comment">// æ³¨è§£è¯´æ˜ï¼š@Nullable å³å‚æ•°å¯ä¸ºnull</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> View <span class="hljs-title">resolveViewName</span><span class="hljs-params">(String viewName, Locale locale)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>    RequestAttributes attrs = RequestContextHolder.getRequestAttributes();<br>    Assert.state(attrs <span class="hljs-keyword">instanceof</span> ServletRequestAttributes, <span class="hljs-string">&quot;No current ServletRequestAttributes&quot;</span>);<br>    List&lt;MediaType&gt; requestedMediaTypes = <span class="hljs-keyword">this</span>.getMediaTypes(((ServletRequestAttributes)attrs).getRequest());<br>    <span class="hljs-keyword">if</span> (requestedMediaTypes != <span class="hljs-keyword">null</span>) &#123;<br>        <span class="hljs-comment">// è·å–å€™é€‰çš„è§†å›¾å¯¹è±¡</span><br>        List&lt;View&gt; candidateViews = <span class="hljs-keyword">this</span>.getCandidateViews(viewName, locale, requestedMediaTypes);<br>        <span class="hljs-comment">// é€‰æ‹©ä¸€ä¸ªæœ€é€‚åˆçš„è§†å›¾å¯¹è±¡ï¼Œç„¶åæŠŠè¿™ä¸ªå¯¹è±¡è¿”å›</span><br>        View bestView = <span class="hljs-keyword">this</span>.getBestView(candidateViews, requestedMediaTypes, attrs);<br>        <span class="hljs-keyword">if</span> (bestView != <span class="hljs-keyword">null</span>) &#123;<br>            <span class="hljs-keyword">return</span> bestView;<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// .....</span><br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬ç»§ç»­ç‚¹è¿›å»çœ‹ï¼Œä»–æ˜¯æ€ä¹ˆè·å¾—å€™é€‰çš„è§†å›¾çš„å‘¢ï¼Ÿ</p><p><code>getCandidateViews</code>æ–¹æ³•ä¸­çœ‹åˆ°ä»–æ˜¯æŠŠæ‰€æœ‰çš„è§†å›¾è§£æå™¨æ‹¿æ¥ï¼Œè¿›è¡Œwhileå¾ªç¯ï¼ŒæŒ¨ä¸ªè§£æï¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">Iterator var5 = <span class="hljs-keyword">this</span>.viewResolvers.iterator();<br></code></pre></td></tr></table></figure><p>æ‰€ä»¥å¾—å‡ºç»“è®ºï¼š<strong>ContentNegotiatingViewResolver è¿™ä¸ªè§†å›¾è§£æå™¨å°±æ˜¯ç”¨æ¥ç»„åˆæ‰€æœ‰çš„è§†å›¾è§£æå™¨çš„</strong></p><p>æˆ‘ä»¬å†å»ç ”ç©¶ä¸‹ä»–çš„ç»„åˆé€»è¾‘ï¼Œçœ‹åˆ°æœ‰ä¸ªå±æ€§viewResolversï¼Œçœ‹çœ‹å®ƒæ˜¯åœ¨å“ªé‡Œè¿›è¡Œèµ‹å€¼çš„ï¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initServletContext</span><span class="hljs-params">(ServletContext servletContext)</span> </span>&#123;<br>    <span class="hljs-comment">// è¿™é‡Œå®ƒæ˜¯ä»beanFactoryå·¥å…·ä¸­è·å–å®¹å™¨ä¸­çš„æ‰€æœ‰è§†å›¾è§£æå™¨</span><br>    <span class="hljs-comment">// ViewRescolver.class æŠŠæ‰€æœ‰çš„è§†å›¾è§£æå™¨æ¥ç»„åˆçš„</span><br>    Collection&lt;ViewResolver&gt; matchingBeans = BeanFactoryUtils.beansOfTypeIncludingAncestors(<span class="hljs-keyword">this</span>.obtainApplicationContext(), ViewResolver.class).values();<br>    ViewResolver viewResolver;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.viewResolvers == <span class="hljs-keyword">null</span>) &#123;<br>        <span class="hljs-keyword">this</span>.viewResolvers = <span class="hljs-keyword">new</span> ArrayList(matchingBeans.size());<br>    &#125;<br>    <span class="hljs-comment">// ...............</span><br>&#125;<br></code></pre></td></tr></table></figure><p>æ—¢ç„¶å®ƒæ˜¯åœ¨å®¹å™¨ä¸­å»æ‰¾è§†å›¾è§£æå™¨ï¼Œæˆ‘ä»¬æ˜¯å¦å¯ä»¥çŒœæƒ³ï¼Œæˆ‘ä»¬å°±å¯ä»¥å»å®ç°ä¸€ä¸ªè§†å›¾è§£æå™¨äº†å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥è‡ªå·±ç»™å®¹å™¨ä¸­å»æ·»åŠ ä¸€ä¸ªè§†å›¾è§£æå™¨ï¼›è¿™ä¸ªç±»å°±ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨çš„å°†å®ƒç»„åˆè¿›æ¥ï¼›<strong>æˆ‘ä»¬å»å®ç°ä¸€ä¸‹</strong></p><ol><li><p>æˆ‘ä»¬åœ¨æˆ‘ä»¬çš„ä¸»ç¨‹åºä¸­å»å†™ä¸€ä¸ªè§†å›¾è§£æå™¨æ¥è¯•è¯•ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span> <span class="hljs-comment">//æ”¾åˆ°beanä¸­</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> ViewResolver <span class="hljs-title">myViewResolver</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> MyViewResolver();<br>&#125;<br><br><span class="hljs-comment">//æˆ‘ä»¬å†™ä¸€ä¸ªé™æ€å†…éƒ¨ç±»ï¼Œè§†å›¾è§£æå™¨å°±éœ€è¦å®ç°ViewResolveræ¥å£</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyViewResolver</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ViewResolver</span></span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> View <span class="hljs-title">resolveViewName</span><span class="hljs-params">(String s, Locale locale)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æ€ä¹ˆçœ‹æˆ‘ä»¬è‡ªå·±å†™çš„è§†å›¾è§£æå™¨æœ‰æ²¡æœ‰èµ·ä½œç”¨å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬ç»™ <code>DispatcherServlet</code> ä¸­çš„ <code>doDispatch</code>æ–¹æ³• åŠ ä¸ªæ–­ç‚¹è¿›è¡Œè°ƒè¯•ä¸€ä¸‹ï¼Œå› ä¸ºæ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šèµ°åˆ°è¿™ä¸ªæ–¹æ³•ä¸­</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B008-MVC%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86/debug.png" alt="æ–­ç‚¹"></p></li><li><p>æˆ‘ä»¬å¯åŠ¨æˆ‘ä»¬çš„é¡¹ç›®ï¼Œç„¶åéšä¾¿è®¿é—®ä¸€ä¸ªé¡µé¢ï¼Œçœ‹ä¸€ä¸‹Debugä¿¡æ¯ï¼›</p><p>æ‰¾åˆ°this</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B008-MVC%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86/this.png" alt="this"></p><p>åœ¨thisä¸‹é¢æ‰¾åˆ°è§†å›¾è§£æå™¨ï¼Œæˆ‘ä»¬çœ‹åˆ°æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„å°±åœ¨è¿™é‡Œäº†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B008-MVC%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86/my_resolver.png" alt="è‡ªå®šä¹‰çš„è§†å›¾è§£æå™¨"></p></li></ol><h3 id="ä¸‰ã€è½¬æ¢å™¨å’Œæ ¼å¼åŒ–å™¨"><a href="#ä¸‰ã€è½¬æ¢å™¨å’Œæ ¼å¼åŒ–å™¨" class="headerlink" title="ä¸‰ã€è½¬æ¢å™¨å’Œæ ¼å¼åŒ–å™¨"></a>ä¸‰ã€è½¬æ¢å™¨å’Œæ ¼å¼åŒ–å™¨</h3><p>æ‰¾åˆ°æ ¼å¼åŒ–è½¬æ¢å™¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br><span class="hljs-meta">@Override</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> FormattingConversionService <span class="hljs-title">mvcConversionService</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// æ‹¿åˆ°é…ç½®æ–‡ä»¶ä¸­çš„æ ¼å¼åŒ–è§„åˆ™</span><br>    WebConversionService conversionService = <br>        <span class="hljs-keyword">new</span> WebConversionService(<span class="hljs-keyword">this</span>.mvcProperties.getDateFormat());<br>    addFormatters(conversionService);<br>    <span class="hljs-keyword">return</span> conversionService;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç‚¹å‡»è¿›å»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getDateFormat</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.dateFormat;<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment">* Date format to use. For instance, `dd/MM/yyyy`. é»˜è®¤çš„</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">private</span> String dateFormat;<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°åœ¨æˆ‘ä»¬çš„Propertiesæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œè‡ªåŠ¨é…ç½®å®ƒï¼</p><h3 id="å››ã€ä¿®æ”¹SpringBootçš„é»˜è®¤é…ç½®"><a href="#å››ã€ä¿®æ”¹SpringBootçš„é»˜è®¤é…ç½®" class="headerlink" title="å››ã€ä¿®æ”¹SpringBootçš„é»˜è®¤é…ç½®"></a>å››ã€ä¿®æ”¹SpringBootçš„é»˜è®¤é…ç½®</h3><p>è¿™ä¹ˆå¤šçš„è‡ªåŠ¨é…ç½®ï¼ŒåŸç†éƒ½æ˜¯ä¸€æ ·çš„ï¼Œé€šè¿‡è¿™ä¸ªWebMVCçš„è‡ªåŠ¨é…ç½®åŸç†åˆ†æï¼Œæˆ‘ä»¬è¦å­¦ä¼šä¸€ç§å­¦ä¹ æ–¹å¼ï¼Œé€šè¿‡æºç æ¢ç©¶ï¼Œå¾—å‡ºç»“è®ºï¼›è¿™ä¸ªç»“è®ºä¸€å®šæ˜¯å±äºè‡ªå·±çš„ï¼Œè€Œä¸”ä¸€é€šç™¾é€šã€‚</p><p>SpringBootçš„åº•å±‚ï¼Œå¤§é‡ç”¨åˆ°äº†è¿™äº›è®¾è®¡ç»†èŠ‚æ€æƒ³ï¼Œæ‰€ä»¥ï¼Œæ²¡äº‹éœ€è¦å¤šé˜…è¯»æºç ï¼å¾—å‡ºç»“è®ºï¼›</p><p>SpringBootåœ¨è‡ªåŠ¨é…ç½®å¾ˆå¤šç»„ä»¶çš„æ—¶å€™ï¼Œå…ˆçœ‹å®¹å™¨ä¸­æœ‰æ²¡æœ‰ç”¨æˆ·è‡ªå·±é…ç½®çš„ï¼ˆå¦‚æœç”¨æˆ·è‡ªå·±é…ç½®@beanï¼‰ï¼Œå¦‚æœæœ‰å°±ç”¨ç”¨æˆ·é…ç½®çš„ï¼Œå¦‚æœæ²¡æœ‰å°±ç”¨è‡ªåŠ¨é…ç½®çš„ï¼›</p><p>å¦‚æœæœ‰äº›ç»„ä»¶å¯ä»¥å­˜åœ¨å¤šä¸ªï¼Œæ¯”å¦‚æˆ‘ä»¬çš„è§†å›¾è§£æå™¨ï¼Œå°±å°†ç”¨æˆ·é…ç½®çš„å’Œè‡ªå·±é»˜è®¤çš„ç»„åˆèµ·æ¥ï¼</p><p><strong>æ‰©å±•ä½¿ç”¨SpringMVC</strong> å®˜æ–¹æ–‡æ¡£å¦‚ä¸‹ï¼š</p><p>If you want to keep Spring Boot MVC features and you want to add additional MVC configuration (interceptors, formatters, view controllers, and other features), you can add your own @Configuration class of type WebMvcConfigurer but without @EnableWebMvc. If you wish to provide custom instances of RequestMappingHandlerMapping, RequestMappingHandlerAdapter, or ExceptionHandlerExceptionResolver, you can declare a WebMvcRegistrationsAdapter instance to provide such components.</p><p>æˆ‘ä»¬è¦åšçš„å°±æ˜¯ç¼–å†™ä¸€ä¸ª@Configurationæ³¨è§£ç±»ï¼Œå¹¶ä¸”ç±»å‹è¦ä¸ºWebMvcConfigurerï¼Œè¿˜ä¸èƒ½æ ‡æ³¨@EnableWebMvcæ³¨è§£ï¼›æˆ‘ä»¬å»è‡ªå·±å†™ä¸€ä¸ªï¼›æˆ‘ä»¬æ–°å»ºä¸€ä¸ªåŒ…å«configï¼Œå†™ä¸€ä¸ªç±»MyMvcConfigï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//åº”ä¸ºç±»å‹è¦æ±‚ä¸ºWebMvcConfigurerï¼Œæ‰€ä»¥æˆ‘ä»¬å®ç°å…¶æ¥å£</span><br><span class="hljs-comment">//å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰ç±»æ‰©å±•MVCçš„åŠŸèƒ½</span><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyMvcConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">WebMvcConfigurer</span> </span>&#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addViewControllers</span><span class="hljs-params">(ViewControllerRegistry registry)</span> </span>&#123;<br>        <span class="hljs-comment">// æµè§ˆå™¨å‘é€/test ï¼Œ å°±ä¼šè·³è½¬åˆ°testé¡µé¢ï¼›</span><br>        registry.addViewController(<span class="hljs-string">&quot;/test&quot;</span>).setViewName(<span class="hljs-string">&quot;test&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å»æµè§ˆå™¨è®¿é—®ä¸€ä¸‹ï¼š<strong>ç¡®å®ä¹Ÿè·³è½¬è¿‡æ¥äº†ï¼æ‰€ä»¥è¯´ï¼Œæˆ‘ä»¬è¦æ‰©å±•SpringMVCï¼Œå®˜æ–¹å°±æ¨èæˆ‘ä»¬è¿™ä¹ˆå»ä½¿ç”¨ï¼Œæ—¢ä¿SpringBootç•™æ‰€æœ‰çš„è‡ªåŠ¨é…ç½®ï¼Œä¹Ÿèƒ½ç”¨æˆ‘ä»¬æ‰©å±•çš„é…ç½®ï¼</strong></p><p>æˆ‘ä»¬å¯ä»¥å»åˆ†æä¸€ä¸‹åŸç†ï¼š</p><p>1ã€WebMvcAutoConfiguration æ˜¯ SpringMVCçš„è‡ªåŠ¨é…ç½®ç±»ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªç±»WebMvcAutoConfigurationAdapter</p><p>2ã€è¿™ä¸ªç±»ä¸Šæœ‰ä¸€ä¸ªæ³¨è§£ï¼Œåœ¨åšå…¶ä»–è‡ªåŠ¨é…ç½®æ—¶ä¼šå¯¼å…¥ï¼š@Import(EnableWebMvcConfiguration.class)</p><p>3ã€æˆ‘ä»¬ç‚¹è¿›EnableWebMvcConfigurationè¿™ä¸ªç±»çœ‹ä¸€ä¸‹ï¼Œå®ƒç»§æ‰¿äº†ä¸€ä¸ªçˆ¶ç±»ï¼šDelegatingWebMvcConfiguration</p><p>è¿™ä¸ªçˆ¶ç±»ä¸­æœ‰è¿™æ ·ä¸€æ®µä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DelegatingWebMvcConfiguration</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">WebMvcConfigurationSupport</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> WebMvcConfigurerComposite configurers = <span class="hljs-keyword">new</span> WebMvcConfigurerComposite();<br>    <br>  <span class="hljs-comment">// ä»å®¹å™¨ä¸­è·å–æ‰€æœ‰çš„webmvcConfigurer</span><br>    <span class="hljs-meta">@Autowired(required = false)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setConfigurers</span><span class="hljs-params">(List&lt;WebMvcConfigurer&gt; configurers)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (!CollectionUtils.isEmpty(configurers)) &#123;<br>            <span class="hljs-keyword">this</span>.configurers.addWebMvcConfigurers(configurers);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>4ã€æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªç±»ä¸­å»å¯»æ‰¾ä¸€ä¸ªæˆ‘ä»¬åˆšæ‰è®¾ç½®çš„viewControllerå½“åšå‚è€ƒï¼Œå‘ç°å®ƒè°ƒç”¨äº†ä¸€ä¸ª</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addViewControllers</span><span class="hljs-params">(ViewControllerRegistry registry)</span> </span>&#123;<br>    <span class="hljs-keyword">this</span>.configurers.addViewControllers(registry);<br>&#125;<br></code></pre></td></tr></table></figure><p>5ã€æˆ‘ä»¬ç‚¹è¿›å»çœ‹ä¸€ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addViewControllers</span><span class="hljs-params">(ViewControllerRegistry registry)</span> </span>&#123;<br>    Iterator var2 = <span class="hljs-keyword">this</span>.delegates.iterator();<br><br>    <span class="hljs-keyword">while</span>(var2.hasNext()) &#123;<br>        <span class="hljs-comment">// å°†æ‰€æœ‰çš„WebMvcConfigurerç›¸å…³é…ç½®æ¥ä¸€èµ·è°ƒç”¨ï¼åŒ…æ‹¬æˆ‘ä»¬è‡ªå·±é…ç½®çš„å’ŒSpringç»™æˆ‘ä»¬é…ç½®çš„</span><br>        WebMvcConfigurer delegate = (WebMvcConfigurer)var2.next();<br>        delegate.addViewControllers(registry);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>æ‰€ä»¥å¾—å‡ºç»“è®ºï¼šæ‰€æœ‰çš„WebMvcConfigurationéƒ½ä¼šè¢«ä½œç”¨ï¼Œä¸æ­¢Springè‡ªå·±çš„é…ç½®ç±»ï¼Œæˆ‘ä»¬è‡ªå·±çš„é…ç½®ç±»å½“ç„¶ä¹Ÿä¼šè¢«è°ƒç”¨ï¼›</p><h3 id="äº”ã€å…¨é¢æ¥ç®¡SpringMVC"><a href="#äº”ã€å…¨é¢æ¥ç®¡SpringMVC" class="headerlink" title="äº”ã€å…¨é¢æ¥ç®¡SpringMVC"></a>äº”ã€å…¨é¢æ¥ç®¡SpringMVC</h3><p>å®˜æ–¹æ–‡æ¡£ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs markdown">If you want to take complete control of Spring MVC<br>you can add your own @Configuration annotated with @EnableWebMvc.<br></code></pre></td></tr></table></figure><p>å…¨é¢æ¥ç®¡å³ï¼šSpringBootå¯¹SpringMVCçš„è‡ªåŠ¨é…ç½®ä¸éœ€è¦äº†ï¼Œæ‰€æœ‰éƒ½æ˜¯æˆ‘ä»¬è‡ªå·±å»é…ç½®ï¼</p><p>åªéœ€åœ¨æˆ‘ä»¬çš„é…ç½®ç±»ä¸­è¦åŠ ä¸€ä¸ª@EnableWebMvcã€‚</p><p>æˆ‘ä»¬çœ‹ä¸‹å¦‚æœæˆ‘ä»¬å…¨é¢æ¥ç®¡äº†SpringMVCäº†ï¼Œæˆ‘ä»¬ä¹‹å‰SpringBootç»™æˆ‘ä»¬é…ç½®çš„é™æ€èµ„æºæ˜ å°„ä¸€å®šä¼šæ— æ•ˆï¼Œæˆ‘ä»¬å¯ä»¥å»æµ‹è¯•ä¸€ä¸‹ï¼›</p><p>ä¸åŠ æ³¨è§£ä¹‹å‰ï¼Œè®¿é—®é¦–é¡µï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B008-MVC%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86/before.png" alt="ç»“æœ"></p><p>ç»™é…ç½®ç±»åŠ ä¸Šæ³¨è§£ï¼š@EnableWebMvc</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B008-MVC%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86/after.png" alt="ç»“æœ"></p><p>æˆ‘ä»¬å‘ç°æ‰€æœ‰çš„SpringMVCè‡ªåŠ¨é…ç½®éƒ½å¤±æ•ˆäº†ï¼å›å½’åˆ°äº†æœ€åˆçš„æ ·å­ï¼›</p><p><strong>å½“ç„¶ï¼Œæˆ‘ä»¬å¼€å‘ä¸­ï¼Œä¸æ¨èä½¿ç”¨å…¨é¢æ¥ç®¡SpringMVC</strong></p><p>æ€è€ƒé—®é¢˜ï¼Ÿä¸ºä»€ä¹ˆåŠ äº†ä¸€ä¸ªæ³¨è§£ï¼Œè‡ªåŠ¨é…ç½®å°±å¤±æ•ˆäº†ï¼æˆ‘ä»¬çœ‹ä¸‹æºç ï¼š</p><ol><li><p>è¿™é‡Œå‘ç°å®ƒæ˜¯å¯¼å…¥äº†ä¸€ä¸ªç±»ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­è¿›å»çœ‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Import(&#123;DelegatingWebMvcConfiguration.class&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> EnableWebMvc &#123;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å®ƒç»§æ‰¿äº†ä¸€ä¸ªçˆ¶ç±» WebMvcConfigurationSupport</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DelegatingWebMvcConfiguration</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">WebMvcConfigurationSupport</span> </span>&#123;<br>  <span class="hljs-comment">// ......</span><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹Webmvcè‡ªåŠ¨é…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br><span class="hljs-meta">@ConditionalOnWebApplication(type = Type.SERVLET)</span><br><span class="hljs-meta">@ConditionalOnClass(&#123; Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class &#125;)</span><br><span class="hljs-comment">// è¿™ä¸ªæ³¨è§£çš„æ„æ€å°±æ˜¯ï¼šå®¹å™¨ä¸­æ²¡æœ‰è¿™ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œè¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»æ‰ç”Ÿæ•ˆ</span><br><span class="hljs-meta">@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)</span><br><span class="hljs-meta">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10)</span><br><span class="hljs-meta">@AutoConfigureAfter(&#123; DispatcherServletAutoConfiguration.class, TaskExecutionAutoConfiguration.class,</span><br><span class="hljs-meta">                     ValidationAutoConfiguration.class &#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WebMvcAutoConfiguration</span> </span>&#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ä¸€å¥è¯ï¼š@EnableWebMvcå°†WebMvcConfigurationSupportç»„ä»¶å¯¼å…¥è¿›æ¥äº†ï¼›</p><p>è€Œå¯¼å…¥çš„WebMvcConfigurationSupportåªæ˜¯SpringMVCæœ€åŸºæœ¬çš„åŠŸèƒ½ï¼</p></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBootç¬”è®°07-Thymeleafæ¨¡æ¿å¼•æ“</title>
    <link href="/posts/2021/01/08/SpringBoot%E7%AC%94%E8%AE%B007-Thymeleaf%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/"/>
    <url>/posts/2021/01/08/SpringBoot%E7%AC%94%E8%AE%B007-Thymeleaf%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/</url>
    
    <content type="html"><![CDATA[<h2 id="Thymeleaf"><a href="#Thymeleaf" class="headerlink" title="Thymeleaf"></a>Thymeleaf</h2><h3 id="ä¸€ã€æ¨¡æ¿å¼•æ“"><a href="#ä¸€ã€æ¨¡æ¿å¼•æ“" class="headerlink" title="ä¸€ã€æ¨¡æ¿å¼•æ“"></a>ä¸€ã€æ¨¡æ¿å¼•æ“</h3><p>å‰ç«¯äº¤ç»™æˆ‘ä»¬çš„é¡µé¢ï¼Œæ˜¯htmlé¡µé¢ã€‚å¦‚æœæ˜¯æˆ‘ä»¬ä»¥å‰å¼€å‘ï¼Œæˆ‘ä»¬éœ€è¦æŠŠä»–ä»¬è½¬æˆjspé¡µé¢ï¼Œjspå¥½å¤„å°±æ˜¯å½“æˆ‘ä»¬æŸ¥å‡ºä¸€äº›æ•°æ®è½¬å‘åˆ°JSPé¡µé¢ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥ç”¨jspè½»æ¾å®ç°æ•°æ®çš„æ˜¾ç¤ºï¼ŒåŠäº¤äº’ç­‰ã€‚</p><p>jspæ”¯æŒéå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬èƒ½å†™Javaä»£ç ï¼Œä½†æ˜¯å‘¢ï¼Œæˆ‘ä»¬ç°åœ¨çš„è¿™ç§æƒ…å†µï¼ŒSpringBootè¿™ä¸ªé¡¹ç›®é¦–å…ˆæ˜¯ä»¥jarçš„æ–¹å¼ï¼Œä¸æ˜¯warï¼Œåƒç¬¬äºŒï¼Œæˆ‘ä»¬ç”¨çš„è¿˜æ˜¯åµŒå…¥å¼çš„Tomcatï¼Œæ‰€ä»¥å‘¢ï¼Œ<strong>ä»–ç°åœ¨é»˜è®¤æ˜¯ä¸æ”¯æŒjspçš„</strong>ã€‚</p><p>é‚£ä¸æ”¯æŒjspï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥ç”¨çº¯é™æ€é¡µé¢çš„æ–¹å¼ï¼Œé‚£ç»™æˆ‘ä»¬å¼€å‘ä¼šå¸¦æ¥éå¸¸å¤§çš„éº»çƒ¦ï¼Œé‚£æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p><strong>SpringBootæ¨èä½ å¯ä»¥æ¥ä½¿ç”¨æ¨¡æ¿å¼•æ“ï¼š</strong></p><p>æ¨¡æ¿å¼•æ“ï¼Œæˆ‘ä»¬å…¶å®å¤§å®¶å¬åˆ°å¾ˆå¤šï¼Œå…¶å®jspå°±æ˜¯ä¸€ä¸ªæ¨¡æ¿å¼•æ“ï¼Œè¿˜æœ‰ç”¨çš„æ¯”è¾ƒå¤šçš„freemarkerï¼ŒåŒ…æ‹¬SpringBootç»™æˆ‘ä»¬æ¨èçš„Thymeleafï¼Œæ¨¡æ¿å¼•æ“æœ‰éå¸¸å¤šï¼Œä½†å†å¤šçš„æ¨¡æ¿å¼•æ“ï¼Œä»–ä»¬çš„æ€æƒ³éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä»€ä¹ˆæ ·ä¸€ä¸ªæ€æƒ³å‘¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™å¼ å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B007-Thymeleaf%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/template_engine.png" alt="æ¨¡æ¿å¼•æ“"></p><p>æ¨¡æ¿å¼•æ“çš„ä½œç”¨å°±æ˜¯æˆ‘ä»¬æ¥å†™ä¸€ä¸ªé¡µé¢æ¨¡æ¿ï¼Œæ¯”å¦‚æœ‰äº›å€¼å‘¢ï¼Œæ˜¯åŠ¨æ€çš„ï¼Œæˆ‘ä»¬å†™ä¸€äº›è¡¨è¾¾å¼ã€‚è€Œè¿™äº›å€¼ï¼Œä»å“ªæ¥å‘¢ï¼Œå°±æ˜¯æˆ‘ä»¬åœ¨åå°å°è£…ä¸€äº›æ•°æ®ã€‚ç„¶åæŠŠè¿™ä¸ªæ¨¡æ¿å’Œè¿™ä¸ªæ•°æ®äº¤ç»™æˆ‘ä»¬æ¨¡æ¿å¼•æ“ï¼Œæ¨¡æ¿å¼•æ“æŒ‰ç…§æˆ‘ä»¬è¿™ä¸ªæ•°æ®å¸®ä½ æŠŠè¿™è¡¨è¾¾å¼è§£æã€å¡«å……åˆ°æˆ‘ä»¬æŒ‡å®šçš„ä½ç½®ï¼Œç„¶åæŠŠè¿™ä¸ªæ•°æ®æœ€ç»ˆç”Ÿæˆä¸€ä¸ªæˆ‘ä»¬æƒ³è¦çš„å†…å®¹ç»™æˆ‘ä»¬å†™å‡ºå»ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¿™ä¸ªæ¨¡æ¿å¼•æ“ï¼Œä¸ç®¡æ˜¯jspè¿˜æ˜¯å…¶ä»–æ¨¡æ¿å¼•æ“ï¼Œéƒ½æ˜¯è¿™ä¸ªæ€æƒ³ã€‚åªä¸è¿‡å‘¢ï¼Œå°±æ˜¯è¯´ä¸åŒæ¨¡æ¿å¼•æ“ä¹‹é—´ï¼Œä»–ä»¬å¯èƒ½è¿™ä¸ªè¯­æ³•æœ‰ç‚¹ä¸ä¸€æ ·ã€‚å…¶ä»–çš„æˆ‘å°±ä¸ä»‹ç»äº†ï¼Œæˆ‘ä¸»è¦æ¥ä»‹ç»ä¸€ä¸‹SpringBootç»™æˆ‘ä»¬æ¨èçš„Thymeleafæ¨¡æ¿å¼•æ“ï¼Œè¿™æ¨¡æ¿å¼•æ“å‘¢ï¼Œæ˜¯ä¸€ä¸ªé«˜çº§è¯­è¨€çš„æ¨¡æ¿å¼•æ“ï¼Œä»–çš„è¿™ä¸ªè¯­æ³•æ›´ç®€å•ã€‚è€Œä¸”å‘¢ï¼ŒåŠŸèƒ½æ›´å¼ºå¤§ã€‚</p><p>æˆ‘ä»¬å‘¢ï¼Œå°±æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ¨¡æ¿å¼•æ“ï¼Œé‚£æ—¢ç„¶è¦çœ‹è¿™ä¸ªæ¨¡æ¿å¼•æ“ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹SpringBooté‡Œè¾¹æ€ä¹ˆç”¨ã€‚</p><h3 id="äºŒã€å¼•å…¥Thymeleaf"><a href="#äºŒã€å¼•å…¥Thymeleaf" class="headerlink" title="äºŒã€å¼•å…¥Thymeleaf"></a>äºŒã€å¼•å…¥Thymeleaf</h3><p>æ€ä¹ˆå¼•å…¥å‘¢ï¼Œå¯¹äºspringbootæ¥è¯´ï¼Œä»€ä¹ˆäº‹æƒ…ä¸éƒ½æ˜¯ä¸€ä¸ªstartçš„äº‹æƒ…å˜›ï¼Œæˆ‘ä»¬å»åœ¨é¡¹ç›®ä¸­å¼•å…¥ä¸€ä¸‹ã€‚è¿™é‡Œä¸‰ä¸ªç½‘å€ï¼š</p><p>Thymeleaf å®˜ç½‘ï¼š<a href="https://www.thymeleaf.org/">https://www.thymeleaf.org/</a></p><p>Thymeleaf åœ¨Github çš„ä¸»é¡µï¼š<a href="https://github.com/thymeleaf/thymeleaf">https://github.com/thymeleaf/thymeleaf</a></p><p>Springå®˜æ–¹æ–‡æ¡£ï¼šæ‰¾åˆ°æˆ‘ä»¬å¯¹åº”çš„ç‰ˆæœ¬</p><p><a href="https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#using-boot-starter">https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#using-boot-starter</a></p><p>æ‰¾åˆ°å¯¹åº”çš„pomä¾èµ–ï¼šå¯ä»¥é€‚å½“ç‚¹è¿›æºç çœ‹ä¸‹æœ¬æ¥çš„åŒ…ï¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--thymeleaf--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="ä¸‰ã€Thymeleafåˆ†æ"><a href="#ä¸‰ã€Thymeleafåˆ†æ" class="headerlink" title="ä¸‰ã€Thymeleafåˆ†æ"></a>ä¸‰ã€Thymeleafåˆ†æ</h3><p>å‰é¢å‘¢ï¼Œæˆ‘ä»¬å·²ç»å¼•å…¥äº†Thymeleafï¼Œé‚£è¿™ä¸ªè¦æ€ä¹ˆä½¿ç”¨å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬é¦–å…ˆå¾—æŒ‰ç…§SpringBootçš„è‡ªåŠ¨é…ç½®åŸç†çœ‹ä¸€ä¸‹æˆ‘ä»¬è¿™ä¸ªThymeleafçš„è‡ªåŠ¨é…ç½®è§„åˆ™ï¼Œåœ¨æŒ‰ç…§é‚£ä¸ªè§„åˆ™ï¼Œæˆ‘ä»¬è¿›è¡Œä½¿ç”¨ã€‚</p><p>æˆ‘ä»¬å»æ‰¾ä¸€ä¸‹Thymeleafçš„è‡ªåŠ¨é…ç½®ç±»ï¼šThymeleafProperties</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ConfigurationProperties(</span><br><span class="hljs-meta">    prefix = &quot;spring.thymeleaf&quot;</span><br><span class="hljs-meta">)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ThymeleafProperties</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Charset DEFAULT_ENCODING;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String DEFAULT_PREFIX = <span class="hljs-string">&quot;classpath:/templates/&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String DEFAULT_SUFFIX = <span class="hljs-string">&quot;.html&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> checkTemplate = <span class="hljs-keyword">true</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> checkTemplateLocation = <span class="hljs-keyword">true</span>;<br>    <span class="hljs-keyword">private</span> String prefix = <span class="hljs-string">&quot;classpath:/templates/&quot;</span>;<br>    <span class="hljs-keyword">private</span> String suffix = <span class="hljs-string">&quot;.html&quot;</span>;<br>    <span class="hljs-keyword">private</span> String mode = <span class="hljs-string">&quot;HTML&quot;</span>;<br>    <span class="hljs-keyword">private</span> Charset encoding;<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­çœ‹åˆ°é»˜è®¤çš„å‰ç¼€å’Œåç¼€ï¼</p><p>æˆ‘ä»¬åªéœ€è¦æŠŠæˆ‘ä»¬çš„htmlé¡µé¢æ”¾åœ¨ç±»è·¯å¾„ä¸‹çš„templatesä¸‹ï¼Œthymeleafå°±å¯ä»¥å¸®æˆ‘ä»¬è‡ªåŠ¨æ¸²æŸ“äº†ã€‚</p><p>ä½¿ç”¨thymeleafä»€ä¹ˆéƒ½ä¸éœ€è¦é…ç½®ï¼Œåªéœ€è¦å°†ä»–æ”¾åœ¨æŒ‡å®šçš„æ–‡ä»¶å¤¹ä¸‹å³å¯ï¼</p><h3 id="å››ã€æµ‹è¯•"><a href="#å››ã€æµ‹è¯•" class="headerlink" title="å››ã€æµ‹è¯•"></a>å››ã€æµ‹è¯•</h3><ol><li><p>ç¼–å†™ä¸€ä¸ªTestController</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestController</span> </span>&#123;<br>    <br>    <span class="hljs-meta">@RequestMapping(&quot;/t1&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">test1</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-comment">//classpath:/templates/test.html</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;test&quot;</span>;<br>    &#125;<br>    <br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™ä¸€ä¸ªæµ‹è¯•é¡µé¢  test.html æ”¾åœ¨ templates ç›®å½•ä¸‹</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;!DOCTYPE html&gt;<br>&lt;html lang=<span class="hljs-string">&quot;en&quot;</span> xmlns:th=<span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;<br>&lt;head&gt;<br>    &lt;meta charset=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;<br>    &lt;title&gt;Title&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>&lt;h1&gt;æµ‹è¯•é¡µé¢&lt;/h1&gt;<br><br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure></li><li><p>å¯åŠ¨é¡¹ç›®è¯·æ±‚æµ‹è¯•</p></li></ol><h3 id="äº”ã€Thymeleafè¯­æ³•å­¦ä¹ "><a href="#äº”ã€Thymeleafè¯­æ³•å­¦ä¹ " class="headerlink" title="äº”ã€Thymeleafè¯­æ³•å­¦ä¹ "></a>äº”ã€Thymeleafè¯­æ³•å­¦ä¹ </h3><p>è¦å­¦ä¹ è¯­æ³•ï¼Œè¿˜æ˜¯å‚è€ƒå®˜ç½‘æ–‡æ¡£æœ€ä¸ºå‡†ç¡®ï¼Œæˆ‘ä»¬æ‰¾åˆ°å¯¹åº”çš„ç‰ˆæœ¬çœ‹ä¸€ä¸‹ï¼›</p><p>Thymeleaf å®˜ç½‘ï¼š<a href="https://www.thymeleaf.org/">https://www.thymeleaf.org/</a> ï¼Œ ç®€å•çœ‹ä¸€ä¸‹å®˜ç½‘ï¼æˆ‘ä»¬å»ä¸‹è½½Thymeleafçš„å®˜æ–¹æ–‡æ¡£ï¼</p><p><strong>æˆ‘ä»¬åšä¸ªæœ€ç®€å•çš„ç»ƒä¹  ï¼šæˆ‘ä»¬éœ€è¦æŸ¥å‡ºä¸€äº›æ•°æ®ï¼Œåœ¨é¡µé¢ä¸­å±•ç¤º</strong></p><ol><li><p>ä¿®æ”¹æµ‹è¯•è¯·æ±‚ï¼Œå¢åŠ æ•°æ®ä¼ è¾“ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/t1&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">test1</span><span class="hljs-params">(Model model)</span></span>&#123;<br>    <span class="hljs-comment">//å­˜å…¥æ•°æ®</span><br>    model.addAttribute(<span class="hljs-string">&quot;msg&quot;</span>,<span class="hljs-string">&quot;Hello,Thymeleaf&quot;</span>);<br>    <span class="hljs-comment">//classpath:/templates/test.html</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;test&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æˆ‘ä»¬è¦ä½¿ç”¨thymeleafï¼Œéœ€è¦åœ¨htmlæ–‡ä»¶ä¸­å¯¼å…¥å‘½åç©ºé—´çš„çº¦æŸï¼Œæ–¹ä¾¿æç¤ºã€‚</p><p>æˆ‘ä»¬å¯ä»¥å»å®˜æ–¹æ–‡æ¡£çš„#3ä¸­çœ‹ä¸€ä¸‹å‘½åç©ºé—´æ‹¿æ¥è¿‡æ¥ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">xmlns:th=&quot;http://www.thymeleaf.org&quot;<br></code></pre></td></tr></table></figure></li><li><p>æˆ‘ä»¬å»ç¼–å†™ä¸‹å‰ç«¯é¡µé¢</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-comment">&lt;!--æ‰€æœ‰çš„htmlå…ƒç´ éƒ½å¯ä»¥è¢« thymeleafæ›¿æ¢æ¥ç®¡ï¼š thï¼šå…ƒç´ å--&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;msg&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>å¯åŠ¨æµ‹è¯•</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B007-Thymeleaf%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/test.png" alt="æµ‹è¯•ç»“æœ"></p></li></ol><p><strong>å…¥é—¨æå®šï¼Œæˆ‘ä»¬æ¥è®¤çœŸç ”ä¹ ä¸€ä¸‹Thymeleafçš„ä½¿ç”¨è¯­æ³•ï¼</strong></p><ol><li><p><strong>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»»æ„çš„ th:attr æ¥æ›¿æ¢Htmlä¸­åŸç”Ÿå±æ€§çš„å€¼ï¼</strong></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B007-Thymeleaf%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/%E8%AF%AD%E6%B3%95.png" alt="è¯­æ³•"></p></li></ol><ol start="2"><li><p><strong>æˆ‘ä»¬èƒ½å†™å“ªäº›è¡¨è¾¾å¼å‘¢ï¼Ÿ</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs ABAP">Simple expressions:ï¼ˆè¡¨è¾¾å¼è¯­æ³•ï¼‰<br>Variable Expressions: $&#123;...&#125;ï¼šè·å–å˜é‡å€¼ï¼›OGNLï¼›<br>    1ï¼‰ã€è·å–å¯¹è±¡çš„å±æ€§ã€è°ƒç”¨æ–¹æ³•<br>    2ï¼‰ã€ä½¿ç”¨å†…ç½®çš„åŸºæœ¬å¯¹è±¡ï¼š#18<br>         #ctx : the context object.<br>         #vars: the context variables.<br>         #locale : the context locale.<br>         #request : (only in Web Contexts) the HttpServletRequest object.<br>         #response : (only in Web Contexts) the HttpServletResponse object.<br>         #session : (only in Web Contexts) the HttpSession object.<br>         #servletContext : (only in Web Contexts) the ServletContext object.<br><br>    3ï¼‰ã€å†…ç½®çš„ä¸€äº›å·¥å…·å¯¹è±¡ï¼š<br>ã€€ã€€ã€€ã€€ã€€ã€€#execInfo : information about the template being processed.<br>ã€€ã€€ã€€ã€€ã€€ã€€#uris : methods for escaping parts of URLs&#x2F;URIs<br>ã€€ã€€ã€€ã€€ã€€ã€€#conversions : methods for executing the configured conversion service (if any).<br>ã€€ã€€ã€€ã€€ã€€ã€€#dates : methods for java.util.Date objects: formatting, component extraction, etc.<br>ã€€ã€€ã€€ã€€ã€€ã€€#calendars : analogous to #dates , but for java.util.Calendar objects.<br>ã€€ã€€ã€€ã€€ã€€ã€€#numbers : methods for formatting numeric objects.<br>ã€€ã€€ã€€ã€€ã€€ã€€#strings : methods for String objects: contains, startsWith, prepending&#x2F;appending, etc.<br>ã€€ã€€ã€€ã€€ã€€ã€€#objects : methods for objects in general.<br>ã€€ã€€ã€€ã€€ã€€ã€€#bools : methods for boolean evaluation.<br>ã€€ã€€ã€€ã€€ã€€ã€€#arrays : methods for arrays.<br>ã€€ã€€ã€€ã€€ã€€ã€€#lists : methods for lists.<br>ã€€ã€€ã€€ã€€ã€€ã€€#sets : methods for sets.<br>ã€€ã€€ã€€ã€€ã€€ã€€#maps : methods for maps.<br>ã€€ã€€ã€€ã€€ã€€ã€€#aggregates : methods for creating aggregates on arrays or collections.<br>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br><br>  Selection Variable Expressions: *&#123;...&#125;ï¼šé€‰æ‹©è¡¨è¾¾å¼ï¼šå’Œ$&#123;&#125;åœ¨åŠŸèƒ½ä¸Šæ˜¯ä¸€æ ·ï¼›<br>  Message Expressions: #&#123;...&#125;ï¼šè·å–å›½é™…åŒ–å†…å®¹<br>  Link URL Expressions: @&#123;...&#125;ï¼šå®šä¹‰URLï¼›<br>  Fragment Expressions: ~&#123;...&#125;ï¼šç‰‡æ®µå¼•ç”¨è¡¨è¾¾å¼<br><br>Literalsï¼ˆå­—é¢é‡ï¼‰<br>      Text literals: &#39;one text&#39; , &#39;Another one!&#39; ,â€¦<br>      Number literals: 0 , 34 , 3.0 , 12.3 ,â€¦<br>      Boolean literals: true , false<br>      Null literal: null<br>      Literal tokens: one , sometext , main ,â€¦<br>      <br>Text operations:ï¼ˆæ–‡æœ¬æ“ä½œï¼‰<br>    String concatenation: +<br>    Literal substitutions: |The name is $&#123;name&#125;|<br>    <br>Arithmetic operations:ï¼ˆæ•°å­¦è¿ç®—ï¼‰<br>    Binary operators: + , - , * , &#x2F; , %<br>    Minus sign (unary operator): -<br>    <br>Boolean operations:ï¼ˆå¸ƒå°”è¿ç®—ï¼‰<br>    Binary operators: and , or<br>    Boolean negation (unary operator): ! , not<br>    <br>Comparisons and equality:ï¼ˆæ¯”è¾ƒè¿ç®—ï¼‰<br>    Comparators: &gt; , &lt; , &gt;&#x3D; , &lt;&#x3D; ( gt , lt , ge , le )<br>    Equality operators: &#x3D;&#x3D; , !&#x3D; ( eq , ne )<br>    <br>Conditional operators:æ¡ä»¶è¿ç®—ï¼ˆä¸‰å…ƒè¿ç®—ç¬¦ï¼‰<br>    If-then: (if) ? (then)<br>    If-then-else: (if) ? (then) : (else)<br>    Default: (value) ?: (defaultvalue)<br>    <br>Special tokens:<br>    No-Operation: _<br></code></pre></td></tr></table></figure></li></ol><h3 id="å…­ã€ç»ƒä¹ æµ‹è¯•"><a href="#å…­ã€ç»ƒä¹ æµ‹è¯•" class="headerlink" title="å…­ã€ç»ƒä¹ æµ‹è¯•"></a>å…­ã€ç»ƒä¹ æµ‹è¯•</h3><ol><li><p>æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªControllerï¼Œæ”¾ä¸€äº›æ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/t2&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">test2</span><span class="hljs-params">(Map&lt;String,Object&gt; map)</span></span>&#123;<br>    <span class="hljs-comment">//å­˜å…¥æ•°æ®</span><br>    map.put(<span class="hljs-string">&quot;msg&quot;</span>,<span class="hljs-string">&quot;&lt;h1&gt;Hello&lt;/h1&gt;&quot;</span>);<br>    map.put(<span class="hljs-string">&quot;users&quot;</span>, Arrays.asList(<span class="hljs-string">&quot;qinjiang&quot;</span>,<span class="hljs-string">&quot;kuangshen&quot;</span>));<br>    <span class="hljs-comment">//classpath:/templates/test.html</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;test&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æµ‹è¯•é¡µé¢å–å‡ºæ•°æ®</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ç‹‚ç¥è¯´<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æµ‹è¯•é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;msg&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-comment">&lt;!--ä¸è½¬ä¹‰--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:utext</span>=<span class="hljs-string">&quot;$&#123;msg&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--éå†æ•°æ®--&gt;</span><br><span class="hljs-comment">&lt;!--th:eachæ¯æ¬¡éå†éƒ½ä¼šç”Ÿæˆå½“å‰è¿™ä¸ªæ ‡ç­¾ï¼šå®˜ç½‘#9--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h4</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;user :$&#123;users&#125;&quot;</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;user&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--è¡Œå†…å†™æ³•ï¼šå®˜ç½‘#12--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;user:$&#123;users&#125;&quot;</span>&gt;</span>[[$&#123;user&#125;]]<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>å¯åŠ¨é¡¹ç›®æµ‹è¯•ï¼</p></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBootç¬”è®°06-é™æ€èµ„æºæ˜ å°„è§„åˆ™</title>
    <link href="/posts/2021/01/08/SpringBoot%E7%AC%94%E8%AE%B006-%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%98%A0%E5%B0%84%E8%A7%84%E5%88%99/"/>
    <url>/posts/2021/01/08/SpringBoot%E7%AC%94%E8%AE%B006-%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%98%A0%E5%B0%84%E8%A7%84%E5%88%99/</url>
    
    <content type="html"><![CDATA[<h2 id="é™æ€èµ„æºå¯¼å…¥æºç åˆ†æ"><a href="#é™æ€èµ„æºå¯¼å…¥æºç åˆ†æ" class="headerlink" title="é™æ€èµ„æºå¯¼å…¥æºç åˆ†æ"></a>é™æ€èµ„æºå¯¼å…¥æºç åˆ†æ</h2><blockquote><p>åˆ†æé™æ€èµ„æºæ—¶å¦‚ä½•å¯¼å…¥çš„ï¼Œæˆ‘ä»¬å°±è¦åˆ†æä¸€æ³¢æºç äº†ã€‚</p></blockquote><h3 id="ä¸€ã€é™æ€èµ„æºæ˜ å°„è§„åˆ™"><a href="#ä¸€ã€é™æ€èµ„æºæ˜ å°„è§„åˆ™" class="headerlink" title="ä¸€ã€é™æ€èµ„æºæ˜ å°„è§„åˆ™"></a>ä¸€ã€é™æ€èµ„æºæ˜ å°„è§„åˆ™</h3><p><strong>é¦–å…ˆï¼Œæˆ‘ä»¬æ­å»ºä¸€ä¸ªæ™®é€šçš„SpringBooté¡¹ç›®ï¼Œå›é¡¾ä¸€ä¸‹HelloWorldç¨‹åºï¼</strong></p><p>å†™è¯·æ±‚æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œé‚£æˆ‘ä»¬è¦å¼•å…¥å‰ç«¯èµ„æºï¼Œæˆ‘ä»¬é¡¹ç›®ä¸­è®¸å¤šçš„é™æ€èµ„æºï¼Œæ¯”å¦‚cssï¼Œjsç­‰æ–‡ä»¶ï¼Œè¿™ä¸ªSpringBootæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p><p>ä¹‹å‰ï¼Œæˆ‘ä»¬æ˜¯ä¸€ä¸ªwebåº”ç”¨ï¼Œæˆ‘ä»¬çš„mainç›®å½•ä¸‹ä¼šæœ‰ä¸€ä¸ªwebappï¼Œæˆ‘ä»¬ä»¥å‰éƒ½æ˜¯æŠŠæ‰€æœ‰çš„é¡µé¢å¯¼å…¥åˆ°è¿™é‡Œçš„ã€‚ä½†æ˜¯æˆ‘ä»¬ç°åœ¨pomï¼Œæ‰“åŒ…æ–¹å¼æ˜¯æ‰“jaråŒ…ï¼Œé‚£è¿™ç§æ–¹å¼SpringBootèƒ½ä¸èƒ½æ¥ç»™æˆ‘ä»¬å†™é¡µé¢å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯<strong>SpringBootå¯¹äºé™æ€èµ„æºæ”¾ç½®çš„ä½ç½®ï¼Œæ˜¯æœ‰è§„å®šçš„</strong>ã€‚</p><p>åœ¨SpringBootä¸­ï¼ŒSpringMVCçš„webé…ç½®éƒ½åœ¨<code>WebMvcAutoConfiguration</code>è¿™ä¸ªé…ç½®ç±»é‡Œé¢ï¼›</p><p>æˆ‘ä»¬å¯ä»¥å»çœ‹çœ‹è¿™ä¸ªç±»é‡Œé¢ <code>WebMvcAutoConfigurationAdapter</code>ä¸­æœ‰å¾ˆå¤šé…ç½®æ–¹æ³•ï¼›</p><p>å…¶ä¸­æœ‰ä¸€ä¸ªæ–¹æ³• <code>addResourcrHandlers</code> ï¼Œè¿›è¡Œäº†èµ„æºæ·»åŠ å¤„ç†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addResourceHandlers</span><span class="hljs-params">(ResourceHandlerRegistry registry)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.resourceProperties.isAddMappings()) &#123;<br>        <span class="hljs-comment">// å·²ç¦ç”¨é»˜è®¤èµ„æºå¤„ç†</span><br>        logger.debug(<span class="hljs-string">&quot;Default resource handling disabled&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-comment">// ç¼“å­˜æ§åˆ¶</span><br>    Duration cachePeriod = <span class="hljs-keyword">this</span>.resourceProperties.getCache().getPeriod();<br>    CacheControl cacheControl = <span class="hljs-keyword">this</span>.resourceProperties.getCache().getCachecontrol().toHttpCacheControl();<br>    <span class="hljs-comment">// webjarsé…ç½®</span><br>    <span class="hljs-keyword">if</span> (!registry.hasMappingForPattern(<span class="hljs-string">&quot;/webjars/**&quot;</span>)) &#123;<br>        customizeResourceHandlerRegistration(registry.addResourceHandler(<span class="hljs-string">&quot;/webjars/**&quot;</span>)<br>                                             .addResourceLocations(<span class="hljs-string">&quot;classpath:/META-INF/resources/webjars/&quot;</span>)<br>                                             .setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl)<br>                                             .setUseLastModified(<span class="hljs-keyword">this</span>.resourceProperties.getCache().isUseLastModified()));<br>    &#125;<br>    <span class="hljs-comment">// é™æ€èµ„æºé…ç½®</span><br>    String staticPathPattern = <span class="hljs-keyword">this</span>.mvcProperties.getStaticPathPattern();<br>    <span class="hljs-keyword">if</span> (!registry.hasMappingForPattern(staticPathPattern)) &#123;<br>        customizeResourceHandlerRegistration(registry.addResourceHandler(staticPathPattern)                                        .addResourceLocations(getResourceLocations(<span class="hljs-keyword">this</span>.resourceProperties.getStaticLocations()))<br>                                             .setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl)<br>                                             .setUseLastModified(<span class="hljs-keyword">this</span>.resourceProperties.getCache().isUseLastModified()));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¥½ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸¤ç§èµ„æºå¤„ç†çš„æ–¹å¼ï¼Œä¸‹é¢è¿›è¡Œä¸€ä¸€è§£æã€‚</p><h3 id="äºŒã€webjarsâ€”ä»¥jaråŒ…æ–¹å¼å¯¼å…¥èµ„æº"><a href="#äºŒã€webjarsâ€”ä»¥jaråŒ…æ–¹å¼å¯¼å…¥èµ„æº" class="headerlink" title="äºŒã€webjarsâ€”ä»¥jaråŒ…æ–¹å¼å¯¼å…¥èµ„æº"></a>äºŒã€webjarsâ€”ä»¥jaråŒ…æ–¹å¼å¯¼å…¥èµ„æº</h3><p>é‚£ä»€ä¹ˆæ˜¯webjarså‘¢ï¼Ÿ</p><p>webjarsæœ¬è´¨å°±æ˜¯<strong>ä»¥jaråŒ…çš„æ–¹å¼å¼•å…¥æˆ‘ä»¬çš„é™æ€èµ„æº</strong>ï¼Œæˆ‘ä»¬ä»¥å‰è¦å¯¼å…¥ä¸€ä¸ªé™æ€èµ„æºæ–‡ä»¶ï¼Œç›´æ¥å¯¼å…¥å³å¯ã€‚</p><p>å®˜ç½‘ï¼š<a href="https://www.webjars.org/">https://www.webjars.org</a></p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨jqueryï¼Œæˆ‘ä»¬å°±åªéœ€è¦å¼•å…¥jqueryå¯¹åº”ç‰ˆæœ¬çš„pomä¾èµ–å³å¯ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBootç¬”è®°06-é™æ€èµ„æºæ˜ å°„è§„åˆ™/webjars.png" alt="webjarså¯¼åŒ…" style="zoom:80%;"><p>å¯¼å…¥å®Œæ¯•åï¼ŒæŸ¥çœ‹webjarsç›®å½•ç»“æ„ï¼Œå°±å¯ä»¥è®¿é—®åˆ°jquery.jsæ–‡ä»¶ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B006-%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%98%A0%E5%B0%84%E8%A7%84%E5%88%99/webjars_jquery.png" alt="webjarsç›®å½•ä¸‹çš„jquery"></p><p>è®¿é—®ï¼šåªè¦æ˜¯é™æ€èµ„æºï¼ŒSpringBootå°±ä¼šå»å¯¹åº”çš„è·¯å¾„å¯»æ‰¾èµ„æºï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œè®¿é—®ï¼š<a href="http://localhost:8080/webjars/jquery/3.5.1/jquery.js">http://localhost:8080/webjars/jquery/3.5.1/jquery.js</a></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBootç¬”è®°06-é™æ€èµ„æºæ˜ å°„è§„åˆ™/url_jquery.png" alt="ç½‘é¡µè®¿é—®é™æ€èµ„æº" style="zoom:80%;"><h3 id="ä¸‰ã€-â€”è®¿é—®é™æ€èµ„æºæ–‡ä»¶å¤¹"><a href="#ä¸‰ã€-â€”è®¿é—®é™æ€èµ„æºæ–‡ä»¶å¤¹" class="headerlink" title="ä¸‰ã€/**â€”è®¿é—®é™æ€èµ„æºæ–‡ä»¶å¤¹"></a>ä¸‰ã€/**â€”è®¿é—®é™æ€èµ„æºæ–‡ä»¶å¤¹</h3><p>é‚£æˆ‘ä»¬é¡¹ç›®ä¸­è¦æ˜¯ä½¿ç”¨è‡ªå·±çš„é™æ€èµ„æºè¯¥æ€ä¹ˆå¯¼å…¥å‘¢ï¼Ÿæˆ‘ä»¬çœ‹ä¸‹ä¸€è¡Œä»£ç ï¼›</p><p>æˆ‘ä»¬å»æ‰¾staticPathPatternå‘ç°ç¬¬äºŒç§æ˜ å°„è§„åˆ™ ï¼š/** ,</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> String staticPathPattern = <span class="hljs-string">&quot;/**&quot;</span>;<br></code></pre></td></tr></table></figure><p>è®¿é—®å½“å‰çš„é¡¹ç›®ä»»æ„èµ„æºï¼Œå®ƒä¼šå»æ‰¾ <code>resourceProperties</code> è¿™ä¸ªç±»ï¼Œåœ¨ä»è¿™ä¸ªç±»ç‚¹è¿› <code>WebProperties</code>ç±»ï¼Œæˆ‘ä»¬å¯ä»¥ç‚¹è¿›å»çœ‹ä¸€ä¸‹åˆ†æï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// è¿›å…¥æ–¹æ³•</span><br><span class="hljs-keyword">public</span> String[] getStaticLocations() &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.staticLocations;<br>&#125;<br><span class="hljs-comment">// æ‰¾åˆ°å¯¹åº”çš„å€¼</span><br><span class="hljs-keyword">private</span> String[] staticLocations = CLASSPATH_RESOURCE_LOCATIONS;<br><span class="hljs-comment">//æ‰¾åˆ°è·¯å¾„</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String[] CLASSPATH_RESOURCE_LOCATIONS = &#123; <span class="hljs-string">&quot;classpath:/META-INF/resources/&quot;</span>,<br><span class="hljs-string">&quot;classpath:/resources/&quot;</span>, <span class="hljs-string">&quot;classpath:/static/&quot;</span>, <span class="hljs-string">&quot;classpath:/public/&quot;</span> &#125;;<br></code></pre></td></tr></table></figure><p>ResourceProperties å¯ä»¥è®¾ç½®å’Œæˆ‘ä»¬é™æ€èµ„æºæœ‰å…³çš„å‚æ•°ï¼›è¿™é‡Œé¢æŒ‡å‘äº†å®ƒä¼šå»å¯»æ‰¾èµ„æºçš„æ–‡ä»¶å¤¹ï¼Œå³ä¸Šé¢æ•°ç»„çš„å†…å®¹ã€‚</p><p>æ‰€ä»¥å¾—å‡ºç»“è®ºï¼Œä»¥ä¸‹å››ä¸ªç›®å½•å­˜æ”¾çš„é™æ€èµ„æºå¯ä»¥è¢«æˆ‘ä»¬è¯†åˆ«ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown">&quot;classpath:/META-INF/resources/&quot;<br>&quot;classpath:/resources/&quot;<br>&quot;classpath:/static/&quot;<br>&quot;classpath:/public/&quot;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥åœ¨resourcesæ ¹ç›®å½•ä¸‹æ–°å»ºå¯¹åº”çš„æ–‡ä»¶å¤¹ï¼Œéƒ½å¯ä»¥å­˜æ”¾æˆ‘ä»¬çš„é™æ€æ–‡ä»¶ï¼›</p><p>æ¯”å¦‚æˆ‘ä»¬è®¿é—® <a href="http://localhost:8080/1.js">http://localhost:8080/1.js</a> , ä»–å°±ä¼šå»è¿™äº›æ–‡ä»¶å¤¹ä¸­å¯»æ‰¾å¯¹åº”çš„é™æ€èµ„æºæ–‡ä»¶ï¼›</p><h3 id="å››ã€è‡ªå®šä¹‰é™æ€èµ„æºè·¯å¾„"><a href="#å››ã€è‡ªå®šä¹‰é™æ€èµ„æºè·¯å¾„" class="headerlink" title="å››ã€è‡ªå®šä¹‰é™æ€èµ„æºè·¯å¾„"></a>å››ã€è‡ªå®šä¹‰é™æ€èµ„æºè·¯å¾„</h3><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±é€šè¿‡é…ç½®æ–‡ä»¶æ¥æŒ‡å®šä¸€ä¸‹ï¼Œå“ªäº›æ–‡ä»¶å¤¹æ˜¯éœ€è¦æˆ‘ä»¬æ”¾é™æ€èµ„æºæ–‡ä»¶çš„ï¼Œåœ¨application.propertiesä¸­é…ç½®ï¼›</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-meta">spring.resources.static-locations</span>=<span class="hljs-string">classpath:/coding/,classpath:/atrox/</span><br></code></pre></td></tr></table></figure><p>ä¸€æ—¦è‡ªå·±å®šä¹‰äº†é™æ€æ–‡ä»¶å¤¹çš„è·¯å¾„ï¼ŒåŸæ¥çš„è‡ªåŠ¨é…ç½®å°±éƒ½ä¼šå¤±æ•ˆäº†ï¼</p><h3 id="äº”ã€é¦–é¡µè®¾ç½®"><a href="#äº”ã€é¦–é¡µè®¾ç½®" class="headerlink" title="äº”ã€é¦–é¡µè®¾ç½®"></a>äº”ã€é¦–é¡µè®¾ç½®</h3><p>åœ¨<code>WebMvcAutoConfiguration</code>è¿™ä¸ªç±»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°<code>WelcomePageHandlerMapping</code>è¿™ä¸ªæ¬¢è¿é¡µçš„æ˜ å°„æ–¹æ³•ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„é¦–é¡µã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> WelcomePageHandlerMapping <span class="hljs-title">welcomePageHandlerMapping</span><span class="hljs-params">(ApplicationContext applicationContext,FormattingConversionService mvcConversionService, ResourceUrlProvider mvcResourceUrlProvider)</span> </span>&#123;<br>    WelcomePageHandlerMapping welcomePageHandlerMapping = <span class="hljs-keyword">new</span> WelcomePageHandlerMapping(<br>        <span class="hljs-keyword">new</span> TemplateAvailabilityProviders(applicationContext), applicationContext, getWelcomePage(),<br>        <span class="hljs-keyword">this</span>.mvcProperties.getStaticPathPattern());<br>    welcomePageHandlerMapping.setInterceptors(getInterceptors(mvcConversionService, mvcResourceUrlProvider));<br>    welcomePageHandlerMapping.setCorsConfigurations(getCorsConfigurations());<br>    <span class="hljs-keyword">return</span> welcomePageHandlerMapping;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ä¸‹é¢è¿˜æœ‰ä¸¤ä¸ªæ–¹æ³•<code>getWelcomePage</code>å’Œ<code>getIndexHtml</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">private</span> Optional&lt;Resource&gt; <span class="hljs-title">getWelcomePage</span><span class="hljs-params">()</span> </span>&#123;<br>    String[] locations = getResourceLocations(<span class="hljs-keyword">this</span>.resourceProperties.getStaticLocations());<br>    <span class="hljs-keyword">return</span> Arrays.stream(locations).map(<span class="hljs-keyword">this</span>::getIndexHtml).filter(<span class="hljs-keyword">this</span>::isReadable).findFirst();<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">private</span> Resource <span class="hljs-title">getIndexHtml</span><span class="hljs-params">(String location)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.resourceLoader.getResource(location + <span class="hljs-string">&quot;index.html&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¬¢è¿é¡µï¼Œé™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰ index.html é¡µé¢ï¼›è¢« /** æ˜ å°„ã€‚</p><p>æ¯”å¦‚æˆ‘è®¿é—®  <a href="http://localhost:8080/">http://localhost:8080/</a> ï¼Œå°±ä¼šæ‰¾é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹çš„ index.html</p><p>æ–°å»ºä¸€ä¸ª index.html ï¼Œåœ¨æˆ‘ä»¬ä¸Šé¢çš„3ä¸ªç›®å½•ä¸­ä»»æ„ä¸€ä¸ªï¼›</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B006-%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%98%A0%E5%B0%84%E8%A7%84%E5%88%99/index.png" alt="index.htmlæ”¾åœ¨publicç›®å½•ä¸‹"></p><p>ç„¶åè®¿é—®æµ‹è¯•  <a href="http://localhost:8080/">http://localhost:8080/</a> çœ‹ç»“æœã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B006-%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%98%A0%E5%B0%84%E8%A7%84%E5%88%99/url_index.png" alt="è®¿é—®æµ‹è¯•"></p>]]></content>
    
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBootç¬”è®°05-è‡ªåŠ¨é…ç½®åŸç†å†æ¢</title>
    <link href="/posts/2021/01/08/SpringBoot%E7%AC%94%E8%AE%B005-%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86%E5%86%8D%E6%8E%A2/"/>
    <url>/posts/2021/01/08/SpringBoot%E7%AC%94%E8%AE%B005-%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86%E5%86%8D%E6%8E%A2/</url>
    
    <content type="html"><![CDATA[<h2 id="è‡ªåŠ¨é…ç½®åŸç†"><a href="#è‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="è‡ªåŠ¨é…ç½®åŸç†"></a>è‡ªåŠ¨é…ç½®åŸç†</h2><p><strong>Application.yaml</strong>é…ç½®æ–‡ä»¶åˆ°åº•èƒ½å†™ä»€ä¹ˆï¼Ÿæ€ä¹ˆå†™ï¼ŸSpringBootå®˜æ–¹æ–‡æ¡£ä¸­æœ‰å¤§é‡çš„é…ç½®ï¼Œæˆ‘ä»¬æ— æ³•å…¨éƒ¨è®°ä½ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B005-%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86%E5%86%8D%E6%8E%A2/properties.png" alt="å®˜ç½‘é…ç½®è¯´æ˜"></p><h3 id="ä¸€ã€åˆ†æè‡ªåŠ¨é…ç½®åŸç†"><a href="#ä¸€ã€åˆ†æè‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="ä¸€ã€åˆ†æè‡ªåŠ¨é…ç½®åŸç†"></a>ä¸€ã€åˆ†æè‡ªåŠ¨é…ç½®åŸç†</h3><p>æˆ‘ä»¬ä»¥<strong>HttpEncodingAutoConfigurationï¼ˆHttpç¼–ç è‡ªåŠ¨é…ç½®ï¼‰</strong>ä¸ºä¾‹è§£é‡Šè‡ªåŠ¨é…ç½®åŸç†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œå’Œä»¥å‰ç¼–å†™çš„é…ç½®æ–‡ä»¶ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ï¼›</span><br><span class="hljs-meta">@Configuration</span> <br><br><span class="hljs-comment">//å¯åŠ¨æŒ‡å®šç±»çš„ConfigurationPropertiesåŠŸèƒ½ï¼›</span><br>  <span class="hljs-comment">//è¿›å…¥è¿™ä¸ªHttpPropertiesæŸ¥çœ‹ï¼Œå°†é…ç½®æ–‡ä»¶ä¸­å¯¹åº”çš„å€¼å’ŒHttpPropertiesç»‘å®šèµ·æ¥ï¼›</span><br>  <span class="hljs-comment">//å¹¶æŠŠHttpPropertiesåŠ å…¥åˆ°iocå®¹å™¨ä¸­</span><br><span class="hljs-meta">@EnableConfigurationProperties(&#123;HttpProperties.class&#125;)</span> <br><br><span class="hljs-comment">//Springåº•å±‚@Conditionalæ³¨è§£</span><br>  <span class="hljs-comment">//æ ¹æ®ä¸åŒçš„æ¡ä»¶åˆ¤æ–­ï¼Œå¦‚æœæ»¡è¶³æŒ‡å®šçš„æ¡ä»¶ï¼Œæ•´ä¸ªé…ç½®ç±»é‡Œé¢çš„é…ç½®å°±ä¼šç”Ÿæ•ˆï¼›</span><br>  <span class="hljs-comment">//è¿™é‡Œçš„æ„æ€å°±æ˜¯åˆ¤æ–­å½“å‰åº”ç”¨æ˜¯å¦æ˜¯webåº”ç”¨ï¼Œå¦‚æœæ˜¯ï¼Œå½“å‰é…ç½®ç±»ç”Ÿæ•ˆ</span><br><span class="hljs-meta">@ConditionalOnWebApplication(</span><br><span class="hljs-meta">    type = Type.SERVLET</span><br><span class="hljs-meta">)</span><br><br><span class="hljs-comment">//åˆ¤æ–­å½“å‰é¡¹ç›®æœ‰æ²¡æœ‰è¿™ä¸ªç±»CharacterEncodingFilterï¼›SpringMVCä¸­è¿›è¡Œä¹±ç è§£å†³çš„è¿‡æ»¤å™¨ï¼›</span><br><span class="hljs-meta">@ConditionalOnClass(&#123;CharacterEncodingFilter.class&#125;)</span><br><br><span class="hljs-comment">//åˆ¤æ–­é…ç½®æ–‡ä»¶ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªé…ç½®ï¼šspring.http.encoding.enabledï¼›</span><br>  <span class="hljs-comment">//å¦‚æœä¸å­˜åœ¨ï¼Œåˆ¤æ–­ä¹Ÿæ˜¯æˆç«‹çš„</span><br>  <span class="hljs-comment">//å³ä½¿æˆ‘ä»¬é…ç½®æ–‡ä»¶ä¸­ä¸é…ç½®pring.http.encoding.enabled=trueï¼Œä¹Ÿæ˜¯é»˜è®¤ç”Ÿæ•ˆçš„ï¼›</span><br><span class="hljs-meta">@ConditionalOnProperty(</span><br><span class="hljs-meta">    prefix = &quot;spring.http.encoding&quot;,</span><br><span class="hljs-meta">    value = &#123;&quot;enabled&quot;&#125;,</span><br><span class="hljs-meta">    matchIfMissing = true</span><br><span class="hljs-meta">)</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HttpEncodingAutoConfiguration</span> </span>&#123;<br>    <span class="hljs-comment">//ä»–å·²ç»å’ŒSpringBootçš„é…ç½®æ–‡ä»¶æ˜ å°„äº†</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Encoding properties;<br>    <span class="hljs-comment">//åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨çš„æƒ…å†µä¸‹ï¼Œå‚æ•°çš„å€¼å°±ä¼šä»å®¹å™¨ä¸­æ‹¿</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">HttpEncodingAutoConfiguration</span><span class="hljs-params">(HttpProperties properties)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.properties = properties.getEncoding();<br>    &#125;<br>    <br>    <span class="hljs-comment">//ç»™å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ªç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶çš„æŸäº›å€¼éœ€è¦ä»propertiesä¸­è·å–</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-meta">@ConditionalOnMissingBean</span> <span class="hljs-comment">//åˆ¤æ–­å®¹å™¨æ²¡æœ‰è¿™ä¸ªç»„ä»¶ï¼Ÿ</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> CharacterEncodingFilter <span class="hljs-title">characterEncodingFilter</span><span class="hljs-params">()</span> </span>&#123;<br>        CharacterEncodingFilter filter = <span class="hljs-keyword">new</span> OrderedCharacterEncodingFilter();<br>        filter.setEncoding(<span class="hljs-keyword">this</span>.properties.getCharset().name());<br>        filter.setForceRequestEncoding(<span class="hljs-keyword">this</span>.properties.shouldForce(org.springframework.boot.autoconfigure.http.HttpProperties.Encoding.Type.REQUEST));<br>        filter.setForceResponseEncoding(<span class="hljs-keyword">this</span>.properties.shouldForce(org.springframework.boot.autoconfigure.http.HttpProperties.Encoding.Type.RESPONSE));<br>        <span class="hljs-keyword">return</span> filter;<br>    &#125;<br>    <span class="hljs-comment">//ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ä¸€å¥è¯æ€»ç»“ ï¼šæ ¹æ®å½“å‰ä¸åŒçš„æ¡ä»¶åˆ¤æ–­ï¼Œå†³å®šè¿™ä¸ªé…ç½®ç±»æ˜¯å¦ç”Ÿæ•ˆï¼</strong></p><ul><li>ä¸€ä½†è¿™ä¸ªé…ç½®ç±»ç”Ÿæ•ˆï¼›è¿™ä¸ªé…ç½®ç±»å°±ä¼šç»™å®¹å™¨ä¸­æ·»åŠ å„ç§ç»„ä»¶ï¼›</li><li>è¿™äº›ç»„ä»¶çš„å±æ€§æ˜¯ä»å¯¹åº”çš„propertiesç±»ä¸­è·å–çš„ï¼Œè¿™äº›propertiesç±»é‡Œé¢çš„æ¯ä¸€ä¸ªå±æ€§åˆæ˜¯å’Œé…ç½®æ–‡ä»¶ç»‘å®šçš„ï¼›</li><li>æ‰€æœ‰åœ¨é…ç½®æ–‡ä»¶ä¸­èƒ½é…ç½®çš„å±æ€§éƒ½æ˜¯åœ¨xxxxPropertiesç±»ä¸­å°è£…ç€ï¼›</li><li>é…ç½®æ–‡ä»¶èƒ½é…ç½®ä»€ä¹ˆå°±å¯ä»¥å‚ç…§æŸä¸ªåŠŸèƒ½å¯¹åº”çš„è¿™ä¸ªå±æ€§ç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//ä»é…ç½®æ–‡ä»¶ä¸­è·å–æŒ‡å®šçš„å€¼å’Œbeançš„å±æ€§è¿›è¡Œç»‘å®š</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;spring.http&quot;)</span> <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HttpProperties</span> </span>&#123;<br>    <span class="hljs-comment">// .....</span><br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å»é…ç½®æ–‡ä»¶é‡Œé¢è¯•è¯•å‰ç¼€ï¼Œçœ‹æç¤ºï¼</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B005-%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86%E5%86%8D%E6%8E%A2/http_encoding.png" alt="æç¤º"></p><p><strong>è¿™å°±æ˜¯è‡ªåŠ¨è£…é…çš„åŸç†ï¼</strong></p><h3 id="äºŒã€ç²¾é«“"><a href="#äºŒã€ç²¾é«“" class="headerlink" title="äºŒã€ç²¾é«“"></a>äºŒã€ç²¾é«“</h3><ol><li>SpringBootå¯åŠ¨ä¼šåŠ è½½å¤§é‡çš„è‡ªåŠ¨é…ç½®ç±»</li><li>æˆ‘ä»¬çœ‹æˆ‘ä»¬éœ€è¦çš„åŠŸèƒ½æœ‰æ²¡æœ‰åœ¨SpringBooté»˜è®¤å†™å¥½çš„è‡ªåŠ¨é…ç½®ç±»å½“ä¸­</li><li>æˆ‘ä»¬å†æ¥çœ‹è¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»ä¸­åˆ°åº•é…ç½®äº†å“ªäº›ç»„ä»¶</li><li>ç»™å®¹å™¨è‡ªåŠ¨é…ç½®ç±»æ·»åŠ ç»„ä»¶çš„æ—¶å€™ï¼Œä¼šä»propertiesç±»ä¸­è·å–å±æ€§ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè¿™äº›å±æ€§çš„å€¼å°±å¥½äº†ã€‚</li></ol><p><strong>xxxxAutoConfigurartionï¼šè‡ªåŠ¨é…ç½®ç±»ï¼›</strong>ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶</p><p><strong>xxxxProperties:å°è£…é…ç½®æ–‡ä»¶ä¸­ç›¸å…³å±æ€§ï¼›</strong></p><h3 id="ä¸‰ã€-Conditional"><a href="#ä¸‰ã€-Conditional" class="headerlink" title="ä¸‰ã€@Conditional"></a>ä¸‰ã€@Conditional</h3><p>äº†è§£å®Œè‡ªåŠ¨è£…é…çš„åŸç†åï¼Œæˆ‘ä»¬æ¥å…³æ³¨ä¸€ä¸ªé—®é¢˜ï¼Œ<strong>è‡ªåŠ¨é…ç½®ç±»çš„ç”Ÿæ•ˆæ¡ä»¶</strong>ã€‚</p><p><strong>Conditionalæ´¾ç”Ÿæ³¨è§£ï¼ˆSpringæ³¨è§£ç‰ˆåŸç”Ÿçš„@Conditionalä½œç”¨ï¼‰</strong></p><p>ä½œç”¨ï¼šå¿…é¡»æ˜¯@ConditionalæŒ‡å®šçš„æ¡ä»¶æˆç«‹ï¼Œæ‰ç»™å®¹å™¨æ·»åŠ ç»„ä»¶ï¼Œé…ç½®é‡Œé¢çš„å†…å®¹æ‰ä¼šç”Ÿæ•ˆã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBootç¬”è®°05-è‡ªåŠ¨é…ç½®åŸç†å†æ¢/conditional.png" alt="@Conditionalæ‰©å±•æ³¨è§£" style="zoom: 67%;"><p><strong>é‚£ä¹ˆå¤šçš„è‡ªåŠ¨é…ç½®ç±»ï¼Œå¿…é¡»åœ¨ä¸€å®šçš„æ¡ä»¶ä¸‹æ‰èƒ½ç”Ÿæ•ˆï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åŠ è½½äº†è¿™ä¹ˆå¤šçš„é…ç½®ç±»ï¼Œä½†ä¸æ˜¯æ‰€æœ‰çš„éƒ½ç”Ÿæ•ˆäº†ã€‚</strong></p><p>æˆ‘ä»¬æ€ä¹ˆçŸ¥é“å“ªäº›è‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆï¼Ÿ</p><p><strong>æˆ‘ä»¬å¯ä»¥é€šè¿‡å¯ç”¨ debug=trueå±æ€§ï¼›æ¥è®©æ§åˆ¶å°æ‰“å°è‡ªåŠ¨é…ç½®æŠ¥å‘Šï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„çŸ¥é“å“ªäº›è‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆï¼›</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment">#å¼€å¯springbootçš„è°ƒè¯•ç±»</span><br><span class="hljs-attr">debug</span>=<span class="hljs-string">true</span><br></code></pre></td></tr></table></figure><p><strong>Positive matches:ï¼ˆè‡ªåŠ¨é…ç½®ç±»å¯ç”¨çš„ï¼šæ­£åŒ¹é…ï¼‰</strong></p><p><strong>Negative matches:ï¼ˆæ²¡æœ‰å¯åŠ¨ï¼Œæ²¡æœ‰åŒ¹é…æˆåŠŸçš„è‡ªåŠ¨é…ç½®ç±»ï¼šè´ŸåŒ¹é…ï¼‰</strong></p><p><strong>Unconditional classes: ï¼ˆæ²¡æœ‰æ¡ä»¶çš„ç±»ï¼‰</strong></p>]]></content>
    
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBootç¬”è®°04-JSR303æ•°æ®æ ¡éªŒåŠå¤šç¯å¢ƒåˆ‡æ¢</title>
    <link href="/posts/2021/01/08/SpringBoot%E7%AC%94%E8%AE%B004-JSR303%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C%E5%8F%8A%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%88%87%E6%8D%A2/"/>
    <url>/posts/2021/01/08/SpringBoot%E7%AC%94%E8%AE%B004-JSR303%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C%E5%8F%8A%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%88%87%E6%8D%A2/</url>
    
    <content type="html"><![CDATA[<h2 id="JSR303æ•°æ®æ ¡éªŒ"><a href="#JSR303æ•°æ®æ ¡éªŒ" class="headerlink" title="JSR303æ•°æ®æ ¡éªŒ"></a>JSR303æ•°æ®æ ¡éªŒ</h2><h3 id="ä¸€ã€å¦‚ä½•ä½¿ç”¨"><a href="#ä¸€ã€å¦‚ä½•ä½¿ç”¨" class="headerlink" title="ä¸€ã€å¦‚ä½•ä½¿ç”¨"></a>ä¸€ã€å¦‚ä½•ä½¿ç”¨</h3><p>SpringBootä¸­å¯ä»¥ç”¨@validatedæ¥æ ¡éªŒæ•°æ®ï¼Œå¦‚æœæ•°æ®å¼‚å¸¸åˆ™ä¼šç»Ÿä¸€æŠ›å‡ºå¼‚å¸¸ï¼Œæ–¹ä¾¿å¼‚å¸¸ä¸­å¿ƒç»Ÿä¸€å¤„ç†ã€‚æˆ‘ä»¬è¿™é‡Œæ¥å†™ä¸ªæ³¨è§£è®©æˆ‘ä»¬çš„nameåªèƒ½æ”¯æŒEmailæ ¼å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span> <span class="hljs-comment">//æ³¨å†Œbean</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;person&quot;)</span><br><span class="hljs-meta">@Validated</span>  <span class="hljs-comment">//æ•°æ®æ ¡éªŒ</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>&#123;<br><br>    <span class="hljs-meta">@Email(message=&quot;é‚®ç®±æ ¼å¼é”™è¯¯&quot;)</span> <span class="hljs-comment">//nameå¿…é¡»æ˜¯é‚®ç®±æ ¼å¼</span><br>    <span class="hljs-keyword">private</span> String name;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼šdefault message [ä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„ç”µå­é‚®ç®±åœ°å€]</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBootç¬”è®°04-JSR303æ•°æ®æ ¡éªŒåŠå¤šç¯å¢ƒåˆ‡æ¢/validate.png" alt="JSR303æ ¡éªŒ" style="zoom:80%;"><p><strong>ä½¿ç”¨æ•°æ®æ ¡éªŒï¼Œå¯ä»¥ä¿æŒæ•°æ®çš„æ­£ç¡®æ€§ã€‚</strong></p><h3 id="äºŒã€å¸¸è§å‚æ•°"><a href="#äºŒã€å¸¸è§å‚æ•°" class="headerlink" title="äºŒã€å¸¸è§å‚æ•°"></a>äºŒã€å¸¸è§å‚æ•°</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs markdown">@NotNull(message=&quot;åå­—ä¸èƒ½ä¸ºç©º&quot;)<br>private String userName;<br>@Max(value=120,message=&quot;å¹´é¾„æœ€å¤§ä¸èƒ½æŸ¥è¿‡120&quot;)<br>private int age;<br>@Email(message=&quot;é‚®ç®±æ ¼å¼é”™è¯¯&quot;)<br>private String email;<br><br>ç©ºæ£€æŸ¥<br>@Null       éªŒè¯å¯¹è±¡æ˜¯å¦ä¸ºnull<br>@NotNull    éªŒè¯å¯¹è±¡æ˜¯å¦ä¸ä¸ºnull, æ— æ³•æŸ¥æ£€é•¿åº¦ä¸º0çš„å­—ç¬¦ä¸²<br>@NotBlank   æ£€æŸ¥çº¦æŸå­—ç¬¦ä¸²æ˜¯ä¸æ˜¯Nullè¿˜æœ‰è¢«Trimçš„é•¿åº¦æ˜¯å¦å¤§äº0,åªå¯¹å­—ç¬¦ä¸²,ä¸”ä¼šå»æ‰å‰åç©ºæ ¼.<br>@NotEmpty   æ£€æŸ¥çº¦æŸå…ƒç´ æ˜¯å¦ä¸ºNULLæˆ–è€…æ˜¯EMPTY.<br><span class="hljs-code">    </span><br><span class="hljs-code">Booelanæ£€æŸ¥</span><br><span class="hljs-code">@AssertTrue     éªŒè¯ Boolean å¯¹è±¡æ˜¯å¦ä¸º true  </span><br><span class="hljs-code">@AssertFalse    éªŒè¯ Boolean å¯¹è±¡æ˜¯å¦ä¸º false  </span><br><span class="hljs-code">    </span><br><span class="hljs-code">é•¿åº¦æ£€æŸ¥</span><br><span class="hljs-code">@Size(min=, max=) éªŒè¯å¯¹è±¡ï¼ˆArray,Collection,Map,Stringï¼‰é•¿åº¦æ˜¯å¦åœ¨ç»™å®šçš„èŒƒå›´ä¹‹å†…  </span><br><span class="hljs-code">@Length(min=, max=) string is between min and max included.</span><br><span class="hljs-code"></span><br><span class="hljs-code">æ—¥æœŸæ£€æŸ¥</span><br><span class="hljs-code">@Past       éªŒè¯ Date å’Œ Calendar å¯¹è±¡æ˜¯å¦åœ¨å½“å‰æ—¶é—´ä¹‹å‰  </span><br><span class="hljs-code">@Future     éªŒè¯ Date å’Œ Calendar å¯¹è±¡æ˜¯å¦åœ¨å½“å‰æ—¶é—´ä¹‹å  </span><br><span class="hljs-code">@Pattern    éªŒè¯ String å¯¹è±¡æ˜¯å¦ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„è§„åˆ™</span><br><span class="hljs-code"></span><br><span class="hljs-code">.......ç­‰ç­‰</span><br><span class="hljs-code">é™¤æ­¤ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è‡ªå®šä¹‰ä¸€äº›æ•°æ®æ ¡éªŒè§„åˆ™</span><br></code></pre></td></tr></table></figure><h2 id="å¤šç¯å¢ƒåˆ‡æ¢"><a href="#å¤šç¯å¢ƒåˆ‡æ¢" class="headerlink" title="å¤šç¯å¢ƒåˆ‡æ¢"></a>å¤šç¯å¢ƒåˆ‡æ¢</h2><p>profileæ˜¯Springå¯¹ä¸åŒç¯å¢ƒæä¾›ä¸åŒé…ç½®åŠŸèƒ½çš„æ”¯æŒï¼Œå¯ä»¥é€šè¿‡æ¿€æ´»ä¸åŒçš„ç¯å¢ƒç‰ˆæœ¬ï¼Œå®ç°å¿«é€Ÿåˆ‡æ¢ç¯å¢ƒã€‚</p><h3 id="ä¸€ã€é…ç½®æ–‡ä»¶"><a href="#ä¸€ã€é…ç½®æ–‡ä»¶" class="headerlink" title="ä¸€ã€é…ç½®æ–‡ä»¶"></a>ä¸€ã€é…ç½®æ–‡ä»¶</h3><p>æˆ‘ä»¬åœ¨ä¸»é…ç½®æ–‡ä»¶ç¼–å†™çš„æ—¶å€™ï¼Œæ–‡ä»¶åå¯ä»¥æ˜¯<strong>application-{profile}.properties/yml</strong>ï¼Œç”¨æ¥æŒ‡å®šå¤šä¸ªç¯å¢ƒç‰ˆæœ¬ã€‚</p><p><strong>ä¾‹å¦‚ï¼š</strong></p><p>application-test.properties ä»£è¡¨æµ‹è¯•ç¯å¢ƒé…ç½®</p><p>application-dev.properties ä»£è¡¨å¼€å‘ç¯å¢ƒé…ç½®</p><p>ä½†æ˜¯SpringBootå¹¶ä¸ä¼šç›´æ¥å¯åŠ¨è¿™äº›é…ç½®æ–‡ä»¶ï¼Œ<strong>å®ƒé»˜è®¤ä½¿ç”¨application.propertiesä¸»é…ç½®æ–‡ä»¶</strong>ã€‚</p><p>æˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€ä¸ªé…ç½®æ¥é€‰æ‹©éœ€è¦æ¿€æ´»çš„ç¯å¢ƒï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment">#æ¯”å¦‚åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šä½¿ç”¨devç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®ä¸åŒçš„ç«¯å£å·è¿›è¡Œæµ‹è¯•ï¼›</span><br><span class="hljs-comment">#æˆ‘ä»¬å¯åŠ¨SpringBootï¼Œå°±å¯ä»¥çœ‹åˆ°å·²ç»åˆ‡æ¢åˆ°devä¸‹çš„é…ç½®äº†ï¼›</span><br><span class="hljs-meta">spring.profiles.active</span>=<span class="hljs-string">dev</span><br></code></pre></td></tr></table></figure><h3 id="äºŒã€yamlçš„å¤šæ–‡æ¡£å—"><a href="#äºŒã€yamlçš„å¤šæ–‡æ¡£å—" class="headerlink" title="äºŒã€yamlçš„å¤šæ–‡æ¡£å—"></a>äºŒã€yamlçš„å¤šæ–‡æ¡£å—</h3><p>å’Œpropertiesé…ç½®æ–‡ä»¶ä¸­ä¸€æ ·ï¼Œä½†æ˜¯ä½¿ç”¨yamlå»å®ç°ä¸éœ€è¦åˆ›å»ºå¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œæ›´åŠ æ–¹ä¾¿äº†ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8081</span><br><span class="hljs-comment">#é€‰æ‹©è¦æ¿€æ´»é‚£ä¸ªç¯å¢ƒå—</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">profiles:</span><br>    <span class="hljs-attr">active:</span> <span class="hljs-string">prod</span><br><br><span class="hljs-meta">---</span><br><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8083</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">profiles:</span> <span class="hljs-string">dev</span> <span class="hljs-comment">#é…ç½®ç¯å¢ƒçš„åç§°</span><br><br><br><span class="hljs-meta">---</span><br><br><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8084</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">profiles:</span> <span class="hljs-string">prod</span>  <span class="hljs-comment">#é…ç½®ç¯å¢ƒçš„åç§°</span><br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼šå¦‚æœyamlå’ŒpropertiesåŒæ—¶é…ç½®äº†ç«¯å£ï¼Œå¹¶ä¸”æ²¡æœ‰æ¿€æ´»å…¶ä»–ç¯å¢ƒï¼Œé»˜è®¤ä¼šä½¿ç”¨propertiesé…ç½®æ–‡ä»¶çš„ã€‚</strong></p><h3 id="ä¸‰ã€é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®"><a href="#ä¸‰ã€é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®" class="headerlink" title="ä¸‰ã€é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®"></a>ä¸‰ã€é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®</h3><p><strong>å¤–éƒ¨åŠ è½½é…ç½®æ–‡ä»¶çš„æ–¹å¼éå¸¸å¤šï¼Œæˆ‘ä»¬é€‰æ‹©æœ€å¸¸ç”¨çš„å³å¯ï¼Œåœ¨å¼€å‘çš„èµ„æºæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ã€‚</strong></p><p>å®˜æ–¹å¤–éƒ¨é…ç½®æ–‡ä»¶è¯´æ˜å‚è€ƒæ–‡æ¡£ï¼š</p><ol><li>file:./config/</li><li>file:./</li><li>classpath:/config/</li><li>classpath:/</li></ol><p>springbootå¯åŠ¨ä¼šæ‰«æä¸€ä¸‹ä½ç½®çš„application.propertiesæˆ–è€…application.yamlæ–‡ä»¶ä½œä¸ºSpringBootçš„é»˜è®¤é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ä¼˜å…ˆçº§1ï¼šé¡¹ç›®è·¯å¾„ä¸‹çš„configæ–‡ä»¶å¤¹é…ç½®æ–‡ä»¶<br>ä¼˜å…ˆçº§2ï¼šé¡¹ç›®è·¯å¾„ä¸‹é…ç½®æ–‡ä»¶<br>ä¼˜å…ˆçº§3ï¼šèµ„æºè·¯å¾„ä¸‹çš„configæ–‡ä»¶å¤¹é…ç½®æ–‡ä»¶<br>ä¼˜å…ˆçº§4ï¼šèµ„æºè·¯å¾„ä¸‹é…ç½®æ–‡ä»¶<br></code></pre></td></tr></table></figure><p>ä¼˜å…ˆçº§ç”±é«˜åˆ°ä½ï¼Œé«˜ä¼˜å…ˆçº§çš„é…ç½®ä¼šè¦†ç›–ä½ä¼˜å…ˆçº§çš„é…ç½®</p><p><strong>SpringBootä¼šä»è¿™å››ä¸ªä½ç½®å…¨éƒ¨åŠ è½½ä¸»é…ç½®æ–‡ä»¶ï¼Œäº’è¡¥é…ç½®</strong></p><p>æˆ‘ä»¬åœ¨æœ€ä½çº§çš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ä¸€ä¸ªé¡¹ç›®è®¿é—®è·¯å¾„çš„é…ç½®æ¥æµ‹è¯•äº’è¡¥é—®é¢˜ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs markdown">é…ç½®é¡¹ç›®çš„è®¿é—®è·¯å¾„<br>server.servlet.context-path=/kuang<br></code></pre></td></tr></table></figure><h3 id="å››ã€è¿ç»´æŠ€å·§"><a href="#å››ã€è¿ç»´æŠ€å·§" class="headerlink" title="å››ã€è¿ç»´æŠ€å·§"></a>å››ã€è¿ç»´æŠ€å·§</h3><p>æŒ‡å®šä½ç½®åŠ è½½é…ç½®æ–‡ä»¶</p><p>æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡spring.config.locationæ¥æ”¹å˜é»˜è®¤çš„é…ç½®æ–‡ä»¶ä½ç½®</p><p>é¡¹ç›®æ‰“åŒ…å¥½ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°çš„å½¢å¼ï¼Œå¯åŠ¨é¡¹ç›®çš„æ—¶å€™æ¥æŒ‡å®šé…ç½®æ–‡ä»¶çš„æ–°ä½ç½®ï¼›è¿™ç§æƒ…å†µï¼Œä¸€èˆ¬æ˜¯åæœŸè¿ç»´åšçš„å¤šï¼Œç›¸åŒé…ç½®ï¼Œå¤–éƒ¨æŒ‡å®šçš„é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§æœ€é«˜ã€‚</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markdown">java -jar spring-boot-config.jar --spring.config.location=F:/application.properties<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBootç¬”è®°03-yamlé…ç½®æ³¨å…¥</title>
    <link href="/posts/2021/01/08/SpringBoot%E7%AC%94%E8%AE%B003-yaml%E9%85%8D%E7%BD%AE%E6%B3%A8%E5%85%A5/"/>
    <url>/posts/2021/01/08/SpringBoot%E7%AC%94%E8%AE%B003-yaml%E9%85%8D%E7%BD%AE%E6%B3%A8%E5%85%A5/</url>
    
    <content type="html"><![CDATA[<h2 id="yamlè¯­æ³•å­¦ä¹ "><a href="#yamlè¯­æ³•å­¦ä¹ " class="headerlink" title="yamlè¯­æ³•å­¦ä¹ "></a>yamlè¯­æ³•å­¦ä¹ </h2><h3 id="ä¸€ã€é…ç½®æ–‡ä»¶"><a href="#ä¸€ã€é…ç½®æ–‡ä»¶" class="headerlink" title="ä¸€ã€é…ç½®æ–‡ä»¶"></a>ä¸€ã€é…ç½®æ–‡ä»¶</h3><p>SpringBootä½¿ç”¨ä¸€ä¸ªå…¨å±€çš„é…ç½®æ–‡ä»¶ï¼Œ<strong>é…ç½®æ–‡ä»¶åç§°æ˜¯å›ºå®šçš„</strong>ï¼Œæœ‰ä¸¤ç§å†™æ³•ï¼š</p><ul><li>application.properties<ul><li>è¯­æ³•ç»“æ„ï¼š<strong>key=value</strong></li></ul></li><li>application.yaml<ul><li>è¯­æ³•ç»“æ„ï¼š<strong>key: value</strong></li></ul></li></ul><p><strong>é…ç½®æ–‡ä»¶çš„ä½œç”¨</strong>ï¼šä¿®æ”¹SpringBootè‡ªåŠ¨é…ç½®çš„é»˜è®¤å€¼ï¼Œå› ä¸ºSpringBootåœ¨åº•å±‚å·²ç»è‡ªåŠ¨é…ç½®äº†è¿™äº›é¡¹ã€‚æ¯”å¦‚æˆ‘ä»¬å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹Tomcaté»˜è®¤å¯åŠ¨çš„ç«¯å£å·ï¼Œæµ‹è¯•ä¸€ä¸‹ï¼</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-meta">server.port</span>=<span class="hljs-string">8081</span><br></code></pre></td></tr></table></figure><h3 id="äºŒã€yamlæ¦‚è¿°"><a href="#äºŒã€yamlæ¦‚è¿°" class="headerlink" title="äºŒã€yamlæ¦‚è¿°"></a>äºŒã€yamlæ¦‚è¿°</h3><p>YAMLæ˜¯ â€œYAML Ainâ€™t a Markup Languageâ€ ï¼ˆYAMLä¸æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰çš„é€’å½’ç¼©å†™ã€‚åœ¨å¼€å‘çš„è¿™ç§è¯­è¨€æ—¶ï¼ŒYAML çš„æ„æ€å…¶å®æ˜¯ï¼šâ€Yet Another Markup Languageâ€ï¼ˆä»æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰</p><p><strong>è¿™ç§è¯­è¨€ä»¥æ•°æ®ä½œä¸ºä¸­å¿ƒï¼Œè€Œä¸æ˜¯ä»¥æ ‡è®°è¯­è¨€ä¸ºé‡ç‚¹ï¼</strong></p><p>ä»¥å‰çš„é…ç½®æ–‡ä»¶ï¼Œå¤§å¤šæ•°éƒ½æ˜¯ä½¿ç”¨xmlæ¥é…ç½®ï¼›æ¯”å¦‚ä¸€ä¸ªç®€å•çš„ç«¯å£é…ç½®ï¼Œæˆ‘ä»¬æ¥å¯¹æ¯”ä¸‹yamlå’Œxml</p><p><strong>ä¼ ç»Ÿxmlé…ç½®</strong>ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">server</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span>8081<span class="hljs-tag">&lt;/<span class="hljs-name">port</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">server</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>yamlé…ç½®:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yacas">server:<br>port: 8080<br></code></pre></td></tr></table></figure><h3 id="ä¸‰ã€yamlåŸºç¡€è¯­æ³•"><a href="#ä¸‰ã€yamlåŸºç¡€è¯­æ³•" class="headerlink" title="ä¸‰ã€yamlåŸºç¡€è¯­æ³•"></a>ä¸‰ã€yamlåŸºç¡€è¯­æ³•</h3><p>è¯´æ˜ï¼šè¯­æ³•è¦æ±‚ä¸¥æ ¼ï¼</p><p>1ã€ç©ºæ ¼ä¸èƒ½çœç•¥</p><p>2ã€ä»¥ç¼©è¿›æ¥æ§åˆ¶å±‚çº§å…³ç³»ï¼Œåªè¦æ˜¯å·¦è¾¹å¯¹é½çš„ä¸€åˆ—æ•°æ®éƒ½æ˜¯åŒä¸€ä¸ªå±‚çº§çš„ã€‚</p><p>3ã€å±æ€§å’Œå€¼çš„å¤§å°å†™éƒ½æ˜¯ååˆ†æ•æ„Ÿçš„ã€‚</p><p><strong>å­—é¢é‡ï¼šæ™®é€šçš„å€¼ [æ•°å­—ï¼Œ å¸ƒå°”å€¼ï¼Œ å­—ç¬¦ä¸²]</strong></p><p>å­—é¢é‡ç›´æ¥å¸è½½åé¢å°±å¯ä»¥ï¼Œ<strong>å­—ç¬¦ä¸²é»˜è®¤ä¸ç”¨åŠ ä¸ŠåŒå¼•å·æˆ–å•å¼•å·</strong>ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">k:</span> <span class="hljs-string">v</span><br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼š</p><ul><li><p>â€œâ€åŒå¼•å·ï¼Œä¸ä¼šè½¬ä¹‰å­—ç¬¦ä¸²é‡Œé¢çš„ç‰¹æ®Šå­—ç¬¦ï¼Œç‰¹æ®Šå­—ç¬¦ä¼šä½œä¸ºæœ¬èº«æƒ³è¡¨ç¤ºçš„æ„æ€ã€‚</p><p>æ¯”å¦‚ï¼šname: â€œatrox \n shenâ€ è¾“å‡ºï¼šatrox æ¢è¡Œ shen</p></li><li><p>â€˜â€™å•å¼•å·ï¼Œä¼šè½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼Œç‰¹æ®Šå­—ç¬¦æœ€ç»ˆä¼šå˜æˆå’Œæ™®é€šå­—ç¬¦ä¸€æ ·è¾“å‡º</p><p>æ¯”å¦‚ï¼šname: â€˜atrox \n shenâ€™ è¾“å‡ºï¼šatrox \n shen</p></li></ul><p><strong>å¯¹è±¡ã€Mapï¼ˆé”®å€¼å¯¹ï¼‰</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment">#å¯¹è±¡ã€Mapæ ¼å¼</span><br><span class="hljs-attr">k:</span><br>    <span class="hljs-attr">v1:</span> <br>    <span class="hljs-attr">v2:</span><br></code></pre></td></tr></table></figure><p>åœ¨ä¸‹ä¸€è¡Œæ¥å†™å¯¹è±¡çš„å±æ€§å’Œå€¼çš„å…³ç³»æ—¶ï¼Œæ³¨æ„ç¼©è¿›ã€‚å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">student:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">ä¹”å¨</span><br>    <span class="hljs-attr">age:</span> <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><p>è¡Œå†…å†™æ³•ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">student:</span> &#123;<span class="hljs-attr">name:</span> <span class="hljs-string">ä¹”å¨</span>,<span class="hljs-attr">age:</span> <span class="hljs-number">3</span>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ•°ç»„ï¼ˆListã€Setï¼‰</strong></p><p>ç”¨ - å€¼è¡¨ç¤ºæ•°ç»„ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">pets:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">cat</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">dog</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">pig</span><br></code></pre></td></tr></table></figure><p>è¡Œå†…å†™æ³•ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">pets:</span> [<span class="hljs-string">cat</span>,<span class="hljs-string">dog</span>,<span class="hljs-string">pig</span>]<br></code></pre></td></tr></table></figure><h2 id="æ³¨å…¥é…ç½®æ–‡ä»¶"><a href="#æ³¨å…¥é…ç½®æ–‡ä»¶" class="headerlink" title="æ³¨å…¥é…ç½®æ–‡ä»¶"></a>æ³¨å…¥é…ç½®æ–‡ä»¶</h2><p>yamlæ–‡ä»¶æ›´å¼ºå¤§çš„åœ°æ–¹åœ¨äºï¼Œä»–å¯ä»¥<strong>ç»™æˆ‘ä»¬çš„å®ä½“ç±»æ³¨å…¥åŒ¹é…å€¼</strong>ã€‚</p><h3 id="ä¸€ã€yamlæ³¨å…¥é…ç½®æ–‡ä»¶"><a href="#ä¸€ã€yamlæ³¨å…¥é…ç½®æ–‡ä»¶" class="headerlink" title="ä¸€ã€yamlæ³¨å…¥é…ç½®æ–‡ä»¶"></a>ä¸€ã€yamlæ³¨å…¥é…ç½®æ–‡ä»¶</h3><ol><li><p>åœ¨springbooté¡¹ç›®ä¸­çš„resourcesç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶applicaton.yaml</p></li><li><p>ç¼–å†™ä¸€ä¸ªå®ä½“ç±»Dog</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span>  <span class="hljs-comment">//æ³¨å†Œbeanåˆ°å®¹å™¨ä¸­</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> Integer age;<br>    <span class="hljs-comment">//æœ‰å‚æ— å‚æ„é€ ã€getã€setæ–¹æ³•ã€toString()æ–¹æ³•  </span><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æ€è€ƒï¼Œæˆ‘ä»¬åŸæ¥æ˜¯å¦‚ä½•ç»™beanæ³¨å…¥å±æ€§å€¼çš„ã€‚@Valueï¼Œç»™è¿™ä¸ªç±»æµ‹è¯•ä¸€ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span> <span class="hljs-comment">//æ³¨å†Œbean</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span> </span>&#123;<br>    <span class="hljs-meta">@Value(&quot;é˜¿é»„&quot;)</span><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-meta">@Value(&quot;18&quot;)</span><br>    <span class="hljs-keyword">private</span> Integer age;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>åœ¨SpringBootçš„æµ‹è¯•ç±»ä¸‹æ³¨å…¥ç‹—è¾“å‡ºä¸€ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DemoApplicationTests</span> </span>&#123;<br>    <span class="hljs-meta">@Autowired</span> <span class="hljs-comment">//å°†ç‹—ç‹—è‡ªåŠ¨æ³¨å…¥è¿›æ¥</span><br>    Dog dog;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">contextLoads</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(dog); <span class="hljs-comment">//æ‰“å°çœ‹ä¸‹ç‹—ç‹—å¯¹è±¡</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç»“æœæˆåŠŸè¾“å‡ºï¼Œ@Valueæ³¨å…¥æˆåŠŸã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">Dog&#123;name=<span class="hljs-string">&#x27;é˜¿é»„&#x27;</span>, age=<span class="hljs-number">3</span>&#125;<br></code></pre></td></tr></table></figure><p>è¿™æ˜¯æˆ‘ä»¬åŸæ¥çš„åŠæ³•ã€‚</p></li><li><p>æˆ‘ä»¬å†ç¼–å†™ä¸€ä¸ªå¤æ‚ä¸€ç‚¹çš„å®ä½“ç±»ï¼šPerson ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span> <span class="hljs-comment">//æ³¨å†Œbeanåˆ°å®¹å™¨ä¸­</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> Integer age;<br>    <span class="hljs-keyword">private</span> Boolean happy;<br>    <span class="hljs-keyword">private</span> Date birth;<br>    <span class="hljs-keyword">private</span> Map&lt;String,Object&gt; maps;<br>    <span class="hljs-keyword">private</span> List&lt;Object&gt; lists;<br>    <span class="hljs-keyword">private</span> Dog dog;<br>    <br>    <span class="hljs-comment">//æœ‰å‚æ— å‚æ„é€ ã€getã€setæ–¹æ³•ã€toString()æ–¹æ³•  </span><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æˆ‘é—¨æ¥ä½¿ç”¨yamlé…ç½®çš„æ–¹å¼è¿›è¡Œæ³¨å…¥ï¼Œå¤§å®¶å†™çš„æ—¶å€™æ³¨æ„åŒºåˆ«å’Œä¼˜åŠ¿ï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªyamlé…ç½®ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">person:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">qiaowei$&#123;random.uuid&#125;</span><br>  <span class="hljs-attr">age:</span> <span class="hljs-number">3</span><br>  <span class="hljs-attr">happy:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">birth:</span> <span class="hljs-number">2001</span><span class="hljs-string">/1/30</span><br>  <span class="hljs-attr">maps:</span> &#123;<span class="hljs-attr">k1:</span> <span class="hljs-string">v1</span>,<span class="hljs-attr">k2:</span> <span class="hljs-string">v2</span>&#125;<br>  <span class="hljs-attr">lists:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">code</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">music</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">girl</span><br>  <span class="hljs-attr">dog:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">æ—ºè´¢</span><br>    <span class="hljs-attr">age:</span> <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure></li><li><p>æˆ‘ä»¬åˆšæ‰æŠŠè¿™ä¸ªpersonè¿™ä¸ªå¯¹è±¡çš„æ‰€æœ‰å€¼éƒ½å†™å¥½äº†ï¼Œæˆ‘ä»¬ç°åœ¨ä¿©æ³¨å…¥åˆ°æˆ‘ä»¬çš„ç±»ä¸­ï¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment">@ConfigurationPropertiesä½œç”¨ï¼š</span><br><span class="hljs-comment">å°†é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„æ¯ä¸€ä¸ªå±æ€§çš„å€¼ï¼Œæ˜ å°„åˆ°è¿™ä¸ªç»„ä»¶ä¸­ï¼›</span><br><span class="hljs-comment">å‘Šè¯‰SpringBootå°†æœ¬ç±»ä¸­çš„æ‰€æœ‰å±æ€§å’Œé…ç½®æ–‡ä»¶ä¸­ç›¸å…³çš„é…ç½®è¿›è¡Œç»‘å®š</span><br><span class="hljs-comment">å‚æ•° prefix = â€œpersonâ€ : å°†é…ç½®æ–‡ä»¶ä¸­çš„personä¸‹é¢çš„æ‰€æœ‰å±æ€§ä¸€ä¸€å¯¹åº”</span><br><span class="hljs-comment">*/</span><br><span class="hljs-meta">@Component</span> <span class="hljs-comment">//æ³¨å†Œbean</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;person&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> Integer age;<br>    <span class="hljs-keyword">private</span> Boolean happy;<br>    <span class="hljs-keyword">private</span> Date birth;<br>    <span class="hljs-keyword">private</span> Map&lt;String,Object&gt; maps;<br>    <span class="hljs-keyword">private</span> List&lt;Object&gt; lists;<br>    <span class="hljs-keyword">private</span> Dog dog;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>IDEAæç¤ºï¼Œspringbooté…ç½®æ³¨è§£å¤„ç†å™¨æ²¡æœ‰æ‰¾åˆ°ï¼Œè®©æˆ‘ä»¬çœ‹æ–‡æ¡£ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ–‡æ¡£ã€‚æ‰¾åˆ°ä¸€ä¸ªä¾èµ–ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>ç¡®è®¤ä»¥ä¸Šé…ç½®éƒ½OKä¹‹åï¼Œæˆ‘ä»¬å»æµ‹è¯•ç±»ä¸­æµ‹è¯•ä¸€ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DemoApplicationTests</span> </span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    Person person; <span class="hljs-comment">//å°†personè‡ªåŠ¨æ³¨å…¥è¿›æ¥</span><br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">contextLoads</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(person); <span class="hljs-comment">//æ‰“å°personä¿¡æ¯</span><br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>yamlé…ç½®æ³¨å…¥åˆ°å®ä½“ç±»å®Œå…¨OKï¼</strong></p></li></ol><h3 id="äºŒã€åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶"><a href="#äºŒã€åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶" class="headerlink" title="äºŒã€åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶"></a>äºŒã€åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶</h3><p><strong>@PropertySource</strong>ï¼šåŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶</p><p><strong>@ConfigurationProperties</strong>ï¼šé»˜è®¤ä»å…¨å±€é…ç½®æ–‡ä»¶ä¸­è·å–å€¼</p><ol><li><p>æˆ‘ä»¬åœ¨resourcesç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª<strong>person.properties</strong>æ–‡ä»¶</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">name</span>=<span class="hljs-string">ä¹”å¨</span><br></code></pre></td></tr></table></figure></li><li><p>ç„¶ååœ¨æˆ‘ä»¬çš„ä»£ç ä¸­æŒ‡å®šåŠ è½½person.propertiesæ–‡ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@PropertySource(value = &quot;classpath:person.properties&quot;)</span><br><span class="hljs-meta">@Component</span> <span class="hljs-comment">//æ³¨å†Œbean</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>&#123;<br><br>    <span class="hljs-meta">@Value(&quot;$&#123;name&#125;&quot;)</span><br>    <span class="hljs-keyword">private</span> String name;<br><br>    ......  <br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å†æ¬¡æµ‹è¯•è¾“å‡ºä¸€ä¸‹ï¼šæŒ‡å®šé…ç½®æ–‡ä»¶ç»‘å®šæˆåŠŸ</p></li></ol><h3 id="ä¸‰ã€é…ç½®æ–‡ä»¶å ä½ç¬¦"><a href="#ä¸‰ã€é…ç½®æ–‡ä»¶å ä½ç¬¦" class="headerlink" title="ä¸‰ã€é…ç½®æ–‡ä»¶å ä½ç¬¦"></a>ä¸‰ã€é…ç½®æ–‡ä»¶å ä½ç¬¦</h3><p>é…ç½®æ–‡ä»¶è¿˜å¯ä»¥ç¼–å†™å ä½ç¬¦ç”Ÿæˆéšæœºæ•°ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">person:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">qinjiang$&#123;random.uuid&#125;</span> <span class="hljs-comment"># éšæœºuuid</span><br>    <span class="hljs-attr">age:</span> <span class="hljs-string">$&#123;random.int&#125;</span>  <span class="hljs-comment"># éšæœºint</span><br>    <span class="hljs-attr">happy:</span> <span class="hljs-literal">false</span><br>    <span class="hljs-attr">birth:</span> <span class="hljs-number">2000</span><span class="hljs-string">/01/01</span><br>    <span class="hljs-attr">maps:</span> &#123;<span class="hljs-attr">k1:</span> <span class="hljs-string">v1</span>,<span class="hljs-attr">k2:</span> <span class="hljs-string">v2</span>&#125;<br>    <span class="hljs-attr">lists:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">code</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">girl</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">music</span><br>    <span class="hljs-attr">dog:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">$&#123;person.hello:other&#125;_æ—ºè´¢</span><br>      <span class="hljs-attr">age:</span> <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h3 id="å››ã€å›é¡¾propertiesé…ç½®"><a href="#å››ã€å›é¡¾propertiesé…ç½®" class="headerlink" title="å››ã€å›é¡¾propertiesé…ç½®"></a>å››ã€å›é¡¾propertiesé…ç½®</h3><p>æˆ‘ä»¬ä¸Šé¢é‡‡ç”¨çš„yamlæ–¹æ³•éƒ½æ˜¯æœ€ç®€å•çš„æ–¹å¼ï¼Œå¼€å‘ä¸­æœ€å¸¸ç”¨çš„ï¼›ä¹Ÿæ˜¯springbootæ‰€æ¨èçš„ï¼é‚£æˆ‘ä»¬æ¥å” å” å…¶ä»–çš„å®ç°æ–¹å¼ï¼Œé“ç†éƒ½æ˜¯ç›¸åŒçš„ï¼›å†™è¿˜æ˜¯é‚£æ ·å†™ï¼›é…ç½®æ–‡ä»¶é™¤äº†ymlè¿˜æœ‰æˆ‘ä»¬ä¹‹å‰å¸¸ç”¨çš„properties ï¼Œ æˆ‘ä»¬æ²¡æœ‰è®²ï¼Œæˆ‘ä»¬æ¥å” å” ï¼</p><p>ã€æ³¨æ„ã€‘propertiesé…ç½®æ–‡ä»¶åœ¨å†™ä¸­æ–‡çš„æ—¶å€™ï¼Œä¼šæœ‰ä¹±ç  ï¼Œ æˆ‘ä»¬éœ€è¦å»IDEAä¸­è®¾ç½®ç¼–ç æ ¼å¼ä¸ºUTF-8ï¼›</p><p>settingsâ€“&gt;FileEncodings ä¸­é…ç½®ï¼›</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBootç¬”è®°03-yamlé…ç½®æ³¨å…¥/utf.png" alt="é…ç½®ä¸­æ–‡ç¼–ç " style="zoom: 80%;"><p><strong>æµ‹è¯•æ­¥éª¤</strong>ï¼š</p><ol><li><p>æ–°å»ºä¸€ä¸ªå®ä½“ç±»User</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span> <span class="hljs-comment">//æ³¨å†Œbean</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> age;<br>    <span class="hljs-keyword">private</span> String sex;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ç¼–è¾‘é…ç½®æ–‡ä»¶ user.properties</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-meta">user1.name</span>=<span class="hljs-string">ä¹”å¨</span><br><span class="hljs-meta">user1.age</span>=<span class="hljs-string">18</span><br><span class="hljs-meta">user1.sex</span>=<span class="hljs-string">ç”·</span><br></code></pre></td></tr></table></figure></li><li><p>æˆ‘ä»¬åœ¨Userç±»ä¸Šä½¿ç”¨@Valueæ¥æ³¨å…¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span> <span class="hljs-comment">//æ³¨å†Œbean</span><br><span class="hljs-meta">@PropertySource(value = &quot;classpath:user.properties&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-comment">//ç›´æ¥ä½¿ç”¨@value</span><br>    <span class="hljs-meta">@Value(&quot;$&#123;user.name&#125;&quot;)</span> <span class="hljs-comment">//ä»é…ç½®æ–‡ä»¶ä¸­å–å€¼</span><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-meta">@Value(&quot;#&#123;9*2&#125;&quot;)</span>  <span class="hljs-comment">// #&#123;SPEL&#125; Springè¡¨è¾¾å¼</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> age;<br>    <span class="hljs-meta">@Value(&quot;ç”·&quot;)</span>  <span class="hljs-comment">// å­—é¢é‡</span><br>    <span class="hljs-keyword">private</span> String sex;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>SpringBootæµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DemoApplicationTests</span> </span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    User user;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">contextLoads</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(user);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ç¨‹åºæ­£å¸¸è¾“å‡º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">User(name=ä¹”å¨, age=<span class="hljs-number">19</span>, sex=ç”·)<br></code></pre></td></tr></table></figure></li></ol><h3 id="äº”ã€å¯¹æ¯”å°ç»“"><a href="#äº”ã€å¯¹æ¯”å°ç»“" class="headerlink" title="äº”ã€å¯¹æ¯”å°ç»“"></a>äº”ã€å¯¹æ¯”å°ç»“</h3><p>@Valueè¿™ä¸ªä½¿ç”¨èµ·æ¥å¹¶ä¸å‹å¥½ï¼Œæˆ‘ä»¬è¦ä¸ºæ¯ä¸ªå±æ€§å•ç‹¬æ³¨è§£èµ‹å€¼ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œæ¥çœ‹ä¸‹é¢çš„åŠŸèƒ½å¯¹æ¯”è¡¨ï¼š</p><table><thead><tr><th></th><th>@ConfigurationProperties</th><th>@Value</th></tr></thead><tbody><tr><td>åŠŸèƒ½</td><td>æ‰¹é‡æ³¨å…¥é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§</td><td>ä¸€ä¸ªä¸ªæŒ‡å®š</td></tr><tr><td>æ¾æ•£ç»‘å®š</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>SPEL</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>JSR303æ•°æ®æ ¡éªŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>å¤æ‚ç±»å‹å°è£…</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr></tbody></table><ol><li>@ConfigurationPropertiesåªéœ€è¦å†™ä¸€æ¬¡å³å¯ ï¼Œ @Valueåˆ™éœ€è¦æ¯ä¸ªå­—æ®µéƒ½æ·»åŠ </li><li>æ¾æ•£ç»‘å®šï¼šè¿™ä¸ªä»€ä¹ˆæ„æ€å‘¢? æ¯”å¦‚æˆ‘çš„ymlä¸­å†™çš„last-nameï¼Œè¿™ä¸ªå’ŒlastNameæ˜¯ä¸€æ ·çš„ï¼Œ - åé¢è·Ÿç€çš„å­—æ¯é»˜è®¤æ˜¯å¤§å†™çš„ã€‚è¿™å°±æ˜¯æ¾æ•£ç»‘å®šã€‚å¯ä»¥æµ‹è¯•ä¸€ä¸‹</li><li>JSR303æ•°æ®æ ¡éªŒ ï¼Œ è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨å­—æ®µæ˜¯å¢åŠ ä¸€å±‚è¿‡æ»¤å™¨éªŒè¯ ï¼Œ å¯ä»¥ä¿è¯æ•°æ®çš„åˆæ³•æ€§</li><li>å¤æ‚ç±»å‹å°è£…ï¼Œymlä¸­å¯ä»¥å°è£…å¯¹è±¡ ï¼Œ ä½¿ç”¨valueå°±ä¸æ”¯æŒ</li></ol><p><strong>ç»“è®º</strong>ï¼š</p><p>é…ç½®ymlå’Œé…ç½®propertieséƒ½å¯ä»¥è·å–åˆ°å€¼ ï¼Œ å¼ºçƒˆæ¨è ymlï¼›</p><p>å¦‚æœæˆ‘ä»¬åœ¨æŸä¸ªä¸šåŠ¡ä¸­ï¼Œåªéœ€è¦è·å–é…ç½®æ–‡ä»¶ä¸­çš„æŸä¸ªå€¼ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸‹ @valueï¼›</p><p>å¦‚æœè¯´ï¼Œæˆ‘ä»¬ä¸“é—¨ç¼–å†™äº†ä¸€ä¸ªJavaBeanæ¥å’Œé…ç½®æ–‡ä»¶è¿›è¡Œä¸€ä¸€æ˜ å°„ï¼Œå°±ç›´æ¥@configurationPropertiesï¼Œä¸è¦çŠ¹è±«ï¼</p>]]></content>
    
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBootç¬”è®°02-è¿è¡ŒåŸç†æ·±å…¥æµ…å‡º</title>
    <link href="/posts/2021/01/07/SpringBoot%E7%AC%94%E8%AE%B002-%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA/"/>
    <url>/posts/2021/01/07/SpringBoot%E7%AC%94%E8%AE%B002-%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA/</url>
    
    <content type="html"><![CDATA[<h1 id="è¿è¡ŒåŸç†æ·±å…¥æµ…å‡º"><a href="#è¿è¡ŒåŸç†æ·±å…¥æµ…å‡º" class="headerlink" title="è¿è¡ŒåŸç†æ·±å…¥æµ…å‡º"></a>è¿è¡ŒåŸç†æ·±å…¥æµ…å‡º</h1><hr><blockquote><p> æˆ‘ä»¬ä¹‹å‰å†™çš„SpringBooté¡¹ç›®ï¼Œåˆ°åº•æ˜¯å¦‚ä½•è¿è¡Œçš„å‘¢ï¼Ÿæ—¢ç„¶å®ƒæ˜¯ä¸€ä¸ªMavené¡¹ç›®ï¼Œæˆ‘ä»¬ä»<code>pom.xml</code>æ–‡ä»¶å¼€å§‹æ¢ç©¶ã€‚</p></blockquote><hr><h2 id="pomæ–‡ä»¶è§£æ"><a href="#pomæ–‡ä»¶è§£æ" class="headerlink" title="pomæ–‡ä»¶è§£æ"></a>pomæ–‡ä»¶è§£æ</h2><h3 id="ä¸€ã€çˆ¶ä¾èµ–"><a href="#ä¸€ã€çˆ¶ä¾èµ–" class="headerlink" title="ä¸€ã€çˆ¶ä¾èµ–"></a>ä¸€ã€çˆ¶ä¾èµ–</h3><p>åœ¨pom.xmlä¸­ï¼Œæœ‰<parent></parent>æ ‡ç­¾ï¼Œè¡¨ç¤ºå®ƒæ˜¯æœ‰çˆ¶é¡¹ç›®<code>spring-boot-starter-parent.xml</code>çš„ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.4.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span> <span class="hljs-comment">&lt;!-- lookup parent from repository --&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬ç‚¹å‡»è¯¥è¯¥çˆ¶é¡¹ç›®ï¼Œè¿›å…¥<code>spring-boot-starter-parent.xml</code>ï¼Œå®ƒä¸»è¦æ˜¯ç®¡ç†é¡¹ç›®çš„èµ„æºè¿‡æ»¤å’Œæ’ä»¶ã€‚åœ¨å®ƒé‡Œé¢ï¼Œè¿˜æ˜¯ä¾èµ–äºä¸€ä¸ªçˆ¶é¡¹ç›®<code>spring-boot-dependencies.xml</code>ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.4.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œå°±æ˜¯çœŸæ­£ç®¡ç†SpringBootåº”ç”¨ä¸­æ‰€æœ‰ä¾èµ–ç‰ˆæœ¬çš„æ–‡ä»¶ï¼Œæ˜¯SpringBootçš„ç‰ˆæœ¬æ§åˆ¶ä¸­å¿ƒã€‚</p><p><strong>æˆ‘ä»¬ä¹‹åå¯¼å…¥ä¾èµ–æ˜¯é»˜è®¤ä¸éœ€è¦å†™ç‰ˆæœ¬çš„ï¼Œä½†å¦‚æœå¯¼å…¥çš„åŒ…åœ¨æ²¡æœ‰åœ¨ç‰ˆæœ¬æ§åˆ¶ä¸­å¿ƒç®¡ç†ç€å°±éœ€è¦æ‰‹åŠ¨é…ç½®ç‰ˆæœ¬ã€‚</strong></p><h3 id="äºŒã€å¯åŠ¨å™¨"><a href="#äºŒã€å¯åŠ¨å™¨" class="headerlink" title="äºŒã€å¯åŠ¨å™¨"></a>äºŒã€å¯åŠ¨å™¨</h3><p>æˆ‘ä»¬è¿™é‡Œè¯´çš„å¯åŠ¨å™¨æ˜¯<code>spring-boot-starter</code>ï¼Œåœ¨pomæ–‡ä»¶ä¸­ä»¥ä¾èµ–å½¢å¼å­˜åœ¨ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--é»˜è®¤çš„å¯åŠ¨å™¨--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!--webå¯åŠ¨å™¨--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>spring-boot-starter-xxx</strong>ï¼šspring-bootçš„åœºæ™¯å¯åŠ¨å™¨ã€‚ä¾‹å¦‚<strong>spring-boot-starter-web</strong>ï¼Œå®ƒå¸®æˆ‘ä»¬å¯¼å…¥äº†webé¡¹ç›®æ­£å¸¸è¿è¡Œæ‰€ä¾èµ–çš„æ‰€æœ‰åŒ…ã€‚</p><p>SpringBootå°†æ‰€æœ‰çš„åŠŸèƒ½åœºæ™¯éƒ½æŠ½å–äº†å‡ºæ¥ï¼Œåšæˆä¸€ä¸ªä¸ªçš„starterï¼ˆå¯åŠ¨å™¨ï¼‰ï¼Œåªéœ€è¦åœ¨é¡¹ç›®ä¸­å¼•å…¥è¿™äº›starterå³å¯ï¼Œæ‰€æœ‰ç›¸å…³çš„ä¾èµ–éƒ½ä¼šå¯¼å…¥è¿›æ¥ ï¼Œ æˆ‘ä»¬è¦ç”¨ä»€ä¹ˆåŠŸèƒ½å°±å¯¼å…¥ä»€ä¹ˆæ ·çš„åœºæ™¯å¯åŠ¨å™¨å³å¯ ã€‚æˆ‘ä»¬æœªæ¥ä¹Ÿå¯ä»¥è‡ªå·±è‡ªå®šä¹‰ starterã€‚</p><p>å…·ä½“å‚è€ƒçš„å¯åŠ¨å™¨åœ¨å®˜ç½‘æœ‰è¯´æ˜ï¼š<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-starter">https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-starter</a></p><hr><blockquote><p>åˆ†æå®Œpom.xmlåæˆ‘ä»¬æ¥çœ‹çœ‹ä¸»å¯åŠ¨ç±»æœ‰ä»€ä¹ˆåå ‚ã€‚</p></blockquote><hr><h2 id="ä¸»å¯åŠ¨ç±»è§£æ"><a href="#ä¸»å¯åŠ¨ç±»è§£æ" class="headerlink" title="ä¸»å¯åŠ¨ç±»è§£æ"></a>ä¸»å¯åŠ¨ç±»è§£æ</h2><h3 id="ä¸€ã€é»˜è®¤çš„ä¸»å¯åŠ¨ç±»"><a href="#ä¸€ã€é»˜è®¤çš„ä¸»å¯åŠ¨ç±»" class="headerlink" title="ä¸€ã€é»˜è®¤çš„ä¸»å¯åŠ¨ç±»"></a>ä¸€ã€é»˜è®¤çš„ä¸»å¯åŠ¨ç±»</h3><p>é»˜è®¤ä¸»å¯åŠ¨ç±»çš„å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//@SpringBootApplication æ¥æ ‡æ³¨ä¸€ä¸ªä¸»ç¨‹åºç±»</span><br><span class="hljs-comment">//è¯´æ˜è¿™æ˜¯ä¸€ä¸ªSpring Bootåº”ç”¨</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SpringbootApplication</span> </span>&#123;<br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>     <span class="hljs-comment">//ä»¥ä¸ºæ˜¯å¯åŠ¨äº†ä¸€ä¸ªæ–¹æ³•ï¼Œæ²¡æƒ³åˆ°å¯åŠ¨äº†ä¸€ä¸ªæœåŠ¡</span><br>      SpringApplication.run(SpringbootApplication.class, args);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½†æ˜¯<strong>ä¸€ä¸ªç®€å•çš„å¯åŠ¨ç±»å¹¶ä¸ç®€å•ï¼</strong>æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹è¿™äº›æ³¨è§£éƒ½å¹²äº†ä»€ä¹ˆ.</p><h3 id="äºŒã€-SpringBootApplicationâ€”é¡¹ç›®çš„åŸºçŸ³"><a href="#äºŒã€-SpringBootApplicationâ€”é¡¹ç›®çš„åŸºçŸ³" class="headerlink" title="äºŒã€@SpringBootApplicationâ€”é¡¹ç›®çš„åŸºçŸ³"></a>äºŒã€@SpringBootApplicationâ€”é¡¹ç›®çš„åŸºçŸ³</h3><p>@SpringBootApplicationçš„ä½œç”¨æ˜¯ï¼š<strong>æ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Šè¯´æ˜è¿™ä¸ªç±»ä¸ºSpringBootçš„ä¸»å¯åŠ¨ç±»</strong>ï¼ŒSpringBootéœ€è¦è¿è¡Œè¿™ä¸ªç±»çš„mainæ–¹æ³•æ¥å¯åŠ¨é¡¹ç›®ã€‚</p><p>è¿›å…¥è¿™ä¸ªæ³¨è§£ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°ä¸‹é¢çš„å†…å®¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Target(ElementType.TYPE)</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@Documented</span><br><span class="hljs-meta">@Inherited</span><br><span class="hljs-meta">@SpringBootConfiguration</span><br><span class="hljs-meta">@EnableAutoConfiguration</span><br><span class="hljs-meta">@ComponentScan(excludeFilters = &#123;</span><br><span class="hljs-meta">  @Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),</span><br><span class="hljs-meta">  @Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) &#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> SpringBootApplication &#123;<br>   ......<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨å…¶ä¸­ <strong>@SpringBootConfigurationï¼Œ@EnableAutoConfigurationï¼Œ@ComponentScan</strong>æ˜¯æˆ‘ä»¬æ‰€å…³å¿ƒçš„3ä¸ªæ³¨è§£ï¼Œä¸‹é¢æ˜¯å®˜ç½‘ä¸Šå¯¹å®ƒä»¬çš„è§£é‡Šï¼š</p><ul><li><p>@SpringBootConfigurationï¼šå…è®¸åœ¨ Spring ä¸Šä¸‹æ–‡ä¸­æ³¨å†Œé¢å¤–çš„ bean æˆ–å¯¼å…¥å…¶ä»–é…ç½®ç±»</p></li><li><p>@EnableAutoConfigurationï¼šå¯ç”¨ SpringBoot çš„è‡ªåŠ¨é…ç½®æœºåˆ¶</p></li><li><p>@ComponentScanï¼š æ‰«æè¢«@Component (@Service,@Controller)æ³¨è§£çš„ beanï¼Œæ³¨è§£é»˜è®¤ä¼šæ‰«æè¯¥ç±»æ‰€åœ¨çš„åŒ…ä¸‹æ‰€æœ‰çš„ç±»ã€‚</p></li></ul><p>ä¸‹é¢ï¼Œæˆ‘ä»¬å°†å¯¹è¿™ä¸‰ä¸ªæ³¨è§£åº•å±‚è¿›è¡Œè¯¦ç»†æ¢ç©¶ã€‚</p><h3 id="ä¸‰ã€-ComponentScanâ€”æ‰«æåŒ…ä¸‹è¢«è£…é…çš„ç±»"><a href="#ä¸‰ã€-ComponentScanâ€”æ‰«æåŒ…ä¸‹è¢«è£…é…çš„ç±»" class="headerlink" title="ä¸‰ã€@ComponentScanâ€”æ‰«æåŒ…ä¸‹è¢«è£…é…çš„ç±»"></a>ä¸‰ã€@ComponentScanâ€”æ‰«æåŒ…ä¸‹è¢«è£…é…çš„ç±»</h3><p>ä½¿ç”¨è¿‡ spring æ¡†æ¶çš„å°ä¼™ä¼´éƒ½çŸ¥é“ï¼Œspringä¸­æœ‰4ä¸ªæ³¨è§£å¯ä»¥<strong>å®šä¹‰ä¸€ä¸ª bean</strong> ï¼Œåˆ†åˆ«æ˜¯<code>@Service</code>ï¼Œ<code>@Repository</code>ï¼Œ<code>@Component</code>ï¼Œ<code>@Controller</code>ã€‚è€Œ<code>@Component</code>æ³¨è§£å°±æ˜¯ç”¨æ¥è‡ªåŠ¨æ‰«æè¢«è¿™äº›æ³¨è§£æ ‡è¯†çš„ç±»ï¼Œæœ€ç»ˆ<strong>ç”Ÿæˆ IOC å®¹å™¨ä¸­çš„ bean</strong>ã€‚</p><p>åœ¨<code>@Component</code>ä¸­ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®basePackagesï¼ŒincludeFiltersï¼ŒexcludeFilterså±æ€§æ¥<strong>åŠ¨æ€ç¡®å®šè‡ªåŠ¨æ‰«æèŒƒå›´</strong>ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒæ‰«æä¸Šé¢çš„æ‰€æœ‰çš„ç±»å‹ï¼Œå¹¶ä¸”æ‰«æèŒƒå›´æ˜¯<code>@Component</code>æ³¨è§£æ‰€åœ¨é…ç½®ç±»ï¼ˆå³é»˜è®¤çš„ä¸»å¯åŠ¨ç±»ï¼‰çš„<strong>åŒçº§ç›®å½•çš„ç±»å³è¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰å­ç›®å½•çš„ç±»</strong>ã€‚</p><p>æ‰€ä»¥ï¼Œä½¿ç”¨<code>@SpringBootApplication</code>æ³¨è§£ï¼Œå°±è¯´æ˜æˆ‘ä»¬ä½¿ç”¨äº†<code>@ComponentScan</code>çš„é»˜è®¤é…ç½®ï¼Œæˆ‘ä»¬å»ºè®®æŠŠä½¿ç”¨<code>@SpringBootApplication</code>æ³¨è§£çš„ç±»æ”¾ç½®åœ¨ root packageä¸‹ï¼Œå…¶ä»–ç±»éƒ½æ”¾ç½®åœ¨ root packageçš„å­åŒ…é‡Œé¢ï¼Œè¿™æ · bean å°±ä¸ä¼šè¢«é—æ¼æ‰«æã€‚</p><h3 id="å››ã€-SpringBootConfigurationâ€”å£°æ˜é…ç½®ç±»"><a href="#å››ã€-SpringBootConfigurationâ€”å£°æ˜é…ç½®ç±»" class="headerlink" title="å››ã€@SpringBootConfigurationâ€”å£°æ˜é…ç½®ç±»"></a>å››ã€@SpringBootConfigurationâ€”å£°æ˜é…ç½®ç±»</h3><p>è¿™ä¸ªæ³¨è§£çš„ä½œç”¨å’Œ<code>@Configuration</code>çš„ä½œç”¨åŸºæœ¬ç›¸åŒï¼Œå…¶å®ç‚¹è¿›<code>@SpringBootConfiguration</code>é‡Œé¢ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ª<code>@Configuration</code>ï¼Œæ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Šï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªSpringBootçš„é…ç½®ç±»ï¼Œé…ç½®ç±»å¯¹åº”ç€å¯ä»¥æ›¿æ¢Springçš„xmlé…ç½®æ–‡ä»¶ï¼Œè¢«æ³¨è§£çš„ç±»å†…éƒ¨åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ª<code>@Bean</code>æ³¨è§£æ–¹æ³•ï¼Œç”¨äºæ„å»ºbeanå®šä¹‰ä»¥åŠåˆå§‹åŒ–Springå®¹å™¨ã€‚</p><h3 id="äº”ã€-EnableAutoConfigurationâ€”è‡ªåŠ¨è£…é…"><a href="#äº”ã€-EnableAutoConfigurationâ€”è‡ªåŠ¨è£…é…" class="headerlink" title="äº”ã€@EnableAutoConfigurationâ€”è‡ªåŠ¨è£…é…"></a>äº”ã€@EnableAutoConfigurationâ€”è‡ªåŠ¨è£…é…</h3><p>åœ¨è¿™é‡Œæˆ‘ä»¬ä¸€æ­¥æ­¥çš„ç”±æµ…å…¥æ·±ç‚¹è¿›æ³¨è§£å’Œæ–¹æ³•æŸ¥çœ‹å®ƒçš„è¿è¡ŒåŸç†ï¼Œä¸‹é¢çš„ç›®å½•ä»…ä»£è¡¨ç›®å½•ç»“æ„ã€‚</p><h4 id="1-EnableAutoConfigurationï¼šå¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½"><a href="#1-EnableAutoConfigurationï¼šå¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½" class="headerlink" title="1. @EnableAutoConfigurationï¼šå¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½"></a><strong>1. @EnableAutoConfigurationï¼šå¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½</strong></h4><p>ä¹‹å‰æˆ‘ä»¬éœ€è¦è‡ªå·±é…ç½®çš„ä¸œè¥¿ï¼Œè€Œç°åœ¨SpringBootå¯ä»¥å¸®æˆ‘ä»¬è‡ªåŠ¨é…ç½®ã€‚@EnableAutoConfigurationå‘Šè¯‰SpringBootå¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼Œè¿™æ ·è‡ªåŠ¨é…ç½®æ‰èƒ½ç”Ÿæ•ˆã€‚ç‚¹å‡»è¿›å…¥æ³¨è§£ç»§ç»­æŸ¥çœ‹å‘ç°æœ‰ä¸‹é¢çš„æ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@AutoConfigurationPackage</span><br><span class="hljs-meta">@Import(AutoConfigurationImportSelector.class)</span><br></code></pre></td></tr></table></figure><ul><li><p><strong>1.1 @AutoConfigurationPackageï¼šè‡ªåŠ¨é…ç½®åŒ…</strong></p></li><li><p><strong>1.2 @Import(AutoConfigurationImportSelector.class)ï¼šç»™å®¹å™¨å¯¼å…¥ç»„ä»¶</strong></p></li></ul><p>ä¸ºäº†ä¸è®©ç»“æ„å˜å¾—æ›´æ··ä¹±ï¼Œæˆ‘ä»¬æŠŠ1.1å’Œ1.2æå‡ºæ¥å½“åš2å’Œ3æ¥åˆ†æã€‚</p><h4 id="2-AutoConfigurationPackageï¼šè‡ªåŠ¨é…ç½®åŒ…"><a href="#2-AutoConfigurationPackageï¼šè‡ªåŠ¨é…ç½®åŒ…" class="headerlink" title="2. @AutoConfigurationPackageï¼šè‡ªåŠ¨é…ç½®åŒ…"></a><strong>2. @AutoConfigurationPackageï¼šè‡ªåŠ¨é…ç½®åŒ…</strong></h4><p>â€‹    </p><p>åœ¨è¿™ä¸ªæ³¨è§£ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™æ ·çš„å†…å®¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Target(ElementType.TYPE)</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@Documented</span><br><span class="hljs-meta">@Inherited</span><br><span class="hljs-meta">@Import(AutoConfigurationPackages.Registrar.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> AutoConfigurationPackage &#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œï¼Œå®ƒå¯¼å…¥äº†AutoConfigurationPackages.Registrar.classï¼Œå­—é¢æ„æ€ä¸ºè‡ªåŠ¨æ³¨å†Œç±»ã€‚è€ŒRegistrar.classçš„ä½œç”¨æ˜¯ï¼š<strong>å°†ä¸»å¯åŠ¨ç±»çš„æ‰€åœ¨åŒ…åŠåŒ…ä¸‹é¢æ‰€æœ‰å­åŒ…é‡Œé¢çš„æ‰€æœ‰ç»„ä»¶æ‰«æåˆ°Springå®¹å™¨</strong> ã€‚</p><p><strong>æˆ‘ä»¬ç‚¹è¿›Registrarè¿™ä¸ªç±»æ¥çœ‹ä¸€çœ‹</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Registrar</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ImportBeanDefinitionRegistrar</span>, <span class="hljs-title">DeterminableImports</span> </span>&#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">registerBeanDefinitions</span><span class="hljs-params">(AnnotationMetadata metadata, BeanDefinitionRegistry registry)</span> </span>&#123;<br>        register(registry, <span class="hljs-keyword">new</span> PackageImports(metadata).getPackageNames().toArray(<span class="hljs-keyword">new</span> String[<span class="hljs-number">0</span>]));<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Set&lt;Object&gt; <span class="hljs-title">determineImports</span><span class="hljs-params">(AnnotationMetadata metadata)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> Collections.singleton(<span class="hljs-keyword">new</span> PackageImports(metadata));<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬é‡ç‚¹çœ‹ä¸€ä¸‹<code>registerBeanDefinitions()</code>æ–¹æ³•ã€‚æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°é€šè¿‡<code>new PackageImports(metadata).getPackageNames()</code>çš„æ–¹æ³•æ¥èµ‹å€¼ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬çœ‹ä¸€ä¸‹<code>PackageImportsç±»</code>çš„æ„é€ å™¨æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java">PackageImports(AnnotationMetadata metadata) &#123;<br>    AnnotationAttributes attributes = AnnotationAttributes<br>        .fromMap(metadata.getAnnotationAttributes(AutoConfigurationPackage.class.getName(), <span class="hljs-keyword">false</span>));<br>    List&lt;String&gt; packageNames = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;(Arrays.asList(attributes.getStringArray(<span class="hljs-string">&quot;basePackages&quot;</span>)));<br>    <span class="hljs-keyword">for</span> (Class&lt;?&gt; basePackageClass : attributes.getClassArray(<span class="hljs-string">&quot;basePackageClasses&quot;</span>)) &#123;<br>        packageNames.add(basePackageClass.getPackage().getName());<br>    &#125;<br>    <span class="hljs-keyword">if</span> (packageNames.isEmpty()) &#123;<br>        packageNames.add(ClassUtils.getPackageName(metadata.getClassName()));<br>    &#125;<br>    <span class="hljs-keyword">this</span>.packageNames = Collections.unmodifiableList(packageNames);<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p>metadataï¼šå®é™…ä¸Šæ˜¯StandardAnnotationMetadataçš„å®ä¾‹ã€‚</p></li><li><p>metadata.getAnnotationAttributes(AutoConfigurationPackage.class.getName(), false)ï¼šè¿™ä¸ªæ–¹æ³•è·å–äº†æ ‡æ³¨<code>@AutoConfigurationPackage</code>æ³¨è§£çš„ç±»çš„å…¨é™å®šå</p></li><li><p>packageNames.add(basePackageClass.getPackage().getName())ï¼šè¿™ä¸ªæ–¹æ³•è·å–äº†å…¶æ‰€åœ¨çš„åŒ…åã€‚</p></li></ul><p>ç„¶åï¼Œçœ‹è¿™ä¸ª<code>Registrar</code>ç±»ä¸­çš„<code>register()</code>æ–¹æ³•:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">register</span><span class="hljs-params">(BeanDefinitionRegistry registry, String... packageNames)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (registry.containsBeanDefinition(BEAN)) &#123;<br>        BasePackagesBeanDefinition beanDefinition = (BasePackagesBeanDefinition) registry.getBeanDefinition(BEAN);<br>        beanDefinition.addBasePackages(packageNames);<br>    &#125;<br>    <span class="hljs-keyword">else</span> &#123;<br>        registry.registerBeanDefinition(BEAN, <span class="hljs-keyword">new</span> BasePackagesBeanDefinition(packageNames));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬èµ°elseçš„é€»è¾‘ï¼Œå…¶å®å°±æ˜¯æ„å»ºäº†ä¸€ä¸ªå®ä¾‹ï¼Œè¿›è¡Œæ³¨å†Œã€‚</p><h4 id="3-Import-AutoConfigurationImportSelector-class-ï¼šç»™å®¹å™¨å¯¼å…¥ç»„ä»¶"><a href="#3-Import-AutoConfigurationImportSelector-class-ï¼šç»™å®¹å™¨å¯¼å…¥ç»„ä»¶" class="headerlink" title="3. @Import(AutoConfigurationImportSelector.class)ï¼šç»™å®¹å™¨å¯¼å…¥ç»„ä»¶"></a>3. @Import(AutoConfigurationImportSelector.class)ï¼šç»™å®¹å™¨å¯¼å…¥ç»„ä»¶</h4><p>æˆ‘ä»¬é¦–å…ˆçœ‹è¿™é‡Œçš„<code>AutoConfigurationImportSelector </code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªè‡ªåŠ¨é…ç½®å¯¼å…¥é€‰æ‹©å™¨ï¼Œé‚£ä¹ˆå®ƒä¼šå¯¼å…¥å“ªäº›ç»„ä»¶çš„é€‰æ‹©å™¨å‘¢ï¼Ÿ</p><p><strong>æˆ‘ä»¬ç‚¹è¿›AutoConfigurationImportSelectorè¿™ä¸ªç±»çœ‹ä¸€çœ‹</strong>ï¼š</p><ol><li><p>ç±»ä¸­æœ‰è¿™æ ·çš„ä¸€ä¸ªæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">protected</span> List&lt;String&gt; <span class="hljs-title">getCandidateConfigurations</span><span class="hljs-params">(AnnotationMetadata metadata, AnnotationAttributes attributes)</span> </span>&#123;<br>    List&lt;String&gt; configurations = SpringFactoriesLoader.loadFactoryNames(getSpringFactoriesLoaderFactoryClass(),<br>                                                                         getBeanClassLoader());<br>    Assert.notEmpty(configurations, <span class="hljs-string">&quot;No auto configuration classes found in META-INF/spring.factories. If you &quot;</span><br>                    + <span class="hljs-string">&quot;are using a custom packaging, make sure that file is correct.&quot;</span>);<br>    <span class="hljs-keyword">return</span> configurations;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p>è¿™é‡Œçš„<code>getSpringFactoriesLoaderFactoryClass</code>æ–¹æ³•ï¼Œè¿”å›çš„å°±æ˜¯æˆ‘ä»¬æœ€å¼€å§‹çœ‹åˆ°å¯åŠ¨ç±»è‡ªåŠ¨å¯¼å…¥é…ç½®çš„æ³¨è§£ç±»ï¼š<code>EnableAutoConfiguration</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> Class&lt;?&gt; getSpringFactoriesLoaderFactoryClass() &#123;<br>    <span class="hljs-keyword">return</span> EnableAutoConfiguration.class;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul></li></ol><p>   è¿™ä¸ªæ–¹æ³•è¿˜è°ƒç”¨äº†<code>SpringFactoriesLoader</code>ç±»çš„é™æ€æ–¹æ³•ï¼Œæˆ‘ä»¬è¿›å…¥SpringFactoriesLoaderç±»loadFactoryNames() æ–¹æ³•ã€‚</p><ol start="2"><li><p><strong>loadFactoryNamesæ–¹æ³•</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> List&lt;String&gt; <span class="hljs-title">loadFactoryNames</span><span class="hljs-params">(Class&lt;?&gt; factoryType, <span class="hljs-meta">@Nullable</span> ClassLoader classLoader)</span> </span>&#123;<br>    ClassLoader classLoaderToUse = classLoader;<br>    <span class="hljs-keyword">if</span> (classLoaderToUse == <span class="hljs-keyword">null</span>) &#123;<br>        classLoaderToUse = SpringFactoriesLoader.class.getClassLoader();<br>    &#125;<br>    String factoryTypeName = factoryType.getName();<br>    <span class="hljs-keyword">return</span> loadSpringFactories(classLoaderToUse).getOrDefault(factoryTypeName, Collections.emptyList());<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><p>â€‹        åœ¨è¿™é‡Œï¼Œæ­¤æ–¹æ³•è°ƒç”¨äº†åˆè°ƒç”¨äº†<code>loadSpringFactories</code>æ–¹æ³•ï¼Œæˆ‘ä»¬ä¾æ—§ç»§ç»­ç‚¹å‡»æŸ¥çœ‹ã€‚</p><ol start="3"><li><p><strong>loadSpringFactoriesæ–¹æ³•å†…å®¹å¦‚ä¸‹</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Map&lt;String, List&lt;String&gt;&gt; loadSpringFactories(ClassLoader classLoader) &#123;<br>    Map&lt;String, List&lt;String&gt;&gt; result = cache.get(classLoader);<br>    <span class="hljs-keyword">if</span> (result != <span class="hljs-keyword">null</span>) &#123;<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br><br>    result = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>    <span class="hljs-keyword">try</span> &#123;<br>        Enumeration&lt;URL&gt; urls = classLoader.getResources(FACTORIES_RESOURCE_LOCATION);<br>        <span class="hljs-keyword">while</span> (urls.hasMoreElements()) &#123;<br>            URL url = urls.nextElement();<br>            UrlResource resource = <span class="hljs-keyword">new</span> UrlResource(url);<br>            Properties properties = PropertiesLoaderUtils.loadProperties(resource);<br>            <span class="hljs-keyword">for</span> (Map.Entry&lt;?, ?&gt; entry : properties.entrySet()) &#123;<br>                String factoryTypeName = ((String) entry.getKey()).trim();<br>                String[] factoryImplementationNames =<br>                    StringUtils.commaDelimitedListToStringArray((String) entry.getValue());<br>                <span class="hljs-keyword">for</span> (String factoryImplementationName : factoryImplementationNames) &#123;<br>                    result.computeIfAbsent(factoryTypeName, key -&gt; <span class="hljs-keyword">new</span> ArrayList&lt;&gt;())<br>                        .add(factoryImplementationName.trim());<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-comment">// Replace all lists with unmodifiable lists containing unique elements</span><br>        result.replaceAll((factoryType, implementations) -&gt; implementations.stream().distinct()<br>                          .collect(Collectors.collectingAndThen(Collectors.toList(), Collections::unmodifiableList)));<br>        cache.put(classLoader, result);<br>    &#125;<br>    <span class="hljs-keyword">catch</span> (IOException ex) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(<span class="hljs-string">&quot;Unable to load factories from location [&quot;</span> +<br>                                           FACTORIES_RESOURCE_LOCATION + <span class="hljs-string">&quot;]&quot;</span>, ex);<br>    &#125;<br>    <span class="hljs-keyword">return</span> result;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li>åœ¨tryè¯­å¥å—å†…ï¼Œ<code>classLoader.getResources(FACTORIES_RESOURCE_LOCATION)</code>é¦–é€‰æ˜¯è·å–äº†ä¸€ä¸ªèµ„æºåä¸ºï¼š<code>FACTORIES_RESOURCE_LOCATION</code>çš„æ–‡ä»¶ã€‚è€Œåå°†è¯»å–åˆ°çš„èµ„æºè¿›è¡Œéå†ï¼Œå°è£…æˆä¸€ä¸ªPropertiesæ–‡ä»¶ä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚</li></ol><p>â€‹        <strong>ç‚¹å‡»è¿™ä¸ª<code>FACTORIES_RESOURCE_LOCATION</code>ï¼Œæˆ‘ä»¬æŸ¥åˆ°äº†å®ƒçš„æ–‡ä»¶åï¼šspring.factories</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String FACTORIES_RESOURCE_LOCATION = <span class="hljs-string">&quot;META-INF/spring.factories&quot;</span>;<br></code></pre></td></tr></table></figure></li></ol><p>   æˆ‘ä»¬å…¨å±€æœç´¢è¿™ä¸ª<strong>spring.factories</strong>ï¼Œæ‰¾åˆ°äº†å®ƒçš„æºå¤´åœ¨ä¸€ä¸ªjaråŒ…ä¸‹ï¼Œæˆ‘ä»¬æ‰“å¼€å®ƒã€‚çœ‹åˆ°äº†å¾ˆå¤šè‡ªåŠ¨é…ç½®çš„æ–‡ä»¶ï¼›è¿™å°±æ˜¯è‡ªåŠ¨é…ç½®æ ¹æºæ‰€åœ¨ï¼</p><p>   <img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B002-%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA/spring_factories.png" alt="spring.factoriesæ–‡ä»¶"></p><h4 id="4-ç»“è®º"><a href="#4-ç»“è®º" class="headerlink" title="4.ç»“è®º"></a>4.ç»“è®º</h4><ol><li>SpringBootåœ¨å¯åŠ¨çš„æ—¶å€™ä»ç±»è·¯å¾„ä¸‹çš„META-INF/spring.factoriesä¸­è·å–EnableAutoConfigurationæŒ‡å®šçš„å€¼</li><li>å°†è¿™äº›å€¼ä½œä¸ºè‡ªåŠ¨é…ç½®ç±»å¯¼å…¥å®¹å™¨ ï¼Œ è‡ªåŠ¨é…ç½®ç±»å°±ç”Ÿæ•ˆ ï¼Œ å¸®æˆ‘ä»¬è¿›è¡Œè‡ªåŠ¨é…ç½®å·¥ä½œï¼›</li><li>æ•´ä¸ªJ2EEçš„æ•´ä½“è§£å†³æ–¹æ¡ˆå’Œè‡ªåŠ¨é…ç½®éƒ½åœ¨springboot-autoconfigureçš„jaråŒ…ä¸­ï¼›</li><li>å®ƒä¼šç»™å®¹å™¨ä¸­å¯¼å…¥éå¸¸å¤šçš„è‡ªåŠ¨é…ç½®ç±» ï¼ˆxxxAutoConfigurationï¼‰, å°±æ˜¯ç»™å®¹å™¨ä¸­å¯¼å…¥è¿™ä¸ªåœºæ™¯éœ€è¦çš„æ‰€æœ‰ç»„ä»¶ ï¼Œ å¹¶é…ç½®å¥½è¿™äº›ç»„ä»¶ ï¼›</li><li>æœ‰äº†è‡ªåŠ¨é…ç½®ç±» ï¼Œ å…å»äº†æˆ‘ä»¬æ‰‹åŠ¨ç¼–å†™é…ç½®æ³¨å…¥åŠŸèƒ½ç»„ä»¶ç­‰çš„å·¥ä½œï¼›</li></ol><hr><blockquote><p>ä¸‹é¢ï¼Œæˆ‘ä»¬æ¢ç©¶ä¸€ä¸‹ä¸»å¯åŠ¨ç±»æ˜¯å¦‚ä½•è¿è¡Œçš„</p></blockquote><hr><h2 id="ä¸»å¯åŠ¨ç±»è¿è¡Œè§£æ"><a href="#ä¸»å¯åŠ¨ç±»è¿è¡Œè§£æ" class="headerlink" title="ä¸»å¯åŠ¨ç±»è¿è¡Œè§£æ"></a>ä¸»å¯åŠ¨ç±»è¿è¡Œè§£æ</h2><p><code>SpringApplication</code>ç±»ç”¨äºå¼•å¯¼å’Œå¯åŠ¨ä¸€ä¸ªSpringåº”ç”¨ç¨‹åºï¼ˆå³SpringBootå¼€å‘çš„åº”ç”¨ï¼‰ã€‚é€šå¸¸ç”¨SpringBootå¼€å‘ä¸€ä¸ªåº”ç”¨æ—¶ï¼Œåœ¨ä¸»ç±»çš„mainå‡½æ•°ä¸­å¯ä»¥é€šè¿‡å¦‚ä¸‹ä»£ç å¯åŠ¨ä¸€ä¸ªSpringåº”ç”¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æ ‡æ³¨è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªspringbootçš„åº”ç”¨</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Springboot01HelloworldApplication</span> </span>&#123;<br>    <span class="hljs-comment">// å°†springbootåº”ç”¨å¯åŠ¨</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        SpringApplication.run(Springboot01HelloworldApplication.class, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>SpringApplicationçš„é™æ€æ–¹æ³•<code>run(Class&lt;?&gt; primarySource, String... args)</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°æ¥å—ä¸€ä¸ªSpringå®¹å™¨é…ç½®ç±»ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å‘½ä»¤è¡Œå‚æ•°ã€‚å°†å‘½ä»¤è¡Œå‚æ•°è½¬å‘ç»™SpringApplicationç±»ï¼Œå°±å¯ä»¥åœ¨ç”¨javaå‘½ä»¤å¯åŠ¨åº”ç”¨æ—¶ï¼Œé€šè¿‡å‘½ä»¤è¡Œå‚æ•°å¯¹Springåº”ç”¨åšä¸€äº›é…ç½®ã€‚</p><p>åœ¨SpringApplication.runæ–¹æ³•ä¸­ï¼Œåˆ†æåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯SpringApplicationçš„å®ä¾‹åŒ–ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯runæ–¹æ³•çš„æ‰§è¡Œã€‚</p><h3 id="ä¸€ã€æ„å»ºSpringApplicationå®ä¾‹"><a href="#ä¸€ã€æ„å»ºSpringApplicationå®ä¾‹" class="headerlink" title="ä¸€ã€æ„å»ºSpringApplicationå®ä¾‹"></a>ä¸€ã€æ„å»ºSpringApplicationå®ä¾‹</h3><p>ä¸‹é¢æ˜¯SpringApplicationç±»é™æ€runæ–¹æ³•çš„æºç ã€‚å¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬è°ƒç”¨è¿™ä¸ªé™æ€runæ–¹æ³•æ—¶ï¼Œå®é™…ä¸Šä¼š<strong>æ„é€ ä¸€ä¸ªSpringApplicationå®ä¾‹</strong>ï¼Œç„¶åå†è°ƒç”¨è¯¥å®ä¾‹çš„runæ–¹æ³•å®Œæˆé¡¹ç›®çš„å¯åŠ¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ConfigurableApplicationContext <span class="hljs-title">run</span><span class="hljs-params">(Class&lt;?&gt; primarySource, String... args)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> run(<span class="hljs-keyword">new</span> Class[]&#123;primarySource&#125;, args);<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯SpringApplicationçš„æ„é€ å‡½æ•°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">SpringApplication</span><span class="hljs-params">(ResourceLoader resourceLoader, Class&lt;?&gt;... primarySources)</span> </span>&#123;<br>    <span class="hljs-keyword">this</span>.sources = <span class="hljs-keyword">new</span> LinkedHashSet();<br>    <span class="hljs-keyword">this</span>.bannerMode = Mode.CONSOLE;<br>    <span class="hljs-keyword">this</span>.logStartupInfo = <span class="hljs-keyword">true</span>;<br>    <span class="hljs-keyword">this</span>.addCommandLineProperties = <span class="hljs-keyword">true</span>;<br>    <span class="hljs-keyword">this</span>.addConversionService = <span class="hljs-keyword">true</span>;<br>    <span class="hljs-keyword">this</span>.headless = <span class="hljs-keyword">true</span>;<br>    <span class="hljs-keyword">this</span>.registerShutdownHook = <span class="hljs-keyword">true</span>;<br>    <span class="hljs-keyword">this</span>.additionalProfiles = Collections.emptySet();<br>    <span class="hljs-keyword">this</span>.isCustomEnvironment = <span class="hljs-keyword">false</span>;<br>    <span class="hljs-keyword">this</span>.lazyInitialization = <span class="hljs-keyword">false</span>;<br>    <span class="hljs-keyword">this</span>.applicationContextFactory = ApplicationContextFactory.DEFAULT;<br>    <span class="hljs-keyword">this</span>.applicationStartup = ApplicationStartup.DEFAULT;<br>    <span class="hljs-keyword">this</span>.resourceLoader = resourceLoader;<br>    Assert.notNull(primarySources, <span class="hljs-string">&quot;PrimarySources must not be null&quot;</span>);<br>    <span class="hljs-keyword">this</span>.primarySources = <span class="hljs-keyword">new</span> LinkedHashSet(Arrays.asList(primarySources));<br>    <span class="hljs-keyword">this</span>.webApplicationType = WebApplicationType.deduceFromClasspath();<br>    <span class="hljs-keyword">this</span>.bootstrappers = <span class="hljs-keyword">new</span> ArrayList(<span class="hljs-keyword">this</span>.getSpringFactoriesInstances(Bootstrapper.class));<br>    <span class="hljs-keyword">this</span>.setInitializers(<span class="hljs-keyword">this</span>.getSpringFactoriesInstances(ApplicationContextInitializer.class));<br>    <span class="hljs-keyword">this</span>.setListeners(<span class="hljs-keyword">this</span>.getSpringFactoriesInstances(ApplicationListener.class));<br>    <span class="hljs-keyword">this</span>.mainApplicationClass = <span class="hljs-keyword">this</span>.deduceMainApplicationClass();<br>&#125;<br></code></pre></td></tr></table></figure><p>å®ƒä¸»è¦å®Œæˆä¸‹é¢çš„åˆå§‹åŒ–å·¥ä½œï¼š</p><ul><li><p>åˆå§‹åŒ–Springå®¹å™¨çš„é…ç½®ç±»<strong>primarySources</strong></p></li><li><p><strong>æ¨æ–­åº”ç”¨ç¨‹åºçš„ç±»å‹</strong>ï¼ˆwebApplicationTypeï¼‰ï¼Œè¿›è€Œæ ¹æ®åº”ç”¨ç¨‹åºçš„ç±»å‹åˆ›å»ºæ°å½“çš„ApplicationContext</p></li><li><p>åˆå§‹åŒ–æŒ‡å®šçš„<strong>ApplicaitonContextInitializer</strong>åˆ—è¡¨</p></li><li><p>åˆå§‹åŒ–æ‰€æœ‰<strong>å¯ç”¨ç¨‹åºçš„ç›‘å¬å™¨ï¼ˆApplicationListenerï¼‰</strong>åˆ—è¡¨</p></li><li><p>æ¨æ–­å¹¶è®¾ç½® main æ–¹æ³•çš„å®šä¹‰ç±»</p></li></ul><p>ä¸‹é¢ï¼Œæˆ‘ä»¬å¯¹è¿™äº›åˆå§‹åŒ–è¿‡ç¨‹è¿›è¡Œä¸€ä¸€è¯´æ˜ã€‚</p><ol><li><p><strong>springå®¹å™¨é…ç½®</strong></p><p>SpringApplicationèƒ½å¤Ÿä»å„ç§ä¸åŒçš„é…ç½®æºè¯»å– bean çš„å®šä¹‰ã€‚SpringBoot å»ºè®®é‡‡ç”¨ Java æ³¨è§£é…ç½®çš„æ–¹å¼<strong>æä¾›ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„é…ç½®ç±»</strong>ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åŒæ—¶ä½¿ç”¨å¤šç§ä¸åŒçš„é…ç½®æºã€‚å¦‚æœæ˜¯Javaæ³¨è§£çš„é…ç½®æ–¹å¼ï¼Œä¼šä½¿ç”¨<code>AnnotatedBeanDefinitionReader</code>åŠ è½½é…ç½®ï¼ˆé€šè¿‡å…¨ç±»åï¼‰ã€‚å¦‚æœæ˜¯ XML çš„é…ç½®æ–¹å¼ï¼Œåˆ™ä¼šä½¿ç”¨ <code>XmlBeanDefinitionReader</code>åŠ è½½é…ç½®ï¼ˆé€šè¿‡ XML æ–‡ä»¶åœ°å€ï¼‰ã€‚</p></li></ol><ol start="2"><li><p><strong>æ¨æ–­åº”ç”¨ç¨‹åºç±»å‹</strong></p><p>SpringApplicationé»˜è®¤çš„åº”ç”¨ç±»å‹æœ‰ä¸‰ç§ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">WebApplicationType</span> </span>&#123;<br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">    éwebç±»åº”ç”¨ï¼Œæ— éœ€å†…åµŒweb server</span><br><span class="hljs-comment">    */</span><br>    NONE,<br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">    servletç±»å‹çš„webåº”ç”¨ï¼Œéœ€è¦å¯åŠ¨å†…åµŒçš„web server</span><br><span class="hljs-comment">    */</span><br>    SERVLET,<br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">    reactiveç±»å‹çš„webåº”ç”¨ï¼Œéœ€è¦å¯åŠ¨å†…åµŒçš„reactive web server</span><br><span class="hljs-comment">    */</span><br>    REACTIVE;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ¤æ–­çš„é€»è¾‘ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯æ£€æŸ¥ classpath ä¸‹æ˜¯å¦å­˜åœ¨å¯¹åº”çš„ç±»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">static</span> WebApplicationType <span class="hljs-title">deduceFromClasspath</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (ClassUtils.isPresent(<span class="hljs-string">&quot;org.springframework.web.reactive.DispatcherHandler&quot;</span>, (ClassLoader)<span class="hljs-keyword">null</span>) &amp;&amp; !ClassUtils.isPresent(<span class="hljs-string">&quot;org.springframework.web.servlet.DispatcherServlet&quot;</span>, (ClassLoader)<span class="hljs-keyword">null</span>) &amp;&amp; !ClassUtils.isPresent(<span class="hljs-string">&quot;org.glassfish.jersey.servlet.ServletContainer&quot;</span>, (ClassLoader)<span class="hljs-keyword">null</span>)) &#123;<br>        <span class="hljs-keyword">return</span> REACTIVE;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        String[] var0 = SERVLET_INDICATOR_CLASSES;<br>        <span class="hljs-keyword">int</span> var1 = var0.length;<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> var2 = <span class="hljs-number">0</span>; var2 &lt; var1; ++var2) &#123;<br>            String className = var0[var2];<br>            <span class="hljs-keyword">if</span> (!ClassUtils.isPresent(className, (ClassLoader)<span class="hljs-keyword">null</span>)) &#123;<br>                <span class="hljs-keyword">return</span> NONE;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> SERVLET;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>å¦‚æœ classpath ä¸‹å­˜åœ¨<code>org.springframework.web.reactive.DispatcherHandler</code>ç±»ï¼Œåˆ™åº”ç”¨ç±»å‹æ˜¯REACTIVE</li><li>å¦‚æœ classpath ä¸‹å­˜åœ¨<code>org.springframework.web.servlet.DispatcherServlet</code>ç±»ï¼Œåˆ™åº”ç”¨ç±»å‹æ˜¯SERVLET</li><li>å¦‚æœä¸Šé¢ä¸¤ä¸ª DispatcherServlet ç±»éƒ½ä¸å­˜åœ¨ï¼Œåˆ™åº”ç”¨ç±»å‹æ˜¯NONE</li></ul></li></ol><p>   åº”ç”¨ç±»å‹ç›´æ¥å†³å®šäº†è¦åˆ›å»ºçš„ ApplicationContext ç±»å‹ï¼Œä¸‹è¡¨æ•´ç†äº†ä¸‰ç§åº”ç”¨ç±»å‹å’Œæ‰€åˆ›å»ºçš„ ApplicationContext ç±»å‹ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚</p><table><thead><tr><th>åº”ç”¨ç±»å‹</th><th>ApplicationContextç±»å‹</th></tr></thead><tbody><tr><td>NONE</td><td>AnnotationConfigApplicationContext</td></tr><tr><td>SERVLET</td><td>AnnotationConfigServletWebServerApplicationContext</td></tr><tr><td>REACTIVE</td><td>AnnotationConfigReactiveWebServerApplicationContext</td></tr></tbody></table><ol start="3"><li><p><strong>åˆå§‹åŒ– ApplicationContextInitializer &amp; ApplicationListener</strong></p><p>åˆå§‹åŒ– ApplicaitonContextInitializer å’Œ ApplicationListener çš„è¿‡ç¨‹æ¯”è¾ƒç›¸ä¼¼ï¼Œéƒ½æ˜¯å€ŸåŠ©äº SpringFactoriesLoader çš„æ–¹å¼å®Œæˆåˆå§‹åŒ–çš„ï¼Œæ‰€ä»¥æ”¾åˆ°ä¸€èµ·åˆ†æã€‚</p><p>SpringFactoriesLoader ä¼š è¯»å– META-INF/spring.factories æ–‡ä»¶ä¸­çš„é…ç½®ã€‚ä¸€ä¸ªå·¥ç¨‹é¡¹ç›®ä¸­å¯ä»¥åŒæ—¶æœ‰å¤šä¸ª META-INF/spring.factories æ–‡ä»¶ã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨ <code>spring-boot-autoconfigure</code>jar åŒ…çš„ META-INF/spring.factories æ–‡ä»¶ä¸­ï¼Œæœ‰é’ˆå¯¹ <code>ApplicationContextInitializer</code> å’Œ <code>ApplicationListeners</code>çš„é…ç½®ã€‚</p><ul><li><p><strong>é’ˆå¯¹ApplicationContextInitializer çš„é…ç½®</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"># Initializers<br>org.springframework.context.ApplicationContextInitializer=\<br>org.springframework.boot.autoconfigure.SharedMetadataReaderFactoryContextInitializer,\<br>org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLoggingListener<br></code></pre></td></tr></table></figure></li><li><p><strong>é’ˆå¯¹äºApplicationListenerçš„é…ç½®</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"># Application Listeners<br>org.springframework.context.ApplicationListener=\<br>org.springframework.boot.ClearCachesApplicationListener,\<br>org.springframework.boot.builder.ParentContextCloserApplicationListener,\<br>org.springframework.boot.context.FileEncodingApplicationListener,\<br>org.springframework.boot.context.config.AnsiOutputApplicationListener,\<br>org.springframework.boot.context.config.DelegatingApplicationListener,\<br>org.springframework.boot.context.logging.LoggingApplicationListener,\<br>org.springframework.boot.env.EnvironmentPostProcessorApplicationListener,\<br>org.springframework.boot.liquibase.LiquibaseServiceLocatorApplicationListener<br></code></pre></td></tr></table></figure></li></ul></li></ol><ol start="4"><li><p><strong>æ¨æ–­ä¸»ç±»</strong></p><p>æ¨æ–­ä¸»ç±»è¿‡ç¨‹çš„å®ç°æ–¹å¼å¾ˆå·§å¦™ï¼Œé€šè¿‡<strong>éå†å¼‚å¸¸å †æ ˆ</strong>æ‰¾åˆ°æ–¹æ³•åä¸ºmainçš„ç±»ï¼Œå°†å…¶ä½œä¸ºä¸»å¯åŠ¨ç±»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> Class&lt;?&gt; deduceMainApplicationClass() &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>        StackTraceElement[] stackTrace = (<span class="hljs-keyword">new</span> RuntimeException()).getStackTrace();<br>        StackTraceElement[] var2 = stackTrace;<br>        <span class="hljs-keyword">int</span> var3 = stackTrace.length;<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> var4 = <span class="hljs-number">0</span>; var4 &lt; var3; ++var4) &#123;<br>            StackTraceElement stackTraceElement = var2[var4];<br>            <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;main&quot;</span>.equals(stackTraceElement.getMethodName())) &#123;<br>                <span class="hljs-keyword">return</span> Class.forName(stackTraceElement.getClassName());<br>            &#125;<br>        &#125;<br>    &#125; <span class="hljs-keyword">catch</span> (ClassNotFoundException var6) &#123;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><h3 id="äºŒã€runæ–¹æ³•è¿è¡Œé˜¶æ®µ"><a href="#äºŒã€runæ–¹æ³•è¿è¡Œé˜¶æ®µ" class="headerlink" title="äºŒã€runæ–¹æ³•è¿è¡Œé˜¶æ®µ"></a>äºŒã€runæ–¹æ³•è¿è¡Œé˜¶æ®µ</h3><p>åœ¨å®Œæˆå¯¹<code>SpringApplication</code>å¯¹è±¡çš„æ„å»ºå’Œå®ä¾‹åŒ–åï¼Œå°±å¼€å§‹æ‰§è¡Œ run æ–¹æ³•äº†ã€‚å…·ä½“ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼Œä¸‹é¢å°†æ¢ç©¶å…¶æ‰§è¡Œè¿‡ç¨‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> ConfigurableApplicationContext <span class="hljs-title">run</span><span class="hljs-params">(String... args)</span> </span>&#123;<br>    StopWatch stopWatch = <span class="hljs-keyword">new</span> StopWatch();<br>    stopWatch.start();<br>    DefaultBootstrapContext bootstrapContext = createBootstrapContext();<br>    ConfigurableApplicationContext context = <span class="hljs-keyword">null</span>;<br>    configureHeadlessProperty();<br>    SpringApplicationRunListeners listeners = getRunListeners(args);<br>    listeners.starting(bootstrapContext, <span class="hljs-keyword">this</span>.mainApplicationClass);<br>    <span class="hljs-keyword">try</span> &#123;<br>        ApplicationArguments applicationArguments = <span class="hljs-keyword">new</span> DefaultApplicationArguments(args);<br>        ConfigurableEnvironment environment = prepareEnvironment(listeners, bootstrapContext, applicationArguments);<br>        configureIgnoreBeanInfo(environment);<br>        Banner printedBanner = printBanner(environment);<br>        context = createApplicationContext();<br>        context.setApplicationStartup(<span class="hljs-keyword">this</span>.applicationStartup);<br>        prepareContext(bootstrapContext, context, environment, listeners, applicationArguments, printedBanner);<br>        refreshContext(context);<br>        afterRefresh(context, applicationArguments);<br>        stopWatch.stop();<br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.logStartupInfo) &#123;<br>            <span class="hljs-keyword">new</span> StartupInfoLogger(<span class="hljs-keyword">this</span>.mainApplicationClass).logStarted(getApplicationLog(), stopWatch);<br>        &#125;<br>        listeners.started(context);<br>        callRunners(context, applicationArguments);<br>    &#125;<br>    <span class="hljs-keyword">catch</span> (Throwable ex) &#123;<br>        handleRunFailure(context, ex, listeners);<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalStateException(ex);<br>    &#125;<br><br>    <span class="hljs-keyword">try</span> &#123;<br>        listeners.running(context);<br>    &#125;<br>    <span class="hljs-keyword">catch</span> (Throwable ex) &#123;<br>        handleRunFailure(context, ex, <span class="hljs-keyword">null</span>);<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalStateException(ex);<br>    &#125;<br>    <span class="hljs-keyword">return</span> context;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>ç¬¬ä¸€å‡†å¤‡é˜¶æ®µ</p></blockquote><ul><li><p>æ–¹æ³•æ‰§è¡Œä¼Šå§‹ï¼Œä¼š<strong>å…ˆåˆ›å»ºå’Œå¯åŠ¨ä¸€ä¸ª <code>StopWatch</code> å¯¹è±¡</strong>ï¼Œä½œä¸ºè®¡æ—¶å™¨ã€‚è¯¥å¯¹è±¡ç”¨äºç»Ÿè®¡åº”ç”¨çš„å¯åŠ¨æ—¶é—´ã€‚ä¸‹å›¾ä¸­çš„å¯åŠ¨äº‹ä»¶æ—¥å¿—å°±æ˜¯æ ¹æ® <code>StopWatch</code>å¯¹è±¡ç»Ÿè®¡çš„æ•°æ®æ‰“å°çš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">StopWatch stopWatch = <span class="hljs-keyword">new</span> StopWatch();<br>stopWatch.start();<br></code></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBootç¬”è®°02-è¿è¡ŒåŸç†æ·±å…¥æµ…å‡º/stop_watch.png" alt="åº”ç”¨å¯åŠ¨æ—¶é—´" style="zoom:50%;"></li><li><p>æ¥ç€ï¼Œä»ç„¶æ˜¯é€šè¿‡<code>SpringFactoriesLoader</code>çš„æœºåˆ¶<strong>åŠ è½½æ‰€æœ‰çš„<code>SpringApplicationRunListener</code>ç›‘å¬å™¨</strong>ã€‚ä»åå­—å°±å¯ä»¥çœ‹å‡ºï¼Œ<code>SpringApplicationRunListener</code> çš„ä½œç”¨å°±æ˜¯ç›‘å¬ SpringApplication.run æ–¹æ³•çš„å„ä¸ªæ‰§è¡Œé˜¶æ®µï¼Œä¹Ÿå¯ä»¥ç†è§£æˆ <code>SpringApplication</code> è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">SpringApplicationRunListeners listeners = getRunListeners(args);<br></code></pre></td></tr></table></figure></li><li><p>ç´§æ¥ç€ï¼Œ<strong>å¯åŠ¨å·²ç»å‡†å¤‡å¥½çš„ç›‘å¬å™¨</strong>ï¼Œå‡†å¤‡å¯åŠ¨åº”ç”¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">listeners.starting(bootstrapContext, <span class="hljs-keyword">this</span>.mainApplicationClass);<br></code></pre></td></tr></table></figure></li></ul><blockquote><p>ç¬¬äºŒè¿è¡Œé˜¶æ®µ</p></blockquote><ul><li><p>å¯åŠ¨åº”ç”¨åï¼Œæ ¹æ®<code>ApplicationTypeç±»å‹</code>ï¼Œ<strong>åˆ›å»ºå¹¶é…ç½®<code>SpringApplication</code>éœ€è¦çš„ç¯å¢ƒå‚æ•°</strong><code>Environment</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">ApplicationArguments applicationArguments = <span class="hljs-keyword">new</span> DefaultApplicationArguments(args);<br>ConfigurableEnvironment environment = prepareEnvironment(listeners, bootstrapContext, applicationArguments);<br>configureIgnoreBeanInfo(environment);<br></code></pre></td></tr></table></figure></li><li><p>æ¥ä¸‹æ¥ï¼Œ<strong>æ‰“å°bannerå›¾æ¡ˆ</strong>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">Banner printedBanner = printBanner(environment);<br></code></pre></td></tr></table></figure></li><li><p>ä¸‹é¢ï¼Œæ ¹æ®åˆå§‹åŒ–æ—¶æ¨æ–­çš„<code>ApplicationType</code>ç»“æœï¼Œ<strong>åˆ›å»ºå¯¹åº”ç±»å‹çš„<code>AoolicationContext</code>ä¸Šä¸‹æ–‡</strong>.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">context = createApplicationContext();<br>context.setApplicationStartup(<span class="hljs-keyword">this</span>.applicationStartup);<br></code></pre></td></tr></table></figure></li><li><p>åˆ›å»ºå¥½Springåº”ç”¨ä¸Šä¸‹æ–‡åï¼Œå°±è¿›å…¥<strong>å‡†å¤‡Springåº”ç”¨ä¸Šä¸‹æ–‡é˜¶æ®µ</strong>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">prepareContext(bootstrapContext, context, environment, listeners, applicationArguments, printedBanner);<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">prepareContext</span><span class="hljs-params">(DefaultBootstrapContext bootstrapContext, ConfigurableApplicationContext context,</span></span><br><span class="hljs-function"><span class="hljs-params">                            ConfigurableEnvironment environment, SpringApplicationRunListeners listeners,</span></span><br><span class="hljs-function"><span class="hljs-params">                            ApplicationArguments applicationArguments, Banner printedBanner)</span> </span>&#123;<br>    context.setEnvironment(environment);<br>    postProcessApplicationContext(context);<br>    applyInitializers(context);<br>    listeners.contextPrepared(context);<br>    bootstrapContext.close(context);<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.logStartupInfo) &#123;<br>        logStartupInfo(context.getParent() == <span class="hljs-keyword">null</span>);<br>        logStartupProfileInfo(context);<br>    &#125;<br>    <span class="hljs-comment">// Add boot specific singleton beans</span><br>    ConfigurableListableBeanFactory beanFactory = context.getBeanFactory();<br>    beanFactory.registerSingleton(<span class="hljs-string">&quot;springApplicationArguments&quot;</span>, applicationArguments);<br>    <span class="hljs-keyword">if</span> (printedBanner != <span class="hljs-keyword">null</span>) &#123;<br>        beanFactory.registerSingleton(<span class="hljs-string">&quot;springBootBanner&quot;</span>, printedBanner);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (beanFactory <span class="hljs-keyword">instanceof</span> DefaultListableBeanFactory) &#123;<br>        ((DefaultListableBeanFactory) beanFactory)<br>        .setAllowBeanDefinitionOverriding(<span class="hljs-keyword">this</span>.allowBeanDefinitionOverriding);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.lazyInitialization) &#123;<br>        context.addBeanFactoryPostProcessor(<span class="hljs-keyword">new</span> LazyInitializationBeanFactoryPostProcessor());<br>    &#125;<br>    <span class="hljs-comment">// Load the sources</span><br>    Set&lt;Object&gt; sources = getAllSources();<br>    Assert.notEmpty(sources, <span class="hljs-string">&quot;Sources must not be empty&quot;</span>);<br>    load(context, sources.toArray(<span class="hljs-keyword">new</span> Object[<span class="hljs-number">0</span>]));<br>    listeners.contextLoaded(context);<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><p>  åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬çœ‹çœ‹åšäº†å“ªäº›æ“ä½œï¼š</p><ul><li><p>è®¾ç½®springåº”ç”¨ä¸Šä¸‹æ–‡çš„environment</p></li><li><p>Springåº”ç”¨ä¸Šä¸‹æ–‡åç½®å¤„ç†</p></li><li><p>æä¾›ç±»å‹è½¬æ¢å™¨</p></li><li><p>æ‰§è¡ŒSpringçš„åˆå§‹åŒ–å™¨ ApplicationContextInitializer </p></li><li><p>è§¦å‘ApplicationContextInitializedEventäº‹ä»¶</p></li><li><p>æ³¨å†Œå•ä¾‹Beanå®ä¾‹</p></li><li><p>åŠ è½½Springåº”ç”¨ä¸Šä¸‹æ–‡çš„é…ç½®æºåˆ°BeanDefinitionMap</p></li><li><p>è§¦å‘ApplicationEventäº‹ä»¶ï¼Œæœ€åæ‰§è¡Œ SpringApplicationRunListeners çš„ contextLoaded é˜¶æ®µæ–¹æ³•ï¼Œè¡¨ç¤º ApplicationContext å®ŒæˆåŠ è½½ä½†è¿˜æœªå¯åŠ¨ï¼ŒåŒæ—¶å‘ Spring Boot ç›‘å¬å™¨å‘å¸ƒ ApplicationPreparedEvent äº‹ä»¶ </p></li></ul><ul><li><p><strong>åˆ·æ–°Springåº”ç”¨ä¸Šä¸‹æ–‡</strong>ï¼Œè¿™ä¸€é˜¶æ®µï¼Œåšäº†è¿™ä¸‰ä»¶äº‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">refreshContext(context);<br></code></pre></td></tr></table></figure><ul><li>beanå·¥å‚åŠ è½½</li><li>é€šè¿‡å·¥å‚shengcahnbean</li><li>åˆ·æ–°ç”Ÿå‘½å‘¨æœŸ</li></ul></li><li><p>ç„¶åï¼Œ<strong>è¿›è¡Œä¸Šä¸‹æ–‡åç½®ç»“æŸå¤„ç†<code>afterRefresh</code></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">afterRefresh(context, applicationArguments);<br></code></pre></td></tr></table></figure></li><li><p>ç„¶å<strong>å‘å¸ƒåº”ç”¨ï¼Œé€šçŸ¥æ‰€æœ‰ç›‘å¬å™¨è¿›è¡Œå·¥ä½œã€‚</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.logStartupInfo) &#123;<br>    <span class="hljs-keyword">new</span> StartupInfoLogger(<span class="hljs-keyword">this</span>.mainApplicationClass).logStarted(getApplicationLog(), stopWatch);<br>&#125;<br>listeners.started(context);<br></code></pre></td></tr></table></figure></li><li><p>æ£€æŸ¥å½“å‰çš„Springå®¹å™¨ä¸­æ˜¯å¦æœ‰<code>ApplicationRunner</code> å’Œ <code>CommandLineRunner</code>ç±»å‹çš„beanï¼Œå¦‚æœæœ‰çš„è¯å°±éå†æ‰§è¡Œå®ƒä»¬ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">callRunners(context, applicationArguments);<br></code></pre></td></tr></table></figure></li><li><p>æœ€åï¼Œ<strong>å¯åŠ¨ç›‘å¬</strong>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">listeners.running(context);<br></code></pre></td></tr></table></figure></li></ul><p>è‡³æ­¤ï¼Œæ•´ä¸ªrunæ–¹æ³•æ‰§è¡Œç»“æŸï¼ŒSpringåº”ç”¨ä¹Ÿå®Œæˆäº†æ•´ä¸ªå¯åŠ¨æµç¨‹ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€å¼ æµç¨‹å›¾ï¼Œä»…ä¾›å‚è€ƒï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B002-%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA/run.png" alt="runæ–¹æ³•æµç¨‹å›¾"></p>]]></content>
    
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBootç¬”è®°01-é‡è§SpringBoot</title>
    <link href="/posts/2021/01/06/SpringBoot%E7%AC%94%E8%AE%B001-%E9%81%87%E8%A7%81SpringBoot/"/>
    <url>/posts/2021/01/06/SpringBoot%E7%AC%94%E8%AE%B001-%E9%81%87%E8%A7%81SpringBoot/</url>
    
    <content type="html"><![CDATA[<h2 id="SpringBootç®€ä»‹"><a href="#SpringBootç®€ä»‹" class="headerlink" title="SpringBootç®€ä»‹"></a>SpringBootç®€ä»‹</h2><h3 id="ä¸€ã€å›é¡¾ä»€ä¹ˆæ˜¯Spring"><a href="#ä¸€ã€å›é¡¾ä»€ä¹ˆæ˜¯Spring" class="headerlink" title="ä¸€ã€å›é¡¾ä»€ä¹ˆæ˜¯Spring"></a>ä¸€ã€å›é¡¾ä»€ä¹ˆæ˜¯Spring</h3><p>Springæ˜¯ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œ2003å¹´å…´èµ·çš„ä¸€ä¸ª<mark>è½»é‡çº§</mark>çš„Javaå¼€å‘æ¡†æ¶ï¼Œä½œè€…æ˜¯ <strong>Rod Johnson</strong>ã€‚</p><p><strong>Springæ˜¯ä¸ºäº†è§£å†³ä¼ä¸šçº§åº”ç”¨å¼€å‘çš„å¤æ‚æ€§è€Œåˆ›å»ºçš„ï¼Œç›®çš„æ˜¯ç®€åŒ–å¼€å‘</strong>ã€‚</p><h3 id="äºŒã€Springæ˜¯å¦‚ä½•ç®€åŒ–Javaå¼€å‘çš„"><a href="#äºŒã€Springæ˜¯å¦‚ä½•ç®€åŒ–Javaå¼€å‘çš„" class="headerlink" title="äºŒã€Springæ˜¯å¦‚ä½•ç®€åŒ–Javaå¼€å‘çš„"></a>äºŒã€Springæ˜¯å¦‚ä½•ç®€åŒ–Javaå¼€å‘çš„</h3><p>ä¸ºäº†é™ä½ Javaå¼€å‘çš„å¤æ‚æ€§ï¼ŒSpringé‡‡ç”¨äº†ä»¥ä¸‹4ç§å…³é”®ç­–ç•¥ï¼š</p><ul><li>åŸºäºPOJOï¼ˆPlain Ordinary Java Objectï¼‰çš„<strong>è½»é‡çº§</strong>å’Œ<strong>æœ€å°ä¾µå…¥å¼</strong>ç¼–ç¨‹ï¼Œæ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯Bean</li><li>é€šè¿‡<strong>IOC</strong>ï¼ˆInversion Of Controlâ€”æ§åˆ¶åè½¬ï¼‰ï¼Œ<strong>ä¾èµ–æ³¨å…¥</strong>ï¼ˆDIï¼‰å’Œ<strong>é¢å‘æ¥å£</strong>å®ç°ä½è€¦åˆ</li><li>åŸºäº<strong>åˆ‡é¢</strong>ï¼ˆAOPâ€”â€”Aspect Oriented Programmingï¼‰å’Œ<strong>æƒ¯ä¾‹</strong>è¿›è¡Œ<strong>å£°æ˜å¼ç¼–ç¨‹</strong></li><li>é€šè¿‡åˆ‡é¢å’Œæ¨¡æ¿å‡å°‘æ ·å¼ä»£ç ï¼Œå¦‚RedisTemplateï¼ŒxxxTemplate</li></ul><h3 id="ä¸‰ã€ä»€ä¹ˆæ˜¯SpringBoot"><a href="#ä¸‰ã€ä»€ä¹ˆæ˜¯SpringBoot" class="headerlink" title="ä¸‰ã€ä»€ä¹ˆæ˜¯SpringBoot"></a>ä¸‰ã€ä»€ä¹ˆæ˜¯SpringBoot</h3><p>SpringBootï¼Œå°±æ˜¯ä¸€ä¸ªjavawebçš„å¼€å‘æ¡†æ¶ï¼Œå’ŒSpringMVCç±»ä¼¼ï¼Œå¯¹æ¯”å…¶ä»–javawebæ¡†æ¶çš„å¥½å¤„ï¼Œå®˜æ–¹è¯´æ˜¯ç®€åŒ–å¼€å‘ï¼Œçº¦å®šå¤§äºé…ç½®ï¼Œ  you can â€œjust runâ€ï¼Œèƒ½<strong>è¿…é€Ÿçš„å¼€å‘webåº”ç”¨</strong>ï¼Œå‡ è¡Œä»£ç å¼€å‘ä¸€ä¸ªhttp<strong>æ¥å£</strong>ã€‚</p><p>æ‰€æœ‰çš„æŠ€æœ¯æ¡†æ¶çš„å‘å±•ä¼¼ä¹éƒ½éµå¾ªäº†ä¸€æ¡ä¸»çº¿è§„å¾‹ï¼šä»ä¸€ä¸ª<strong>å¤æ‚åº”ç”¨åœºæ™¯</strong> è¡ç”Ÿ ä¸€ç§<strong>è§„èŒƒæ¡†æ¶</strong>ï¼Œäººä»¬åªéœ€è¦è¿›è¡Œå„ç§é…ç½®è€Œä¸éœ€è¦è‡ªå·±å»å®ç°å®ƒï¼Œè¿™æ—¶å€™å¼ºå¤§çš„é…ç½®åŠŸèƒ½æˆäº†ä¼˜ç‚¹ï¼›å‘å±•åˆ°ä¸€å®šç¨‹åº¦ä¹‹åï¼Œäººä»¬æ ¹æ®å®é™…ç”Ÿäº§åº”ç”¨æƒ…å†µï¼Œé€‰å–å…¶ä¸­å®ç”¨åŠŸèƒ½å’Œè®¾è®¡ç²¾åï¼Œé‡æ„å‡ºä¸€äº›<strong>è½»é‡çº§çš„æ¡†æ¶</strong>ï¼›ä¹‹åä¸ºäº†æé«˜å¼€å‘æ•ˆç‡ï¼Œå«Œå¼ƒåŸå…ˆçš„å„ç±»é…ç½®è¿‡äºéº»çƒ¦ï¼Œäºæ˜¯å¼€å§‹æå€¡â€œ<strong>çº¦å®šå¤§äºé…ç½®</strong>â€ï¼Œè¿›è€Œè¡ç”Ÿå‡ºä¸€äº›ä¸€ç«™å¼çš„è§£å†³æ–¹æ¡ˆã€‚</p><p>è¿™å°±æ˜¯Javaä¼ä¸šçº§åº”ç”¨-&gt;J2EE-&gt;spring-&gt;springbootçš„è¿‡ç¨‹ã€‚</p><p>Spring Boot åŸºäº Spring å¼€å‘ï¼ŒSpirng Boot æœ¬èº«å¹¶ä¸æä¾› Spring æ¡†æ¶çš„æ ¸å¿ƒç‰¹æ€§ä»¥åŠæ‰©å±•åŠŸèƒ½ï¼Œåªæ˜¯ç”¨äºå¿«é€Ÿã€æ•æ·åœ°å¼€å‘æ–°ä¸€ä»£åŸºäº Spring æ¡†æ¶çš„åº”ç”¨ç¨‹åºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¹¶ä¸æ˜¯ç”¨æ¥æ›¿ä»£ Spring çš„è§£å†³æ–¹æ¡ˆï¼Œè€Œæ˜¯å’Œ Spring æ¡†æ¶ç´§å¯†ç»“åˆç”¨äºæå‡ Spring å¼€å‘è€…ä½“éªŒçš„å·¥å…·ã€‚Spring Boot ä»¥<strong>çº¦å®šå¤§äºé…ç½®çš„æ ¸å¿ƒæ€æƒ³</strong>ï¼Œé»˜è®¤å¸®æˆ‘ä»¬è¿›è¡Œäº†å¾ˆå¤šè®¾ç½®ï¼Œå¤šæ•° Spring Boot åº”ç”¨åªéœ€è¦å¾ˆå°‘çš„ Spring é…ç½®ã€‚åŒæ—¶å®ƒé›†æˆäº†å¤§é‡å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹åº“é…ç½®ï¼ˆä¾‹å¦‚ Redisã€MongoDBã€Jpaã€RabbitMQã€Quartz ç­‰ç­‰ï¼‰ï¼ŒSpring Boot åº”ç”¨ä¸­è¿™äº›ç¬¬ä¸‰æ–¹åº“å‡ ä¹å¯ä»¥é›¶é…ç½®çš„<strong>å¼€ç®±å³ç”¨</strong>ã€‚</p><p>ç®€å•æ¥è¯´å°±æ˜¯SpringBootå…¶å®ä¸æ˜¯ä»€ä¹ˆæ–°çš„æ¡†æ¶ï¼Œå®ƒé»˜è®¤é…ç½®äº†å¾ˆå¤šæ¡†æ¶çš„ä½¿ç”¨æ–¹å¼ï¼Œå°±åƒmavenæ•´åˆäº†æ‰€æœ‰çš„jaråŒ…ï¼Œspring bootæ•´åˆäº†æ‰€æœ‰çš„æ¡†æ¶ ã€‚Spring Boot å‡ºç”Ÿåé—¨ï¼Œä»ä¸€å¼€å§‹å°±ç«™åœ¨ä¸€ä¸ªæ¯”è¾ƒé«˜çš„èµ·ç‚¹ï¼Œåˆç»è¿‡è¿™å‡ å¹´çš„å‘å±•ï¼Œç”Ÿæ€è¶³å¤Ÿå®Œå–„ï¼ŒSpring Boot å·²ç»å½“ä¹‹æ— æ„§æˆä¸º Java é¢†åŸŸæœ€çƒ­é—¨çš„æŠ€æœ¯ã€‚</p><p><strong>SpringBootçš„ä¸»è¦ä¼˜ç‚¹</strong>ï¼š</p><ul><li>ä¸ºæ‰€æœ‰Springå¼€å‘è€…æ›´å¿«çš„å…¥é—¨</li><li><strong>å¼€ç®±å³ç”¨</strong>ï¼Œæä¾›å„ç§é»˜è®¤é…ç½®æ¥ç®€åŒ–é¡¹ç›®é…ç½®</li><li><strong>å†…åµŒå¼å®¹å™¨</strong>ç®€åŒ–Webé¡¹ç›®</li><li>æ²¡æœ‰å†—ä½™ä»£ç ç”Ÿæˆå’ŒXMLé…ç½®çš„è¦æ±‚</li></ul><h2 id="å¾®æœåŠ¡ç®€ä»‹"><a href="#å¾®æœåŠ¡ç®€ä»‹" class="headerlink" title="å¾®æœåŠ¡ç®€ä»‹"></a>å¾®æœåŠ¡ç®€ä»‹</h2><h3 id="ä¸€ã€ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ"></a>ä¸€ã€ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ</h3><p>å¾®æœåŠ¡æ˜¯ä¸€ç§<strong>æ¶æ„é£æ ¼</strong>ï¼Œå®ƒè¦æ±‚æˆ‘ä»¬åœ¨å¼€å‘ä¸€ä¸ªåº”ç”¨çš„æ—¶å€™ï¼Œè¿™ä¸ªåº”ç”¨å¿…é¡»æ„å»ºæˆ<strong>ä¸€ç³»åˆ—å°æœåŠ¡çš„ç»„åˆ</strong>ï¼›å¯ä»¥é€šè¿‡httpçš„æ–¹å¼è¿›è¡Œäº’é€šã€‚è¦è¯´<strong>å¾®æœåŠ¡æ¶æ„</strong>ï¼Œå…ˆå¾—èŠèŠè¿‡å»å¼€å‘ä½¿ç”¨çš„<strong>å•ä½“åº”ç”¨æ¶æ„</strong>ã€‚</p><h3 id="äºŒã€å•ä½“åº”ç”¨æ¶æ„"><a href="#äºŒã€å•ä½“åº”ç”¨æ¶æ„" class="headerlink" title="äºŒã€å•ä½“åº”ç”¨æ¶æ„"></a>äºŒã€å•ä½“åº”ç”¨æ¶æ„</h3><p>æ‰€è°“å•ä½“åº”ç”¨æ¶æ„ï¼ˆAll In Oneï¼‰æ˜¯æŒ‡ï¼Œæˆ‘ä»¬å°†<strong>æ‰€æœ‰åº”ç”¨æœåŠ¡éƒ½å°è£…åœ¨ä¸€ä¸ªåº”ç”¨ä¸­</strong>ã€‚</p><p>æ— è®ºæ˜¯ERPï¼ˆEnterprise Resource Planningâ€”â€”ä¼ä¸šèµ„æºç®¡ç†ï¼‰ã€CRMï¼ˆCustomer Relationship Managementâ€”â€”å®¢æˆ·å…³ç³»ç®¡ç†ï¼‰æˆ–è€…å…¶ä»–çš„ç³»ç»Ÿï¼Œæˆ‘ä»¬æŠŠæ•°æ®åº“è®¿é—®ã€webè®¿é—®ç­‰å„ä¸ªåŠŸèƒ½æ”¾åˆ°ä¸€ä¸ªwaråŒ…å†…ã€‚</p><p><strong>å•ä½“åº”ç”¨æ¶æ„çš„å¥½å¤„</strong>ï¼š</p><ul><li>æ˜“äºå¼€å‘å’Œæµ‹è¯•ï¼Œéƒ¨ç½²ç®€å•æ–¹ä¾¿</li><li>å½“éœ€è¦æ‰©å±•æ—¶ï¼Œåªéœ€å°†waråŒ…å¤åˆ¶å¤šä»½ï¼Œç„¶åæ”¾åœ¨å¤šä¸ªæœåŠ¡å™¨ä¸Šï¼Œå†åšè´Ÿè½½å‡è¡¡å³å¯ã€‚</li></ul><p><strong>å•ä½“åº”ç”¨æ¶æ„çš„ç¼ºç‚¹</strong>ï¼š</p><ul><li><p>å“ªæ€•éœ€è¦ä¿®æ”¹å¾ˆå°çš„åœ°æ–¹ï¼Œéƒ½éœ€è¦å…³åœæœåŠ¡ï¼Œé‡æ–°æ‰“åŒ…å¹¶éƒ¨ç½²ã€‚</p></li><li><p>å¯¹äºå¤§å‹åº”ç”¨ï¼Œä¸å¯èƒ½æŠŠæ‰€æœ‰å†…å®¹éƒ½æ”¾åœ¨ä¸€ä¸ªåº”ç”¨é‡Œï¼Œè¿™æ ·ç»´æŠ¤ã€åˆ†å·¥ä¸åˆä½œéƒ½æ˜¯é—®é¢˜</p></li></ul><h3 id="ä¸‰ã€å¾®æœåŠ¡æ¶æ„"><a href="#ä¸‰ã€å¾®æœåŠ¡æ¶æ„" class="headerlink" title="ä¸‰ã€å¾®æœåŠ¡æ¶æ„"></a>ä¸‰ã€å¾®æœåŠ¡æ¶æ„</h3><p>åœ¨å•ä½“åº”ç”¨æ¶æ„çš„æ–¹å¼ï¼Œæˆ‘ä»¬æŠŠæ‰€æœ‰çš„åŠŸèƒ½å•å…ƒæ”¾åœ¨ä¸€ä¸ªåº”ç”¨é‡Œé¢ï¼Œç„¶åæˆ‘ä»¬æŠŠæ•´ä¸ªåº”ç”¨éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šã€‚å¦‚æœè´Ÿè½½èƒ½åŠ›ä¸è¡Œï¼Œæˆ‘ä»¬å°†æ•´ä¸ªåº”ç”¨è¿›è¡Œ<strong>æ°´å¹³å¤åˆ¶</strong>ï¼Œè¿›è¡Œæ‰©å±•ï¼Œç„¶åå†è´Ÿè½½å‡è¡¡ã€‚</p><p>æ‰€è°“å¾®æœåŠ¡æ¶æ„ï¼Œå°±æ˜¯æ‰“ç ´å•ä½“åº”ç”¨æ¶æ„æ–¹å¼ï¼Œ<strong>æŠŠæ¯ä¸ªåŠŸèƒ½å…ƒç´ ç‹¬ç«‹å‡ºæ¥</strong>ã€‚å†æŠŠç‹¬ç«‹å‡ºæ¥çš„åŠŸèƒ½å…ƒç´ è¿›è¡Œ<strong>åŠ¨æ€ç»„åˆ</strong>ï¼Œéœ€è¦çš„åŠŸèƒ½å…ƒç´ æ‰æ‹¿æ¥ç»„åˆï¼Œéœ€è¦å¤šä¸€äº›æ—¶é—´å¯ä»¥æ•´åˆå¤šä¸ªåŠŸèƒ½å…ƒç´ ã€‚æ‰€ä»¥å¾®æœåŠ¡æ¶æ„æ˜¯å¯¹åŠŸèƒ½å…ƒç´ è¿›è¡Œå¤åˆ¶ï¼Œè€Œä¸æ˜¯å¯¹æ•´ä¸ªåº”ç”¨è¿›è¡Œå¤åˆ¶ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBootç¬”è®°01-é‡è§SpringBoot/micro_service.png" alt="å¾®æœåŠ¡æ¶æ„å›¾è§£" style="zoom:100%;"><p><strong>å¾®æœåŠ¡æ¶æ„çš„ä¼˜ç‚¹</strong>ï¼š</p><ul><li>èŠ‚çœäº†è°ƒç”¨èµ„æº</li><li>æ¯ä¸ªåŠŸèƒ½å…ƒç´ çš„æœåŠ¡éƒ½æ˜¯ä¸€ä¸ªå¯æ›¿æ¢çš„ã€å¯ç‹¬ç«‹å‡çº§çš„è½¯ä»¶ä»£ç </li></ul><ul><li>åŸæ–‡åœ°å€ï¼š<a href="http://martinfowler.com/articles/microservices.html">http://martinfowler.com/articles/microservices.html</a></li><li>ç¿»è¯‘ï¼š<a href="https://www.cnblogs.com/liuning8023/p/4493156.html">https://www.cnblogs.com/liuning8023/p/4493156.html</a></li></ul><h3 id="å››ã€å¦‚ä½•æ„å»ºå¾®æœåŠ¡"><a href="#å››ã€å¦‚ä½•æ„å»ºå¾®æœåŠ¡" class="headerlink" title="å››ã€å¦‚ä½•æ„å»ºå¾®æœåŠ¡"></a>å››ã€å¦‚ä½•æ„å»ºå¾®æœåŠ¡</h3><p>ä¸€ä¸ªå¤§å‹ç³»ç»Ÿçš„å¾®æœåŠ¡æ¶æ„ï¼Œå°±åƒä¸€ä¸ªå¤æ‚äº¤ç»‡çš„ç¥ç»ç½‘ç»œï¼Œæ¯ä¸€ä¸ªç¥ç»å…ƒå°±æ˜¯ä¸€ä¸ªåŠŸèƒ½å…ƒç´ ï¼Œå®ƒä»¬å„è‡ªå®Œæˆè‡ªå·±çš„åŠŸèƒ½ï¼Œç„¶åé€šè¿‡ http ç›¸äº’è¯·æ±‚è°ƒç”¨ã€‚æ¯”å¦‚ä¸€ä¸ªç”µå•†ç³»ç»Ÿï¼ŒæŸ¥ç¼“å­˜ã€è¿æ•°æ®åº“ã€‚æµè§ˆé¡µé¢ã€ç»“è´¦ã€æ”¯ä»˜ç­‰æœåŠ¡éƒ½æ˜¯ä¸€ä¸ªä¸ªç‹¬ç«‹çš„åŠŸèƒ½æœåŠ¡ï¼Œéƒ½è¢«å¾®åŒ–äº†ï¼Œå®ƒä»¬ä½œä¸ºä¸€ä¸ªä¸ªå¾®æœåŠ¡å…±åŒæ„å»ºäº†ä¸€ä¸ªåºå¤§çš„ç³»ç»Ÿã€‚å¦‚æœä¿®æ”¹å…¶ä¸­çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œåªéœ€è¦æ›´æ–°å‡çº§å…¶ä¸­ä¸€ä¸ªåŠŸèƒ½æœåŠ¡å•å…ƒå³å¯ã€‚</p><p>ä½†æ˜¯ï¼Œè¿™ç§åºå¤§çš„ç³»ç»Ÿæ¶æ„ç»™éƒ¨ç½²å’Œè¿ç»´å¸¦æ¥å¾ˆå¤§çš„éš¾åº¦ã€‚äºæ˜¯ï¼ŒSpringä¸ºæˆ‘ä»¬å¸¦æ¥äº†æ„å»ºå¤§å‹åˆ†å¸ƒå¼å¾®æœåŠ¡çš„å…¨å¥—ã€å…¨ç§°äº§å“ï¼š</p><ul><li><span style="color:darkblue">æ„å»ºä¸€ä¸ªä¸ªåŠŸèƒ½ç‹¬ç«‹çš„å¾®æœåŠ¡åº”ç”¨å•å…ƒï¼Œå¯ä»¥ä½¿ç”¨SpringBootï¼Œå¿«é€Ÿæ„å»ºåº”ç”¨</span></li><li><span style="color:darkblue">å¤§å‹åˆ†å¸ƒå¼ç½‘ç»œæœåŠ¡çš„è°ƒç”¨ï¼Œç”±SpringCloudæ¥å®Œæˆï¼Œå®ç°åˆ†å¸ƒå¼</span></li><li><span style="color:darkblue">åœ¨åˆ†å¸ƒå¼ä¸­é—´ï¼Œè¿›è¡Œæµå¼æ•°æ®è®¡ç®—ã€æ‰¹å¤„ç†ï¼Œæˆ‘ä»¬ç”¨åˆ°Spring Cloud Data Flow</span></li></ul><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBoot%E7%AC%94%E8%AE%B001-%E9%81%87%E8%A7%81SpringBoot/spring_product.jpg" alt="å¾®æœåŠ¡å…¨å¥—äº§å“"></p><h2 id="SpringBootå¿«é€Ÿå¼€å§‹"><a href="#SpringBootå¿«é€Ÿå¼€å§‹" class="headerlink" title="SpringBootå¿«é€Ÿå¼€å§‹"></a>SpringBootå¿«é€Ÿå¼€å§‹</h2><h3 id="ä¸€ã€å‡†å¤‡å·¥ä½œ"><a href="#ä¸€ã€å‡†å¤‡å·¥ä½œ" class="headerlink" title="ä¸€ã€å‡†å¤‡å·¥ä½œ"></a>ä¸€ã€å‡†å¤‡å·¥ä½œ</h3><p>æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•å¿«é€Ÿçš„<strong>æ­å»ºä¸€ä¸ªSpring Bootåº”ç”¨</strong>ï¼Œå¹¶ä¸”å®<strong>ç°ä¸€ä¸ªç®€å•çš„Httpè¯·æ±‚</strong>ã€‚é€šè¿‡è¿™ä¸ªä¾‹å­å¯¹Spring Bootæœ‰ä¸€ä¸ªåˆæ­¥çš„äº†è§£ï¼Œå¹¶ä½“éªŒå…¶<strong>ç»“æ„ç®€å•ã€å¼€å‘å¿«é€Ÿ</strong>çš„ç‰¹æ€§ã€‚</p><p><strong>ç¯å¢ƒå‡†å¤‡</strong>ï¼š</p><ul><li>java versionï¼šâ€1.8.0.252â€</li><li>Mavenï¼šapache-maven-3.6.3</li><li>SpringBoot 2.x æœ€æ–°ç‰ˆ</li></ul><p><strong>å¼€å‘å·¥å…·</strong>ï¼š</p><ul><li>IDEA</li></ul><h3 id="äºŒã€åˆ›å»ºåŸºç¡€é¡¹ç›®è¯´æ˜"><a href="#äºŒã€åˆ›å»ºåŸºç¡€é¡¹ç›®è¯´æ˜" class="headerlink" title="äºŒã€åˆ›å»ºåŸºç¡€é¡¹ç›®è¯´æ˜"></a>äºŒã€åˆ›å»ºåŸºç¡€é¡¹ç›®è¯´æ˜</h3><p>Springå®˜æ–¹æä¾›äº†éå¸¸æ–¹ä¾¿çš„å·¥å…·è®©æˆ‘ä»¬å¿«é€Ÿæ„å»ºåº”ç”¨</p><p>Spring Initializrï¼š <a href="http://start.spring.io/">http://start.spring.io/</a></p><p><strong>é¡¹ç›®åˆ›å»ºæ–¹å¼ä¸€</strong>ï¼šä½¿ç”¨Spring Initalizr çš„ Web é¡µé¢åˆ›å»ºé¡¹ç›®</p><ol><li><p>æ‰“å¼€ <a href="http://start.spring.io/">http://start.spring.io/</a></p></li><li><p>å¡«å†™é¡¹ç›®ä¿¡æ¯</p></li><li><p>ç‚¹å‡»â€œGenerateâ€æŒ‰é’®ç”Ÿæˆé¡¹ç›®ï¼›ä¸‹è½½æ­¤é¡¹ç›®</p></li><li><p>è§£å‹é¡¹ç›®åŒ…ï¼Œå¹¶ç”¨IDEAä»¥Mavené¡¹ç›®å¯¼å…¥ï¼Œä¸€è·¯ä¸‹ä¸€æ­¥å³å¯ï¼Œç›´åˆ°é¡¹ç›®å¯¼å…¥å®Œæ¯•ã€‚</p></li><li><p>å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Œå¯èƒ½é€Ÿåº¦ä¼šæ¯”è¾ƒæ…¢ï¼ŒåŒ…æ¯”è¾ƒå¤šã€éœ€è¦è€å¿ƒç­‰å¾…ä¸€åˆ‡å°±ç»ª</p></li></ol><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBootç¬”è®°01-é‡è§SpringBoot/spring_initializr.png" alt="åˆ›å»ºSpringBooté¡¹ç›®" style="zoom:80%;"><p><strong>é¡¹ç›®åˆ›å»ºæ–¹å¼äºŒï¼š</strong>ä½¿ç”¨ IDEA ç›´æ¥åˆ›å»ºé¡¹ç›®</p><ol><li>åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®</li><li>é€‰æ‹© spring initializrï¼Œ å¯ä»¥çœ‹åˆ°é»˜è®¤å°±æ˜¯é€šè¿‡å®˜ç½‘å¿«é€Ÿæ„å»ºå·¥å…·å®ç°</li><li>å¡«å†™é¡¹ç›®ä¿¡æ¯</li><li>é€‰æ‹©åˆå§‹åŒ–çš„ç»„ä»¶ï¼ˆåˆå­¦å‹¾é€‰Webå³å¯ï¼‰</li><li>å¡«å†™é¡¹ç›®è·¯å¾„</li><li>ç­‰å¾…é¡¹ç›®æ„å»ºæˆåŠŸ</li></ol><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBootç¬”è®°01-é‡è§SpringBoot/idea_spring_initializr.png" alt="ideaæ„å»ºSpringBooté¡¹ç›®" style="zoom:80%;"><p><strong>é¡¹ç›®ç»“æ„åˆ†æ</strong>ï¼šé€šè¿‡ä¸Šé¢æ­¥éª¤å®ŒæˆåŸºç¡€é¡¹ç›®çš„åˆ›å»ºï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ã€‚</p><ol><li>ç¨‹åºçš„ä¸»å¯åŠ¨ç±» xxxApplicationï¼ˆä¸»ç¨‹åºçš„å…¥å£ï¼‰</li><li>ä¸€ä¸ª application.properties é…ç½®æ–‡ä»¶ï¼ˆæ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼‰</li><li>ä¸€ä¸ªæµ‹è¯•ç±» xxxApplicationTests</li><li>ä¸€ä¸ªpom.xmlæ–‡ä»¶</li></ol><h3 id="ä¸‰ã€pom-xmlåˆ†æ"><a href="#ä¸‰ã€pom-xmlåˆ†æ" class="headerlink" title="ä¸‰ã€pom.xmlåˆ†æ"></a>ä¸‰ã€pom.xmlåˆ†æ</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--çˆ¶ä¾èµ–--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.4.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span> <span class="hljs-comment">&lt;!-- lookup parent from repository --&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.atrox<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hellowrorld<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>hellowrorld<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>Demo project for Spring Boot<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--webä¾èµ–ï¼štomcatï¼ŒdispatcherServletï¼Œxml--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--spring-boot-starteræ‰€æœ‰çš„springbootä¾èµ–éƒ½æ˜¯ä½¿ç”¨è¿™ä¸ªå¼€å¤´çš„--&gt;</span><br><br>    <span class="hljs-comment">&lt;!--å•å…ƒæµ‹è¯•--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--æ‰“jaråŒ…æ’ä»¶--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="å››ã€ç¼–å†™ä¸€ä¸ªhttpæ¥å£"><a href="#å››ã€ç¼–å†™ä¸€ä¸ªhttpæ¥å£" class="headerlink" title="å››ã€ç¼–å†™ä¸€ä¸ªhttpæ¥å£"></a>å››ã€ç¼–å†™ä¸€ä¸ªhttpæ¥å£</h3><ol><li><p>åœ¨ä¸»ç¨‹åºçš„åŒçº§ç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªcontrolleråŒ…ï¼Œä¸€å®šè¦åœ¨<strong>åŒçº§ç›®å½•</strong>ä¸‹ï¼Œå¦åˆ™è¯†åˆ«ä¸åˆ°ã€‚</p></li><li><p>åœ¨åŒ…ä¸­æ–°å»ºä¸€ä¸ªHelloControllerç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloController</span> </span>&#123;<br>    <span class="hljs-comment">// æ¥å£ï¼šhttp://localhost:8080/hello</span><br>    <span class="hljs-meta">@RequestMapping(&quot;/hello&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">hello</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;hello,world&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™å®Œæ¯•åï¼Œä»ä¸»ç¨‹åºå¯åŠ¨é¡¹ç›®ï¼Œæµè§ˆå™¨å‘èµ·è¯·æ±‚ï¼ŒæŸ¥çœ‹é¡µé¢è¾“å‡ºã€‚</p></li></ol>   <img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBootç¬”è®°01-é‡è§SpringBoot/hello_world.png" alt="é¡µé¢è¾“å‡º" style="zoom: 67%;"><ol start="4"><li>ç®€å•å‡ æ­¥ï¼Œå°±å®Œæˆäº†ä¸€ä¸ªwebæ¥å£çš„å¼€å‘ï¼ŒSpringBootå°±æ˜¯è¿™ä¹ˆç®€å•ã€‚æ‰€ä»¥æˆ‘ä»¬å¸¸ç”¨å®ƒæ¥å»ºç«‹æˆ‘ä»¬çš„å¾®æœåŠ¡é¡¹ç›®.</li></ol><h3 id="äº”ã€å°†é¡¹ç›®æ‰“æˆjaråŒ…è¿è¡Œ"><a href="#äº”ã€å°†é¡¹ç›®æ‰“æˆjaråŒ…è¿è¡Œ" class="headerlink" title="äº”ã€å°†é¡¹ç›®æ‰“æˆjaråŒ…è¿è¡Œ"></a>äº”ã€å°†é¡¹ç›®æ‰“æˆjaråŒ…è¿è¡Œ</h3><p>åœ¨mavenä¾§è¾¹å·¥å…·æ ä¸­ç‚¹å‡»packageï¼Œè¿›è¡Œæ‰“åŒ…ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBootç¬”è®°01-é‡è§SpringBoot/package.png" alt="é¡¹ç›®æ‰“åŒ…" style="zoom:75%;"><p>æ‰“åŒ…å®Œåï¼Œæˆ‘ä»¬åœ¨å·¦ä¾§<code>target</code>ç›®å½•ä¸‹å°±ä¼šå¾—åˆ°ä¸€ä¸ªjaråŒ…ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBootç¬”è®°01-é‡è§SpringBoot/package_jar.png" alt="targetç›®å½•ä¸‹çš„jaråŒ…" style="zoom: 80%;"><p>æ‰¾åˆ°è¯¥jaråŒ…æ‰€åœ¨çš„æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹æ‰“å¼€å‘½ä»¤è¡Œï¼Œå¯åŠ¨æœåŠ¡ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBootç¬”è®°01-é‡è§SpringBoot/jar_start.png" alt="åœ¨jaråŒ…å¯åŠ¨æœåŠ¡" style="zoom:75%;"><h3 id="å…­ã€æ›´æ”¹é¡¹ç›®è¿è¡Œç«¯å£å·"><a href="#å…­ã€æ›´æ”¹é¡¹ç›®è¿è¡Œç«¯å£å·" class="headerlink" title="å…­ã€æ›´æ”¹é¡¹ç›®è¿è¡Œç«¯å£å·"></a>å…­ã€æ›´æ”¹é¡¹ç›®è¿è¡Œç«¯å£å·</h3><p>åœ¨<code>resources</code>ç›®å½•ä¸‹çš„<code>application.properties</code>ä¸­å†™å…¥ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-meta">server.port</span>=<span class="hljs-string">8081</span><br></code></pre></td></tr></table></figure><p>ç„¶åé‡å¯é¡¹ç›®å³å¯ã€‚</p><h3 id="ä¸ƒã€æ›´æ”¹SpringBootå¯åŠ¨Bnner"><a href="#ä¸ƒã€æ›´æ”¹SpringBootå¯åŠ¨Bnner" class="headerlink" title="ä¸ƒã€æ›´æ”¹SpringBootå¯åŠ¨Bnner"></a>ä¸ƒã€æ›´æ”¹SpringBootå¯åŠ¨Bnner</h3><p>å¦‚ä½•æ›´æ”¹å¯åŠ¨æ—¶æ˜¾ç¤ºçš„å­—ç¬¦æ‹¼æˆçš„å­—æ¯ï¼ŒSpringBootå‘¢ï¼Ÿä¹Ÿå°±æ˜¯ banner å›¾æ¡ˆï¼›</p><p>åªéœ€ä¸€æ­¥ï¼šåˆ°é¡¹ç›®ä¸‹çš„ resources ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªbanner.txt å³å¯ã€‚</p><p>å›¾æ¡ˆå¯ä»¥åˆ°ï¼š<a href="https://www.bootschool.net/ascii">https://www.bootschool.net/ascii</a> è¿™ä¸ªç½‘ç«™ç”Ÿæˆï¼Œç„¶åæ‹·è´åˆ°æ–‡ä»¶ä¸­å³å¯ï¼</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringBootç¬”è®°01-é‡è§SpringBoot/springboot_banner.png" alt="æ›´æ”¹Banner" style="zoom:50%;">]]></content>
    
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringMVCå­¦ä¹ ç¬”è®°</title>
    <link href="/posts/2021/01/04/SpringMVC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <url>/posts/2021/01/04/SpringMVC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="SpringMVC"><a href="#SpringMVC" class="headerlink" title="SpringMVC"></a>SpringMVC</h1><h2 id="1ã€å›é¡¾MVC"><a href="#1ã€å›é¡¾MVC" class="headerlink" title="1ã€å›é¡¾MVC"></a>1ã€å›é¡¾MVC</h2><h3 id="1-1-ä»€ä¹ˆæ˜¯MVC"><a href="#1-1-ä»€ä¹ˆæ˜¯MVC" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯MVC"></a>1.1 ä»€ä¹ˆæ˜¯MVC</h3><ul><li>MVCæ˜¯æ¨¡å‹ï¼ˆModelï¼‰ã€è§†å›¾ï¼ˆViewï¼‰ã€æ§åˆ¶å™¨ï¼ˆControllerï¼‰çš„ç®€å†™ï¼Œæ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡è§„èŒƒã€‚</li><li>MVCæ˜¯ä½¿ç”¨å°†<strong>ä¸šåŠ¡é€»è¾‘</strong>ã€<strong>æ•°æ®</strong>ã€<strong>æ˜¾ç¤º</strong>åˆ†ç¦»çš„æ–¹æ³•æ¥ç»„ç»‡ä»£ç ã€‚</li><li>MVCçš„ä¸»è¦ä½œç”¨æ˜¯<strong>é™ä½äº†è§†å›¾ä¸ä¸šåŠ¡é€»è¾‘é—´çš„åŒå‘è€¦åˆ</strong>ã€‚</li><li>MVCä¸æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œ<strong>MVCæ˜¯ä¸€ç§æ¶æ„æ¨¡å¼</strong>ã€‚å½“ç„¶ä¸åŒçš„MVCä¹Ÿå­˜åœ¨ç€å·®å¼‚ã€‚</li></ul><p><strong>Modelï¼ˆæ¨¡å‹ï¼‰</strong>ï¼šæ•°æ®æ¨¡å‹ï¼Œæä¾›è¦å±•ç¤ºçš„æ•°æ®ï¼Œå› æ­¤åŒ…å«æ•°æ®å’Œè¡Œä¸ºï¼Œå¯ä»¥è®¤ä¸ºæ˜¯é¢†åŸŸæ¨¡å‹æˆ–JavaBeanç»„ä»¶ï¼ˆåŒ…å«æ•°æ®å’Œè¡Œä¸ºï¼‰ï¼Œä¸è¿‡ç°åœ¨ä¸€èˆ¬éƒ½åˆ†ç¦»å¼€ï¼š Value Objectï¼ˆæ•°æ®Daoï¼‰å’Œ æœåŠ¡å±‚ï¼ˆè¡Œä¸ºServiceï¼‰ã€‚ä¹Ÿå°±æ˜¯æ¨¡å‹æä¾›äº†æ¨¡å‹æ•°æ®æŸ¥è¯¢å’Œæ¨¡å‹æ•°æ®çš„çŠ¶æ€æ›´æ–°ç­‰åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ•°æ®å’Œä¸šåŠ¡ã€‚</p><p><strong>Viewï¼ˆè§†å›¾ï¼‰</strong>ï¼šè´Ÿè´£è¿›è¡Œæ¨¡å‹çš„å±•ç¤ºï¼Œä¸€èˆ¬å°±æ˜¯æˆ‘ä»¬è§åˆ°çš„ç”¨æˆ·ç•Œé¢ï¼Œå®¢æˆ·æƒ³çœ‹åˆ°çš„ä¸œè¥¿ã€‚</p><p><strong>Controllerï¼ˆæ§åˆ¶å™¨ï¼‰</strong>ï¼šæ¥æ”¶ç”¨æˆ·è¯·æ±‚ï¼Œå§”æ‰˜ç»™æ¨¡å‹è¿›è¡Œå¤„ç†ï¼ˆçŠ¶æ€æ”¹å˜ï¼‰ï¼Œå¤„ç†å®Œæ¯•åæŠŠè¿”å›çš„æ¨¡å‹æ•°æ®è¿”å›ç»™è§†å›¾ï¼Œç”±è§†å›¾è´Ÿè´£å±•ç¤ºã€‚ä¹Ÿå°±æ˜¯è¯´æ§åˆ¶å™¨åšäº†ä¸ª<strong>è°ƒåº¦å‘˜</strong>çš„å·¥ä½œã€‚</p><p><strong>æœ€å…¸å‹çš„MVCå°±æ˜¯JSP + Servlet + JavaBeançš„æ¨¡å¼ï¼Œå…¶æ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤º</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringMVCå­¦ä¹ ç¬”è®°/mvc_structure.png" alt="mvcæ¶æ„" style="zoom: 80%;"><h3 id="1-2-Mdoel1æ—¶ä»£"><a href="#1-2-Mdoel1æ—¶ä»£" class="headerlink" title="1.2 Mdoel1æ—¶ä»£"></a>1.2 Mdoel1æ—¶ä»£</h3><ul><li>åœ¨webæ—©æœŸçš„å¼€å‘ä¸­ï¼Œé€šå¸¸é‡‡ç”¨çš„éƒ½æ˜¯Model1ã€‚</li><li>Model1ä¸­ï¼Œä¸»è¦åˆ†ä¸ºä¸¤å±‚ï¼Œè§†å›¾å±‚å’Œæ¨¡å‹å±‚ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringMVC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/model1.png" alt="modelä¸¤å±‚æ¶æ„"></p><p>Model1ä¼˜ç‚¹ï¼šæ¶æ„ç®€å•ï¼Œæ¯”è¾ƒé€‚åˆå°å‹é¡¹ç›®å¼€å‘ã€‚</p><p>Model1ç¼ºç‚¹ï¼šJSPèŒè´£ä¸å•ä¸€ï¼ŒèŒè´£è¿‡é‡ï¼Œä¸ä¾¿äºç»´æŠ¤ã€‚</p><h3 id="1-3-Model2æ—¶ä»£"><a href="#1-3-Model2æ—¶ä»£" class="headerlink" title="1.3 Model2æ—¶ä»£"></a>1.3 Model2æ—¶ä»£</h3><p>Model2æŠŠä¸€ä¸ªé¡¹ç›®åˆ†æˆä¸‰ä¸ªéƒ¨åˆ†ï¼ŒåŒ…æ‹¬<strong>è§†å›¾</strong>ã€<strong>æ§åˆ¶</strong>ã€<strong>æ¨¡å‹</strong>ï¼Œå…¶æ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringMVCå­¦ä¹ ç¬”è®°/model2.png" alt="model2æ¶æ„" style="zoom: 60%;"><p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p><ol><li>ç”¨æˆ·å‘è¯·æ±‚</li><li>Servletæ¥æ”¶è¯·æ±‚æ•°æ®ï¼Œå¹¶è°ƒç”¨å¯¹åº”çš„ä¸šåŠ¡é€»è¾‘æ–¹æ³•</li><li>ä¸šåŠ¡å¤„ç†å®Œæ¯•ï¼Œè¿”å›æ›´æ–°åçš„æ•°æ®ç»™servlet</li><li>servletè½¬å‘åˆ°JSPï¼Œç”±JSPæ¥æ¸²æŸ“é¡µé¢</li><li>å“åº”ç»™å‰ç«¯æ›´æ–°åçš„é¡µé¢</li></ol><p><strong>èŒè´£åˆ†æ</strong>ï¼š</p><ul><li><p><strong>Modelï¼šæ¨¡å‹</strong></p><ol><li>ä¸šåŠ¡é€»è¾‘</li><li>ä¿å­˜æ•°æ®çš„çŠ¶æ€</li></ol></li><li><p><strong>Viewï¼šè§†å›¾</strong></p><ol><li>æ˜¾ç¤ºé¡µé¢</li></ol></li><li><p><strong>Controllerï¼šæ§åˆ¶å™¨</strong></p><ol><li><p>å–å¾—è¡¨å•æ•°æ®</p></li><li><p>è°ƒç”¨ä¸šåŠ¡é€»è¾‘</p></li><li><p>è½¬å‘æŒ‡å®šçš„é¡µé¢</p></li></ol></li></ul><p>Model2è¿™æ ·ä¸ä»…æé«˜çš„ä»£ç çš„<strong>å¤ç”¨ç‡</strong>ä¸é¡¹ç›®çš„<strong>æ‰©å±•æ€§</strong>ï¼Œä¸”å¤§å¤§é™ä½äº†é¡¹ç›®çš„<strong>ç»´æŠ¤æˆæœ¬</strong>ã€‚Model 1æ¨¡å¼çš„å®ç°æ¯”è¾ƒç®€å•ï¼Œé€‚ç”¨äºå¿«é€Ÿå¼€å‘å°è§„æ¨¡é¡¹ç›®ï¼ŒModel1ä¸­JSPé¡µé¢èº«å…¼Viewå’ŒControllerä¸¤ç§è§’è‰²ï¼Œå°†æ§åˆ¶é€»è¾‘å’Œè¡¨ç°é€»è¾‘æ··æ‚åœ¨ä¸€èµ·ï¼Œä»è€Œå¯¼è‡´ä»£ç çš„é‡ç”¨æ€§éå¸¸ä½ï¼Œå¢åŠ äº†åº”ç”¨çš„æ‰©å±•æ€§å’Œç»´æŠ¤çš„éš¾åº¦ã€‚Model2æ¶ˆé™¤äº†Model1çš„ç¼ºç‚¹ã€‚</p><h3 id="1-4-å›é¡¾Servlet"><a href="#1-4-å›é¡¾Servlet" class="headerlink" title="1.4 å›é¡¾Servlet"></a>1.4 å›é¡¾Servlet</h3><ol><li><p>æ–°å»ºä¸€ä¸ªMavenå·¥ç¨‹å½“åšçˆ¶å·¥ç¨‹ï¼Œå¯¼å…¥pomä¾èµ–ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å¯¼å…¥ä¾èµ–--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-webmvc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>servlet-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jsp-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jstl<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>å»ºç«‹ä¸€ä¸ªmoduleï¼šspringmvc-01-servletï¼Œæ·»åŠ Web appçš„æ”¯æŒã€‚</p></li><li><p>å¯¼å…¥ servlet å’Œ jsp çš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>servlet-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jsp-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™ä¸€ä¸ªServletç±»ï¼Œç”¨æ¥å¤„ç†ç”¨æˆ·çš„è¯·æ±‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//å®ç°Servletæ¥å£</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>       <span class="hljs-comment">// 1.è·å–å‰ç«¯å‚æ•°</span><br>        String method = req.getParameter(<span class="hljs-string">&quot;method&quot;</span>);<br>        <span class="hljs-keyword">if</span> (method.equals(<span class="hljs-string">&quot;add&quot;</span>))&#123;<br>            req.getSession().setAttribute(<span class="hljs-string">&quot;msg&quot;</span>,<span class="hljs-string">&quot;æ‰§è¡Œäº†addæ–¹æ³•&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">if</span> (method.equals(<span class="hljs-string">&quot;delete&quot;</span>))&#123;<br>            req.getSession().setAttribute(<span class="hljs-string">&quot;msg&quot;</span>,<span class="hljs-string">&quot;æ‰§è¡Œäº†deleteæ–¹æ³•&quot;</span>);<br>        &#125;<br>        <span class="hljs-comment">// è°ƒç”¨ä¸šåŠ¡å±‚</span><br>        <span class="hljs-comment">// è§†å›¾è½¬å‘æˆ–è€…é‡å®šå‘</span><br>        req.getRequestDispatcher(<span class="hljs-string">&quot;test.jsp&quot;</span>).forward(req,resp);<br>  &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>       doGet(req,resp);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æ–°å»ºç¼–å†™test.jsp</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="hljs-string">&quot;java&quot;</span> %&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>    &lt;title&gt;Title&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br><br>    $&#123;msg&#125;<br><br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure></li><li><p>åœ¨web.xmlä¸­æ³¨å†ŒServlet</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.atrox.servlet.HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/hello<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>é…ç½®Tomcatï¼Œå¹¶å¯åŠ¨æµ‹è¯•</p><ul><li>localhost:8080/hello?method=add</li><li>localhost:8080/hello?method=delete</li></ul></li></ol><h3 id="1-5-MVCæ¡†æ¶è¦åšå“ªäº›äº‹æƒ…"><a href="#1-5-MVCæ¡†æ¶è¦åšå“ªäº›äº‹æƒ…" class="headerlink" title="1.5 MVCæ¡†æ¶è¦åšå“ªäº›äº‹æƒ…"></a>1.5 MVCæ¡†æ¶è¦åšå“ªäº›äº‹æƒ…</h3><ol><li>å°†urlæ˜ å°„åˆ°javaç±»æˆ–javaç±»çš„æ–¹æ³•</li><li>å°è£…ç”¨æˆ·æäº¤çš„æ•°æ®</li><li>å¤„ç†è¯·æ±‚-è°ƒç”¨ç›¸å…³çš„ä¸šåŠ¡å¤„ç†-å°è£…å“åº”æ•°æ®</li><li>å°†ç›¸åº”çš„æ•°æ®è¿›è¡Œæ¸²æŸ“ã€jsp/htmlç­‰è¡¨ç¤ºå±‚æ•°æ®</li></ol><p><strong>è¯´æ˜ï¼š</strong></p><p> å¸¸è§çš„æœåŠ¡å™¨ç«¯MVCæ¡†æ¶æœ‰ï¼šStrutsã€Spring MVCã€ASP.NET MVCã€Zend Frameworkã€JSFï¼›å¸¸è§å‰ç«¯MVCæ¡†æ¶ï¼švueã€angularjsã€reactã€backboneï¼›ç”±MVCæ¼”åŒ–å‡ºäº†å¦å¤–ä¸€äº›æ¨¡å¼å¦‚ï¼šMVPã€MVVM ç­‰ç­‰â€¦</p><h2 id="2ã€ä»€ä¹ˆæ˜¯SpringMVC"><a href="#2ã€ä»€ä¹ˆæ˜¯SpringMVC" class="headerlink" title="2ã€ä»€ä¹ˆæ˜¯SpringMVC"></a>2ã€ä»€ä¹ˆæ˜¯SpringMVC</h2><h3 id="2-1-æ¦‚è¿°"><a href="#2-1-æ¦‚è¿°" class="headerlink" title="2.1 æ¦‚è¿°"></a>2.1 æ¦‚è¿°</h3><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringMVC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/springmvc_logo.png" alt="springmvc_logo"></p><p>Spring MVCæ˜¯Spring Frameworkçš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯åŸºäºJavaå®ç°MVCçš„è½»é‡çº§Webæ¡†æ¶ã€‚</p><p>æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc">https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc</a></p><p><strong>æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å­¦ä¹ SpringMVCå‘¢?</strong></p><ol><li><p>è½»é‡çº§ï¼Œç®€å•æ˜“å­¦</p></li><li><p>é«˜æ•ˆ , åŸºäºè¯·æ±‚å“åº”çš„MVCæ¡†æ¶</p></li><li><p>ä¸Springå…¼å®¹æ€§å¥½ï¼Œæ— ç¼ç»“åˆ</p></li><li><p>çº¦å®šä¼˜äºé…ç½®</p></li><li><p>åŠŸèƒ½å¼ºå¤§ï¼šRESTfulã€æ•°æ®éªŒè¯ã€æ ¼å¼åŒ–ã€æœ¬åœ°åŒ–ã€ä¸»é¢˜ç­‰</p></li><li><p>ç®€æ´çµæ´»</p></li></ol><p>Springçš„webæ¡†æ¶å›´ç»•<strong>DispatcherServlet</strong> [ è°ƒåº¦Servlet ] è®¾è®¡ã€‚</p><p>DispatcherServletçš„ä½œç”¨æ˜¯å°†è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„å¤„ç†å™¨ã€‚ä»Spring 2.5å¼€å§‹ï¼Œä½¿ç”¨Java 5æˆ–è€…ä»¥ä¸Šç‰ˆæœ¬çš„ç”¨æˆ·å¯ä»¥é‡‡ç”¨åŸºäºæ³¨è§£å½¢å¼è¿›è¡Œå¼€å‘ï¼Œååˆ†ç®€æ´ï¼›</p><p>æ­£å› ä¸ºSpringMVCå¥½ , ç®€å• , ä¾¿æ· , æ˜“å­¦ , å¤©ç”Ÿå’ŒSpringæ— ç¼é›†æˆ(ä½¿ç”¨SpringIoCå’ŒAop) , ä½¿ç”¨çº¦å®šä¼˜äºé…ç½® . èƒ½å¤Ÿè¿›è¡Œç®€å•çš„junitæµ‹è¯• . æ”¯æŒRestfulé£æ ¼ .å¼‚å¸¸å¤„ç† , æœ¬åœ°åŒ– , å›½é™…åŒ– , æ•°æ®éªŒè¯ , ç±»å‹è½¬æ¢ , æ‹¦æˆªå™¨ ç­‰ç­‰â€¦æ‰€ä»¥æˆ‘ä»¬è¦å­¦ä¹  .</p><p><strong>æœ€é‡è¦çš„ä¸€ç‚¹è¿˜æ˜¯ç”¨çš„äººå¤š , ä½¿ç”¨çš„å…¬å¸å¤š .</strong></p><h3 id="2-2-ä¸­å¿ƒæ§åˆ¶å™¨"><a href="#2-2-ä¸­å¿ƒæ§åˆ¶å™¨" class="headerlink" title="2.2 ä¸­å¿ƒæ§åˆ¶å™¨"></a>2.2 ä¸­å¿ƒæ§åˆ¶å™¨</h3><p>Springçš„webæ¡†æ¶å›´ç»•<strong>DispatcherServlet</strong>è®¾è®¡ã€‚DispatcherServletçš„ä½œç”¨æ˜¯å°†è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„å¤„ç†å™¨ã€‚ä»Spring 2.5å¼€å§‹ï¼Œä½¿ç”¨Java 5æˆ–è€…ä»¥ä¸Šç‰ˆæœ¬çš„ç”¨æˆ·å¯ä»¥é‡‡ç”¨åŸºäºæ³¨è§£çš„controllerå£°æ˜æ–¹å¼ã€‚</p><p>Spring MVCæ¡†æ¶åƒè®¸å¤šå…¶ä»–MVCæ¡†æ¶ä¸€æ ·, <strong>ä»¥è¯·æ±‚ä¸ºé©±åŠ¨</strong> , <strong>å›´ç»•ä¸€ä¸ªä¸­å¿ƒServletåˆ†æ´¾è¯·æ±‚åŠæä¾›å…¶ä»–åŠŸèƒ½</strong>ï¼Œ**DispatcherServletæ˜¯ä¸€ä¸ªå®é™…çš„Servlet (å®ƒç»§æ‰¿è‡ªHttpServlet åŸºç±»)**ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringMVC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/dispatcher.png" alt="ä¸­å¿ƒæ§åˆ¶å™¨"></p><p>SpringMVCçš„åŸç†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p>å½“å‘èµ·è¯·æ±‚æ—¶è¢«å‰ç½®çš„æ§åˆ¶å™¨æ‹¦æˆªåˆ°è¯·æ±‚ï¼Œæ ¹æ®è¯·æ±‚å‚æ•°ç”Ÿæˆä»£ç†è¯·æ±‚ï¼Œæ‰¾åˆ°è¯·æ±‚å¯¹åº”çš„å®é™…æ§åˆ¶å™¨ï¼Œæ§åˆ¶å™¨å¤„ç†è¯·æ±‚ï¼Œåˆ›å»ºæ•°æ®æ¨¡å‹ï¼Œè®¿é—®æ•°æ®åº“ï¼Œå°†æ¨¡å‹å“åº”ç»™ä¸­å¿ƒæ§åˆ¶å™¨ï¼Œæ§åˆ¶å™¨ä½¿ç”¨æ¨¡å‹ä¸è§†å›¾æ¸²æŸ“è§†å›¾ç»“æœï¼Œå°†ç»“æœè¿”å›ç»™ä¸­å¿ƒæ§åˆ¶å™¨ï¼Œå†å°†ç»“æœè¿”å›ç»™è¯·æ±‚è€…ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringMVC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/springmvc_re.png" alt="springmvcåŸç†å›¾"></p><h3 id="2-3-SpringMVCæ‰§è¡ŒåŸç†"><a href="#2-3-SpringMVCæ‰§è¡ŒåŸç†" class="headerlink" title="2.3 SpringMVCæ‰§è¡ŒåŸç†"></a>2.3 SpringMVCæ‰§è¡ŒåŸç†</h3><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringMVC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/mvc_principle.png" alt="æ‰§è¡ŒåŸç†æµç¨‹å›¾"></p><p>å›¾ä¸ºSpringMVCçš„ä¸€ä¸ªè¾ƒå®Œæ•´çš„æµç¨‹å›¾ï¼Œå®çº¿è¡¨ç¤ºSpringMVCæ¡†æ¶æä¾›çš„æŠ€æœ¯ï¼Œä¸éœ€è¦å¼€å‘è€…å®ç°ï¼Œè™šçº¿è¡¨ç¤ºéœ€è¦å¼€å‘è€…å®ç°ã€‚</p><p><strong>ç®€è¦åˆ†ææ‰§è¡Œæµç¨‹</strong></p><ol><li>DispatcherServletè¡¨ç¤ºå‰ç½®æ§åˆ¶å™¨ï¼Œæ˜¯æ•´ä¸ªSpringMVCçš„æ§åˆ¶ä¸­å¿ƒã€‚ç”¨æˆ·å‘å‡ºè¯·æ±‚ï¼ŒDispatcherServletæ¥æ”¶è¯·æ±‚å¹¶æ‹¦æˆªè¯·æ±‚ã€‚<ul><li>æˆ‘ä»¬å‡è®¾è¯·æ±‚çš„urlä¸º : <a href="http://localhost:8080/SpringMVC/hello">http://localhost:8080/SpringMVC/hello</a></li><li><strong>å¦‚ä¸Šurlæ‹†åˆ†æˆä¸‰éƒ¨åˆ†ï¼š</strong></li><li><a href="http://localhost:8080/">http://localhost:8080</a> â€”â€”&gt; æœåŠ¡å™¨åŸŸå</li><li>SpringMVC â€”â€”&gt; éƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šçš„webç«™ç‚¹</li><li>hello â€”â€”&gt; è¡¨ç¤ºæ§åˆ¶å™¨</li><li>é€šè¿‡åˆ†æï¼Œå¦‚ä¸Šurlè¡¨ç¤ºä¸ºï¼šè¯·æ±‚ä½äºæœåŠ¡å™¨localhost:8080ä¸Šçš„SpringMVCç«™ç‚¹çš„helloæ§åˆ¶å™¨ã€‚</li></ul></li><li>HandlerMappingä¸ºå¤„ç†å™¨æ˜ å°„ã€‚DispatcherServletè°ƒç”¨HandlerMapping,HandlerMappingæ ¹æ®è¯·æ±‚urlæŸ¥æ‰¾Handlerã€‚</li><li>HandlerExecutionè¡¨ç¤ºå…·ä½“çš„Handler,å…¶ä¸»è¦ä½œç”¨æ˜¯æ ¹æ®urlæŸ¥æ‰¾æ§åˆ¶å™¨ï¼Œå¦‚ä¸Šurlè¢«æŸ¥æ‰¾æ§åˆ¶å™¨ä¸ºï¼šhelloã€‚</li><li>HandlerExecutionå°†è§£æåçš„ä¿¡æ¯ä¼ é€’ç»™DispatcherServlet,å¦‚è§£ææ§åˆ¶å™¨æ˜ å°„ç­‰ã€‚</li><li>HandlerAdapterè¡¨ç¤ºå¤„ç†å™¨é€‚é…å™¨ï¼Œå…¶æŒ‰ç…§ç‰¹å®šçš„è§„åˆ™å»æ‰§è¡ŒHandlerã€‚</li><li>Handlerè®©å…·ä½“çš„Controlleræ‰§è¡Œã€‚</li><li>Controllerå°†å…·ä½“çš„æ‰§è¡Œä¿¡æ¯è¿”å›ç»™HandlerAdapter,å¦‚ModelAndViewã€‚</li><li>HandlerAdapterå°†è§†å›¾é€»è¾‘åæˆ–æ¨¡å‹ä¼ é€’ç»™DispatcherServletã€‚</li><li>DispatcherServletè°ƒç”¨è§†å›¾è§£æå™¨(ViewResolver)æ¥è§£æHandlerAdapterä¼ é€’çš„é€»è¾‘è§†å›¾åã€‚</li><li>è§†å›¾è§£æå™¨å°†è§£æçš„é€»è¾‘è§†å›¾åä¼ ç»™DispatcherServletã€‚</li><li>DispatcherServletæ ¹æ®è§†å›¾è§£æå™¨è§£æçš„è§†å›¾ç»“æœï¼Œè°ƒç”¨å…·ä½“çš„è§†å›¾ã€‚</li><li>æœ€ç»ˆè§†å›¾å‘ˆç°ç»™ç”¨æˆ·ã€‚</li></ol><h2 id="3ã€ç¬¬ä¸€ä¸ªMVCç¨‹åº"><a href="#3ã€ç¬¬ä¸€ä¸ªMVCç¨‹åº" class="headerlink" title="3ã€ç¬¬ä¸€ä¸ªMVCç¨‹åº"></a>3ã€ç¬¬ä¸€ä¸ªMVCç¨‹åº</h2><h3 id="3-1-é…ç½®ç‰ˆ"><a href="#3-1-é…ç½®ç‰ˆ" class="headerlink" title="3.1 é…ç½®ç‰ˆ"></a>3.1 é…ç½®ç‰ˆ</h3><ol><li><p>æ–°å»ºä¸€ä¸ªmoduleï¼Œspringmvc-02-helloï¼Œæ·»åŠ webçš„æ”¯æŒï¼</p></li><li><p>ç¡®å®šå¯¼å…¥äº†SpringMVCçš„ä¾èµ–</p></li><li><p>é…ç½®web.xmlï¼Œæ³¨å†ŒDispatcherServlet</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">web-app</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">version</span>=<span class="hljs-string">&quot;4.0&quot;</span>&gt;</span><br><br>   <span class="hljs-comment">&lt;!--1.æ³¨å†ŒDispatcherServlet--&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>springmvc<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>       <span class="hljs-comment">&lt;!--å…³è”ä¸€ä¸ªspringmvcçš„é…ç½®æ–‡ä»¶:ã€servlet-nameã€‘-servlet.xml--&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>classpath:springmvc-servlet.xml<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>       <span class="hljs-comment">&lt;!--å¯åŠ¨çº§åˆ«-1--&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">load-on-startup</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">load-on-startup</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><br>   <span class="hljs-comment">&lt;!--/ åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ï¼›ï¼ˆä¸åŒ…æ‹¬.jspï¼‰--&gt;</span><br>   <span class="hljs-comment">&lt;!--/* åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ï¼›ï¼ˆåŒ…æ‹¬.jspï¼‰--&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>springmvc<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">web-app</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™SpringMVCçš„é…ç½®æ–‡ä»¶ï¼åç§°ï¼šspringmvc-servlet.xmlï¼Œè¯´æ˜ï¼Œè¿™é‡Œçš„åç§°è¦æ±‚æ˜¯æŒ‰ç…§å®˜æ–¹æ¥çš„ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-tag"><span class="hljs-string">       http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>æ·»åŠ  å¤„ç†æ˜ å°„å™¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>æ·»åŠ  å¤„ç†å™¨é€‚é…å™¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>æ·»åŠ  è§†å›¾è§£æå™¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--è§†å›¾è§£æå™¨:DispatcherServletç»™ä»–çš„ModelAndView--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;InternalResourceViewResolver&quot;</span>&gt;</span><br>   <span class="hljs-comment">&lt;!--å‰ç¼€--&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;prefix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;/WEB-INF/jsp/&quot;</span>/&gt;</span><br>   <span class="hljs-comment">&lt;!--åç¼€--&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;suffix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;.jsp&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™æˆ‘ä»¬è¦æ“ä½œä¸šåŠ¡Controller ï¼Œè¦ä¹ˆå®ç°Controlleræ¥å£ï¼Œè¦ä¹ˆå¢åŠ æ³¨è§£ï¼›éœ€è¦è¿”å›ä¸€ä¸ªModelAndViewï¼Œè£…æ•°æ®ï¼Œå°è§†å›¾ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.atrox.controller;<br><br><span class="hljs-keyword">import</span> org.springframework.web.servlet.ModelAndView;<br><span class="hljs-keyword">import</span> org.springframework.web.servlet.mvc.Controller;<br><br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><br><span class="hljs-comment">//æ³¨æ„ï¼šè¿™é‡Œæˆ‘ä»¬å…ˆå¯¼å…¥Controlleræ¥å£</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloController</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Controller</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title">handleRequest</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>        <span class="hljs-comment">//ModelAndView æ¨¡å‹å’Œè§†å›¾</span><br>        ModelAndView mv = <span class="hljs-keyword">new</span> ModelAndView();<br><br>        <span class="hljs-comment">//å°è£…å¯¹è±¡ï¼Œæ”¾åœ¨ModelAndViewä¸­ã€‚Model</span><br>        mv.addObject(<span class="hljs-string">&quot;msg&quot;</span>,<span class="hljs-string">&quot;HelloSpringMVC!&quot;</span>);<br>        <span class="hljs-comment">//å°è£…è¦è·³è½¬çš„è§†å›¾ï¼Œæ”¾åœ¨ModelAndViewä¸­</span><br>        mv.setViewName(<span class="hljs-string">&quot;hello&quot;</span>); <span class="hljs-comment">//: /WEB-INF/jsp/hello.jsp</span><br>        <span class="hljs-keyword">return</span> mv;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å°†è‡ªå·±çš„ç±»äº¤ç»™SpringIOCå®¹å™¨ï¼Œæ³¨å†Œbean</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--Handler--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;/hello&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;nuc.ss.controller.HelloController&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>å†™è¦è·³è½¬çš„jspé¡µé¢ï¼Œæ˜¾ç¤ºModelandViewå­˜æ”¾çš„æ•°æ®ï¼Œä»¥åŠæˆ‘ä»¬çš„æ­£å¸¸é¡µé¢ï¼›</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="hljs-string">&quot;java&quot;</span> %&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>   &lt;title&gt;Kuangshen&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>$&#123;msg&#125;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure></li><li><p>é…ç½®Tomcat å¯åŠ¨æµ‹è¯•ï¼</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringMVC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/firstmvc_test.png" alt="é¦–ä¸ªmvcç¨‹åºæµ‹è¯•"></p></li></ol><p><strong>å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼šè®¿é—®å‡ºç°404ï¼Œæ’æŸ¥æ­¥éª¤ï¼š</strong></p><ol><li>æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºï¼Œçœ‹ä¸€ä¸‹æ˜¯ä¸æ˜¯ç¼ºå°‘äº†ä»€ä¹ˆjaråŒ…ã€‚</li><li>å¦‚æœjaråŒ…å­˜åœ¨ï¼Œæ˜¾ç¤ºæ— æ³•è¾“å‡ºï¼Œå°±åœ¨IDEAçš„é¡¹ç›®å‘å¸ƒä¸­ï¼Œæ·»åŠ libä¾èµ–ï¼</li><li>é‡å¯Tomcat å³å¯è§£å†³ï¼</li></ol><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringMVCå­¦ä¹ ç¬”è®°/no_lib.png" alt="æ–°å»ºlibæ–‡ä»¶å¤¹ï¼Œæ·»åŠ æ‰€æœ‰åŒ…" style="zoom:75%;"><p>å°ç»“ï¼šæˆ‘ä»¬æ¥çœ‹ä¸ªæ³¨è§£ç‰ˆå®ç°ï¼Œè¿™æ‰æ˜¯SpringMVCçš„ç²¾é«“ã€‚</p><h3 id="3-2-æ³¨è§£ç‰ˆ"><a href="#3-2-æ³¨è§£ç‰ˆ" class="headerlink" title="3.2 æ³¨è§£ç‰ˆ"></a>3.2 æ³¨è§£ç‰ˆ</h3><ol><li><p>æ–°å»ºä¸€ä¸ªMoudleï¼Œspringmvc-03-hello-annotation ã€‚æ·»åŠ webæ”¯æŒï¼</p></li><li><p>ç”±äºMavenå¯èƒ½å­˜åœ¨èµ„æºè¿‡æ»¤çš„é—®é¢˜ï¼Œæˆ‘ä»¬å°†é…ç½®å®Œå–„</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>           <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>           <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>åœ¨pom.xmlæ–‡ä»¶å¼•å…¥ç›¸å…³çš„ä¾èµ–ï¼šä¸»è¦æœ‰Springæ¡†æ¶æ ¸å¿ƒåº“ã€Spring MVCã€servlet , JSTLç­‰ã€‚æˆ‘ä»¬åœ¨çˆ¶ä¾èµ–ä¸­å·²ç»å¼•å…¥äº†ï¼</p></li><li><p><strong>é…ç½®web.xml</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">web-app</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">version</span>=<span class="hljs-string">&quot;4.0&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--1.æ³¨å†Œservlet--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>SpringMVC<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--é€šè¿‡åˆå§‹åŒ–å‚æ•°æŒ‡å®šSpringMVCé…ç½®æ–‡ä»¶çš„ä½ç½®ï¼Œè¿›è¡Œå…³è”--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>classpath:springmvc-servlet.xml<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- å¯åŠ¨é¡ºåºï¼Œæ•°å­—è¶Šå°ï¼Œå¯åŠ¨è¶Šæ—© --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">load-on-startup</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">load-on-startup</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">/ å’Œ /* çš„åŒºåˆ«ï¼š</span><br><span class="hljs-comment">        &lt; url-pattern &gt; / &lt;/ url-pattern &gt; ä¸ä¼šåŒ¹é…åˆ°.jspï¼Œ åªé’ˆå¯¹æˆ‘ä»¬ç¼–å†™çš„è¯·æ±‚ï¼›å³ï¼š.jsp ä¸ä¼šè¿›å…¥springçš„ DispatcherServletç±» ã€‚</span><br><span class="hljs-comment">        &lt; url-pattern &gt; /* &lt;/ url-pattern &gt; ä¼šåŒ¹é… *.jspï¼Œä¼šå‡ºç°è¿”å› jspè§†å›¾ æ—¶å†æ¬¡è¿›å…¥springçš„DispatcherServlet ç±»ï¼Œå¯¼è‡´æ‰¾ä¸åˆ°å¯¹åº”çš„controlleræ‰€ä»¥æŠ¥404é”™ã€‚</span><br><span class="hljs-comment">--&gt;</span><br>    <span class="hljs-comment">&lt;!--æ‰€æœ‰è¯·æ±‚éƒ½ä¼šè¢«springmvcæ‹¦æˆª --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>SpringMVC<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">web-app</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>æ·»åŠ Spring MVCé…ç½®æ–‡ä»¶</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:mvc</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-tag"><span class="hljs-string">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-tag"><span class="hljs-string">       http://www.springframework.org/schema/context</span></span><br><span class="hljs-tag"><span class="hljs-string">       https://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class="hljs-tag"><span class="hljs-string">       http://www.springframework.org/schema/mvc</span></span><br><span class="hljs-tag"><span class="hljs-string">       https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- è‡ªåŠ¨æ‰«æåŒ…ï¼Œè®©æŒ‡å®šåŒ…ä¸‹çš„æ³¨è§£ç”Ÿæ•ˆ,ç”±IOCå®¹å™¨ç»Ÿä¸€ç®¡ç† --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.atrox.controller&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!-- è®©Spring MVCä¸å¤„ç†é™æ€èµ„æº --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mvc:default-servlet-handler</span> /&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    æ”¯æŒmvcæ³¨è§£é©±åŠ¨</span><br><span class="hljs-comment">        åœ¨springä¸­ä¸€èˆ¬é‡‡ç”¨@RequestMappingæ³¨è§£æ¥å®Œæˆæ˜ å°„å…³ç³»</span><br><span class="hljs-comment">        è¦æƒ³ä½¿@RequestMappingæ³¨è§£ç”Ÿæ•ˆ</span><br><span class="hljs-comment">        å¿…é¡»å‘ä¸Šä¸‹æ–‡ä¸­æ³¨å†ŒDefaultAnnotationHandlerMapping</span><br><span class="hljs-comment">        å’Œä¸€ä¸ªAnnotationMethodHandlerAdapterå®ä¾‹</span><br><span class="hljs-comment">        è¿™ä¸¤ä¸ªå®ä¾‹åˆ†åˆ«åœ¨ç±»çº§åˆ«å’Œæ–¹æ³•çº§åˆ«å¤„ç†ã€‚</span><br><span class="hljs-comment">        è€Œannotation-drivené…ç½®å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨å®Œæˆä¸Šè¿°ä¸¤ä¸ªå®ä¾‹çš„æ³¨å…¥ã€‚</span><br><span class="hljs-comment">     --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mvc:annotation-driven</span> /&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- è§†å›¾è§£æå™¨ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span></span><br><span class="hljs-tag">          <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;internalResourceViewResolver&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- å‰ç¼€ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;prefix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;/WEB-INF/jsp/&quot;</span> /&gt;</span><br>        <span class="hljs-comment">&lt;!-- åç¼€ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;suffix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;.jsp&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p>åœ¨è§†å›¾è§£æå™¨ä¸­æˆ‘ä»¬æŠŠæ‰€æœ‰çš„è§†å›¾éƒ½å­˜æ”¾åœ¨/WEB-INF/ç›®å½•ä¸‹ï¼Œè¿™æ ·å¯ä»¥ä¿è¯è§†å›¾å®‰å…¨ï¼Œå› ä¸ºè¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå®¢æˆ·ç«¯ä¸èƒ½ç›´æ¥è®¿é—®ã€‚</p><ul><li>è®©IOCçš„æ³¨è§£ç”Ÿæ•ˆ</li><li>é™æ€èµ„æºè¿‡æ»¤ ï¼šHTML . JS . CSS . å›¾ç‰‡ ï¼Œ è§†é¢‘ â€¦<ul><li>MVCçš„æ³¨è§£é©±åŠ¨</li><li>é…ç½®è§†å›¾è§£æå™¨</li></ul></li></ul></li><li><p><strong>åˆ›å»ºcontroller</strong></p><p>ç¼–å†™ä¸€ä¸ªJavaæ§åˆ¶ç±»ï¼šnuc.ss.controller.HelloController , æ³¨æ„ç¼–ç è§„èŒƒ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.springframework.stereotype.Controller;<br><span class="hljs-keyword">import</span> org.springframework.ui.Model;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;<br><br><span class="hljs-meta">@Controller</span><br><span class="hljs-meta">@RequestMapping(&quot;/hello&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloController</span> </span>&#123;<br><br>    <span class="hljs-comment">// localhost:8080/hello/h1</span><br>    <span class="hljs-meta">@RequestMapping(&quot;/h1&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">hello</span><span class="hljs-params">(Model model)</span> </span>&#123;<br>        <span class="hljs-comment">// å°è£…æ•°æ®</span><br>        model.addAttribute(<span class="hljs-string">&quot;msg&quot;</span>,<span class="hljs-string">&quot;Hello,SpringMVC&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;hello&quot;</span>; <span class="hljs-comment">// ä¼šè¢«è§†å›¾è§£æå™¨å¤„ç†</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>@Controlleræ˜¯ä¸ºäº†è®©Spring IOCå®¹å™¨åˆå§‹åŒ–æ—¶è‡ªåŠ¨æ‰«æåˆ°ï¼›</li><li>@RequestMappingæ˜¯ä¸ºäº†æ˜ å°„è¯·æ±‚è·¯å¾„ï¼Œè¿™é‡Œå› ä¸ºç±»ä¸æ–¹æ³•ä¸Šéƒ½æœ‰æ˜ å°„æ‰€ä»¥è®¿é—®æ—¶åº”è¯¥æ˜¯/HelloController/helloï¼›</li><li>æ–¹æ³•ä¸­å£°æ˜Modelç±»å‹çš„å‚æ•°æ˜¯ä¸ºäº†æŠŠActionä¸­çš„æ•°æ®å¸¦åˆ°è§†å›¾ä¸­ï¼›</li><li>æ–¹æ³•è¿”å›çš„ç»“æœæ˜¯è§†å›¾çš„åç§°helloï¼ŒåŠ ä¸Šé…ç½®æ–‡ä»¶ä¸­çš„å‰åç¼€å˜æˆWEB-INF/jsp/<strong>hello</strong>.jsp</li></ul></li><li><p><strong>åˆ›å»ºè§†å›¾å±‚</strong></p><p>åœ¨WEB-INF/ jspç›®å½•ä¸­åˆ›å»ºhello.jsp ï¼Œ è§†å›¾å¯ä»¥ç›´æ¥å–å‡ºå¹¶å±•ç¤ºä»Controllerå¸¦å›çš„ä¿¡æ¯ï¼›</p><p>å¯ä»¥é€šè¿‡ELè¡¨ç¤ºå–å‡ºModelä¸­å­˜æ”¾çš„å€¼ï¼Œæˆ–è€…å¯¹è±¡ï¼›</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="hljs-string">&quot;java&quot;</span> %&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>   &lt;title&gt;SpringMVC&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>$&#123;msg&#125;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure></li><li><p>é…ç½®Tomcatè¿è¡Œ</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringMVC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/firstmvc_annotation.png" alt="æ³¨è§£ç‰ˆmvcç¨‹åºæµ‹è¯•"></p></li></ol><h3 id="3-3-å°ç»“"><a href="#3-3-å°ç»“" class="headerlink" title="3.3 å°ç»“"></a>3.3 å°ç»“</h3><p>å®ç°æ­¥éª¤å…¶å®éå¸¸çš„ç®€å•ï¼š</p><ol><li>æ–°å»ºä¸€ä¸ªwebé¡¹ç›®</li><li>å¯¼å…¥ç›¸å…³jaråŒ…</li><li>ç¼–å†™web.xml , æ³¨å†ŒDispatcherServlet</li><li>ç¼–å†™springmvcé…ç½®æ–‡ä»¶</li><li>æ¥ä¸‹æ¥å°±æ˜¯å»åˆ›å»ºå¯¹åº”çš„æ§åˆ¶ç±» , controller</li><li>æœ€åå®Œå–„å‰ç«¯è§†å›¾å’Œcontrollerä¹‹é—´çš„å¯¹åº”</li><li>æµ‹è¯•è¿è¡Œè°ƒè¯•.</li></ol><p>ä½¿ç”¨springMVCå¿…é¡»é…ç½®çš„ä¸‰å¤§ä»¶</p><p><strong>å¤„ç†å™¨æ˜ å°„å™¨ã€å¤„ç†å™¨é€‚é…å™¨ã€è§†å›¾è§£æå™¨</strong></p><p>é€šå¸¸ï¼Œæˆ‘ä»¬åªéœ€è¦<strong>æ‰‹åŠ¨é…ç½®è§†å›¾è§£æå™¨</strong>ï¼Œè€Œ<strong>å¤„ç†å™¨æ˜ å°„å™¨</strong>å’Œ<strong>å¤„ç†å™¨é€‚é…å™¨</strong>åªéœ€è¦å¼€å¯<strong>æ³¨è§£é©±åŠ¨</strong>å³å¯ï¼Œè€Œçœå»äº†å¤§æ®µçš„xmlé…ç½®</p><h2 id="4ã€RestFulå’Œæ§åˆ¶å™¨"><a href="#4ã€RestFulå’Œæ§åˆ¶å™¨" class="headerlink" title="4ã€RestFulå’Œæ§åˆ¶å™¨"></a>4ã€RestFulå’Œæ§åˆ¶å™¨</h2><h3 id="4-1-æ§åˆ¶å™¨Controller"><a href="#4-1-æ§åˆ¶å™¨Controller" class="headerlink" title="4.1 æ§åˆ¶å™¨Controller"></a>4.1 æ§åˆ¶å™¨Controller</h3><ul><li>æ§åˆ¶å™¨å¤æ‚æä¾›è®¿é—®åº”ç”¨ç¨‹åºçš„è¡Œä¸ºï¼Œé€šå¸¸é€šè¿‡æ¥å£å®šä¹‰æˆ–æ³¨è§£å®šä¹‰ä¸¤ç§æ–¹æ³•å®ç°ã€‚</li><li>æ§åˆ¶å™¨è´Ÿè´£è§£æç”¨æˆ·çš„è¯·æ±‚å¹¶å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªæ¨¡å‹ã€‚</li><li>åœ¨Spring MVCä¸­ä¸€ä¸ªæ§åˆ¶å™¨ç±»å¯ä»¥åŒ…å«å¤šä¸ªæ–¹æ³•</li><li>åœ¨Spring MVCä¸­ï¼Œå¯¹äºControllerçš„é…ç½®æ–¹å¼æœ‰å¾ˆå¤šç§</li></ul><h3 id="4-2-å®ç°Controlleræ¥å£"><a href="#4-2-å®ç°Controlleræ¥å£" class="headerlink" title="4.2 å®ç°Controlleræ¥å£"></a>4.2 å®ç°Controlleræ¥å£</h3><p>Controlleræ˜¯ä¸€ä¸ªæ¥å£ï¼Œåœ¨org.springframework.web.servlet.mvcåŒ…ä¸‹ï¼Œæ¥å£ä¸­åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//å®ç°è¯¥æ¥å£çš„ç±»è·å¾—æ§åˆ¶å™¨åŠŸèƒ½</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Controller</span> </span>&#123;<br>   <span class="hljs-comment">//å¤„ç†è¯·æ±‚ä¸”è¿”å›ä¸€ä¸ªæ¨¡å‹ä¸è§†å›¾å¯¹è±¡</span><br>   <span class="hljs-function">ModelAndView <span class="hljs-title">handleRequest</span><span class="hljs-params">(HttpServletRequest var1, HttpServletResponse var2)</span> <span class="hljs-keyword">throws</span> Exception</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æµ‹è¯•</strong>ï¼š</p><ol><li><p>æ–°å»ºä¸€ä¸ªMoudleï¼Œspringmvc-04-controllerï¼</p></li><li><p>mvcçš„é…ç½®æ–‡ä»¶åªç•™ä¸‹ è§†å›¾è§£æå™¨ï¼</p></li><li><p>ç¼–å†™ä¸€ä¸ªControllerç±»ï¼ŒControllerTest1</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//å®šä¹‰æ§åˆ¶å™¨</span><br><span class="hljs-comment">//æ³¨æ„ç‚¹ï¼šä¸è¦å¯¼é”™åŒ…ï¼Œå®ç°Controlleræ¥å£ï¼Œé‡å†™æ–¹æ³•ï¼›</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ControllerTest1</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Controller</span> </span>&#123;<br><br>   <span class="hljs-function"><span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title">handleRequest</span><span class="hljs-params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>       <span class="hljs-comment">//è¿”å›ä¸€ä¸ªæ¨¡å‹è§†å›¾å¯¹è±¡</span><br>       ModelAndView mv = <span class="hljs-keyword">new</span> ModelAndView();<br>       mv.addObject(<span class="hljs-string">&quot;msg&quot;</span>,<span class="hljs-string">&quot;Test1Controller&quot;</span>);<br>       mv.setViewName(<span class="hljs-string">&quot;test&quot;</span>);<br>       <span class="hljs-keyword">return</span> mv;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™å®Œæ¯•åï¼Œå»Springé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œè¯·æ±‚çš„beanï¼›nameå¯¹åº”è¯·æ±‚è·¯å¾„ï¼Œclasså¯¹åº”å¤„ç†è¯·æ±‚çš„ç±»</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;/t1&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;nuc.ss.controller.ControllerTest1&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™å‰ç«¯test.jspï¼Œæ³¨æ„åœ¨WEB-INF/jspç›®å½•ä¸‹ç¼–å†™ï¼Œå¯¹åº”æˆ‘ä»¬çš„è§†å›¾è§£æå™¨</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="hljs-string">&quot;java&quot;</span> %&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>   &lt;title&gt;Kuangshen&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>$&#123;msg&#125;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure></li></ol><p><strong>è¯´æ˜</strong>:</p><ul><li>å®ç°æ¥å£Controllerå®šä¹‰æ§åˆ¶å™¨æ˜¯è¾ƒè€çš„åŠæ³•</li><li>ç¼ºç‚¹æ˜¯ï¼šä¸€ä¸ªæ§åˆ¶å™¨ä¸­åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œå¦‚æœè¦å¤šä¸ªæ–¹æ³•åˆ™éœ€è¦å®šä¹‰å¤šä¸ªControllerï¼›å®šä¹‰çš„æ–¹å¼æ¯”è¾ƒéº»çƒ¦ï¼›</li></ul><h3 id="4-3-ä½¿ç”¨æ³¨è§£-Controller"><a href="#4-3-ä½¿ç”¨æ³¨è§£-Controller" class="headerlink" title="4.3 ä½¿ç”¨æ³¨è§£@Controller"></a>4.3 ä½¿ç”¨æ³¨è§£@Controller</h3><ul><li><p>@Controlleræ³¨è§£ç±»å‹ç”¨äºå£°æ˜Springç±»çš„å®ä¾‹æ˜¯ä¸€ä¸ªæ§åˆ¶å™¨ï¼ˆåœ¨è®²IOCæ—¶è¿˜æåˆ°äº†å¦å¤–3ä¸ªæ³¨è§£ï¼‰ï¼›</p></li><li><p>Springå¯ä»¥ä½¿ç”¨æ‰«ææœºåˆ¶æ¥æ‰¾åˆ°åº”ç”¨ç¨‹åºä¸­æ‰€æœ‰åŸºäºæ³¨è§£çš„æ§åˆ¶å™¨ç±»ï¼Œä¸ºäº†ä¿è¯Springèƒ½æ‰¾åˆ°ä½ çš„æ§åˆ¶å™¨ï¼Œéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­å£°æ˜ç»„ä»¶æ‰«æã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- è‡ªåŠ¨æ‰«ææŒ‡å®šçš„åŒ…ï¼Œä¸‹é¢æ‰€æœ‰æ³¨è§£ç±»äº¤ç»™IOCå®¹å™¨ç®¡ç† --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;nuc.ss.controller&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure></li></ul><ul><li><p>å¢åŠ ä¸€ä¸ªControllerTest2ç±»ï¼Œä½¿ç”¨æ³¨è§£å®ç°ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//@Controlleræ³¨è§£çš„ç±»ä¼šè‡ªåŠ¨æ·»åŠ åˆ°Springä¸Šä¸‹æ–‡ä¸­</span><br><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ControllerTest2</span></span>&#123;<br><br>   <span class="hljs-comment">//æ˜ å°„è®¿é—®è·¯å¾„</span><br>   <span class="hljs-meta">@RequestMapping(&quot;/t2&quot;)</span><br>   <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">index</span><span class="hljs-params">(Model model)</span></span>&#123;<br>       <span class="hljs-comment">//Spring MVCä¼šè‡ªåŠ¨å®ä¾‹åŒ–ä¸€ä¸ªModelå¯¹è±¡ç”¨äºå‘è§†å›¾ä¸­ä¼ å€¼</span><br>       model.addAttribute(<span class="hljs-string">&quot;msg&quot;</span>, <span class="hljs-string">&quot;ControllerTest2&quot;</span>);<br>       <span class="hljs-comment">//è¿”å›è§†å›¾ä½ç½®</span><br>       <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;test&quot;</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><p><strong>å¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬çš„ä¸¤ä¸ªè¯·æ±‚éƒ½å¯ä»¥æŒ‡å‘ä¸€ä¸ªè§†å›¾(test)ï¼Œä½†æ˜¯é¡µé¢ç»“æœçš„ç»“æœæ˜¯ä¸ä¸€æ ·çš„ï¼Œä»è¿™é‡Œå¯ä»¥çœ‹å‡ºè§†å›¾æ˜¯è¢«å¤ç”¨çš„ï¼Œè€Œæ§åˆ¶å™¨ä¸è§†å›¾ä¹‹é—´æ˜¯å¼±å¶åˆå…³ç³»ã€‚</strong></p><p><strong>æ³¨è§£æ–¹å¼æ˜¯å¹³æ—¶ä½¿ç”¨çš„æœ€å¤šçš„æ–¹å¼ï¼</strong></p><h3 id="4-4-æ³¨è§£ä¸­çš„-RequestMapping"><a href="#4-4-æ³¨è§£ä¸­çš„-RequestMapping" class="headerlink" title="4.4 æ³¨è§£ä¸­çš„@RequestMapping"></a>4.4 æ³¨è§£ä¸­çš„@RequestMapping</h3><p><strong>@RequestMapping</strong></p><ul><li><p>@RequestMappingæ³¨è§£ç”¨äºæ˜ å°„urlåˆ°æ§åˆ¶å™¨ç±»æˆ–ä¸€ä¸ªç‰¹å®šçš„å¤„ç†ç¨‹åºæ–¹æ³•ã€‚å¯ç”¨äºç±»æˆ–æ–¹æ³•ä¸Šã€‚ç”¨äºç±»ä¸Šï¼Œè¡¨ç¤ºç±»ä¸­çš„æ‰€æœ‰å“åº”è¯·æ±‚çš„æ–¹æ³•éƒ½æ˜¯ä»¥è¯¥åœ°å€ä½œä¸ºçˆ¶è·¯å¾„ã€‚</p></li><li><p>ä¸ºäº†æµ‹è¯•ç»“è®ºæ›´åŠ å‡†ç¡®ï¼Œæˆ‘ä»¬å¯ä»¥åŠ ä¸Šä¸€ä¸ªé¡¹ç›®åæµ‹è¯• myweb</p></li><li><p>åªæ³¨è§£åœ¨æ–¹æ³•ä¸Šé¢</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestController</span> </span>&#123;<br>   <span class="hljs-meta">@RequestMapping(&quot;/h1&quot;)</span><br>   <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">test</span><span class="hljs-params">()</span></span>&#123;<br>       <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;test&quot;</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è®¿é—®è·¯å¾„ï¼š<a href="http://localhost:8080/">http://localhost:8080</a> / é¡¹ç›®å / h1</p></li></ul><ul><li><p>åŒæ—¶æ³¨è§£ç±»ä¸æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-meta">@RequestMapping(&quot;/admin&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestController</span> </span>&#123;<br>   <span class="hljs-meta">@RequestMapping(&quot;/h1&quot;)</span><br>   <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">test</span><span class="hljs-params">()</span></span>&#123;<br>       <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;test&quot;</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è®¿é—®è·¯å¾„ï¼š<a href="http://localhost:8080/">http://localhost:8080</a> / é¡¹ç›®å/ admin /h1 , éœ€è¦å…ˆæŒ‡å®šç±»çš„è·¯å¾„å†æŒ‡å®šæ–¹æ³•çš„è·¯å¾„ï¼›</p></li></ul><h3 id="4-5-RestFulé£æ ¼"><a href="#4-5-RestFulé£æ ¼" class="headerlink" title="4.5 RestFulé£æ ¼"></a>4.5 RestFulé£æ ¼</h3><p><strong>æ¦‚å¿µ</strong></p><p>Restfulå°±æ˜¯ä¸€ä¸ªèµ„æºå®šä½åŠèµ„æºæ“ä½œçš„é£æ ¼ã€‚ä¸æ˜¯æ ‡å‡†ä¹Ÿä¸æ˜¯åè®®ï¼Œåªæ˜¯ä¸€ç§é£æ ¼ã€‚åŸºäºè¿™ä¸ªé£æ ¼è®¾è®¡çš„è½¯ä»¶å¯ä»¥æ›´ç®€æ´ï¼Œæ›´æœ‰å±‚æ¬¡ï¼Œæ›´æ˜“äºå®ç°ç¼“å­˜ç­‰æœºåˆ¶ã€‚</p><p><strong>åŠŸèƒ½</strong></p><p>èµ„æºï¼šäº’è”ç½‘æ‰€æœ‰çš„äº‹ç‰©éƒ½å¯ä»¥è¢«æŠ½è±¡ä¸ºèµ„æº</p><p>èµ„æºæ“ä½œï¼šä½¿ç”¨POSTã€DELETEã€PUTã€GETï¼Œä½¿ç”¨ä¸åŒæ–¹æ³•å¯¹èµ„æºè¿›è¡Œæ“ä½œã€‚</p><p>åˆ†åˆ«å¯¹åº” æ·»åŠ ã€ åˆ é™¤ã€ä¿®æ”¹ã€æŸ¥è¯¢ã€‚</p><p><strong>ä¼ ç»Ÿæ–¹å¼æ“ä½œèµ„æº</strong> ï¼šé€šè¿‡ä¸åŒçš„å‚æ•°æ¥å®ç°ä¸åŒçš„æ•ˆæœï¼æ–¹æ³•å•ä¸€ï¼Œpost å’Œ get</p><p> <a href="http://127.0.0.1/item/queryItem.action?id=1">http://127.0.0.1/item/queryItem.action?id=1</a> æŸ¥è¯¢,GET</p><p> <a href="http://127.0.0.1/item/saveItem.action">http://127.0.0.1/item/saveItem.action</a> æ–°å¢,POST</p><p> <a href="http://127.0.0.1/item/updateItem.action">http://127.0.0.1/item/updateItem.action</a> æ›´æ–°,POST</p><p> <a href="http://127.0.0.1/item/deleteItem.action?id=1">http://127.0.0.1/item/deleteItem.action?id=1</a> åˆ é™¤,GETæˆ–POST</p><p><strong>ä½¿ç”¨RESTfulæ“ä½œèµ„æº</strong> ï¼šå¯ä»¥é€šè¿‡ä¸åŒçš„è¯·æ±‚æ–¹å¼æ¥å®ç°ä¸åŒçš„æ•ˆæœï¼å¦‚ä¸‹ï¼šè¯·æ±‚åœ°å€ä¸€æ ·ï¼Œä½†æ˜¯åŠŸèƒ½å¯ä»¥ä¸åŒï¼</p><p> <a href="http://127.0.0.1/item/1">http://127.0.0.1/item/1</a> æŸ¥è¯¢,GET</p><p> <a href="http://127.0.0.1/item">http://127.0.0.1/item</a> æ–°å¢,POST</p><p> <a href="http://127.0.0.1/item">http://127.0.0.1/item</a> æ›´æ–°,PUT</p><p> <a href="http://127.0.0.1/item/1">http://127.0.0.1/item/1</a> åˆ é™¤,DELETE</p><p><strong>å­¦ä¹ æµ‹è¯•</strong></p><ol><li><p>åœ¨æ–°å»ºä¸€ä¸ªç±» RestFulController</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RestFulController</span> </span>&#123;&#125;<br></code></pre></td></tr></table></figure></li><li><p>åœ¨Spring MVCä¸­å¯ä»¥ä½¿ç”¨ @PathVariable æ³¨è§£ï¼Œè®©æ–¹æ³•å‚æ•°çš„å€¼å¯¹åº”ç»‘å®šåˆ°ä¸€ä¸ªURIæ¨¡æ¿å˜é‡ä¸Šã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RestFulController</span> </span>&#123;<br><br>   <span class="hljs-comment">//æ˜ å°„è®¿é—®è·¯å¾„</span><br>   <span class="hljs-meta">@RequestMapping(&quot;/add/&#123;p1&#125;/&#123;p2&#125;&quot;)</span><br>   <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">index</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> <span class="hljs-keyword">int</span> p1, <span class="hljs-meta">@PathVariable</span> <span class="hljs-keyword">int</span> p2, Model model)</span></span>&#123;<br>       <br>       <span class="hljs-keyword">int</span> result = p1+p2;<br>       <span class="hljs-comment">//Spring MVCä¼šè‡ªåŠ¨å®ä¾‹åŒ–ä¸€ä¸ªModelå¯¹è±¡ç”¨äºå‘è§†å›¾ä¸­ä¼ å€¼</span><br>       model.addAttribute(<span class="hljs-string">&quot;msg&quot;</span>, <span class="hljs-string">&quot;ç»“æœï¼š&quot;</span>+result);<br>       <span class="hljs-comment">//è¿”å›è§†å›¾ä½ç½®</span><br>       <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;test&quot;</span>;<br>       &#125;<br></code></pre></td></tr></table></figure></li><li><p>æµ‹è¯•è¯·æ±‚æŸ¥çœ‹</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringMVC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/restful_test.png" alt="restfulé£æ ¼"></p></li><li><p>æ€è€ƒï¼šä½¿ç”¨è·¯å¾„å˜é‡çš„å¥½å¤„ï¼Ÿ</p><ul><li>ä½¿è·¯å¾„å˜å¾—æ›´åŠ ç®€æ´ï¼›</li><li>è·å¾—å‚æ•°æ›´åŠ æ–¹ä¾¿ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢ã€‚</li><li>é€šè¿‡è·¯å¾„å˜é‡çš„ç±»å‹å¯ä»¥çº¦æŸè®¿é—®å‚æ•°ï¼Œå¦‚æœç±»å‹ä¸ä¸€æ ·ï¼Œåˆ™è®¿é—®ä¸åˆ°å¯¹åº”çš„è¯·æ±‚æ–¹æ³•ï¼Œå¦‚è¿™é‡Œè®¿é—®æ˜¯çš„è·¯å¾„æ˜¯/add/1/aï¼Œåˆ™è·¯å¾„ä¸æ–¹æ³•ä¸åŒ¹é…ï¼Œè€Œä¸ä¼šæ˜¯å‚æ•°è½¬æ¢å¤±è´¥ã€‚</li></ul></li><li><p>æˆ‘ä»¬æ¥ä¿®æ”¹ä¸‹å¯¹åº”çš„å‚æ•°ç±»å‹ï¼Œå†æ¬¡æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//æ˜ å°„è®¿é—®è·¯å¾„</span><br><span class="hljs-meta">@RequestMapping(&quot;/add/&#123;p1&#125;/&#123;p2&#125;&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">index</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> <span class="hljs-keyword">int</span> p1, <span class="hljs-meta">@PathVariable</span> String p2, Model model)</span></span>&#123;<br><br>   String result = p1+p2;<br>   <span class="hljs-comment">//Spring MVCä¼šè‡ªåŠ¨å®ä¾‹åŒ–ä¸€ä¸ªModelå¯¹è±¡ç”¨äºå‘è§†å›¾ä¸­ä¼ å€¼</span><br>   model.addAttribute(<span class="hljs-string">&quot;msg&quot;</span>, <span class="hljs-string">&quot;ç»“æœï¼š&quot;</span>+result);<br>   <span class="hljs-comment">//è¿”å›è§†å›¾ä½ç½®</span><br>   <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;test&quot;</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringMVC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/restful_test2.png" alt="å†æ¬¡æµ‹è¯•"></p></li></ol><p><strong>ä½¿ç”¨methodå±æ€§æŒ‡å®šè¯·æ±‚ç±»å‹</strong></p><p>ç”¨äºçº¦æŸè¯·æ±‚çš„ç±»å‹ï¼Œå¯ä»¥æ”¶çª„è¯·æ±‚èŒƒå›´ã€‚æŒ‡å®šè¯·æ±‚è°“è¯çš„ç±»å‹å¦‚GET, POST, HEAD, OPTIONS, PUT, PATCH, DELETE, TRACEç­‰</p><p>æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ï¼š</p><ul><li><p>å¢åŠ ä¸€ä¸ªæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//æ˜ å°„è®¿é—®è·¯å¾„,å¿…é¡»æ˜¯POSTè¯·æ±‚</span><br><span class="hljs-meta">@RequestMapping(value = &quot;/hello&quot;,method = &#123;RequestMethod.POST&#125;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">index2</span><span class="hljs-params">(Model model)</span></span>&#123;<br>   model.addAttribute(<span class="hljs-string">&quot;msg&quot;</span>, <span class="hljs-string">&quot;hello!&quot;</span>);<br>   <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;test&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æˆ‘ä»¬ä½¿ç”¨æµè§ˆå™¨åœ°å€æ è¿›è¡Œè®¿é—®é»˜è®¤æ˜¯Getè¯·æ±‚ï¼Œä¼šæŠ¥é”™405ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringMVC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/restful_test3.png" alt="405é”™è¯¯"></p></li><li><p>å¦‚æœå°†POSTä¿®æ”¹ä¸ºGETåˆ™æ­£å¸¸äº†ï¼›</p></li></ul><p><strong>å°ç»“ï¼š</strong></p><p>Spring MVC çš„ @RequestMapping æ³¨è§£èƒ½å¤Ÿå¤„ç† HTTP è¯·æ±‚çš„æ–¹æ³•, æ¯”å¦‚ GET, PUT, POST, DELETE ä»¥åŠ PATCHã€‚</p><p><strong>æ‰€æœ‰çš„åœ°å€æ è¯·æ±‚é»˜è®¤éƒ½ä¼šæ˜¯ HTTP GET ç±»å‹çš„ã€‚</strong></p><p>æ–¹æ³•çº§åˆ«çš„æ³¨è§£å˜ä½“æœ‰å¦‚ä¸‹å‡ ä¸ªï¼šç»„åˆæ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@GetMapping</span><br><span class="hljs-meta">@PostMapping</span><br><span class="hljs-meta">@PutMapping</span><br><span class="hljs-meta">@DeleteMapping</span><br><span class="hljs-meta">@PatchMapping</span><br></code></pre></td></tr></table></figure><p>@GetMapping æ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼Œå¹³æ—¶ä½¿ç”¨çš„ä¼šæ¯”è¾ƒå¤šï¼</p><p>å®ƒæ‰€æ‰®æ¼”çš„æ˜¯ @RequestMapping(method =RequestMethod.GET) çš„ä¸€ä¸ªå¿«æ·æ–¹å¼ã€‚</p><p>æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@DeleteMapping(&quot;/add/&#123;a&#125;/&#123;b&#125;&quot;)</span><br><span class="hljs-comment">// è¿™é‡Œå®šä¹‰çš„aå’Œbå°±æ˜¯å‰ç«¯ä¼ çš„</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">test1</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> <span class="hljs-keyword">int</span> a,<span class="hljs-meta">@PathVariable</span> <span class="hljs-keyword">int</span> b, Model model)</span> </span>&#123;<br><br>    <span class="hljs-keyword">int</span> res = a + b;<br>    model.addAttribute(<span class="hljs-string">&quot;msg&quot;</span>,<span class="hljs-string">&quot;ç»“æœä¸º&quot;</span> + res);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;test&quot;</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="5ã€ç»“æœè·³è½¬æ–¹å¼"><a href="#5ã€ç»“æœè·³è½¬æ–¹å¼" class="headerlink" title="5ã€ç»“æœè·³è½¬æ–¹å¼"></a>5ã€ç»“æœè·³è½¬æ–¹å¼</h2><h3 id="5-1-ModelAndView"><a href="#5-1-ModelAndView" class="headerlink" title="5.1 ModelAndView"></a>5.1 ModelAndView</h3><p>è®¾ç½®ModelAndViewå¯¹è±¡ , æ ¹æ®viewçš„åç§° , å’Œè§†å›¾è§£æå™¨è·³åˆ°æŒ‡å®šçš„é¡µé¢ .</p><p>é¡µé¢ : {è§†å›¾è§£æå™¨å‰ç¼€} + viewName +{è§†å›¾è§£æå™¨åç¼€}</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- è§†å›¾è§£æå™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span></span><br><span class="hljs-tag">     <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;internalResourceViewResolver&quot;</span>&gt;</span><br>   <span class="hljs-comment">&lt;!-- å‰ç¼€ --&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;prefix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;/WEB-INF/jsp/&quot;</span> /&gt;</span><br>   <span class="hljs-comment">&lt;!-- åç¼€ --&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;suffix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;.jsp&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å¯¹åº”çš„controllerç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ControllerTest1</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Controller</span> </span>&#123;<br><br>   <span class="hljs-function"><span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title">handleRequest</span><span class="hljs-params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>       <span class="hljs-comment">//è¿”å›ä¸€ä¸ªæ¨¡å‹è§†å›¾å¯¹è±¡</span><br>       ModelAndView mv = <span class="hljs-keyword">new</span> ModelAndView();<br>       mv.addObject(<span class="hljs-string">&quot;msg&quot;</span>,<span class="hljs-string">&quot;ControllerTest1&quot;</span>);<br>       mv.setViewName(<span class="hljs-string">&quot;test&quot;</span>);<br>       <span class="hljs-keyword">return</span> mv;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-2-ServletAPI"><a href="#5-2-ServletAPI" class="headerlink" title="5.2 ServletAPI"></a>5.2 ServletAPI</h3><p>é€šè¿‡è®¾ç½®ServletAPI , ä¸éœ€è¦è§†å›¾è§£æå™¨ .</p><ol><li>é€šè¿‡HttpServletResponseè¿›è¡Œè¾“å‡º</li><li>é€šè¿‡HttpServletResponseå®ç°é‡å®šå‘</li><li>é€šè¿‡HttpServletResponseå®ç°è½¬å‘</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ResultGo</span> </span>&#123;<br><br>   <span class="hljs-meta">@RequestMapping(&quot;/result/t1&quot;)</span><br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test1</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse rsp)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>       rsp.getWriter().println(<span class="hljs-string">&quot;Hello,Spring BY servlet API&quot;</span>);<br>  &#125;<br><br>   <span class="hljs-meta">@RequestMapping(&quot;/result/t2&quot;)</span><br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test2</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse rsp)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>       rsp.sendRedirect(<span class="hljs-string">&quot;/index.jsp&quot;</span>);<br>  &#125;<br><br>   <span class="hljs-meta">@RequestMapping(&quot;/result/t3&quot;)</span><br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test3</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse rsp)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>       <span class="hljs-comment">//è½¬å‘</span><br>       req.setAttribute(<span class="hljs-string">&quot;msg&quot;</span>,<span class="hljs-string">&quot;/result/t3&quot;</span>);<br>       req.getRequestDispatcher(<span class="hljs-string">&quot;/WEB-INF/jsp/test.jsp&quot;</span>).forward(req,rsp);<br>  &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-3-SpringMVC"><a href="#5-3-SpringMVC" class="headerlink" title="5.3 SpringMVC"></a>5.3 SpringMVC</h3><p><strong>é€šè¿‡SpringMVCæ¥å®ç°è½¬å‘å’Œé‡å®šå‘ - æ— éœ€è§†å›¾è§£æå™¨ï¼›</strong></p><p>æµ‹è¯•å‰ï¼Œéœ€è¦å°†è§†å›¾è§£æå™¨æ³¨é‡Šæ‰</p><ul><li>é»˜è®¤ä¸ºforwardè½¬å‘ï¼ˆä¹Ÿå¯ä»¥åŠ ä¸Šï¼‰</li><li>redirectè½¬å‘éœ€ç‰¹åˆ«åŠ </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ResultSpringMVC</span> </span>&#123;<br>   <span class="hljs-meta">@RequestMapping(&quot;/rsm/t1&quot;)</span><br>   <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">test1</span><span class="hljs-params">()</span></span>&#123;<br>       <span class="hljs-comment">//è½¬å‘</span><br>       <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;/index.jsp&quot;</span>;<br>  &#125;<br><br>   <span class="hljs-meta">@RequestMapping(&quot;/rsm/t2&quot;)</span><br>   <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">test2</span><span class="hljs-params">()</span></span>&#123;<br>       <span class="hljs-comment">//è½¬å‘äºŒ</span><br>       <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;forward:/index.jsp&quot;</span>;<br>  &#125;<br><br>   <span class="hljs-meta">@RequestMapping(&quot;/rsm/t3&quot;)</span><br>   <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">test3</span><span class="hljs-params">()</span></span>&#123;<br>       <span class="hljs-comment">//é‡å®šå‘</span><br>       <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;redirect:/index.jsp&quot;</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>é€šè¿‡SpringMVCæ¥å®ç°è½¬å‘å’Œé‡å®šå‘ - æœ‰è§†å›¾è§£æå™¨ï¼›</strong></p><p>é‡å®šå‘ , ä¸éœ€è¦è§†å›¾è§£æå™¨ , æœ¬è´¨å°±æ˜¯é‡æ–°è¯·æ±‚ä¸€ä¸ªæ–°åœ°æ–¹å˜› , æ‰€ä»¥æ³¨æ„è·¯å¾„é—®é¢˜.</p><p>å¯ä»¥é‡å®šå‘åˆ°å¦å¤–ä¸€ä¸ªè¯·æ±‚å®ç° .</p><ul><li>é»˜è®¤ä¸ºforwardè½¬å‘ï¼ˆä¸å¯ä»¥åŠ ä¸Šï¼‰</li><li>redirectè½¬å‘éœ€ç‰¹åˆ«åŠ </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ResultSpringMVC2</span> </span>&#123;<br>   <span class="hljs-meta">@RequestMapping(&quot;/rsm2/t1&quot;)</span><br>   <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">test1</span><span class="hljs-params">()</span></span>&#123;<br>       <span class="hljs-comment">//è½¬å‘</span><br>       <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;test&quot;</span>;<br>  &#125;<br><br>   <span class="hljs-meta">@RequestMapping(&quot;/rsm2/t2&quot;)</span><br>   <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">test2</span><span class="hljs-params">()</span></span>&#123;<br>       <span class="hljs-comment">//é‡å®šå‘</span><br>       <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;redirect:/index.jsp&quot;</span>;<br>       <span class="hljs-comment">//return &quot;redirect:hello.do&quot;; //hello.doä¸ºå¦ä¸€ä¸ªè¯·æ±‚/</span><br>  &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="6ã€SpringMVCæ•°æ®å¤„ç†"><a href="#6ã€SpringMVCæ•°æ®å¤„ç†" class="headerlink" title="6ã€SpringMVCæ•°æ®å¤„ç†"></a>6ã€SpringMVCæ•°æ®å¤„ç†</h2><h3 id="6-1-å¤„ç†æäº¤æ•°æ®"><a href="#6-1-å¤„ç†æäº¤æ•°æ®" class="headerlink" title="6.1 å¤„ç†æäº¤æ•°æ®"></a>6.1 å¤„ç†æäº¤æ•°æ®</h3><h4 id="6-1-1-æäº¤çš„åŸŸåç§°å’Œå¤„ç†æ–¹æ³•çš„å‚æ•°åä¸€è‡´"><a href="#6-1-1-æäº¤çš„åŸŸåç§°å’Œå¤„ç†æ–¹æ³•çš„å‚æ•°åä¸€è‡´" class="headerlink" title="6.1.1 æäº¤çš„åŸŸåç§°å’Œå¤„ç†æ–¹æ³•çš„å‚æ•°åä¸€è‡´"></a>6.1.1 <strong>æäº¤çš„åŸŸåç§°å’Œå¤„ç†æ–¹æ³•çš„å‚æ•°åä¸€è‡´</strong></h4><p>æäº¤æ•°æ® : <a href="http://localhost:8080/hello?name=atroxQW">http://localhost:8080/hello?name=atroxQW</a></p><p>å¤„ç†æ–¹æ³•:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/hello&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">hello</span><span class="hljs-params">(String name)</span></span>&#123;<br>   System.out.println(name);<br>   <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;hello&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åå°è¾“å‡ºï¼šatroxQW</p><h4 id="6-1-2-æäº¤çš„åŸŸåç§°å’Œå¤„ç†æ–¹æ³•çš„å‚æ•°åä¸ä¸€è‡´"><a href="#6-1-2-æäº¤çš„åŸŸåç§°å’Œå¤„ç†æ–¹æ³•çš„å‚æ•°åä¸ä¸€è‡´" class="headerlink" title="6.1.2 æäº¤çš„åŸŸåç§°å’Œå¤„ç†æ–¹æ³•çš„å‚æ•°åä¸ä¸€è‡´"></a>6.1.2 <strong>æäº¤çš„åŸŸåç§°å’Œå¤„ç†æ–¹æ³•çš„å‚æ•°åä¸ä¸€è‡´</strong></h4><p>æäº¤æ•°æ®ï¼š<a href="http://localhost:8080/hello?username=atroxQW">http://localhost:8080/hello?username=atroxQW</a></p><p>å¤„ç†æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//@RequestParam(&quot;username&quot;) : usernameæäº¤çš„åŸŸçš„åç§° .</span><br><span class="hljs-meta">@RequestMapping(&quot;/hello&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">hello</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam(&quot;username&quot;)</span> String name)</span></span>&#123;<br>   System.out.println(name);<br>   <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;hello&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åå°è¾“å‡ºï¼šatroxQW</p><h4 id="6-1-3-æäº¤çš„æ˜¯ä¸€ä¸ªå¯¹è±¡"><a href="#6-1-3-æäº¤çš„æ˜¯ä¸€ä¸ªå¯¹è±¡" class="headerlink" title="6.1.3 æäº¤çš„æ˜¯ä¸€ä¸ªå¯¹è±¡"></a>6.1.3 <strong>æäº¤çš„æ˜¯ä¸€ä¸ªå¯¹è±¡</strong></h4><p>è¦æ±‚æäº¤çš„è¡¨å•åŸŸå’Œå¯¹è±¡çš„å±æ€§åä¸€è‡´ , å‚æ•°ä½¿ç”¨å¯¹è±¡å³å¯</p><ol><li><p>å®ä½“ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-meta">@NoArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> age;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æäº¤æ•°æ® : <a href="http://localhost:8080/mvc04/user?name=atroxQW&amp;id=1&amp;age=15">http://localhost:8080/mvc04/user?name=atroxQW&amp;id=1&amp;age=15</a></p></li><li><p>å¤„ç†æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@GetMapping(&quot;/t2&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">test2</span><span class="hljs-params">(User user)</span> </span>&#123;<br>    System.out.println(user);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;test&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åå°è¾“å‡º : User { id=1, name=â€˜atroxQWâ€™, age=15 }</p><p>è¯´æ˜ï¼šå¦‚æœä½¿ç”¨å¯¹è±¡çš„è¯ï¼Œå‰ç«¯ä¼ é€’çš„å‚æ•°åå’Œå¯¹è±¡åå¿…é¡»ä¸€è‡´ï¼Œå¦åˆ™å°±æ˜¯nullã€‚</p></li></ol><h3 id="6-2-æ•°æ®æ˜¾ç¤ºåˆ°å‰ç«¯"><a href="#6-2-æ•°æ®æ˜¾ç¤ºåˆ°å‰ç«¯" class="headerlink" title="6.2 æ•°æ®æ˜¾ç¤ºåˆ°å‰ç«¯"></a>6.2 æ•°æ®æ˜¾ç¤ºåˆ°å‰ç«¯</h3><h4 id="6-2-1-é€šè¿‡ModelAndView"><a href="#6-2-1-é€šè¿‡ModelAndView" class="headerlink" title="6.2.1  é€šè¿‡ModelAndView"></a>6.2.1  <strong>é€šè¿‡ModelAndView</strong></h4><p>æˆ‘ä»¬å‰é¢ä¸€ç›´éƒ½æ˜¯å¦‚æ­¤ . å°±ä¸è¿‡å¤šè§£é‡Š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ControllerTest1</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Controller</span> </span>&#123;<br><br>   <span class="hljs-function"><span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title">handleRequest</span><span class="hljs-params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>       <span class="hljs-comment">//è¿”å›ä¸€ä¸ªæ¨¡å‹è§†å›¾å¯¹è±¡</span><br>       ModelAndView mv = <span class="hljs-keyword">new</span> ModelAndView();<br>       mv.addObject(<span class="hljs-string">&quot;msg&quot;</span>,<span class="hljs-string">&quot;ControllerTest1&quot;</span>);<br>       mv.setViewName(<span class="hljs-string">&quot;test&quot;</span>);<br>       <span class="hljs-keyword">return</span> mv;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="6-2-2-é€šè¿‡ModelMap"><a href="#6-2-2-é€šè¿‡ModelMap" class="headerlink" title="6.2.2 é€šè¿‡ModelMap"></a>6.2.2 <strong>é€šè¿‡ModelMap</strong></h4><p>ModelMap</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/hello&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">hello</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam(&quot;username&quot;)</span> String name, ModelMap modelMap)</span></span>&#123;<br>   <span class="hljs-comment">//å°è£…è¦æ˜¾ç¤ºåˆ°è§†å›¾ä¸­çš„æ•°æ®</span><br>   <span class="hljs-comment">//ç›¸å½“äºreq.setAttribute(&quot;name&quot;,name);</span><br>   modelMap.addAttribute(<span class="hljs-string">&quot;name&quot;</span>,name);<br>   System.out.println(name);<br>   <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;hello&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="6-2-3-é€šè¿‡Model"><a href="#6-2-3-é€šè¿‡Model" class="headerlink" title="6.2.3 é€šè¿‡Model"></a>6.2.3 é€šè¿‡Model</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/ct2/hello&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">hello</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam(&quot;username&quot;)</span> String name, Model model)</span></span>&#123;<br>   <span class="hljs-comment">//å°è£…è¦æ˜¾ç¤ºåˆ°è§†å›¾ä¸­çš„æ•°æ®</span><br>   <span class="hljs-comment">//ç›¸å½“äºreq.setAttribute(&quot;name&quot;,name);</span><br>   model.addAttribute(<span class="hljs-string">&quot;msg&quot;</span>,name);<br>   System.out.println(name);<br>   <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;test&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="6-3-å¯¹æ¯”"><a href="#6-3-å¯¹æ¯”" class="headerlink" title="6.3 å¯¹æ¯”"></a>6.3 å¯¹æ¯”</h3><blockquote><p> Model åªæœ‰å¯¥å¯¥å‡ ä¸ªæ–¹æ³•åªé€‚åˆç”¨äºå‚¨å­˜æ•°æ®ï¼Œç®€åŒ–äº†æ–°æ‰‹å¯¹äºModelå¯¹è±¡çš„æ“ä½œå’Œç†è§£ï¼›<br>        ModelMap ç»§æ‰¿äº† LinkedMap ï¼Œé™¤äº†å®ç°äº†è‡ªèº«çš„ä¸€äº›æ–¹æ³•ï¼ŒåŒæ ·çš„ç»§æ‰¿ LinkedMap çš„æ–¹æ³•å’Œç‰¹æ€§ï¼›<br>        ModelAndView å¯ä»¥åœ¨å‚¨å­˜æ•°æ®çš„åŒæ—¶ï¼Œå¯ä»¥è¿›è¡Œè®¾ç½®è¿”å›çš„é€»è¾‘è§†å›¾ï¼Œè¿›è¡Œæ§åˆ¶å±•ç¤ºå±‚çš„è·³è½¬ã€‚</p></blockquote><h2 id="7ã€ä¹±ç é—®é¢˜"><a href="#7ã€ä¹±ç é—®é¢˜" class="headerlink" title="7ã€ä¹±ç é—®é¢˜"></a>7ã€ä¹±ç é—®é¢˜</h2><p>æµ‹è¯•æ­¥éª¤ï¼š</p><ol><li><p>æˆ‘ä»¬å¯ä»¥åœ¨é¦–é¡µç¼–å†™ä¸€ä¸ªæäº¤çš„è¡¨å•</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;form action=<span class="hljs-string">&quot;/e/t&quot;</span> method=<span class="hljs-string">&quot;post&quot;</span>&gt;<br>    &lt;input type=<span class="hljs-string">&quot;text&quot;</span> name=<span class="hljs-string">&quot;name&quot;</span>&gt;<br>    &lt;input type=<span class="hljs-string">&quot;submit&quot;</span>&gt;<br>&lt;/form&gt;<br></code></pre></td></tr></table></figure></li><li><p>åå°ç¼–å†™å¯¹åº”çš„å¤„ç†ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Encoding</span> </span>&#123;<br>    <span class="hljs-meta">@RequestMapping(&quot;/e/t&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">test</span><span class="hljs-params">(Model model,String name)</span></span>&#123;<br>        model.addAttribute(<span class="hljs-string">&quot;msg&quot;</span>,name); <span class="hljs-comment">//è·å–è¡¨å•æäº¤çš„å€¼</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;test&quot;</span>; <span class="hljs-comment">//è·³è½¬åˆ°testé¡µé¢æ˜¾ç¤ºè¾“å…¥çš„å€¼</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>è¾“å…¥ä¸­æ–‡æµ‹è¯•ï¼Œå‘ç°ä¹±ç </p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringMVC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/disorderly_code.png" alt="ä¹±ç é—®é¢˜"></p></li></ol><p>ä¸å¾—ä¸è¯´ï¼Œä¹±ç é—®é¢˜æ˜¯åœ¨æˆ‘ä»¬å¼€å‘ä¸­ååˆ†å¸¸è§çš„é—®é¢˜ï¼Œä¹Ÿæ˜¯è®©æˆ‘ä»¬ç¨‹åºçŒ¿æ¯”è¾ƒå¤´å¤§çš„é—®é¢˜ï¼</p><p>ä»¥å‰ä¹±ç é—®é¢˜é€šè¿‡è¿‡æ»¤å™¨è§£å†³ , è€ŒSpringMVCç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªè¿‡æ»¤å™¨ , å¯ä»¥åœ¨web.xmlä¸­é…ç½® .</p><p>ä¿®æ”¹äº†xmlæ–‡ä»¶éœ€è¦é‡å¯æœåŠ¡å™¨ï¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>encoding<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>encoding<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>utf-8<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>encoding<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼šè¿™é‡Œå†™/*ï¼Œå†™/çš„è¯è¿‡æ»¤ä¸äº†jspé¡µé¢ï¼Œä¸èƒ½è§£å†³ä¹±ç </p><p>ä½†æ˜¯æˆ‘ä»¬å‘ç° , æœ‰äº›æç«¯æƒ…å†µä¸‹.è¿™ä¸ªè¿‡æ»¤å™¨å¯¹getçš„æ”¯æŒä¸å¥½ .</p><p>å¤„ç†æ–¹æ³• :</p><ol><li><p>ä¿®æ”¹tomcaté…ç½®æ–‡ä»¶ ï¼šè®¾ç½®ç¼–ç ï¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">Connector</span> <span class="hljs-attr">URIEncoding</span>=<span class="hljs-string">&quot;utf-8&quot;</span> <span class="hljs-attr">port</span>=<span class="hljs-string">&quot;8080&quot;</span> <span class="hljs-attr">protocol</span>=<span class="hljs-string">&quot;HTTP/1.1&quot;</span></span><br><span class="hljs-tag">          <span class="hljs-attr">connectionTimeout</span>=<span class="hljs-string">&quot;20000&quot;</span></span><br><span class="hljs-tag">          <span class="hljs-attr">redirectPort</span>=<span class="hljs-string">&quot;8443&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>è‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼ˆä¸‡èƒ½è§£å†³ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.kuang.filter;<br><br><span class="hljs-keyword">import</span> javax.servlet.*;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequestWrapper;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.UnsupportedEncodingException;<br><span class="hljs-keyword">import</span> java.util.Map;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment">* è§£å†³getå’Œpostè¯·æ±‚ å…¨éƒ¨ä¹±ç çš„è¿‡æ»¤å™¨</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GenericEncodingFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Filter</span> </span>&#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span> </span>&#123;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doFilter</span><span class="hljs-params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException </span>&#123;<br>        <span class="hljs-comment">//å¤„ç†responseçš„å­—ç¬¦ç¼–ç </span><br>        HttpServletResponse myResponse=(HttpServletResponse) response;<br>        myResponse.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br><br>        <span class="hljs-comment">// è½¬å‹ä¸ºä¸åè®®ç›¸å…³å¯¹è±¡</span><br>        HttpServletRequest httpServletRequest = (HttpServletRequest) request;<br>        <span class="hljs-comment">// å¯¹requeståŒ…è£…å¢å¼º</span><br>        HttpServletRequest myrequest = <span class="hljs-keyword">new</span> MyRequest(httpServletRequest);<br>        chain.doFilter(myrequest, response);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">(FilterConfig filterConfig)</span> <span class="hljs-keyword">throws</span> ServletException </span>&#123;<br>    &#125;<br><br>&#125;<br><br><span class="hljs-comment">//è‡ªå®šä¹‰requestå¯¹è±¡ï¼ŒHttpServletRequestçš„åŒ…è£…ç±»</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyRequest</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServletRequestWrapper</span> </span>&#123;<br><br>    <span class="hljs-keyword">private</span> HttpServletRequest request;<br>    <span class="hljs-comment">//æ˜¯å¦ç¼–ç çš„æ ‡è®°</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> hasEncode;<br>    <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªå¯ä»¥ä¼ å…¥HttpServletRequestå¯¹è±¡çš„æ„é€ å‡½æ•°ï¼Œä»¥ä¾¿å¯¹å…¶è¿›è¡Œè£…é¥°</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MyRequest</span><span class="hljs-params">(HttpServletRequest request)</span> </span>&#123;<br>        <span class="hljs-keyword">super</span>(request);<span class="hljs-comment">// superå¿…é¡»å†™</span><br>        <span class="hljs-keyword">this</span>.request = request;<br>    &#125;<br><br>    <span class="hljs-comment">// å¯¹éœ€è¦å¢å¼ºæ–¹æ³• è¿›è¡Œè¦†ç›–</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Map <span class="hljs-title">getParameterMap</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-comment">// å…ˆè·å¾—è¯·æ±‚æ–¹å¼</span><br>        String method = request.getMethod();<br>        <span class="hljs-keyword">if</span> (method.equalsIgnoreCase(<span class="hljs-string">&quot;post&quot;</span>)) &#123;<br>            <span class="hljs-comment">// postè¯·æ±‚</span><br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-comment">// å¤„ç†postä¹±ç </span><br>                request.setCharacterEncoding(<span class="hljs-string">&quot;utf-8&quot;</span>);<br>                <span class="hljs-keyword">return</span> request.getParameterMap();<br>            &#125; <span class="hljs-keyword">catch</span> (UnsupportedEncodingException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (method.equalsIgnoreCase(<span class="hljs-string">&quot;get&quot;</span>)) &#123;<br>            <span class="hljs-comment">// getè¯·æ±‚</span><br>            Map&lt;String, String[]&gt; parameterMap = request.getParameterMap();<br>            <span class="hljs-keyword">if</span> (!hasEncode) &#123; <span class="hljs-comment">// ç¡®ä¿getæ‰‹åŠ¨ç¼–ç é€»è¾‘åªè¿è¡Œä¸€æ¬¡</span><br>                <span class="hljs-keyword">for</span> (String parameterName : parameterMap.keySet()) &#123;<br>                    String[] values = parameterMap.get(parameterName);<br>                    <span class="hljs-keyword">if</span> (values != <span class="hljs-keyword">null</span>) &#123;<br>                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; values.length; i++) &#123;<br>                            <span class="hljs-keyword">try</span> &#123;<br>                                <span class="hljs-comment">// å¤„ç†getä¹±ç </span><br>                                values[i] = <span class="hljs-keyword">new</span> String(values[i]<br>                                                       .getBytes(<span class="hljs-string">&quot;ISO-8859-1&quot;</span>), <span class="hljs-string">&quot;utf-8&quot;</span>);<br>                            &#125; <span class="hljs-keyword">catch</span> (UnsupportedEncodingException e) &#123;<br>                                e.printStackTrace();<br>                            &#125;<br>                        &#125;<br>                    &#125;<br>                &#125;<br>                hasEncode = <span class="hljs-keyword">true</span>;<br>            &#125;<br>            <span class="hljs-keyword">return</span> parameterMap;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">super</span>.getParameterMap();<br>    &#125;<br><br>    <span class="hljs-comment">//å–ä¸€ä¸ªå€¼</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getParameter</span><span class="hljs-params">(String name)</span> </span>&#123;<br>        Map&lt;String, String[]&gt; parameterMap = getParameterMap();<br>        String[] values = parameterMap.get(name);<br>        <span class="hljs-keyword">if</span> (values == <span class="hljs-keyword">null</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> values[<span class="hljs-number">0</span>]; <span class="hljs-comment">// å–å›å‚æ•°çš„ç¬¬ä¸€ä¸ªå€¼</span><br>    &#125;<br><br>    <span class="hljs-comment">//å–æ‰€æœ‰å€¼</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String[] getParameterValues(String name) &#123;<br>        Map&lt;String, String[]&gt; parameterMap = getParameterMap();<br>        String[] values = parameterMap.get(name);<br>        <span class="hljs-keyword">return</span> values;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒSpringMVCé»˜è®¤çš„ä¹±ç å¤„ç†å°±å·²ç»èƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³äº†ï¼</p><p><strong>ç„¶ååœ¨web.xmlä¸­é…ç½®è¿™ä¸ªè¿‡æ»¤å™¨å³å¯ï¼</strong></p><p>ä¹±ç é—®é¢˜ï¼Œéœ€è¦å¹³æ—¶å¤šæ³¨æ„ï¼Œåœ¨å°½å¯èƒ½èƒ½è®¾ç½®ç¼–ç çš„åœ°æ–¹ï¼Œéƒ½è®¾ç½®ä¸ºç»Ÿä¸€ç¼–ç  UTF-8ï¼</p></li></ol><h2 id="8ã€JSONäº¤äº’å¤„ç†"><a href="#8ã€JSONäº¤äº’å¤„ç†" class="headerlink" title="8ã€JSONäº¤äº’å¤„ç†"></a>8ã€JSONäº¤äº’å¤„ç†</h2><h3 id="8-1-ä»€ä¹ˆæ˜¯JSONï¼Ÿ"><a href="#8-1-ä»€ä¹ˆæ˜¯JSONï¼Ÿ" class="headerlink" title="8.1 ä»€ä¹ˆæ˜¯JSONï¼Ÿ"></a>8.1 ä»€ä¹ˆæ˜¯JSONï¼Ÿ</h3><ul><li>JSON(JavaScript Object Notation, JS å¯¹è±¡æ ‡è®°) æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œç›®å‰ä½¿ç”¨ç‰¹åˆ«å¹¿æ³›ã€‚</li><li>é‡‡ç”¨å®Œå…¨ç‹¬ç«‹äºç¼–ç¨‹è¯­è¨€çš„<strong>æ–‡æœ¬æ ¼å¼</strong>æ¥å­˜å‚¨å’Œè¡¨ç¤ºæ•°æ®ã€‚</li><li>ç®€æ´å’Œæ¸…æ™°çš„å±‚æ¬¡ç»“æ„ä½¿å¾— JSON æˆä¸ºç†æƒ³çš„æ•°æ®äº¤æ¢è¯­è¨€ã€‚</li><li>æ˜“äºäººé˜…è¯»å’Œç¼–å†™ï¼ŒåŒæ—¶ä¹Ÿæ˜“äºæœºå™¨è§£æå’Œç”Ÿæˆï¼Œå¹¶æœ‰æ•ˆåœ°æå‡ç½‘ç»œä¼ è¾“æ•ˆç‡ã€‚</li></ul><p>åœ¨ JavaScript è¯­è¨€ä¸­ï¼Œä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡ã€‚å› æ­¤ï¼Œä»»ä½•JavaScript æ”¯æŒçš„ç±»å‹éƒ½å¯ä»¥é€šè¿‡ JSON æ¥è¡¨ç¤ºï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ã€æ•°å­—ã€å¯¹è±¡ã€æ•°ç»„ç­‰ã€‚çœ‹çœ‹ä»–çš„è¦æ±‚å’Œè¯­æ³•æ ¼å¼ï¼š</p><ul><li>å¯¹è±¡è¡¨ç¤ºä¸ºé”®å€¼å¯¹ï¼Œæ•°æ®ç”±é€—å·åˆ†éš”</li><li>èŠ±æ‹¬å·ä¿å­˜å¯¹è±¡</li><li>æ–¹æ‹¬å·ä¿å­˜æ•°ç»„</li></ul><p><strong>JSON é”®å€¼å¯¹</strong>æ˜¯ç”¨æ¥ä¿å­˜ JavaScript å¯¹è±¡çš„ä¸€ç§æ–¹å¼ï¼Œå’Œ JavaScript å¯¹è±¡çš„å†™æ³•ä¹Ÿå¤§åŒå°å¼‚ï¼Œé”®/å€¼å¯¹ç»„åˆä¸­çš„é”®åå†™åœ¨å‰é¢å¹¶ç”¨åŒå¼•å· â€œâ€ åŒ…è£¹ï¼Œä½¿ç”¨å†’å· : åˆ†éš”ï¼Œç„¶åç´§æ¥ç€å€¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">&#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;QinJiang&quot;</span>&#125;<br>&#123;<span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-string">&quot;3&quot;</span>&#125;<br>&#123;<span class="hljs-string">&quot;sex&quot;</span>: <span class="hljs-string">&quot;ç”·&quot;</span>&#125;<br></code></pre></td></tr></table></figure><p>å¾ˆå¤šäººæä¸æ¸…æ¥š JSON å’Œ JavaScript å¯¹è±¡çš„å…³ç³»ï¼Œç”šè‡³è¿è°æ˜¯è°éƒ½ä¸æ¸…æ¥šã€‚å…¶å®ï¼Œå¯ä»¥è¿™ä¹ˆç†è§£ï¼š</p><p>JSON æ˜¯ JavaScript å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºæ³•ï¼Œå®ƒä½¿ç”¨æ–‡æœ¬è¡¨ç¤ºä¸€ä¸ª JS å¯¹è±¡çš„ä¿¡æ¯ï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> obj = &#123;<span class="hljs-attr">a</span>: <span class="hljs-string">&#x27;Hello&#x27;</span>, <span class="hljs-attr">b</span>: <span class="hljs-string">&#x27;World&#x27;</span>&#125;; <span class="hljs-comment">//è¿™æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ³¨æ„é”®åä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨å¼•å·åŒ…è£¹çš„</span><br><span class="hljs-keyword">var</span> json = <span class="hljs-string">&#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span>; <span class="hljs-comment">//è¿™æ˜¯ä¸€ä¸ª JSON å­—ç¬¦ä¸²ï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</span><br></code></pre></td></tr></table></figure><h3 id="8-2-JSONå’ŒJavaScriptå¯¹è±¡äº’è½¬"><a href="#8-2-JSONå’ŒJavaScriptå¯¹è±¡äº’è½¬" class="headerlink" title="8.2 JSONå’ŒJavaScriptå¯¹è±¡äº’è½¬"></a>8.2 JSONå’ŒJavaScriptå¯¹è±¡äº’è½¬</h3><p>è¦å®ç°ä»JSONå­—ç¬¦ä¸²è½¬æ¢ä¸ºJavaScript å¯¹è±¡ï¼Œä½¿ç”¨ JSON.parse() æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> obj = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-string">&#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span>);<br><span class="hljs-comment">//ç»“æœæ˜¯ &#123;a: &#x27;Hello&#x27;, b: &#x27;World&#x27;&#125;</span><br></code></pre></td></tr></table></figure><p>è¦å®ç°ä»JavaScript å¯¹è±¡è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²ï¼Œä½¿ç”¨ JSON.stringify() æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> json = <span class="hljs-built_in">JSON</span>.stringify(&#123;<span class="hljs-attr">a</span>: <span class="hljs-string">&#x27;Hello&#x27;</span>, <span class="hljs-attr">b</span>: <span class="hljs-string">&#x27;World&#x27;</span>&#125;);<br><span class="hljs-comment">//ç»“æœæ˜¯ &#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span><br></code></pre></td></tr></table></figure><p><strong>ä»£ç æµ‹è¯•</strong></p><ol><li><p>æ–°å»ºä¸€ä¸ªmodule ï¼Œspringmvc-05-json ï¼Œ æ·»åŠ webçš„æ”¯æŒ</p></li><li><p>åœ¨webç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª json-1.html ï¼Œ ç¼–å†™æµ‹è¯•å†…å®¹</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>JSON_ç§¦ç–†<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">   <span class="hljs-comment">//ç¼–å†™ä¸€ä¸ªjsçš„å¯¹è±¡</span></span><br><span class="javascript">   <span class="hljs-keyword">var</span> user = &#123;</span><br><span class="javascript">       name:<span class="hljs-string">&quot;ç§¦ç–†&quot;</span>,</span><br>       age:3,<br><span class="javascript">       sex:<span class="hljs-string">&quot;ç”·&quot;</span></span><br>  &#125;;<br><span class="javascript">   <span class="hljs-comment">//å°†jså¯¹è±¡è½¬æ¢æˆjsonå­—ç¬¦ä¸²</span></span><br><span class="javascript">   <span class="hljs-keyword">var</span> str = <span class="hljs-built_in">JSON</span>.stringify(user);</span><br><span class="javascript">   <span class="hljs-built_in">console</span>.log(str);</span><br>   <br><span class="javascript">   <span class="hljs-comment">//å°†jsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºjså¯¹è±¡</span></span><br><span class="javascript">   <span class="hljs-keyword">var</span> user2 = <span class="hljs-built_in">JSON</span>.parse(str);</span><br><span class="javascript">   <span class="hljs-built_in">console</span>.log(user2.age,user2.name,user2.sex);</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>åœ¨IDEAä¸­ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ï¼ŒæŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºï¼</p></li></ol><h3 id="8-3-Controllerè¿”å›JSONæ•°æ®"><a href="#8-3-Controllerè¿”å›JSONæ•°æ®" class="headerlink" title="8.3 Controllerè¿”å›JSONæ•°æ®"></a>8.3 Controllerè¿”å›JSONæ•°æ®</h3><ul><li><p>Jacksonåº”è¯¥æ˜¯ç›®å‰æ¯”è¾ƒå¥½çš„jsonè§£æå·¥å…·äº†</p></li><li><p>å½“ç„¶å·¥å…·ä¸æ­¢è¿™ä¸€ä¸ªï¼Œæ¯”å¦‚è¿˜æœ‰é˜¿é‡Œå·´å·´çš„ fastjson ç­‰ç­‰ã€‚</p></li><li><p>æˆ‘ä»¬è¿™é‡Œä½¿ç”¨Jacksonï¼Œä½¿ç”¨å®ƒéœ€è¦å¯¼å…¥å®ƒçš„jaråŒ…ï¼›</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-databind<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.9.8<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><ul><li><p>é…ç½®SpringMVCéœ€è¦çš„é…ç½®</p><ul><li><p>(web.xml)</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">web-app</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">version</span>=<span class="hljs-string">&quot;4.0&quot;</span>&gt;</span><br><br>   <span class="hljs-comment">&lt;!--1.æ³¨å†Œservlet--&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>SpringMVC<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>       <span class="hljs-comment">&lt;!--é€šè¿‡åˆå§‹åŒ–å‚æ•°æŒ‡å®šSpringMVCé…ç½®æ–‡ä»¶çš„ä½ç½®ï¼Œè¿›è¡Œå…³è”--&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>classpath:springmvc-servlet.xml<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>       <span class="hljs-comment">&lt;!-- å¯åŠ¨é¡ºåºï¼Œæ•°å­—è¶Šå°ï¼Œå¯åŠ¨è¶Šæ—© --&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">load-on-startup</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">load-on-startup</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><br>   <span class="hljs-comment">&lt;!--æ‰€æœ‰è¯·æ±‚éƒ½ä¼šè¢«springmvcæ‹¦æˆª --&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>SpringMVC<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br><br>   <span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>encoding<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>encoding<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>utf-8<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>encoding<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">web-app</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>springmvc-servlet.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">xmlns:mvc</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-tag"><span class="hljs-string">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-tag"><span class="hljs-string">       http://www.springframework.org/schema/context</span></span><br><span class="hljs-tag"><span class="hljs-string">       https://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class="hljs-tag"><span class="hljs-string">       http://www.springframework.org/schema/mvc</span></span><br><span class="hljs-tag"><span class="hljs-string">       https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span><br><br>   <span class="hljs-comment">&lt;!-- è‡ªåŠ¨æ‰«ææŒ‡å®šçš„åŒ…ï¼Œä¸‹é¢æ‰€æœ‰æ³¨è§£ç±»äº¤ç»™IOCå®¹å™¨ç®¡ç† --&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.kuang.controller&quot;</span>/&gt;</span><br><br>   <span class="hljs-comment">&lt;!-- è§†å›¾è§£æå™¨ --&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;internalResourceViewResolver&quot;</span>&gt;</span><br>       <span class="hljs-comment">&lt;!-- å‰ç¼€ --&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;prefix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;/WEB-INF/jsp/&quot;</span> /&gt;</span><br>       <span class="hljs-comment">&lt;!-- åç¼€ --&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;suffix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;.jsp&quot;</span> /&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul></li><li><p>æˆ‘ä»¬éšä¾¿ç¼–å†™ä¸€ä¸ªUserçš„å®ä½“ç±»ï¼Œç„¶åæˆ‘ä»¬å»ç¼–å†™æˆ‘ä»¬çš„æµ‹è¯•Controllerï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-meta">@NoArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> age;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>è¿™é‡Œæˆ‘ä»¬éœ€è¦ä¸¤ä¸ªæ–°ä¸œè¥¿ï¼Œä¸€ä¸ªæ˜¯@ResponseBodyï¼Œä¸€ä¸ªæ˜¯ObjectMapperå¯¹è±¡ï¼Œæˆ‘ä»¬çœ‹ä¸‹å…·ä½“çš„ç”¨æ³•</p><p>ç¼–å†™ä¸€ä¸ªControllerï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserController</span> </span>&#123;<br><span class="hljs-meta">@RequestMapping(&quot;/j1&quot;)</span><br>    <span class="hljs-meta">@ResponseBody</span><span class="hljs-comment">//ä»–å°±ä¸ä¼šèµ°è§†å›¾è§£æå™¨ï¼Œä¼šç›´æ¥è¿”å›ä¸€ä¸ª å­—ç¬¦ä¸²</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">json1</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> JsonProcessingException </span>&#123;<br>        <span class="hljs-comment">//jackson,ObjectMapper</span><br>        ObjectMapper mapper = <span class="hljs-keyword">new</span> ObjectMapper();<br><br>        <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªå¯¹è±¡</span><br>        User user = <span class="hljs-keyword">new</span> User(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;ç§¦ç–†ä¸€å·&quot;</span>, <span class="hljs-number">12</span>);<br>        <span class="hljs-comment">//System.out.println(user);</span><br><br>        String str = mapper.writeValueAsString(user);<br>        <span class="hljs-keyword">return</span> str;<br>    &#125;<br></code></pre></td></tr></table></figure></li><li><p>æ­¤æ—¶è¾“å…¥ä¸­æ–‡ä¼šäº§ç”Ÿä¹±ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//produces:æŒ‡å®šå“åº”ä½“è¿”å›ç±»å‹å’Œç¼–ç </span><br><span class="hljs-meta">@RequestMapping(value = &quot;/j1&quot;,produces = &quot;application/json;charset=utf-8&quot;)</span><br></code></pre></td></tr></table></figure></li><li><p>é…ç½®Tomcatï¼Œæµ‹è¯•</p></li></ul><h3 id="8-4-ä»£ç ä¼˜åŒ–"><a href="#8-4-ä»£ç ä¼˜åŒ–" class="headerlink" title="8.4 ä»£ç ä¼˜åŒ–"></a>8.4 ä»£ç ä¼˜åŒ–</h3><p><strong>ä¹±ç ç»Ÿä¸€è§£å†³</strong></p><p>ä¸Šä¸€ç§æ–¹æ³•æ¯”è¾ƒéº»çƒ¦ï¼Œå¦‚æœé¡¹ç›®ä¸­æœ‰è®¸å¤šè¯·æ±‚åˆ™æ¯ä¸€ä¸ªéƒ½è¦æ·»åŠ ï¼Œå¯ä»¥é€šè¿‡Springé…ç½®ç»Ÿä¸€æŒ‡å®šï¼Œè¿™æ ·å°±ä¸ç”¨æ¯æ¬¡éƒ½å»å¤„ç†äº†ï¼</p><p>æˆ‘ä»¬å¯ä»¥åœ¨springmvcçš„é…ç½®æ–‡ä»¶ä¸Šæ·»åŠ ä¸€æ®µæ¶ˆæ¯StringHttpMessageConverterè½¬æ¢é…ç½®ï¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mvc:annotation-driven</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">mvc:message-converters</span> <span class="hljs-attr">register-defaults</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>/&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;objectMapper&quot;</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean&quot;</span>&gt;</span><br>                   <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;failOnEmptyBeans&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;false&quot;</span>/&gt;</span><br>               <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>           <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">mvc:message-converters</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mvc:annotation-driven</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>è¿”å›jsonå­—ç¬¦ä¸²ç»Ÿä¸€è§£å†³</strong></p><ul><li><p>@ResponseBodyè§£å†³ï¼ˆæ¯ä¸ªæ–¹æ³•éƒ½å¾—åŠ ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼‰</p></li><li><p><strong>@RestController</strong>ï¼ˆç›´æ¥åŠ åˆ°ç±»ä¸Šå³å¯ï¼‰</p></li></ul><h3 id="8-5-æµ‹è¯•é›†åˆè¾“å‡º"><a href="#8-5-æµ‹è¯•é›†åˆè¾“å‡º" class="headerlink" title="8.5 æµ‹è¯•é›†åˆè¾“å‡º"></a>8.5 æµ‹è¯•é›†åˆè¾“å‡º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/j2&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">json2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> JsonProcessingException </span>&#123;<br><br>    <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªjacksonçš„å¯¹è±¡æ˜ å°„å™¨ï¼Œç”¨æ¥è§£ææ•°æ®</span><br>    ObjectMapper mapper = <span class="hljs-keyword">new</span> ObjectMapper();<br>    <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªå¯¹è±¡</span><br>   User user1 = <span class="hljs-keyword">new</span> User(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;ç§¦ç–†1å·&quot;</span>, <span class="hljs-number">12</span>);<br>    User user2 = <span class="hljs-keyword">new</span> User(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;ç§¦ç–†2å·&quot;</span>, <span class="hljs-number">12</span>);<br>    User user3 = <span class="hljs-keyword">new</span> User(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;ç§¦ç–†3å·&quot;</span>, <span class="hljs-number">12</span>);<br>    User user4 = <span class="hljs-keyword">new</span> User(<span class="hljs-number">4</span>, <span class="hljs-string">&quot;ç§¦ç–†4å·&quot;</span>, <span class="hljs-number">12</span>);<br>    User user5 = <span class="hljs-keyword">new</span> User(<span class="hljs-number">5</span>, <span class="hljs-string">&quot;ç§¦ç–†5å·&quot;</span>, <span class="hljs-number">12</span>);<br>    List&lt;User&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;User&gt;();<br>    list.add(user1);<br>    list.add(user2);<br>    list.add(user3);<br>    list.add(user4);<br>    list.add(user5);<br>    <span class="hljs-comment">//å°†æˆ‘ä»¬çš„å¯¹è±¡è§£ææˆä¸ºjsonæ ¼å¼</span><br>    String str = mapper.writeValueAsString(list);<br>    <span class="hljs-keyword">return</span> str;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œç»“æœ : ååˆ†å®Œç¾ï¼Œæ²¡æœ‰ä»»ä½•é—®é¢˜</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringMVC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/list_json.png" alt="è¾“å‡ºç»“æœ"></p><h3 id="8-6-è¾“å‡ºæ—¶é—´å¯¹è±¡"><a href="#8-6-è¾“å‡ºæ—¶é—´å¯¹è±¡" class="headerlink" title="8.6 è¾“å‡ºæ—¶é—´å¯¹è±¡"></a>8.6 è¾“å‡ºæ—¶é—´å¯¹è±¡</h3><ul><li><p>å¢åŠ ä¸€ä¸ªæ–°çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/j3&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">json3</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> JsonProcessingException </span>&#123;<br><br>   ObjectMapper mapper = <span class="hljs-keyword">new</span> ObjectMapper();<br><br>   <span class="hljs-comment">//åˆ›å»ºæ—¶é—´ä¸€ä¸ªå¯¹è±¡ï¼Œjava.util.Date</span><br>   Date date = <span class="hljs-keyword">new</span> Date();<br>   <span class="hljs-comment">//å°†æˆ‘ä»¬çš„å¯¹è±¡è§£ææˆä¸ºjsonæ ¼å¼</span><br>   String str = mapper.writeValueAsString(date);<br>   <span class="hljs-keyword">return</span> str;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><ul><li><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringMVC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/date_json1.png" alt="è¿è¡Œç»“æœ"></p></li></ul><ul><li>é»˜è®¤æ—¥æœŸæ ¼å¼ä¼šå˜æˆä¸€ä¸ªæ•°å­—ï¼Œæ˜¯1970å¹´1æœˆ1æ—¥åˆ°å½“å‰æ—¥æœŸçš„æ¯«ç§’æ•°ï¼</li><li>Jackson é»˜è®¤æ˜¯ä¼šæŠŠæ—¶é—´è½¬æˆtimestampså½¢å¼</li></ul><p><strong>è§£å†³æ–¹æ¡ˆï¼šå–æ¶ˆtimestampså½¢å¼ ï¼Œ è‡ªå®šä¹‰æ—¶é—´æ ¼å¼</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/j3&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">json4</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> JsonProcessingException </span>&#123;<br><br>    ObjectMapper mapper = <span class="hljs-keyword">new</span> ObjectMapper();<br><br>    <span class="hljs-comment">//ä¸ä½¿ç”¨æ—¶é—´æˆ³çš„æ–¹å¼</span><br>    mapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, <span class="hljs-keyword">false</span>);<br>    <span class="hljs-comment">//è‡ªå®šä¹‰æ—¥æœŸæ ¼å¼å¯¹è±¡</span><br>    SimpleDateFormat sdf = <span class="hljs-keyword">new</span> SimpleDateFormat(<span class="hljs-string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);<br>    <span class="hljs-comment">//æŒ‡å®šæ—¥æœŸæ ¼å¼</span><br>    mapper.setDateFormat(sdf);<br><br>    Date date = <span class="hljs-keyword">new</span> Date();<br>    String str = mapper.writeValueAsString(date);<br><br>    <span class="hljs-keyword">return</span> str;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œç»“æœ : æˆåŠŸçš„è¾“å‡ºäº†æ—¶é—´ï¼</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/SpringMVC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/date_json2.png" alt="è¿è¡Œç»“æœ"></p><p><strong>æŠ½å–ä¸ºå·¥å…·ç±»</strong></p><p><strong>å¦‚æœè¦ç»å¸¸ä½¿ç”¨çš„è¯ï¼Œè¿™æ ·æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›ä»£ç å°è£…åˆ°ä¸€ä¸ªå·¥å…·ç±»ä¸­ï¼›æˆ‘ä»¬å»ç¼–å†™ä¸‹</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JsonUtils</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">getJson</span><span class="hljs-params">(Object object)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> getJson(object,<span class="hljs-string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">getJson</span><span class="hljs-params">(Object object, String dateFormat)</span> </span>&#123;<br>        ObjectMapper mapper = <span class="hljs-keyword">new</span> ObjectMapper();<br><br>        <span class="hljs-comment">//javaè‡ªå®šä¹‰æ—¥æœŸæ ¼å¼</span><br>        SimpleDateFormat sdf = <span class="hljs-keyword">new</span> SimpleDateFormat(dateFormat);<br>        <span class="hljs-comment">//sdf.format(date)</span><br><br>        <span class="hljs-comment">// ä½¿ç”¨ObjectMapper æ¥æ ¼å¼åŒ–è¾“å‡º</span><br>        mapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS,<span class="hljs-keyword">false</span>);<br>        mapper.setDateFormat(sdf);<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//ObjectMapper,æ—¶é—´è§£æåçš„é»˜è®¤æ ¼å¼ä¸ºï¼šTImestamp.æ—¶é—´æˆ³</span><br>            <span class="hljs-keyword">return</span> mapper.writeValueAsString(object);<br>        &#125; <span class="hljs-keyword">catch</span> (JsonProcessingException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬ä½¿ç”¨å·¥å…·ç±»ï¼Œä»£ç å°±æ›´åŠ ç®€æ´äº†ï¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/j3&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">json3</span><span class="hljs-params">()</span></span>&#123;<br><br>    Date date = <span class="hljs-keyword">new</span> Date();<br><br>    <span class="hljs-keyword">return</span> JsonUtils.getJson(date,<span class="hljs-string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="8-7-FastJson"><a href="#8-7-FastJson" class="headerlink" title="8.7 FastJson"></a>8.7 FastJson</h3><ul><li>fastjson.jaræ˜¯é˜¿é‡Œå¼€å‘çš„ä¸€æ¬¾ä¸“é—¨ç”¨äºJavaå¼€å‘çš„åŒ…ï¼Œ</li><li>å®ç°jsonå¯¹è±¡ä¸JavaBeanå¯¹è±¡çš„è½¬æ¢ï¼Œ</li><li>å®ç°JavaBeanå¯¹è±¡ä¸jsonå­—ç¬¦ä¸²çš„è½¬æ¢ï¼Œ</li><li>å®ç°jsonå¯¹è±¡ä¸jsonå­—ç¬¦ä¸²çš„è½¬æ¢ã€‚</li><li>å®ç°jsonçš„è½¬æ¢æ–¹æ³•å¾ˆå¤šï¼Œæœ€åçš„å®ç°ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ã€‚</li></ul><p>fastjson çš„ pomä¾èµ–ï¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>fastjson<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.60<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>fastjson ä¸‰ä¸ªä¸»è¦çš„ç±»ï¼š</strong></p><ol><li><p>JSONObject ä»£è¡¨ json å¯¹è±¡</p><ul><li>JSONObjectå®ç°äº†Mapæ¥å£, çŒœæƒ³ JSONObjectåº•å±‚æ“ä½œæ˜¯ç”±Mapå®ç°çš„ã€‚</li><li>JSONObjectå¯¹åº”jsonå¯¹è±¡ï¼Œé€šè¿‡å„ç§å½¢å¼çš„get()æ–¹æ³•å¯ä»¥è·å–jsonå¯¹è±¡ä¸­çš„æ•°æ®ï¼Œä¹Ÿå¯åˆ©ç”¨è¯¸å¦‚size()ï¼ŒisEmpty()ç­‰æ–¹æ³•è·å–â€é”®ï¼šå€¼â€å¯¹çš„ä¸ªæ•°å’Œåˆ¤æ–­æ˜¯å¦ä¸ºç©ºã€‚å…¶æœ¬è´¨æ˜¯é€šè¿‡å®ç°Mapæ¥å£å¹¶è°ƒç”¨æ¥å£ä¸­çš„æ–¹æ³•å®Œæˆçš„ã€‚</li></ul></li><li><p>JSONArray ä»£è¡¨ json å¯¹è±¡æ•°ç»„</p><ul><li>å†…éƒ¨æ˜¯æœ‰Listæ¥å£ä¸­çš„æ–¹æ³•æ¥å®Œæˆæ“ä½œçš„ã€‚</li></ul></li><li><p>JSONä»£è¡¨ JSONObjectå’ŒJSONArrayçš„è½¬åŒ–</p><ul><li><p>JSONç±»æºç åˆ†æä¸ä½¿ç”¨</p></li><li><p>ä»”ç»†è§‚å¯Ÿè¿™äº›æ–¹æ³•ï¼Œä¸»è¦æ˜¯å®ç°jsonå¯¹è±¡ï¼Œjsonå¯¹è±¡æ•°ç»„ï¼Œjavabeanå¯¹è±¡ï¼Œjsonå­—ç¬¦ä¸²ä¹‹é—´çš„ç›¸äº’è½¬åŒ–ã€‚</p></li></ul></li></ol><p><strong>ä»£ç æµ‹è¯•ï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªFastJsonDemo ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/j4&quot;)</span><br>    <span class="hljs-comment">//@ResponseBody//ä»–å°±ä¸ä¼šèµ°è§†å›¾è§£æå™¨ï¼Œä¼šç›´æ¥è¿”å›ä¸€ä¸ª å­—ç¬¦ä¸²</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">json4</span><span class="hljs-params">()</span></span>&#123;<br><br>        User user1 = <span class="hljs-keyword">new</span> User(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;ç§¦ç–†1å·&quot;</span>, <span class="hljs-number">12</span>);<br>        User user2 = <span class="hljs-keyword">new</span> User(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;ç§¦ç–†2å·&quot;</span>, <span class="hljs-number">12</span>);<br>        User user3 = <span class="hljs-keyword">new</span> User(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;ç§¦ç–†3å·&quot;</span>, <span class="hljs-number">12</span>);<br>        User user4 = <span class="hljs-keyword">new</span> User(<span class="hljs-number">4</span>, <span class="hljs-string">&quot;ç§¦ç–†4å·&quot;</span>, <span class="hljs-number">12</span>);<br>        User user5 = <span class="hljs-keyword">new</span> User(<span class="hljs-number">5</span>, <span class="hljs-string">&quot;ç§¦ç–†5å·&quot;</span>, <span class="hljs-number">12</span>);<br><br>        List&lt;User&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;User&gt;();<br>        list.add(user1);<br>        list.add(user2);<br>        list.add(user3);<br>        list.add(user4);<br>        list.add(user5);<br><br>        System.out.println(<span class="hljs-string">&quot;*******Javaå¯¹è±¡ è½¬ JSONå­—ç¬¦ä¸²*******&quot;</span>);<br>        String str1 = JSON.toJSONString(list);<br>        System.out.println(<span class="hljs-string">&quot;JSON.toJSONString(list)==&gt;&quot;</span>+str1);<br>        String str2 = JSON.toJSONString(user1);<br>        System.out.println(<span class="hljs-string">&quot;JSON.toJSONString(user1)==&gt;&quot;</span>+str2);<br><br>        System.out.println(<span class="hljs-string">&quot;\n****** JSONå­—ç¬¦ä¸² è½¬ Javaå¯¹è±¡*******&quot;</span>);<br>        User jp_user1=JSON.parseObject(str2,User.class);<br>        System.out.println(<span class="hljs-string">&quot;JSON.parseObject(str2,User.class)==&gt;&quot;</span>+jp_user1);<br><br>        System.out.println(<span class="hljs-string">&quot;\n****** Javaå¯¹è±¡ è½¬ JSONå¯¹è±¡ ******&quot;</span>);<br>        JSONObject jsonObject1 = (JSONObject) JSON.toJSON(user2);<br>        System.out.println(<span class="hljs-string">&quot;(JSONObject) JSON.toJSON(user2)==&gt;&quot;</span>+jsonObject1.getString(<span class="hljs-string">&quot;name&quot;</span>));<br><br>        System.out.println(<span class="hljs-string">&quot;\n****** JSONå¯¹è±¡ è½¬ Javaå¯¹è±¡ ******&quot;</span>);<br>        User to_java_user = JSON.toJavaObject(jsonObject1, User.class);<br>        System.out.println(<span class="hljs-string">&quot;JSON.toJavaObject(jsonObject1, User.class)==&gt;&quot;</span>+to_java_user);<br><br>        <span class="hljs-keyword">return</span> JSON.toJSONString(list);<br>    &#125;<br></code></pre></td></tr></table></figure><p>è¿™ç§å·¥å…·ç±»ï¼Œæˆ‘ä»¬åªéœ€è¦æŒæ¡ä½¿ç”¨å°±å¥½äº†ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™åœ¨æ ¹æ®å…·ä½“çš„ä¸šåŠ¡å»æ‰¾å¯¹åº”çš„å®ç°ã€‚å’Œä»¥å‰çš„commons-ioé‚£ç§å·¥å…·åŒ…ä¸€æ ·ï¼Œæ‹¿æ¥ç”¨å°±å¥½äº†ï¼</p><h2 id="9ã€SSMæ•´åˆ"><a href="#9ã€SSMæ•´åˆ" class="headerlink" title="9ã€SSMæ•´åˆ"></a>9ã€SSMæ•´åˆ</h2><h3 id="9-1-ç¯å¢ƒ"><a href="#9-1-ç¯å¢ƒ" class="headerlink" title="9.1 ç¯å¢ƒ"></a>9.1 ç¯å¢ƒ</h3><ul><li><p>IDEA+Mysq8.0+Tomca9+Maven3.6</p></li><li><p>æ•°æ®åº“</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create database &#96;ssmbuild&#96;;<br>use &#96;ssmbuild&#96;;<br>CREATE TABLE &#96;books&#96; (<br>  &#96;bookId&#96; int(10) NOT NULL AUTO_INCREMENT COMMENT &#39;ä¹¦id&#39;,<br>  &#96;bookName&#96; varchar(100) NOT NULL COMMENT &#39;ä¹¦å&#39;,<br>  &#96;bookCounts&#96; int(11) NOT NULL COMMENT &#39;æ•°é‡&#39;,<br>  &#96;detail&#96; varchar(200) NOT NULL COMMENT &#39;æè¿°&#39;,<br>  KEY &#96;bookId&#96; (&#96;bookId&#96;)<br>) ENGINE&#x3D;InnoDB AUTO_INCREMENT&#x3D;4 DEFAULT CHARSET&#x3D;utf8<br></code></pre></td></tr></table></figure></li><li><p>å¯¼åŒ…</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--ä¾èµ–ï¼šjunitã€æ•°æ®åº“é©±åŠ¨ã€è¿æ¥æ± ã€servletã€jspã€mybatis-springã€spring--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--Junit--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--æ•°æ®åº“é©±åŠ¨--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.22<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--æ•°æ®åº“è¿æ¥æ± --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.mchange<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>c3p0<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.9.5.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--Servlet-JSP--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>servlet-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jsp-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jstl<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--MyBatis--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--Spring--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-webmvc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-jdbc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.1.9.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>     <span class="hljs-comment">&lt;!--lombok--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.18.10<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>Mavenèµ„æºè¿‡æ»¤è®¾ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--é™æ€èµ„æºå¯¼å‡ºé—®é¢˜--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><ol start="4"><li><p>å»ºç«‹åŸºæœ¬ç»“æ„å’Œé…ç½®æ¡†æ¶</p><ul><li><p>com.atrox.pojo</p></li><li><p>com.atrox.dao</p></li><li><p>com.atrox.service</p></li><li><p>com.atrox.controller</p></li><li><p>mybatis-config.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">configuration</span></span><br><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!--configurationæ ¸å¿ƒé…ç½®æ–‡ä»¶--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul></li></ol><h3 id="9-2-æ•´åˆmybatis"><a href="#9-2-æ•´åˆmybatis" class="headerlink" title="9.2 æ•´åˆmybatis"></a>9.2 æ•´åˆmybatis</h3><ul><li><p>æ·»åŠ å®ä½“ç±»Books</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-meta">@NoArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Books</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> bookID;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> bookName;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> bookCounts;<br>    <span class="hljs-keyword">private</span> String detail;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å†™BookMapperæ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">BookMapper</span> </span>&#123;<br><br>    <span class="hljs-comment">// å¢åŠ ä¸€æœ¬ä¹¦</span><br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">addBook</span><span class="hljs-params">(Books books)</span></span>;<br><br>    <span class="hljs-comment">// åˆ é™¤ä¸€æœ¬ä¹¦</span><br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">deleteBookById</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;bookId&quot;)</span> <span class="hljs-keyword">int</span> id)</span></span>;<br><br>    <span class="hljs-comment">// æ›´æ–°ä¸€æœ¬ä¹¦</span><br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">updateBook</span><span class="hljs-params">(Books books)</span></span>;<br><br>    <span class="hljs-comment">// æŸ¥è¯¢ä¸€æœ¬ä¹¦</span><br>    <span class="hljs-function">Books <span class="hljs-title">queryBookById</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;bookId&quot;)</span> <span class="hljs-keyword">int</span> id)</span></span>;<br><br>    <span class="hljs-comment">// æŸ¥è¯¢å…¨éƒ¨çš„ä¹¦</span><br>    <span class="hljs-function">List&lt;Books&gt; <span class="hljs-title">queryAllBook</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å†™BookMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span></span><br><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.atrox.dao.BookMapper&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;addBook&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;Books&quot;</span>&gt;</span><br>        insert into ssmbuild.books (bookName, bookCounts, detail)<br>        values (#&#123;bookName&#125;,#&#123;bookCounts&#125;,#&#123;detail&#125;)<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;deleteBookById&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;int&quot;</span>&gt;</span><br>        delete from ssmbuild.books where bookID = #&#123;bookId&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;updateBook&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;Books&quot;</span>&gt;</span><br>        update ssmbuild.books<br>        set bookName = #&#123;bookName&#125;,bookCounts = #&#123;bookCounts&#125;,detail=#&#123;detail&#125;<br>        where bookID = #&#123;bookID&#125;;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;queryBookById&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Books&quot;</span>&gt;</span><br>        select * from ssmbuild.books where bookID = #&#123;bookId&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;queryAllBook&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Books&quot;</span>&gt;</span><br>        select * from ssmbuild.books;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>åœ¨mybatis-config.xmlä¸­æ³¨å†Œmapper</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--é…ç½®æ•°æ®æºï¼Œäº¤ç»™Springå»åš--&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">typeAliases</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;com.atrox.pojo&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">typeAliases</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atrox.dao.BookMapper&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™serviceå±‚æ¥å£BookService</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">BookService</span> </span>&#123;<br><br>    <span class="hljs-comment">// å¢åŠ ä¸€æœ¬ä¹¦</span><br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">addBook</span><span class="hljs-params">(Books books)</span></span>;<br><br>    <span class="hljs-comment">// åˆ é™¤ä¸€æœ¬ä¹¦</span><br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">deleteBookById</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span></span>;<br><br>    <span class="hljs-comment">// æ›´æ–°ä¸€æœ¬ä¹¦</span><br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">updateBook</span><span class="hljs-params">(Books books)</span></span>;<br><br>    <span class="hljs-comment">// æŸ¥è¯¢ä¸€æœ¬ä¹¦</span><br>    <span class="hljs-function">Books <span class="hljs-title">queryBookById</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span></span>;<br><br>    <span class="hljs-comment">// æŸ¥è¯¢å…¨éƒ¨çš„ä¹¦</span><br>    <span class="hljs-function">List&lt;Books&gt; <span class="hljs-title">queryAllBook</span><span class="hljs-params">()</span></span>;<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™serviceå®ç°ç±»BookServiceImpl</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BookServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">BookService</span></span>&#123;<br><br>    <span class="hljs-comment">//serviceå±‚è°ƒç”¨daoå±‚ï¼šç»„åˆDao</span><br>    <span class="hljs-keyword">private</span> BookMapper bookMapper;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBookMapper</span><span class="hljs-params">(BookMapper bookMapper)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.bookMapper = bookMapper;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">addBook</span><span class="hljs-params">(Books books)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> bookMapper.addBook(books);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">deleteBookById</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> bookMapper.deleteBookById(id);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">updateBook</span><span class="hljs-params">(Books books)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> bookMapper.updateBook(books);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Books <span class="hljs-title">queryBookById</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> bookMapper.queryBookById(id);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Books&gt; <span class="hljs-title">queryAllBook</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> bookMapper.queryAllBook();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="9-3-æ•´åˆSpring"><a href="#9-3-æ•´åˆSpring" class="headerlink" title="9.3 æ•´åˆSpring"></a>9.3 æ•´åˆSpring</h3><ol><li><p><strong>spring-dao.xml</strong></p><ul><li>æ•°æ®åº“è¿æ¥è¯»å–db.propertiesæœ‰bugï¼Œæ‰‹åŠ¨è¿æ¥jdbcurlå’Œuser</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--1.å…³è”æ•°æ®åº“é…ç½®æ–‡ä»¶--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:property-placeholder</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;classpath:database.properties&quot;</span>/&gt;</span><br><br>    <span class="hljs-comment">&lt;!--2.è¿æ¥æ± </span><br><span class="hljs-comment">        dbcpï¼šåŠè‡ªåŠ¨åŒ–æ“ä½œï¼Œä¸èƒ½è‡ªåŠ¨è¿æ¥</span><br><span class="hljs-comment">        c3p0ï¼šè‡ªåŠ¨åŒ–æ“ä½œï¼ˆè‡ªåŠ¨åŒ–çš„åŠ è½½é…ç½®æ–‡ä»¶ï¼Œå¹¶ä¸”å¯ä»¥è‡ªåŠ¨é…ç½®åˆ°å¯¹è±¡ä¸­ï¼‰</span><br><span class="hljs-comment">        druidï¼š</span><br><span class="hljs-comment">        hikariï¼š</span><br><span class="hljs-comment">    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClass&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;jdbcUrl&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span><br><br>        <span class="hljs-comment">&lt;!--c3p0çš„ç§æœ‰å±æ€§--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;maxPoolSize&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;30&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;minPoolSize&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;10&quot;</span>/&gt;</span><br>        <span class="hljs-comment">&lt;!--å…³é—­è¿æ¥åï¼Œä¸è‡ªåŠ¨commit--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;autoCommitOnClose&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;false&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;checkoutTimeout&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;10000&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;acquireRetryAttempts&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;2&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--3.SqlSessionFactory--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span>/&gt;</span><br>        <span class="hljs-comment">&lt;!--ç»‘å®šmybatisçš„é…ç½®æ–‡ä»¶--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;configLocation&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;classpath:mybatis-config.xml&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--é…ç½®daoæ¥å£æ‰«æåŒ…ï¼ŒåŠ¨æ€åœ°å®ç°äº†daoæ¥å£å¯ä»¥æ³¨å…¥åˆ°Springå®¹å™¨ä¸­--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--æ³¨å…¥ SqlSessionFactory--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sqlSessionFactoryBeanName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span>/&gt;</span><br>        <span class="hljs-comment">&lt;!--è¦æ‰«æçš„daoåŒ…--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;basePackage&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.atrox.dao&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>spring-service.xml</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--1.æ‰«æserviceä¸‹çš„åŒ…--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.atrox.service&quot;</span>/&gt;</span><br><br>    <span class="hljs-comment">&lt;!--2.å°†æˆ‘ä»¬çš„æ‰€æœ‰ä¸šåŠ¡ç±»ï¼Œæ³¨å…¥åˆ°Springï¼Œå¯ä»¥é€šè¿‡é…ç½®ï¼Œæˆ–è€…æ³¨è§£å®ç°--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;BookServiceImpl&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atrox.service.BookServiceImpl&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;bookMapper&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;bookMapper&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--3.å£°æ˜å¼äº‹åŠ¡é…ç½®--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;transactionManager&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--æ³¨å…¥æ•°æ®æº--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--4.aopäº‹åŠ¡æ”¯æŒ--&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>application.xml</strong></p><ul><li>å¯¼å…¥å…¶ä»–é…ç½®è¿›springä¸»é…ç½®æ–‡ä»¶</li><li>å¦‚æœå…¨éƒ½åœ¨ä¸€ä¸ªspringé¡¹ç›®ä¸‹ï¼Œåˆ™ä¸ç”¨å¯¼å…¥</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:mvc</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-tag"><span class="hljs-string">        http://www.springframework.org/schema/context</span></span><br><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class="hljs-tag"><span class="hljs-string">       http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;classpath:spring-dao.xml&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;classpath:spring-service.xml&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;classpath:spring-mvc.xml&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ol><h3 id="9-4-æ•´åˆSpringMVC"><a href="#9-4-æ•´åˆSpringMVC" class="headerlink" title="9.4 æ•´åˆSpringMVC"></a>9.4 æ•´åˆSpringMVC</h3><ul><li><p>æ·»åŠ webé¡¹ç›®çš„æ”¯æŒ</p></li><li><p><strong>web.xml</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">web-app</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">version</span>=<span class="hljs-string">&quot;4.0&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--SpringMVCé…ç½®--&gt;</span><br>    <span class="hljs-comment">&lt;!--1 DispatcherServlet--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>springMVC<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>classpath:application.xml<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">load-on-startup</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">load-on-startup</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>springMVC<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--2 ä¹±ç è¿‡æ»¤--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>encodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>encoding<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>utf-8<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>encodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--3 Sessionè¿‡æœŸæ—¶é—´--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">session-config</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">session-timeout</span>&gt;</span>15<span class="hljs-tag">&lt;/<span class="hljs-name">session-timeout</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">session-config</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">web-app</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>spring-mvc.xml</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:mvc</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-tag"><span class="hljs-string">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-tag"><span class="hljs-string">       http://www.springframework.org/schema/mvc</span></span><br><span class="hljs-tag"><span class="hljs-string">       http://www.springframework.org/schema/mvc/spring-cache.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--1.æ³¨è§£é©±åŠ¨--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mvc:annotation-driven</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--2.é™æ€èµ„æºè¿‡æ»¤--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mvc:default-servlet-handler</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--3.æ‰«æåŒ…ï¼šcontroller--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.atrox.controller&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--4.è§†å›¾è§£æå™¨--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;prefix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;/WEB-INF/jsp/&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;suffix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;.jsp&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="10ã€AjaxæŠ€æœ¯"><a href="#10ã€AjaxæŠ€æœ¯" class="headerlink" title="10ã€AjaxæŠ€æœ¯"></a>10ã€AjaxæŠ€æœ¯</h2><h3 id="9-1ã€ç®€ä»‹"><a href="#9-1ã€ç®€ä»‹" class="headerlink" title="9.1ã€ç®€ä»‹"></a>9.1ã€ç®€ä»‹</h3><ul><li><strong>AJAX = Asynchronous JavaScript and XMLï¼ˆå¼‚æ­¥çš„ JavaScript å’Œ XMLï¼‰ã€‚</strong></li><li>AJAX æ˜¯ä¸€ç§åœ¨æ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿæ›´æ–°éƒ¨åˆ†ç½‘é¡µçš„æŠ€æœ¯ã€‚</li><li><strong>Ajax ä¸æ˜¯ä¸€ç§æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Œè€Œæ˜¯ä¸€ç§ç”¨äºåˆ›å»ºæ›´å¥½æ›´å¿«ä»¥åŠäº¤äº’æ€§æ›´å¼ºçš„Webåº”ç”¨ç¨‹åºçš„æŠ€æœ¯ã€‚</strong></li><li>åœ¨ 2005 å¹´ï¼ŒGoogle é€šè¿‡å…¶ Google Suggest ä½¿ AJAX å˜å¾—æµè¡Œèµ·æ¥ã€‚Google Suggestèƒ½å¤Ÿè‡ªåŠ¨å¸®ä½ å®Œæˆæœç´¢å•è¯ã€‚</li><li>Google Suggest ä½¿ç”¨ AJAX åˆ›é€ å‡ºåŠ¨æ€æ€§æå¼ºçš„ web ç•Œé¢ï¼šå½“æ‚¨åœ¨è°·æ­Œçš„æœç´¢æ¡†è¾“å…¥å…³é”®å­—æ—¶ï¼ŒJavaScript ä¼šæŠŠè¿™äº›å­—ç¬¦å‘é€åˆ°æœåŠ¡å™¨ï¼Œç„¶åæœåŠ¡å™¨ä¼šè¿”å›ä¸€ä¸ªæœç´¢å»ºè®®çš„åˆ—è¡¨ã€‚</li><li>å°±å’Œå›½å†…ç™¾åº¦çš„æœç´¢æ¡†ä¸€æ ·!</li><li>ä¼ ç»Ÿçš„ç½‘é¡µ(å³ä¸ç”¨ajaxæŠ€æœ¯çš„ç½‘é¡µ)ï¼Œæƒ³è¦æ›´æ–°å†…å®¹æˆ–è€…æäº¤ä¸€ä¸ªè¡¨å•ï¼Œéƒ½éœ€è¦é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µã€‚</li><li>ä½¿ç”¨ajaxæŠ€æœ¯çš„ç½‘é¡µï¼Œé€šè¿‡åœ¨åå°æœåŠ¡å™¨è¿›è¡Œå°‘é‡çš„æ•°æ®äº¤æ¢ï¼Œå°±å¯ä»¥å®ç°å¼‚æ­¥å±€éƒ¨æ›´æ–°ã€‚</li><li>ä½¿ç”¨Ajaxï¼Œç”¨æˆ·å¯ä»¥åˆ›å»ºæ¥è¿‘æœ¬åœ°æ¡Œé¢åº”ç”¨çš„ç›´æ¥ã€é«˜å¯ç”¨ã€æ›´ä¸°å¯Œã€æ›´åŠ¨æ€çš„Webç”¨æˆ·ç•Œé¢ã€‚</li></ul><h3 id="9-2-ä¼ªé€ Ajax"><a href="#9-2-ä¼ªé€ Ajax" class="headerlink" title="9.2 ä¼ªé€ Ajax"></a>9.2 ä¼ªé€ Ajax</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‰ç«¯çš„ä¸€ä¸ªæ ‡ç­¾æ¥ä¼ªé€ ä¸€ä¸ªajaxçš„æ ·å­ã€‚iframeæ ‡ç­¾</p><ol><li><p>æ–°å»ºä¸€ä¸ªmodule ï¼šsspringmvc-06-ajax ï¼Œ å¯¼å…¥webæ”¯æŒï¼</p></li><li><p>ç¼–å†™ä¸€ä¸ª ajax-frame.html ä½¿ç”¨ iframe æµ‹è¯•ï¼Œæ„Ÿå—ä¸‹æ•ˆæœ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>kuangshen<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">   <span class="hljs-built_in">window</span>.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;</span><br><span class="javascript">       <span class="hljs-keyword">var</span> myDate = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();</span><br><span class="javascript">       <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;currentTime&#x27;</span>).innerText = myDate.getTime();</span><br>  &#125;;<br><br><span class="javascript">   <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">LoadPage</span>(<span class="hljs-params"></span>)</span>&#123;</span><br><span class="javascript">       <span class="hljs-keyword">var</span> targetUrl =  <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;url&#x27;</span>).value;</span><br><span class="javascript">       <span class="hljs-built_in">console</span>.log(targetUrl);</span><br><span class="javascript">       <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;iframePosition&quot;</span>).src = targetUrl;</span><br>  &#125;<br><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¯·è¾“å…¥è¦åŠ è½½çš„åœ°å€ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;currentTime&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;https://www.baidu.com/&quot;</span>/&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æäº¤&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;LoadPage()&quot;</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>åŠ è½½é¡µé¢ä½ç½®ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;iframePosition&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 100%;height: 500px;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">iframe</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ol><p><strong>åˆ©ç”¨AJAXå¯ä»¥åšï¼š</strong></p><ul><li>æ³¨å†Œæ—¶ï¼Œè¾“å…¥ç”¨æˆ·åè‡ªåŠ¨æ£€æµ‹ç”¨æˆ·æ˜¯å¦å·²ç»å­˜åœ¨ã€‚</li><li>ç™»é™†æ—¶ï¼Œæç¤ºç”¨æˆ·åå¯†ç é”™è¯¯</li><li>åˆ é™¤æ•°æ®è¡Œæ—¶ï¼Œå°†è¡ŒIDå‘é€åˆ°åå°ï¼Œåå°åœ¨æ•°æ®åº“ä¸­åˆ é™¤ï¼Œæ•°æ®åº“åˆ é™¤æˆåŠŸåï¼Œåœ¨é¡µé¢DOMä¸­å°†æ•°æ®è¡Œä¹Ÿåˆ é™¤ã€‚</li><li>â€¦ç­‰ç­‰</li></ul><h3 id="9-3-jQuery-ajax"><a href="#9-3-jQuery-ajax" class="headerlink" title="9.3 jQuery.ajax"></a>9.3 jQuery.ajax</h3><ul><li>çº¯JSåŸç”Ÿå®ç°Ajaxæˆ‘ä»¬ä¸å»è®²è§£è¿™é‡Œï¼Œç›´æ¥ä½¿ç”¨jqueryæä¾›çš„ï¼Œæ–¹ä¾¿å­¦ä¹ å’Œä½¿ç”¨ï¼Œé¿å…é‡å¤é€ è½®å­ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å»äº†è§£ä¸‹JSåŸç”ŸXMLHttpRequest ï¼</li><li>Ajaxçš„æ ¸å¿ƒæ˜¯XMLHttpRequestå¯¹è±¡(XHR)ã€‚XHRä¸ºå‘æœåŠ¡å™¨å‘é€è¯·æ±‚å’Œè§£ææœåŠ¡å™¨å“åº”æä¾›äº†æ¥å£ã€‚èƒ½å¤Ÿä»¥å¼‚æ­¥æ–¹å¼ä»æœåŠ¡å™¨è·å–æ–°æ•°æ®ã€‚</li><li>jQuery æä¾›å¤šä¸ªä¸ AJAX æœ‰å…³çš„æ–¹æ³•ã€‚</li><li>é€šè¿‡ jQuery AJAX æ–¹æ³•ï¼Œæ‚¨èƒ½å¤Ÿä½¿ç”¨ HTTP Get å’Œ HTTP Post ä»è¿œç¨‹æœåŠ¡å™¨ä¸Šè¯·æ±‚æ–‡æœ¬ã€HTMLã€XML æˆ– JSON â€“ åŒæ—¶æ‚¨èƒ½å¤ŸæŠŠè¿™äº›å¤–éƒ¨æ•°æ®ç›´æ¥è½½å…¥ç½‘é¡µçš„è¢«é€‰å…ƒç´ ä¸­ã€‚</li><li>jQuery ä¸æ˜¯ç”Ÿäº§è€…ï¼Œè€Œæ˜¯å¤§è‡ªç„¶æ¬è¿å·¥ã€‚</li><li>jQuery Ajaxæœ¬è´¨å°±æ˜¯ XMLHttpRequestï¼Œå¯¹ä»–è¿›è¡Œäº†å°è£…ï¼Œæ–¹ä¾¿è°ƒç”¨ï¼</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs javascript">jQuery.ajax(...)<br>      éƒ¨åˆ†å‚æ•°ï¼š<br>            urlï¼šè¯·æ±‚åœ°å€<br>            typeï¼šè¯·æ±‚æ–¹å¼ï¼ŒGETã€POSTï¼ˆ<span class="hljs-number">1.9</span><span class="hljs-number">.0</span>ä¹‹åç”¨methodï¼‰<br>        headersï¼šè¯·æ±‚å¤´<br>            dataï¼šè¦å‘é€çš„æ•°æ®<br>    contentTypeï¼šå³å°†å‘é€ä¿¡æ¯è‡³æœåŠ¡å™¨çš„å†…å®¹ç¼–ç ç±»å‹(é»˜è®¤: <span class="hljs-string">&quot;application/x-www-form-urlencoded; charset=UTF-8&quot;</span>)<br>          <span class="hljs-keyword">async</span>ï¼šæ˜¯å¦å¼‚æ­¥<br>        timeoutï¼šè®¾ç½®è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰<br>      beforeSendï¼šå‘é€è¯·æ±‚å‰æ‰§è¡Œçš„å‡½æ•°(å…¨å±€)<br>        completeï¼šå®Œæˆä¹‹åæ‰§è¡Œçš„å›è°ƒå‡½æ•°(å…¨å±€)<br>        successï¼šæˆåŠŸä¹‹åæ‰§è¡Œçš„å›è°ƒå‡½æ•°(å…¨å±€)<br>          errorï¼šå¤±è´¥ä¹‹åæ‰§è¡Œçš„å›è°ƒå‡½æ•°(å…¨å±€)<br>        acceptsï¼šé€šè¿‡è¯·æ±‚å¤´å‘é€ç»™æœåŠ¡å™¨ï¼Œå‘Šè¯‰æœåŠ¡å™¨å½“å‰å®¢æˆ·ç«¯å¯æ¥å—çš„æ•°æ®ç±»å‹<br>        dataTypeï¼šå°†æœåŠ¡å™¨ç«¯è¿”å›çš„æ•°æ®è½¬æ¢æˆæŒ‡å®šç±»å‹<br>          <span class="hljs-string">&quot;xml&quot;</span>: å°†æœåŠ¡å™¨ç«¯è¿”å›çš„å†…å®¹è½¬æ¢æˆxmlæ ¼å¼<br>          <span class="hljs-string">&quot;text&quot;</span>: å°†æœåŠ¡å™¨ç«¯è¿”å›çš„å†…å®¹è½¬æ¢æˆæ™®é€šæ–‡æœ¬æ ¼å¼<br>          <span class="hljs-string">&quot;html&quot;</span>: å°†æœåŠ¡å™¨ç«¯è¿”å›çš„å†…å®¹è½¬æ¢æˆæ™®é€šæ–‡æœ¬æ ¼å¼ï¼Œåœ¨æ’å…¥DOMä¸­æ—¶ï¼Œå¦‚æœåŒ…å«JavaScriptæ ‡ç­¾ï¼Œåˆ™ä¼šå°è¯•å»æ‰§è¡Œã€‚<br>        <span class="hljs-string">&quot;script&quot;</span>: å°è¯•å°†è¿”å›å€¼å½“ä½œJavaScriptå»æ‰§è¡Œï¼Œç„¶åå†å°†æœåŠ¡å™¨ç«¯è¿”å›çš„å†…å®¹è½¬æ¢æˆæ™®é€šæ–‡æœ¬æ ¼å¼<br>          <span class="hljs-string">&quot;json&quot;</span>: å°†æœåŠ¡å™¨ç«¯è¿”å›çš„å†…å®¹è½¬æ¢æˆç›¸åº”çš„JavaScriptå¯¹è±¡<br>        <span class="hljs-string">&quot;jsonp&quot;</span>: JSONP æ ¼å¼ä½¿ç”¨ JSONP å½¢å¼è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¦‚ <span class="hljs-string">&quot;myurl?callback=?&quot;</span> jQuery å°†è‡ªåŠ¨æ›¿æ¢ ? ä¸ºæ­£ç¡®çš„å‡½æ•°åï¼Œä»¥æ‰§è¡Œå›è°ƒå‡½æ•°<br></code></pre></td></tr></table></figure><p><strong>æˆ‘ä»¬æ¥ä¸ªç®€å•çš„æµ‹è¯•ï¼Œä½¿ç”¨æœ€åŸå§‹çš„HttpServletResponseå¤„ç† , .æœ€ç®€å• , æœ€é€šç”¨</strong></p><ol><li><p>é…ç½®web.xml å’Œ springmvcçš„é…ç½®æ–‡ä»¶ã€è®°å¾—é™æ€èµ„æºè¿‡æ»¤å’Œæ³¨è§£é©±åŠ¨é…ç½®ä¸Šã€‘</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">xmlns:mvc</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-tag"><span class="hljs-string">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-tag"><span class="hljs-string">       http://www.springframework.org/schema/context</span></span><br><span class="hljs-tag"><span class="hljs-string">       https://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class="hljs-tag"><span class="hljs-string">       http://www.springframework.org/schema/mvc</span></span><br><span class="hljs-tag"><span class="hljs-string">       https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span><br><br>   <span class="hljs-comment">&lt;!-- è‡ªåŠ¨æ‰«ææŒ‡å®šçš„åŒ…ï¼Œä¸‹é¢æ‰€æœ‰æ³¨è§£ç±»äº¤ç»™IOCå®¹å™¨ç®¡ç† --&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.kuang.controller&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--é™æ€èµ„æºè¿‡æ»¤--&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">mvc:default-servlet-handler</span> /&gt;</span><br>    <span class="hljs-comment">&lt;!--æ³¨è§£é©±åŠ¨é…--&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">mvc:annotation-driven</span> /&gt;</span><br><br>   <span class="hljs-comment">&lt;!-- è§†å›¾è§£æå™¨ --&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;internalResourceViewResolver&quot;</span>&gt;</span><br>       <span class="hljs-comment">&lt;!-- å‰ç¼€ --&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;prefix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;/WEB-INF/jsp/&quot;</span> /&gt;</span><br>       <span class="hljs-comment">&lt;!-- åç¼€ --&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;suffix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;.jsp&quot;</span> /&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™ä¸€ä¸ªAjaxController</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AjaxController</span> </span>&#123;<br><br>   <span class="hljs-meta">@RequestMapping(&quot;/a1&quot;)</span><br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ajax1</span><span class="hljs-params">(String name , HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>       <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;admin&quot;</span>.equals(name))&#123;<br>           response.getWriter().print(<span class="hljs-string">&quot;true&quot;</span>);<br>      &#125;<span class="hljs-keyword">else</span>&#123;<br>           response.getWriter().print(<span class="hljs-string">&quot;false&quot;</span>);<br>      &#125;<br>  &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å¯¼å…¥jquery ï¼Œ å¯ä»¥ä½¿ç”¨åœ¨çº¿çš„CDN ï¼Œ ä¹Ÿå¯ä»¥ä¸‹è½½å¯¼å…¥</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;script src=&quot;https://code.jquery.com/jquery-3.1.1.min.js&quot;&gt;&lt;/script&gt;<br>&lt;script src=&quot;$&#123;pageContext.request.contextPath&#125;/statics/js/jquery-3.1.1.min.js&quot;&gt;&lt;/script&gt;<br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™index.jspæµ‹è¯•</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="hljs-string">&quot;java&quot;</span> %&gt;<br>&lt;html&gt;<br> &lt;head&gt;<br>   &lt;title&gt;$Title$&lt;/title&gt;<br>  &lt;%--&lt;script src=&quot;https://code.jquery.com/jquery-3.1.1.min.js&quot;&gt;&lt;/script&gt;--%&gt;<br>   &lt;script src=&quot;$&#123;pageContext.request.contextPath&#125;/statics/js/jquery-3.1.1.min.js&quot;&gt;&lt;/script&gt;<br>   &lt;script&gt;<br>       <span class="hljs-function">function <span class="hljs-title">a1</span><span class="hljs-params">()</span></span>&#123;<br>           $.post(&#123;<br>               url:<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/a1&quot;</span>,<br>               data:&#123;<span class="hljs-string">&#x27;name&#x27;</span>:$(<span class="hljs-string">&quot;#txtName&quot;</span>).val()&#125;,<br>               success:function (data,status) &#123;<br>                   alert(data);<br>                   alert(status);<br>              &#125;<br>          &#125;);<br>      &#125;<br>   &lt;/script&gt;<br> &lt;/head&gt;<br> &lt;body&gt;<br><br>&lt;%--onblurï¼šå¤±å»ç„¦ç‚¹è§¦å‘äº‹ä»¶--%&gt;<br>ç”¨æˆ·å:&lt;input type=<span class="hljs-string">&quot;text&quot;</span> id=<span class="hljs-string">&quot;txtName&quot;</span> onblur=<span class="hljs-string">&quot;a1()&quot;</span>/&gt;<br><br> &lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure></li><li><p>å¯åŠ¨tomcatæµ‹è¯•ï¼æ‰“å¼€æµè§ˆå™¨çš„æ§åˆ¶å°ï¼Œå½“æˆ‘ä»¬é¼ æ ‡ç¦»å¼€è¾“å…¥æ¡†çš„æ—¶å€™ï¼Œå¯ä»¥çœ‹åˆ°å‘å‡ºäº†ä¸€ä¸ªajaxçš„è¯·æ±‚ï¼æ˜¯åå°è¿”å›ç»™æˆ‘ä»¬çš„ç»“æœï¼æµ‹è¯•æˆåŠŸï¼</p></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>SpringMVC</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring5å­¦ä¹ ç¬”è®°</title>
    <link href="/posts/2021/01/02/Spring5%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <url>/posts/2021/01/02/Spring5%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="1ã€Spring"><a href="#1ã€Spring" class="headerlink" title="1ã€Spring"></a>1ã€Spring</h2><h3 id="1-1-ç®€ä»‹"><a href="#1-1-ç®€ä»‹" class="headerlink" title="1.1 ç®€ä»‹"></a>1.1 ç®€ä»‹</h3><p>Springæ„ä¸ºæ˜¥å¤©ï¼Œä¹Ÿæ„å‘³ç€å®ƒç»™è½¯ä»¶è¡Œä¸šå¸¦æ¥äº†æ˜¥å¤©ã€‚åœ¨2002å¹´ï¼ŒRod Johnsoné¦–æ¬¡æ¨å‡ºäº†Springæ¡†æ¶çš„é›å½¢â€”interface21ã€‚2004å¹´3æœˆ24æ—¥ï¼ŒSpringæ¡†æ¶ä»¥interface21æ¡†æ¶ä¸ºåŸºç¡€ï¼Œç»è¿‡é‡æ–°è®¾è®¡ï¼Œå¹¶ä¸æ–­ä¸°å¯Œå…¶å†…æ¶µï¼Œï¼Œæ­£å¼å‘å¸ƒäº†1.0æ­£å¼ç‰ˆã€‚</p><p>Rod Johnsonæ˜¯Spring Frameworkçš„åˆ›å§‹äººï¼Œæ³¨æ˜ä½œè€…ã€‚å¾ˆéš¾æƒ³è±¡Rod Johnsonçš„å­¦å†ï¼ŒçœŸçš„è®©å¥½å¤šäººå¤§åƒä¸€æƒŠï¼Œä»–æ˜¯æ‚‰å°¼å¤§å­¦çš„åšå£«ï¼Œç„¶è€Œä»–çš„ä¸“ä¸šå¹¶ä¸æ˜¯è®¡ç®—æœºï¼Œè€Œæ˜¯éŸ³ä¹å­¦ã€‚</p><p>Sppringçš„è®¾è®¡ç†å¿µæ˜¯ä½¿ç°æœ‰çš„æŠ€æœ¯æ›´åŠ å®¹æ˜“ä½¿ç”¨ï¼ŒSpringæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¤§æ‚çƒ©ï¼Œæ•´åˆäº†ç°æœ‰çš„æŠ€æœ¯æ¡†æ¶ã€‚</p><ul><li>SSHï¼šStruct2 + Spring + Hibernate</li><li>SSMï¼šSpringMVC + Spring + MyBatis</li></ul><p>Springå®˜ç½‘ï¼š<a href="Spring%E5%AE%98%E7%BD%91">https://spring.io</a></p><p>Springä¸‹è½½åœ°å€ï¼š<a href="https://repo.spring.io/release/org/springframework/spring/">https://repo.spring.io/release/org/springframework/spring/</a></p><p>Githubä¸‹è½½åœ°å€ï¼š<a href="https://github.com/spring-projects/spring-framework">https://github.com/spring-projects/spring-framework</a></p><p>Mavenä»“åº“ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-webmvc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-jdbc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="1-2-Springæ¡†æ¶çš„ä¼˜ç‚¹"><a href="#1-2-Springæ¡†æ¶çš„ä¼˜ç‚¹" class="headerlink" title="1.2 Springæ¡†æ¶çš„ä¼˜ç‚¹"></a>1.2 Springæ¡†æ¶çš„ä¼˜ç‚¹</h3><ul><li>Springæ˜¯ä¸€ä¸ªå¼€æºçš„å…è´¹çš„æ¡†æ¶ï¼ˆå®¹å™¨ï¼‰ï¼</li><li>Springæ˜¯ä¸€ä¸ª<strong>è½»é‡çº§çš„</strong>ã€<strong>éå…¥ä¾µå¼çš„</strong>æ¡†æ¶ã€‚</li><li>æœ€é‡è¦çš„ç‰¹æ€§ï¼š<strong>æ§åˆ¶åè½¬ï¼ˆIOCï¼‰ï¼Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰</strong></li><li>æ”¯æŒäº‹åŠ¡çš„å¤„ç†ï¼Œå¯¹æ¡†æ¶æ•´åˆçš„æ”¯æŒã€‚</li></ul><p><mark>æ€»ç»“ï¼šSpringå°±æ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ§åˆ¶åè½¬ï¼ˆIOCï¼‰å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰çš„æ¡†æ¶ã€‚</mark></p><h3 id="1-3-Springçš„ç»„æˆ"><a href="#1-3-Springçš„ç»„æˆ" class="headerlink" title="1.3 Springçš„ç»„æˆ"></a>1.3 Springçš„ç»„æˆ</h3><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Spring5å­¦ä¹ ç¬”è®°/Springä¸ƒå¤§æ¨¡å—.png" alt="Springä¸ƒå¤§æ¨¡å—" style="zoom:85%;"><h3 id="1-4-æ‹“å±•"><a href="#1-4-æ‹“å±•" class="headerlink" title="1.4 æ‹“å±•"></a>1.4 æ‹“å±•</h3><p>åœ¨Springçš„å®˜ç½‘æœ‰å¦‚ä¸‹çš„ä»‹ç»ï¼šç°ä»£åŒ–çš„javaå¼€å‘ï¼Œå°±æ˜¯åŸºäºSpringçš„å¼€å‘</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Spring5å­¦ä¹ ç¬”è®°/Spring_path.png" alt="Springå­¦ä¹ è·¯çº¿" style="zoom:75%;"><ul><li>Spring Boot<ul><li>ä¸€ä¸ªå¿«é€Ÿå¼€å‘çš„è„šæ‰‹æ¶</li><li>åŸºäºSpringBootå¯ä»¥å¿«é€Ÿçš„å¼€å‘å•ä¸ªå¾®æœåŠ¡</li><li>çº¦å®šå¤§äºé…ç½®</li></ul></li><li>Spring Cloud<ul><li>SpringCloudæ˜¯åŸºäºSpringBootå®ç°çš„</li></ul></li></ul><p>å› ä¸ºç°åœ¨å¤§å¤šæ•°å…¬å¸éƒ½åœ¨ä½¿ç”¨SpringBootè¿›è¡Œå¿«é€Ÿå¼€å‘ï¼Œå­¦ä¹ SpringBootçš„å‰æï¼Œéœ€è¦å®Œå…¨æŒæ¡Springæ¡†æ¶å’ŒSpringMVCã€‚æ˜¯æ‰¿ä¸Šå¯ä¸‹çš„ä½œç”¨ã€‚</p><p>Springåœ¨å‘å±•äº†å¤ªä¹…ä¹‹åï¼Œä¹Ÿä½“ç°äº†ä¸€äº›å¼Šç«¯ï¼Œè¿èƒŒäº†åŸæ¥çš„ä¸€äº›è®¾è®¡ç†å¿µã€‚é…ç½®ååˆ†ç¹çï¼Œäººç§°ï¼šé…ç½®åœ°åŸŸ</p><h2 id="2ã€IOCç†è®ºæ¨å¯¼"><a href="#2ã€IOCç†è®ºæ¨å¯¼" class="headerlink" title="2ã€IOCç†è®ºæ¨å¯¼"></a>2ã€IOCç†è®ºæ¨å¯¼</h2><h3 id="2-1-IOCåŸå‹"><a href="#2-1-IOCåŸå‹" class="headerlink" title="2.1 IOCåŸå‹"></a>2.1 IOCåŸå‹</h3><p>æˆ‘ä»¬ä¹‹å‰åšä¸šåŠ¡çš„æµç¨‹ï¼Œæ˜¯ä¸‹é¢è¿™æ ·çš„ï¼Œå…ˆç”¨æˆ‘ä»¬åŸæ¥çš„æ–¹å¼å†™ä¸€æ®µä»£ç </p><ol><li><p>UserDaoå±‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserDao</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getUser</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>UserDaoImplå®ç°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserDao</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getUser</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;è·å–ç”¨æˆ·æ•°æ®&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>UserServiceä¸šåŠ¡æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserService</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">getUser</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>UserServiceImplä¸šåŠ¡å®ç°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span></span>&#123;<br>    <span class="hljs-keyword">private</span> UserDao userDao = <span class="hljs-keyword">new</span> UserDaoImpl();<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getUser</span><span class="hljs-params">()</span> </span>&#123;<br>        userDao.getUser();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>é‚£è¿™æ˜¯æˆ‘ä»¬æœ€ç®€å•çš„å®ç°æ–¹å¼ï¼Œç°åœ¨ä¿®æ”¹ä¸€ä¸‹ï¼ŒæŠŠUserDaoçš„å®ç°ç±»å¢åŠ ä¸€ä¸ª</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoMysqlImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserDao</span></span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getUser</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Mysqlè·å–ç”¨æˆ·æ•°æ®ï¼&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ç´§æ¥ç€æŒ‰ç…§åŸæ¥çš„æ–¹å¼ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦å»ä½¿ç”¨MySqlçš„è¯ï¼Œæ—¢éœ€è¦åœ¨serviceå®ç°ç±»é‡Œé¢ä¿®æ”¹å¯¹åº”çš„ä»£ç ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span></span>&#123;<br>    <span class="hljs-keyword">private</span> UserDao userDao = <span class="hljs-keyword">new</span> UserDaoMysqlImpl();<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getUser</span><span class="hljs-params">()</span> </span>&#123;<br>        userDao.getUser();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>é‚£å¦‚æœè¿˜æœ‰Oracleå®ç°ç±»ã€SQLServerå®ç°ç±»ï¼Œè¦æ€ä¹ˆåŠï¼Ÿ</p></li></ol><p>åœ¨æˆ‘ä»¬ä¹‹å‰çš„ä¸šåŠ¡ä¸­ï¼Œç”¨æˆ·çš„éœ€æ±‚å¯èƒ½ä¼šå½±å“æˆ‘ä»¬åŸæ¥çš„ä»£ç ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚ï¼Œæ¥ä¿®æ”¹æºä»£ç ã€‚</p><p>å¦‚æœç¨‹åºä»£ç é‡å¾ˆå¤§ï¼Œä¿®æ”¹ä¸€æ¬¡çš„æˆæœ¬ä»£ä»·ååˆ†æ˜‚è´µã€‚</p><p>è¿™æ—¶å€™ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªSetæ¥å£å®ç°ï¼Œå·²ç»å‘ç”Ÿäº†é©å‘½æ€§çš„å˜åŒ–</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span></span>&#123;<br><br>    <span class="hljs-keyword">private</span> UserDao userDao;<br><br>    <span class="hljs-comment">// åˆ©ç”¨setè¿›è¡ŒåŠ¨æ€å®ç°å€¼çš„æ³¨å…¥</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUserDao</span><span class="hljs-params">(UserDao userDao)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.userDao = userDao;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getUser</span><span class="hljs-params">()</span> </span>&#123;<br>        userDao.getUser();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p>ä¹‹å‰ï¼Œç¨‹åºæ˜¯ä¸»åŠ¨åˆ›å»ºå¯¹è±¡ï¼Œæ§åˆ¶æƒåœ¨ç¨‹åºçŒ¿æ‰‹ä¸Šã€‚</p></li><li><p>ä½¿ç”¨äº†setæ³¨å…¥åï¼Œç¨‹åºä¸å†å…·æœ‰ä¸»åŠ¨æ€§ï¼Œè€Œæ˜¯å˜æˆäº†è¢«åŠ¨çš„æ¥å—å¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>    <span class="hljs-comment">// ç”¨æˆ·å®é™…è°ƒç”¨çš„æ˜¯ä¸šåŠ¡å±‚ï¼Œdaoå±‚ä»–ä¹ˆä¸éœ€è¦æ¥è§¦</span><br>    UserServiceImpl userService = <span class="hljs-keyword">new</span> UserServiceImpl();<br>    <span class="hljs-comment">// æ§åˆ¶åè½¬ï¼Œè¢«åŠ¨æ¥å—</span><br>    userService.setUserDao(<span class="hljs-keyword">new</span> UserDaoMysqlImpl());<br>    userService.getUser();<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><p>è¿™ç§æ€æƒ³ï¼Œä»æœ¬è´¨ä¸Šè§£å†³äº†é—®é¢˜ï¼Œæˆ‘ä»¬ç¨‹åºçŒ¿ä¸ç”¨å†å»ç®¡ç†å¯¹è±¡çš„åˆ›å»ºäº†ã€‚<strong>ç³»ç»Ÿçš„è€¦åˆæ€§å¤§å¤§é™ä½</strong>ï¼Œç¨‹åºçŒ¿å¯ä»¥æ›´åŠ ä¸“æ³¨ä¸šåŠ¡çš„å®ç°ï¼Œè¿™å°±æ˜¯IOCâ€”æ§åˆ¶åè½¬çš„åŸå‹ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Spring5å­¦ä¹ ç¬”è®°/IOCå›¾è§£.png" alt="IOCåŸç†å›¾è§£" style="zoom:75%;"><h3 id="2-2-IOCæœ¬è´¨"><a href="#2-2-IOCæœ¬è´¨" class="headerlink" title="2.2 IOCæœ¬è´¨"></a>2.2 IOCæœ¬è´¨</h3><p>æ§åˆ¶åè½¬IoC(Inversion of Control)ï¼Œæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼ŒDI(ä¾èµ–æ³¨å…¥)æ˜¯å®ç°IoCçš„ä¸€ç§æ–¹æ³•ï¼Œä¹Ÿæœ‰äººè®¤ä¸ºDIåªæ˜¯IoCçš„å¦ä¸€ç§è¯´æ³•ã€‚æ²¡æœ‰IoCçš„ç¨‹åºä¸­ , æˆ‘ä»¬ä½¿ç”¨é¢å‘å¯¹è±¡ç¼–ç¨‹ , å¯¹è±¡çš„åˆ›å»ºä¸å¯¹è±¡é—´çš„ä¾èµ–å…³ç³»å®Œå…¨ç¡¬ç¼–ç åœ¨ç¨‹åºä¸­ï¼Œå¯¹è±¡çš„åˆ›å»ºç”±ç¨‹åºè‡ªå·±æ§åˆ¶ï¼Œæ§åˆ¶åè½¬åå°†å¯¹è±¡çš„åˆ›å»ºè½¬ç§»ç»™ç¬¬ä¸‰æ–¹ï¼Œä¸ªäººè®¤ä¸ºæ‰€è°“æ§åˆ¶åè½¬å°±æ˜¯ï¼šè·å¾—ä¾èµ–å¯¹è±¡çš„æ–¹å¼åè½¬äº†</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Spring5å­¦ä¹ ç¬”è®°/IOC_pro.png" alt="IOCçš„ä½œç”¨" style="zoom:80%;"><p>é‡‡ç”¨XMLæ–¹å¼é…ç½®Beançš„æ—¶å€™ï¼ŒBeançš„å®šä¹‰ä¿¡æ¯æ˜¯å’Œå®ç°åˆ†ç¦»çš„ï¼Œè€Œé‡‡ç”¨æ³¨è§£çš„æ–¹å¼å¯ä»¥æŠŠä¸¤è€…åˆä¸ºä¸€ä½“ï¼ŒBeançš„å®šä¹‰ä¿¡æ¯ç›´æ¥ä»¥æ³¨è§£çš„å½¢å¼å®šä¹‰åœ¨å®ç°ç±»ä¸­ï¼Œä»è€Œè¾¾åˆ°äº†é›¶é…ç½®çš„ç›®çš„ã€‚</p><p><strong>æ§åˆ¶åè½¬æ˜¯ä¸€ç§é€šè¿‡æè¿°ï¼ˆXMLæˆ–æ³¨è§£ï¼‰å¹¶é€šè¿‡ç¬¬ä¸‰æ–¹å»ç”Ÿäº§æˆ–è·å–ç‰¹å®šå¯¹è±¡çš„æ–¹å¼ã€‚åœ¨Springä¸­å®ç°æ§åˆ¶åè½¬çš„æ˜¯IoCå®¹å™¨ï¼Œå…¶å®ç°æ–¹æ³•æ˜¯ä¾èµ–æ³¨å…¥ï¼ˆDependency Injection,DIï¼‰ã€‚</strong></p><h2 id="3ã€helloSpring"><a href="#3ã€helloSpring" class="headerlink" title="3ã€helloSpring"></a>3ã€helloSpring</h2><p>ä¸‹é¢ï¼Œæˆ‘ä»¬è¿›è¡Œç¬¬ä¸€ä¸ªSpringç¨‹åºçš„ç¼–å†™ã€‚</p><h3 id="3-1-å¯¼å…¥jaråŒ…"><a href="#3-1-å¯¼å…¥jaråŒ…" class="headerlink" title="3.1 å¯¼å…¥jaråŒ…"></a>3.1 å¯¼å…¥jaråŒ…</h3><p>åœ¨mavené¡¹ç›®çš„pom.xmlä¸­å¯¼å…¥ç›¸å…³çš„ä¾èµ–</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;dependencies&gt;<br>    &lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;<br>    &lt;version&gt;5.3.2&lt;/version&gt;<br>    &lt;/dependency&gt;<br>    &lt;/dependencies&gt;<br></code></pre></td></tr></table></figure><h3 id="3-2-ç¼–å†™demo"><a href="#3-2-ç¼–å†™demo" class="headerlink" title="3.2 ç¼–å†™demo"></a>3.2 ç¼–å†™demo</h3><ol><li><p>ç¼–å†™ä¸€ä¸ªHelloå®ä½“ç±»ï¼Œè¿™é‡Œå¿…é¡»è¦æœ‰getæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Hello</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> String str;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getStr</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> str;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setStr</span><span class="hljs-params">(String str)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.str = str;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Hello&#123;&quot;</span> +<br>            <span class="hljs-string">&quot;str=&#x27;&quot;</span> + str + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>            <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™æˆ‘ä»¬çš„springæ–‡ä»¶ï¼Œè¿™é‡Œæˆ‘ä»¬å‘½åä¸ºbeans.xmlæ”¾åœ¨resourcesç›®å½•ä¸‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-tag"><span class="hljs-string">        http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--ä½¿ç”¨Springæ¥åˆ›å»ºå¯¹è±¡ï¼Œåœ¨Springä¸­è¿™äº›éƒ½æˆç§°ä¸ºBean</span><br><span class="hljs-comment">    ç±»å‹ å˜é‡å = new ç±»å‹();</span><br><span class="hljs-comment">    Hello hello = new Hello();</span><br><span class="hljs-comment">    id = å˜é‡å</span><br><span class="hljs-comment">    class = new çš„å¯¹è±¡</span><br><span class="hljs-comment">    properties ç›¸å½“äºç»™å¯¹è±¡çš„å±æ€§è®¾ç½®ä¸€ä¸ªå€¼</span><br><span class="hljs-comment">    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;hello&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atrox.pojo.Hello&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;str&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Spring&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>æœ€åè¿›è¡Œæµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyTest</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        <span class="hljs-comment">// è·å–Springçš„ä¸Šä¸‹æ–‡å¯¹è±¡</span><br>        ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;beans.xml&quot;</span>);<br>        <span class="hljs-comment">// æˆ‘ä»¬çš„å¯¹è±¡ç°åœ¨éƒ½åœ¨Springä¸­ç®¡ç†äº†ã€‚æˆ‘ä»¬è¦ä½¿ç”¨ï¼Œç›´æ¥å»å–å‡ºæ¥å°±å¯ä»¥äº†</span><br>        Hello hello = (Hello) context.getBean(<span class="hljs-string">&quot;hello&quot;</span>);<br>        System.out.println(hello.toString());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æµ‹è¯•ç»“æœ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">Hello&#123;str=<span class="hljs-string">&#x27;Spring&#x27;</span>&#125;<br></code></pre></td></tr></table></figure></li></ol><h3 id="3-3-ä¼˜åŒ–2-1"><a href="#3-3-ä¼˜åŒ–2-1" class="headerlink" title="3.3 ä¼˜åŒ–2.1"></a>3.3 ä¼˜åŒ–2.1</h3><p>æˆ‘ä»¬å¯¹2.1ä¸­å‡ºç°çš„é—®é¢˜ï¼Œå¯ä»¥åšä¸€äº›ä¼˜åŒ–</p><p>åœ¨beans.xmlä¸­æ–°å»ºç”¨æˆ·å¯èƒ½ä¼šç”¨åˆ°çš„å¯¹è±¡ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;mysqlImpl&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atrox.dao.UserDaoMysqlImpl&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;oracleImpl&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atrox.dao.UserDaoOracleImpl&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;UserServiceImpl&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atrox.service.UserServiceImpl&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--ref:å¼•ç”¨Springå®¹å™¨ä¸­åˆ›å»ºå¥½çš„å¯¹è±¡</span><br><span class="hljs-comment">        valueï¼šå…·ä½“çš„å€¼ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;mysqlImpl&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œï¼Œæˆ‘ä»¬å…ˆæŠŠç”¨æˆ·å¯èƒ½ä¼šé€‰æ‹©çš„mysqImplã€oracleImplçš„å¯¹è±¡å…ˆåˆ›å»ºå‡ºæ¥ï¼Œç„¶åæ–°å»ºUserServiceImplçš„å¯¹è±¡ï¼Œå› ä¸ºUserServiceçš„userDaoæ˜¯<strong>åˆ©ç”¨setå®ç°åŠ¨æ€æ³¨å…¥çš„</strong>ï¼Œæ‰€ä»¥å¯ä»¥ç»™å®ƒè®¾ç½®å±æ€§çš„å€¼ï¼Œè¿™é‡Œç”¨refï¼Œå¯ä»¥ç›´æ¥é¥®ç”¨Springå®¹å™¨ä¸­åˆ›å»ºå¥½çš„å¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span></span>&#123;<br><br>    <span class="hljs-keyword">private</span> UserDao userDao;<br><br>    <span class="hljs-comment">// åˆ©ç”¨setè¿›è¡ŒåŠ¨æ€å®ç°å€¼çš„æ³¨å…¥</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUserDao</span><span class="hljs-params">(UserDao userDao)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.userDao = userDao;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getUser</span><span class="hljs-params">()</span> </span>&#123;<br>        userDao.getUser();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æœ€åï¼Œæˆ‘ä»¬è¿›è¡Œæµ‹è¯•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br><br>    <span class="hljs-comment">// è·å–ApplicationContext:æ‹¿åˆ°Springçš„å®¹å™¨</span><br>    ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;beans.xml&quot;</span>);<br><br>    <span class="hljs-comment">// å®¹å™¨åœ¨æ‰‹ï¼Œå¤©ä¸‹æˆ‘æœ‰ã€‚éœ€è¦ä»€ä¹ˆï¼Œå°±ç›´æ¥getä»€ä¹ˆ</span><br><br>    UserServiceImpl userServiceImpl = (UserServiceImpl) context.getBean(<span class="hljs-string">&quot;UserServiceImpl&quot;</span>);<br><br>    userServiceImpl.getUser();<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-4-æ€è€ƒé—®é¢˜"><a href="#3-4-æ€è€ƒé—®é¢˜" class="headerlink" title="3.4 æ€è€ƒé—®é¢˜"></a>3.4 æ€è€ƒé—®é¢˜</h3><ul><li><p>Hello å¯¹è±¡æ˜¯è°åˆ›å»ºçš„ ?</p><p>hello å¯¹è±¡æ˜¯ç”±Springåˆ›å»ºçš„</p></li><li><p>Hello å¯¹è±¡çš„å±æ€§æ˜¯æ€ä¹ˆè®¾ç½®çš„ ?</p><p>hello å¯¹è±¡çš„å±æ€§æ˜¯ç”±Springå®¹å™¨è®¾ç½®çš„</p></li></ul><p>è¿™ä¸ªè¿‡ç¨‹å°±å«æ§åˆ¶åè½¬ :</p><ul><li>æ§åˆ¶ : è°æ¥æ§åˆ¶å¯¹è±¡çš„åˆ›å»º , ä¼ ç»Ÿåº”ç”¨ç¨‹åºçš„å¯¹è±¡æ˜¯ç”±ç¨‹åºæœ¬èº«æ§åˆ¶åˆ›å»ºçš„ , ä½¿ç”¨Springå , å¯¹è±¡æ˜¯ç”±Springæ¥åˆ›å»ºçš„</li><li>åè½¬ : ç¨‹åºæœ¬èº«ä¸åˆ›å»ºå¯¹è±¡ , è€Œå˜æˆè¢«åŠ¨çš„æ¥æ”¶å¯¹è±¡</li><li>ä¾èµ–æ³¨å…¥ : å°±æ˜¯åˆ©ç”¨setæ–¹æ³•æ¥è¿›è¡Œæ³¨å…¥çš„.</li></ul><p>IOCæ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œç”±ä¸»åŠ¨çš„ç¼–ç¨‹å˜æˆè¢«åŠ¨çš„æ¥æ”¶</p><p>å¯ä»¥é€šè¿‡new ClassPathXmlApplicationContextå»æµè§ˆä¸€ä¸‹åº•å±‚æºç </p><p>**OK , åˆ°äº†ç°åœ¨ , æˆ‘ä»¬å½»åº•ä¸ç”¨å†ç¨‹åºä¸­å»æ”¹åŠ¨äº† , è¦å®ç°ä¸åŒçš„æ“ä½œ , åªéœ€è¦åœ¨xmlé…ç½®æ–‡ä»¶ä¸­è¿›è¡Œä¿®æ”¹ , æ‰€è°“çš„IoC,ä¸€å¥è¯æå®š : å¯¹è±¡ç”±Spring æ¥åˆ›å»º , ç®¡ç† , è£…é… ! **</p><h2 id="4ã€IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼"><a href="#4ã€IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼" class="headerlink" title="4ã€IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼"></a>4ã€IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼</h2><ol><li><p>ä½¿ç”¨æ— å‚æ„é€ åˆ›å»ºå¯¹è±¡ï¼Œé»˜è®¤çš„å®ç°æ–¹å¼ã€‚</p></li><li><p>å‡è®¾æˆ‘ä»¬éœ€è¦ä½¿ç”¨æœ‰å‚æ„é€ åˆ›å»ºå¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢å‡ ç§æ–¹å¼ï¼š</p><ul><li><p>ä¸‹æ ‡èµ‹å€¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--ç¬¬ä¸€ç§æ–¹å¼ï¼Œä¸‹æ ‡èµ‹å€¼--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atrox.pojo.User&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;ä¹”å¨&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>é€šè¿‡ç±»å‹åˆ›å»º</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--ç¬¬äºŒç§æ–¹å¼ï¼Œé€šè¿‡ç±»å‹åˆ›å»º--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atrox.pojo.User&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;java.lang.String&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;ä¹”å¨&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>ç›´æ¥é€šè¿‡å‚æ•°åæ¥è®¾ç½®</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;!--ç¬¬ä¸‰ç§æ–¹å¼ï¼Œç›´æ¥é€šè¿‡å‚æ•°åæ¥è®¾ç½®--&gt;<br>&lt;bean id=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;com.atrox.pojo.User&quot;</span><br>    &lt;constructor-arg name=<span class="hljs-string">&quot;name&quot;</span> value=<span class="hljs-string">&quot;ä¹”å¨&quot;</span>/&gt;<br>&lt;/bean&gt;<br></code></pre></td></tr></table></figure></li></ul><p>æ€»ç»“ï¼šåœ¨é…ç½®æ–‡ä»¶åŠ è½½çš„æ—¶å€™ï¼Œ<strong>å®¹å™¨ä¸­ç®¡ç†çš„å¯¹è±¡å°±å·²ç»å…¨éƒ¨åˆå§‹åŒ–äº†</strong>ã€‚</p></li></ol><h2 id="5ã€Springé…ç½®è¯´æ˜"><a href="#5ã€Springé…ç½®è¯´æ˜" class="headerlink" title="5ã€Springé…ç½®è¯´æ˜"></a>5ã€Springé…ç½®è¯´æ˜</h2><h3 id="5-1-åˆ«å"><a href="#5-1-åˆ«å" class="headerlink" title="5.1 åˆ«å"></a>5.1 åˆ«å</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--åˆ«åï¼Œå¦‚æœæ·»åŠ äº†åˆ«åï¼Œå¯ä»¥ä½¿ç”¨åˆ«åè·å–åˆ°å¯¹è±¡getBean(åˆ«å)--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">alias</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">&quot;userNew&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure><h3 id="5-2-Beançš„é…ç½®"><a href="#5-2-Beançš„é…ç½®" class="headerlink" title="5.2 Beançš„é…ç½®"></a>5.2 Beançš„é…ç½®</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    idï¼šbeançš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä¹Ÿå°±æ˜¯ç›¸å½“äºæˆ‘ä»¬çš„å¯¹è±¡å</span><br><span class="hljs-comment">    classï¼šbeanå¯¹è±¡æ‰€å¯¹åº”çš„å…¨é™å®šåï¼šæŠ¥å+ç±»å‹</span><br><span class="hljs-comment">    nameï¼šä¹Ÿæ˜¯åˆ«åï¼Œè€Œä¸”nameå¯ä»¥åŒæ—¶å–å¤šä¸ªåˆ«åï¼Œå¯ä»¥é€šè¿‡é€—å·ã€ç©ºæ ¼ã€åˆ†å·åˆ†éš”</span><br><span class="hljs-comment">    --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userT&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atrox.pojo.UserT&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;userTT,u2 u3&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;ä¹”å¨&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="5-3-import"><a href="#5-3-import" class="headerlink" title="5.3 import"></a>5.3 import</h3><p>è¿™ä¸ªimportï¼Œä¸€èˆ¬ç”¨äºå›¢é˜Ÿå¼€å‘ä½¿ç”¨ï¼Œä»–å¯ä»¥å°†å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œå¯¼å…¥åˆå¹¶ä¸ºä¸€ä¸ªã€‚</p><p>å‡è®¾ï¼Œç°åœ¨é¡¹ç›®ä¸­æœ‰å¤šä¸ªäººå¼€å‘ï¼Œè¿™ä¸‰ä¸ªäººè´Ÿè´£ä¸åŒçš„ç±»å¼€å‘ï¼Œä¸åŒçš„ç±»éœ€è¦æ³¨å†Œåœ¨ä¸åŒçš„beanä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨importå°†æ‰€æœ‰äººçš„beans.xmlåˆå¹¶ä¸ºä¸€ä¸ªæ€»çš„ã€‚</p><ul><li>å¼ ä¸‰</li><li>æå››</li><li>ç‹äº”</li></ul><p>æ€»çš„applicationContext.xmlï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;beans.xml&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;beans2.xml&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;beans3.xml&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure><h2 id="6ã€DIä¾èµ–æ³¨å…¥"><a href="#6ã€DIä¾èµ–æ³¨å…¥" class="headerlink" title="6ã€DIä¾èµ–æ³¨å…¥"></a>6ã€DIä¾èµ–æ³¨å…¥</h2><h3 id="6-1-æ„é€ å™¨æ³¨å…¥"><a href="#6-1-æ„é€ å™¨æ³¨å…¥" class="headerlink" title="6.1 æ„é€ å™¨æ³¨å…¥"></a>6.1 æ„é€ å™¨æ³¨å…¥</h3><p>å‰é¢å·²ç»è®²è¿‡äº†</p><h3 id="6-2-Setæ–¹å¼æ³¨å…¥ã€é‡ç‚¹ã€‘"><a href="#6-2-Setæ–¹å¼æ³¨å…¥ã€é‡ç‚¹ã€‘" class="headerlink" title="6.2 Setæ–¹å¼æ³¨å…¥ã€é‡ç‚¹ã€‘"></a>6.2 Setæ–¹å¼æ³¨å…¥ã€é‡ç‚¹ã€‘</h3><ul><li>ä¾èµ–æ³¨å…¥ï¼šSetæ³¨å…¥<ul><li>ä¾èµ–ï¼šbeanå¯¹è±¡çš„åˆ›å»ºä¾èµ–äºå®¹å™¨</li><li>æ³¨å…¥ï¼šbeanå¯¹è±¡ä¸­çš„æ‰€æœ‰å±æ€§ç”±å®¹å™¨æ¥æ³¨å…¥</li></ul></li></ul><p>ã€ç¯å¢ƒæ­å»ºã€‘</p><ol><li><p>å¤æ‚ç±»å‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Address</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> String address;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getAddress</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> address;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setAddress</span><span class="hljs-params">(String address)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.address = address;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>çœŸå®æµ‹è¯•å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> </span>&#123;<br><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> Address address;<br>    <span class="hljs-keyword">private</span> String[] books;<br>    <span class="hljs-keyword">private</span> List&lt;String&gt; hobbys;<br>    <span class="hljs-keyword">private</span> Map&lt;String,String&gt; card;<br>    <span class="hljs-keyword">private</span> Set&lt;String&gt; games;<br>    <span class="hljs-keyword">private</span> String wife;<br>    <span class="hljs-keyword">private</span> Properties info;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Address <span class="hljs-title">getAddress</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> address;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setAddress</span><span class="hljs-params">(Address address)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.address = address;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String[] getBooks() &#123;<br>        <span class="hljs-keyword">return</span> books;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBooks</span><span class="hljs-params">(String[] books)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.books = books;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title">getHobbys</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> hobbys;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setHobbys</span><span class="hljs-params">(List&lt;String&gt; hobbys)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.hobbys = hobbys;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Map&lt;String, String&gt; <span class="hljs-title">getCard</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> card;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCard</span><span class="hljs-params">(Map&lt;String, String&gt; card)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.card = card;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Set&lt;String&gt; <span class="hljs-title">getGames</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> games;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setGames</span><span class="hljs-params">(Set&lt;String&gt; games)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.games = games;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getWife</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> wife;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setWife</span><span class="hljs-params">(String wife)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.wife = wife;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Properties <span class="hljs-title">getInfo</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> info;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setInfo</span><span class="hljs-params">(Properties info)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.info = info;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Student&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, address=&quot;</span> + address +<br>                <span class="hljs-string">&quot;, books=&quot;</span> + Arrays.toString(books) +<br>                <span class="hljs-string">&quot;, hobbys=&quot;</span> + hobbys +<br>                <span class="hljs-string">&quot;, card=&quot;</span> + card +<br>                <span class="hljs-string">&quot;, games=&quot;</span> + games +<br>                <span class="hljs-string">&quot;, wife=&#x27;&quot;</span> + wife + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, info=&quot;</span> + info +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>beans.xml</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;<br>&lt;beans xmlns=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span><br>       xmlns:xsi=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br>       xsi:schemaLocation=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;<br><br>    &lt;bean id=<span class="hljs-string">&quot;student&quot;</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;com.atrox.pojo.Student&quot;</span>&gt;<br>        &lt;!--ç¬¬ä¸€ç§ï¼Œæ™®é€šå€¼æ³¨å…¥ï¼Œvalue--&gt;<br>        &lt;property name=<span class="hljs-string">&quot;name&quot;</span> value=<span class="hljs-string">&quot;ä¹”å¨&quot;</span>/&gt;<br>    &lt;/bean&gt;<br><br>&lt;/beans&gt;<br></code></pre></td></tr></table></figure></li><li><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyTest</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;beans.xml&quot;</span>);<br>        Student student = (Student) context.getBean(<span class="hljs-string">&quot;student&quot;</span>);<br>        String name = student.getName();<br>        System.out.println(name);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><p><strong>å®Œå–„æ³¨å…¥ä¿¡æ¯</strong>ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;<br>&lt;beans xmlns=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span><br>       xmlns:xsi=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br>       xsi:schemaLocation=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;<br><br>    &lt;bean id=<span class="hljs-string">&quot;address&quot;</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;com.atrox.pojo.Address&quot;</span>&gt;<br>        &lt;property name=<span class="hljs-string">&quot;address&quot;</span> value=<span class="hljs-string">&quot;æ²³åŒ—&quot;</span>/&gt;<br>    &lt;/bean&gt;<br><br>    &lt;bean id=<span class="hljs-string">&quot;student&quot;</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;com.atrox.pojo.Student&quot;</span>&gt;<br>        &lt;!--ç¬¬ä¸€ç§ï¼Œæ™®é€šå€¼æ³¨å…¥ï¼Œvalue--&gt;<br>        &lt;property name=<span class="hljs-string">&quot;name&quot;</span> value=<span class="hljs-string">&quot;ä¹”å¨&quot;</span>/&gt;<br>        &lt;!--ç¬¬äºŒç§ï¼ŒBeanæ³¨å…¥ï¼Œrf--&gt;<br>        &lt;property name=<span class="hljs-string">&quot;address&quot;</span> ref=<span class="hljs-string">&quot;address&quot;</span>/&gt;<br>        &lt;!--æ•°ç»„--&gt;<br>        &lt;property name=<span class="hljs-string">&quot;books&quot;</span>&gt;<br>            &lt;array&gt;<br>                &lt;value&gt;çº¢æ¥¼æ¢¦&lt;/value&gt;<br>                &lt;value&gt;è¥¿æ¸¸è®°&lt;/value&gt;<br>                &lt;value&gt;æ°´æµ’ä¼ &lt;/value&gt;<br>                &lt;value&gt;ä¸‰å›½æ¼”ä¹‰&lt;/value&gt;<br>            &lt;/array&gt;<br>        &lt;/property&gt;<br>        &lt;!--List--&gt;<br>        &lt;property name=<span class="hljs-string">&quot;hobbys&quot;</span>&gt;<br>            &lt;list&gt;<br>                &lt;value&gt;å¬æ­Œ&lt;/value&gt;<br>                &lt;value&gt;æ•²ä»£ç &lt;/value&gt;<br>                &lt;value&gt;çœ‹ç”µå½±&lt;/value&gt;<br>            &lt;/list&gt;<br>        &lt;/property&gt;<br>        &lt;!--Map--&gt;<br>        &lt;property name=<span class="hljs-string">&quot;card&quot;</span>&gt;<br>            &lt;map&gt;<br>                &lt;entry key=<span class="hljs-string">&quot;èº«ä»½è¯&quot;</span> value=<span class="hljs-string">&quot;111111111142142141&quot;</span> /&gt;<br>                &lt;entry key=<span class="hljs-string">&quot;é“¶è¡Œå¡&quot;</span> value=<span class="hljs-string">&quot;231231242412414&quot;</span> /&gt;<br>            &lt;/map&gt;<br>        &lt;/property&gt;<br>        &lt;!--Set--&gt;<br>        &lt;property name=<span class="hljs-string">&quot;games&quot;</span>&gt;<br>            &lt;set&gt;<br>                &lt;value&gt;LOL&lt;/value&gt;<br>                &lt;value&gt;COC&lt;/value&gt;<br>                &lt;value&gt;BOB&lt;/value&gt;<br>            &lt;/set&gt;<br>        &lt;/property&gt;<br>        &lt;!--<span class="hljs-keyword">null</span>--&gt;<br>        &lt;property name=<span class="hljs-string">&quot;wife&quot;</span>&gt;<br>            &lt;<span class="hljs-keyword">null</span>/&gt;<br>        &lt;/property&gt;<br>        &lt;!--Properties<br>        key=value<br>        key=value--&gt;<br>        &lt;property name=<span class="hljs-string">&quot;info&quot;</span>&gt;<br>            &lt;props&gt;<br>                &lt;prop key=&quot;å­¦å·&quot;&gt;185286&lt;/prop&gt;<br>                &lt;prop key=&quot;æ€§åˆ«&quot;&gt;ç”·&lt;/prop&gt;<br>                &lt;prop key=&quot;å§“å&quot;&gt;å°æ˜&lt;/prop&gt;<br>            &lt;/props&gt;<br>        &lt;/property&gt;<br>    &lt;/bean&gt;<br><br>&lt;/beans&gt;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>    ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;beans.xml&quot;</span>);<br>    Student student = (Student) context.getBean(<span class="hljs-string">&quot;student&quot;</span>);<br>    System.out.println(student);<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ç»“æœï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">Student&#123;name=<span class="hljs-string">&#x27;ä¹”å¨&#x27;</span>, address=Address&#123;address=<span class="hljs-string">&#x27;æ²³åŒ—&#x27;</span>&#125;, books=[çº¢æ¥¼æ¢¦, è¥¿æ¸¸è®°, æ°´æµ’ä¼ , ä¸‰å›½æ¼”ä¹‰], hobbys=[å¬æ­Œ, æ•²ä»£ç , çœ‹ç”µå½±], card=&#123;èº«ä»½è¯=<span class="hljs-number">111111111142142141</span>, é“¶è¡Œå¡=<span class="hljs-number">231231242412414</span>&#125;, games=[LOL, COC, BOB], wife=<span class="hljs-string">&#x27;null&#x27;</span>, info=&#123;å­¦å·=<span class="hljs-number">185286</span>, æ€§åˆ«=ç”·, å§“å=å°æ˜&#125;&#125;<br></code></pre></td></tr></table></figure><h3 id="6-3-æ‹“å±•æ–¹å¼æ³¨å…¥"><a href="#6-3-æ‹“å±•æ–¹å¼æ³¨å…¥" class="headerlink" title="6.3 æ‹“å±•æ–¹å¼æ³¨å…¥"></a>6.3 æ‹“å±•æ–¹å¼æ³¨å…¥</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨på‘½ä»¤ç©ºé—´å’Œcå‘½ä»¤ç©ºé—´è¿›è¡Œæ³¨å…¥ï¼š</p><p>å®˜æ–¹è§£é‡Šï¼š</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Spring5å­¦ä¹ ç¬”è®°/p_namespace.png" alt="på‘½åç©ºé—´" style="zoom:75%;"><p>ä½¿ç”¨ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:c</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/c&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:p</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/p&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--på‘½åç©ºé—´æ³¨å…¥ï¼Œå¯ä»¥ç›´æ¥æ³¨å…¥å±æ€§çš„å€¼ï¼šproperties--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atrox.pojo.User&quot;</span> <span class="hljs-attr">p:name</span>=<span class="hljs-string">&quot;ä¹”å¨&quot;</span> <span class="hljs-attr">p:age</span>=<span class="hljs-string">&quot;18&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--cå‘½åç©ºé—´æ³¨å…¥ï¼Œå¯ä»¥é€šè¿‡æ„é€ å™¨æ³¨å…¥ï¼šconstructor--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user2&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atrox.pojo.User&quot;</span> <span class="hljs-attr">c:age</span>=<span class="hljs-string">&quot;18&quot;</span> <span class="hljs-attr">c:name</span>=<span class="hljs-string">&quot;ä¹”å¨&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test2</span><span class="hljs-params">()</span> </span>&#123;<br>    ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;userbeans.xml&quot;</span>);<br>    User user = context.getBean(<span class="hljs-string">&quot;user2&quot;</span>, User.class);<br>    System.out.println(user);<br>&#125;<br></code></pre></td></tr></table></figure><p>æ³¨æ„ç‚¹ï¼špå‘½åå’Œcå‘½åç©ºé—´ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œéœ€è¦å¯¼å…¥xmlçº¦æŸã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">xmlns:c=<span class="hljs-string">&quot;http://www.springframework.org/schema/c&quot;</span><br>xmlns:p=<span class="hljs-string">&quot;http://www.springframework.org/schema/p&quot;</span><br></code></pre></td></tr></table></figure><h3 id="6-4-Beanä½œç”¨åŸŸ"><a href="#6-4-Beanä½œç”¨åŸŸ" class="headerlink" title="6.4 Beanä½œç”¨åŸŸ"></a>6.4 Beanä½œç”¨åŸŸ</h3><table><thead><tr><th align="left">Scope</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-singleton">singleton</a></td><td align="left">(Default) Scopes a single bean definition to a single object instance for each Spring IoC container.</td></tr><tr><td align="left"><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-prototype">prototype</a></td><td align="left">Scopes a single bean definition to any number of object instances.</td></tr><tr><td align="left"><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-request">request</a></td><td align="left">Scopes a single bean definition to the lifecycle of a single HTTP request. That is, each HTTP request has its own instance of a bean created off the back of a single bean definition. Only valid in the context of a web-aware Spring <code>ApplicationContext</code>.</td></tr><tr><td align="left"><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-session">session</a></td><td align="left">Scopes a single bean definition to the lifecycle of an HTTP <code>Session</code>. Only valid in the context of a web-aware Spring <code>ApplicationContext</code>.</td></tr><tr><td align="left"><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-application">application</a></td><td align="left">Scopes a single bean definition to the lifecycle of a <code>ServletContext</code>. Only valid in the context of a web-aware Spring <code>ApplicationContext</code>.</td></tr><tr><td align="left"><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#websocket-stomp-websocket-scope">websocket</a></td><td align="left">Scopes a single bean definition to the lifecycle of a <code>WebSocket</code>. Only valid in the context of a web-aware Spring <code>ApplicationContext</code>.</td></tr></tbody></table><p>1.å•ä¾‹æ¨¡å¼ï¼ˆSpringçš„é»˜è®¤æœºåˆ¶ï¼‰</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Spring5å­¦ä¹ ç¬”è®°/bean_scope.png" alt="å•ä¾‹æ¨¡å¼å›¾è§£" style="zoom:75%;"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;bean id=<span class="hljs-string">&quot;user2&quot;</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;com.atrox.pojo.User&quot;</span> c:age=<span class="hljs-string">&quot;18&quot;</span> c:name=<span class="hljs-string">&quot;ä¹”å¨&quot;</span> scope=<span class="hljs-string">&quot;singleton&quot;</span>/&gt;<br></code></pre></td></tr></table></figure><p>2.åŸå‹æ¨¡å¼:æ¯æ¬¡ä»å®¹å™¨ä¸­getçš„æ—¶å€™ï¼Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°å¯¹è±¡</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Spring5å­¦ä¹ ç¬”è®°/prototype_scope.png" alt="åŸå‹æ¨¡å¼å›¾è§£" style="zoom:75%;"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;bean id=<span class="hljs-string">&quot;user2&quot;</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;com.atrox.pojo.User&quot;</span> c:age=<span class="hljs-string">&quot;18&quot;</span> c:name=<span class="hljs-string">&quot;ä¹”å¨&quot;</span> scope=<span class="hljs-string">&quot;prototype&quot;</span>/&gt;<br></code></pre></td></tr></table></figure><p>3.å…¶ä½™çš„requestã€sessionã€applicationï¼Œè¿™äº›åªèƒ½åœ¨webå¼€å‘ä¸­ä½¿ç”¨åˆ°ã€‚</p><h2 id="7ã€Beançš„è‡ªåŠ¨è£…é…"><a href="#7ã€Beançš„è‡ªåŠ¨è£…é…" class="headerlink" title="7ã€Beançš„è‡ªåŠ¨è£…é…"></a>7ã€Beançš„è‡ªåŠ¨è£…é…</h2><ul><li><p>è‡ªåŠ¨è£…é…æ˜¯Springæ»¡è¶³beanä¾èµ–çš„ä¸€ç§æ–¹å¼ï¼</p></li><li><p>Springä¼šåœ¨ä¸Šä¸‹æ–‡ä¸­è‡ªåŠ¨å¯»æ‰¾ï¼Œå¹¶è‡ªåŠ¨ç»™beanè£…é…å±æ€§ã€‚</p></li></ul><p>åœ¨Springä¸­æœ‰ä¸‰ç§è£…é…çš„æ–¹å¼</p><ol><li>åœ¨xmlä¸­æ˜¾å¼çš„é…ç½®</li><li>åœ¨javaä¸­æ˜¾å¼é…ç½®</li><li>éšå¼çš„è‡ªåŠ¨è£…é…beanã€é‡è¦ã€‘</li></ol><h3 id="7-1-æµ‹è¯•"><a href="#7-1-æµ‹è¯•" class="headerlink" title="7.1 æµ‹è¯•"></a>7.1 æµ‹è¯•</h3><ol><li>ç¯å¢ƒæ­å»º<ul><li>ä¸€ä¸ªäººæœ‰ä¸¤ä¸ªå® ç‰©</li></ul></li></ol><h3 id="7-2-byNameè‡ªåŠ¨è£…é…"><a href="#7-2-byNameè‡ªåŠ¨è£…é…" class="headerlink" title="7.2 byNameè‡ªåŠ¨è£…é…"></a>7.2 byNameè‡ªåŠ¨è£…é…</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--byNameï¼šä¼šè‡ªåŠ¨åœ¨å®¹å™¨ä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡setæ–¹æ³•åé¢çš„å€¼å¯¹åº”çš„beanid--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;people&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atrox.pojo.People&quot;</span> <span class="hljs-attr">autowire</span>=<span class="hljs-string">&quot;byName&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;ä¹”å¨&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="7-3-byTypeè‡ªåŠ¨è£…é…"><a href="#7-3-byTypeè‡ªåŠ¨è£…é…" class="headerlink" title="7.3 byTypeè‡ªåŠ¨è£…é…"></a>7.3 byTypeè‡ªåŠ¨è£…é…</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--byTypeï¼šä¼šè‡ªåŠ¨åœ¨å®¹å™¨ä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡å±æ€§ç±»å‹ç›¸åŒçš„beanid--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;people2&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atrox.pojo.People&quot;</span> <span class="hljs-attr">autowire</span>=<span class="hljs-string">&quot;byType&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;ä¹”å¨&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å°ç»“ï¼š</p><ul><li>bynameçš„æ—¶å€™ï¼Œéœ€è¦ä¿è¯æ‰€æœ‰beançš„idå”¯ä¸€ï¼Œå¹¶ä¸”è¿™ä¸ªbeanéœ€è¦å’Œè‡ªåŠ¨æ³¨å…¥çš„å±æ€§çš„setæ–¹æ³•çš„å€¼ä¸€è‡´ã€‚</li><li>byTypeçš„æ—¶å€™ï¼Œéœ€è¦ä¿è¯æ‰€æœ‰beançš„classå”¯ä¸€ï¼Œå¹¶ä¸”è¿™ä¸ªbeanéœ€è¦å’Œè‡ªåŠ¨æ³¨å…¥çš„å±æ€§çš„ç±»å‹ä¸€è‡´ã€‚</li></ul><h3 id="7-4-ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…"><a href="#7-4-ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…" class="headerlink" title="7.4 ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…"></a>7.4 ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…</h3><p>jdk1.5æ”¯æŒçš„æ³¨è§£ï¼ŒSpring2.5å°±æ”¯æŒ</p><p>The introduction of annotation-based configuration raised the question of whether this approach is â€œbetterâ€ than XMLã€‚</p><p>è¦ä½¿ç”¨çš„æ³¨è§£é¡»çŸ¥ï¼š</p><ol><li>å¯¼å…¥çº¦æŸï¼Œcontextçº¦æŸ</li><li>é…ç½®æ³¨è§£çš„æ”¯æŒï¼š<a href="context:annotation-config/">context:annotation-config/</a></li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-tag"><span class="hljs-string">        http://www.springframework.org/schema/context</span></span><br><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:annotation-config</span>/&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>@AutoWired</strong></p><p>ç›´æ¥åœ¨å±æ€§ä¸Šä½¿ç”¨å³å¯ï¼Œä¹Ÿå¯ä»¥åœ¨setæ–¹å¼ä¸Šä½¿ç”¨ã€‚</p><p>æ˜¯ç”¨@autowiredï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨ç¼–å†™setæ–¹æ³•äº†ï¼Œå‰ææ˜¯è¿™ä¸ªè‡ªåŠ¨è£…é…çš„å±æ€§åœ¨IOCï¼ˆSpringï¼‰å®¹å™¨ä¸­å­˜åœ¨ï¼Œä¸”ç¬¦åˆåå­—bynameã€‚</p><p>ç§‘æ™®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">@Nullable å­—æ®µæ ‡è®°äº†è¿™ä¸ªæ³¨è§£ï¼Œè¯´æ˜è¿™ä¸ªå­—æ®µå¯ä»¥ä¸ºnull<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Autowired &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">required</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">true</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœ@Autowiredè‡ªåŠ¨è£…é…çš„ç¯å¢ƒæ¯”è¾ƒå¤æ‚ï¼Œè‡ªåŠ¨è£…é…æ— æ³•é€šè¿‡ä¸€ä¸ªæ³¨é‡Š@Autowiredå®Œæˆçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨@Quailifier(value=â€xxxâ€)å»é…ç½®@Autowiredçš„ä½¿ç”¨ï¼ŒæŒ‡å®šä¸€ä¸ª<strong>æƒŸä¸€çš„beanå¯¹è±¡</strong>æ³¨å…¥ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java">ublic <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">People</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-comment">// å¦‚æœæ˜¾å¼åœ°å®šä¹‰äº†Autowiredçš„requiredå±æ€§ä¸ºfalseï¼Œè¯´æ˜è¿™ä¸ªå¯¹è±¡å¯ä»¥ä¸ºnullï¼Œå¦åˆ™ä¸å…è®¸ä¸ºç©º</span><br>    <span class="hljs-meta">@Autowired()</span><br>    <span class="hljs-meta">@Qualifier(value = &quot;cat1&quot;)</span><br>    <span class="hljs-keyword">private</span> Cat cat;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-meta">@Qualifier(value = &quot;dog1&quot;)</span><br>    <span class="hljs-keyword">private</span> Dog dog;<br>&#125;<br></code></pre></td></tr></table></figure><p>@Resourceæ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">People</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-comment">// å¦‚æœæ˜¾å¼åœ°å®šä¹‰äº†Autowiredçš„requiredå±æ€§ä¸ºfalseï¼Œè¯´æ˜è¿™ä¸ªå¯¹è±¡å¯ä»¥ä¸ºnullï¼Œå¦åˆ™ä¸å…è®¸ä¸ºç©º</span><br><br>    <span class="hljs-meta">@Resource(name = &quot;cat1&quot;)</span><br>    <span class="hljs-keyword">private</span> Cat cat;<br>    <span class="hljs-meta">@Resource()</span><br>    <span class="hljs-keyword">private</span> Dog dog;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å°ç»“</strong>ï¼š</p><p>@Resourceå’Œ@Autowiredçš„å¼‚åŒï¼š</p><ul><li><p>éƒ½æ˜¯ç”¨æ¥è‡ªåŠ¨è£…é…çš„ï¼Œéƒ½å¯ä»¥æ”¾åœ¨å±æ€§å­—æ®µä¸Š</p></li><li><p>@Autowiredé€šè¿‡byTypeçš„æ–¹å¼å®ç°ï¼Œè€Œä¸”è¦æ±‚è¿™ä¸ªå¯¹è±¡å¿…é¡»å­˜åœ¨ ã€å¸¸ç”¨ã€‘</p></li><li><p>@Resourceé»˜è®¤é€šè¿‡byNameçš„æ–¹å¼å®ç°ï¼Œå¦‚æœæ‰¾ä¸åˆ°åå­—ï¼Œåˆ™é€šè¿‡byTypeå®ç°ï¼å¦‚æœä¸¤ä¸ªéƒ½æ‰¾ä¸åˆ°å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œæ‰æŠ¥é”™ã€‚</p></li><li><p>æ‰§è¡Œé¡ºåºä¸åŒã€‚</p></li></ul><h2 id="8ã€ä½¿ç”¨æ³¨è§£å¼€å‘"><a href="#8ã€ä½¿ç”¨æ³¨è§£å¼€å‘" class="headerlink" title="8ã€ä½¿ç”¨æ³¨è§£å¼€å‘"></a>8ã€ä½¿ç”¨æ³¨è§£å¼€å‘</h2><p>åœ¨Spring4ä¹‹åï¼Œè¦ä½¿ç”¨æ³¨è§£å¼€å‘ï¼Œå¿…é¡»è¦ä¿è¯<strong>aopçš„åŒ…</strong>å¯¼å…¥äº†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Spring5%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/aop.png" alt="aopå¯¼åŒ…"></p><p>ä½¿ç”¨æ³¨è§£ä½¿ç”¨å¯¼å…¥contextçº¦æŸï¼Œå¢åŠ æ³¨è§£çš„æ”¯æŒï¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-tag"><span class="hljs-string">        http://www.springframework.org/schema/context</span></span><br><span class="hljs-tag"><span class="hljs-string">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:annotation-config</span>/&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="8-1-bean"><a href="#8-1-bean" class="headerlink" title="8.1 bean"></a>8.1 bean</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br> ...<br>&#125;<br></code></pre></td></tr></table></figure><p>@Componentï¼šç»„ä»¶ï¼Œæ”¾åœ¨ç±»ä¸Šï¼Œè¯´æ˜è¿™ä¸ªç±»è¢«Springç®¡ç†äº†ï¼Œå°±æ˜¯bean</p><h3 id="8-2-å±æ€§å¦‚ä½•æ³¨å…¥"><a href="#8-2-å±æ€§å¦‚ä½•æ³¨å…¥" class="headerlink" title="8.2 å±æ€§å¦‚ä½•æ³¨å…¥"></a>8.2 å±æ€§å¦‚ä½•æ³¨å…¥</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ç­‰ä»·äº&lt;bean id=&quot;user&quot; class=&quot;com.atrox.pojo.User&quot;/&gt;</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br><br>    <span class="hljs-comment">// ç›¸å½“äº</span><br>    <span class="hljs-comment">// &lt;bean id=&quot;user&quot; class=&quot;com.atrox.pojo.User&quot;&gt;</span><br>    <span class="hljs-comment">//    &lt;property name=&quot;name&quot; value=&quot;ä¹”å¨&quot;/&gt;</span><br>    <span class="hljs-comment">// &lt;/bean&gt;</span><br>    <span class="hljs-meta">@Value(&quot;ä¹”å¨&quot;)</span><br>    <span class="hljs-keyword">public</span> String name;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="8-3-è¡ç”Ÿçš„æ³¨è§£"><a href="#8-3-è¡ç”Ÿçš„æ³¨è§£" class="headerlink" title="8.3 è¡ç”Ÿçš„æ³¨è§£"></a>8.3 è¡ç”Ÿçš„æ³¨è§£</h3><p>@Component æœ‰å‡ ä¸ªè¡ç”Ÿæ³¨è§£ï¼Œæˆ‘ä»¬åœ¨webå¼€å‘ä¸­ï¼Œä¼šæŒ‰ç…§mvcä¸‰å±‚æ¶æ„åˆ†å±‚</p><ul><li>daoã€@Repositoryã€‘</li><li>serviceã€@Serviceã€‘</li><li>controllerã€@Controllerã€‘</li></ul><p>è¿™å››ä¸ªæ³¨è§£åŠŸèƒ½éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ä»£è¡¨å°†æŸä¸ªç±»æ³¨å†Œåˆ°Springå®¹å™¨ä¸­ï¼Œè£…é…Bean</p><h3 id="8-4-è‡ªåŠ¨è£…é…"><a href="#8-4-è‡ªåŠ¨è£…é…" class="headerlink" title="8.4 è‡ªåŠ¨è£…é…"></a>8.4 è‡ªåŠ¨è£…é…</h3><ul><li>@Autowiredï¼šè‡ªåŠ¨è£…é…é€šè¿‡ç±»å‹ã€åå­—<ul><li>å¦‚æœAutowiredä¸èƒ½å”¯ä¸€è‡ªåŠ¨è£…é…ä¸Šå±æ€§ï¼Œåˆ™éœ€è¦é€šè¿‡@Qualifilter(value=â€xxxâ€)</li></ul></li><li>@Nullableï¼šå­—æ®µæ ‡è®°äº†è¿™ä¸ªæ³¨è§£ï¼Œè¯´æ˜è¿™ä¸ªå­—æ®µå¯ä»¥ä¸ºnull</li><li>@Resourceï¼šè‡ªåŠ¨è£…é…é€šè¿‡åå­—ã€ç±»å‹</li></ul><h3 id="8-5-ä½œç”¨åŸŸ"><a href="#8-5-ä½œç”¨åŸŸ" class="headerlink" title="8.5 ä½œç”¨åŸŸ"></a>8.5 ä½œç”¨åŸŸ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Scope(&quot;prototype&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br><br>    <span class="hljs-comment">// ç›¸å½“äº</span><br>    <span class="hljs-comment">// &lt;bean id=&quot;user&quot; class=&quot;com.atrox.pojo.User&quot;&gt;</span><br>    <span class="hljs-comment">//    &lt;property name=&quot;name&quot; value=&quot;ä¹”å¨&quot;/&gt;</span><br>    <span class="hljs-comment">// &lt;/bean&gt;</span><br>    <span class="hljs-meta">@Value(&quot;ä¹”å¨&quot;)</span><br>    <span class="hljs-keyword">public</span> String name;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="8-6-å°ç»“"><a href="#8-6-å°ç»“" class="headerlink" title="8.6 å°ç»“"></a>8.6 å°ç»“</h3><p>xmlä¸æ³¨è§£ï¼š</p><ul><li>xmlæ›´åŠ ä¸‡èƒ½ï¼Œé€‚ç”¨äºä»»ä½•åœºåˆï¼Œç»´æŠ¤ç®€å•æ–¹ä¾¿</li><li>æ³¨è§£ä¸æ˜¯è‡ªå·±çš„ç±»ä½¿ç”¨ä¸äº†ï¼Œç»´æŠ¤ç›¸å¯¹å¤æ‚ã€‚</li></ul><p>xmlä¸æ³¨è§£çš„æœ€ä½³å®è·µï¼š</p><ul><li><p>xml ç”¨æ¥ç®¡ç†beanï¼›</p></li><li><p>æ³¨è§£åªè´Ÿè´£å®Œæˆå±æ€§çš„æ³¨å…¥</p></li><li><p>æˆ‘ä»¬åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œåªéœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼šå¿…é¡»è®©æ³¨è§£ç”Ÿæ•ˆï¼Œå°±éœ€è¦å¼€å¯æ³¨è§£çš„æ”¯æŒ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--æŒ‡å®šè¦æ‰«æçš„åŒ…ï¼Œè¿™ä¸ªåŒ…ä¸‹çš„æ³¨è§£å°±ä¼šç”Ÿæ•ˆ--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.atrox.pojo&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context:annotation-config</span>/&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="9ã€ä½¿ç”¨javaçš„æ–¹å¼é…ç½®Spring"><a href="#9ã€ä½¿ç”¨javaçš„æ–¹å¼é…ç½®Spring" class="headerlink" title="9ã€ä½¿ç”¨javaçš„æ–¹å¼é…ç½®Spring"></a>9ã€ä½¿ç”¨javaçš„æ–¹å¼é…ç½®Spring</h2><p>æˆ‘ä»¬ç°åœ¨è¦å®Œå…¨ä¸ä½¿ç”¨Springçš„xmlé…ç½®äº†ï¼Œå…¨æƒäº¤ç»™javaæ¥åšã€‚</p><p>JavaConfigæ˜¯Springçš„ä¸€ä¸ªå­é¡¹ç›®ï¼Œå’‹iSpring4ä¹‹åï¼Œå®ƒæˆä¸ºäº†ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Spring5%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/annotation_context.png" alt="æ³¨è§£å®ç°ä¸Šä¸‹æ–‡"></p><p>æˆ‘ä»¬å…ˆå†™ä¸€ä¸ªå®ä½“ç±»Userï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// è¿™é‡Œè¿™ä¸ªæ³¨è§£çš„æ„æ€ï¼Œå°±æ˜¯è¯´æ˜è¿™ä¸ªç±»è¢«Springæ¥ç®¡äº†ï¼Œæ³¨å†Œåˆ°äº†å®¹å™¨ä¸­</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-comment">// å±æ€§æ³¨å…¥å€¼</span><br>    <span class="hljs-meta">@Value(&quot;ä¹”å¨&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;User&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶åä»¥javaçš„æ–¹å¼é…ç½®Spring</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// è¿™ä¸ªä¹Ÿä¼šè¢«Springå®¹å™¨æ‰˜ç®¡ï¼Œæ³¨å†Œåˆ°å®¹å™¨ä¸­ï¼Œå› ä¸ºä»–æœ¬æ¥å°±æ˜¯ä¸€ä¸ª@Component</span><br><span class="hljs-comment">// @Configurationä»£è¡¨è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œå°±å’Œæˆ‘ä»¬ä¹‹å‰çœ‹çš„beans.xmlæ˜¯ä¸€æ ·çš„</span><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@ComponentScan(&quot;com.atrox.pojo&quot;)</span><br><span class="hljs-meta">@Import(AtroxConfig2.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AtroxConfig</span> </span>&#123;<br><br>    <span class="hljs-comment">// æ³¨å†Œä¸€ä¸ªbeanï¼Œå°±ç›¸å½“äºæˆ‘ä»¬ä¹‹å‰å†™çš„ä¸€ä¸ªbeanæ ‡ç­¾</span><br>    <span class="hljs-comment">// è¿™ä¸ªæ–¹æ³•çš„åå­—ï¼Œå°±ç›¸å½“äºbeanæ ‡ç­¾ä¸­çš„idå±æ€§</span><br>    <span class="hljs-comment">// è¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼ï¼Œå°±ç›¸å½“äºbeanæ ‡ç­¾çš„classå±æ€§</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">user</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> User();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test1</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// å¦‚æœå®Œå…¨ä½¿ç”¨äº†é…ç½®ç±»æ–¹å¼å»åšï¼Œæˆ‘ä»¬å°±åªèƒ½é€šè¿‡ AnnotationConfigApplicationContext æ¥è·å–å®¹å™¨</span><br>    <span class="hljs-comment">// é€šè¿‡é…ç½®ç±»çš„classå¯¹è±¡åŠ è½½</span><br>    AnnotationConfigApplicationContext context = <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(AtroxConfig.class);<br>    User user = context.getBean(<span class="hljs-string">&quot;user&quot;</span>, User.class);<br>    System.out.println(user);<br>&#125;<br><br></code></pre></td></tr></table></figure><p>è¿™ç§çº¯javaçš„é…ç½®æ–¹å¼ï¼Œåœ¨Springbootä¸­åˆ°å¤„å¯è§</p><h2 id="10ã€ä»£ç†æ¨¡å¼"><a href="#10ã€ä»£ç†æ¨¡å¼" class="headerlink" title="10ã€ä»£ç†æ¨¡å¼"></a>10ã€ä»£ç†æ¨¡å¼</h2><p>ä¸ºä»€ä¹ˆè¦å­¦ä¹ ä»£ç†æ¨¡å¼ï¼Ÿå› ä¸ºè¿™å°±æ˜¯SpringAOPçš„åº•å±‚ï¼ã€SpringAOP å’Œ SpringMVCã€‘</p><p>ä»£ç†æ¨¡å¼çš„åˆ†ç±»ï¼š</p><ul><li>é™æ€ä»£ç†</li><li>åŠ¨æ€ä»£ç†</li></ul><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Spring5%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F.png" alt="ä»£ç†æ¨¡å¼å›¾è§£"></p><h3 id="10-1-é™æ€ä»£ç†"><a href="#10-1-é™æ€ä»£ç†" class="headerlink" title="10.1 é™æ€ä»£ç†"></a>10.1 é™æ€ä»£ç†</h3><p>è§’è‰²åˆ†æï¼š</p><ul><li><p>æŠ½è±¡è§’è‰²ï¼šä¸€èˆ¬ä¼šä½¿ç”¨æ¥å£æˆ–è€…æŠ½è±¡ç±»æ¥è§£å†³</p></li><li><p>çœŸå®è§’è‰²ï¼šè¢«ä»£ç†çš„è§’è‰²</p></li><li><p>ä»£ç†è§’è‰²ï¼šä»£ç†çœŸå®è§’è‰²ï¼Œä»£ç†çœŸå®è§’è‰²åï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šåšä¸€äº›é™„å±æ“ä½œ</p></li><li><p>å®¢æˆ·ï¼šè®¿é—®ä»£ç†å¯¹è±¡çš„äºº</p></li></ul><p>ä»£ç æ­¥éª¤ï¼š</p><ol><li><p>æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ç§Ÿæˆ¿ï¼šæŠ½è±¡è§’è‰²</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Rent</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">rent</span><span class="hljs-params">()</span></span>;<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>çœŸå®è§’è‰²</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æˆ¿ä¸œï¼šçœŸå®è§’è‰²</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Host</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Rent</span></span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">rent</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;æˆ¿ä¸œè¦å‡ºç§Ÿæˆ¿å­&quot;</span>);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ä»£ç†è§’è‰²</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Proxy</span> </span>&#123;<br><br>    <span class="hljs-keyword">private</span> Host host;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Proxy</span><span class="hljs-params">()</span> </span>&#123;<br><br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Proxy</span><span class="hljs-params">(Host host)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.host = host;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">rent</span><span class="hljs-params">()</span> </span>&#123;<br>        host.rent();<br>    &#125;<br><br>    <span class="hljs-comment">// çœ‹æˆ¿</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">seeHouse</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;ä¸­ä»‹å¸¦ä½ çœ‹æˆ¿&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// æ”¶ä¸­ä»‹è´¹</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">fare</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;æ”¶ä¸­ä»‹è´¹&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// ç­¾åˆåŒ</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">hetong</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;ç­¾ç§ŸèµåˆåŒ&quot;</span>);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å®¢æˆ·ç«¯è®¿é—®ä»£ç†è§’è‰²</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br><br>        <span class="hljs-comment">// æˆ¿ä¸œè¦ç§Ÿæˆ¿å­</span><br>        Host host = <span class="hljs-keyword">new</span> Host();<br>        <span class="hljs-comment">// ä»£ç†ï¼Œä¸­ä»‹å¸®æˆ¿ä¸œç§Ÿæˆ¿å­ã€‚ä½†æ˜¯ï¼Œä»£ç†ä¸€èˆ¬ä¼šæœ‰ä¸€äº›é™„å±æ“ä½œ</span><br>        Proxy proxy = <span class="hljs-keyword">new</span> Proxy(host);<br>        <span class="hljs-comment">// å®¢æˆ·ä¸ç”¨é¢å¯¹æˆ¿ä¸œï¼Œç›´æ¥é¢å‘ä¸­ä»‹ç§Ÿæˆ¿</span><br>        proxy.rent();<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><p>ä»£ç†æ¨¡å¼çš„å¥½å¤„ï¼š</p><ul><li>å¯ä»¥ä½¿çœŸå®è§’è‰²çš„æ“ä½œæ›´åŠ çº¯ç²¹ï¼Œä¸ç”¨å»å…³æ³¨ä¸€äº›å…¬å…±çš„ä¸šåŠ¡</li><li>å…¬å…±ä¸šåŠ¡å°±äº¤ç»™äº†ä»£ç†è§’è‰²ï¼Œå®ç°äº†ä¸šåŠ¡çš„åˆ†å·¥</li><li>å…¬å…±ä¸šåŠ¡å‘ç”Ÿæ‰©å±•çš„æ—¶å€™ï¼Œæ–¹ä¾¿é›†ä¸­ç®¡ç†</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>ä¸€ä¸ªçœŸå®è§’è‰²å°±ä¼šäº§ç”Ÿä¸€ä¸ªä»£ç†è§’è‰²ï¼›å¦‚æœæœ‰å‡ åä¸ªçœŸå®è§’è‰²ï¼Œä»£ç é‡ä¼šç¿»å€ï¼Œå¼€å‘æ•ˆç‡ä¼šå˜ä½ã€‚</li></ul><h3 id="10-2-é™æ€ä»£ç†å†ç†è§£"><a href="#10-2-é™æ€ä»£ç†å†ç†è§£" class="headerlink" title="10.2 é™æ€ä»£ç†å†ç†è§£"></a>10.2 é™æ€ä»£ç†å†ç†è§£</h3><p>ä»£ç ï¼š</p><ol><li><p>æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserService</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">query</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>çœŸå®è§’è‰²ï¼šåœ¨è¿™é‡Œæ”¹åŠ¨åŸæœ‰çš„ä¸šåŠ¡ä»£ç ï¼Œæ˜¯å…¬å¸å¤§å¿Œï¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// çœŸå®å¯¹è±¡</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span></span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;å¢åŠ äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;åˆ é™¤äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;ä¿®æ”¹äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">query</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;æŸ¥è¯¢äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>éœ€æ±‚æ¥äº†ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦å¢åŠ ä¸€ä¸ªæ—¥å¿—åŠŸèƒ½ï¼Œå¦‚ä½•å®ç°ï¼Ÿ</p><ul><li>æ€è·¯1ï¼šåœ¨å®ç°ç±»ä¸Šå¢åŠ ä»£ç ã€éº»çƒ¦ï¼ã€‘</li><li>æ€è·¯2ï¼šä½¿ç”¨ä»£ç†æ¥åšï¼Œèƒ½å¤Ÿä¸æ”¹å˜åŸæ¥çš„ä¸šåŠ¡æƒ…å†µä¸‹ï¼Œå®ç°æ­¤åŠŸèƒ½å°±æ˜¯æœ€å¥½çš„äº†ï¼</li></ul></li><li><p>è®¾ç½®ä¸€ä¸ªä»£ç†ç±»æ¥å¤„ç†æ—¥å¿—ï¼ä»£ç†è§’è‰²</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceProxy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span></span>&#123;<br><br>    <span class="hljs-keyword">private</span> UserServiceImpl userService;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUserService</span><span class="hljs-params">(UserServiceImpl userService)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.userService = userService;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.log(<span class="hljs-string">&quot;add&quot;</span>);<br>        userService.add();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.log(<span class="hljs-string">&quot;delete&quot;</span>);<br>        userService.delete();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.log(<span class="hljs-string">&quot;update&quot;</span>);<br>        userService.update();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">query</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.log(<span class="hljs-string">&quot;query&quot;</span>);<br>        userService.query();<br>    &#125;<br><br>    <span class="hljs-comment">// æ—¥å¿—æ–¹æ³•</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">log</span><span class="hljs-params">(String msg)</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;ä½¿ç”¨äº†&quot;</span> + msg + <span class="hljs-string">&quot;æ–¹æ³•&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å®¢æˆ·ç«¯è®¿é—®ä»£ç†è§’è‰²</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br><br>        UserServiceImpl userService = <span class="hljs-keyword">new</span> UserServiceImpl();<br><br>        UserServiceProxy proxy = <span class="hljs-keyword">new</span> UserServiceProxy();<br>        proxy.setUserService(userService);<br><br>        proxy.add();<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><p><strong>æˆ‘ä»¬åœ¨ä¸æ”¹å˜åŸæ¥çš„ä»£ç çš„æƒ…å†µä¸‹ï¼Œå®ç°äº†å¯¹åŸæœ‰åŠŸèƒ½çš„å¢å¼ºï¼Œè¿™æ˜¯AOPä¸­æœ€æ ¸å¿ƒçš„æ€æƒ³</strong></p><p>èŠèŠAOPï¼šçºµå‘å¼€å‘ï¼Œæ¨ªå‘å¼€å‘</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Spring5å­¦ä¹ ç¬”è®°/AOPæœºåˆ¶.png" alt="AOPå®ç°æœºåˆ¶" style="zoom:75%;"><h3 id="10-3-åŠ¨æ€ä»£ç†"><a href="#10-3-åŠ¨æ€ä»£ç†" class="headerlink" title="10.3 åŠ¨æ€ä»£ç†"></a>10.3 åŠ¨æ€ä»£ç†</h3><ul><li>åŠ¨æ€ä»£ç†å’Œé™æ€ä»£ç†è§’è‰²ä¸€æ ·</li><li>åŠ¨æ€ä»£ç†çš„ä»£ç†ç±»æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œä¸æ˜¯æˆ‘ä»¬ç›´æ¥å†™å¥½çš„</li><li>åŠ¨æ€ä»£ç†åˆ†ä¸ºä¸¤å¤§ç±»ï¼šåŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†ï¼ŒåŸºäºç±»çš„åŠ¨æ€ä»£ç†<ul><li>åŸºäºæ¥å£â€”JDKåŠ¨æ€ä»£ç†ã€æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨ã€‘</li><li>åŸºäºç±»â€”cglib</li><li>javaå­—èŠ‚ç å®ç°ï¼šjavasist</li></ul></li></ul><p>éœ€è¦äº†è§£ä¸¤ä¸ªç±»ï¼šProxyï¼šä»£ç†ã€invocationHandlerï¼šè°ƒç”¨å¤„ç†ç¨‹åº</p><p>åŠ¨æ€ä»£ç†çš„å¥½å¤„ï¼š</p><ul><li>å¯ä»¥ä½¿çœŸå®è§’è‰²çš„æ“ä½œæ›´åŠ çº¯ç²¹ï¼ä¸ç”¨å»å…³æ³¨ä¸€äº›å…¬å…±çš„ä¸šåŠ¡</li><li>å…¬å…±ä¹Ÿå°±äº¤ç»™ä»£ç†è§’è‰²ï¼å®ç°äº†ä¸šåŠ¡çš„åˆ†å·¥ï¼</li><li>å…¬å…±ä¸šåŠ¡å‘ç”Ÿæ‰©å±•çš„æ—¶å€™ï¼Œæ–¹ä¾¿é›†ä¸­ç®¡ç†ï¼</li><li>ä¸€ä¸ªåŠ¨æ€ä»£ç†ç±»ä»£ç†çš„æ˜¯ä¸€ä¸ªæ¥å£ï¼Œä¸€èˆ¬å°±æ˜¯å¯¹åº”çš„ä¸€ç±»ä¸šåŠ¡</li><li>ä¸€ä¸ªåŠ¨æ€ä»£ç†ç±»å¯ä»¥ä»£ç†å¤šä¸ªç±»ï¼Œåªè¦æ˜¯å®ç°äº†åŒä¸€ä¸ªæ¥å£å³å¯ã€æ ¸å¿ƒã€‘</li></ul><p><strong>ä»£ç </strong>:</p><ol><li><p>ä¸‡èƒ½ä»£ç†ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æˆ‘ä»¬ä¼šç”¨è¿™ä¸ªç±»ï¼Œè‡ªåŠ¨ç”Ÿæˆä»£ç†ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProxyInvocationHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">InvocationHandler</span> </span>&#123;<br><br>    <span class="hljs-comment">// è¢«ä»£ç†çš„æ¥å£</span><br>    <span class="hljs-keyword">private</span> Object target;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setTarget</span><span class="hljs-params">(Object target)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.target = target;<br>    &#125;<br><br>    <span class="hljs-comment">// ç”Ÿæˆå¾—åˆ°ä»£ç†ç±»</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">getProxy</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> Proxy.newProxyInstance(<span class="hljs-keyword">this</span>.getClass().getClassLoader(), target.getClass().getInterfaces(), <span class="hljs-keyword">this</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// å¤„ç†ä»£ç†å®ä¾‹çš„æ–¹æ³•ï¼Œå¹¶è¿”å›ç»“æœ</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable </span>&#123;<br>        log(method.getName());<br>        <span class="hljs-comment">// åŠ¨æ€ä»£ç†çš„æœ¬è´¨ï¼Œå°±æ˜¯ä½¿ç”¨åå°„æœºåˆ¶å®ç°</span><br>        <span class="hljs-keyword">return</span> method.invoke(target, args);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">log</span><span class="hljs-params">(String msg)</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;æ‰§è¡Œäº†&quot;</span> + msg + <span class="hljs-string">&quot;æ–¹æ³•&quot;</span>);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>Clientç«¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br><br>        <span class="hljs-comment">// çœŸå®è§’è‰²</span><br>        UserServiceImpl userService = <span class="hljs-keyword">new</span> UserServiceImpl();<br>        <span class="hljs-comment">// ä»£ç†è§’è‰²,ä¸å­˜åœ¨</span><br>        ProxyInvocationHandler pih = <span class="hljs-keyword">new</span> ProxyInvocationHandler();<br>        <span class="hljs-comment">// è®¾ç½®è¦ä»£ç†çš„å¯¹è±¡</span><br>        pih.setTarget(userService);<br>        <span class="hljs-comment">// åŠ¨æ€ç”Ÿæˆä»£ç†ç±»</span><br>        UserService proxy = (UserService) pih.getProxy();<br><br>        proxy.delete();<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æ‰§è¡Œç»“æœ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">æ‰§è¡Œäº†deleteæ–¹æ³•<br>åˆ é™¤äº†ä¸€ä¸ªç”¨æˆ·<br></code></pre></td></tr></table></figure></li></ol><h2 id="11ã€AOP"><a href="#11ã€AOP" class="headerlink" title="11ã€AOP"></a>11ã€AOP</h2><h3 id="11-1-ä»€ä¹ˆæ˜¯AOP"><a href="#11-1-ä»€ä¹ˆæ˜¯AOP" class="headerlink" title="11.1 ä»€ä¹ˆæ˜¯AOP"></a>11.1 ä»€ä¹ˆæ˜¯AOP</h3><p>AOPï¼ˆAspect Oriented Programmingï¼‰æ„ä¸ºï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œé€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯ã€‚AOPæ˜¯OOPçš„å»¶ç»­ï¼Œæ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ä¸€ä¸ªçƒ­ç‚¹ï¼Œä¹Ÿæ˜¯Springæ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦å†…å®¹ï¼Œæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ç§è¡ç”ŸèŒƒå‹ã€‚åˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Spring5å­¦ä¹ ç¬”è®°/aop_log.png" alt="AOPå›¾è§£" style="zoom:75%;"><h3 id="11-2-Aopåœ¨Springä¸­çš„ä½œç”¨"><a href="#11-2-Aopåœ¨Springä¸­çš„ä½œç”¨" class="headerlink" title="11.2 Aopåœ¨Springä¸­çš„ä½œç”¨"></a>11.2 Aopåœ¨Springä¸­çš„ä½œç”¨</h3><p><strong>æä¾›å£°æ˜å¼äº‹åŠ¡ï¼›å…è®¸ç”¨æˆ·è‡ªå®šä¹‰åˆ‡é¢</strong></p><p>ä»¥ä¸‹åè¯éœ€è¦äº†è§£ä¸‹ï¼š</p><ul><li>æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼šè·¨è¶Šåº”ç”¨ç¨‹åºå¤šä¸ªæ¨¡å—çš„æ–¹æ³•æˆ–åŠŸèƒ½ã€‚å³æ˜¯ï¼Œä¸æˆ‘ä»¬ä¸šåŠ¡é€»è¾‘æ— å…³çš„ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨çš„éƒ¨åˆ†ï¼Œå°±æ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚å¦‚æ—¥å¿— , å®‰å…¨ , ç¼“å­˜ , äº‹åŠ¡ç­‰ç­‰ â€¦.</li><li>åˆ‡é¢ï¼ˆASPECTï¼‰ï¼šæ¨ªåˆ‡å…³æ³¨ç‚¹ è¢«æ¨¡å—åŒ– çš„ç‰¹æ®Šå¯¹è±¡ã€‚å³ï¼Œå®ƒæ˜¯ä¸€ä¸ªç±»ã€‚Log</li><li>é€šçŸ¥ï¼ˆAdviceï¼‰ï¼šåˆ‡é¢å¿…é¡»è¦å®Œæˆçš„å·¥ä½œã€‚å³ï¼Œå®ƒæ˜¯ç±»ä¸­çš„ä¸€ä¸ªæ–¹æ³•ã€‚Logæ–¹æ³•</li><li>ç›®æ ‡ï¼ˆTargetï¼‰ï¼šè¢«é€šçŸ¥å¯¹è±¡ã€‚æ¥å£</li><li>ä»£ç†ï¼ˆProxyï¼‰ï¼šå‘ç›®æ ‡å¯¹è±¡åº”ç”¨é€šçŸ¥ä¹‹ååˆ›å»ºçš„å¯¹è±¡ã€‚ä»£ç†ç±»</li><li>åˆ‡å…¥ç‚¹ï¼ˆPointCutï¼‰ï¼šåˆ‡é¢é€šçŸ¥ æ‰§è¡Œçš„ â€œåœ°ç‚¹â€çš„å®šä¹‰ã€‚method</li><li>è¿æ¥ç‚¹ï¼ˆJointPointï¼‰ï¼šä¸åˆ‡å…¥ç‚¹åŒ¹é…çš„æ‰§è¡Œç‚¹ã€‚invoke</li></ul><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Spring5å­¦ä¹ ç¬”è®°/aop_diy.png" alt="é¢å‘åˆ‡é¢ç¼–ç¨‹" style="zoom:80%;"><p>SpringAOPä¸­ï¼Œé€šè¿‡Adviceå®šä¹‰æ¨ªåˆ‡é€»è¾‘ï¼ŒSpringä¸­æ”¯æŒ5ç§ç±»å‹çš„Advice:</p><table><thead><tr><th>é€šçŸ¥ç±»å‹</th><th>è¿æ¥ç‚¹</th><th>å®ç°æ¥å£</th></tr></thead><tbody><tr><td>å‰ç½®é€šçŸ¥</td><td>æ–¹æ³•å‰</td><td>org.springframework.aop.MethodBeforeAdvice</td></tr><tr><td>åç½®é€šçŸ¥</td><td>æ–¹æ³•å</td><td>org.springframework.aop.AfterReturningAdvice</td></tr><tr><td>ç¯ç»•é€šçŸ¥</td><td>æ–¹æ³•å‰å</td><td>org.aopalliance.intercept.MethodInterceptor</td></tr><tr><td>å¼‚å¸¸æŠ›å‡ºé€šçŸ¥</td><td>æ–¹æ³•æŠ›å‡ºå¼‚å¸¸</td><td>org.springframework.aop.ThrowsAdvice</td></tr><tr><td>å¼•ä»‹é€šçŸ¥</td><td>ç±»ä¸­å¢åŠ æ–°çš„æ–¹æ³•å±æ€§</td><td>org.springframework.aop.IntroductionInterceptor</td></tr></tbody></table><p>å³ Aop åœ¨ ä¸æ”¹å˜åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹ , å»å¢åŠ æ–°çš„åŠŸèƒ½ .</p><h3 id="11-3-ä½¿ç”¨Springå®ç°AOP"><a href="#11-3-ä½¿ç”¨Springå®ç°AOP" class="headerlink" title="11.3 ä½¿ç”¨Springå®ç°AOP"></a>11.3 ä½¿ç”¨Springå®ç°AOP</h3><p>ã€é‡ç‚¹ã€‘ä½¿ç”¨AOPç»‡å…¥ï¼Œéœ€è¦å¯¼å…¥ä¸€ä¸ªä¾èµ–åŒ…ï¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/org.aspectj/aspectjweaver --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>   <br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.aspectj<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>aspectjweaver<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.9.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>æ–¹å¼ä¸€ï¼šä½¿ç”¨Springçš„APIæ¥å£</strong></p><ol><li><p>é¦–å…ˆç¼–å†™æˆ‘ä»¬çš„ä¸šåŠ¡æ¥å£å’Œå®ç°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserService</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">select</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span></span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;å¢åŠ äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;åˆ é™¤äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;æ›´æ–°äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">select</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;æŸ¥è¯¢äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å†™æˆ‘ä»¬çš„å¢å¼ºç±» , æˆ‘ä»¬ç¼–å†™ä¸¤ä¸ª , ä¸€ä¸ªå‰ç½®å¢å¼º ä¸€ä¸ªåç½®å¢å¼º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Log</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">MethodBeforeAdvice</span> </span>&#123;<br><br>    <span class="hljs-comment">// methodï¼šè¦æ‰§è¡Œçš„ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•</span><br>    <span class="hljs-comment">// argsï¼šå‚æ•°</span><br>    <span class="hljs-comment">// targetï¼šç›®æ ‡å¯¹è±¡</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">before</span><span class="hljs-params">(Method method, Object[] args, Object target)</span> <span class="hljs-keyword">throws</span> Throwable </span>&#123;<br>        System.out.println(target.getClass().getName() + <span class="hljs-string">&quot;çš„&quot;</span> + method.getName() + <span class="hljs-string">&quot;è¢«æ‰§è¡Œäº†&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AfterLog</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">AfterReturningAdvice</span> </span>&#123;<br><br>    <span class="hljs-comment">// returnValueï¼šè¿”å›å€¼</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">afterReturning</span><span class="hljs-params">(Object returnValue, Method method, Object[] args, Object target)</span> <span class="hljs-keyword">throws</span> Throwable </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;æ‰§è¡Œäº†&quot;</span> + method.getName() + <span class="hljs-string">&quot;è¿”å›ç»“æœä¸ºï¼š&quot;</span> + returnValue);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>åœ¨springçš„æ–‡ä»¶ä¸­æ³¨å†Œ , å¹¶å®ç°aopåˆ‡å…¥å®ç° , æ³¨æ„å¯¼å…¥çº¦æŸ .</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;<br>&lt;beans xmlns=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span><br>       xmlns:xsi=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br>       xmlns:aop=<span class="hljs-string">&quot;http://www.springframework.org/schema/aop&quot;</span><br>       xsi:schemaLocation=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span><br><span class="hljs-string">       http://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="hljs-string">       http://www.springframework.org/schema/aop</span><br><span class="hljs-string">       http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;<br><br>    &lt;!--æ³¨å†Œbean--&gt;<br>    &lt;bean id=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;com.atrox.service.UserServiceImpl&quot;</span>/&gt;<br>    &lt;bean id=<span class="hljs-string">&quot;log&quot;</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;com.atrox.log.Log&quot;</span>/&gt;<br>    &lt;bean id=<span class="hljs-string">&quot;afterLog&quot;</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;com.atrox.log.AfterLog&quot;</span>/&gt;<br><br>    &lt;!--æ–¹å¼ä¸€ï¼šä½¿ç”¨å…ƒæ˜¯å“ªä¸ªSpring APIæ¥å£--&gt;<br>    &lt;!--é…ç½®AOP:éœ€è¦å¯¼å…¥AOPçš„çº¦æŸ--&gt;<br>    &lt;aop:config&gt;<br>        &lt;!--åˆ‡å…¥ç‚¹:expression:è¡¨è¾¾å¼ execution(è¦æ‰§è¡Œçš„ä½ç½®ï¼* * *)--&gt;<br>        &lt;aop:pointcut id=<span class="hljs-string">&quot;pointcut&quot;</span> expression=<span class="hljs-string">&quot;execution(* com.atrox.service.UserServiceImpl.*(..))&quot;</span>/&gt;<br>        &lt;!--æ‰§è¡Œç¯ç»•å¢å¼º--&gt;<br>        &lt;aop:advisor advice-ref=<span class="hljs-string">&quot;log&quot;</span> pointcut-ref=<span class="hljs-string">&quot;pointcut&quot;</span>/&gt;<br>        &lt;aop:advisor advice-ref=<span class="hljs-string">&quot;afterLog&quot;</span> pointcut-ref=<span class="hljs-string">&quot;pointcut&quot;</span>/&gt;<br>    &lt;/aop:config&gt;<br>&lt;/beans&gt;<br></code></pre></td></tr></table></figure></li><li><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>    ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);<br>    <span class="hljs-comment">// åŠ¨æ€ä»£ç†ä»£ç†çš„æ˜¯æ¥å£:æ³¨æ„ç‚¹</span><br>    UserService userService = context.getBean(<span class="hljs-string">&quot;userService&quot;</span>, UserService.class);<br>    <span class="hljs-comment">//</span><br>    userService.add();<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><p><strong>æ–¹å¼äºŒï¼šè‡ªå®šä¹‰æ¥å®ç°AOP</strong></p><p>ç›®æ ‡ä¸šåŠ¡ç±»ä¸å˜ä¾æ—§æ˜¯userServiceImpl</p><ol><li><p>å†™æˆ‘ä»¬è‡ªå·±çš„ä¸€ä¸ªåˆ‡å…¥ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DiyPointCut</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">before</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;==========æ–¹æ³•æ‰§è¡Œå‰============&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">after</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;==========æ–¹æ³•æ‰§è¡Œå============&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å»springä¸­é…ç½®</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;!--æ–¹å¼äºŒï¼šè‡ªå®šä¹‰ç±»--&gt;<br>&lt;!--æ³¨å†Œbean--&gt;<br>&lt;bean id=<span class="hljs-string">&quot;diy&quot;</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;nuc.ss.diy.DiyPointCut&quot;</span>/&gt;<br><br>&lt;!--aopçš„é…ç½®--&gt;<br>&lt;aop:config&gt;<br>    &lt;!--è‡ªå®šä¹‰åˆ‡é¢ï¼Œrefè¦å¼•ç”¨çš„ç±»--&gt;<br>    &lt;aop:aspect ref=<span class="hljs-string">&quot;diy&quot;</span>&gt;<br>        &lt;!--åˆ‡å…¥ç‚¹--&gt;<br>        &lt;aop:pointcut id=<span class="hljs-string">&quot;point&quot;</span> expression=<span class="hljs-string">&quot;execution(* nuc.ss.service.UserServiceImpl.*(..))&quot;</span>/&gt;<br>        &lt;aop:before method=<span class="hljs-string">&quot;before&quot;</span> pointcut-ref=<span class="hljs-string">&quot;point&quot;</span>/&gt;<br>        &lt;aop:after method=<span class="hljs-string">&quot;after&quot;</span> pointcut-ref=<span class="hljs-string">&quot;point&quot;</span>/&gt;<br>        &lt;!--é€šçŸ¥--&gt;<br>    &lt;/aop:aspect&gt;<br>&lt;/aop:config&gt;<br></code></pre></td></tr></table></figure></li><li><p>æµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test1</span><span class="hljs-params">()</span> </span>&#123;<br>    ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);<br><br>    UserService userService = (UserService)context.getBean(<span class="hljs-string">&quot;userService&quot;</span>);<br><br>    userService.add();<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><p><strong>æ–¹å¼ä¸‰ï¼šä½¿ç”¨æ³¨è§£å®ç°AOP</strong></p><ol><li><p>ç¼–å†™ä¸€ä¸ªæ³¨è§£å®ç°çš„å¢å¼ºç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ä½¿ç”¨æ³¨è§£æ–¹å¼å®ç°AOP</span><br><span class="hljs-meta">@Aspect</span> <span class="hljs-comment">// æ ‡æ³¨è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªåˆ‡é¢</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AnnotationPointCut</span> </span>&#123;<br><br>    <span class="hljs-meta">@Before(&quot;execution(* com.atrox.service.UserServiceImpl.*(..))&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">before</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;=====æ–¹æ³•æ‰§è¡Œå‰=====&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@After(&quot;execution(* com.atrox.service.UserServiceImpl.*(..))&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">after</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;=====æ–¹æ³•æ‰§è¡Œå=====&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// åœ¨ç¯ç»•å¢å¼ºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç»™å®šä¸€ä¸ªå‚æ•°ï¼Œä»£è¡¨æˆ‘ä»¬è¦å¤„ç†åˆ‡å…¥çš„ç‚¹</span><br>    <span class="hljs-meta">@Around(&quot;execution(* com.atrox.service.UserServiceImpl.*(..))&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">around</span><span class="hljs-params">(ProceedingJoinPoint jp)</span> <span class="hljs-keyword">throws</span> Throwable </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;ç¯ç»•å‰&quot;</span>);<br>        Signature signature = jp.getSignature();<span class="hljs-comment">//è·å¾—ç­¾å</span><br>        System.out.println(<span class="hljs-string">&quot;signature:&quot;</span> + signature);<br>        <span class="hljs-comment">//æ‰§è¡Œæ–¹æ³•</span><br>        Object proceed = jp.proceed();<br>        System.out.println(<span class="hljs-string">&quot;ç¯ç»•å&quot;</span>);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>åœ¨Springé…ç½®æ–‡ä»¶ä¸­ï¼Œæ³¨å†Œbeanï¼Œå¹¶å¢åŠ æ”¯æŒæ³¨è§£çš„é…ç½®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;!--æ–¹å¼ä¸‰--&gt; <br>&lt;bean id=<span class="hljs-string">&quot;annotationPointCut&quot;</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;com.atrox.diy.AnnotationPointCut&quot;</span>/&gt;<br>    &lt;!--å¼€å¯æ³¨è§£æ”¯æŒ JDK(é»˜è®¤) cglib--&gt;<br>&lt;aop:aspectj-autoproxy/&gt;<br></code></pre></td></tr></table></figure></li></ol><h2 id="12ã€æ•´åˆMyBatis"><a href="#12ã€æ•´åˆMyBatis" class="headerlink" title="12ã€æ•´åˆMyBatis"></a>12ã€æ•´åˆMyBatis</h2><p>æ­¥éª¤ï¼š</p><ol><li><p>å¯¼å…¥ç›¸å…³jaråŒ…</p><ul><li><p>junit</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>mybatis</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;dependency&gt;<br>        &lt;groupId&gt;org.mybatis&lt;/groupId&gt;<br>        &lt;artifactId&gt;mybatis&lt;/artifactId&gt;<br>        &lt;version&gt;3.5.2&lt;/version&gt;<br>&lt;/dependency&gt;<br></code></pre></td></tr></table></figure></li><li><p>mysqlæ•°æ®åº“ï¼šmysql-connector-java</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;dependency&gt;<br>    &lt;groupId&gt;mysql&lt;/groupId&gt;<br>    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;<br>    &lt;version&gt;8.0.22&lt;/version&gt;<br>&lt;/dependency&gt;<br></code></pre></td></tr></table></figure></li><li><p>springç›¸å…³ï¼šspring-webmvc</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;<br>    &lt;version&gt;5.3.2&lt;/version&gt;<br>&lt;/dependency&gt;<br></code></pre></td></tr></table></figure></li><li><p>aspectJ AOP ç»‡å…¥å™¨</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;dependency&gt;<br>    &lt;groupId&gt;org.aspectj&lt;/groupId&gt;<br>    &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;<br>    &lt;version&gt;1.9.4&lt;/version&gt;<br>&lt;/dependency&gt;<br></code></pre></td></tr></table></figure></li><li><p>mybatis-springã€newã€‘</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;dependency&gt;<br>    &lt;groupId&gt;org.mybatis&lt;/groupId&gt;<br>    &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;<br>    &lt;version&gt;2.0.2&lt;/version&gt;<br>&lt;/dependency&gt;<br></code></pre></td></tr></table></figure></li><li><p>é…ç½®Mavené™æ€èµ„æºè¿‡æ»¤é—®é¢˜</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;build&gt;<br>    &lt;resources&gt;<br>    &lt;resource&gt;<br>    &lt;directory&gt;src/main/resources&lt;/directory&gt;<br>    &lt;includes&gt;<br>    &lt;include&gt;**<span class="hljs-comment">/*.properties&lt;/include&gt;</span><br>                    &lt;include&gt;**/*.xml&lt;/include&gt;<br>    &lt;/includes&gt;<br>    &lt;filtering&gt;false&lt;/filtering&gt;<br>    &lt;/resource&gt;<br>    &lt;resource&gt;<br>    &lt;directory&gt;src/main/java&lt;/directory&gt;<br>    &lt;includes&gt;<br>    &lt;include&gt;**<span class="hljs-comment">/*.properties&lt;/include&gt;</span><br>                    &lt;include&gt;**/*.xml&lt;/include&gt;<br>    &lt;/includes&gt;<br>    &lt;filtering&gt;false&lt;/filtering&gt;<br>    &lt;/resource&gt;<br>    &lt;/resources&gt;<br>&lt;/build&gt;<br></code></pre></td></tr></table></figure></li></ul></li><li><p>ç¼–å†™é…ç½®æ–‡ä»¶</p></li><li><p>æµ‹è¯•</p></li></ol><h3 id="12-1-å›å¿†mybatis"><a href="#12-1-å›å¿†mybatis" class="headerlink" title="12.1 å›å¿†mybatis"></a>12.1 å›å¿†mybatis</h3><ol><li><p>ç¼–å†™å®ä½“ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String pwd;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™æ ¸å¿ƒé…ç½®æ–‡ä»¶</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> ?&gt;<br>&lt;!DOCTYPE configuration<br>        PUBLIC <span class="hljs-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span><br>        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;<br>&lt;!--configurationæ ¸å¿ƒé…ç½®æ–‡ä»¶--&gt;<br>&lt;configuration&gt;<br><br>    &lt;typeAliases&gt;<br>        &lt;<span class="hljs-keyword">package</span> name=<span class="hljs-string">&quot;com.atrox.pojo&quot;</span>/&gt;<br>    &lt;/typeAliases&gt;<br><br>    &lt;!--å¯ä»¥é…ç½®å¤šå¥—ç¯å¢ƒ <span class="hljs-keyword">default</span>ä¸ºé»˜è®¤é€‰æ‹©çš„ç¯å¢ƒ--&gt;<br>    &lt;environments <span class="hljs-keyword">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;<br>        &lt;environment id=<span class="hljs-string">&quot;development&quot;</span>&gt;<br>            &lt;!--äº‹åŠ¡ç®¡ç†æ–¹å¼é€‰æ‹©JDBCçš„äº‹åŠ¡ç®¡ç†--&gt;<br>            &lt;transactionManager type=<span class="hljs-string">&quot;JDBC&quot;</span>/&gt;<br>            &lt;!--è¿æ¥æ•°æ®åº“çš„é…ç½®ï¼Œæ”¹ä¸ºè‡ªå·±çš„--&gt;<br>            &lt;dataSource type=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;<br>                &lt;property name=<span class="hljs-string">&quot;driver&quot;</span> value=<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;<br>                &lt;!--&amp;amp;ä¸º&amp;çš„è½¬ä¹‰ç¬¦--&gt;<br>                &lt;property name=<span class="hljs-string">&quot;url&quot;</span> value=<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/mybatis?characterEncoding=UTF-8&amp;amp;serverTimezone=GMT&quot;</span>/&gt;<br>                &lt;property name=<span class="hljs-string">&quot;username&quot;</span> value=<span class="hljs-string">&quot;root&quot;</span>/&gt;<br>                &lt;property name=<span class="hljs-string">&quot;password&quot;</span> value=<span class="hljs-string">&quot;zuiweizhiming666&quot;</span>/&gt;<br>            &lt;/dataSource&gt;<br>        &lt;/environment&gt;<br>    &lt;/environments&gt;<br><br>    &lt;mappers&gt;<br>        &lt;mapper <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;com.atrox.mapper.UserMapper&quot;</span>/&gt;<br>    &lt;/mappers&gt;<br>&lt;/configuration&gt;<br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserMapper</span> </span>&#123;<br>   <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">selectUser</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™Mapper.xml</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> ?&gt;<br>&lt;!DOCTYPE mapper<br>        PUBLIC <span class="hljs-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span><br>        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;<br>&lt;mapper namespace=<span class="hljs-string">&quot;com.atrox.mapper.UserMapper&quot;</span>&gt;<br><br>    &lt;select id=<span class="hljs-string">&quot;selectUser&quot;</span> resultType=<span class="hljs-string">&quot;user&quot;</span>&gt;<br>        select * from mybatis.user;<br>    &lt;/select&gt;<br><br>&lt;/mapper&gt;<br></code></pre></td></tr></table></figure></li><li><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br><br>    String resources = <span class="hljs-string">&quot;mybatis-config.xml&quot;</span>;<br>    InputStream in = Resources.getResourceAsStream(resources);<br>    SqlSessionFactory sessionFactory = <span class="hljs-keyword">new</span> SqlSessionFactoryBuilder().build(in);<br>    SqlSession sqlSession = sessionFactory.openSession(<span class="hljs-keyword">true</span>);<br><br>    UserMapper mapper = sqlSession.getMapper(UserMapper.class);<br>    List&lt;User&gt; users = mapper.selectUser();<br>    <span class="hljs-keyword">for</span> (User user : users) &#123;<br>        System.out.println(user);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li></ol><h3 id="12-2-mybatis-spring"><a href="#12-2-mybatis-spring" class="headerlink" title="12.2 mybatis-spring"></a>12.2 mybatis-spring</h3><p><strong>ä»€ä¹ˆæ˜¯ MyBatis-Springï¼Ÿ</strong></p><p>MyBatis-Spring ä¼šå¸®åŠ©ä½ å°† MyBatis ä»£ç æ— ç¼åœ°æ•´åˆåˆ° Spring ä¸­ã€‚</p><p><strong>çŸ¥è¯†åŸºç¡€</strong></p><p>åœ¨å¼€å§‹ä½¿ç”¨ MyBatis-Spring ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆç†Ÿæ‚‰ Spring å’Œ MyBatis è¿™ä¸¤ä¸ªæ¡†æ¶å’Œæœ‰å…³å®ƒä»¬çš„æœ¯è¯­ã€‚è¿™å¾ˆé‡è¦</p><p>MyBatis-Spring éœ€è¦ä»¥ä¸‹ç‰ˆæœ¬ï¼š</p><table><thead><tr><th>MyBatis-Spring</th><th>MyBatis</th><th>Spring æ¡†æ¶</th><th>Spring Batch</th><th>Java</th></tr></thead><tbody><tr><td>2.0</td><td>3.5+</td><td>5.0+</td><td>4.0+</td><td>Java 8+</td></tr><tr><td>1.3</td><td>3.4+</td><td>3.2.2+</td><td>2.1+</td><td>Java 6+</td></tr></tbody></table><p>å¦‚æœä½¿ç”¨ Maven ä½œä¸ºæ„å»ºå·¥å…·ï¼Œä»…éœ€è¦åœ¨ pom.xml ä¸­åŠ å…¥ä»¥ä¸‹ä»£ç å³å¯ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>æ•´åˆæ–¹å¼ä¸€</strong>ï¼š</p><ol><li><p>å¼•å…¥é…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-tag"><span class="hljs-string">       http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™æ•°æ®æº</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--DataSource:ä½¿ç”¨Springçš„æ•°æ®æºæ›¿æ¢MyBatisçš„é…ç½® c3p0 dbcp druid</span><br><span class="hljs-comment">    æˆ‘ä»¬è¿™é‡Œä½¿ç”¨Springæä¾›çš„JDBC--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClassName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/mybatis?characterEncoding=UTF-8<span class="hljs-symbol">&amp;amp;</span>serverTimezone=GMT&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;root&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;zuiweizhiming666&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>sqlessionFactory</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--sqlSessionFactory--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--ç»‘å®šmybatisé…ç½®æ–‡ä»¶--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;configLocation&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;classpath:mybatis-config.xml&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;mapperLocations&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;classpath:com/atrox/mapper/*.xml&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>sqlSessionTemplate</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--SqlSrssionTemplate:å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„sqlSession--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;sqlSession&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--åªèƒ½ä½¿ç”¨æ„é€ å™¨æ³¨å…¥sqlSessionFactoryï¼Œå› ä¸ºå®ƒæ²¡æœ‰setæ–¹æ³•--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>éœ€è¦ç»™æ¥å£åŠ å®ç°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserMapperImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserMapper</span></span>&#123;<br><br>    <span class="hljs-comment">// ä¹‹å‰æ‰€æœ‰çš„ä»£ç éƒ½æ˜¯åœ¨æµ‹è¯•ç±»é‡Œå†™çš„ï¼Œç°åœ¨æŒªåˆ°è¿™é‡Œ</span><br>    <span class="hljs-comment">// åœ¨åŸæ¥ï¼Œæˆ‘ä»¬çš„æ‰€æœ‰æ“ä½œï¼Œéƒ½ä½¿ç”¨sqlSessionæ¥æ‰§è¡Œã€‚ç°åœ¨éƒ½ä½¿ç”¨SqlSessionTemplate</span><br>    <span class="hljs-keyword">private</span> SqlSessionTemplate sqlSession;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setSqlSession</span><span class="hljs-params">(SqlSessionTemplate sqlSession)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.sqlSession = sqlSession;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">selectUser</span><span class="hljs-params">()</span> </span>&#123;<br>        UserMapper mapper = sqlSession.getMapper(UserMapper.class);<br>        <span class="hljs-keyword">return</span> mapper.selectUser();<br><br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å°†è‡ªå·±å†™çš„å®ç°ç±»ï¼Œæ³¨å…¥åˆ°Springä¸­</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userMapper&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atrox.mapper.UserMapperImpl&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sqlSession&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;sqlSession&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>æµ‹è¯•ä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br><br>    ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;spring-dao.xml&quot;</span>);<br><br>    UserMapper userMapper = context.getBean(<span class="hljs-string">&quot;userMapper&quot;</span>, UserMapper.class);<br>    <span class="hljs-keyword">for</span> (User user : userMapper.selectUser()) &#123;<br>        System.out.println(user);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>ç»“æœæˆåŠŸè¾“å‡ºï¼ç°åœ¨æˆ‘ä»¬çš„Mybatisé…ç½®æ–‡ä»¶çš„çŠ¶æ€ï¼å‘ç°éƒ½å¯ä»¥è¢«Springæ•´åˆï¼</p><p>ä¸ºäº†ç»™mybatis-config.xmlç•™ç‚¹é¢å­(ä½¿ç”¨æ–¹ä¾¿)ï¼Œåœ¨å…¶ä¸­å°†åˆ«åå’Œè®¾ç½®ç•™ä¸‹æ¥</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">configuration</span></span><br><span class="hljs-meta">       <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="hljs-meta">       <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">typeAliases</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;nuc.ss.pojo&quot;</span>/&gt;</span><br> <span class="hljs-tag">&lt;/<span class="hljs-name">typeAliases</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- &lt;settings&gt;</span><br><span class="hljs-comment"> &lt;setting&gt;&lt;/setting&gt;</span><br><span class="hljs-comment"> &lt;/settings&gt; --&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ol><p><strong>æ•´åˆæ–¹å¼äºŒ</strong></p><p>å®˜æ–¹æ–‡æ¡£æˆªå›¾ :</p><p>daoç»§æ‰¿Supportç±» , ç›´æ¥åˆ©ç”¨ getSqlSession() è·å¾— , ç„¶åç›´æ¥æ³¨å…¥SqlSessionFactory . æ¯”èµ·æ–¹å¼1 , ä¸éœ€è¦ç®¡ç†SqlSessionTemplate , è€Œä¸”å¯¹äº‹åŠ¡çš„æ”¯æŒæ›´åŠ å‹å¥½ . å¯è·Ÿè¸ªæºç æŸ¥çœ‹</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/Spring5%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/SqlSessionDaoSupport.png" alt="ç¬¬äºŒç§æ•´åˆæ–¹å¼"></p><p>æµ‹è¯•ï¼š</p><ol><li><p>å°†æˆ‘ä»¬ä¸Šé¢å†™çš„UserDaoImplä¿®æ”¹ä¸€ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SqlSessionDaoSupport</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserMapper</span> </span>&#123;<br>   <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">selectUser</span><span class="hljs-params">()</span> </span>&#123;<br>       UserMapper mapper = getSqlSession().getMapper(UserMapper.class);<br>       <span class="hljs-keyword">return</span> mapper.selectUser();<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹beançš„é…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;nuc.ss.dao.UserDaoImpl&quot;</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test2</span><span class="hljs-params">()</span></span>&#123;<br>   ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);<br>   UserMapper mapper = (UserMapper) context.getBean(<span class="hljs-string">&quot;userDao&quot;</span>);<br>   List&lt;User&gt; user = mapper.selectUser();<br>   System.out.println(user);<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><p><strong>æ€»ç»“ : æ•´åˆåˆ°springä»¥åå¯ä»¥å®Œå…¨ä¸è¦mybatisçš„é…ç½®æ–‡ä»¶ï¼Œé™¤äº†è¿™äº›æ–¹å¼å¯ä»¥å®ç°æ•´åˆä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨æ³¨è§£æ¥å®ç°ï¼Œè¿™ä¸ªç­‰æˆ‘ä»¬åé¢å­¦ä¹ SpringBootçš„æ—¶å€™è¿˜ä¼šæµ‹è¯•æ•´åˆï¼</strong></p><h2 id="13ã€å£°æ˜å¼äº‹åŠ¡"><a href="#13ã€å£°æ˜å¼äº‹åŠ¡" class="headerlink" title="13ã€å£°æ˜å¼äº‹åŠ¡"></a>13ã€å£°æ˜å¼äº‹åŠ¡</h2><h3 id="13-1-å›é¡¾äº‹åŠ¡"><a href="#13-1-å›é¡¾äº‹åŠ¡" class="headerlink" title="13.1 å›é¡¾äº‹åŠ¡"></a>13.1 å›é¡¾äº‹åŠ¡</h3><ul><li>æŠŠä¸€ç»„ä¸šåŠ¡å½“æˆä¸€ä¸ªä¸šåŠ¡æ¥åšï¼›è¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥</li><li>äº‹åŠ¡åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œååˆ†çš„é‡è¦ï¼Œæ¶‰åŠåˆ°æ•°æ®çš„ä¸€è‡´æ€§é—®é¢˜ï¼Œä¸èƒ½é©¬è™</li><li>ç¡®ä¿å®Œæ•´æ€§å’Œä¸€è‡´æ€§ï¼›</li></ul><p>äº‹åŠ¡ACIDåŸåˆ™ï¼š</p><ul><li>åŸå­æ€§</li><li>ä¸€è‡´æ€§</li><li>éš”ç¦»æ€§<ul><li>å¤šä¸ªä¸šåŠ¡å¯èƒ½æ“ä½œåŒä¸€ä¸ªèµ„æºï¼Œé˜²æ­¢æ•°æ®æŸå</li></ul></li><li>æŒä¹…æ€§<ul><li>äº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œæ— è®ºç³»ç»Ÿå‘ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Œç»“æœéƒ½ä¸ä¼šå†å½±å“ï¼Œè¢«æŒä¹…åŒ–çš„å†™åˆ°å­˜å‚¨å™¨ä¸­ã€‚</li></ul></li></ul><h3 id="13-2-springä¸­çš„äº‹åŠ¡ç®¡ç†"><a href="#13-2-springä¸­çš„äº‹åŠ¡ç®¡ç†" class="headerlink" title="13.2 springä¸­çš„äº‹åŠ¡ç®¡ç†"></a>13.2 springä¸­çš„äº‹åŠ¡ç®¡ç†</h3><ul><li><p><strong>å£°æ˜å¼äº‹åŠ¡ï¼šAOP</strong></p><ul><li>ä¸€èˆ¬æƒ…å†µä¸‹æ¯”ç¼–ç¨‹å¼äº‹åŠ¡å¥½ç”¨ã€‚</li><li>å°†äº‹åŠ¡ç®¡ç†ä»£ç ä»ä¸šåŠ¡æ–¹æ³•ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œä»¥å£°æ˜çš„æ–¹å¼æ¥å®ç°äº‹åŠ¡ç®¡ç†ã€‚</li><li>å°†äº‹åŠ¡ç®¡ç†ä½œä¸ºæ¨ªåˆ‡å…³æ³¨ç‚¹ï¼Œé€šè¿‡aopæ–¹æ³•æ¨¡å—åŒ–ã€‚Springä¸­é€šè¿‡Spring AOPæ¡†æ¶æ”¯æŒå£°æ˜å¼äº‹åŠ¡ç®¡ç†</li></ul></li><li><p>ç¼–ç¨‹å¼äº‹åŠ¡ï¼šéœ€è¦åœ¨ä»£ç ä¸­ï¼Œè¿›è¡Œäº‹åŠ¡çš„ç®¡ç†</p><ul><li>å°†äº‹åŠ¡ç®¡ç†ä»£ç åµŒåˆ°ä¸šåŠ¡æ–¹æ³•ä¸­æ¥æ§åˆ¶äº‹åŠ¡çš„æäº¤å’Œå›æ»š</li><li>ç¼ºç‚¹ï¼šå¿…é¡»åœ¨æ¯ä¸ªäº‹åŠ¡æ“ä½œä¸šåŠ¡é€»è¾‘ä¸­åŒ…å«é¢å¤–çš„äº‹åŠ¡ç®¡ç†ä»£ç </li></ul></li><li><p><strong>ä½¿ç”¨Springç®¡ç†äº‹åŠ¡ï¼Œæ³¨æ„å¤´æ–‡ä»¶çš„çº¦æŸå¯¼å…¥ : tx</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">xmlns:tx=<span class="hljs-string">&quot;http://www.springframework.org/schema/tx&quot;</span><br><br>http:<span class="hljs-comment">//www.springframework.org/schema/tx</span><br>http:<span class="hljs-comment">//www.springframework.org/schema/tx/spring-tx.xsd&quot;&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>äº‹åŠ¡ç®¡ç†å™¨</strong></p><ul><li>æ— è®ºä½¿ç”¨Springçš„å“ªç§äº‹åŠ¡ç®¡ç†ç­–ç•¥ï¼ˆç¼–ç¨‹å¼æˆ–è€…å£°æ˜å¼ï¼‰äº‹åŠ¡ç®¡ç†å™¨éƒ½æ˜¯å¿…é¡»çš„ã€‚</li><li>å°±æ˜¯ Springçš„æ ¸å¿ƒäº‹åŠ¡ç®¡ç†æŠ½è±¡ï¼Œç®¡ç†å°è£…äº†ä¸€ç»„ç‹¬ç«‹äºæŠ€æœ¯çš„æ–¹æ³•ã€‚</li></ul></li><li><p><strong>JDBCäº‹åŠ¡</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;transactionManager&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>é…ç½®äº‹åŠ¡çš„é€šçŸ¥</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--ç»“åˆAOPå®ç°äº‹åŠ¡çš„ç»‡å…¥--&gt;</span><br><span class="hljs-comment">&lt;!--é…ç½®äº‹åŠ¡é€šçŸ¥--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">tx:advice</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;txAdvice&quot;</span> <span class="hljs-attr">transaction-manager</span>=<span class="hljs-string">&quot;transactionManager&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--è¦ç»™å“ªäº›æ–¹æ³•é…ç½®äº‹åŠ¡--&gt;</span><br>    <span class="hljs-comment">&lt;!--é…ç½®äº‹åŠ¡çš„ä¼ æ’­ç‰¹æ€§ï¼šæ–°ç‰¹æ€§--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tx:attributes</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;add&quot;</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">&quot;REQUIRED&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;delete&quot;</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">&quot;REQUIRED&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;update&quot;</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">&quot;REQUIRED&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;query&quot;</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">&quot;REQUIRED&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;*&quot;</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">&quot;REQUIRED&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tx:attributes</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">tx:advice</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>springäº‹åŠ¡ä¼ æ’­ç‰¹æ€§</strong></p><ul><li><strong>propagation_requierd</strong>ï¼šå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±æ–°å»ºä¸€ä¸ªäº‹åŠ¡ï¼Œå¦‚æœå·²å­˜åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼ŒåŠ å…¥åˆ°è¿™ä¸ªäº‹åŠ¡ä¸­ï¼Œè¿™æ˜¯æœ€å¸¸è§çš„é€‰æ‹©ã€‚</li><li>propagation_supportsï¼šæ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœæ²¡æœ‰å½“å‰äº‹åŠ¡ï¼Œå°±ä»¥éäº‹åŠ¡æ–¹æ³•æ‰§è¡Œã€‚</li><li>propagation_mandatoryï¼šä½¿ç”¨å½“å‰äº‹åŠ¡ï¼Œå¦‚æœæ²¡æœ‰å½“å‰äº‹åŠ¡ï¼Œå°±æŠ›å‡ºå¼‚å¸¸ã€‚</li><li>propagation_required_newï¼šæ–°å»ºäº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼ŒæŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚</li><li>propagation_not_supportedï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œæ“ä½œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚</li><li>propagation_neverï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œæ“ä½œï¼Œå¦‚æœå½“å‰äº‹åŠ¡å­˜åœ¨åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</li><li><strong>propagation_nested</strong>ï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åœ¨åµŒå¥—äº‹åŠ¡å†…æ‰§è¡Œã€‚å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æ‰§è¡Œä¸propagation_requiredç±»ä¼¼çš„æ“ä½œ</li></ul></li><li><p><strong>é…ç½®AOP</strong>ï¼ˆå¯¼å…¥aopçš„å¤´æ–‡ä»¶ï¼ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--é…ç½®aopç»‡å…¥äº‹åŠ¡--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">aop:pointcut</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;txPointcut&quot;</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">&quot;execution(* nuc.ss.dao.*.*(..))&quot;</span>/&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">aop:advisor</span> <span class="hljs-attr">advice-ref</span>=<span class="hljs-string">&quot;txAdvice&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;txPointcut&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><p>æ€è€ƒï¼š</p><p>ä¸ºä»€ä¹ˆéœ€è¦äº‹åŠ¡ï¼Ÿ</p><ul><li>å¦‚æœä¸é…ç½®ï¼Œå¯èƒ½å­˜åœ¨æ•°æ®æäº¤ä¸ä¸€è‡´çš„æƒ…å†µï¼›</li><li>å¦‚æœæˆ‘ä»¬ä¸åœ¨Springä¸­å»é…ç½®å£°æ˜å¼äº‹åŠ¡ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä»£ç ä¸­æ‰‹åŠ¨é…ç½®äº‹åŠ¡ï¼</li><li>äº‹åŠ¡åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹éå¸¸é‡è¦ï¼Œæ¶‰åŠåˆ°æ•°æ®çš„ä¸€è‡´æ€§çš„é—®é¢˜ï¼Œä¸å®¹é©¬è™ï¼</li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>Spring</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è¶…å¸‚ç®¡ç†ç³»ç»Ÿ-JSPç‰ˆæœ¬</title>
    <link href="/posts/2020/12/31/%E8%B6%85%E5%B8%82%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-JSP%E7%89%88%E6%9C%AC/"/>
    <url>/posts/2020/12/31/%E8%B6%85%E5%B8%82%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-JSP%E7%89%88%E6%9C%AC/</url>
    
    <content type="html"><![CDATA[<h1 id="SMBMS"><a href="#SMBMS" class="headerlink" title="SMBMS"></a>SMBMS</h1><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/%E8%B6%85%E5%B8%82%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-JSP%E7%89%88%E6%9C%AC/SMBMS.png" alt="SMBMSæ•´ä½“æ¶æ„"></p><p><strong>é¡¹ç›®å¦‚ä½•æ­å»º</strong>ï¼Ÿ</p><p>è€ƒè™‘é€‚ç”¨ä¸é€‚ç”¨Mavenï¼Ÿä¾èµ–ï¼Œjar</p><h3 id="é¡¹ç›®æ­å»º"><a href="#é¡¹ç›®æ­å»º" class="headerlink" title="é¡¹ç›®æ­å»º"></a>é¡¹ç›®æ­å»º</h3><ol><li><p>æ­å»ºä¸€ä¸ªmavenwebé¡¹ç›®</p></li><li><p>é…ç½®Tomcat</p></li><li><p>æµ‹è¯•é¡¹ç›®æ˜¯å¦èƒ½å¤Ÿè·‘èµ·æ¥</p></li><li><p>å¯¼å…¥é¡¹ç›®ä¸­ä¼šé‡åˆ°çš„jaråŒ…</p><p>jspï¼ŒServletï¼Œmysqlé©±åŠ¨ï¼Œjstlï¼Œstandard</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>servlet-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jsp-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.22<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet.jsp.jstl<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jstl-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>taglibs<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>standard<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>åˆ›å»ºé¡¹ç›®åŒ…ç»“æ„</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/%E8%B6%85%E5%B8%82%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-JSP%E7%89%88%E6%9C%AC/project_directory_structure.png" alt="é¡¹ç›®åŒ…ç»“æ„"></p></li><li><p>å®ä½“ç±»</p><p><strong>ORMæ˜ å°„</strong>ï¼šè¡¨â€”ç±»æ˜ å°„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// User ç±»</span><br><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> Integer id; <span class="hljs-comment">//id</span><br>    <span class="hljs-keyword">private</span> String userCode; <span class="hljs-comment">//ç”¨æˆ·ç¼–ç </span><br>    <span class="hljs-keyword">private</span> String userName; <span class="hljs-comment">//ç”¨æˆ·åç§°</span><br>    <span class="hljs-keyword">private</span> String userPassword; <span class="hljs-comment">//ç”¨æˆ·å¯†ç </span><br>    <span class="hljs-keyword">private</span> Integer gender;  <span class="hljs-comment">//æ€§åˆ«</span><br>    <span class="hljs-keyword">private</span> Date birthday;  <span class="hljs-comment">//å‡ºç”Ÿæ—¥æœŸ</span><br>    <span class="hljs-keyword">private</span> String phone;   <span class="hljs-comment">//ç”µè¯</span><br>    <span class="hljs-keyword">private</span> String address; <span class="hljs-comment">//åœ°å€</span><br>    <span class="hljs-keyword">private</span> Integer userRole;    <span class="hljs-comment">//ç”¨æˆ·è§’è‰²</span><br>    <span class="hljs-keyword">private</span> Integer createdBy;   <span class="hljs-comment">//åˆ›å»ºè€…</span><br>    <span class="hljs-keyword">private</span> Date creationDate; <span class="hljs-comment">//åˆ›å»ºæ—¶é—´</span><br>    <span class="hljs-keyword">private</span> Integer modifyBy;     <span class="hljs-comment">//æ›´æ–°è€…</span><br>    <span class="hljs-keyword">private</span> Date modifyDate;   <span class="hljs-comment">//æ›´æ–°æ—¶é—´</span><br><br>    <span class="hljs-keyword">private</span> Integer age;<span class="hljs-comment">//å¹´é¾„</span><br><br>    <span class="hljs-keyword">private</span> String userRoleName;    <span class="hljs-comment">//ç”¨æˆ·è§’è‰²åç§°</span><br><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getUserRoleName</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> userRoleName;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUserRoleName</span><span class="hljs-params">(String userRoleName)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.userRoleName = userRoleName;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getAge</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-comment">/*long time = System.currentTimeMillis()-birthday.getTime();</span><br><span class="hljs-comment">Integer age = Long.valueOf(time/365/24/60/60/1000).IntegerValue();*/</span><br>        Date date = <span class="hljs-keyword">new</span> Date();<br>        Integer age = date.getYear()-birthday.getYear();<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getId</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> id;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setId</span><span class="hljs-params">(Integer id)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.id = id;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getUserCode</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> userCode;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUserCode</span><span class="hljs-params">(String userCode)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.userCode = userCode;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getUserName</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> userName;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUserName</span><span class="hljs-params">(String userName)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.userName = userName;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getUserPassword</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> userPassword;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUserPassword</span><span class="hljs-params">(String userPassword)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.userPassword = userPassword;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getGender</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> gender;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setGender</span><span class="hljs-params">(Integer gender)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.gender = gender;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Date <span class="hljs-title">getBirthday</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> birthday;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBirthday</span><span class="hljs-params">(Date birthday)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.birthday = birthday;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getPhone</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> phone;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setPhone</span><span class="hljs-params">(String phone)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.phone = phone;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getAddress</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> address;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setAddress</span><span class="hljs-params">(String address)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.address = address;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getUserRole</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> userRole;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUserRole</span><span class="hljs-params">(Integer userRole)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.userRole = userRole;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getCreatedBy</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> createdBy;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCreatedBy</span><span class="hljs-params">(Integer createdBy)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.createdBy = createdBy;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Date <span class="hljs-title">getCreationDate</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> creationDate;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCreationDate</span><span class="hljs-params">(Date creationDate)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.creationDate = creationDate;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getModifyBy</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> modifyBy;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setModifyBy</span><span class="hljs-params">(Integer modifyBy)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.modifyBy = modifyBy;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Date <span class="hljs-title">getModifyDate</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> modifyDate;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setModifyDate</span><span class="hljs-params">(Date modifyDate)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.modifyDate = modifyDate;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol>   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//Billç±»</span><br><span class="hljs-keyword">import</span> java.math.BigDecimal;<br><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Bill</span> </span>&#123;<br><span class="hljs-keyword">private</span> Integer id;   <span class="hljs-comment">//id </span><br><span class="hljs-keyword">private</span> String billCode; <span class="hljs-comment">//è´¦å•ç¼–ç  </span><br><span class="hljs-keyword">private</span> String productName; <span class="hljs-comment">//å•†å“åç§° </span><br><span class="hljs-keyword">private</span> String productDesc; <span class="hljs-comment">//å•†å“æè¿° </span><br><span class="hljs-keyword">private</span> String productUnit; <span class="hljs-comment">//å•†å“å•ä½</span><br><span class="hljs-keyword">private</span> BigDecimal productCount; <span class="hljs-comment">//å•†å“æ•°é‡ </span><br><span class="hljs-keyword">private</span> BigDecimal totalPrice; <span class="hljs-comment">//æ€»é‡‘é¢</span><br><span class="hljs-keyword">private</span> Integer isPayment; <span class="hljs-comment">//æ˜¯å¦æ”¯ä»˜ </span><br><span class="hljs-keyword">private</span> Integer providerId; <span class="hljs-comment">//ä¾›åº”å•†ID </span><br><span class="hljs-keyword">private</span> Integer createdBy; <span class="hljs-comment">//åˆ›å»ºè€…</span><br><span class="hljs-keyword">private</span> Date creationDate; <span class="hljs-comment">//åˆ›å»ºæ—¶é—´</span><br><span class="hljs-keyword">private</span> Integer modifyBy; <span class="hljs-comment">//æ›´æ–°è€…</span><br><span class="hljs-keyword">private</span> Date modifyDate;<span class="hljs-comment">//æ›´æ–°æ—¶é—´</span><br><br><span class="hljs-keyword">private</span> String providerName;<span class="hljs-comment">//ä¾›åº”å•†åç§°</span><br><br><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getProviderName</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> providerName;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProviderName</span><span class="hljs-params">(String providerName)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.providerName = providerName;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getId</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> id;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setId</span><span class="hljs-params">(Integer id)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.id = id;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getBillCode</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> billCode;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBillCode</span><span class="hljs-params">(String billCode)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.billCode = billCode;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getProductName</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> productName;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProductName</span><span class="hljs-params">(String productName)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.productName = productName;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getProductDesc</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> productDesc;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProductDesc</span><span class="hljs-params">(String productDesc)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.productDesc = productDesc;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getProductUnit</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> productUnit;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProductUnit</span><span class="hljs-params">(String productUnit)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.productUnit = productUnit;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> BigDecimal <span class="hljs-title">getProductCount</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> productCount;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProductCount</span><span class="hljs-params">(BigDecimal productCount)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.productCount = productCount;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> BigDecimal <span class="hljs-title">getTotalPrice</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> totalPrice;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setTotalPrice</span><span class="hljs-params">(BigDecimal totalPrice)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.totalPrice = totalPrice;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getIsPayment</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> isPayment;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setIsPayment</span><span class="hljs-params">(Integer isPayment)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.isPayment = isPayment;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getProviderId</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> providerId;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProviderId</span><span class="hljs-params">(Integer providerId)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.providerId = providerId;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getCreatedBy</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> createdBy;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCreatedBy</span><span class="hljs-params">(Integer createdBy)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.createdBy = createdBy;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> Date <span class="hljs-title">getCreationDate</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> creationDate;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCreationDate</span><span class="hljs-params">(Date creationDate)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.creationDate = creationDate;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getModifyBy</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> modifyBy;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setModifyBy</span><span class="hljs-params">(Integer modifyBy)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.modifyBy = modifyBy;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> Date <span class="hljs-title">getModifyDate</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> modifyDate;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setModifyDate</span><span class="hljs-params">(Date modifyDate)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.modifyDate = modifyDate;<br>&#125;<br><br><br>&#125;<br></code></pre></td></tr></table></figure>   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//Roleç±»</span><br><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Role</span> </span>&#123;<br><br><span class="hljs-keyword">private</span> Integer id;   <span class="hljs-comment">//id</span><br><span class="hljs-keyword">private</span> String roleCode; <span class="hljs-comment">//è§’è‰²ç¼–ç </span><br><span class="hljs-keyword">private</span> String roleName; <span class="hljs-comment">//è§’è‰²åç§°</span><br><span class="hljs-keyword">private</span> Integer createdBy; <span class="hljs-comment">//åˆ›å»ºè€…</span><br><span class="hljs-keyword">private</span> Date creationDate; <span class="hljs-comment">//åˆ›å»ºæ—¶é—´</span><br><span class="hljs-keyword">private</span> Integer modifyBy; <span class="hljs-comment">//æ›´æ–°è€…</span><br><span class="hljs-keyword">private</span> Date modifyDate;<span class="hljs-comment">//æ›´æ–°æ—¶é—´</span><br><br><span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getId</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> id;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setId</span><span class="hljs-params">(Integer id)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.id = id;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getRoleCode</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> roleCode;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setRoleCode</span><span class="hljs-params">(String roleCode)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.roleCode = roleCode;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getRoleName</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> roleName;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setRoleName</span><span class="hljs-params">(String roleName)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.roleName = roleName;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getCreatedBy</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> createdBy;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCreatedBy</span><span class="hljs-params">(Integer createdBy)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.createdBy = createdBy;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> Date <span class="hljs-title">getCreationDate</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> creationDate;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCreationDate</span><span class="hljs-params">(Date creationDate)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.creationDate = creationDate;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getModifyBy</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> modifyBy;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setModifyBy</span><span class="hljs-params">(Integer modifyBy)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.modifyBy = modifyBy;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> Date <span class="hljs-title">getModifyDate</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> modifyDate;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setModifyDate</span><span class="hljs-params">(Date modifyDate)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.modifyDate = modifyDate;<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//Providerç±»</span><br><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Provider</span> </span>&#123;<br><br><span class="hljs-keyword">private</span> Integer id;   <span class="hljs-comment">//id</span><br><span class="hljs-keyword">private</span> String proCode; <span class="hljs-comment">//ä¾›åº”å•†ç¼–ç </span><br><span class="hljs-keyword">private</span> String proName; <span class="hljs-comment">//ä¾›åº”å•†åç§°</span><br><span class="hljs-keyword">private</span> String proDesc; <span class="hljs-comment">//ä¾›åº”å•†æè¿°</span><br><span class="hljs-keyword">private</span> String proContact; <span class="hljs-comment">//ä¾›åº”å•†è”ç³»äºº</span><br><span class="hljs-keyword">private</span> String proPhone; <span class="hljs-comment">//ä¾›åº”å•†ç”µè¯</span><br><span class="hljs-keyword">private</span> String proAddress; <span class="hljs-comment">//ä¾›åº”å•†åœ°å€</span><br><span class="hljs-keyword">private</span> String proFax; <span class="hljs-comment">//ä¾›åº”å•†ä¼ çœŸ</span><br><span class="hljs-keyword">private</span> Integer createdBy; <span class="hljs-comment">//åˆ›å»ºè€…</span><br><span class="hljs-keyword">private</span> Date creationDate; <span class="hljs-comment">//åˆ›å»ºæ—¶é—´</span><br><span class="hljs-keyword">private</span> Integer modifyBy; <span class="hljs-comment">//æ›´æ–°è€…</span><br><span class="hljs-keyword">private</span> Date modifyDate;<span class="hljs-comment">//æ›´æ–°æ—¶é—´</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getId</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> id;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setId</span><span class="hljs-params">(Integer id)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.id = id;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getProCode</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> proCode;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProCode</span><span class="hljs-params">(String proCode)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.proCode = proCode;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getProName</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> proName;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProName</span><span class="hljs-params">(String proName)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.proName = proName;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getProDesc</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> proDesc;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProDesc</span><span class="hljs-params">(String proDesc)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.proDesc = proDesc;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getProContact</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> proContact;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProContact</span><span class="hljs-params">(String proContact)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.proContact = proContact;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getProPhone</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> proPhone;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProPhone</span><span class="hljs-params">(String proPhone)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.proPhone = proPhone;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getProAddress</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> proAddress;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProAddress</span><span class="hljs-params">(String proAddress)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.proAddress = proAddress;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getProFax</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> proFax;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProFax</span><span class="hljs-params">(String proFax)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.proFax = proFax;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getCreatedBy</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> createdBy;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCreatedBy</span><span class="hljs-params">(Integer createdBy)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.createdBy = createdBy;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> Date <span class="hljs-title">getCreationDate</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> creationDate;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCreationDate</span><span class="hljs-params">(Date creationDate)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.creationDate = creationDate;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getModifyBy</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> modifyBy;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setModifyBy</span><span class="hljs-params">(Integer modifyBy)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.modifyBy = modifyBy;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> Date <span class="hljs-title">getModifyDate</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> modifyDate;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setModifyDate</span><span class="hljs-params">(Date modifyDate)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.modifyDate = modifyDate;<br>&#125;<br><br><br>&#125;<br></code></pre></td></tr></table></figure><ol start="7"><li><p>ç¼–å†™åŸºç¡€å…¬å…±ç±»</p><ol><li><p>æ•°æ®åº“é…ç½®æ–‡ä»¶ db.properties</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">driver</span>=<span class="hljs-string">com.mysql.jdbc.Driver</span><br><span class="hljs-attr">url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=GMT</span><br><span class="hljs-attr">user</span>=<span class="hljs-string">root</span><br><span class="hljs-attr">password</span>=<span class="hljs-string">zuiweizhiming666</span><br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™æ“ä½œæ•°æ®åº“çš„å…¬å…±ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.sql.*;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-comment">// æ“ä½œæ•°æ®åº“çš„å…¬å…±ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BaseDao</span> </span>&#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String driver;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String url;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String username;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String password;<br><br>    <span class="hljs-comment">// é™æ€ä»£ç å—ï¼Œç±»åŠ è½½çš„æ—¶å€™å°±åˆå§‹åŒ–äº†</span><br>    <span class="hljs-keyword">static</span> &#123;<br>        Properties properties = <span class="hljs-keyword">new</span> Properties();<br>        <span class="hljs-comment">// é€šè¿‡ç±»åŠ è½½å™¨è¯»å–å¯¹åº”çš„èµ„æº</span><br>        InputStream is = BaseDao.class.getClassLoader().getResourceAsStream(<span class="hljs-string">&quot;db.properties&quot;</span>);<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            properties.load(is);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br><br>        driver = properties.getProperty(<span class="hljs-string">&quot;driver&quot;</span>);<br>        url= properties.getProperty(<span class="hljs-string">&quot;url&quot;</span>);<br>        username = properties.getProperty(<span class="hljs-string">&quot;username&quot;</span>);<br>        password = properties.getProperty(<span class="hljs-string">&quot;password&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// è·å–æ•°æ®åº“çš„è¿æ¥</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Connection <span class="hljs-title">getConnection</span><span class="hljs-params">()</span> </span>&#123;<br><br>        Connection connection = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            Class.forName(driver);<br>            connection = DriverManager.getConnection(url, username, password);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">return</span> connection;<br><br>    &#125;<br><br>    <span class="hljs-comment">// ç¼–å†™æŸ¥è¯¢å…¬å…±æ–¹æ³•</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ResultSet <span class="hljs-title">executeSelect</span><span class="hljs-params">(Connection connection,String sql,Object[] params,PreparedStatement preparedStatement)</span> <span class="hljs-keyword">throws</span> SQLException </span>&#123;<br><br>        <span class="hljs-comment">// é¢„ç¼–è¯‘çš„sqlï¼Œç¾åmainç›´æ¥æ‰§è¡Œå°±å¯ä»¥äº†</span><br>        preparedStatement = connection.prepareStatement(sql);<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; params.length; i++) &#123;<br>            <span class="hljs-comment">//setObjectï¼Œå ä½ç¬¦ä»1å¼€å§‹ï¼Œä½†æ˜¯æˆ‘ä»¬çš„æ•°ç»„æ˜¯ä»0å¼€å§‹ï¼</span><br>            preparedStatement.setObject(i+<span class="hljs-number">1</span>,params[i]);<br>        &#125;<br><br>        ResultSet resultSet = preparedStatement.executeQuery();<br>        <span class="hljs-keyword">return</span> resultSet;<br>    &#125;<br><br>    <span class="hljs-comment">// ç¼–å†™å¢åˆ æ”¹å…¬å…±æ–¹æ³•</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">executeUpdate</span><span class="hljs-params">(Connection connection,String sql,Object[] params,PreparedStatement preparedStatement)</span> <span class="hljs-keyword">throws</span> SQLException </span>&#123;<br><br>        preparedStatement = connection.prepareStatement(sql);<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; params.length; i++) &#123;<br>            <span class="hljs-comment">//setObjectï¼Œå ä½ç¬¦ä»1å¼€å§‹ï¼Œä½†æ˜¯æˆ‘ä»¬çš„æ•°ç»„æ˜¯ä»0å¼€å§‹ï¼</span><br>            preparedStatement.setObject(i+<span class="hljs-number">1</span>,params[i]);<br>        &#125;<br><br>        <span class="hljs-keyword">int</span> updateRows = preparedStatement.executeUpdate();<br>        <span class="hljs-keyword">return</span> updateRows;<br>    &#125;<br><br>    <span class="hljs-comment">// é‡Šæ”¾èµ„æº</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">closeResources</span><span class="hljs-params">(Connection connection, PreparedStatement preparedStatement, ResultSet resultSet)</span> </span>&#123;<br><br>        <span class="hljs-keyword">boolean</span> flag = <span class="hljs-keyword">true</span>;<br><br>        <span class="hljs-keyword">if</span> (resultSet != <span class="hljs-keyword">null</span>) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                resultSet.close();<br>                <span class="hljs-comment">// GCå›æ”¶</span><br>                resultSet = <span class="hljs-keyword">null</span>;<br>            &#125; <span class="hljs-keyword">catch</span> (SQLException throwables) &#123;<br>                throwables.printStackTrace();<br>                flag = <span class="hljs-keyword">false</span>;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (preparedStatement != <span class="hljs-keyword">null</span>) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                preparedStatement.close();<br>                <span class="hljs-comment">// GCå›æ”¶</span><br>                preparedStatement = <span class="hljs-keyword">null</span>;<br>            &#125; <span class="hljs-keyword">catch</span> (SQLException throwables) &#123;<br>                throwables.printStackTrace();<br>                flag = <span class="hljs-keyword">false</span>;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (connection != <span class="hljs-keyword">null</span>) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                connection.close();<br>                <span class="hljs-comment">// GCå›æ”¶</span><br>                connection = <span class="hljs-keyword">null</span>;<br>            &#125; <span class="hljs-keyword">catch</span> (SQLException throwables) &#123;<br>                throwables.printStackTrace();<br>                flag = <span class="hljs-keyword">false</span>;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> flag;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™å­—ç¬¦ç¼–ç è¿‡æ»¤å™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CharacterEncodingFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Filter</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">(FilterConfig filterConfig)</span> <span class="hljs-keyword">throws</span> ServletException </span>&#123;<br><br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doFilter</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException </span>&#123;<br><br>        servletRequest.setCharacterEncoding(<span class="hljs-string">&quot;utf-8&quot;</span>);<br>        servletResponse.setCharacterEncoding(<span class="hljs-string">&quot;utf-8&quot;</span>);<br><br>        filterChain.doFilter(servletRequest, servletResponse);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span> </span>&#123;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol></li><li><p>å¯¼å…¥é™æ€èµ„æº</p></li></ol><h3 id="ç™»å½•åŠŸèƒ½å®ç°"><a href="#ç™»å½•åŠŸèƒ½å®ç°" class="headerlink" title="ç™»å½•åŠŸèƒ½å®ç°"></a>ç™»å½•åŠŸèƒ½å®ç°</h3><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/%E8%B6%85%E5%B8%82%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-JSP%E7%89%88%E6%9C%AC/login_process.png" alt="ç™»å½•åŠŸèƒ½æµç¨‹å›¾"></p><ol><li><p>ç¼–å†™å‰ç«¯é¡µé¢</p></li><li><p>è®¾ç½®é¦–é¡µ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--è®¾ç½®æ¬¢è¿é¡µé¢--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">welcome-file-list</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">welcome-file</span>&gt;</span>login.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">welcome-file</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">welcome-file-list</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™daoå±‚ç™»å½•ç”¨æˆ·ç™»å½•çš„æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">getLoginUser</span><span class="hljs-params">(Connection connection,String userCode)</span> <span class="hljs-keyword">throws</span> SQLException</span>;<br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™daoæ¥å£çš„å®ç°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserDao</span></span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">getLoginUser</span><span class="hljs-params">(Connection connection, String userCode)</span> <span class="hljs-keyword">throws</span> SQLException </span>&#123;<br><br>        PreparedStatement pstm = <span class="hljs-keyword">null</span>;<br>        ResultSet rs = <span class="hljs-keyword">null</span>;<br>        User user = <span class="hljs-keyword">null</span>;<br><br>        <span class="hljs-keyword">if</span> (connection == <span class="hljs-keyword">null</span>) &#123;<br>        String sql = <span class="hljs-string">&quot;select * from smbms_user where userCode = ?&quot;</span>;<br>        Object[] params = &#123;userCode&#125;;<br><br><br>            BaseDao.executeSelect(connection,pstm, rs,sql,params);<br><br>            <span class="hljs-keyword">if</span> (rs.next()) &#123;<br>                user = <span class="hljs-keyword">new</span> User();<br>                user.setId(rs.getInt(<span class="hljs-string">&quot;id&quot;</span>));<br>                user.setUserCode(rs.getString(<span class="hljs-string">&quot;userCode&quot;</span>));<br>                user.setUserName(rs.getString(<span class="hljs-string">&quot;userName&quot;</span>));<br>                user.setUserPassword(rs.getString(<span class="hljs-string">&quot;userPassword&quot;</span>));<br>                user.setGender(rs.getInt(<span class="hljs-string">&quot;gender&quot;</span>));<br>                user.setBirthday(rs.getDate(<span class="hljs-string">&quot;birthday&quot;</span>));<br>                user.setPhone(rs.getString(<span class="hljs-string">&quot;phone&quot;</span>));<br>                user.setAddress(rs.getString(<span class="hljs-string">&quot;address&quot;</span>));<br>                user.setUserRole(rs.getInt(<span class="hljs-string">&quot;userRole&quot;</span>));<br>                user.setCreatedBy(rs.getInt(<span class="hljs-string">&quot;createdBy&quot;</span>));<br>                user.setCreationDate(rs.getTimestamp(<span class="hljs-string">&quot;creationDate&quot;</span>));<br>                user.setModifyBy(rs.getInt(<span class="hljs-string">&quot;modifyBy&quot;</span>));<br>                user.setModifyDate(rs.getTimestamp(<span class="hljs-string">&quot;modifyDate&quot;</span>));<br>            &#125;<br>            BaseDao.closeResources(<span class="hljs-keyword">null</span>,pstm,rs);<br><br>        &#125;<br><br>        <span class="hljs-keyword">return</span> user;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ä¸šåŠ¡å±‚æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ç”¨æˆ·ç™»å½•</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">login</span><span class="hljs-params">(String userCode,String password)</span></span><br></code></pre></td></tr></table></figure></li><li><p>ä¸šåŠ¡å±‚å®ç°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span></span>&#123;<br><br>    <span class="hljs-comment">// ä¸šåŠ¡å±‚éƒ½ä¼šè°ƒç”¨daoå±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å¼•å…¥daoå±‚</span><br>    <span class="hljs-keyword">private</span> UserDao userDao;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserServiceImpl</span><span class="hljs-params">()</span> </span>&#123;<br>        userDao = <span class="hljs-keyword">new</span> UserDaoImpl();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">login</span><span class="hljs-params">(String userCode, String password)</span> </span>&#123;<br>        Connection connection = <span class="hljs-keyword">null</span>;<br>        User user = <span class="hljs-keyword">null</span>;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = BaseDao.getConnection();<br>            <span class="hljs-comment">// é€šè¿‡ä¸šåŠ¡å±‚è°ƒç”¨å¯¹åº”çš„å…·ä½“çš„æ•°æ®åº“æ“ä½œ</span><br>            user = userDao.getLoginUser(connection, userCode);<br><br>        &#125; <span class="hljs-keyword">catch</span> (SQLException throwables) &#123;<br>            throwables.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            BaseDao.closeResources(connection,<span class="hljs-keyword">null</span>,<span class="hljs-keyword">null</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> user;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><ol start="7"><li><p>ç¼–å†™Servlet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    <span class="hljs-comment">//Servletï¼šæ§åˆ¶å±‚ï¼Œè°ƒç”¨ä¸šåŠ¡å±‚ä»£ç </span><br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br><br>        System.out.println(<span class="hljs-string">&quot;LoginServlet--start...&quot;</span>);<br><br>        <span class="hljs-comment">// è·å–ç”¨æˆ·åå’Œå¯†ç </span><br>        String userCode = req.getParameter(<span class="hljs-string">&quot;userCode&quot;</span>);<br>        String userPassword = req.getParameter(<span class="hljs-string">&quot;userPassword&quot;</span>);<br><br>        <span class="hljs-comment">// å’Œæ•°æ®åº“ä¸­çš„å¯†ç è¿›è¡Œå¯¹æ¯”ï¼Œè°ƒç”¨ä¸šåŠ¡å±‚</span><br>        UserServiceImpl userService = <span class="hljs-keyword">new</span> UserServiceImpl();<br>        User user = userService.login(userCode, userPassword);<span class="hljs-comment">// è¿™é‡Œå·²ç»æŠŠç™»å½•çš„äººæŸ¥äº†å‡ºæ¥</span><br><br>        <span class="hljs-keyword">if</span> (user != <span class="hljs-keyword">null</span>) &#123; <span class="hljs-comment">// æŸ¥æœ‰æ­¤äººï¼Œå¯ä»¥ç™»å½•</span><br>            <span class="hljs-comment">// å°†ç”¨æˆ·çš„ä¿¡æ¯æ”¾åˆ°Sessionä¸­</span><br>            req.getSession().setAttribute(Constant.USER_SESSION,user);<br>            <span class="hljs-comment">// è·³è½¬åˆ°ä¸»é¡µ</span><br>            resp.sendRedirect(req.getContextPath() + <span class="hljs-string">&quot;/jsp/frame.jsp&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">// æŸ¥æ— æ­¤äººï¼Œæ— æ³•ç™»å½•</span><br>            <span class="hljs-comment">//è½¬å‘å›ç™»å½•é¡µé¢,é¡ºå¸¦æç¤ºå®ƒï¼Œç”¨æˆ·åæˆ–è€…å¯†ç ä¸æ­£ç¡®</span><br>            req.setAttribute(<span class="hljs-string">&quot;error&quot;</span>,<span class="hljs-string">&quot;ç”¨æˆ·åæˆ–å¯†ç ä¸æ­£ç¡®&quot;</span>);<br>            req.getRequestDispatcher(<span class="hljs-string">&quot;login.jsp&quot;</span>).forward(req,resp);<br>        &#125;<br><br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-keyword">super</span>.doPost(req, resp);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><ol start="8"><li><p>æ³¨å†ŒServlet</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>LoginServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.atrox.servlet.LoginServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>LoginServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>.login.do<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ol><ol start="9"><li>æµ‹è¯•è®¿é—®ï¼Œç¡®ä¿ä»¥ä¸Šå…±å—¯é‚£ä¸ªæˆåŠŸ</li></ol><h3 id="ç™»å½•åŠŸèƒ½ä¼˜åŒ–"><a href="#ç™»å½•åŠŸèƒ½ä¼˜åŒ–" class="headerlink" title="ç™»å½•åŠŸèƒ½ä¼˜åŒ–"></a>ç™»å½•åŠŸèƒ½ä¼˜åŒ–</h3><p>æ³¨é”€åŠŸèƒ½ï¼š</p><p>æ€è·¯ï¼šç§»é™¤Sessionï¼Œè¿”å›ç™»å½•é¡µé¢</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-comment">// ç§»é™¤ç”¨æˆ·çš„Session</span><br>        req.getSession().removeAttribute(Constant.USER_SESSION);<br>        resp.sendRedirect(<span class="hljs-string">&quot;login.jsp&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>æ³¨å†Œxmlï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>LogoutServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.atrox.servlet.LogoutServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>LogoutServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/jsp/logout.do<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>ç™»å½•æ‹¦æˆªä¼˜åŒ–</strong></p><p>ç¼–å†™ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œå¹¶æ³¨å†Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SysFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Filter</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">(FilterConfig filterConfig)</span> <span class="hljs-keyword">throws</span> ServletException </span>&#123;<br><br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doFilter</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException </span>&#123;<br><br>        HttpServletRequest request = (HttpServletRequest) servletRequest;<br>        HttpServletResponse response = (HttpServletResponse) servletResponse;<br><br>        <span class="hljs-comment">// è¿‡æ»¤å™¨ï¼Œä»Sessionä¸­è·å–ç”¨æˆ·</span><br>        User user = (User) request.getSession().getAttribute(Constant.USER_SESSION);<br><br>        <span class="hljs-keyword">if</span> (user == <span class="hljs-keyword">null</span>) &#123; <span class="hljs-comment">// å·²ç»è¢«ç§»é™¤æˆ–è€…æ³¨é”€äº†ï¼Œæˆ–è€…æœªç™»å½•</span><br>            response.sendRedirect(<span class="hljs-string">&quot;error.jsp&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            filterChain.doFilter(servletRequest,servletResponse);<br>        &#125;<br><br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span> </span>&#123;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å¯†ç ä¿®æ”¹"><a href="#å¯†ç ä¿®æ”¹" class="headerlink" title="å¯†ç ä¿®æ”¹"></a>å¯†ç ä¿®æ”¹</h3><ol><li><p>å¯¼å…¥å‰ç«¯ç´ æ</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;li&gt;&lt;a href=&quot;$&#123;pageContext.request.contextPath &#125;/jsp/pwdmodify.jsp&quot;&gt;å¯†ç ä¿®æ”¹&lt;/a&gt;&lt;/li&gt;<br></code></pre></td></tr></table></figure></li><li><p>userDaoæ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ä¿®æ”¹å½“å‰ç”¨æˆ·å¯†ç </span><br> <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">updatePwd</span><span class="hljs-params">(Connection connection,<span class="hljs-keyword">int</span> id,<span class="hljs-keyword">int</span> password)</span> <span class="hljs-keyword">throws</span> SQLException</span>;<br></code></pre></td></tr></table></figure></li><li><p>userDaoæ¥å£å®ç°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ä¿®æ”¹å½“å‰ç”¨æˆ·å¯†ç </span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">updatePwd</span><span class="hljs-params">(Connection connection, <span class="hljs-keyword">int</span> id, <span class="hljs-keyword">int</span> password)</span> <span class="hljs-keyword">throws</span> SQLException </span>&#123;<br><br>    PreparedStatement pstm = <span class="hljs-keyword">null</span>;<br>    <span class="hljs-keyword">int</span> updateRows = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">if</span> (connection != <span class="hljs-keyword">null</span>) &#123;<br>        String sql = <span class="hljs-string">&quot;update smbms_user set userPassword = ? where id = ?&quot;</span>;<br>        Object params[] = &#123;password,id&#125;;<br>        updateRows = BaseDao.executeUpdate(connection, pstm, sql, params);<br><br>        BaseDao.closeResources(connection,pstm,<span class="hljs-keyword">null</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> updateRows;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>UserServiceå±‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æ ¹æ®ç”¨æˆ·IDä¿®æ”¹å¯†ç </span><br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">updatePwd</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id,<span class="hljs-keyword">int</span> pwd)</span></span>;<br></code></pre></td></tr></table></figure></li><li><p>UserServiceå®ç°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">updatePwd</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id, <span class="hljs-keyword">int</span> pwd)</span> </span>&#123;<br>   <br>      Connection connection = <span class="hljs-keyword">null</span>;<br>      connection = BaseDao.getConnection();<br>   <br>      <span class="hljs-keyword">boolean</span> flag = <span class="hljs-keyword">false</span>;<br>   <br>      <span class="hljs-comment">// ä¿®æ”¹å¯†ç </span><br>      <span class="hljs-keyword">try</span> &#123;<br>          <span class="hljs-keyword">if</span> (userDao.updatePwd(connection,id,pwd) &gt; <span class="hljs-number">0</span>) &#123;<br>              flag = <span class="hljs-keyword">true</span>;<br>          &#125;<br>      &#125; <span class="hljs-keyword">catch</span> (SQLException throwables) &#123;<br>          throwables.printStackTrace();<br>      &#125; <span class="hljs-keyword">finally</span> &#123;<br>          BaseDao.closeResources(connection,<span class="hljs-keyword">null</span>,<span class="hljs-keyword">null</span>);<br>      &#125;<br>      <span class="hljs-keyword">return</span> flag;<br>   <br>  &#125;<br></code></pre></td></tr></table></figure></li><li><p>è®°å¾—å®ç°å¤ç”¨ï¼Œéœ€è¦æå–å‡ºæ–¹æ³•ï¼</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>    String method = req.getParameter(<span class="hljs-string">&quot;method&quot;</span>);<br>    <span class="hljs-keyword">if</span> (method.equals(<span class="hljs-string">&quot;savepwd&quot;</span>) &amp;&amp; method != <span class="hljs-keyword">null</span>)) &#123;<br>        <span class="hljs-keyword">this</span>.updatePwd(req,resp);<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">updatePwd</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>    <span class="hljs-comment">// ä»Sessioné‡Œé¢æ‹¿ID;</span><br>    Object o = req.getSession().getAttribute(Constant.USER_SESSION);<br>    <span class="hljs-comment">// æ‹¿è¡¨å•æäº¤çš„å‚æ•°</span><br>    String newpassword = req.getParameter(<span class="hljs-string">&quot;newpassword&quot;</span>);<br><br>    <span class="hljs-keyword">boolean</span> flag = <span class="hljs-keyword">false</span>;<br><br>    <span class="hljs-keyword">if</span> (o != <span class="hljs-keyword">null</span> &amp;&amp; !StringUtils.isNullOrEmpty(newpassword)) &#123;<br>        UserService userService = <span class="hljs-keyword">new</span> UserServiceImpl();<br>        flag = userService.updatePwd(((User) o).getId(), newpassword);<br>        <span class="hljs-keyword">if</span> (flag) &#123;<br>            req.setAttribute(<span class="hljs-string">&quot;message&quot;</span>,<span class="hljs-string">&quot;ä¿®æ”¹å¯†ç æˆåŠŸï¼Œè¯·é€€å‡ºï¼Œä½¿ç”¨æ–°å¯†ç ç™»å½•&quot;</span>);<br>            <span class="hljs-comment">// å¯†ç ä¿®æ”¹æˆåŠŸï¼Œç§»é™¤å½“å‰Session</span><br>            req.getSession().removeAttribute(Constant.USER_SESSION);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            req.setAttribute(<span class="hljs-string">&quot;message&quot;</span>,<span class="hljs-string">&quot;å¯†ç ä¿®æ”¹å¤±è´¥&quot;</span>);<br><br>        &#125;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        req.setAttribute(<span class="hljs-string">&quot;message&quot;</span>,<span class="hljs-string">&quot;æ–°å¯†ç æœ‰é—®é¢˜&quot;</span>);<br>    &#125;<br><br>    req.getRequestDispatcher(req.getContextPath() + <span class="hljs-string">&quot;/jsp/pwdmodify.jsp&quot;</span>).forward(req,resp);<br><br>&#125;<br></code></pre></td></tr></table></figure><ol start="8"><li>æ³¨å†ŒServlet</li></ol><p><strong>ä¼˜åŒ–å¯†ç ä½¿ç”¨Ajax</strong></p><ol><li><p>é˜¿é‡Œå·´å·´çš„fastjson</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/fastjson --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>fastjson<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.75<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>åå°ä»£ç ä¿®æ”¹(æ—§å¯†ç éªŒè¯)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// éªŒè¯æ—§å¯†ç ,sessionä¸­æœ‰ç”¨æˆ·çš„å¯†ç </span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">pwdModify</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> </span>&#123;<br><br>        Object o = req.getSession().getAttribute(Constant.USER_SESSION);<br>        String oldpassword = req.getParameter(<span class="hljs-string">&quot;oldpassword&quot;</span>);<br><br>        <span class="hljs-comment">// ä¸‡èƒ½çš„Map:ç»“æœé›†</span><br>        HashMap&lt;String, String&gt; resultMap = <span class="hljs-keyword">new</span> HashMap&lt;String, String&gt;();<br>        <span class="hljs-keyword">if</span> (o == <span class="hljs-keyword">null</span>) &#123; <span class="hljs-comment">// Sessionå¤±æ•ˆäº†ï¼Œsessionè¿‡æœŸäº†</span><br>            resultMap.put(<span class="hljs-string">&quot;result&quot;</span>,<span class="hljs-string">&quot;sessionError&quot;</span>);<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (StringUtils.isNullOrEmpty(oldpassword)) &#123; <span class="hljs-comment">// è¾“å…¥çš„å¯†ç ä¸ºç©º</span><br>            resultMap.put(<span class="hljs-string">&quot;result&quot;</span>,<span class="hljs-string">&quot;error&quot;</span>);<br>        &#125;<span class="hljs-keyword">else</span> &#123;<br>            String userPassword = ((User) o).getUserPassword(); <span class="hljs-comment">//Sessionä¸­ç”¨æˆ·çš„å¯†ç </span><br>            <span class="hljs-keyword">if</span> (oldpassword.equals(userPassword)) &#123;<br>                resultMap.put(<span class="hljs-string">&quot;result&quot;</span>,<span class="hljs-string">&quot;true&quot;</span>);<br>            &#125;<span class="hljs-keyword">else</span> &#123;<br>                System.out.println(oldpassword);<br>                System.out.println(userPassword);<br>                resultMap.put(<span class="hljs-string">&quot;result&quot;</span>,<span class="hljs-string">&quot;false&quot;</span>);<br>            &#125;<br>        &#125;<br><br>        PrintWriter writer = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            resp.setContentType(<span class="hljs-string">&quot;application/json&quot;</span>);<br>            writer = resp.getWriter();<br>            <span class="hljs-comment">// JSONArray é˜¿é‡Œå·´å·´çš„JSONå·¥å…·ç±»ï¼Œè½¬æ¢æ ¼å¼</span><br>            <span class="hljs-comment">/*</span><br><span class="hljs-comment">            resultMap = [&quot;result&quot;:&quot;sessionError&quot;,&quot;result&quot;:&quot;true&quot;]</span><br><span class="hljs-comment">            Jsonæ ¼å¼ = &#123;keyï¼švalue&#125;</span><br><span class="hljs-comment">             */</span><br>            writer.write(JSONArray.toJSONString(resultMap));<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            writer.flush();<br>            writer.close();<br>        &#125;<br><br>    &#125;<br></code></pre></td></tr></table></figure></li></ol><h3 id="ç”¨æˆ·ç®¡ç†å®ç°"><a href="#ç”¨æˆ·ç®¡ç†å®ç°" class="headerlink" title="ç”¨æˆ·ç®¡ç†å®ç°"></a>ç”¨æˆ·ç®¡ç†å®ç°</h3><p>æ€è·¯ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/%E8%B6%85%E5%B8%82%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-JSP%E7%89%88%E6%9C%AC/user_manage.png" alt="ç”¨æˆ·ç®¡ç†æµç¨‹"></p><ol><li><p>å¯¼å…¥åˆ†é¡µçš„å·¥å…·ç±»</p></li><li><p>ç”¨æˆ·åˆ—è¡¨é¡µé¢å¯¼å…¥</p><ul><li><blockquote><p>userlist.jsp</p></blockquote></li></ul></li></ol><h4 id="1-è·å–ç”¨æˆ·æ•°é‡"><a href="#1-è·å–ç”¨æˆ·æ•°é‡" class="headerlink" title="1. è·å–ç”¨æˆ·æ•°é‡"></a>1. è·å–ç”¨æˆ·æ•°é‡</h4><ol><li><p>UserDao</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æ ¹æ®ç”¨æˆ·åæˆ–è§’è‰²æŸ¥è¯¢ç”¨æˆ·æ•°é‡</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getUserCount</span><span class="hljs-params">(Connection connection,String username, <span class="hljs-keyword">int</span> userRole)</span> <span class="hljs-keyword">throws</span> SQLException</span>;<br></code></pre></td></tr></table></figure></li><li><p>UserDaoImpl</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æ ¹æ®ç”¨æˆ·åæˆ–è§’è‰²æŸ¥è¯¢ç”¨æˆ·æ•°é‡ </span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getUserCount</span><span class="hljs-params">(Connection connection,String username, <span class="hljs-keyword">int</span> userRole)</span> <span class="hljs-keyword">throws</span> SQLException </span>&#123;<br><br>        PreparedStatement preparedStatement = <span class="hljs-keyword">null</span>;<br>        ResultSet rs = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">int</span> count = <span class="hljs-number">0</span>;<br><br>        <span class="hljs-keyword">if</span> (connection != <span class="hljs-keyword">null</span>) &#123;<br>            StringBuffer sql = <span class="hljs-keyword">new</span> StringBuffer();<br>            sql.append(<span class="hljs-string">&quot;select count(1) as count from smbms_user u,smbms_role r where u.userRole = r.id&quot;</span>);<br><br>            ArrayList&lt;Object&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;Object&gt;();<span class="hljs-comment">// å­˜æ”¾æˆ‘ä»¬çš„å‚æ•°</span><br><br>            <span class="hljs-keyword">if</span> (!StringUtils.isNullOrEmpty(username)) &#123;<br>                sql.append(<span class="hljs-string">&quot; and u.userName like ?&quot;</span>);<br>                list.add(<span class="hljs-string">&quot;%&quot;</span>+username+<span class="hljs-string">&quot;%&quot;</span>); <span class="hljs-comment">// index:0</span><br>            &#125;<br><br>            <span class="hljs-keyword">if</span> (userRole &gt; <span class="hljs-number">0</span>) &#123;<br>                sql.append(<span class="hljs-string">&quot; and u.userRole = ?&quot;</span>);<br>                list.add(userRole); <span class="hljs-comment">// index:1</span><br>            &#125;<br><br>            <span class="hljs-comment">// æ€ä¹ˆæŠŠlistè½¬æ¢ä¸ºæ•°ç»„</span><br>            Object[] params = list.toArray();<br>            System.out.println(<span class="hljs-string">&quot;UserDaoImpl-&gt;getUserCount &quot;</span>+sql.toString()); <span class="hljs-comment">// è¾“å‡ºæœ€åå®Œæ•´çš„SQLè¯­å¥</span><br>            rs = BaseDao.executeSelect(connection, preparedStatement, rs, sql.toString(), params);<br><br>            <span class="hljs-keyword">if</span> (rs.next()) &#123;<br>                count = rs.getInt(<span class="hljs-string">&quot;count&quot;</span>);<span class="hljs-comment">// ä»ç»“æœé›†ä¸­è·å–æœ€ç»ˆæ•°é‡</span><br><br>            &#125;<br><br>            BaseDao.closeResources(connection,preparedStatement,rs);<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> count;<br>    &#125;<br></code></pre></td></tr></table></figure></li><li><p>UserService</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æŸ¥è¯¢è®°å½•æ•°</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getUserCount</span><span class="hljs-params">(String username,<span class="hljs-keyword">int</span> userRole)</span></span>;<br></code></pre></td></tr></table></figure></li></ol><ol start="4"><li><p>UserServiceImpl</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getUserCount</span><span class="hljs-params">(String username, <span class="hljs-keyword">int</span> userRole)</span> </span>&#123;<br><br>        Connection connection = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">int</span> count = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = BaseDao.getConnection();<br>            count = userDao.getUserCount(connection, username, userRole);<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException throwables) &#123;<br>            throwables.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            BaseDao.closeResources(connection,<span class="hljs-keyword">null</span>,<span class="hljs-keyword">null</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> count;<br><br>    &#125;<br></code></pre></td></tr></table></figure></li></ol><h4 id="2-è·å–ç”¨æˆ·åˆ—è¡¨"><a href="#2-è·å–ç”¨æˆ·åˆ—è¡¨" class="headerlink" title="2.è·å–ç”¨æˆ·åˆ—è¡¨"></a>2.è·å–ç”¨æˆ·åˆ—è¡¨</h4><ol><li><p>UserDao</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æ ¹æ®æ¡ä»¶æŸ¥è¯¢è·å–ç”¨æˆ·åˆ—è¡¨</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">getUserList</span><span class="hljs-params">(Connection connection, String userName, <span class="hljs-keyword">int</span> userRole, <span class="hljs-keyword">int</span> currentPageNo, <span class="hljs-keyword">int</span> pageSize)</span><span class="hljs-keyword">throws</span> Exception</span>;<br></code></pre></td></tr></table></figure></li></ol><ol start="2"><li><p>UserDaoImpl</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">getUserList</span><span class="hljs-params">(Connection connection, String userName, <span class="hljs-keyword">int</span> userRole, <span class="hljs-keyword">int</span> currentPageNo, <span class="hljs-keyword">int</span> pageSize)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>        <span class="hljs-comment">// TODO Auto-generated method stub</span><br>        PreparedStatement pstm = <span class="hljs-keyword">null</span>;<br>        ResultSet rs = <span class="hljs-keyword">null</span>;<br>        List&lt;User&gt; userList = <span class="hljs-keyword">new</span> ArrayList&lt;User&gt;();<br>        <span class="hljs-keyword">if</span>(connection != <span class="hljs-keyword">null</span>)&#123;<br>            StringBuffer sql = <span class="hljs-keyword">new</span> StringBuffer();<br>            sql.append(<span class="hljs-string">&quot;select u.*,r.roleName as userRoleName from smbms_user u,smbms_role r where u.userRole = r.id&quot;</span>);<br>            List&lt;Object&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;Object&gt;();<br>            <span class="hljs-keyword">if</span>(!StringUtils.isNullOrEmpty(userName))&#123;<br>                sql.append(<span class="hljs-string">&quot; and u.userName like ?&quot;</span>);<br>                list.add(<span class="hljs-string">&quot;%&quot;</span>+userName+<span class="hljs-string">&quot;%&quot;</span>);<br>            &#125;<br>            <span class="hljs-keyword">if</span>(userRole &gt; <span class="hljs-number">0</span>)&#123;<br>                sql.append(<span class="hljs-string">&quot; and u.userRole = ?&quot;</span>);<br>                list.add(userRole);<br>            &#125;<br>            sql.append(<span class="hljs-string">&quot; order by creationDate DESC limit ?,?&quot;</span>);<br>            currentPageNo = (currentPageNo-<span class="hljs-number">1</span>)*pageSize;<br>            list.add(currentPageNo);<br>            list.add(pageSize);<br><br>            Object[] params = list.toArray();<br>            System.out.println(<span class="hljs-string">&quot;sql ----&gt; &quot;</span> + sql.toString());<br>            rs = BaseDao.executeSelect(connection, pstm, rs, sql.toString(), params);<br>            <span class="hljs-keyword">while</span>(rs.next())&#123;<br>                User _user = <span class="hljs-keyword">new</span> User();<br>                _user.setId(rs.getInt(<span class="hljs-string">&quot;id&quot;</span>));<br>                _user.setUserCode(rs.getString(<span class="hljs-string">&quot;userCode&quot;</span>));<br>                _user.setUserName(rs.getString(<span class="hljs-string">&quot;userName&quot;</span>));<br>                _user.setGender(rs.getInt(<span class="hljs-string">&quot;gender&quot;</span>));<br>                _user.setBirthday(rs.getDate(<span class="hljs-string">&quot;birthday&quot;</span>));<br>                _user.setPhone(rs.getString(<span class="hljs-string">&quot;phone&quot;</span>));<br>                _user.setUserRole(rs.getInt(<span class="hljs-string">&quot;userRole&quot;</span>));<br>                _user.setUserRoleName(rs.getString(<span class="hljs-string">&quot;userRoleName&quot;</span>));<br>                userList.add(_user);<br>            &#125;<br>            BaseDao.closeResources(<span class="hljs-keyword">null</span>, pstm, rs);<br>        &#125;<br>        <span class="hljs-keyword">return</span> userList;<br>    &#125;<br></code></pre></td></tr></table></figure></li></ol><ol start="3"><li><p>UserService</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æ ¹æ®æ¡ä»¶æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">getUserList</span><span class="hljs-params">(String queryUserName, <span class="hljs-keyword">int</span> queryUserRole, <span class="hljs-keyword">int</span> currentPageNo, <span class="hljs-keyword">int</span> pageSize)</span></span>;<br></code></pre></td></tr></table></figure></li></ol><ol start="4"><li><p>UserServiceImpl</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">getUserList</span><span class="hljs-params">(String queryUserName, <span class="hljs-keyword">int</span> queryUserRole, <span class="hljs-keyword">int</span> currentPageNo, <span class="hljs-keyword">int</span> pageSize)</span> </span>&#123;<br>        Connection connection = <span class="hljs-keyword">null</span>;<br>        List&lt;User&gt; userList = <span class="hljs-keyword">null</span>;<br>        System.out.println(<span class="hljs-string">&quot;queryUserName ---- &gt; &quot;</span> + queryUserName);<br>        System.out.println(<span class="hljs-string">&quot;queryUserRole ---- &gt; &quot;</span> + queryUserRole);<br>        System.out.println(<span class="hljs-string">&quot;currentPageNo ---- &gt; &quot;</span> + currentPageNo);<br>        System.out.println(<span class="hljs-string">&quot;pageSize ---- &gt; &quot;</span> + pageSize);<br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = BaseDao.getConnection();<br>            userList = userDao.getUserList(connection, queryUserName,queryUserRole,currentPageNo,pageSize);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            <span class="hljs-comment">// TODO Auto-generated catch block</span><br>            e.printStackTrace();<br>        &#125;<span class="hljs-keyword">finally</span>&#123;<br>            BaseDao.closeResources(connection, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> userList;<br>    &#125;<br></code></pre></td></tr></table></figure></li></ol><h4 id="3-è·å–è§’è‰²æ“ä½œ"><a href="#3-è·å–è§’è‰²æ“ä½œ" class="headerlink" title="3.è·å–è§’è‰²æ“ä½œ"></a>3.è·å–è§’è‰²æ“ä½œ</h4><p>ä¸ºäº†æˆ‘ä»¬èŒè´£ç»Ÿä¸€ï¼Œå¯ä»¥æŠŠè§’è‰²çš„æ“ä½œå•ç‹¬æ”¾åœ¨ä¸€ä¸ªåŒ…ä¸­ï¼Œå’Œpojoç±»å¯¹åº”</p><p>RoleDao</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// è·å–è§’è‰²åˆ—è¡¨</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Role&gt; <span class="hljs-title">getRoleList</span><span class="hljs-params">(Connection connection)</span> <span class="hljs-keyword">throws</span> SQLException</span>;<br></code></pre></td></tr></table></figure><p>RoleDaoImpl</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// è·å–è§’è‰²åˆ—è¡¨</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Role&gt; <span class="hljs-title">getRoleList</span><span class="hljs-params">(Connection connection)</span> <span class="hljs-keyword">throws</span> SQLException </span>&#123;<br><br>        PreparedStatement pstm = <span class="hljs-keyword">null</span>;<br>        ResultSet rs = <span class="hljs-keyword">null</span>;<br>        ArrayList&lt;Role&gt; roleList = <span class="hljs-keyword">new</span> ArrayList&lt;Role&gt;();<br><br>        <span class="hljs-keyword">if</span> (connection != <span class="hljs-keyword">null</span>) &#123;<br>            String sql = <span class="hljs-string">&quot;select * from smbms_role&quot;</span>;<br>            Object[] params = &#123;&#125;;<br>            rs = BaseDao.executeSelect(connection,pstm,rs,sql,params);<br><br>            <span class="hljs-keyword">while</span> (rs.next()) &#123;<br>                Role _role = <span class="hljs-keyword">new</span> Role();<br>                _role.setId( rs.getInt(<span class="hljs-string">&quot;id&quot;</span>));<br>                _role.setRoleCode(rs.getString(<span class="hljs-string">&quot;roleCode&quot;</span>));<br>                _role.setRoleName(rs.getString(<span class="hljs-string">&quot;roleName&quot;</span>));<br>                roleList.add(_role);<br>            &#125;<br>            BaseDao.closeResources(connection,pstm,rs);<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> roleList;<br>    &#125;<br></code></pre></td></tr></table></figure><p>RoleService</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// è·å–ç”¨æˆ·è§’è‰²åˆ—è¡¨</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Role&gt; <span class="hljs-title">getRoleList</span><span class="hljs-params">()</span></span>;<br></code></pre></td></tr></table></figure><p>RoleServiceImpl</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Role&gt; <span class="hljs-title">getRoleList</span><span class="hljs-params">()</span> </span>&#123;<br><br>    Connection connection = <span class="hljs-keyword">null</span>;<br>    List&lt;Role&gt; roleList = <span class="hljs-keyword">null</span>;<br>    <span class="hljs-keyword">try</span> &#123;<br>        connection = BaseDao.getConnection();<br>        roleList = roleDao.getRoleList(connection);<br>    &#125; <span class="hljs-keyword">catch</span> (SQLException throwables) &#123;<br>        throwables.printStackTrace();<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        BaseDao.closeResources(connection,<span class="hljs-keyword">null</span>,<span class="hljs-keyword">null</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> roleList;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-ç”¨æˆ·æ˜¾ç¤ºçš„Servlet"><a href="#4-ç”¨æˆ·æ˜¾ç¤ºçš„Servlet" class="headerlink" title="4.ç”¨æˆ·æ˜¾ç¤ºçš„Servlet"></a>4.ç”¨æˆ·æ˜¾ç¤ºçš„Servlet</h4><ol><li>è·å–ç”¨æˆ·å‰ç«¯çš„æ•°æ®ï¼ˆæŸ¥è¯¢ï¼‰</li><li>åˆ¤æ–­è¯·æ±‚æ˜¯å¦éœ€è¦æ‰§è¡Œï¼Œçœ‹å‚æ•°çš„å€¼åˆ¤æ–­</li><li>ä¸ºäº†å®ç°åˆ†é¡µï¼Œéœ€è¦è®¡ç®—å‡ºå½“å‰é¡µé¢å’Œæ€»é¡µé¢ï¼Œé¡µé¢å¤§å°ç­‰</li><li>ç”¨æˆ·åˆ—è¡¨å±•ç¤º</li><li>è¿”å›å‰ç«¯</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">query</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> </span>&#123;<br><br>        <span class="hljs-comment">// æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨</span><br>        <span class="hljs-comment">// ä»å‰ç«¯è·å–æ•°æ®</span><br>        String queryUserName = req.getParameter(<span class="hljs-string">&quot;queryname&quot;</span>);<br>        String temp = req.getParameter(<span class="hljs-string">&quot;queryUserRole&quot;</span>);<br>        String pageIndex = req.getParameter(<span class="hljs-string">&quot;pageIndex&quot;</span>);<br>        <span class="hljs-keyword">int</span> queryUserRole = <span class="hljs-number">0</span>;<br><br>        <span class="hljs-comment">// è·å–ç”¨æˆ·åˆ—è¡¨</span><br>        UserServiceImpl userService = <span class="hljs-keyword">new</span> UserServiceImpl();<br>        List&lt;User&gt; userList = <span class="hljs-keyword">null</span>;<br><br>        <span class="hljs-comment">// ç¬¬ä¸€æ¬¡èµ°è¿™ä¸ªè¯·æ±‚ï¼Œä¸€å®šæ˜¯ç¬¬ä¸€é¡µï¼Œé¡µé¢å¤§å°å›ºå®š</span><br>        <span class="hljs-keyword">int</span> pageSize = <span class="hljs-number">5</span>; <span class="hljs-comment">// å¯ä»¥æŠŠè¿™ä¸ªå†™åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼Œæ–¹ä¾¿åæœŸä¿®æ”¹</span><br>        <span class="hljs-keyword">int</span> currentPageNo = <span class="hljs-number">1</span>;<br><br>        <span class="hljs-keyword">if</span> (queryUserName == <span class="hljs-keyword">null</span>) &#123;<br>            queryUserName = <span class="hljs-string">&quot;&quot;</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (temp != <span class="hljs-keyword">null</span> &amp;&amp; !temp.equals(<span class="hljs-string">&quot;&quot;</span>)) &#123;<br>            queryUserRole = Integer.parseInt(temp); <span class="hljs-comment">//ç»™æŸ¥è¯¢èµ‹å€¼</span><br>        &#125;<br>        <span class="hljs-keyword">if</span> (pageIndex != <span class="hljs-keyword">null</span>) &#123;<br>            currentPageNo = Integer.parseInt(pageIndex);<br>        &#125;<br>        <span class="hljs-comment">// è·å–ç”¨æˆ·çš„æ€»æ•°(åˆ†é¡µï¼šä¸Šä¸€é¡µã€ä¸‹ä¸€é¡µçš„æƒ…å†µ)</span><br>        <span class="hljs-keyword">int</span> totalCount = userService.getUserCount(queryUserName, queryUserRole);<br>        <span class="hljs-comment">// æ€»é¡µæ•°æ”¯æŒ</span><br>        PageSupport pageSupport = <span class="hljs-keyword">new</span> PageSupport();<br>        pageSupport.setCurrentPageNo(currentPageNo);<br>        pageSupport.setPageSize(pageSize);<br>        pageSupport.setTotalCount(totalCount);<br><br>        <span class="hljs-comment">// æ§åˆ¶é¦–é¡µå’Œå°¾é¡µ</span><br>        <span class="hljs-keyword">int</span> totalPageCount = pageSupport.getTotalPageCount();<br>        <span class="hljs-keyword">if</span> (totalPageCount &lt; <span class="hljs-number">1</span>) &#123; <span class="hljs-comment">// å¦‚æœé¡µé¢è¦å°äº1äº†ï¼Œå°±å–ç¬¬ä¸€é¡µçš„åˆ—è¡¨</span><br>            currentPageNo = <span class="hljs-number">1</span>;<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (currentPageNo &gt; totalPageCount) &#123; <span class="hljs-comment">// å½“å‰é¡µé¢å¤§äºäº†æœ€åä¸€é¡µ</span><br>            currentPageNo = totalPageCount;<br>        &#125;<br><br>        <span class="hljs-comment">// è·å–ç”¨æˆ·åˆ—è¡¨å±•ç¤º</span><br>        userList = userService.getUserList(queryUserName, queryUserRole, currentPageNo, pageSize);<br>        req.setAttribute(<span class="hljs-string">&quot;userList&quot;</span>,userList);<br><br>        <span class="hljs-comment">// è·å–è§’è‰²åˆ—è¡¨</span><br>        RoleServiceImpl roleService = <span class="hljs-keyword">new</span> RoleServiceImpl();<br>        List&lt;Role&gt; roleList = roleService.getRoleList();<br>        req.setAttribute(<span class="hljs-string">&quot;roleList&quot;</span>,roleList);<br>        req.setAttribute(<span class="hljs-string">&quot;totalCount&quot;</span>,totalCount);<br>        req.setAttribute(<span class="hljs-string">&quot;currentPageNo&quot;</span>,currentPageNo);<br>        req.setAttribute(<span class="hljs-string">&quot;totalPageCount&quot;</span>,totalPageCount);<br>        req.setAttribute(<span class="hljs-string">&quot;queryUserName&quot;</span>,queryUserName);<br>        req.setAttribute(<span class="hljs-string">&quot;queryUserRole&quot;</span>,queryUserRole);<br><br>        <span class="hljs-comment">// è¿”å›å‰ç«¯</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            req.getRequestDispatcher(<span class="hljs-string">&quot;userlist.jsp&quot;</span>).forward(req,resp);<br>        &#125; <span class="hljs-keyword">catch</span> (ServletException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br><br>    &#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>project</category>
      
    </categories>
    
    
    <tags>
      
      <tag>jsp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>fluidä¸»é¢˜é…ç½®</title>
    <link href="/posts/2020/12/31/fluid%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/"/>
    <url>/posts/2020/12/31/fluid%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h1>Fluidåšå®¢ç¾åŒ–</h1><h3 id="1-å®‰è£…"><a class="header-anchor" href="#1-å®‰è£…">Â¶</a>1. å®‰è£…</h3><p>Hexo 5.0.0ç‰ˆæœ¬ä»¥ä¸Šï¼Œé€šè¿‡npmç›´æ¥å®‰è£…ï¼Œè¿›å…¥åšå®¢ç›®å½•æ‰§è¡Œå‘½ä»¤</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">npm <span class="hljs-keyword">install</span> <span class="hljs-comment">--save hexo-theme-fluid</span><br></code></pre></td></tr></table></figure><p>ç„¶åå†åšå®¢ç›®å½•ä¸‹åˆ›å»º<code>_config.fluid.yml</code>æ–‡ä»¶ï¼Œå°†hexo-theme-fluidä¸»é¢˜çš„<code>_config.yml</code>å†…å®¹å¤åˆ¶è¿›å»ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br></pre></td><td class="code"><pre><code class="hljs xml">#---------------------------<br># Hexo Theme Fluid<br># Author: Fluid-dev<br># Github: https://github.com/fluid-dev/hexo-theme-fluid<br>#<br># é…ç½®æŒ‡å—: https://hexo.fluid-dev.com/docs/guide/<br># ä½ å¯ä»¥ä»æŒ‡å—ä¸­è·å¾—æ›´è¯¦ç»†çš„è¯´æ˜<br>#<br># Guide: https://hexo.fluid-dev.com/docs/en/guide/<br># You can get more detailed help from the guide<br>#---------------------------<br><br><br>#---------------------------<br># å…¨å±€<br># Global<br>#---------------------------<br><br># ç”¨äºæµè§ˆå™¨æ ‡ç­¾çš„å›¾æ ‡<br># Icon for browser tab<br>favicon: /img/favicon.png<br><br># ç”¨äºè‹¹æœè®¾å¤‡çš„å›¾æ ‡<br># Icon for Apple touch<br>apple_touch_icon: /img/favicon.png<br><br># æµè§ˆå™¨æ ‡ç­¾é¡µä¸­çš„æ ‡é¢˜åˆ†éš”ç¬¦ï¼Œæ•ˆæœï¼š æ–‡ç« å - ç«™ç‚¹å<br># Title separator in browser tab, eg: article - site<br>title_join_string: &quot; - &quot;<br><br># å¼ºåˆ¶æ‰€æœ‰é“¾æ¥å‡çº§ä¸º HTTPSï¼ˆé€‚ç”¨äºå›¾ç‰‡ç­‰èµ„æºå‡ºç° HTTP æ··å…¥æŠ¥é”™ï¼‰<br># Force all links to be HTTPS (applicable to HTTP mixed error)<br>force_https: false<br><br># ä»£ç å—çš„å¢å¼ºé…ç½®<br># Enhancements to code blocks<br>code:<br>  # æ˜¯å¦å¼€å¯å¤åˆ¶ä»£ç çš„æŒ‰é’®<br>  # Enable copy code button<br>  copy_btn: true<br><br>  # ä»£ç é«˜äº®<br>  # Code highlight<br>  highlight:<br>    enable: true<br><br>    # ä»£ç å—æ˜¯å¦æ˜¾ç¤ºè¡Œå·<br>    # If true, the code block display line numbers<br>    line_number: true<br><br>    # å®ç°é«˜äº®çš„åº“ï¼Œå¯¹åº”ä¸‹é¢çš„è®¾ç½®<br>    # Highlight library<br>    # Options: highlightjs | prismjs<br>    lib: &quot;highlightjs&quot;<br><br>    highlightjs:<br>      # åœ¨é“¾æ¥ä¸­æŒ‘é€‰ style å¡«å…¥<br>      # Select a style in the link<br>      # See: https://highlightjs.org/static/demo/<br>      style: &quot;Github Gist&quot;<br><br>      # æ˜¯å¦æ ¹æ® style æ”¹å˜ä»£ç èƒŒæ™¯è‰²ï¼ˆå¦‚æœ style æ˜¯æ·±è‰²èƒŒæ™¯åˆ«å¿˜äº†å¼€å¯æ­¤é¡¹ï¼‰<br>      # If true, the code background will change color based on the style (If style has a dark background, don&#x27;t forget to true)<br>      bg_color: false<br><br>    prismjs:<br>      # åœ¨ä¸‹æ–¹é“¾æ¥é¡µé¢å³ä¾§çš„åœ†å½¢æŒ‰é’®æŒ‘é€‰ style å¡«å…¥ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å¡«å…¥ css é“¾æ¥<br>      # Select the style button on the right side of the link page, you can also set the CSS link<br>      # See: https://prismjs.com/<br>      style: &quot;default&quot;<br><br>      # è®¾ä¸º true é«˜äº®å°†æœ¬åœ°é™æ€ç”Ÿæˆï¼ˆå¹¶åªæ”¯æŒéƒ¨åˆ† prismjs æ’ä»¶ï¼‰ï¼Œè®¾ä¸º false é«˜äº®å°†åœ¨æµè§ˆå™¨é€šè¿‡ js ç”Ÿæˆ<br>      # If true, it will be generated locally (but some prismjs plugins are not supported). If false, it will be generated via JS in the browser<br>      preprocess: true<br><br># ä¸€äº›å¥½ç©çš„åŠŸèƒ½<br># Some fun features<br>fun_features:<br>  # ä¸º subtitle æ·»åŠ æ‰“å­—æœºæ•ˆæœ<br>  # Typing animation for subtitle<br>  typing:<br>    enable: true<br><br>    # æ‰“å°é€Ÿåº¦ï¼Œæ•°å­—è¶Šå¤§è¶Šæ…¢<br>    # Typing speed, the larger the number, the slower<br>    typeSpeed: 70<br><br>    # æ¸¸æ ‡å­—ç¬¦<br>    # Cursor character<br>    cursorChar: &quot;_&quot;<br><br>    # æ˜¯å¦å¾ªç¯æ’­æ”¾æ•ˆæœ<br>    # If true, loop animation<br>    loop: false<br><br>  # ä¸ºæ–‡ç« å†…å®¹ä¸­çš„æ ‡é¢˜æ·»åŠ é”šå›¾æ ‡<br>  # Add an anchor icon to the title on the post page<br>  anchorjs:<br>    enable: true<br>    element: h1,h2,h3,h4,h5,h6<br>    placement: right<br>    # Options: hover | always | touch<br>    visible: hover<br>    # Optionï¼šÂ§ | # | â¡<br>    icon: &quot;&quot;<br><br>  # åŠ è½½è¿›åº¦æ¡<br>  # Progress bar when loading<br>  progressbar:<br>    enable: true<br>    height_px: 3<br>    color: &quot;#29d&quot;<br>    # See: https://github.com/rstacruz/nprogress<br>    options: &#123; showSpinner: false, trickleSpeed: 100 &#125;<br><br># ä¸»é¢˜æš—è‰²æ¨¡å¼ï¼Œå¼€å¯åèœå•ä¸­ä¼šå‡ºç°åˆ‡æ¢æŒ‰é’®ï¼Œç”¨æˆ·æµè§ˆå™¨ä¼šå­˜å‚¨åˆ‡æ¢é€‰é¡¹ï¼Œå¹¶ä¸”ä¼šéµå¾ª prefers-color-scheme è‡ªåŠ¨åˆ‡æ¢<br># Theme dark mode. If enable, a switch button will appear on the menu, each of the visitor&#x27;s browser will store his switch option<br>dark_mode:<br>  enable: true<br>  # é»˜è®¤çš„é€‰é¡¹ï¼ˆå½“ç”¨æˆ·æ‰‹åŠ¨åˆ‡æ¢ååˆ™ä¸å†æŒ‰ç…§é»˜è®¤æ¨¡å¼ï¼‰ï¼Œé€‰æ‹© `auto` ä¼šä¼˜å…ˆéµå¾ª prefers-color-schemeï¼Œå…¶æ¬¡æŒ‰ç”¨æˆ·æœ¬åœ°æ—¶é—´ 18 ç‚¹åˆ°æ¬¡æ—¥ 6 ç‚¹ä¹‹é—´è¿›å…¥æš—è‰²æ¨¡å¼<br>  # Default option (when the visitor switches manually, the default mode is no longer followed), choosing `auto` will give priority to prefers-color-scheme, and then enter the dark mode from 18:00 to 6:00 in the visitorâ€™s local time<br>  # Options: auto | light | dark<br>  default: auto<br><br># ä¸»é¢˜é¢œè‰²é…ç½®ï¼Œå…¶ä»–ä¸ç”Ÿæ•ˆçš„åœ°æ–¹è¯·ä½¿ç”¨è‡ªå®šä¹‰ css è§£å†³ï¼Œé…è‰²å¯ä»¥åœ¨ä¸‹æ–¹é“¾æ¥ä¸­è·å¾—å¯å‘<br># Theme color, please use custom CSS to solve other colors, color schema can be inspired by the links below<br># See: https://www.webdesignrankings.com/resources/lolcolors/<br>color:<br>  # body èƒŒæ™¯è‰²<br>  # Color of body background<br>  body_bg_color: &quot;#eee&quot;<br>  # æš—è‰²æ¨¡å¼ä¸‹çš„ body èƒŒæ™¯è‰²ï¼Œä¸‹åŒ<br>  # Color in dark mode, the same below<br>  body_bg_color_dark: &quot;#181c27&quot;<br><br>  # é¡¶éƒ¨èœå•èƒŒæ™¯è‰²<br>  # Color of navigation bar background<br>  navbar_bg_color: &quot;#2f4154&quot;<br>  navbar_bg_color_dark: &quot;#1f3144&quot;<br><br>  # é¡¶éƒ¨èœå•å­—ä½“è‰²<br>  # Color of navigation bar text<br>  navbar_text_color: &quot;#fff&quot;<br>  navbar_text_color_dark: &quot;#d0d0d0&quot;<br><br>  # å…¨å±€å­—ä½“è‰²<br>  # Color of global text<br>  text_color: &quot;#3c4858&quot;<br>  text_color_dark: &quot;#c4c6c9&quot;<br><br>  # å…¨å±€æ¬¡çº§å­—ä½“è‰²ï¼ˆæ‘˜è¦ã€ç®€ä»‹ç­‰ä½ç½®ï¼‰<br>  # Color of global secondary text (excerpt, introduction, etc.)<br>  sec_text_color: &quot;#718096&quot;<br>  sec_text_color_dark: &quot;#a7a9ad&quot;<br><br>  # æ–‡ç« æ­£æ–‡å­—ä½“è‰²<br>  # Color of post text<br>  post_text_color: &quot;#2c3e50&quot;<br>  post_text_color_dark: &quot;#c4c6c9&quot;<br><br>  # æ–‡ç« æ­£æ–‡å­—ä½“è‰²ï¼ˆh1 h2 h3...ï¼‰<br>  # Color of Article heading (h1 h2 h3...)<br>  post_heading_color: &quot;#1a202c&quot;<br>  post_heading_color_dark: &quot;#c4c6c9&quot;<br><br>  # æ–‡ç« è¶…é“¾æ¥å­—ä½“è‰²<br>  # Color of post link<br>  post_link_color: &quot;#0366d6&quot;<br>  post_link_color_dark: &quot;#1589e9&quot;<br><br>  # è¶…é“¾æ¥æ‚¬æµ®æ—¶å­—ä½“è‰²<br>  # Color of link when hovering<br>  link_hover_color: &quot;#30a9de&quot;<br>  link_hover_color_dark: &quot;#30a9de&quot;<br><br>  # è¶…é“¾æ¥æ‚¬æµ®èƒŒæ™¯è‰²<br>  # Color of link background when hovering<br>  link_hover_bg_color: &quot;#f8f9fa&quot;<br>  link_hover_bg_color_dark: &quot;#364151&quot;<br><br>  # ä¸»é¢æ¿èƒŒæ™¯è‰²<br>  # Color of main board<br>  board_color: &quot;#fff&quot;<br>  board_color_dark: &quot;#252d38&quot;<br><br># ä¸»é¢˜å­—ä½“é…ç½®<br># Font<br>font:<br>  font_size: 16px<br>  font_family:<br>  code_font_size: 85%<br><br># æŒ‡å®šè‡ªå®šä¹‰ .js æ–‡ä»¶è·¯å¾„ï¼Œæ”¯æŒåˆ—è¡¨ï¼›è·¯å¾„æ˜¯ç›¸å¯¹ source ç›®å½•ï¼Œå¦‚ /js/custom.js å¯¹åº”å­˜æ”¾ç›®å½• source/js/custom.js<br># Specify the path of your custom js file, support list. The path is relative to the source directory, such as `/js/custom.js` corresponding to the directory `source/js/custom.js`<br>custom_js:<br><br># æŒ‡å®šè‡ªå®šä¹‰ .css æ–‡ä»¶è·¯å¾„ï¼Œç”¨æ³•å’Œ custom_js ç›¸åŒ<br># The usage is the same as custom_js<br>custom_css:<br><br># è‡ªå®šä¹‰åº•éƒ¨ HTML å†…å®¹ï¼ˆä½äº footer ä¸Šæ–¹ï¼‰ï¼Œæ³¨æ„ä¸è¦å’Œ `post: custom` é…ç½®å†²çª<br># Customize the HTML content at the bottom (located above the footer), be careful not to conflict with `post: custom`<br>custom_html: &#x27;&#x27;<br><br># ç½‘é¡µè®¿é—®ç»Ÿè®¡<br># Analysis of website visitors<br>web_analytics:  # ç½‘é¡µè®¿é—®ç»Ÿè®¡<br>  enable: false<br><br>  # ç™¾åº¦ç»Ÿè®¡çš„ Keyï¼Œå€¼éœ€è¦è·å–ä¸‹æ–¹é“¾æ¥ä¸­ `hm.js?` åè¾¹çš„å­—ç¬¦ä¸²<br>  # Baidu analytics, get the string behind `hm.js?`<br>  # See: https://tongji.baidu.com/sc-web/10000033910/home/site/getjs?siteId=13751376<br>  baidu:<br><br>  # Google ç»Ÿè®¡çš„ Tracking ID<br>  # Google analytics, set Tracking ID<br>  # See: https://developers.google.com/analytics/devguides/collection/analyticsjs<br>  google:<br><br>  # Google gtag.js çš„åª’ä½“èµ„æº ID<br>  # Google gtag.js GA_MEASUREMENT_ID<br>  # See: https://developers.google.com/analytics/devguides/collection/gtagjs/<br>  gtag:<br><br>  # è…¾è®¯ç»Ÿè®¡çš„ H5 App IDï¼Œå¼€å¯é«˜çº§åŠŸèƒ½æ‰æœ‰cid<br>  # Tencent analytics, set APP ID<br>  # See: https://mta.qq.com/h5/manage/ctr_app_manage<br>  tencent:<br>    sid:<br>    cid:<br><br>  # 51.la ç«™ç‚¹ç»Ÿè®¡ ID<br>  # 51.la analytics<br>  # See: https://www.51.la/user/site/index<br>  woyaola:  # 51.la ç«™ç‚¹ç»Ÿè®¡ IDï¼Œå‚è§<br><br>  # å‹ç›Ÿ/cnzz ç«™ç‚¹ç»Ÿè®¡ web_id<br>  # cnzz analytics<br>  # See: https://web.umeng.com/main.php?c=site&amp;a=show<br>  cnzz:<br><br>  # LeanCloud è®¡æ•°ç»Ÿè®¡ï¼Œå¯ç”¨äº PV UV å±•ç¤ºï¼Œå¦‚æœ `web_analytics: enable` æ²¡æœ‰å¼€å¯ï¼ŒPV UV å±•ç¤ºåªä¼šæŸ¥è¯¢ä¸ä¼šå¢åŠ <br>  # LeanCloud count statistics, which can be used for PV UV display. If `web_analytics: enable` is false, PV UV display will only query and not increase<br>  leancloud:<br>    app_id:<br>    app_key:<br>    # REST API æœåŠ¡å™¨åœ°å€ï¼Œå›½é™…ç‰ˆä¸å¡«<br>    # Only the Chinese mainland users need to set<br>    server_url:<br><br># å¯¹é¡µé¢ä¸­çš„å›¾ç‰‡è¿›è¡Œæ‡’åŠ è½½å¤„ç†ï¼Œå¯è§èŒƒå›´å¤–çš„å›¾ç‰‡ä¸ä¼šåŠ è½½<br># Lazy loading of images on the page<br>lazyload:<br>  enable: true<br>  # æ‡’åŠ è½½ä»…å¯¹æ–‡ç« é¡µç”Ÿæ•ˆï¼Œå¼€å¯åå¦‚æœè‡ªå®šä¹‰é¡µé¢éœ€è¦ä½¿ç”¨ï¼Œå¯ä»¥åœ¨ Front-matter é‡ŒæŒ‡å®š `lazyload: true`<br>  # If true, only enable lazyload on the post page. For custom pages, you can set &#x27;lazyload: true&#x27; in front-matter<br>  onlypost: false<br><br># ä¸»é¢˜ç‰ˆæœ¬ç›¸å…³<br># Theme version<br>version:<br>  # æ¯æ¬¡ç”Ÿæˆé¡µé¢åï¼Œæ£€æµ‹ä¸»é¢˜æ˜¯å¦ä¸ºæœ€æ–°ç‰ˆæœ¬<br>  # If true, check whether Fluid is the latest version after hexo generate<br>  check: false<br><br><br>#---------------------------<br># é¡µå¤´<br># Header<br>#---------------------------<br><br># å¯¼èˆªæ çš„ç›¸å…³é…ç½®<br># Navigation bar<br>navbar:<br>  # å¯¼èˆªæ å·¦ä¾§çš„æ ‡é¢˜ï¼Œä¸ºç©ºåˆ™æŒ‰ hexo config ä¸­ `title` æ˜¾ç¤º<br>  # The title on the left side of the navigation bar. If empty, it is based on `title` in hexo config<br>  blog_title: &quot;Fluid&quot;<br><br>  # å¯¼èˆªæ æ¯›ç»ç’ƒç‰¹æ•ˆï¼Œå®éªŒæ€§åŠŸèƒ½ï¼Œå¯èƒ½ä¼šé€ æˆé¡µé¢æ»šåŠ¨æ‰å¸§å’ŒæŠ–åŠ¨ï¼Œéƒ¨åˆ†æµè§ˆå™¨ä¸æ”¯æŒä¼šè‡ªåŠ¨ä¸ç”Ÿæ•ˆ<br>  # Navigation bar frosted glass special animation. It is an experimental feature<br>  ground_glass:<br>    enable: false<br><br>    # æ¨¡ç³Šåƒç´ ï¼Œåªèƒ½ä¸ºæ•°å­—ï¼Œæ•°å­—è¶Šå¤§æ¨¡ç³Šåº¦è¶Šé«˜<br>    # Number of blurred pixel. the larger the number, the higher the blur<br>    px: 3<br><br>    # ä¸é€æ˜åº¦ï¼Œæ•°å­—è¶Šå¤§é€æ˜åº¦è¶Šä½ï¼Œæ³¨æ„é€æ˜è¿‡åº¦å¯èƒ½çœ‹ä¸æ¸…èœå•å­—ä½“<br>    # Ratio of opacity, 1.0 is completely opaque<br>    # available: 0 - 1.0<br>    alpha: 0.7<br><br>  # å¯¼èˆªæ èœå•ï¼Œå¯è‡ªè¡Œå¢å‡ï¼Œkey ç”¨æ¥å…³è” languages/*.ymlï¼Œå¦‚ä¸å­˜åœ¨å…³è”åˆ™æ˜¾ç¤º key æœ¬èº«çš„å€¼ï¼›icon æ˜¯ css classï¼Œå¯ä»¥çœç•¥ï¼›å¢åŠ  name å¯ä»¥å¼ºåˆ¶æ˜¾ç¤ºæŒ‡å®šåç§°<br>  # Navigation bar menu. `key` is used to associate languages/*.yml. If there is no association, the value of `key` itself will be displayed; if `icon` is a css class, it can be omitted; adding `name` can force the display of the specified name<br>  menu:<br>    - &#123; key: &quot;home&quot;, link: &quot;/&quot;, icon: &quot;iconfont icon-home-fill&quot; &#125;<br>    - &#123; key: &quot;archive&quot;, link: &quot;/archives/&quot;, icon: &quot;iconfont icon-archive-fill&quot; &#125;<br>    - &#123; key: &quot;category&quot;, link: &quot;/categories/&quot;, icon: &quot;iconfont icon-category-fill&quot; &#125;<br>    - &#123; key: &quot;tag&quot;, link: &quot;/tags/&quot;, icon: &quot;iconfont icon-tags-fill&quot; &#125;<br>    - &#123; key: &quot;about&quot;, link: &quot;/about/&quot;, icon: &quot;iconfont icon-user-fill&quot; &#125;<br>    #- &#123; key: &quot;links&quot;, link: &quot;/links/&quot;, icon: &quot;iconfont icon-link-fill&quot; &#125;<br><br># æœç´¢åŠŸèƒ½ï¼ŒåŸºäº hexo-generator-search æ’ä»¶ï¼Œè‹¥å·²å®‰è£…å…¶ä»–æœç´¢æ’ä»¶è¯·å…³é—­æ­¤åŠŸèƒ½ï¼Œä»¥é¿å…ç”Ÿæˆå¤šä½™çš„ç´¢å¼•æ–‡ä»¶<br># Search feature, based on hexo-generator-search. If you have installed other search plugins, please disable this feature to avoid generating redundant index files<br>search:<br>  enable: true<br>  # æœç´¢ç´¢å¼•æ–‡ä»¶çš„è·¯å¾„ï¼Œå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„æˆ–å¤–ç«™çš„ç»å¯¹è·¯å¾„<br>  # Path for search index file, it can be a relative path or an absolute path<br>  path: /local-search.xml<br><br>  # æ–‡ä»¶ç”Ÿæˆåœ¨æœ¬åœ°çš„ä½ç½®ï¼Œå¿…é¡»æ˜¯ç›¸å¯¹è·¯å¾„<br>  # The location where the index file is generated locally, it must be a relative location<br>  generate_path: /local-search.xml<br><br>  # æœç´¢çš„èŒƒå›´<br>  # Search field<br>  # Options: post | page | all<br>  field: post<br><br>  # æœç´¢æ˜¯å¦æ‰«ææ­£æ–‡<br>  # If true, search will scan the post content<br>  content: true<br><br># é¦–å±å›¾ç‰‡çš„ç›¸å…³é…ç½®<br># Config of the big image on the first screen<br>banner:<br>  # è§†å·®æ»šåŠ¨ï¼Œå›¾ç‰‡ä¸æ¿å—ä¼šéšç€å±å¹•æ»šåŠ¨äº§ç”Ÿè§†å·®æ•ˆæœ<br>  # Scrolling parallax<br>  parallax: true<br><br>  # å›¾ç‰‡æœ€å°çš„å®½é«˜æ¯”ï¼Œä»¥å…å›¾ç‰‡ä¸¤è¾¹è¢«è¿‡åº¦è£å‰ªï¼Œé€‚ç”¨äºç§»åŠ¨ç«¯ç«–å±æ—¶ï¼Œå¦‚éœ€å…³é—­è®¾ä¸º 0<br>  # Minimum ratio of width to height, applicable to the vertical screen of mobile device, if you need to close it, set it to 0<br>  width_height_ratio: 1.0<br><br># å‘ä¸‹æ»šåŠ¨çš„ç®­å¤´<br># Scroll down arrow<br>scroll_down_arrow:<br>  enable: true<br><br>  # å¤´å›¾é«˜åº¦ä¸å°äºæŒ‡å®šæ¯”ä¾‹ï¼Œæ‰æ˜¾ç¤ºç®­å¤´<br>  # Only the height of the banner image is greater than the ratio, the arrow is displayed<br>  # Available: 0 - 100<br>  banner_height_limit: 80<br><br>  # ç¿»é¡µåè‡ªåŠ¨æ»šåŠ¨<br>  # Auto scroll after page turning<br>  scroll_after_turning_page: true<br><br># å‘é¡¶éƒ¨æ»šåŠ¨çš„ç®­å¤´<br># Scroll top arrow<br>scroll_top_arrow:<br>  enable: true<br><br><br>#---------------------------<br># é¡µè„š<br># Footer<br>#---------------------------<br>footer:<br>  # é¡µè„šç¬¬ä¸€è¡Œæ–‡å­—çš„ HTMLï¼Œå»ºè®®ä¿ç•™ Fluid çš„é“¾æ¥ï¼Œç”¨äºå‘æ›´å¤šäººæ¨å¹¿æœ¬ä¸»é¢˜<br>  # HTML of the first line of the footer, it is recommended to keep the Fluid link to promote this theme to more people<br>  content: &#x27;<br>    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://hexo.io&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;_blank&quot;</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;nofollow noopener&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Hexo<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-love&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://github.com/fluid-dev/hexo-theme-fluid&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;_blank&quot;</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;nofollow noopener&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Fluid<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>  &#x27;<br><br>  # å±•ç¤ºç½‘ç«™çš„ PVã€UV ç»Ÿè®¡æ•°<br>  # Display website PV and UV statistics<br>  statistics:<br>    enable: false<br><br>    # ç»Ÿè®¡æ•°æ®æ¥æºï¼Œå¦‚æœä½¿ç”¨ leancloud éœ€è¦è®¾ç½® `web_analytics: leancloud` ä¸­çš„å‚æ•°ï¼›å¦‚æœä½¿ç”¨ busuanzi å¯èƒ½ä¼šæœ‰è¯·æ±‚å¤±è´¥çš„æƒ…å†µ<br>    # Data source. If use leancloud, you need to set the parameter in `web_analytics: leancloud`<br>    # Options: busuanzi | leancloud<br>    source: &quot;busuanzi&quot;<br><br>    # é¡µé¢æ˜¾ç¤ºçš„æ–‡æœ¬ï¼Œ&#123;&#125;æ˜¯æ•°å­—çš„å ä½ç¬¦ï¼ˆå¿…é¡»åŒ…å«)ï¼Œä¸‹åŒ<br>    # Displayed text, &#123;&#125; is a placeholder for numbers (must be included), the same below<br>    pv_format: &quot;æ€»è®¿é—®é‡ &#123;&#125; æ¬¡&quot;<br>    uv_format: &quot;æ€»è®¿å®¢æ•° &#123;&#125; äºº&quot;<br><br>  # å›½å†…å¤§é™†æœåŠ¡å™¨çš„å¤‡æ¡ˆä¿¡æ¯<br>  # For Chinese mainland website policy, other areas keep disable<br>  beian:<br>    enable: false<br>    # ICPè¯å·<br>    icp_text: äº¬ICPè¯123456å·<br>    # å…¬å®‰å¤‡æ¡ˆå·ï¼Œä¸å¡«åˆ™åªæ˜¾ç¤ºICP<br>    police_text: äº¬å…¬ç½‘å®‰å¤‡12345678å·<br>    # å…¬å®‰å¤‡æ¡ˆçš„ç¼–å·ï¼Œç”¨äºURLè·³è½¬æŸ¥è¯¢<br>    police_code: 12345678<br>    # å…¬å®‰å¤‡æ¡ˆçš„å›¾ç‰‡. ä¸ºç©ºæ—¶ä¸æ˜¾ç¤ºå¤‡æ¡ˆå›¾ç‰‡<br>    police_icon: /img/police_beian.png<br><br><br>#---------------------------<br># é¦–é¡µ<br># Home Page<br>#---------------------------<br>index:<br>  # é¦–é¡µ Banner å¤´å›¾ï¼Œå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ï¼Œä»¥ä¸‹ç›¸åŒ<br>  # Path of Banner image, can be a relative path or an absolute path, the same on other pages<br>  banner_img: /img/default.png<br><br>  # å¤´å›¾é«˜åº¦ï¼Œå±å¹•ç™¾åˆ†æ¯”<br>  # Height ratio of banner image<br>  # Available: 0 - 100<br>  banner_img_height: 100<br><br>  # å¤´å›¾é»‘è‰²è’™ç‰ˆçš„ä¸é€æ˜åº¦ï¼Œavailable: 0 - 1.0ï¼Œ 1 æ˜¯å®Œå…¨ä¸é€æ˜<br>  # Opacity of the banner mask, 1.0 is completely opaque<br>  # Available: 0 - 1.0<br>  banner_mask_alpha: 0.3<br><br>  # é¦–é¡µå‰¯æ ‡é¢˜çš„ç‹¬ç«‹è®¾ç½®<br>  # Independent config of home page subtitle<br>  slogan:<br>    enable: true<br><br>    # ä¸ºç©ºåˆ™æŒ‰ hexo config.subtitle æ˜¾ç¤º<br>    # If empty, text based on `subtitle` in hexo config<br>    text: &quot;An elegant Material-Design theme for Hexo&quot;<br><br>    # é€šè¿‡ API æ¥å£ä½œä¸ºé¦–é¡µå‰¯æ ‡é¢˜çš„å†…å®¹ï¼Œå¿…é¡»è¿”å›çš„æ˜¯ JSON æ ¼å¼ï¼Œå¦‚æœè¯·æ±‚å¤±è´¥åˆ™æŒ‰ text å­—æ®µæ˜¾ç¤ºï¼Œè¯¥åŠŸèƒ½å¿…é¡»å…ˆå¼€å¯ typing æ‰“å­—æœºåŠŸèƒ½<br>    # Subtitle of the homepage through the API, must be returned a JSON. If the request fails, it will be displayed in `text` value. This feature must first enable the typing animation<br>    api:<br>      enable: false<br><br>      # è¯·æ±‚åœ°å€<br>      # Request url<br>      url: &quot;&quot;<br><br>      # è¯·æ±‚æ–¹æ³•<br>      # Request method<br>      # Available: GET | POST | PUT<br>      method: &quot;GET&quot;<br><br>      # è¯·æ±‚å¤´<br>      # Request headers<br>      headers: &#123;&#125;<br><br>      # ä»è¯·æ±‚ç»“æœè·å–å­—ç¬¦ä¸²çš„å–å€¼å­—æ®µï¼Œæœ€ç»ˆå¿…é¡»æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚è¿”å›ç»“æœä¸º &#123;&quot;data&quot;: &#123;&quot;author&quot;: &quot;fluid&quot;, &quot;content&quot;: &quot;An elegant theme&quot;&#125;&#125;, åˆ™å–å€¼å­—æ®µä¸º [&#x27;data&#x27;, &#x27;content&#x27;]ï¼›å¦‚æœè¿”å›æ˜¯åˆ—è¡¨åˆ™è‡ªåŠ¨é€‰æ‹©ç¬¬ä¸€é¡¹<br>      # The value field of the string obtained from the response. For example, the response content is &#123;&quot;data&quot;: &#123;&quot;author&quot;: &quot;fluid&quot;, &quot;content&quot;: &quot;An elegant theme&quot;&#125;&#125;, the expected `keys: [&#x27;data&#x27;,&#x27;content&#x27;]`; if the return is a list, the first item is automatically selected<br>      keys: []<br><br>  # è‡ªåŠ¨æˆªå–æ–‡ç« æ‘˜è¦<br>  # Auto extract post<br>  auto_excerpt:<br>    enable: true<br><br>  # æ‰“å¼€æ–‡ç« çš„æ ‡ç­¾æ–¹å¼<br>  # The browser tag to open the post<br>  # Available: _blank | _self<br>  post_url_target: _self<br><br>  # æ˜¯å¦æ˜¾ç¤ºæ–‡ç« ä¿¡æ¯ï¼ˆæ—¶é—´ã€åˆ†ç±»ã€æ ‡ç­¾ï¼‰<br>  # Meta information of post<br>  post_meta:<br>    date: true<br>    category: true<br>    tag: true<br><br>  # æ–‡ç« é€šè¿‡ sticky æ’åºåï¼Œåœ¨é¦–é¡µæ–‡ç« æ ‡é¢˜å‰æ˜¾ç¤ºå›¾æ ‡<br>  # If the posts are sorted by `sticky`, an icon is displayed in front of the post title<br>  post_sticky:<br>    enable: true<br>    icon: &quot;iconfont icon-top&quot;<br><br><br>#---------------------------<br># æ–‡ç« é¡µ<br># Post Page<br>#---------------------------<br>post:<br>  banner_img: /img/default.png<br>  banner_img_height: 70<br>  banner_mask_alpha: 0.3<br><br>  # æ–‡ç« åœ¨é¦–é¡µçš„é»˜è®¤å°é¢å›¾ï¼Œå½“æ²¡æœ‰æŒ‡å®š index_img æ—¶ä¼šä½¿ç”¨è¯¥å›¾ç‰‡ï¼Œè‹¥ä¸¤è€…éƒ½ä¸ºç©ºåˆ™ä¸æ˜¾ç¤ºä»»ä½•å›¾ç‰‡<br>  # Path of the default post cover when `index_img` is not set. If both are empty, no image will be displayed<br>  default_index_img:<br><br>  # æ–‡ç« æ ‡é¢˜ä¸‹æ–¹çš„å…ƒä¿¡æ¯<br>  # Meta information below title<br>  meta:<br>    # ä½œè€…ï¼Œä¼˜å…ˆæ ¹æ® front-matter é‡Œ author å­—æ®µï¼Œå…¶æ¬¡æ˜¯ hexo é…ç½®ä¸­ author å€¼<br>    # Author, based on `author` field in front-matter, if not set, based on `author` value in hexo config<br>    author:<br>      enable: false<br><br>    # æ–‡ç« æ—¥æœŸï¼Œä¼˜å…ˆæ ¹æ® front-matter é‡Œ date å­—æ®µï¼Œå…¶æ¬¡æ˜¯ md æ–‡ä»¶æ—¥æœŸ<br>    # Post date, based on `date` field in front-matter, if not set, based on create date of .md file<br>    date:<br>      enable: true<br>      # æ ¼å¼å‚ç…§ ISO-8601 æ—¥æœŸæ ¼å¼åŒ–<br>      # ISO-8601 date format<br>      # See: http://momentjs.cn/docs/#/parsing/string-format/<br>      format: &quot;LL a&quot;<br><br>    # å­—æ•°ç»Ÿè®¡<br>    # Word count<br>    wordcount:<br>      enable: true<br>      # æ˜¾ç¤ºçš„æ–‡æœ¬ï¼Œ&#123;&#125;æ˜¯æ•°å­—çš„å ä½ç¬¦ï¼ˆå¿…é¡»åŒ…å«)ï¼Œä¸‹åŒ<br>      # Displayed text, &#123;&#125; is a placeholder for numbers (must be included), the same below<br>      format: &quot;&#123;&#125; å­—&quot;<br><br>    # ä¼°è®¡é˜…è¯»å…¨æ–‡éœ€è¦çš„æ—¶é•¿<br>    # Estimate the time required to read the full text<br>    min2read:<br>      enable: true<br>      format: &quot;&#123;&#125; åˆ†é’Ÿ&quot;<br>      # æ¯åˆ†é’Ÿé˜…è¯»å¤šå°‘å­—ï¼Œå¦‚æœæ˜¯æŠ€æœ¯æ–‡ç« ï¼Œå»ºè®®é™ä½<br>      # Words read per minute<br>      words: 100<br><br>    # æµè§ˆé‡è®¡æ•°<br>    # Number of visits<br>    views:<br>      enable: false<br>      # ç»Ÿè®¡æ•°æ®æ¥æº<br>      # Data Source<br>      # Options: busuanzi | leancloud<br>      source: &quot;busuanzi&quot;<br>      format: &quot;&#123;&#125; æ¬¡&quot;<br><br>  # åœ¨æ–‡ç« å¼€å¤´æ˜¾ç¤ºæ–‡ç« æ›´æ–°æ—¶é—´ï¼Œè¯¥æ—¶é—´é»˜è®¤æ˜¯ md æ–‡ä»¶æ›´æ–°æ—¶é—´ï¼Œå¯é€šè¿‡ front-matter ä¸­ `updated` æ‰‹åŠ¨æŒ‡å®šï¼ˆå’Œ date ä¸€æ ·æ ¼å¼ï¼‰<br>  # Update date is displayed at the beginning of the post. The default date is the update date of the md file, which can be manually specified by `updated` in front-matter (same format as date)<br>  updated:<br>    enable: false<br><br>    # æè¿°æ–‡å­—<br>    # Descriptive text before date<br>    content: æœ¬æ–‡æœ€åæ›´æ–°äºï¼š<br><br>    # æ˜¯å¦ä½¿ç”¨ç›¸å¯¹æ—¶é—´è¡¨ç¤ºï¼Œæ¯”å¦‚ï¼š&quot;3 å¤©å‰&quot;<br>    # If true, it will be a relative time, such as: &quot;3 days ago&quot;<br>    relative: false<br><br>  # æ–‡ç« å³ä¾§ç›®å½•<br>  # Table of contents (TOC)<br>  toc:<br>    enable: true<br>    # ç›®å½•ä¼šé€‰æ‹©è¿™äº›èŠ‚ç‚¹ä½œä¸ºæ ‡é¢˜<br>    # TOC will select these nodes as headings<br>    headingSelector: &quot;h1,h2,h3,h4,h5,h6&quot;<br>    # å±‚çº§çš„æŠ˜å æ·±åº¦ï¼Œ0 æ˜¯å…¨éƒ¨æŠ˜å ï¼Œå¤§äº 0 åå¦‚æœå­˜åœ¨ä¸‹çº§æ ‡é¢˜åˆ™é»˜è®¤å±•å¼€<br>    # Collapse depth. If 0, all headings collapsed. If greater than 0, it will be expanded by default if there are sub headings<br>    collapseDepth: 0<br><br>  # ç‰ˆæƒå£°æ˜ï¼Œä¼šæ˜¾ç¤ºåœ¨æ¯ç¯‡æ–‡ç« çš„ç»“å°¾<br>  # Copyright, will be displayed at the end of each post<br>  copyright:<br>    enable: true<br>    content: &#x27;æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://creativecommons.org/licenses/by-sa/4.0/deed.zh&quot;</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;nofollow noopener&quot;</span>&gt;</span>CC BY-SA 4.0 åè®®<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼&#x27;<br><br>  # æ–‡ç« åº•éƒ¨ä¸Šä¸€ç¯‡ä¸‹ä¸€ç¯‡åŠŸèƒ½<br>  # Link to previous/next post<br>  prev_next:<br>    enable: true<br><br>  # æ–‡ç« åº•éƒ¨è‡ªå®šä¹‰åŒºåŸŸï¼ˆä½äº footer ä¸Šæ–¹ï¼‰ï¼Œæ”¯æŒ HTMLï¼Œå¯æ’å…¥èµèµç ã€å…¬ä¼—å·è¿™ç±»å†…å®¹å†…å®¹<br>  # Custom content at the bottom of the post page (located above the footer)<br>  custom:<br>    enable: false<br>    content: &#x27;<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://octodex.github.com/images/jetpacktocat.png&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;rounded mx-auto d-block mt-5&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width:150px; height:150px;&quot;</span>&gt;</span>&#x27;<br><br>  # æ–‡ç« å›¾ç‰‡å¯ç‚¹å‡»æ”¾å¤§<br>  # Zoom feature of images<br>  image_zoom:<br>    enable: true<br><br>  # è„šæ³¨è¯­æ³•ï¼Œä¼šåœ¨æ–‡ç« åº•éƒ¨ç”Ÿæˆè„šæ³¨ï¼Œå¦‚æœ Markdown æ¸²æŸ“å™¨æœ¬èº«æ”¯æŒï¼Œåˆ™å»ºè®®å…³é—­ï¼Œå¦åˆ™å¯èƒ½ä¼šå†²çª<br>  # Support footnote syntax, footnotes will be generated at the bottom of the post page. If the Markdown renderer itself supports it, please disable it, otherwise it may conflict<br>  footnote:<br>    enable: true<br>    # è„šæ³¨çš„èŠ‚æ ‡é¢˜ï¼Œä¹Ÿå¯ä»¥åœ¨ front-matter ä¸­é€šè¿‡ `footnote: <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Reference<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>` è¿™ç§å½¢å¼ä¿®æ”¹å•ç‹¬é¡µé¢çš„ header<br>    # The section title of the footnote, you can also modify the header of a single page in the form of `footnote: <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Reference<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>` in front-matter<br>    header: &#x27;&#x27;<br><br>  # æ•°å­¦å…¬å¼ï¼Œå¼€å¯ä¹‹å‰éœ€è¦æ›´æ¢ Markdown æ¸²æŸ“å™¨ï¼Œå¦åˆ™å¤æ‚å…¬å¼ä¼šæœ‰å…¼å®¹é—®é¢˜ï¼Œå…·ä½“è¯·è§ï¼šhttps://hexo.fluid-dev.com/docs/guide/##latex-æ•°å­¦å…¬å¼<br>  # Mathematical formula. If enable, you need to change the Markdown renderer, see: https://hexo.fluid-dev.com/docs/en/guide/#math<br>  math:<br>    # å¼€å¯åæ–‡ç« é»˜è®¤å¯ç”¨ï¼Œè‡ªå®šä¹‰é¡µé¢å¦‚éœ€ä½¿ç”¨ï¼Œéœ€åœ¨ Front-matter ä¸­æŒ‡å®š `math: true`<br>    # If you want to use math on the custom page, you need to set `math: true` in Front-matter<br>    enable: false<br><br>    # å¼€å¯åï¼Œåªæœ‰åœ¨æ–‡ç«  Front-matter é‡ŒæŒ‡å®š `math: true` æ‰ä¼šåœ¨æ–‡ç« é¡µå¯åŠ¨å…¬å¼è½¬æ¢ï¼Œä»¥ä¾¿åœ¨é¡µé¢ä¸åŒ…å«å…¬å¼æ—¶æé«˜åŠ è½½é€Ÿåº¦<br>    # If true, only set `math: true` in Front-matter will enable math, to load faster when the page does not contain math<br>    specific: false<br><br>    # Options: mathjax | katex<br>    engine: mathjax<br><br>  # æµç¨‹å›¾ï¼ŒåŸºäº mermaid-jsï¼Œå…·ä½“è¯·è§ï¼šhttps://hexo.fluid-dev.com/docs/guide/#mermaid-æµç¨‹å›¾<br>  # Flow chart, based on mermaid-js, see: https://hexo.fluid-dev.com/docs/en/guide/#mermaid<br>  mermaid:<br>    # å¼€å¯åæ–‡ç« é»˜è®¤å¯ç”¨ï¼Œè‡ªå®šä¹‰é¡µé¢å¦‚éœ€ä½¿ç”¨ï¼Œéœ€åœ¨ Front-matter ä¸­æŒ‡å®š `mermaid: true`<br>    # If you want to use mermaid on the custom page, you need to set `mermaid: true` in Front-matter<br>    enable: false<br><br>    # å¼€å¯åï¼Œåªæœ‰åœ¨æ–‡ç«  Front-matter é‡ŒæŒ‡å®š `mermaid: true` æ‰ä¼šåœ¨æ–‡ç« é¡µå¯åŠ¨å…¬å¼è½¬æ¢ï¼Œä»¥ä¾¿åœ¨é¡µé¢ä¸åŒ…å«å…¬å¼æ—¶æé«˜åŠ è½½é€Ÿåº¦<br>    # If true, only set `mermaid: true` in Front-matter will enable mermaid, to load faster when the page does not contain mermaid<br>    specific: false<br><br>    # See: http://mermaid-js.github.io/mermaid/<br>    options: &#123; theme: &#x27;default&#x27; &#125;<br><br>  # è¯„è®ºæ’ä»¶<br>  # Comment plugin<br>  comments:<br>    enable: false<br>    # æŒ‡å®šçš„æ’ä»¶ï¼Œéœ€è¦åŒæ—¶è®¾ç½®å¯¹åº”æ’ä»¶çš„å¿…è¦å‚æ•°<br>    # The specified plugin needs to set the necessary parameters at the same time<br>    # Options: utterances | disqus | gitalk | valine | waline | changyan | livere | remark42 | twikoo<br>    type: disqus<br><br><br>#---------------------------<br># è¯„è®ºæ’ä»¶<br># Comment plugins<br>#<br># å¼€å¯è¯„è®ºéœ€è¦å…ˆè®¾ç½®ä¸Šæ–¹ `post: comments: enable: true`ï¼Œç„¶åæ ¹æ® `type` è®¾ç½®ä¸‹æ–¹å¯¹åº”çš„è¯„è®ºæ’ä»¶å‚æ•°<br># Enable comments need to be set `post: comments: enable: true`, then set the corresponding comment plugin parameters below according to `type`<br>#---------------------------<br><br># Utterances<br># åŸºäº GitHub Issues<br># Based on GitHub Issues<br># See: https://utteranc.es<br>utterances:<br>  repo:<br>  issue_term: pathname<br>  label: utterances<br>  theme: github-light<br>  theme_dark: github-dark<br>  crossorigin: anonymous<br><br># Disqus<br># åŸºäºç¬¬ä¸‰æ–¹çš„æœåŠ¡ï¼Œå›½å†…ç”¨æˆ·ç›´æ¥ä½¿ç”¨å®¹æ˜“è¢«å¢™ï¼Œå»ºè®®é…åˆ Disqusjs<br># Based on third-party service<br># See: https://disqus.com<br>disqus:<br>  shortname:<br>  # ä»¥ä¸‹ä¸º Disqusjs æ”¯æŒ, å›½å†…ç”¨æˆ·å¦‚æœæƒ³ä½¿ç”¨ Disqus å»ºè®®é…åˆä½¿ç”¨<br>  # The following are Disqusjs configurations, please ignore if DisqusJS is not required<br>  # See: https://github.com/SukkaW/DisqusJS<br>  disqusjs: false<br>  apikey:<br><br># Gitalk<br># åŸºäº GitHub Issues<br># Based on GitHub Issues<br># See: https://github.com/gitalk/gitalk#options<br>gitalk:<br>  clientID:<br>  clientSecret:<br>  repo:<br>  owner:<br>  admin: [&#x27;name&#x27;]<br>  language: zh-CN<br>  labels: [&#x27;Gitalk&#x27;]<br>  perPage: 10<br>  pagerDirection: last<br>  distractionFreeMode: false<br>  createIssueManually: true<br><br># Valine<br># åŸºäº LeanCloud<br># Based on LeanCloud<br># See: https://valine.js.org/configuration.html<br>valine:<br>  appid:<br>  appkey:<br>  placeholder: è¯´ç‚¹ä»€ä¹ˆ<br>  path: window.location.pathname<br>  avatar: retro<br>  meta: [&#x27;nick&#x27;, &#x27;mail&#x27;, &#x27;link&#x27;]<br>  pageSize: 10<br>  lang: zh-CN<br>  highlight: false<br>  recordIP: false<br>  serverURLs:<br><br># Waline<br># ä¸€æ¬¾ä» Valine è¡ç”Ÿçš„å¸¦åç«¯çš„è¯„è®ºæ’ä»¶<br># A comment plugin with backend derived from Valine<br># See: https://waline.js.org/<br>waline:<br>  serverURL: &#x27;&#x27;<br>  placeholder: è¯´ç‚¹ä»€ä¹ˆ<br>  path: window.location.pathname<br>  avatar: retro<br>  meta: [&#x27;nick&#x27;, &#x27;mail&#x27;, &#x27;link&#x27;]<br>  pageSize: 10<br>  lang: zh-CN<br>  highlight: true<br>  avatarForce: false<br>  requiredFields: []<br>  emojiCDN: &#x27;&#x27;<br>  emojiMaps: &#123;&#125;<br><br># ç•…è¨€ Changyan<br># åŸºäºç¬¬ä¸‰æ–¹çš„æœåŠ¡<br># Based on third-party service, insufficient support for regions outside China<br># http://changyan.kuaizhan.com<br>changyan:<br>  appid: &#x27;&#x27;<br>  appkey: &#x27;&#x27;<br><br># æ¥å¿…åŠ› Livere<br># åŸºäºç¬¬ä¸‰æ–¹çš„æœåŠ¡<br># Based on third-party service<br># See: https://www.livere.com<br>livere:<br>  uid: &#x27;&#x27;<br><br># Remark42<br># éœ€è¦è‡ªå·±è¿è¡Œåç«¯æœåŠ¡<br># Need to run the backend service yourself<br># See: https://remark42.com<br>remark42:<br>  host:<br>  site_id:<br>  max_shown_comments: 10<br>  locale: zh<br><br># Twikoo<br># åŸºäºè…¾è®¯äº‘å¼€å‘<br># Based on Tencent CloudBase<br># See: https://twikoo.js.org<br>twikoo:<br>  env_id:<br><br><br>#---------------------------<br># å½’æ¡£é¡µ<br># Archive Page<br>#---------------------------<br>archive:<br>  banner_img: /img/default.png<br>  banner_img_height: 60<br>  banner_mask_alpha: 0.3<br>  subtitle:<br><br><br>#---------------------------<br># åˆ†ç±»é¡µ<br># Category Page<br>#---------------------------<br>category:<br>  enable: true<br>  banner_img: /img/default.png<br>  banner_img_height: 60<br>  banner_mask_alpha: 0.3<br>  subtitle:<br><br>  # å•ä¸ªåˆ†ç±»ä¸­æŠ˜å å±•ç¤ºæ–‡ç« æ•°çš„æœ€å¤§å€¼ï¼Œè¶…è¿‡é™åˆ¶ä¼šæ˜¾ç¤º More<br>  # The maximum number of posts in a single category. If the limit is exceeded, it will be displayed More<br>  post_limit: 10<br><br>  # æ’åºå­—æ®µï¼Œå‰é¢å¸¦å‡å·æ˜¯å€’åºï¼Œä¸å¸¦å‡å·æ˜¯æ­£åºï¼Œå¯é€‰é¡¹ï¼šname | length<br>  # Sort field, with a minus sign is reverse order<br>  # Options: name | length<br>  order_by: &quot;-length&quot;<br><br>  # å±‚çº§çš„æŠ˜å æ·±åº¦ï¼Œ0 æ˜¯å…¨éƒ¨æŠ˜å ï¼Œå¤§äº 0 åå¦‚æœå­˜åœ¨å­åˆ†ç±»åˆ™é»˜è®¤å±•å¼€<br>  # Collapse depth. If 0, all posts collapsed. If greater than 0, it will be expanded by default if there are subcategories<br>  collapse_depth: 0<br><br><br>#---------------------------<br># æ ‡ç­¾é¡µ<br># Tag Page<br>#---------------------------<br>tag:<br>  enable: true<br>  banner_img: /img/default.png<br>  banner_img_height: 80<br>  banner_mask_alpha: 0.3<br>  subtitle:<br>  tagcloud:<br>    min_font: 15<br>    max_font: 30<br>    unit: px<br>    start_color: &quot;#BBBBEE&quot;<br>    end_color: &quot;#337ab7&quot;<br><br><br>#---------------------------<br># å…³äºé¡µ<br># About Page<br>#---------------------------<br>about:<br>  enable: true<br>  banner_img: /img/default.png<br>  banner_img_height: 60<br>  banner_mask_alpha: 0.3<br>  subtitle:  # æ‰“å­—æœºå†…å®¹<br>  avatar: /img/avatar.png<br>  name: &quot;Fluid&quot;<br>  introduce: &quot;An elegant theme for Hexo&quot;<br>  # æ›´å¤šå›¾æ ‡å¯ä» https://hexo.fluid-dev.com/docs/icon/ æŸ¥æ‰¾ï¼Œ`class` ä»£è¡¨å›¾æ ‡çš„ css classï¼Œæ·»åŠ  `qrcode` åï¼Œå›¾æ ‡ä¸å†æ˜¯é“¾æ¥è€Œæ˜¯æ‚¬æµ®äºŒç»´ç <br>  # More icons can be found from https://hexo.fluid-dev.com/docs/en/icon/  `class` is the css class of the icon. If adding `qrcode`, The icon is no longer a link, but a hovering QR code<br>  icons:<br>    - &#123; class: &quot;iconfont icon-github-fill&quot;, link: &quot;https://github.com&quot;, tip: &quot;GitHub&quot; &#125;<br>    - &#123; class: &quot;iconfont icon-douban-fill&quot;, link: &quot;https://douban.com&quot;, tip: &quot;è±†ç“£&quot; &#125;<br>    - &#123; class: &quot;iconfont icon-wechat-fill&quot;, qrcode: &quot;/img/favicon.png&quot; &#125;<br><br><br>#---------------------------<br># è‡ªå®šä¹‰é¡µ<br># Custom Page<br>#<br># é€šè¿‡ hexo new page å‘½ä»¤åˆ›å»ºçš„é¡µé¢<br># Custom Page through `hexo new page`<br>#---------------------------<br>page:<br>  banner_img: /img/default.png<br>  banner_img_height: 60<br>  banner_mask_alpha: 0.3<br><br><br>#---------------------------<br># 404é¡µ<br># 404 Page<br>#---------------------------<br>page404:<br>  enable: true<br>  banner_img: /img/default.png<br>  banner_img_height: 85<br>  banner_mask_alpha: 0.3<br>  subtitle: &quot;Page not found&quot;<br><br><br>#---------------------------<br># å‹é“¾é¡µ<br># Links Page<br>#---------------------------<br>links:<br>  enable: true<br>  banner_img: /img/default.png<br>  banner_img_height: 60<br>  banner_mask_alpha: 0.3<br>  subtitle:<br>  # å‹é“¾çš„æˆå‘˜é¡¹<br>  # Member item of page<br>  items:<br>    - &#123;<br>      title: &quot;Fluid Blog&quot;,<br>      intro: &quot;ä¸»é¢˜åšå®¢&quot;,<br>      link: &quot;https://hexo.fluid-dev.com/&quot;,<br>      image: &quot;/img/favicon.png&quot;<br>    &#125;<br>    - &#123;<br>      title: &quot;Fluid Docs&quot;,<br>      intro: &quot;ä¸»é¢˜ä½¿ç”¨æŒ‡å—&quot;,<br>      link: &quot;https://hexo.fluid-dev.com/docs/&quot;,<br>      image: &quot;/img/favicon.png&quot;<br>    &#125;<br>    - &#123;<br>      title: &quot;Fluid Repo&quot;,<br>      intro: &quot;ä¸»é¢˜ GitHub ä»“åº“&quot;,<br>      link: &quot;https://github.com/fluid-dev/hexo-theme-fluid&quot;,<br>      image: &quot;/img/favicon.png&quot;<br>    &#125;<br><br><br>#---------------------------<br># ä»¥ä¸‹æ˜¯é…ç½® JS CSS ç­‰é™æ€èµ„æºçš„ URL å‰ç¼€ï¼Œå¯ä»¥è‡ªå®šä¹‰æˆ CDN åœ°å€ï¼Œ<br># é»˜è®¤çš„ jsDelivr CDN å¯èƒ½åœ¨éƒ¨åˆ†åœ°åŒºæ— æ³•è®¿é—®ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹ï¼Œæœ€å¥½ä½¿ç”¨ä¸é»˜è®¤é…ç½®ç›¸åŒçš„ç‰ˆæœ¬ï¼Œä»¥é¿å…æ½œåœ¨çš„é—®é¢˜ï¼Œ<br># ** å¦‚æœä½ ä¸çŸ¥é“å¦‚ä½•è®¾ç½®ï¼Œè¯·ä¸è¦åšä»»ä½•æ”¹åŠ¨ **<br>#<br># Here is the url prefix to configure the static assets. Set CDN addresses you want to customize.<br># Be aware that you would better use the same version as default ones to avoid potential problems.<br># DO NOT EDIT THE FOLLOWING SETTINGS UNLESS YOU KNOW WHAT YOU ARE DOING<br>#---------------------------<br><br>static_prefix:<br>  # å†…éƒ¨é™æ€<br>  # Internal static<br>  internal_js: /js<br>  internal_css: /css<br>  internal_img: /img<br><br>  # å›¾æ ‡åº“ï¼ŒåŒ…å«äº†å¤§é‡ç¤¾äº¤ç±»å›¾æ ‡ï¼Œä¸»é¢˜ä¾èµ–çš„ä¸åŒ…å«åœ¨å†…ï¼Œå› æ­¤å¯è‡ªè¡Œä¿®æ”¹ï¼Œè¯¦è§ https://hexo.fluid-dev.com/docs/icon/<br>  # Icon library, which includes many social icons, does not include those theme dependent, so your can modify link by yourself. See: https://hexo.fluid-dev.com/docs/en/icon/<br>  iconfont: //at.alicdn.com/t/font_1736178_kmeydafke9r.css<br><br>  anchor: https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/<br><br>  github_markdown: https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/<br><br>  jquery: https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/<br><br>  bootstrap: https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/<br><br>  highlightjs: https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/<br><br>  prismjs: https://cdn.jsdelivr.net/npm/prismjs@1.22.0/<br><br>  tocbot: https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/<br><br>  typed: https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/<br><br>  fancybox: https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/<br><br>  nprogress: https://cdn.jsdelivr.net/npm/nprogress@0.2.0/<br><br>  mathjax: https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/<br><br>  katex: https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/<br><br>  busuanzi: https://busuanzi.ibruce.info/busuanzi/2.3/<br><br>  clipboard: https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/<br><br>  mermaid: https://cdn.jsdelivr.net/npm/mermaid@8.8.3/dist/<br><br>  valine: https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/<br><br>  waline: https://cdn.jsdelivr.net/npm/@waline/client@0.4.2/dist/<br><br>  gitalk: https://cdn.jsdelivr.net/npm/gitalk@1.7.0/dist/<br><br>  disqusjs: https://cdn.jsdelivr.net/npm/disqusjs@1.0/dist/<br><br>  twikoo: https://cdn.jsdelivr.net/npm/twikoo@0.1.15/dist/<br><br>  hint: /lib/hint/<br></code></pre></td></tr></table></figure><h3 id="2-é…ç½®é¡µé¢é¡¶éƒ¨å¤§å›¾"><a class="header-anchor" href="#2-é…ç½®é¡µé¢é¡¶éƒ¨å¤§å›¾">Â¶</a>2. é…ç½®é¡µé¢é¡¶éƒ¨å¤§å›¾</h3><p><strong>å¿«é€Ÿå¼€å§‹åçš„ç©ºç™½æ•ˆæœ</strong>ï¼š</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/fluidä¸»é¢˜é…ç½®\empty_demo.png" alt="åˆå§‹é¡µé¢" style="zoom: 67%;"><p>åœ¨<strong>åšå®¢ç›®å½•</strong>ä¸‹çš„<strong>sourceæ–‡ä»¶å¤¹</strong>ä¸‹å»ºç«‹imgæ–‡ä»¶å¤¹ï¼Œimgæ–‡ä»¶å¤¹ä¸‹å»ºç«‹bgæ–‡ä»¶å¤¹è¡¨ç¤ºèƒŒæ™¯å›¾ç‰‡ï¼Œåœ¨é‡Œé¢å­˜å…¥è‡ªå®šä¹‰çš„å›¾ç‰‡ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/fluid%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE%5Catrox_bg.png" alt="Hexo-https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/fluidä¸»é¢˜é…ç½®èƒŒæ™¯å›¾"></p><p>ä¿®æ”¹<code>_config.fluid.yml</code>æ–‡ä»¶ä¸­çš„<code>banner_img</code>å±æ€§ï¼Œä½¿ç”¨æœ¬åœ°å›¾ç‰‡çš„ç›¸å¯¹è·¯å¾„</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">banner_img:</span> <span class="hljs-string">/img/bg/example/atrox1.jpg</span>  <span class="hljs-comment">#å¯¹åº”æ”¾åœ¨/source/img/bg/atrox1.jpg</span><br></code></pre></td></tr></table></figure><p>åœ¨æ¯ä¸ªé¡µé¢éƒ½æœ‰<code>banner_img</code>å±æ€§ï¼Œå„ä¸ªä¿®æ”¹å³å¯ã€‚</p><p><strong>ä¿®æ”¹å®Œæˆåçš„æ•ˆæœ</strong>ï¼š</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/fluidä¸»é¢˜é…ç½®\bg_img.png" alt="å®Œæˆæ•ˆæœ" style="zoom:50%;"><h3 id="3-è®¾ç½®åšå®¢æ ‡é¢˜"><a class="header-anchor" href="#3-è®¾ç½®åšå®¢æ ‡é¢˜">Â¶</a>3. è®¾ç½®åšå®¢æ ‡é¢˜</h3><p>é¡µé¢å·¦ä¸Šè§’çš„åšå®¢æ ‡é¢˜ï¼Œé»˜è®¤ä½¿ç”¨<strong>åšå®¢é…ç½®</strong>ä¸­çš„ <code>title</code>ï¼Œè¿™ä¸ªé…ç½®åŒæ—¶æ§åˆ¶ç€ç½‘é¡µåœ¨æµè§ˆå™¨æ ‡ç­¾ä¸­çš„æ ‡é¢˜ã€‚</p><p>æˆ‘ä»¬åœ¨<code>_config.fluid.yml</code>ä¸»é¢˜é…ç½®ä¸­è®¾ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">navbar:</span><br>  <span class="hljs-attr">blog_title:</span> <span class="hljs-string">&quot;AtroxQW&quot;</span><br></code></pre></td></tr></table></figure><p>æ•ˆæœå›¾ï¼š</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/fluidä¸»é¢˜é…ç½®\blog_title.png" alt="åšå®¢æ ‡é¢˜è®¾ç½®" style="zoom: 50%;"><h3 id="4-è‡ªå®šä¹‰å¯¼èˆªèœå•"><a class="header-anchor" href="#4-è‡ªå®šä¹‰å¯¼èˆªèœå•">Â¶</a>4. è‡ªå®šä¹‰å¯¼èˆªèœå•</h3><p>ç¬”è€…çš„å¯¼èˆªèœå•è®¾ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">menu:</span><br>  <span class="hljs-bullet">-</span> &#123; <span class="hljs-attr">key:</span> <span class="hljs-string">&quot;é¦–é¡µ&quot;</span>, <span class="hljs-attr">link:</span> <span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-attr">icon:</span> <span class="hljs-string">&quot;iconfont icon-home-fill&quot;</span> &#125;<br>  <span class="hljs-bullet">-</span> &#123; <span class="hljs-attr">key:</span> <span class="hljs-string">&quot;å½’æ¡£&quot;</span>, <span class="hljs-attr">link:</span> <span class="hljs-string">&quot;/archives/&quot;</span>, <span class="hljs-attr">icon:</span> <span class="hljs-string">&quot;iconfont icon-archive-fill&quot;</span> &#125;<br>  <span class="hljs-bullet">-</span> &#123; <span class="hljs-attr">key:</span> <span class="hljs-string">&quot;åˆ†ç±»&quot;</span>, <span class="hljs-attr">link:</span> <span class="hljs-string">&quot;/categories/&quot;</span>, <span class="hljs-attr">icon:</span> <span class="hljs-string">&quot;iconfont icon-category-fill&quot;</span> &#125;<br>  <span class="hljs-bullet">-</span> &#123; <span class="hljs-attr">key:</span> <span class="hljs-string">&quot;æ ‡ç­¾&quot;</span>, <span class="hljs-attr">link:</span> <span class="hljs-string">&quot;/tags/&quot;</span>, <span class="hljs-attr">icon:</span> <span class="hljs-string">&quot;iconfont icon-tags-fill&quot;</span> &#125;<br>  <span class="hljs-bullet">-</span> &#123; <span class="hljs-attr">key:</span> <span class="hljs-string">&quot;å…³äºæˆ‘&quot;</span>, <span class="hljs-attr">link:</span> <span class="hljs-string">&quot;/about/&quot;</span>, <span class="hljs-attr">icon:</span> <span class="hljs-string">&quot;iconfont icon-user-fill&quot;</span> &#125;<br></code></pre></td></tr></table></figure><ul><li><code>key</code>: ç”¨äºå…³è”æœ‰<a href="https://hexo.fluid-dev.com/docs/guide/#%E5%A4%9A%E8%AF%AD%E8%A8%80">å¤šè¯­è¨€</a>ï¼Œå¦‚ä¸å­˜åœ¨å…³è”åˆ™æ˜¾ç¤º key æœ¬èº«çš„å€¼</li><li><code>link</code>: è·³è½¬é“¾æ¥</li><li><code>icon</code>: å›¾æ ‡çš„ css classï¼Œå¯ä»¥çœç•¥ï¼ˆå³æ²¡æœ‰å›¾æ ‡ï¼‰</li><li><code>name</code>: å¼ºåˆ¶ä½¿ç”¨æ­¤åç§°æ˜¾ç¤ºï¼ˆä¸å†æŒ‰å¤šè¯­è¨€æ˜¾ç¤ºï¼‰ï¼Œå¯çœç•¥</li></ul><p><strong>å®Œæˆæ•ˆæœ</strong>ï¼š</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/fluidä¸»é¢˜é…ç½®/nav_bar.png" alt="è‡ªå®šä¹‰å¯¼èˆªèœå•" style="zoom: 80%;"><h3 id="5-å¼€å¯å›¾ç‰‡æ‡’åŠ è½½"><a class="header-anchor" href="#5-å¼€å¯å›¾ç‰‡æ‡’åŠ è½½">Â¶</a>5. å¼€å¯å›¾ç‰‡æ‡’åŠ è½½</h3><p>åœ¨<code>_config.fluid.yml</code>ä¸­è®¾ç½®<code>lazyload</code>å±æ€§ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">lazyload:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">onlypost:</span> <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><p>å¼€å¯åï¼Œå½“å›¾ç‰‡æ»šåŠ¨åˆ°å¯è§èŒƒå›´å†…æ‰ä¼šåŠ è½½ï¼Œå¯ä»¥å¤§å¹…æé«˜ç½‘é¡µæ•´ä½“åŠ è½½é€Ÿåº¦ã€‚<code>onlypost</code> ä¸º true æ—¶ï¼Œä»…åœ¨æ–‡ç« é¡µæ‰ä½¿ç”¨æ‡’åŠ è½½.</p><h3 id="6-è®¾ç½®åšå®¢å°é¢"><a class="header-anchor" href="#6-è®¾ç½®åšå®¢å°é¢">Â¶</a>6. è®¾ç½®åšå®¢å°é¢</h3><p>å¦‚æœæƒ³ç»Ÿä¸€ç»™æ–‡ç« è®¾ç½®ä¸€ä¸ªé»˜è®¤å›¾ç‰‡ï¼Œå¯åœ¨<strong>ä¸»é¢˜é…ç½®</strong>ä¸­è®¾ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">post:</span><br>  <span class="hljs-attr">default_index_img:</span> <span class="hljs-string">/img/blog/Hexo-Fluidåšå®¢é…ç½®.jpg</span><br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥å¯¹å•ç¯‡åšå®¢è®¾ç½®å°é¢ï¼Œåœ¨æ–‡ç« å¼€å¤´ <code>Front-matter</code>ä¸­é…ç½® <code>index_img</code> å±æ€§ã€‚</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown">title: Hexoxo<span class="hljs-emphasis">_Fluidä¸»é¢˜é…ç½®</span><br><span class="hljs-emphasis">date: 2020-12-30 09:18:36</span><br><span class="hljs-emphasis">tags: [Fluid,Hexo]</span><br><span class="hljs-emphasis">index_</span>img:/img/blog/Hexo-Fluidåšå®¢é…ç½®.jpg<br></code></pre></td></tr></table></figure><p><strong>æ•ˆæœ</strong>ï¼š</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/fluidä¸»é¢˜é…ç½®\index_img.png" alt="åšå®¢å°é¢" style="zoom:75%;"><h3 id="7-é›†æˆè¯„è®ºåŠŸèƒ½-gitalk"><a class="header-anchor" href="#7-é›†æˆè¯„è®ºåŠŸèƒ½-gitalk">Â¶</a>7. é›†æˆè¯„è®ºåŠŸèƒ½(gitalk)</h3><h4 id="7-1-æ³¨å†ŒOAuth-Application"><a class="header-anchor" href="#7-1-æ³¨å†ŒOAuth-Application">Â¶</a>7.1 æ³¨å†ŒOAuth Application</h4><p><a href="https://github.com/settings/applications/new">å®˜æ–¹å…¥å£</a>ï¼Œç‚¹å‡»è¿›å…¥æ¥<strong>æ³¨å†Œä¸€ä¸ªæ–°çš„OAuth Application</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/fluidä¸»é¢˜é…ç½®/new_application.png" alt="æ³¨å†ŒOAuth Application" style="zoom:100%;"><h4 id="7-2-æ³¨å†Œåè·å–ç§˜é’¥"><a class="header-anchor" href="#7-2-æ³¨å†Œåè·å–ç§˜é’¥">Â¶</a>7.2 æ³¨å†Œåè·å–ç§˜é’¥</h4><p>ç‚¹å‡»æ³¨å†Œåï¼Œä¼šè¿›å…¥æ–°é¡µé¢ã€‚æ˜¾ç¤ºæˆ‘ä»¬çš„OAuth <strong>Application</strong>çš„ <strong>Client ID</strong> å’Œ å°šæœªç”Ÿæˆçš„ <strong>Client secrets</strong></p><p>ï¼Œç‚¹å‡» <strong>Generate a new client secret</strong> æŒ‰é’®ç”Ÿæˆç§˜é’¥å³å¯ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/fluid%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/Client_id_secrets.png" alt="è·å–ç§˜é’¥"></p><h4 id="7-3-åšå®¢é›†æˆgitalk"><a class="header-anchor" href="#7-3-åšå®¢é›†æˆgitalk">Â¶</a>7.3 åšå®¢é›†æˆgitalk</h4><p>åœ¨<code>_config.fluid.yml</code>ä¸­<strong>å¼€å¯å¹¶æŒ‡å®šè¯„è®ºæ¨¡å—</strong>ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">post:</span><br>  <span class="hljs-attr">comments:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">type:</span> <span class="hljs-string">gitalk</span><br></code></pre></td></tr></table></figure><p>ç„¶ååœ¨ä¸‹æ–¹è¿˜è¦è®¾<strong>ç½®å¯¹åº”è¯„è®ºæ¨¡å—çš„å‚æ•°</strong>:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">gitalk:</span><br>  <span class="hljs-attr">clientID:</span> <span class="hljs-string">af550312a411b96c64b9</span>     <span class="hljs-comment">#åˆšæ‰çš„ClientID</span><br>  <span class="hljs-attr">clientSecret:</span> <span class="hljs-string">f11934265fd18324cb2d9fd605d7d445207a3e52</span>   <span class="hljs-comment">#åˆšæ‰çš„clientSecret</span><br>  <span class="hljs-attr">repo:</span> <span class="hljs-string">&#x27;gitalk&#x27;</span>                                     <span class="hljs-comment">#åˆšæ‰å–çš„å</span><br>  <span class="hljs-attr">owner:</span> <span class="hljs-string">&#x27;AtroxQW&#x27;</span>                            <span class="hljs-comment">#githubçš„ç”¨æˆ·å</span><br>  <span class="hljs-attr">admin:</span> [<span class="hljs-string">&#x27;AtroxQW&#x27;</span>]<br>  <span class="hljs-attr">language:</span> <span class="hljs-string">zh-CN</span><br>  <span class="hljs-attr">labels:</span> [<span class="hljs-string">&#x27;Gitalk&#x27;</span>]<br>  <span class="hljs-attr">perPage:</span> <span class="hljs-number">10</span><br>  <span class="hljs-attr">pagerDirection:</span> <span class="hljs-string">last</span><br>  <span class="hljs-attr">distractionFreeMode:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">createIssueManually:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><h4 id="7-4-åˆå§‹åŒ–issue"><a class="header-anchor" href="#7-4-åˆå§‹åŒ–issue">Â¶</a>7.4 åˆå§‹åŒ–issue</h4><p>æ¯æ¬¡å‘è¡¨ä¸€ç¯‡åšå®¢ï¼Œéƒ½éœ€è¦æˆ‘ä»¬ä½œè€…<strong>åˆå§‹åŒ–issue</strong>ï¼Œåˆå§‹åŒ–åè¯„è®ºå°±ä¼šåœ¨githubä¸Šçœ‹åˆ°ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/fluidä¸»é¢˜é…ç½®/init_issue.png" alt="åˆå§‹åŒ–issue" style="zoom:65%;"><h3 id="8-å…³äºé¡µé…ç½®"><a class="header-anchor" href="#8-å…³äºé¡µé…ç½®">Â¶</a>8. å…³äºé¡µé…ç½®</h3><p>åœ¨å…³äºé¡µï¼ŒFluidä¸»é¢˜è‡ªåŠ¨å¸®æˆ‘åˆå§‹åŒ–äº†ç©ºç™½çš„ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨<code>about</code>æ–‡ä»¶å¤¹ä¸‹å…¶ä¸­çš„<code>index.md</code>è¿½åŠ å†…å®¹å³å¯ã€‚ä¸‹é¢æ˜¯ç¬”è€…çš„å…³äºé¡µéƒ¨åˆ†é…ç½®ã€‚</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-section">## ç®€ä»‹</span><br>æ¬¢è¿å¤§å®¶æ¥åˆ° AtroxQW çš„ä¸»é¡µï¼Œæˆ‘æ˜¯ä¸€åæ²³åŒ—å·¥ä¸šå¤§å­¦åœ¨è¯»å¤§å­¦ç”Ÿï¼Œä¸“æ³¨äºå¼€å‘æŠ€æœ¯ä¸æœºå™¨å­¦ä¹ ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šåœ¨è¿™ä¸ªç‹¬ç«‹çš„ä¸ªäººåšå®¢ä¸Šï¼Œå‘å¸ƒä¸€äº›å…³äºæ¡†æ¶å­¦ä¹ ã€æœºå™¨å­¦ä¹ å’Œç”Ÿæ´»æ‚è°ˆçš„æ–‡ç« ã€‚<br><br><span class="hljs-section">## è½¬è½½</span><br>å¦‚æœæ‚¨è®¤ä¸ºæˆ‘çš„åšå®¢æ–‡ç« å¯¹æ‚¨æœ‰äº›è®¸å¸®åŠ©ï¼Œæƒ³è¦å¼•ç”¨æ–‡ç« ä¸­çš„éƒ¨åˆ†æ®µè½æˆ–è€…å›¾ç‰‡ï¼Œæ‚¨å¯ä»¥åœ¨è¯¥æ–‡ç« ä¸‹çš„è¯„è®ºåŒºç•™è¨€è®©æˆ‘çœ‹åˆ°æˆ–è€…ç•™ä¸‹è‡ªå·±çš„åŸæ–‡é“¾æ¥ã€‚<br><br><span class="hljs-section">## æ²Ÿé€š</span><br>å¦‚æœæ‚¨æƒ³è¦å’Œç¬”è€…æ²Ÿé€šçš„è¯ï¼Œè¯„è®ºåŒºç•™è¨€æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œæˆ‘æ¯å¤©éƒ½ä¼šç¿»é˜…è¯„è®ºåŒºç•™è¨€ã€‚å¦‚è¿‡æ‚¨å¼ºçƒˆæƒ³è¦å’Œæˆ‘æ·±å±‚æ¬¡æ²Ÿé€šï¼ˆç‹—å¤´ï¼‰ï¼Œè¯·åŠ æˆ‘ä¸‹é¢çš„QQæˆ–è€…Wechatï¼Œå¹¶å¤‡æ³¨ï¼š<span class="hljs-strong">**åšå®¢æ²Ÿé€š**</span>ï¼Œæˆ‘ä¼šå°½å¿«é€šè¿‡å„ä½çš„è¯·æ±‚ã€‚<br></code></pre></td></tr></table></figure><h3 id="9-åˆ†ç±»é¡µé…ç½®"><a class="header-anchor" href="#9-åˆ†ç±»é¡µé…ç½®">Â¶</a>9. åˆ†ç±»é¡µé…ç½®</h3><p>åˆ†ç±»é¡µé…ç½®ï¼Œå¯ä»¥åœ¨åšå®¢æ–‡ç« çš„ <strong>Front-matter</strong> ä¸­è®¾ç½®ã€‚åˆ†ç±»å’Œä¹‹å‰çš„æ ‡ç­¾è™½ç„¶å¬èµ·æ¥å¾ˆæ¥è¿‘ï¼Œä½†æ˜¯åœ¨ Hexoä¸­ä¸¤è€…æœ‰æ˜æ˜¾çš„åŒºåˆ«ï¼š<strong>åˆ†ç±»</strong> å…·æœ‰é¡ºåºæ€§å’Œå±‚æ¬¡æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´[foo,bar] ä¸ç­‰äº [bar,foo];</p><p>å†™æ³•ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs markdown">categories: [Diary,Life]<br>tags: [PS3,Games]<br></code></pre></td></tr></table></figure><h3 id="10-ä½¿ç”¨LaTexæ•°å­¦å…¬å¼"><a class="header-anchor" href="#10-ä½¿ç”¨LaTexæ•°å­¦å…¬å¼">Â¶</a>10. ä½¿ç”¨LaTexæ•°å­¦å…¬å¼</h3><p>åœ¨<code>_config.fluid.yml</code>ä¸­é…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">post:</span><br>  <span class="hljs-attr">math:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">specific:</span> <span class="hljs-literal">true</span> <span class="hljs-comment">#å½“ä¸º true æ—¶ï¼Œåªæœ‰åœ¨æ–‡ç«  Front-matter (opens new window)é‡ŒæŒ‡å®š math: true æ‰ä¼šåœ¨æ–‡ç« é¡µå¯åŠ¨å…¬å¼è½¬æ¢ï¼Œä»¥ä¾¿åœ¨é¡µé¢ä¸åŒ…å«å…¬å¼æ—¶æé«˜åŠ è½½é€Ÿåº¦ã€‚</span><br>    <span class="hljs-attr">engine:</span> <span class="hljs-string">mathjax</span><br></code></pre></td></tr></table></figure><h3 id="11-å‹é“¾è®¾ç½®"><a class="header-anchor" href="#11-å‹é“¾è®¾ç½®">Â¶</a>11. å‹é“¾è®¾ç½®</h3><p>å‹æƒ…é“¾æ¥é¡µç”¨äºå±•ç¤ºå¥½å‹çš„åšå®¢å…¥å£ï¼Œé»˜è®¤å…³é—­ï¼Œå¼€å¯éœ€è¦å…ˆåœ¨ <code>navbar</code> é¡¹ä¸­å°† <code>links</code> çš„æ³¨é‡Š(#å·)åˆ æ‰ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">navbar:</span><br>  <span class="hljs-attr">menu:</span><br>    <span class="hljs-bullet">-</span> &#123; <span class="hljs-attr">key:</span> <span class="hljs-string">&#x27;links&#x27;</span>, <span class="hljs-attr">link:</span> <span class="hljs-string">&#x27;/links/&#x27;</span>, <span class="hljs-attr">icon:</span> <span class="hljs-string">&#x27;iconfont icon-link-fill&#x27;</span> &#125;<br></code></pre></td></tr></table></figure><p>ç„¶åæ‰¾åˆ° <code>links</code> çš„é…ç½®é¡¹ï¼Œå¯¹é¡µé¢å†…å®¹è¿›è¡Œé…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">links:</span><br>  <span class="hljs-attr">items:</span><br>    <span class="hljs-bullet">-</span> &#123;<br>      <span class="hljs-attr">title:</span> <span class="hljs-string">&#x27;Fluid Docs&#x27;</span>,<br>      <span class="hljs-attr">intro:</span> <span class="hljs-string">&#x27;ä¸»é¢˜ä½¿ç”¨æŒ‡å—&#x27;</span>,<br>      <span class="hljs-attr">link:</span> <span class="hljs-string">&#x27;https://hexo.fluid-dev.com/docs/&#x27;</span>,<br>      <span class="hljs-attr">image:</span> <span class="hljs-string">&#x27;/img/favicon.png&#x27;</span><br>    &#125;<br></code></pre></td></tr></table></figure><ul><li><code>title</code>: å‹é“¾ç«™çš„æ ‡é¢˜</li><li><code>intro</code>: ç«™ç‚¹æˆ–åšä¸»çš„ç®€ä»‹ï¼Œå¯çœç•¥</li><li><code>link</code>: è·³è½¬é“¾æ¥</li><li><code>image</code>: å¤´åƒå›¾ç‰‡ï¼Œå¯çœç•¥</li></ul><h3 id="12-å‹ç¼©ç”Ÿæˆæ–‡ä»¶"><a class="header-anchor" href="#12-å‹ç¼©ç”Ÿæˆæ–‡ä»¶">Â¶</a>12. å‹ç¼©ç”Ÿæˆæ–‡ä»¶</h3><p>æˆ‘ä»¬ä½¿ç”¨ <a href="https://github.com/chenzhutian/hexo-all-minifier">hexo-all-minifier</a>ã€‚ä¹‹æ‰€ä»¥ä½¿ç”¨è¿™ä¸ªæ’ä»¶ï¼Œæ˜¯å› ä¸ºåšå®¢ä¸­è¾ƒå¤§çš„cssï¼Œjsæ–‡ä»¶ä¸ŠåŠ è½½é€Ÿåº¦ä¸å°½äººæ„ã€‚è€Œè¿™æ¬¾æ’ä»¶ä¸ä»…é«˜æ•ˆæ˜“ç”¨ï¼Œè€Œä¸”æ•ˆæœæ˜¾è‘—ã€‚</p><p>é¦–å…ˆï¼Œä½¿ç”¨cnpmå®‰è£…è¯¥æ’ä»¶ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">cnpm <span class="hljs-keyword">install</span> hexo-<span class="hljs-keyword">all</span>-minifier <span class="hljs-comment">--save</span><br></code></pre></td></tr></table></figure><p>ç„¶åï¼Œåœ¨åšå®¢ç›®å½•ä¸‹<code>config.yml</code>ä¸­é…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">all_minifier:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><h3 id="13-ç”Ÿæˆå”¯ä¸€æ°¸ä¹…æ–‡ç« é“¾æ¥"><a class="header-anchor" href="#13-ç”Ÿæˆå”¯ä¸€æ°¸ä¹…æ–‡ç« é“¾æ¥">Â¶</a>13. ç”Ÿæˆå”¯ä¸€æ°¸ä¹…æ–‡ç« é“¾æ¥</h3><p>åœ¨åšæ­¤ä¼˜åŒ–ä¹‹å‰ï¼Œhexoæ–‡ç« é“¾æ¥é»˜è®¤çš„ç”Ÿæˆè§„åˆ™æ˜¯ï¼š<code>:year/:month/:day/:title</code>ï¼Œæ˜¯æŒ‰ç…§å¹´ã€æœˆã€æ—¥ã€æ ‡é¢˜æ¥ç”Ÿæˆçš„ã€‚</p><p>æ¯”å¦‚ï¼š<code>/2020/12/30/Hexo-https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/fluidä¸»é¢˜é…ç½®/</code>.è¿™æ ·ï¼Œå¦‚æœæ–‡ç« æ ‡é¢˜æ˜¯ä¸­æ–‡çš„è¯ï¼ŒURLé“¾æ¥æ˜¯ä¹Ÿä¼šæ˜¯ä¸­æ–‡ï¼Œå¤åˆ¶åçš„é“¾æ¥ä¼šæ˜¯ä¸€é•¿ä¸²ï¼Œå¯è¯»æ€§æå·®ï¼Œä¹Ÿä¸å¤Ÿç®€æ´ã€‚</p><p>è¿™é‡Œï¼Œæˆ‘æ¨èä½¿ç”¨Fluidå®˜ç½‘æä¾›çš„ <a href="https://github.com/rozbo/hexo-abbrlink">hexo-abbrlink</a> æ’ä»¶ã€‚</p><p>é¦–å…ˆï¼Œä½¿ç”¨cnpmå®‰è£…è¯¥æ’ä»¶ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">npm <span class="hljs-keyword">install</span> hexo-abbrlink <span class="hljs-comment">--save</span><br></code></pre></td></tr></table></figure><p>ç„¶åï¼Œä¿®æ”¹ <code>config.yml</code> ä¸­çš„è®¾ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">permalink:</span> <span class="hljs-string">posts/:abbrlink/</span><br></code></pre></td></tr></table></figure><p>åœ¨å…¶ä¸­æ·»åŠ ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">permalink:</span> <span class="hljs-string">posts/:abbrlink.html</span>  <span class="hljs-comment"># æ­¤å¤„å¯ä»¥è‡ªå·±è®¾ç½®ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ :/abbrlink</span><br><span class="hljs-attr">abbrlink:</span><br>    <span class="hljs-attr">alg:</span> <span class="hljs-string">crc32</span>   <span class="hljs-comment">#ç®—æ³•ï¼š crc16(default) and crc32</span><br>    <span class="hljs-attr">rep:</span> <span class="hljs-string">hex</span>     <span class="hljs-comment">#è¿›åˆ¶ï¼š dec(default) and hex</span><br></code></pre></td></tr></table></figure><h3 id="14-æ’­æ”¾å™¨æ’ä»¶-hexo-tag-dplayer"><a class="header-anchor" href="#14-æ’­æ”¾å™¨æ’ä»¶-hexo-tag-dplayer">Â¶</a>14. æ’­æ”¾å™¨æ’ä»¶ hexo-tag-dplayer</h3><p>æ­¤æ’ä»¶å¯ä»¥åœ¨åšå®¢ä¸­æ’å…¥éŸ³ä¹æˆ–è§†é¢‘ï¼Œåˆ†åˆ†é’Ÿæé«˜åšå®¢æ ¼è°ƒ</p><p>é¦–å…ˆï¼Œå®‰è£…æ­¤æ’ä»¶</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">npm <span class="hljs-keyword">install</span> hexo-tag-dplayer <span class="hljs-comment">--save</span><br></code></pre></td></tr></table></figure>bad asset path... <p>ä½¿ç”¨ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">&#123;<span class="hljs-meta">%</span> dplayer <span class="hljs-string">&quot;url=http://www.nenu.edu.cn/_upload/article/videos/03/5f/7c999eed42e3aadc413d7f851f0e/0f50b3eb-9285-41d2-ac4d-6cc363651aad_B.mp4&quot;</span>  <span class="hljs-string">&quot;autoplay=true&quot;</span> <span class="hljs-string">&quot;preload=metadata&quot;</span> <span class="hljs-string">&quot;hotkey=true&quot;</span> <span class="hljs-meta">%</span>&#125;<br></code></pre></td></tr></table></figure><h3 id="15-Hexoåå°"><a class="header-anchor" href="#15-Hexoåå°">Â¶</a>15. Hexoåå°</h3><p><strong>hexoä½¿ç”¨ç¼–è¾‘æ–‡ç« æ—¶ï¼Œè‹¥ç”¨å…¶åŸç”Ÿæ–¹å¼ï¼Œåˆ™ä¸ä¾¿åˆ©ï¼Œè¿˜å¥½å®˜ç½‘æä¾›äº†ä¸€æ¬¾æ’ä»¶hexo-adminç•Œé¢åŒ–äº†markdownç¼–è¾‘å™¨ï¼Œåªéœ€è¦è®¿é—®ï¼š<a href="http://127.0.0.1:4000/admin">http://127.0.0.1:4000/admin</a> å³å¯æ–¹ä¾¿å¿«æ·çš„è¿›è¡Œåšæ–‡ç¼–è¾‘äº†ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</strong></p><p>ç¬¬ä¸€æ­¥ï¼Œå®‰è£…hexo-adminæ’ä»¶ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">npm <span class="hljs-keyword">install</span> <span class="hljs-comment">--save hexo-admin</span><br></code></pre></td></tr></table></figure><p>ç¬¬äºŒæ­¥ï¼Œå¯åŠ¨æœåŠ¡å™¨ã€‚</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta">hexo <span class="hljs-keyword">server</span> -d<br></code></pre></td></tr></table></figure><p>ç¬¬ä¸‰æ­¥ï¼Œåœ¨urlæ è¾“å…¥åœ°å€ï¼Œç¼–è¾‘åšæ–‡</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">localhost:<span class="hljs-number">4000</span><span class="hljs-regexp">/admin/</span><br></code></pre></td></tr></table></figure><p><strong>æœ€ç»ˆæ•ˆæœ</strong>ï¼š</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/fluidä¸»é¢˜é…ç½®/hexo_admin.png" alt="Hexoåå°" style="zoom:75%;"><h3 id="16-ä½¿ç”¨hexo5æ³¨å…¥å™¨å¼•å…¥instantclick-js"><a class="header-anchor" href="#16-ä½¿ç”¨hexo5æ³¨å…¥å™¨å¼•å…¥instantclick-js">Â¶</a>16. ä½¿ç”¨hexo5æ³¨å…¥å™¨å¼•å…¥instantclick.js</h3><h4 id="16-1-Hexo5æ³¨å…¥å™¨"><a class="header-anchor" href="#16-1-Hexo5æ³¨å…¥å™¨">Â¶</a>16.1 Hexo5æ³¨å…¥å™¨</h4><p>Hexoæ³¨å…¥å™¨æ˜¯Hexo 5ç‰ˆæœ¬åŠ å…¥çš„ä¸€é¡¹æ–°åŠŸèƒ½ï¼Œæ³¨å…¥å™¨å¯ä»¥å°†é™æ€ä»£ç ç‰‡æ®µæ³¨å…¥ç”Ÿæˆçš„HTMLçš„<code>&lt;head&gt;</code>å’Œ<code>&lt;body&gt;</code>ä¸­ã€‚</p><p>ç¼–å†™æ³¨å…¥ä»£ç ï¼Œéœ€è¦åœ¨åšå®¢çš„æ ¹ç›®å½•ä¸‹åˆ›å»º<code>script</code>æ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨é‡Œé¢åˆ›å»ºinjector.jsæ–‡ä»¶ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">hexo.extend.injector.register(<span class="hljs-string">&#x27;body_end&#x27;</span>, <span class="hljs-string">&#x27;&lt;script src=&quot;/jquery.js&quot;&gt;&lt;/script&gt;&#x27;</span>, <span class="hljs-string">&#x27;default&#x27;</span>);<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç ä¼šåœ¨ç”Ÿæˆçš„é¡µé¢ <code>&lt;/body&gt;</code> æ³¨å…¥åŠ è½½ <code>jquery.js</code> çš„ä»£ç ã€‚</p><p><code>register</code> å‡½æ•°å¯æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä»£ç ç‰‡æ®µæ³¨å…¥çš„ä½ç½®ï¼Œæ¥å—ä»¥ä¸‹å€¼ï¼š</p><ul><li><code>head_begin</code>: æ³¨å…¥åœ¨ <code>&lt;head&gt;</code> ä¹‹åï¼ˆé»˜è®¤ï¼‰</li><li><code>head_end</code>: æ³¨å…¥åœ¨ <code>&lt;/head&gt;</code> ä¹‹å‰</li><li><code>body_begin</code>: æ³¨å…¥åœ¨ <code>&lt;body&gt;</code> ä¹‹å</li><li><code>body_end</code>: æ³¨å…¥åœ¨ <code>&lt;/body&gt;</code> ä¹‹å‰</li></ul><p>ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ³¨å…¥çš„ç‰‡æ®µï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªè¿”å›å€¼ä¸ºå­—ç¬¦ä¸²çš„å‡½æ•°ã€‚</p><p>ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯æ³¨å…¥çš„é¡µé¢ç±»å‹ï¼Œæ¥å—ä»¥ä¸‹å€¼ï¼š</p><ul><li><code>default</code>: æ³¨å…¥åˆ°æ¯ä¸ªé¡µé¢ï¼ˆé»˜è®¤å€¼ï¼‰</li><li><code>home</code>: åªæ³¨å…¥åˆ°ä¸»é¡µï¼ˆ<code>is_home()</code> ä¸º <code>true</code> çš„é¡µé¢ï¼‰</li><li><code>post</code>: åªæ³¨å…¥åˆ°æ–‡ç« é¡µé¢ï¼ˆ<code>is_post()</code> ä¸º <code>true</code> çš„é¡µé¢ï¼‰</li><li><code>page</code>: åªæ³¨å…¥åˆ°ç‹¬ç«‹é¡µé¢ï¼ˆ<code>is_page()</code> ä¸º <code>true</code> çš„é¡µé¢ï¼‰</li><li><code>archive</code>: åªæ³¨å…¥åˆ°å½’æ¡£é¡µé¢ï¼ˆ<code>is_archive()</code> ä¸º <code>true</code> çš„é¡µé¢ï¼‰</li><li><code>category</code>: åªæ³¨å…¥åˆ°åˆ†ç±»é¡µé¢ï¼ˆ<code>is_category()</code> ä¸º <code>true</code> çš„é¡µé¢ï¼‰</li><li><code>tag</code>: åªæ³¨å…¥åˆ°æ ‡ç­¾é¡µé¢ï¼ˆ<code>is_tag()</code> ä¸º <code>true</code> çš„é¡µé¢ï¼‰</li><li>æˆ–æ˜¯å…¶ä»–è‡ªå®šä¹‰ layout åç§°</li></ul><h4 id="16-2-instantclick-js"><a class="header-anchor" href="#16-2-instantclick-js">Â¶</a>16.2 instantclick.js</h4><p>å°½ç®¡ç½‘ç»œå¸¦å®½ä¸æ–­å¢åŠ ï¼Œä½†ç½‘ç«™å¹¶æ²¡æœ‰æ›´å¿«å¾ˆå¤šã€‚è¿™æ˜¯å› ä¸ºæœ€å¤§çš„ç“¶é¢ˆåœ¨äºé¡µé¢åŠ è½½çš„å»¶è¿Ÿã€‚InstantClick æ˜¯ä¸€ä¸ªå¾ˆå°çš„jsåº“ï¼Œå¤§å¤§åŠ é€Ÿä½ çš„ç½‘ç«™å“åº”é€Ÿåº¦ã€‚</p><p>åœ¨è®¿é—®è€…ç‚¹å‡»ä¸€ä¸ªé“¾æ¥ä¹‹å‰ï¼Œé¼ æ ‡ä¼šæ‚¬åœåœ¨é“¾æ¥ä¸Šé¢ï¼Œè¿™ä¸¤ä¸ªäº‹ä»¶ä¹‹é—´é€šå¸¸æœ‰200ms~300msçš„é—´éš”ï¼ŒInstantClick åˆ©ç”¨è¿™ä¸ªæ—¶é—´é—´éš”é¢„åŠ è½½é¡µé¢ã€‚è¿™æ ·å½“ä½ ç‚¹å‡»é¡µé¢çš„æ—¶å€™ï¼Œå…¶å®é¡µé¢å·²ç»åŠ è½½åˆ°æœ¬åœ°äº†ï¼Œå‘ˆç°å½“ç„¶ä¹Ÿå°±ä¼šå¾ˆå¿«ã€‚</p><p>InstantClick ä½¿ç”¨äº† <strong>pushState</strong> å’Œ <strong>Ajax</strong> æŠ€æœ¯ï¼Œè¿™ä¸ªç»„åˆè¢«ç§°ä¸º <strong>Pjax</strong>ã€‚</p><p>instantclick.jsçš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script src = <span class="hljs-string">&#x27;https://libs.xiaoz.top/instantclick/instantclick.min.js&#x27;</span> data-no-instant&gt;&lt;/script&gt;<br>&lt;script data-no-instant&gt;InstantClick.init();&lt;/script&gt;<br></code></pre></td></tr></table></figure><h4 id="16-3-æ•´åˆ"><a class="header-anchor" href="#16-3-æ•´åˆ">Â¶</a>16.3 æ•´åˆ</h4><p>åœ¨åšå®¢ç›®å½•ä¸‹çš„scriptæ–‡ä»¶å¤¹ä¸‹ï¼Œåˆ›å»ºinjector.jsæ–‡ä»¶ï¼Œåœ¨é‡Œé¢å†™å…¥ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript">hexo.extend.injector.register(<span class="hljs-string">`body_end`</span>, <span class="hljs-string">`&lt;script src = &#x27;https://libs.xiaoz.top/instantclick/instantclick.min.js&#x27; data-no-instant&gt;&lt;/script&gt;</span><br><span class="hljs-string">&lt;script data-no-instant&gt;InstantClick.init();&lt;/script&gt;`</span> )<br></code></pre></td></tr></table></figure><p>å¦‚æ­¤é‡æ–°å¯åŠ¨hexoåšå®¢å³å¯æŸ¥çœ‹ã€‚</p><h3 id="17-Hexoåšå®¢æ”¯æŒemojiæ ‡ç­¾"><a class="header-anchor" href="#17-Hexoåšå®¢æ”¯æŒemojiæ ‡ç­¾">Â¶</a>17.Hexoåšå®¢æ”¯æŒemojiæ ‡ç­¾</h3><p>Hexo é»˜è®¤çš„<code>markdown</code> æ¸²æŸ“å¼•æ“ä¸æ”¯æŒå°† Github emoji æ¸²æŸ“åˆ°é™æ€çš„ html é¡µé¢ä¸­ï¼Œæˆ‘ä»¬æ¢ä¸€ä¸ªæ”¯æŒ emoji çš„å¼•æ“ï¼Œå†å¢åŠ ä¸€ä¸ª emoji æ’ä»¶å³å¯ã€‚</p><h4 id="17-1-å®‰è£…"><a class="header-anchor" href="#17-1-å®‰è£…">Â¶</a>17.1 å®‰è£…</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm un hexo-renderer-marked --save<br>npm i hexo-renderer-markdown-it --save<br>npm install markdown-it-emoji --save<br></code></pre></td></tr></table></figure><p>Tipsï¼šæ®è¯´ <a href="https://github.com/hexojs/hexo-renderer-markdown-it">hexo-renderer-markdown-it</a> çš„é€Ÿåº¦è¦æ¯” Hexo åŸè£…æ’ä»¶è¦å¿«ï¼Œè€Œä¸”åŠŸèƒ½æ›´å¤š</p><h4 id="17-2-é…ç½®"><a class="header-anchor" href="#17-2-é…ç½®">Â¶</a>17.2 é…ç½®</h4><p>å®Œæˆæ’ä»¶å®‰è£…åè¿˜éœ€è¦ä¿®æ”¹ Hexo ç«™ç‚¹é…ç½®æ–‡ä»¶ <code>_config.yml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment">## markdown æ¸²æŸ“å¼•æ“é…ç½®ï¼Œé»˜è®¤æ˜¯hexo-renderer-markedï¼Œè¿™ä¸ªæ’ä»¶æ¸²æŸ“é€Ÿåº¦æ›´å¿«ï¼Œä¸”æœ‰æ–°ç‰¹æ€§</span><br><span class="hljs-attr">markdown:</span><br>  <span class="hljs-attr">render:</span><br>    <span class="hljs-attr">html:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">xhtmlOut:</span> <span class="hljs-literal">false</span><br>    <span class="hljs-attr">breaks:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">linkify:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">typographer:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">quotes:</span> <span class="hljs-string">&#x27;â€œâ€â€˜â€™&#x27;</span><br>  <span class="hljs-attr">plugins:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-footnote</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-sup</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-sub</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-abbr</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-emoji</span><br>  <span class="hljs-attr">anchors:</span><br>    <span class="hljs-attr">level:</span> <span class="hljs-number">2</span><br>    <span class="hljs-attr">collisionSuffix:</span> <span class="hljs-string">&#x27;v&#x27;</span><br>    <span class="hljs-attr">permalink:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">permalinkClass:</span> <span class="hljs-string">header-anchor</span><br>    <span class="hljs-attr">permalinkSymbol:</span> <span class="hljs-string">Â¶</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œéœ€è¦æ³¨æ„ <code>render:</code> ä¸‹çš„ <code>html:</code> é…ç½®é¡¹ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ§åˆ¶ <code>Markdown</code> æ¸²æŸ“å¼•æ“æ˜¯å¦è½¬ä¹‰æ–‡æ¡£ä¸­å‡ºç°çš„ <code>html</code> æ ‡ç­¾ï¼Œé»˜è®¤ä¸º <code>false</code> ï¼Œè¿™é‡Œè¦è®¾ç½®ä¸º <code>true</code>ï¼Œå¦åˆ™å›å¯¼è‡´ <code>&lt;!--more--&gt;</code> æ¸²æŸ“å¤±è´¥ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">html:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># ä¸è½¬ä¹‰ HTML å†…å®¹ï¼Œå³å…è®¸ HTML</span><br>    <span class="hljs-comment">## OR</span><br><span class="hljs-attr">html:</span> <span class="hljs-literal">false</span> <span class="hljs-comment"># è½¬ä¹‰ HTMLï¼Œ&lt; &gt; å°–æ‹¬å·ä¼šè¢«è½¬ä¹‰æˆ &amp;lt; &amp;gt;ç­‰</span><br></code></pre></td></tr></table></figure><p><code>plugins:</code> ä¸­çš„æœ€åä¸€é¡¹ <code>- markdown-it-emoji</code> æ˜¯æ‰‹åŠ¨æ·»åŠ çš„ï¼Œå®˜æ–¹ Github Wiki ä¸­ç»™å‡ºçš„é…ç½®ä¸åŒ…å«è¿™ä¸€é¡¹ï¼Œå…¶ä»–é…ç½®å‚ç…§çš„ Github Wiki ä¸­çš„é»˜è®¤é…ç½®ï¼Œhexo-renderer-markdown-it æä¾›çš„å…¶ä»–æ–°ç‰¹æ€§è¿˜æ²¡æœ‰ä¸€ä¸€å°è¯•ï¼Œæš‚æ—¶åªæƒ³ç”¨å®ƒçš„ emoji åŠŸèƒ½ã€‚âœŒï¸</p><h4 id="17-3-ä½¿ç”¨"><a class="header-anchor" href="#17-3-ä½¿ç”¨">Â¶</a>17.3 ä½¿ç”¨</h4><p>è¾“å…¥å¯¹åº”çš„emojiç¼–ç å°±è¡Œäº†<br>ä¾‹å¦‚ï¼šè¾“å…¥ç¬‘è„¸å¯¹åº”çš„ emoji ç¼–ç  <code>:zap:</code> å°±å¯ä»¥å¾—åˆ° âš¡ï¸</p><h4 id="17-4-emojiç¼–ç åˆé›†"><a class="header-anchor" href="#17-4-emojiç¼–ç åˆé›†">Â¶</a>17.4 emojiç¼–ç åˆé›†</h4><p><strong>People</strong></p><table><thead><tr><th style="text-align:left">ğŸ˜ <code>:neutral_face:</code></th><th style="text-align:left">ğŸ˜„ <code>:smile:</code></th><th style="text-align:left">ğŸ˜† <code>:laughing:</code></th></tr></thead><tbody><tr><td style="text-align:left">ğŸ˜Š <code>:blush:</code></td><td style="text-align:left">ğŸ˜ƒ <code>:smiley:</code></td><td style="text-align:left">â˜ºï¸ <code>:relaxed:</code></td></tr><tr><td style="text-align:left">ğŸ˜ <code>:smirk:</code></td><td style="text-align:left">ğŸ˜ <code>:heart_eyes:</code></td><td style="text-align:left">ğŸ˜˜ <code>:kissing_heart:</code></td></tr><tr><td style="text-align:left">ğŸ˜š <code>:kissing_closed_eyes:</code></td><td style="text-align:left">ğŸ˜³ <code>:flushed:</code></td><td style="text-align:left">ğŸ˜Œ <code>:relieved:</code></td></tr><tr><td style="text-align:left">ğŸ˜† <code>:satisfied:</code></td><td style="text-align:left">ğŸ˜ <code>:grin:</code></td><td style="text-align:left">ğŸ˜‰ <code>:wink:</code></td></tr><tr><td style="text-align:left">ğŸ˜œ <code>:stuck_out_tongue_winking_eye:</code></td><td style="text-align:left">ğŸ˜ <code>:stuck_out_tongue_closed_eyes:</code></td><td style="text-align:left">ğŸ˜€ <code>:grinning:</code></td></tr><tr><td style="text-align:left">ğŸ˜— <code>:kissing:</code></td><td style="text-align:left">ğŸ˜™ <code>:kissing_smiling_eyes:</code></td><td style="text-align:left">ğŸ˜› <code>:stuck_out_tongue:</code></td></tr><tr><td style="text-align:left">ğŸ˜´ <code>:sleeping:</code></td><td style="text-align:left">ğŸ˜Ÿ <code>:worried:</code></td><td style="text-align:left">ğŸ˜¦ <code>:frowning:</code></td></tr><tr><td style="text-align:left">ğŸ˜§ <code>:anguished:</code></td><td style="text-align:left">ğŸ˜® <code>:open_mouth:</code></td><td style="text-align:left">ğŸ˜¬ <code>:grimacing:</code></td></tr><tr><td style="text-align:left">ğŸ˜• <code>:confused:</code></td><td style="text-align:left">ğŸ˜¯ <code>:hushed:</code></td><td style="text-align:left">ğŸ˜‘ <code>:expressionless:</code></td></tr><tr><td style="text-align:left">ğŸ˜’ <code>:unamused:</code></td><td style="text-align:left">ğŸ˜… <code>:sweat_smile:</code></td><td style="text-align:left">ğŸ˜“ <code>:sweat:</code></td></tr><tr><td style="text-align:left">ğŸ˜¥ <code>:disappointed_relieved:</code></td><td style="text-align:left">ğŸ˜© <code>:weary:</code></td><td style="text-align:left">ğŸ˜” <code>:pensive:</code></td></tr><tr><td style="text-align:left">ğŸ˜ <code>:disappointed:</code></td><td style="text-align:left">ğŸ˜– <code>:confounded:</code></td><td style="text-align:left">ğŸ˜¨ <code>:fearful:</code></td></tr><tr><td style="text-align:left">ğŸ˜° <code>:cold_sweat:</code></td><td style="text-align:left">ğŸ˜£ <code>:persevere:</code></td><td style="text-align:left">ğŸ˜¢ <code>:cry:</code></td></tr><tr><td style="text-align:left">ğŸ˜­ <code>:sob:</code></td><td style="text-align:left">ğŸ˜‚ <code>:joy:</code></td><td style="text-align:left">ğŸ˜² <code>:astonished:</code></td></tr><tr><td style="text-align:left">ğŸ˜± <code>:scream:</code></td><td style="text-align:left">ğŸ’­ <code>:thought_balloon:</code></td><td style="text-align:left">ğŸ˜« <code>:tired_face:</code></td></tr><tr><td style="text-align:left">ğŸ˜  <code>:angry:</code></td><td style="text-align:left">ğŸ˜¡ <code>:rage:</code></td><td style="text-align:left">ğŸ˜¤ <code>:triumph:</code></td></tr><tr><td style="text-align:left">ğŸ˜ª <code>:sleepy:</code></td><td style="text-align:left">ğŸ˜‹ <code>:yum:</code></td><td style="text-align:left">ğŸ˜· <code>:mask:</code></td></tr><tr><td style="text-align:left">ğŸ˜ <code>:sunglasses:</code></td><td style="text-align:left">ğŸ˜µ <code>:dizzy_face:</code></td><td style="text-align:left">ğŸ‘¿ <code>:imp:</code></td></tr><tr><td style="text-align:left">ğŸ˜ˆ <code>:smiling_imp:</code></td><td style="text-align:left">ğŸ’¬ <code>:speech_balloon:</code></td><td style="text-align:left">ğŸ˜¶ <code>:no_mouth:</code></td></tr><tr><td style="text-align:left">ğŸ˜‡ <code>:innocent:</code></td><td style="text-align:left">ğŸ‘½ <code>:alien:</code></td><td style="text-align:left">ğŸ’› <code>:yellow_heart:</code></td></tr><tr><td style="text-align:left">ğŸ’™ <code>:blue_heart:</code></td><td style="text-align:left">ğŸ’œ <code>:purple_heart:</code></td><td style="text-align:left">â¤ï¸ <code>:heart:</code></td></tr><tr><td style="text-align:left">ğŸ’š <code>:green_heart:</code></td><td style="text-align:left">ğŸ’” <code>:broken_heart:</code></td><td style="text-align:left">ğŸ’“ <code>:heartbeat:</code></td></tr><tr><td style="text-align:left">ğŸ’— <code>:heartpulse:</code></td><td style="text-align:left">ğŸ’• <code>:two_hearts:</code></td><td style="text-align:left">ğŸ’ <code>:revolving_hearts:</code></td></tr><tr><td style="text-align:left">ğŸ’˜ <code>:cupid:</code></td><td style="text-align:left">ğŸ’– <code>:sparkling_heart:</code></td><td style="text-align:left">âœ¨ <code>:sparkles:</code></td></tr><tr><td style="text-align:left">â­ï¸ <code>:star:</code></td><td style="text-align:left">ğŸŒŸ <code>:star2:</code></td><td style="text-align:left">ğŸ’« <code>:dizzy:</code></td></tr><tr><td style="text-align:left">ğŸ’¥ <code>:boom:</code></td><td style="text-align:left">ğŸ’¥ <code>:collision:</code></td><td style="text-align:left">ğŸ’¢ <code>:anger:</code></td></tr><tr><td style="text-align:left">â—ï¸ <code>:exclamation:</code></td><td style="text-align:left">â“ <code>:question:</code></td><td style="text-align:left">â• <code>:grey_exclamation:</code></td></tr><tr><td style="text-align:left">â” <code>:grey_question:</code></td><td style="text-align:left">ğŸ’¤ <code>:zzz:</code></td><td style="text-align:left">ğŸ’¨ <code>:dash:</code></td></tr><tr><td style="text-align:left">ğŸ’¦ <code>:sweat_drops:</code></td><td style="text-align:left">ğŸ¶ <code>:notes:</code></td><td style="text-align:left">ğŸµ <code>:musical_note:</code></td></tr><tr><td style="text-align:left">ğŸ”¥ <code>:fire:</code></td><td style="text-align:left">ğŸ’© <code>:hankey:</code></td><td style="text-align:left">ğŸ’© <code>:poop:</code></td></tr><tr><td style="text-align:left">ğŸ’© <code>:shit:</code></td><td style="text-align:left">ğŸ‘ <code>:+1:</code></td><td style="text-align:left">ğŸ‘ <code>:thumbsup:</code></td></tr><tr><td style="text-align:left">ğŸ‘ <code>:-1:</code></td><td style="text-align:left">ğŸ‘ <code>:thumbsdown:</code></td><td style="text-align:left">ğŸ‘Œ <code>:ok_hand:</code></td></tr><tr><td style="text-align:left">ğŸ‘Š <code>:punch:</code></td><td style="text-align:left">ğŸ‘Š <code>:facepunch:</code></td><td style="text-align:left">âœŠ <code>:fist:</code></td></tr><tr><td style="text-align:left">âœŒï¸ <code>:v:</code></td><td style="text-align:left">ğŸ‘‹ <code>:wave:</code></td><td style="text-align:left">âœ‹ <code>:hand:</code></td></tr><tr><td style="text-align:left">âœ‹ <code>:raised_hand:</code></td><td style="text-align:left">ğŸ‘ <code>:open_hands:</code></td><td style="text-align:left">â˜ï¸ <code>:point_up:</code></td></tr><tr><td style="text-align:left">ğŸ‘‡ <code>:point_down:</code></td><td style="text-align:left">ğŸ‘ˆ <code>:point_left:</code></td><td style="text-align:left">ğŸ‘‰ <code>:point_right:</code></td></tr><tr><td style="text-align:left">ğŸ™Œ <code>:raised_hands:</code></td><td style="text-align:left">ğŸ™ <code>:pray:</code></td><td style="text-align:left">ğŸ‘† <code>:point_up_2:</code></td></tr><tr><td style="text-align:left">ğŸ‘ <code>:clap:</code></td><td style="text-align:left">ğŸ’ª <code>:muscle:</code></td><td style="text-align:left">ğŸ¤˜ <code>:metal:</code></td></tr><tr><td style="text-align:left">ğŸ–• <code>:fu:</code></td><td style="text-align:left">ğŸš¶ <code>:walking:</code></td><td style="text-align:left">ğŸƒ <code>:runner:</code></td></tr><tr><td style="text-align:left">ğŸƒ <code>:running:</code></td><td style="text-align:left">ğŸ‘« <code>:couple:</code></td><td style="text-align:left">ğŸ‘ª <code>:family:</code></td></tr><tr><td style="text-align:left">ğŸ‘¬ <code>:two_men_holding_hands:</code></td><td style="text-align:left">ğŸ‘­ <code>:two_women_holding_hands:</code></td><td style="text-align:left">ğŸ’ƒ <code>:dancer:</code></td></tr><tr><td style="text-align:left">ğŸ‘¯ <code>:dancers:</code></td><td style="text-align:left">ğŸ™† <code>:ok_woman:</code></td><td style="text-align:left">ğŸ™… <code>:no_good:</code></td></tr><tr><td style="text-align:left">ğŸ’ <code>:information_desk_person:</code></td><td style="text-align:left">ğŸ™‹ <code>:raising_hand:</code></td><td style="text-align:left">ğŸ‘° <code>:bride_with_veil:</code></td></tr><tr><td style="text-align:left">ğŸ™ <code>:person_with_pouting_face:</code></td><td style="text-align:left">ğŸ™ <code>:person_frowning:</code></td><td style="text-align:left">ğŸ™‡ <code>:bow:</code></td></tr><tr><td style="text-align:left">:couplekiss: <code>:couplekiss:</code></td><td style="text-align:left">ğŸ’‘ <code>:couple_with_heart:</code></td><td style="text-align:left">ğŸ’† <code>:massage:</code></td></tr><tr><td style="text-align:left">ğŸ’‡ <code>:haircut:</code></td><td style="text-align:left">ğŸ’… <code>:nail_care:</code></td><td style="text-align:left">ğŸ‘¦ <code>:boy:</code></td></tr><tr><td style="text-align:left">ğŸ‘§ <code>:girl:</code></td><td style="text-align:left">ğŸ‘© <code>:woman:</code></td><td style="text-align:left">ğŸ‘¨ <code>:man:</code></td></tr><tr><td style="text-align:left">ğŸ‘¶ <code>:baby:</code></td><td style="text-align:left">ğŸ‘µ <code>:older_woman:</code></td><td style="text-align:left">ğŸ‘´ <code>:older_man:</code></td></tr><tr><td style="text-align:left">ğŸ‘± <code>:person_with_blond_hair:</code></td><td style="text-align:left">ğŸ‘² <code>:man_with_gua_pi_mao:</code></td><td style="text-align:left">ğŸ‘³ <code>:man_with_turban:</code></td></tr><tr><td style="text-align:left">ğŸ‘· <code>:construction_worker:</code></td><td style="text-align:left">ğŸ‘® <code>:cop:</code></td><td style="text-align:left">ğŸ‘¼ <code>:angel:</code></td></tr><tr><td style="text-align:left">ğŸ‘¸ <code>:princess:</code></td><td style="text-align:left">ğŸ˜º <code>:smiley_cat:</code></td><td style="text-align:left">ğŸ˜¸ <code>:smile_cat:</code></td></tr><tr><td style="text-align:left">ğŸ˜» <code>:heart_eyes_cat:</code></td><td style="text-align:left">ğŸ˜½ <code>:kissing_cat:</code></td><td style="text-align:left">ğŸ˜¼ <code>:smirk_cat:</code></td></tr><tr><td style="text-align:left">ğŸ™€ <code>:scream_cat:</code></td><td style="text-align:left">ğŸ˜¿ <code>:crying_cat_face:</code></td><td style="text-align:left">ğŸ˜¹ <code>:joy_cat:</code></td></tr><tr><td style="text-align:left">ğŸ˜¾ <code>:pouting_cat:</code></td><td style="text-align:left">ğŸ‘¹ <code>:japanese_ogre:</code></td><td style="text-align:left">ğŸ‘º <code>:japanese_goblin:</code></td></tr><tr><td style="text-align:left">ğŸ™ˆ <code>:see_no_evil:</code></td><td style="text-align:left">ğŸ™‰ <code>:hear_no_evil:</code></td><td style="text-align:left">ğŸ™Š <code>:speak_no_evil:</code></td></tr><tr><td style="text-align:left">ğŸ’‚ <code>:guardsman:</code></td><td style="text-align:left">ğŸ’€ <code>:skull:</code></td><td style="text-align:left">ğŸ¾ <code>:feet:</code></td></tr><tr><td style="text-align:left">ğŸ‘„ <code>:lips:</code></td><td style="text-align:left">ğŸ’‹ <code>:kiss:</code></td><td style="text-align:left">ğŸ’§ <code>:droplet:</code></td></tr><tr><td style="text-align:left">ğŸ‘‚ <code>:ear:</code></td><td style="text-align:left">ğŸ‘€ <code>:eyes:</code></td><td style="text-align:left">ğŸ‘ƒ <code>:nose:</code></td></tr><tr><td style="text-align:left">ğŸ‘… <code>:tongue:</code></td><td style="text-align:left">ğŸ’Œ <code>:love_letter:</code></td><td style="text-align:left">ğŸ‘¤ <code>:bust_in_silhouette:</code></td></tr><tr><td style="text-align:left">ğŸ‘¥ <code>:busts_in_silhouette:</code></td><td style="text-align:left"></td><td style="text-align:left"></td></tr></tbody></table><p><strong>Nature</strong></p><table><thead><tr><th style="text-align:left">â˜€ï¸ <code>:sunny:</code></th><th style="text-align:left">â˜”ï¸ <code>:umbrella:</code></th><th style="text-align:left">â˜ï¸ <code>:cloud:</code></th></tr></thead><tbody><tr><td style="text-align:left">â„ï¸ <code>:snowflake:</code></td><td style="text-align:left">â›„ï¸ <code>:snowman:</code></td><td style="text-align:left">âš¡ï¸ <code>:zap:</code></td></tr><tr><td style="text-align:left">ğŸŒ€ <code>:cyclone:</code></td><td style="text-align:left">ğŸŒ <code>:foggy:</code></td><td style="text-align:left">ğŸŒŠ <code>:ocean:</code></td></tr><tr><td style="text-align:left">ğŸ± <code>:cat:</code></td><td style="text-align:left">ğŸ¶ <code>:dog:</code></td><td style="text-align:left">ğŸ­ <code>:mouse:</code></td></tr><tr><td style="text-align:left">ğŸ¹ <code>:hamster:</code></td><td style="text-align:left">ğŸ° <code>:rabbit:</code></td><td style="text-align:left">ğŸº <code>:wolf:</code></td></tr><tr><td style="text-align:left">ğŸ¸ <code>:frog:</code></td><td style="text-align:left">ğŸ¯ <code>:tiger:</code></td><td style="text-align:left">ğŸ¨ <code>:koala:</code></td></tr><tr><td style="text-align:left">ğŸ» <code>:bear:</code></td><td style="text-align:left">ğŸ· <code>:pig:</code></td><td style="text-align:left">ğŸ½ <code>:pig_nose:</code></td></tr><tr><td style="text-align:left">ğŸ® <code>:cow:</code></td><td style="text-align:left">ğŸ— <code>:boar:</code></td><td style="text-align:left">ğŸµ <code>:monkey_face:</code></td></tr><tr><td style="text-align:left">ğŸ’ <code>:monkey:</code></td><td style="text-align:left">ğŸ´ <code>:horse:</code></td><td style="text-align:left">ğŸ <code>:racehorse:</code></td></tr><tr><td style="text-align:left">ğŸ« <code>:camel:</code></td><td style="text-align:left">ğŸ‘ <code>:sheep:</code></td><td style="text-align:left">ğŸ˜ <code>:elephant:</code></td></tr><tr><td style="text-align:left">ğŸ¼ <code>:panda_face:</code></td><td style="text-align:left">ğŸ <code>:snake:</code></td><td style="text-align:left">ğŸ¦ <code>:bird:</code></td></tr><tr><td style="text-align:left">ğŸ¤ <code>:baby_chick:</code></td><td style="text-align:left">ğŸ¥ <code>:hatched_chick:</code></td><td style="text-align:left">ğŸ£ <code>:hatching_chick:</code></td></tr><tr><td style="text-align:left">ğŸ” <code>:chicken:</code></td><td style="text-align:left">ğŸ§ <code>:penguin:</code></td><td style="text-align:left">ğŸ¢ <code>:turtle:</code></td></tr><tr><td style="text-align:left">ğŸ› <code>:bug:</code></td><td style="text-align:left">ğŸ <code>:honeybee:</code></td><td style="text-align:left">ğŸœ <code>:ant:</code></td></tr><tr><td style="text-align:left">ğŸ <code>:beetle:</code></td><td style="text-align:left">ğŸŒ <code>:snail:</code></td><td style="text-align:left">ğŸ™ <code>:octopus:</code></td></tr><tr><td style="text-align:left">ğŸ  <code>:tropical_fish:</code></td><td style="text-align:left">ğŸŸ <code>:fish:</code></td><td style="text-align:left">ğŸ³ <code>:whale:</code></td></tr><tr><td style="text-align:left">ğŸ‹ <code>:whale2:</code></td><td style="text-align:left">ğŸ¬ <code>:dolphin:</code></td><td style="text-align:left">ğŸ„ <code>:cow2:</code></td></tr><tr><td style="text-align:left">ğŸ <code>:ram:</code></td><td style="text-align:left">ğŸ€ <code>:rat:</code></td><td style="text-align:left">ğŸƒ <code>:water_buffalo:</code></td></tr><tr><td style="text-align:left">ğŸ… <code>:tiger2:</code></td><td style="text-align:left">ğŸ‡ <code>:rabbit2:</code></td><td style="text-align:left">ğŸ‰ <code>:dragon:</code></td></tr><tr><td style="text-align:left">ğŸ <code>:goat:</code></td><td style="text-align:left">ğŸ“ <code>:rooster:</code></td><td style="text-align:left">ğŸ• <code>:dog2:</code></td></tr><tr><td style="text-align:left">ğŸ– <code>:pig2:</code></td><td style="text-align:left">ğŸ <code>:mouse2:</code></td><td style="text-align:left">ğŸ‚ <code>:ox:</code></td></tr><tr><td style="text-align:left">ğŸ² <code>:dragon_face:</code></td><td style="text-align:left">ğŸ¡ <code>:blowfish:</code></td><td style="text-align:left">ğŸŠ <code>:crocodile:</code></td></tr><tr><td style="text-align:left">ğŸª <code>:dromedary_camel:</code></td><td style="text-align:left">ğŸ† <code>:leopard:</code></td><td style="text-align:left">ğŸˆ <code>:cat2:</code></td></tr><tr><td style="text-align:left">ğŸ© <code>:poodle:</code></td><td style="text-align:left">ğŸ¾ <code>:paw_prints:</code></td><td style="text-align:left">ğŸ’ <code>:bouquet:</code></td></tr><tr><td style="text-align:left">ğŸŒ¸ <code>:cherry_blossom:</code></td><td style="text-align:left">ğŸŒ· <code>:tulip:</code></td><td style="text-align:left">ğŸ€ <code>:four_leaf_clover:</code></td></tr><tr><td style="text-align:left">ğŸŒ¹ <code>:rose:</code></td><td style="text-align:left">ğŸŒ» <code>:sunflower:</code></td><td style="text-align:left">ğŸŒº <code>:hibiscus:</code></td></tr><tr><td style="text-align:left">ğŸ <code>:maple_leaf:</code></td><td style="text-align:left">ğŸƒ <code>:leaves:</code></td><td style="text-align:left">ğŸ‚ <code>:fallen_leaf:</code></td></tr><tr><td style="text-align:left">ğŸŒ¿ <code>:herb:</code></td><td style="text-align:left">ğŸ„ <code>:mushroom:</code></td><td style="text-align:left">ğŸŒµ <code>:cactus:</code></td></tr><tr><td style="text-align:left">ğŸŒ´ <code>:palm_tree:</code></td><td style="text-align:left">ğŸŒ² <code>:evergreen_tree:</code></td><td style="text-align:left">ğŸŒ³ <code>:deciduous_tree:</code></td></tr><tr><td style="text-align:left">ğŸŒ° <code>:chestnut:</code></td><td style="text-align:left">ğŸŒ± <code>:seedling:</code></td><td style="text-align:left">ğŸŒ¼ <code>:blossom:</code></td></tr><tr><td style="text-align:left">ğŸŒ¾ <code>:ear_of_rice:</code></td><td style="text-align:left">ğŸš <code>:shell:</code></td><td style="text-align:left">ğŸŒ <code>:globe_with_meridians:</code></td></tr><tr><td style="text-align:left">ğŸŒ <code>:sun_with_face:</code></td><td style="text-align:left">ğŸŒ <code>:full_moon_with_face:</code></td><td style="text-align:left">ğŸŒš <code>:new_moon_with_face:</code></td></tr><tr><td style="text-align:left">ğŸŒ‘ <code>:new_moon:</code></td><td style="text-align:left">ğŸŒ’ <code>:waxing_crescent_moon:</code></td><td style="text-align:left">ğŸŒ“ <code>:first_quarter_moon:</code></td></tr><tr><td style="text-align:left">ğŸŒ” <code>:waxing_gibbous_moon:</code></td><td style="text-align:left">ğŸŒ• <code>:full_moon:</code></td><td style="text-align:left">ğŸŒ– <code>:waning_gibbous_moon:</code></td></tr><tr><td style="text-align:left">ğŸŒ— <code>:last_quarter_moon:</code></td><td style="text-align:left">ğŸŒ˜ <code>:waning_crescent_moon:</code></td><td style="text-align:left">ğŸŒœ <code>:last_quarter_moon_with_face:</code></td></tr><tr><td style="text-align:left">ğŸŒ› <code>:first_quarter_moon_with_face:</code></td><td style="text-align:left">ğŸŒ” <code>:moon:</code></td><td style="text-align:left">ğŸŒ <code>:earth_africa:</code></td></tr><tr><td style="text-align:left">ğŸŒ <code>:earth_americas:</code></td><td style="text-align:left">ğŸŒ <code>:earth_asia:</code></td><td style="text-align:left">ğŸŒ‹ <code>:volcano:</code></td></tr><tr><td style="text-align:left">ğŸŒŒ <code>:milky_way:</code></td><td style="text-align:left">â›…ï¸ <code>:partly_sunny:</code></td><td style="text-align:left"></td></tr></tbody></table><p><strong>Objects</strong></p><table><thead><tr><th style="text-align:left">ğŸ <code>:bamboo:</code></th><th style="text-align:left">ğŸ’ <code>:gift_heart:</code></th><th style="text-align:left">ğŸ <code>:dolls:</code></th></tr></thead><tbody><tr><td style="text-align:left">ğŸ’ <code>:school_satchel:</code></td><td style="text-align:left">ğŸ“ <code>:mortar_board:</code></td><td style="text-align:left">ğŸ <code>:flags:</code></td></tr><tr><td style="text-align:left">ğŸ† <code>:fireworks:</code></td><td style="text-align:left">ğŸ‡ <code>:sparkler:</code></td><td style="text-align:left">ğŸ <code>:wind_chime:</code></td></tr><tr><td style="text-align:left">ğŸ‘ <code>:rice_scene:</code></td><td style="text-align:left">ğŸƒ <code>:jack_o_lantern:</code></td><td style="text-align:left">ğŸ‘» <code>:ghost:</code></td></tr><tr><td style="text-align:left">ğŸ… <code>:santa:</code></td><td style="text-align:left">ğŸ„ <code>:christmas_tree:</code></td><td style="text-align:left">ğŸ <code>:gift:</code></td></tr><tr><td style="text-align:left">ğŸ”” <code>:bell:</code></td><td style="text-align:left">ğŸ”• <code>:no_bell:</code></td><td style="text-align:left">ğŸ‹ <code>:tanabata_tree:</code></td></tr><tr><td style="text-align:left">ğŸ‰ <code>:tada:</code></td><td style="text-align:left">ğŸŠ <code>:confetti_ball:</code></td><td style="text-align:left">ğŸˆ <code>:balloon:</code></td></tr><tr><td style="text-align:left">ğŸ”® <code>:crystal_ball:</code></td><td style="text-align:left">ğŸ’¿ <code>:cd:</code></td><td style="text-align:left">ğŸ“€ <code>:dvd:</code></td></tr><tr><td style="text-align:left">ğŸ’¾ <code>:floppy_disk:</code></td><td style="text-align:left">ğŸ“· <code>:camera:</code></td><td style="text-align:left">ğŸ“¹ <code>:video_camera:</code></td></tr><tr><td style="text-align:left">ğŸ¥ <code>:movie_camera:</code></td><td style="text-align:left">ğŸ’» <code>:computer:</code></td><td style="text-align:left">ğŸ“º <code>:tv:</code></td></tr><tr><td style="text-align:left">ğŸ“± <code>:iphone:</code></td><td style="text-align:left">â˜ï¸ <code>:phone:</code></td><td style="text-align:left">â˜ï¸ <code>:telephone:</code></td></tr><tr><td style="text-align:left">ğŸ“ <code>:telephone_receiver:</code></td><td style="text-align:left">ğŸ“Ÿ <code>:pager:</code></td><td style="text-align:left">ğŸ“  <code>:fax:</code></td></tr><tr><td style="text-align:left">ğŸ’½ <code>:minidisc:</code></td><td style="text-align:left">ğŸ“¼ <code>:vhs:</code></td><td style="text-align:left">ğŸ”‰ <code>:sound:</code></td></tr><tr><td style="text-align:left">ğŸ”ˆ <code>:speaker:</code></td><td style="text-align:left">ğŸ”‡ <code>:mute:</code></td><td style="text-align:left">ğŸ“¢ <code>:loudspeaker:</code></td></tr><tr><td style="text-align:left">ğŸ“£ <code>:mega:</code></td><td style="text-align:left">âŒ›ï¸ <code>:hourglass:</code></td><td style="text-align:left">â³ <code>:hourglass_flowing_sand:</code></td></tr><tr><td style="text-align:left">â° <code>:alarm_clock:</code></td><td style="text-align:left">âŒšï¸ <code>:watch:</code></td><td style="text-align:left">ğŸ“» <code>:radio:</code></td></tr><tr><td style="text-align:left">ğŸ“¡ <code>:satellite:</code></td><td style="text-align:left">â¿ <code>:loop:</code></td><td style="text-align:left">ğŸ” <code>:mag:</code></td></tr><tr><td style="text-align:left">ğŸ” <code>:mag_right:</code></td><td style="text-align:left">ğŸ”“ <code>:unlock:</code></td><td style="text-align:left">ğŸ”’ <code>:lock:</code></td></tr><tr><td style="text-align:left">ğŸ” <code>:lock_with_ink_pen:</code></td><td style="text-align:left">ğŸ” <code>:closed_lock_with_key:</code></td><td style="text-align:left">ğŸ”‘ <code>:key:</code></td></tr><tr><td style="text-align:left">ğŸ’¡ <code>:bulb:</code></td><td style="text-align:left">ğŸ”¦ <code>:flashlight:</code></td><td style="text-align:left">ğŸ”† <code>:high_brightness:</code></td></tr><tr><td style="text-align:left">ğŸ”… <code>:low_brightness:</code></td><td style="text-align:left">ğŸ”Œ <code>:electric_plug:</code></td><td style="text-align:left">ğŸ”‹ <code>:battery:</code></td></tr><tr><td style="text-align:left">ğŸ“² <code>:calling:</code></td><td style="text-align:left">âœ‰ï¸ <code>:email:</code></td><td style="text-align:left">ğŸ“« <code>:mailbox:</code></td></tr><tr><td style="text-align:left">ğŸ“® <code>:postbox:</code></td><td style="text-align:left">ğŸ›€ <code>:bath:</code></td><td style="text-align:left">ğŸ› <code>:bathtub:</code></td></tr><tr><td style="text-align:left">ğŸš¿ <code>:shower:</code></td><td style="text-align:left">ğŸš½ <code>:toilet:</code></td><td style="text-align:left">ğŸ”§ <code>:wrench:</code></td></tr><tr><td style="text-align:left">ğŸ”© <code>:nut_and_bolt:</code></td><td style="text-align:left">ğŸ”¨ <code>:hammer:</code></td><td style="text-align:left">ğŸ’º <code>:seat:</code></td></tr><tr><td style="text-align:left">ğŸ’° <code>:moneybag:</code></td><td style="text-align:left">ğŸ’´ <code>:yen:</code></td><td style="text-align:left">ğŸ’µ <code>:dollar:</code></td></tr><tr><td style="text-align:left">ğŸ’· <code>:pound:</code></td><td style="text-align:left">ğŸ’¶ <code>:euro:</code></td><td style="text-align:left">ğŸ’³ <code>:credit_card:</code></td></tr><tr><td style="text-align:left">ğŸ’¸ <code>:money_with_wings:</code></td><td style="text-align:left">ğŸ“§ <code>:e-mail:</code></td><td style="text-align:left">ğŸ“¥ <code>:inbox_tray:</code></td></tr><tr><td style="text-align:left">ğŸ“¤ <code>:outbox_tray:</code></td><td style="text-align:left">âœ‰ï¸ <code>:envelope:</code></td><td style="text-align:left">ğŸ“¨ <code>:incoming_envelope:</code></td></tr><tr><td style="text-align:left">ğŸ“¯ <code>:postal_horn:</code></td><td style="text-align:left">ğŸ“ª <code>:mailbox_closed:</code></td><td style="text-align:left">ğŸ“¬ <code>:mailbox_with_mail:</code></td></tr><tr><td style="text-align:left">ğŸ“­ <code>:mailbox_with_no_mail:</code></td><td style="text-align:left">ğŸšª <code>:door:</code></td><td style="text-align:left">ğŸš¬ <code>:smoking:</code></td></tr><tr><td style="text-align:left">ğŸ’£ <code>:bomb:</code></td><td style="text-align:left">ğŸ”« <code>:gun:</code></td><td style="text-align:left">ğŸ”ª <code>:hocho:</code></td></tr><tr><td style="text-align:left">ğŸ’Š <code>:pill:</code></td><td style="text-align:left">ğŸ’‰ <code>:syringe:</code></td><td style="text-align:left">ğŸ“„ <code>:page_facing_up:</code></td></tr><tr><td style="text-align:left">ğŸ“ƒ <code>:page_with_curl:</code></td><td style="text-align:left">ğŸ“‘ <code>:bookmark_tabs:</code></td><td style="text-align:left">ğŸ“Š <code>:bar_chart:</code></td></tr><tr><td style="text-align:left">ğŸ“ˆ <code>:chart_with_upwards_trend:</code></td><td style="text-align:left">ğŸ“‰ <code>:chart_with_downwards_trend:</code></td><td style="text-align:left">ğŸ“œ <code>:scroll:</code></td></tr><tr><td style="text-align:left">ğŸ“‹ <code>:clipboard:</code></td><td style="text-align:left">ğŸ“† <code>:calendar:</code></td><td style="text-align:left">ğŸ“… <code>:date:</code></td></tr><tr><td style="text-align:left">ğŸ“‡ <code>:card_index:</code></td><td style="text-align:left">ğŸ“ <code>:file_folder:</code></td><td style="text-align:left">ğŸ“‚ <code>:open_file_folder:</code></td></tr><tr><td style="text-align:left">âœ‚ï¸ <code>:scissors:</code></td><td style="text-align:left">ğŸ“Œ <code>:pushpin:</code></td><td style="text-align:left">ğŸ“ <code>:paperclip:</code></td></tr><tr><td style="text-align:left">âœ’ï¸ <code>:black_nib:</code></td><td style="text-align:left">âœï¸ <code>:pencil2:</code></td><td style="text-align:left">ğŸ“ <code>:straight_ruler:</code></td></tr><tr><td style="text-align:left">ğŸ“ <code>:triangular_ruler:</code></td><td style="text-align:left">ğŸ“• <code>:closed_book:</code></td><td style="text-align:left">ğŸ“— <code>:green_book:</code></td></tr><tr><td style="text-align:left">ğŸ“˜ <code>:blue_book:</code></td><td style="text-align:left">ğŸ“™ <code>:orange_book:</code></td><td style="text-align:left">ğŸ““ <code>:notebook:</code></td></tr><tr><td style="text-align:left">ğŸ“” <code>:notebook_with_decorative_cover:</code></td><td style="text-align:left">ğŸ“’ <code>:ledger:</code></td><td style="text-align:left">ğŸ“š <code>:books:</code></td></tr><tr><td style="text-align:left">ğŸ”– <code>:bookmark:</code></td><td style="text-align:left">ğŸ“› <code>:name_badge:</code></td><td style="text-align:left">ğŸ”¬ <code>:microscope:</code></td></tr><tr><td style="text-align:left">ğŸ”­ <code>:telescope:</code></td><td style="text-align:left">ğŸ“° <code>:newspaper:</code></td><td style="text-align:left">ğŸˆ <code>:football:</code></td></tr><tr><td style="text-align:left">ğŸ€ <code>:basketball:</code></td><td style="text-align:left">âš½ï¸ <code>:soccer:</code></td><td style="text-align:left">âš¾ï¸ <code>:baseball:</code></td></tr><tr><td style="text-align:left">ğŸ¾ <code>:tennis:</code></td><td style="text-align:left">ğŸ± <code>:8ball:</code></td><td style="text-align:left">ğŸ‰ <code>:rugby_football:</code></td></tr><tr><td style="text-align:left">ğŸ³ <code>:bowling:</code></td><td style="text-align:left">â›³ï¸ <code>:golf:</code></td><td style="text-align:left">ğŸšµ <code>:mountain_bicyclist:</code></td></tr><tr><td style="text-align:left">ğŸš´ <code>:bicyclist:</code></td><td style="text-align:left">ğŸ‡ <code>:horse_racing:</code></td><td style="text-align:left">ğŸ‚ <code>:snowboarder:</code></td></tr><tr><td style="text-align:left">ğŸŠ <code>:swimmer:</code></td><td style="text-align:left">ğŸ„ <code>:surfer:</code></td><td style="text-align:left">ğŸ¿ <code>:ski:</code></td></tr><tr><td style="text-align:left">â™ ï¸ <code>:spades:</code></td><td style="text-align:left">â™¥ï¸ <code>:hearts:</code></td><td style="text-align:left">â™£ï¸ <code>:clubs:</code></td></tr><tr><td style="text-align:left">â™¦ï¸ <code>:diamonds:</code></td><td style="text-align:left">ğŸ’ <code>:gem:</code></td><td style="text-align:left">ğŸ’ <code>:ring:</code></td></tr><tr><td style="text-align:left">ğŸ† <code>:trophy:</code></td><td style="text-align:left">ğŸ¼ <code>:musical_score:</code></td><td style="text-align:left">ğŸ¹ <code>:musical_keyboard:</code></td></tr><tr><td style="text-align:left">ğŸ» <code>:violin:</code></td><td style="text-align:left">ğŸ‘¾ <code>:space_invader:</code></td><td style="text-align:left">ğŸ® <code>:video_game:</code></td></tr><tr><td style="text-align:left">ğŸƒ <code>:black_joker:</code></td><td style="text-align:left">ğŸ´ <code>:flower_playing_cards:</code></td><td style="text-align:left">ğŸ² <code>:game_die:</code></td></tr><tr><td style="text-align:left">ğŸ¯ <code>:dart:</code></td><td style="text-align:left">ğŸ€„ï¸ <code>:mahjong:</code></td><td style="text-align:left">ğŸ¬ <code>:clapper:</code></td></tr><tr><td style="text-align:left">ğŸ“ <code>:memo:</code></td><td style="text-align:left">ğŸ“ <code>:pencil:</code></td><td style="text-align:left">ğŸ“– <code>:book:</code></td></tr><tr><td style="text-align:left">ğŸ¨ <code>:art:</code></td><td style="text-align:left">ğŸ¤ <code>:microphone:</code></td><td style="text-align:left">ğŸ§ <code>:headphones:</code></td></tr><tr><td style="text-align:left">ğŸº <code>:trumpet:</code></td><td style="text-align:left">ğŸ· <code>:saxophone:</code></td><td style="text-align:left">ğŸ¸ <code>:guitar:</code></td></tr><tr><td style="text-align:left">ğŸ‘ <code>:shoe:</code></td><td style="text-align:left">ğŸ‘¡ <code>:sandal:</code></td><td style="text-align:left">ğŸ‘  <code>:high_heel:</code></td></tr><tr><td style="text-align:left">ğŸ’„ <code>:lipstick:</code></td><td style="text-align:left">ğŸ‘¢ <code>:boot:</code></td><td style="text-align:left">ğŸ‘• <code>:shirt:</code></td></tr><tr><td style="text-align:left">ğŸ‘• <code>:tshirt:</code></td><td style="text-align:left">ğŸ‘” <code>:necktie:</code></td><td style="text-align:left">ğŸ‘š <code>:womans_clothes:</code></td></tr><tr><td style="text-align:left">ğŸ‘— <code>:dress:</code></td><td style="text-align:left">ğŸ½ <code>:running_shirt_with_sash:</code></td><td style="text-align:left">ğŸ‘– <code>:jeans:</code></td></tr><tr><td style="text-align:left">ğŸ‘˜ <code>:kimono:</code></td><td style="text-align:left">ğŸ‘™ <code>:bikini:</code></td><td style="text-align:left">ğŸ€ <code>:ribbon:</code></td></tr><tr><td style="text-align:left">ğŸ© <code>:tophat:</code></td><td style="text-align:left">ğŸ‘‘ <code>:crown:</code></td><td style="text-align:left">ğŸ‘’ <code>:womans_hat:</code></td></tr><tr><td style="text-align:left">ğŸ‘ <code>:mans_shoe:</code></td><td style="text-align:left">ğŸŒ‚ <code>:closed_umbrella:</code></td><td style="text-align:left">ğŸ’¼ <code>:briefcase:</code></td></tr><tr><td style="text-align:left">ğŸ‘œ <code>:handbag:</code></td><td style="text-align:left">ğŸ‘ <code>:pouch:</code></td><td style="text-align:left">ğŸ‘› <code>:purse:</code></td></tr><tr><td style="text-align:left">ğŸ‘“ <code>:eyeglasses:</code></td><td style="text-align:left">ğŸ£ <code>:fishing_pole_and_fish:</code></td><td style="text-align:left">â˜•ï¸ <code>:coffee:</code></td></tr><tr><td style="text-align:left">ğŸµ <code>:tea:</code></td><td style="text-align:left">ğŸ¶ <code>:sake:</code></td><td style="text-align:left">ğŸ¼ <code>:baby_bottle:</code></td></tr><tr><td style="text-align:left">ğŸº <code>:beer:</code></td><td style="text-align:left">ğŸ» <code>:beers:</code></td><td style="text-align:left">ğŸ¸ <code>:cocktail:</code></td></tr><tr><td style="text-align:left">ğŸ¹ <code>:tropical_drink:</code></td><td style="text-align:left">ğŸ· <code>:wine_glass:</code></td><td style="text-align:left">ğŸ´ <code>:fork_and_knife:</code></td></tr><tr><td style="text-align:left">ğŸ• <code>:pizza:</code></td><td style="text-align:left">ğŸ” <code>:hamburger:</code></td><td style="text-align:left">ğŸŸ <code>:fries:</code></td></tr><tr><td style="text-align:left">ğŸ— <code>:poultry_leg:</code></td><td style="text-align:left">ğŸ– <code>:meat_on_bone:</code></td><td style="text-align:left">ğŸ <code>:spaghetti:</code></td></tr><tr><td style="text-align:left">ğŸ› <code>:curry:</code></td><td style="text-align:left">ğŸ¤ <code>:fried_shrimp:</code></td><td style="text-align:left">ğŸ± <code>:bento:</code></td></tr><tr><td style="text-align:left">ğŸ£ <code>:sushi:</code></td><td style="text-align:left">ğŸ¥ <code>:fish_cake:</code></td><td style="text-align:left">ğŸ™ <code>:rice_ball:</code></td></tr><tr><td style="text-align:left">ğŸ˜ <code>:rice_cracker:</code></td><td style="text-align:left">ğŸš <code>:rice:</code></td><td style="text-align:left">ğŸœ <code>:ramen:</code></td></tr><tr><td style="text-align:left">ğŸ² <code>:stew:</code></td><td style="text-align:left">ğŸ¢ <code>:oden:</code></td><td style="text-align:left">ğŸ¡ <code>:dango:</code></td></tr><tr><td style="text-align:left">ğŸ¥š <code>:egg:</code></td><td style="text-align:left">ğŸ <code>:bread:</code></td><td style="text-align:left">ğŸ© <code>:doughnut:</code></td></tr><tr><td style="text-align:left">ğŸ® <code>:custard:</code></td><td style="text-align:left">ğŸ¦ <code>:icecream:</code></td><td style="text-align:left">ğŸ¨ <code>:ice_cream:</code></td></tr><tr><td style="text-align:left">ğŸ§ <code>:shaved_ice:</code></td><td style="text-align:left">ğŸ‚ <code>:birthday:</code></td><td style="text-align:left">ğŸ° <code>:cake:</code></td></tr><tr><td style="text-align:left">ğŸª <code>:cookie:</code></td><td style="text-align:left">ğŸ« <code>:chocolate_bar:</code></td><td style="text-align:left">ğŸ¬ <code>:candy:</code></td></tr><tr><td style="text-align:left">ğŸ­ <code>:lollipop:</code></td><td style="text-align:left">ğŸ¯ <code>:honey_pot:</code></td><td style="text-align:left">ğŸ <code>:apple:</code></td></tr><tr><td style="text-align:left">ğŸ <code>:green_apple:</code></td><td style="text-align:left">ğŸŠ <code>:tangerine:</code></td><td style="text-align:left">ğŸ‹ <code>:lemon:</code></td></tr><tr><td style="text-align:left">ğŸ’ <code>:cherries:</code></td><td style="text-align:left">ğŸ‡ <code>:grapes:</code></td><td style="text-align:left">ğŸ‰ <code>:watermelon:</code></td></tr><tr><td style="text-align:left">ğŸ“ <code>:strawberry:</code></td><td style="text-align:left">ğŸ‘ <code>:peach:</code></td><td style="text-align:left">ğŸˆ <code>:melon:</code></td></tr><tr><td style="text-align:left">ğŸŒ <code>:banana:</code></td><td style="text-align:left">ğŸ <code>:pear:</code></td><td style="text-align:left">ğŸ <code>:pineapple:</code></td></tr><tr><td style="text-align:left">ğŸ  <code>:sweet_potato:</code></td><td style="text-align:left">ğŸ† <code>:eggplant:</code></td><td style="text-align:left">ğŸ… <code>:tomato:</code></td></tr><tr><td style="text-align:left">ğŸŒ½ <code>:corn:</code></td><td style="text-align:left"></td><td style="text-align:left"></td></tr></tbody></table><p><strong>Places</strong></p><table><thead><tr><th style="text-align:left">ğŸ  <code>:house:</code></th><th style="text-align:left">ğŸ¡ <code>:house_with_garden:</code></th><th style="text-align:left">ğŸ« <code>:school:</code></th></tr></thead><tbody><tr><td style="text-align:left">ğŸ¢ <code>:office:</code></td><td style="text-align:left">ğŸ£ <code>:post_office:</code></td><td style="text-align:left">ğŸ¥ <code>:hospital:</code></td></tr><tr><td style="text-align:left">ğŸ¦ <code>:bank:</code></td><td style="text-align:left">ğŸª <code>:convenience_store:</code></td><td style="text-align:left">ğŸ© <code>:love_hotel:</code></td></tr><tr><td style="text-align:left">ğŸ¨ <code>:hotel:</code></td><td style="text-align:left">ğŸ’’ <code>:wedding:</code></td><td style="text-align:left">â›ªï¸ <code>:church:</code></td></tr><tr><td style="text-align:left">ğŸ¬ <code>:department_store:</code></td><td style="text-align:left">ğŸ¤ <code>:european_post_office:</code></td><td style="text-align:left">ğŸŒ‡ <code>:city_sunrise:</code></td></tr><tr><td style="text-align:left">ğŸŒ† <code>:city_sunset:</code></td><td style="text-align:left">ğŸ¯ <code>:japanese_castle:</code></td><td style="text-align:left">ğŸ° <code>:european_castle:</code></td></tr><tr><td style="text-align:left">â›ºï¸ <code>:tent:</code></td><td style="text-align:left">ğŸ­ <code>:factory:</code></td><td style="text-align:left">ğŸ—¼ <code>:tokyo_tower:</code></td></tr><tr><td style="text-align:left">ğŸ—¾ <code>:japan:</code></td><td style="text-align:left">ğŸ—» <code>:mount_fuji:</code></td><td style="text-align:left">ğŸŒ„ <code>:sunrise_over_mountains:</code></td></tr><tr><td style="text-align:left">ğŸŒ… <code>:sunrise:</code></td><td style="text-align:left">ğŸŒ  <code>:stars:</code></td><td style="text-align:left">ğŸ—½ <code>:statue_of_liberty:</code></td></tr><tr><td style="text-align:left">ğŸŒ‰ <code>:bridge_at_night:</code></td><td style="text-align:left">ğŸ  <code>:carousel_horse:</code></td><td style="text-align:left">ğŸŒˆ <code>:rainbow:</code></td></tr><tr><td style="text-align:left">ğŸ¡ <code>:ferris_wheel:</code></td><td style="text-align:left">â›²ï¸ <code>:fountain:</code></td><td style="text-align:left">ğŸ¢ <code>:roller_coaster:</code></td></tr><tr><td style="text-align:left">ğŸš¢ <code>:ship:</code></td><td style="text-align:left">ğŸš¤ <code>:speedboat:</code></td><td style="text-align:left">â›µï¸ <code>:boat:</code></td></tr><tr><td style="text-align:left">â›µï¸ <code>:sailboat:</code></td><td style="text-align:left">ğŸš£ <code>:rowboat:</code></td><td style="text-align:left">âš“ï¸ <code>:anchor:</code></td></tr><tr><td style="text-align:left">ğŸš€ <code>:rocket:</code></td><td style="text-align:left">âœˆï¸ <code>:airplane:</code></td><td style="text-align:left">ğŸš <code>:helicopter:</code></td></tr><tr><td style="text-align:left">ğŸš‚ <code>:steam_locomotive:</code></td><td style="text-align:left">ğŸšŠ <code>:tram:</code></td><td style="text-align:left">ğŸš <code>:mountain_railway:</code></td></tr><tr><td style="text-align:left">ğŸš² <code>:bike:</code></td><td style="text-align:left">ğŸš¡ <code>:aerial_tramway:</code></td><td style="text-align:left">ğŸšŸ <code>:suspension_railway:</code></td></tr><tr><td style="text-align:left">ğŸš  <code>:mountain_cableway:</code></td><td style="text-align:left">ğŸšœ <code>:tractor:</code></td><td style="text-align:left">ğŸš™ <code>:blue_car:</code></td></tr><tr><td style="text-align:left">ğŸš˜ <code>:oncoming_automobile:</code></td><td style="text-align:left">ğŸš— <code>:car:</code></td><td style="text-align:left">ğŸš— <code>:red_car:</code></td></tr><tr><td style="text-align:left">ğŸš• <code>:taxi:</code></td><td style="text-align:left">ğŸš– <code>:oncoming_taxi:</code></td><td style="text-align:left">ğŸš› <code>:articulated_lorry:</code></td></tr><tr><td style="text-align:left">ğŸšŒ <code>:bus:</code></td><td style="text-align:left">ğŸš <code>:oncoming_bus:</code></td><td style="text-align:left">ğŸš¨ <code>:rotating_light:</code></td></tr><tr><td style="text-align:left">ğŸš“ <code>:police_car:</code></td><td style="text-align:left">ğŸš” <code>:oncoming_police_car:</code></td><td style="text-align:left">ğŸš’ <code>:fire_engine:</code></td></tr><tr><td style="text-align:left">ğŸš‘ <code>:ambulance:</code></td><td style="text-align:left">ğŸš <code>:minibus:</code></td><td style="text-align:left">ğŸšš <code>:truck:</code></td></tr><tr><td style="text-align:left">ğŸš‹ <code>:train:</code></td><td style="text-align:left">ğŸš‰ <code>:station:</code></td><td style="text-align:left">ğŸš† <code>:train2:</code></td></tr><tr><td style="text-align:left">ğŸš… <code>:bullettrain_front:</code></td><td style="text-align:left">ğŸš„ <code>:bullettrain_side:</code></td><td style="text-align:left">ğŸšˆ <code>:light_rail:</code></td></tr><tr><td style="text-align:left">ğŸš <code>:monorail:</code></td><td style="text-align:left">ğŸšƒ <code>:railway_car:</code></td><td style="text-align:left">ğŸš <code>:trolleybus:</code></td></tr><tr><td style="text-align:left">ğŸ« <code>:ticket:</code></td><td style="text-align:left">â›½ï¸ <code>:fuelpump:</code></td><td style="text-align:left">ğŸš¦ <code>:vertical_traffic_light:</code></td></tr><tr><td style="text-align:left">ğŸš¥ <code>:traffic_light:</code></td><td style="text-align:left">âš ï¸ <code>:warning:</code></td><td style="text-align:left">ğŸš§ <code>:construction:</code></td></tr><tr><td style="text-align:left">ğŸ”° <code>:beginner:</code></td><td style="text-align:left">ğŸ§ <code>:atm:</code></td><td style="text-align:left">ğŸ° <code>:slot_machine:</code></td></tr><tr><td style="text-align:left">ğŸš <code>:busstop:</code></td><td style="text-align:left">ğŸ’ˆ <code>:barber:</code></td><td style="text-align:left">â™¨ï¸ <code>:hotsprings:</code></td></tr><tr><td style="text-align:left">ğŸ <code>:checkered_flag:</code></td><td style="text-align:left">ğŸŒ <code>:crossed_flags:</code></td><td style="text-align:left">ğŸ® <code>:izakaya_lantern:</code></td></tr><tr><td style="text-align:left">ğŸ—¿ <code>:moyai:</code></td><td style="text-align:left">ğŸª <code>:circus_tent:</code></td><td style="text-align:left">ğŸ­ <code>:performing_arts:</code></td></tr><tr><td style="text-align:left">ğŸ“ <code>:round_pushpin:</code></td><td style="text-align:left">ğŸš© <code>:triangular_flag_on_post:</code></td><td style="text-align:left"></td></tr></tbody></table><p><strong>Symbols</strong></p><table><thead><tr><th style="text-align:left">1ï¸âƒ£ <code>:one:</code></th><th style="text-align:left">2ï¸âƒ£ <code>:two:</code></th><th style="text-align:left">3ï¸âƒ£ <code>:three:</code></th></tr></thead><tbody><tr><td style="text-align:left">4ï¸âƒ£ <code>:four:</code></td><td style="text-align:left">5ï¸âƒ£ <code>:five:</code></td><td style="text-align:left">6ï¸âƒ£ <code>:six:</code></td></tr><tr><td style="text-align:left">7ï¸âƒ£ <code>:seven:</code></td><td style="text-align:left">8ï¸âƒ£ <code>:eight:</code></td><td style="text-align:left">9ï¸âƒ£ <code>:nine:</code></td></tr><tr><td style="text-align:left">ğŸ”Ÿ <code>:keycap_ten:</code></td><td style="text-align:left">ğŸ”¢ <code>:1234:</code></td><td style="text-align:left">0ï¸âƒ£ <code>:zero:</code></td></tr><tr><td style="text-align:left">#ï¸âƒ£ <code>:hash:</code></td><td style="text-align:left">ğŸ”£ <code>:symbols:</code></td><td style="text-align:left">â—€ï¸ <code>:arrow_backward:</code></td></tr><tr><td style="text-align:left">â¬‡ï¸ <code>:arrow_down:</code></td><td style="text-align:left">â–¶ï¸ <code>:arrow_forward:</code></td><td style="text-align:left">â¬…ï¸ <code>:arrow_left:</code></td></tr><tr><td style="text-align:left">ğŸ”  <code>:capital_abcd:</code></td><td style="text-align:left">ğŸ”¡ <code>:abcd:</code></td><td style="text-align:left">ğŸ”¤ <code>:abc:</code></td></tr><tr><td style="text-align:left">â†™ï¸ <code>:arrow_lower_left:</code></td><td style="text-align:left">â†˜ï¸ <code>:arrow_lower_right:</code></td><td style="text-align:left">â¡ï¸ <code>:arrow_right:</code></td></tr><tr><td style="text-align:left">â¬†ï¸ <code>:arrow_up:</code></td><td style="text-align:left">â†–ï¸ <code>:arrow_upper_left:</code></td><td style="text-align:left">â†—ï¸ <code>:arrow_upper_right:</code></td></tr><tr><td style="text-align:left">â¬ <code>:arrow_double_down:</code></td><td style="text-align:left">â« <code>:arrow_double_up:</code></td><td style="text-align:left">ğŸ”½ <code>:arrow_down_small:</code></td></tr><tr><td style="text-align:left">â¤µï¸ <code>:arrow_heading_down:</code></td><td style="text-align:left">â¤´ï¸ <code>:arrow_heading_up:</code></td><td style="text-align:left">â†©ï¸ <code>:leftwards_arrow_with_hook:</code></td></tr><tr><td style="text-align:left">â†ªï¸ <code>:arrow_right_hook:</code></td><td style="text-align:left">â†”ï¸ <code>:left_right_arrow:</code></td><td style="text-align:left">â†•ï¸ <code>:arrow_up_down:</code></td></tr><tr><td style="text-align:left">ğŸ”¼ <code>:arrow_up_small:</code></td><td style="text-align:left">ğŸ”ƒ <code>:arrows_clockwise:</code></td><td style="text-align:left">ğŸ”„ <code>:arrows_counterclockwise:</code></td></tr><tr><td style="text-align:left">âª <code>:rewind:</code></td><td style="text-align:left">â© <code>:fast_forward:</code></td><td style="text-align:left">â„¹ï¸ <code>:information_source:</code></td></tr><tr><td style="text-align:left">ğŸ†— <code>:ok:</code></td><td style="text-align:left">ğŸ”€ <code>:twisted_rightwards_arrows:</code></td><td style="text-align:left">ğŸ” <code>:repeat:</code></td></tr><tr><td style="text-align:left">ğŸ”‚ <code>:repeat_one:</code></td><td style="text-align:left">ğŸ†• <code>:new:</code></td><td style="text-align:left">ğŸ” <code>:top:</code></td></tr><tr><td style="text-align:left">ğŸ†™ <code>:up:</code></td><td style="text-align:left">ğŸ†’ <code>:cool:</code></td><td style="text-align:left">ğŸ†“ <code>:free:</code></td></tr><tr><td style="text-align:left">ğŸ†– <code>:ng:</code></td><td style="text-align:left">ğŸ¦ <code>:cinema:</code></td><td style="text-align:left">ğŸˆ <code>:koko:</code></td></tr><tr><td style="text-align:left">ğŸ“¶ <code>:signal_strength:</code></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">ğŸˆ‚ï¸ <code>:sa:</code></td><td style="text-align:left">ğŸš» <code>:restroom:</code></td><td style="text-align:left">ğŸš¹ <code>:mens:</code></td></tr><tr><td style="text-align:left">ğŸšº <code>:womens:</code></td><td style="text-align:left">ğŸš¼ <code>:baby_symbol:</code></td><td style="text-align:left">ğŸš­ <code>:no_smoking:</code></td></tr><tr><td style="text-align:left">ğŸ…¿ï¸ <code>:parking:</code></td><td style="text-align:left">â™¿ï¸ <code>:wheelchair:</code></td><td style="text-align:left">ğŸš‡ <code>:metro:</code></td></tr><tr><td style="text-align:left">ğŸ›„ <code>:baggage_claim:</code></td><td style="text-align:left">ğŸ‰‘ <code>:accept:</code></td><td style="text-align:left">ğŸš¾ <code>:wc:</code></td></tr><tr><td style="text-align:left">ğŸš° <code>:potable_water:</code></td><td style="text-align:left">ğŸš® <code>:put_litter_in_its_place:</code></td><td style="text-align:left">ãŠ™ï¸ <code>:secret:</code></td></tr><tr><td style="text-align:left">ãŠ—ï¸ <code>:congratulations:</code></td><td style="text-align:left">â“‚ï¸ <code>:m:</code></td><td style="text-align:left">ğŸ›‚ <code>:passport_control:</code></td></tr><tr><td style="text-align:left">ğŸ›… <code>:left_luggage:</code></td><td style="text-align:left">ğŸ›ƒ <code>:customs:</code></td><td style="text-align:left">ğŸ‰ <code>:ideograph_advantage:</code></td></tr><tr><td style="text-align:left">ğŸ†‘ <code>:cl:</code></td><td style="text-align:left">ğŸ†˜ <code>:sos:</code></td><td style="text-align:left">ğŸ†” <code>:id:</code></td></tr><tr><td style="text-align:left">ğŸš« <code>:no_entry_sign:</code></td><td style="text-align:left">ğŸ” <code>:underage:</code></td><td style="text-align:left">ğŸ“µ <code>:no_mobile_phones:</code></td></tr><tr><td style="text-align:left">ğŸš¯ <code>:do_not_litter:</code></td><td style="text-align:left">ğŸš± <code>:non-potable_water:</code></td><td style="text-align:left">ğŸš³ <code>:no_bicycles:</code></td></tr><tr><td style="text-align:left">ğŸš· <code>:no_pedestrians:</code></td><td style="text-align:left">ğŸš¸ <code>:children_crossing:</code></td><td style="text-align:left">â›”ï¸ <code>:no_entry:</code></td></tr><tr><td style="text-align:left">âœ³ï¸ <code>:eight_spoked_asterisk:</code></td><td style="text-align:left">âœ´ï¸ <code>:eight_pointed_black_star:</code></td><td style="text-align:left">ğŸ’Ÿ <code>:heart_decoration:</code></td></tr><tr><td style="text-align:left">ğŸ†š <code>:vs:</code></td><td style="text-align:left">ğŸ“³ <code>:vibration_mode:</code></td><td style="text-align:left">ğŸ“´ <code>:mobile_phone_off:</code></td></tr><tr><td style="text-align:left">ğŸ’¹ <code>:chart:</code></td><td style="text-align:left">ğŸ’± <code>:currency_exchange:</code></td><td style="text-align:left">â™ˆï¸ <code>:aries:</code></td></tr><tr><td style="text-align:left">â™‰ï¸ <code>:taurus:</code></td><td style="text-align:left">â™Šï¸ <code>:gemini:</code></td><td style="text-align:left">â™‹ï¸ <code>:cancer:</code></td></tr><tr><td style="text-align:left">â™Œï¸ <code>:leo:</code></td><td style="text-align:left">â™ï¸ <code>:virgo:</code></td><td style="text-align:left">â™ï¸ <code>:libra:</code></td></tr><tr><td style="text-align:left">â™ï¸ <code>:scorpius:</code></td><td style="text-align:left">â™ï¸ <code>:sagittarius:</code></td><td style="text-align:left">â™‘ï¸ <code>:capricorn:</code></td></tr><tr><td style="text-align:left">â™’ï¸ <code>:aquarius:</code></td><td style="text-align:left">â™“ï¸ <code>:pisces:</code></td><td style="text-align:left">â› <code>:ophiuchus:</code></td></tr><tr><td style="text-align:left">ğŸ”¯ <code>:six_pointed_star:</code></td><td style="text-align:left">â <code>:negative_squared_cross_mark:</code></td><td style="text-align:left">ğŸ…°ï¸ <code>:a:</code></td></tr><tr><td style="text-align:left">ğŸ…±ï¸ <code>:b:</code></td><td style="text-align:left">ğŸ† <code>:ab:</code></td><td style="text-align:left">ğŸ…¾ï¸ <code>:o2:</code></td></tr><tr><td style="text-align:left">ğŸ’  <code>:diamond_shape_with_a_dot_inside:</code></td><td style="text-align:left">â™»ï¸ <code>:recycle:</code></td><td style="text-align:left">ğŸ”š <code>:end:</code></td></tr><tr><td style="text-align:left">ğŸ”› <code>:on:</code></td><td style="text-align:left">ğŸ”œ <code>:soon:</code></td><td style="text-align:left">ğŸ• <code>:clock1:</code></td></tr><tr><td style="text-align:left">ğŸ•œ <code>:clock130:</code></td><td style="text-align:left">ğŸ•™ <code>:clock10:</code></td><td style="text-align:left">ğŸ•¥ <code>:clock1030:</code></td></tr><tr><td style="text-align:left">ğŸ•š <code>:clock11:</code></td><td style="text-align:left">ğŸ•¦ <code>:clock1130:</code></td><td style="text-align:left">ğŸ•› <code>:clock12:</code></td></tr><tr><td style="text-align:left">ğŸ•§ <code>:clock1230:</code></td><td style="text-align:left">ğŸ•‘ <code>:clock2:</code></td><td style="text-align:left">ğŸ• <code>:clock230:</code></td></tr><tr><td style="text-align:left">ğŸ•’ <code>:clock3:</code></td><td style="text-align:left">ğŸ• <code>:clock330:</code></td><td style="text-align:left">ğŸ•“ <code>:clock4:</code></td></tr><tr><td style="text-align:left">ğŸ•Ÿ <code>:clock430:</code></td><td style="text-align:left">ğŸ•” <code>:clock5:</code></td><td style="text-align:left">ğŸ•  <code>:clock530:</code></td></tr><tr><td style="text-align:left">ğŸ•• <code>:clock6:</code></td><td style="text-align:left">ğŸ•¡ <code>:clock630:</code></td><td style="text-align:left">ğŸ•– <code>:clock7:</code></td></tr><tr><td style="text-align:left">ğŸ•¢ <code>:clock730:</code></td><td style="text-align:left">ğŸ•— <code>:clock8:</code></td><td style="text-align:left">ğŸ•£ <code>:clock830:</code></td></tr><tr><td style="text-align:left">ğŸ•˜ <code>:clock9:</code></td><td style="text-align:left">ğŸ•¤ <code>:clock930:</code></td><td style="text-align:left">ğŸ’² <code>:heavy_dollar_sign:</code></td></tr><tr><td style="text-align:left">Â©ï¸ <code>:copyright:</code></td><td style="text-align:left">Â®ï¸ <code>:registered:</code></td><td style="text-align:left">â„¢ï¸ <code>:tm:</code></td></tr><tr><td style="text-align:left">âŒ <code>:x:</code></td><td style="text-align:left">â—ï¸ <code>:heavy_exclamation_mark:</code></td><td style="text-align:left">â€¼ï¸ <code>:bangbang:</code></td></tr><tr><td style="text-align:left">â‰ï¸ <code>:interrobang:</code></td><td style="text-align:left">â­•ï¸ <code>:o:</code></td><td style="text-align:left">âœ–ï¸ <code>:heavy_multiplication_x:</code></td></tr><tr><td style="text-align:left">â• <code>:heavy_plus_sign:</code></td><td style="text-align:left">â– <code>:heavy_minus_sign:</code></td><td style="text-align:left">â— <code>:heavy_division_sign:</code></td></tr><tr><td style="text-align:left">ğŸ’® <code>:white_flower:</code></td><td style="text-align:left">ğŸ’¯ <code>:100:</code></td><td style="text-align:left">âœ”ï¸ <code>:heavy_check_mark:</code></td></tr><tr><td style="text-align:left">â˜‘ï¸ <code>:ballot_box_with_check:</code></td><td style="text-align:left">ğŸ”˜ <code>:radio_button:</code></td><td style="text-align:left">ğŸ”— <code>:link:</code></td></tr><tr><td style="text-align:left">â° <code>:curly_loop:</code></td><td style="text-align:left">ã€°ï¸ <code>:wavy_dash:</code></td><td style="text-align:left">ã€½ï¸ <code>:part_alternation_mark:</code></td></tr><tr><td style="text-align:left">ğŸ”± <code>:trident:</code></td><td style="text-align:left">ğŸ”» <code>:small_red_triangle_down:</code></td><td style="text-align:left">ğŸ”º <code>:small_red_triangle:</code></td></tr><tr><td style="text-align:left">âœ… <code>:white_check_mark:</code></td><td style="text-align:left">ğŸ”² <code>:black_square_button:</code></td><td style="text-align:left">ğŸ”³ <code>:white_square_button:</code></td></tr><tr><td style="text-align:left">âš«ï¸ <code>:black_circle:</code></td><td style="text-align:left">âšªï¸ <code>:white_circle:</code></td><td style="text-align:left">ğŸ”´ <code>:red_circle:</code></td></tr><tr><td style="text-align:left">ğŸ”µ <code>:large_blue_circle:</code></td><td style="text-align:left">ğŸ”· <code>:large_blue_diamond:</code></td><td style="text-align:left">ğŸ”¶ <code>:large_orange_diamond:</code></td></tr><tr><td style="text-align:left">ğŸ”¹ <code>:small_blue_diamond:</code></td><td style="text-align:left">ğŸ”¸ <code>:small_orange_diamond:</code></td><td style="text-align:left"></td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>åšå®¢é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Fluid</tag>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JavaWebå­¦ä¹ ç¬”è®°</title>
    <link href="/posts/2020/12/31/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <url>/posts/2020/12/31/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="JavaWeb"><a href="#JavaWeb" class="headerlink" title="JavaWeb"></a>JavaWeb</h1><h2 id="1-åŸºæœ¬æ¦‚å¿µ"><a href="#1-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1. åŸºæœ¬æ¦‚å¿µ"></a>1. åŸºæœ¬æ¦‚å¿µ</h2><h3 id="1-1-å‰è¨€"><a href="#1-1-å‰è¨€" class="headerlink" title="1.1 å‰è¨€"></a>1.1 å‰è¨€</h3><p>webå¼€å‘ï¼š</p><ul><li>webï¼Œç½‘é¡µçš„æ„æ€ï¼Œ<a href="http://www.baidu.com/">www.baidu.com</a></li><li>é™æ€web<ul><li>htmlã€css</li><li>æä¾›ç»™æ‰€æœ‰äººçœ‹çš„æ•°æ®å§‹ç»ˆä¸ä¼šå‘ç”Ÿå˜åŒ–</li></ul></li><li>åŠ¨æ€web<ul><li>æ·˜å®ï¼Œå‡ ä¹æ˜¯æ‰€æœ‰çš„ç½‘ç«™</li><li>æä¾›ç»™æ‰€æœ‰äººçœ‹çš„æ•°æ®å§‹ç»ˆä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ¯ä¸ªäººåœ¨ä¸åŒçš„æ—¶é—´ï¼Œä¸åŒçš„åœ°ç‚¹çœ‹åˆ°çš„ä¿¡æ¯å„ä¸ç›¸åŒ</li><li>æŠ€æœ¯æ ˆï¼šServlet/JSPï¼ŒASPï¼ŒPHP</li></ul></li></ul><p>åœ¨javaä¸­ï¼ŒåŠ¨æ€webèµ„æºå¼€å‘çš„æŠ€æœ¯ç»Ÿç§°ä¸ºJavaWebã€‚</p><h3 id="1-2-webåº”ç”¨ç¨‹åº"><a href="#1-2-webåº”ç”¨ç¨‹åº" class="headerlink" title="1.2 webåº”ç”¨ç¨‹åº"></a>1.2 webåº”ç”¨ç¨‹åº</h3><p>webåº”ç”¨ç¨‹åºï¼šå¯ä»¥æä¾›æµè§ˆå™¨è®¿é—®çš„ç¨‹åº</p><ul><li>a.htmlã€b.html â€¦â€¦å¤šä¸ªwebèµ„æºï¼Œè¿™äº›webèµ„æºå¯ä»¥è¢«å¤–ç•Œè®¿é—®ï¼Œå¯¹å¤–ç•Œæä¾›æœåŠ¡</li><li>ä½ ä»¬èƒ½è®¿é—®åˆ°çš„ä»»ä½•ä¸€ä¸ªé¡µé¢å’Œèµ„æºï¼Œéƒ½å­˜åœ¨äºæŸä¸ªè§’è½çš„è®¡ç®—æœºä¸Š</li><li>URLï¼šç»Ÿä¸€èµ„æºå®šä½ç¬¦</li><li>è¿™äº›ç»Ÿä¸€çš„webèµ„æºä¼šè¢«æ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œwebåº”ç”¨ç¨‹åºâ€”&gt;Tomcatï¼šæœåŠ¡å™¨</li><li>ä¸€ä¸ªwebåº”ç”¨ç”±å¤šéƒ¨åˆ†ç»„æˆï¼ˆé™æ€webï¼ŒåŠ¨æ€webï¼‰<ul><li>htmlï¼Œcssï¼Œjs</li><li>jspï¼Œservlet</li><li>javaç¨‹åº</li><li>jaråŒ…</li><li>é…ç½®æ–‡ä»¶ï¼ˆPropertiesï¼‰</li></ul></li></ul><p>webåº”ç”¨ç¨‹åºç¼–å†™å®Œæ¯•åï¼Œè‹¥æƒ³æä¾›ç»™å¤–ç•Œè®¿é—®ï¼šéœ€è¦ä¸€ä¸ªæœåŠ¡å™¨æ¥ç»Ÿä¸€ç®¡ç†</p><h3 id="1-3-é™æ€web"><a href="#1-3-é™æ€web" class="headerlink" title="1.3 é™æ€web"></a>1.3 é™æ€web</h3><ul><li>.htmï¼Œ.htmlï¼Œè¿™äº›éƒ½æ˜¯ç½‘é¡µçš„åç¼€ï¼Œå¦‚æœæœåŠ¡å™¨ä¸Šä¸€ç›´å­˜åœ¨è¿™äº›ä¸œè¥¿ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è¿›è¡Œè¯»å–ã€‚é€šç»œï¼š</li></ul><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E9%9D%99%E6%80%81web.png" alt="é™æ€webæµç¨‹"></p><ul><li>é™æ€webå­˜åœ¨çš„ç¼ºç‚¹<ul><li>webé¡µé¢æ— æ³•åŠ¨æ€æ›´æ–°ï¼Œæ‰€æœ‰ç”¨æˆ·çœ‹åˆ°çš„éƒ½æ˜¯åŒä¸€ä¸ªé¡µé¢<ul><li>è½®æ’­å›¾ï¼Œç‚¹å‡»ç‰¹æ•ˆï¼šä¼ªåŠ¨æ€</li><li>JavaScript[å®é™…å¼€å‘ä¸­ï¼Œå®ƒç”¨çš„æœ€å¤š]</li><li>VBScript</li></ul></li><li>å®ƒæ— æ³•å’Œæ•°æ®åº“äº¤äº’ï¼ˆæ•°æ®æ— æ³•æŒä¹…åŒ–ï¼Œç”¨æˆ·æ— æ³•äº¤äº’ï¼‰</li></ul></li></ul><h3 id="1-4-åŠ¨æ€web"><a href="#1-4-åŠ¨æ€web" class="headerlink" title="1.4 åŠ¨æ€web"></a>1.4 åŠ¨æ€web</h3><p>é¡µé¢ä¼šåŠ¨æ€å±•ç¤ºï¼šâ€œwebçš„é¡µé¢å±•ç¤ºçš„æ•ˆæœå› äººè€Œå¼‚â€</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8A%A8%E6%80%81web.png" alt="åŠ¨æ€webæµç¨‹"></p><p>ç¼ºç‚¹ï¼š</p><ul><li>å‡å¦‚æœåŠ¡å™¨çš„åŠ¨æ€webèµ„æºå‡ºç°äº†é”™è¯¯ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°ç¼–å†™æˆ‘ä»¬çš„<strong>åå°ç¨‹åº</strong>ï¼Œé‡æ–°å‘å¸ƒ<ul><li>åœæœºç»´æŠ¤</li></ul></li></ul><p>ä¼˜ç‚¹ï¼š</p><ul><li>webé¡µé¢å¯ä»¥åŠ¨æ€æ›´æ–°ï¼Œæ‰€æœ‰ç”¨æˆ·çœ‹åˆ°çš„éƒ½ä¸æ˜¯åŒä¸€ä¸ªé¡µé¢</li><li>å®ƒå¯ä»¥å’Œæ•°æ®åº“äº¤äº’ï¼ˆæ•°æ®æŒä¹…åŒ–ï¼šæ³¨å†Œï¼Œ[å•†å“ä¿¡æ¯ï¼Œç”¨æˆ·ä¿¡æ¯]ï¼‰</li></ul><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8A%A8%E6%80%81web%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%A4%E4%BA%92.png" alt="åŠ¨æ€webä¸æ•°æ®åº“äº¤äº’"></p><h2 id="2-webæœåŠ¡å™¨"><a href="#2-webæœåŠ¡å™¨" class="headerlink" title="2. webæœåŠ¡å™¨"></a>2. webæœåŠ¡å™¨</h2><h3 id="2-1-æŠ€æœ¯è®²è§£"><a href="#2-1-æŠ€æœ¯è®²è§£" class="headerlink" title="2.1 æŠ€æœ¯è®²è§£"></a>2.1 æŠ€æœ¯è®²è§£</h3><p>ASP</p><ul><li><p>å¾®è½¯ï¼šå›½å†…æœ€æ—©æµè¡Œçš„å°±æ˜¯ASP</p></li><li><p>åœ¨HTMLä¸­åµŒå…¥äº†VBçš„è„šæœ¬ï¼ŒASP + COM</p></li><li><p>åœ¨ASPå¼€å‘ä¸­ï¼ŒåŸºæœ¬ä¸€ä¸ªé¡µé¢éƒ½æœ‰å‡ åƒè¡Œçš„ä¸šåŠ¡ä»£ç ï¼Œé¡µé¢æå…¶æ··ä¹±</p></li><li><p>ç»´æŠ¤æˆæœ¬é«˜</p></li><li><p>C#</p></li><li><p>iisæœåŠ¡å™¨â€”Internet information Serviceså¯æ‰¿è½½çš„Webæ ¸å¿ƒ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span><br>            &lt;%<br>             System.out.println(&quot;/hello&quot;)  <br>             %&gt;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><p>PHP</p><ul><li>ä¼˜åŠ¿ï¼šPHPå¼€å‘é€Ÿåº¦å¾ˆå¿«ï¼ŒåŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œè·¨å¹³å°ï¼Œä»£ç å¾ˆç®€å•ï¼ˆ70%çš„ç½‘ç«™ä¸ºä¸­è½»é‡çº§çš„ç½‘ç«™ï¼‰</li><li>åŠ£åŠ¿ï¼šæ— æ³•æ‰¿è½½å¤§è®¿é—®é‡çš„æƒ…å†µï¼ˆå±€é™æ€§ï¼‰</li></ul><p>JSP/Servlet:</p><ul><li>SUNå…¬å¸ä¸»æ¨çš„<strong>B/Sæ¶æ„</strong></li><li>åŸºäºjavaè¯­è¨€çš„ï¼ˆæ‰€æœ‰çš„å¤§å…¬å¸ï¼Œæˆ–è€…ä¸€äº›å¼€æºçš„ç»„ä»¶ï¼Œéƒ½æ˜¯ç”¨javaå†™çš„ï¼‰</li><li>å¯ä»¥æ‰¿è½½ä¸‰é«˜é—®é¢˜å¸¦æ¥çš„å½±å“ï¼šé«˜å¹¶å‘ã€é«˜å¯ç”¨ã€é«˜æ€§èƒ½</li><li>è¯­æ³•å¾ˆåƒASPï¼Œæ–¹ä¾¿ASPå¼€å‘äººå‘˜è½¬åˆ°JSPï¼ŒåŠ å¼ºå¸‚åœºç«äº‰åº¦</li></ul><p>â€¦â€¦</p><h3 id="2-2-webæœåŠ¡å™¨"><a href="#2-2-webæœåŠ¡å™¨" class="headerlink" title="2.2 webæœåŠ¡å™¨"></a>2.2 webæœåŠ¡å™¨</h3><p>æœåŠ¡å™¨æ˜¯ä¸€ç§<strong>è¢«åŠ¨çš„æ“ä½œ</strong>ï¼Œç”¨æ¥å¤„ç†ç”¨æˆ·çš„ä¸€äº›è¯·æ±‚å’Œç»™ç”¨æˆ·ä¸€äº›å“åº”ä¿¡æ¯ã€‚</p><p><strong>IIS</strong></p><ul><li>å¾®è½¯çš„ï¼šASPâ€¦â€¦ï¼ŒWindowsä¸­è‡ªå¸¦çš„</li></ul><p><strong>Tomcat</strong></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/tomcat_logo.png" alt="tomcatçš„logo"></p><ul><li><p>Tomcatæ˜¯Apache è½¯ä»¶åŸºé‡‘ä¼šï¼ˆApache Software Foundationï¼‰çš„Jakarta é¡¹ç›®ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒé¡¹ç›®ã€‚æœ€æ–°çš„Servlet å’ŒJSP è§„èŒƒæ€»æ˜¯èƒ½åœ¨Tomcat ä¸­å¾—åˆ°ä½“ç°ã€‚å› ä¸ºTomcat æŠ€æœ¯å…ˆè¿›ã€æ€§èƒ½ç¨³å®šï¼Œè€Œä¸”å…è´¹ï¼Œå› è€Œæ·±å—Java çˆ±å¥½è€…çš„å–œçˆ±å¹¶å¾—åˆ°äº†éƒ¨åˆ†è½¯ä»¶å¼€å‘å•†çš„è®¤å¯ï¼Œæˆä¸ºç›®å‰æ¯”è¾ƒæµè¡Œçš„Web åº”ç”¨æœåŠ¡å™¨ã€‚</p></li><li><p>Tomcat æœåŠ¡å™¨æ˜¯ä¸€ä¸ªå…è´¹çš„å¼€æ”¾æºä»£ç çš„Web åº”ç”¨æœåŠ¡å™¨ï¼Œå±äºè½»é‡çº§åº”ç”¨<a href="https://baike.baidu.com/item/%E6%9C%8D%E5%8A%A1%E5%99%A8">æœåŠ¡å™¨</a>ï¼Œåœ¨ä¸­å°å‹ç³»ç»Ÿå’Œå¹¶å‘è®¿é—®ç”¨æˆ·ä¸æ˜¯å¾ˆå¤šçš„åœºåˆä¸‹è¢«æ™®éä½¿ç”¨ï¼Œæ˜¯å¼€å‘å’Œè°ƒè¯•JSP ç¨‹åºçš„é¦–é€‰ã€‚å¯¹äºä¸€ä¸ªJavaåˆå­¦webçš„äººæ¥è¯´ï¼Œå®ƒæ˜¯æœ€ä½³çš„é€‰æ‹©</p></li><li><p>Tomcat å®é™…ä¸Šè¿è¡ŒJSP é¡µé¢å’ŒServletã€‚ç›®å‰Tomcatæœ€æ–°ç‰ˆæœ¬ä¸º9.0.41ã€‚</p></li></ul><p><strong>å·¥ä½œ3-5å¹´ä¹‹åï¼Œå¯ä»¥å°è¯•æ‰‹å†™TomcatæœåŠ¡å™¨</strong>ï¼›</p><p><strong>ä¸‹è½½tomcat</strong>ï¼š</p><ol><li>å®‰è£… or è§£å‹</li><li>äº†è§£é…ç½®æ–‡ä»¶åŠç›®å½•ç»“æ„</li><li>äº†è§£å®ƒçš„ä½œç”¨</li></ol><h2 id="3-Tomcat"><a href="#3-Tomcat" class="headerlink" title="3. Tomcat"></a>3. Tomcat</h2><h3 id="3-1-å®‰è£…Tomcat"><a href="#3-1-å®‰è£…Tomcat" class="headerlink" title="3.1 å®‰è£…Tomcat"></a>3.1 å®‰è£…Tomcat</h3><p>Tomcatå®˜ç½‘ï¼š<a href="https://tomcat.apache.org/">https://tomcat.apache.org/</a></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/tomcat_install.png" alt="Tomcatå®‰è£…åŒ…"></p><p>ä¸‹è½½å®Œæˆåå¾—åˆ°å®‰å‹ç¼©åŒ…</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/zip.png" alt="å‹ç¼©åŒ…"></p><h3 id="3-2-Tomcatå¯åŠ¨å’Œé…ç½®"><a href="#3-2-Tomcatå¯åŠ¨å’Œé…ç½®" class="headerlink" title="3.2 Tomcatå¯åŠ¨å’Œé…ç½®"></a>3.2 Tomcatå¯åŠ¨å’Œé…ç½®</h3><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/tomcat_folder.png" alt="Tomcatç›®å½•ç»“æ„"></p><p><strong>å¯åŠ¨/å…³é—­Tomcat</strong></p><p>åœ¨è§£å‹å‡ºçš„æ–‡ä»¶å¤¹ä¸‹çš„binç›®å½•ä¸‹</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/tomcat_start_shut.png" alt="tomcatçš„å¯åŠ¨ä¸å…³é—­"></p><p>è®¿é—®æµ‹è¯•ï¼š<a href="http://localhost:8080/">http://localhost:8080/</a></p><p>å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼š</p><ol><li>javaç¯å¢ƒå˜é‡æ²¡æœ‰é…ç½®ï¼ˆé€ æˆé—ªé€€æƒ…å†µï¼‰</li><li>é—ªé€€é—®é¢˜ï¼šéœ€è¦é…ç½®å…¼å®¹æ€§</li><li>ä¹±ç é—®é¢˜ï¼šé…ç½®æ–‡ä»¶ä¸­è®¾ç½®ï¼ˆå°½é‡ä¸è¦æ”¹åŠ¨startup.batæ–‡ä»¶çš„å†…å®¹ï¼‰</li></ol><h3 id="3-3-é…ç½®"><a href="#3-3-é…ç½®" class="headerlink" title="3.3 é…ç½®"></a>3.3 é…ç½®</h3><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/tomcat_coreConfig.png" alt="tomcatæ ¸å¿ƒé…ç½®æ–‡ä»¶"></p><p><strong>å¯ä»¥é…ç½®å¯åŠ¨çš„ç«¯å£å·</strong></p><ul><li><p>tomcatçš„é»˜è®¤ç«¯å£å·ä¸ºï¼š8080</p></li><li><p>mysqlï¼š3306</p></li><li><p>httpï¼š80</p></li><li><p>httpsï¼š443</p></li><li><pre><code class="c">    &lt;Connector port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot;               connectionTimeout=&quot;20000&quot;               redirectPort=&quot;8443&quot; /&gt;<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><br>**å¯ä»¥é…ç½®å¯åŠ¨çš„åç§°**<br><br>+ é»˜è®¤çš„ä¸»æœºåä¸ºï¼šlocalhost-&gt;127.0.0.1<br><br>+ é»˜è®¤ç½‘ç«™åº”ç”¨å­˜æ”¾çš„ä½ç½®ä¸ºï¼šwebapps<br><br>+ ```c<br>  &lt;Host <span class="hljs-attribute">name</span>=<span class="hljs-string">&quot;localhost&quot;</span>  <span class="hljs-attribute">appBase</span>=<span class="hljs-string">&quot;webapps&quot;</span><br>             <span class="hljs-attribute">unpackWARs</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attribute">autoDeploy</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;<br></code></pre></td></tr></table></figure></code></pre></li></ul><p><strong>é«˜éš¾åº¦é¢è¯•é¢˜</strong>ï¼šè¯·ä½ è°ˆä¸€è°ˆç½‘ç«™æ˜¯å¦‚ä½•è¿›è¡Œè®¿é—®çš„ï¼</p><ol><li><p>è¾“å…¥ä¸€ä¸ªåŸŸåï¼šå›è½¦</p></li><li><p>æ£€æŸ¥æœ¬æœºçš„C:\Windows\System32\dirvers\etc\hostsé…ç½®æ–‡ä»¶ä¸‹æœ‰æ²¡æœ‰è¿™ä¸ªåŸŸåçš„æ˜ å°„</p><ol><li><p>æœ‰ï¼šç›´æ¥è¿”å›å¯¹åº”çš„ipåœ°å€ï¼Œè¿™ä¸ªåœ°å€ä¸­ï¼Œæœ‰æˆ‘ä»¬éœ€è¦è®¿é—®çš„webç¨‹åºï¼Œå¯ä»¥ç›´æ¥è®¿é—®</p></li><li><p>æ— ï¼šå»DNSæœåŠ¡å™¨æ‰¾ï¼Œæ‰¾åˆ°çš„è¯å°±è¿”å›ï¼Œæ‰¾ä¸åˆ°å°±è¿”å›æ‰¾ä¸åˆ°ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/websiteRequest.png" alt="ç½‘ç«™çš„è®¿é—®"></p></li></ol></li></ol><h3 id="3-4-å‘å¸ƒä¸€ä¸ªwebç½‘ç«™"><a href="#3-4-å‘å¸ƒä¸€ä¸ªwebç½‘ç«™" class="headerlink" title="3.4 å‘å¸ƒä¸€ä¸ªwebç½‘ç«™"></a>3.4 å‘å¸ƒä¸€ä¸ªwebç½‘ç«™</h3><ul><li>å°†è‡ªå·±å†™çš„ç½‘ç«™ï¼Œæ”¾åˆ°æœåŠ¡å™¨ï¼ˆTomcatï¼‰ä¸­æŒ‡å®šçš„webåº”ç”¨çš„æ–‡ä»¶å¤¹ï¼ˆwebappsï¼‰ä¸‹ï¼Œå°±å¯ä»¥è®¿é—®äº†</li></ul><p>ç½‘ç«™åº”è¯¥æœ‰çš„ç»“æ„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java">--webapps : TomcatæœåŠ¡å™¨çš„webç›®å½•<br>    -Root<br>    -atroxStudy : ç½‘ç«™çš„ç›®å½•å<br>        -WEB-INF<br>        -classes : javaç¨‹åº<br>            -lib : webåº”ç”¨æ‰€ä¾èµ–çš„jaråŒ…<br>        -web.xml<br>        -index.html é»˜è®¤çš„é¦–é¡µ<br>        -<span class="hljs-keyword">static</span><br>            -css<br>                -style.css<br>            -js<br>            -img<br>        -â€¦â€¦<br></code></pre></td></tr></table></figure><h2 id="4-Http"><a href="#4-Http" class="headerlink" title="4. Http"></a>4. Http</h2><h3 id="4-1-ä»€ä¹ˆæ˜¯HTTP"><a href="#4-1-ä»€ä¹ˆæ˜¯HTTP" class="headerlink" title="4.1 ä»€ä¹ˆæ˜¯HTTP"></a>4.1 ä»€ä¹ˆæ˜¯HTTP</h3><p>httpï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰æ˜¯ä¸€ä¸ªç®€å•çš„è¯·æ±‚-å“åº”åè®®ï¼Œå®ƒé€šå¸¸è¿è¡Œåœ¨<a href="https://baike.baidu.com/item/TCP/33012">TCP</a>ä¹‹ä¸Šã€‚</p><ul><li>æ–‡æœ¬ï¼šhtmlã€å­—ç¬¦ä¸²ã€â€¦â€¦</li><li>è¶…æ–‡æœ¬ï¼šå›¾ç‰‡ã€éŸ³ä¹ã€è§†é¢‘ã€å®šä½ã€åœ°å›¾â€¦â€¦</li><li>Httpé»˜è®¤ç«¯å£80</li></ul><p>Httpsï¼šå®‰å…¨çš„</p><ul><li>Httpsé»˜è®¤ç«¯å£443</li></ul><h3 id="4-2-ä¸¤ä¸ªæ—¶ä»£"><a href="#4-2-ä¸¤ä¸ªæ—¶ä»£" class="headerlink" title="4.2 ä¸¤ä¸ªæ—¶ä»£"></a>4.2 ä¸¤ä¸ªæ—¶ä»£</h3><ul><li>http1.0<ul><li>HTTP/1.0ï¼šå®¢æˆ·ç«¯å¯ä»¥äºwebæœåŠ¡å™¨è¿æ¥ï¼Œåªèƒ½è·å¾—ä¸€ä¸ªwebèµ„æºï¼Œæ–­å¼€è¿æ¥</li></ul></li><li>http2.0<ul><li>HTTP/1.1ï¼šå®¢æˆ·ç«¯å¯ä»¥äºwebæœåŠ¡å™¨è¿æ¥ï¼Œå¯ä»¥è·å¾—å¤šä¸ªwebèµ„æºã€‚</li></ul></li></ul><h3 id="4-3-Httpè¯·æ±‚"><a href="#4-3-Httpè¯·æ±‚" class="headerlink" title="4.3 Httpè¯·æ±‚"></a>4.3 Httpè¯·æ±‚</h3><ul><li>å®¢æˆ·ç«¯â€“å‘è¯·æ±‚ï¼ˆRequestï¼‰â€“æœåŠ¡å™¨</li></ul><p>ç™¾åº¦ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">Request URL: https:<span class="hljs-comment">//www.baidu.com/  è¯·æ±‚åœ°å€</span><br>Request Method: GET   getæ–¹æ³•/postæ–¹æ³•<br>Status Code: <span class="hljs-number">200</span> OK   çŠ¶æ€ç ï¼š<span class="hljs-number">200</span><br>Remote Address: <span class="hljs-number">39.156</span><span class="hljs-number">.66</span><span class="hljs-number">.18</span>:<span class="hljs-number">443</span>  <br>Referrer Policy: no-referrer-when-downgrade<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">Accept: text/html<br>Accept-Encoding: gzip, deflate, br<br>Accept-Language: zh-CN,zh;q=<span class="hljs-number">0.9</span><br>Cache-Control: max-age=<span class="hljs-number">0</span><br>Connection: keep-alive<br></code></pre></td></tr></table></figure><h4 id="4-3-1-è¯·æ±‚è¡Œ"><a href="#4-3-1-è¯·æ±‚è¡Œ" class="headerlink" title="4.3.1 è¯·æ±‚è¡Œ"></a>4.3.1 è¯·æ±‚è¡Œ</h4><ul><li>è¯·æ±‚è¡Œä¸­çš„è¯·æ±‚æ–¹å¼ï¼šGET</li><li>è¯·æ±‚æ–¹å¼ï¼š<strong>GET/POST</strong>/HEAD/DELETE/PUT/TRACT<ul><li>getï¼šè¯·æ±‚èƒ½å¤Ÿæºå¸¦çš„å‚æ•°æ¯”è¾ƒå°‘ï¼Œå¤§å°æœ‰é™åˆ¶ï¼Œ<strong>ä¼šåœ¨æµè§ˆå™¨çš„URLåœ°å€æ æ˜¾ç¤ºæ•°æ®å†…å®¹</strong>ï¼Œä¸å®‰å…¨ï¼Œä½†é«˜æ•ˆ</li><li>postï¼šè¯·æ±‚èƒ½å¤Ÿæºå¸¦çš„å‚æ•°æ²¡æœ‰é™åˆ¶ï¼Œå¤§å°æ²¡æœ‰é™åˆ¶ï¼Œ<strong>ä¸ä¼šåœ¨æµè§ˆå™¨çš„URLåœ°å€æ æ˜¾ç¤ºæ•°æ®å†…å®¹</strong>ï¼Œå®‰å…¨ï¼Œä½†ä¸é«˜æ•ˆ</li></ul></li></ul><h4 id="4-3-2-æ¶ˆæ¯å¤´"><a href="#4-3-2-æ¶ˆæ¯å¤´" class="headerlink" title="4.3.2 æ¶ˆæ¯å¤´"></a>4.3.2 æ¶ˆæ¯å¤´</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java">Accept: å‘Šè¯‰æµè§ˆå™¨ï¼Œå®ƒæ‰€æ”¯æŒçš„æ•°æ®ç±»å‹<br>Accept-Encoding: æ”¯æŒå“ªç§å“ªç§ç¼–ç æ ¼å¼ GBK UTF-<span class="hljs-number">8</span> GB2312 ISO8859-<span class="hljs-number">1</span><br>Accept-Language: å‘Šè¯‰æµè§ˆå™¨ï¼Œå®ƒçš„è¯­è¨€ç¯å¢ƒ<br>Cache-Control: ç¼“å­˜æ§åˆ¶<br>Connection: å‘Šè¯‰æµè§ˆå™¨ï¼Œè¯·æ±‚å®Œæ˜¯æ–­å¼€è¿˜æ˜¯ä¿æŒè¿æ¥<br>HOSTï¼š ä¸»æœºâ€¦â€¦/.<br></code></pre></td></tr></table></figure><h3 id="4-4-Httpå“åº”"><a href="#4-4-Httpå“åº”" class="headerlink" title="4.4 Httpå“åº”"></a>4.4 Httpå“åº”</h3><ul><li>æœåŠ¡å™¨â€“å“åº”â€“å®¢æˆ·ç«¯</li></ul><p>ç™¾åº¦ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">Cache-Control: <span class="hljs-keyword">private</span>                  ç¼“å­˜æ§åˆ¶<br>Connection: keep-alive                  è¿æ¥<br>Content-Encoding: gzip                  ç¼–ç <br>Content-Type: text/html;charset=utf-<span class="hljs-number">8</span>   ç±»å‹<br></code></pre></td></tr></table></figure><h4 id="4-4-1-å“åº”ä½“"><a href="#4-4-1-å“åº”ä½“" class="headerlink" title="4.4.1 å“åº”ä½“"></a>4.4.1 å“åº”ä½“</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java">Accept: å‘Šè¯‰æµè§ˆå™¨ï¼Œå®ƒæ‰€æ”¯æŒçš„æ•°æ®ç±»å‹<br>Accept-Encoding: æ”¯æŒå“ªç§å“ªç§ç¼–ç æ ¼å¼ GBK UTF-<span class="hljs-number">8</span> GB2312 ISO8859-<span class="hljs-number">1</span><br>Accept-Language: å‘Šè¯‰æµè§ˆå™¨ï¼Œå®ƒçš„è¯­è¨€ç¯å¢ƒ<br>Cache-Control: ç¼“å­˜æ§åˆ¶<br>Connection: å‘Šè¯‰æµè§ˆå™¨ï¼Œè¯·æ±‚å®Œæ˜¯æ–­å¼€è¿˜æ˜¯ä¿æŒè¿æ¥<br>HOSTï¼š ä¸»æœºâ€¦â€¦/.<br>Reflesh: å‘Šè¯‰å®¢æˆ·ç«¯ï¼Œå¤šä¹…åˆ·æ–°ä¸€æ¬¡<br>Location: è®©ç½‘é¡µé‡æ–°å®šä½<br></code></pre></td></tr></table></figure><h3 id="4-4-2-ç›¸åº”çŠ¶æ€ç "><a href="#4-4-2-ç›¸åº”çŠ¶æ€ç " class="headerlink" title="4.4.2 ç›¸åº”çŠ¶æ€ç "></a>4.4.2 ç›¸åº”çŠ¶æ€ç </h3><p><strong>200</strong>ï¼šè¯·æ±‚å“åº”æˆåŠŸ </p><p><strong>3xx</strong>ï¼šè¯·æ±‚é‡å®šå‘</p><ul><li>é‡å®šå‘ï¼šä½ é‡æ–°åˆ°æˆ‘ç»™ä½ çš„æ–°ä½ç½®å»</li></ul><p><strong>4xx</strong>ï¼šæ‰¾ä¸åˆ°èµ„æº 404</p><ul><li>èµ„æºä¸å­˜åœ¨</li></ul><p><strong>5xx</strong>ï¼šæœåŠ¡å™¨ä»£ç é”™è¯¯ 500   502ï¼šç½‘å…³é”™è¯¯</p><p><strong>å¸¸è§é¢è¯•é¢˜ï¼š</strong>å½“ä½ çš„æµè§ˆå™¨ä¸­åœ°å€æ è¾“å…¥åœ°å€å¹¶å›è½¦çš„ä¸€ç¬é—´åˆ°é¡µé¢èƒ½å¤Ÿå±•ç¤ºå›æ¥ï¼Œç»å†äº†ä»€ä¹ˆï¼Ÿ</p><h2 id="5-Maven"><a href="#5-Maven" class="headerlink" title="5.Maven"></a>5.Maven</h2><h3 id="5-1-ä¸ºä»€ä¹ˆè¦å­¦ä¹ Mavenï¼Ÿ"><a href="#5-1-ä¸ºä»€ä¹ˆè¦å­¦ä¹ Mavenï¼Ÿ" class="headerlink" title="5.1 ä¸ºä»€ä¹ˆè¦å­¦ä¹ Mavenï¼Ÿ"></a>5.1 ä¸ºä»€ä¹ˆè¦å­¦ä¹ Mavenï¼Ÿ</h3><ol><li>åœ¨JavaWebå¼€å‘ä¸­ï¼Œéœ€è¦ä½¿ç”¨å¤§é‡çš„jaråŒ…ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å»å¯¼å…¥ï¼›</li><li>å¦‚ä½•èƒ½å¤Ÿè®©ä¸€ä¸ªä¸œè¥¿è‡ªåŠ¨å¸®æˆ‘å¯¼å…¥å’Œé…ç½®è¿™ä¸ªjaråŒ…ï¼›</li><li>ç”±æ­¤ï¼ŒMavenè¯ç”Ÿäº†ï¼</li></ol><h3 id="5-2-Mavené¡¹ç›®æ¶æ„ç®¡ç†å·¥å…·"><a href="#5-2-Mavené¡¹ç›®æ¶æ„ç®¡ç†å·¥å…·" class="headerlink" title="5.2 Mavené¡¹ç›®æ¶æ„ç®¡ç†å·¥å…·"></a>5.2 Mavené¡¹ç›®æ¶æ„ç®¡ç†å·¥å…·</h3><p>æˆ‘ä»¬ç›®å‰ç”¨æ¥å°±æ˜¯æ–¹ä¾¿å¯¼å…¥jaråŒ…çš„ï¼</p><p>Mavençš„æ ¸å¿ƒæ€æƒ³ï¼š<strong>çº¦å®šå¤§äºé…ç½®</strong></p><ul><li>æœ‰çº¦æŸï¼Œä¸è¦å»è¿åã€‚</li></ul><p>Mavenä¼šè§„å®šå¥½è¯¥å¦‚ä½•å»ç¼–å†™æˆ‘ä»¬çš„Javaä»£ç ï¼Œå¿…é¡»è¦æŒ‰ç…§è¿™ä¸ªè§„èŒƒæ¥ï¼›</p><h3 id="5-3-ä¸‹è½½å®‰è£…Maven"><a href="#5-3-ä¸‹è½½å®‰è£…Maven" class="headerlink" title="5.3 ä¸‹è½½å®‰è£…Maven"></a>5.3 ä¸‹è½½å®‰è£…Maven</h3><p>å®˜ç½‘åœ°å€ï¼š<a href="http://maven.apache.org/">http://maven.apache.org/</a></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/maven_download.png" alt="mavenä¸‹è½½"></p><p>ä¸‹è½½å®Œæˆåï¼Œè§£å‹å³å¯ï¼š</p><h3 id="5-4-é…ç½®ç¯å¢ƒå˜é‡"><a href="#5-4-é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="5.4 é…ç½®ç¯å¢ƒå˜é‡"></a>5.4 é…ç½®ç¯å¢ƒå˜é‡</h3><p>åœ¨æˆ‘ä»¬çš„ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­ï¼Œé…ç½®å¦‚ä¸‹é…ç½®ï¼š</p><ul><li>M2_HOME  mavenç›®å½•ä¸‹çš„binç›®å½•</li><li>MAVEN_HOME mavençš„ç›®å½•</li><li>åœ¨ç³»ç»Ÿçš„pathä¸­é…ç½® %MAVEN_HOME%\bin</li></ul><p>cmd maven -væµ‹è¯•Mavenæ˜¯å¦å®‰è£…æˆåŠŸï¼Œä¿è¯å¿…é¡»é…ç½®å®Œæ¯•ï¼</p><h3 id="5-5-é˜¿é‡Œäº‘é•œåƒ"><a href="#5-5-é˜¿é‡Œäº‘é•œåƒ" class="headerlink" title="5.5 é˜¿é‡Œäº‘é•œåƒ"></a>5.5 é˜¿é‡Œäº‘é•œåƒ</h3><ul><li><p>é•œåƒï¼šmirrors</p><ul><li>ä½œç”¨ï¼šåŠ é€Ÿæˆ‘ä»¬çš„ä¸‹è½½</li></ul></li><li><p>å›½å†…å»ºè®®ä½¿ç”¨é˜¿é‡Œäº‘çš„é•œåƒ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">mirrors</span>&gt;</span><br>ã€€ã€€<span class="hljs-tag">&lt;<span class="hljs-name">mirror</span>&gt;</span><br>ã€€ã€€ã€€ã€€<span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>alimaven<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>ã€€ã€€ã€€ã€€<span class="hljs-tag">&lt;<span class="hljs-name">mirrorOf</span>&gt;</span>central<span class="hljs-tag">&lt;/<span class="hljs-name">mirrorOf</span>&gt;</span><br>ã€€ã€€ã€€ã€€<span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>aliyun maven<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>ã€€ã€€ã€€ã€€<span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span><br>ã€€ã€€<span class="hljs-tag">&lt;/<span class="hljs-name">mirror</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mirrors</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="5-6-æœ¬åœ°ä»“åº“"><a href="#5-6-æœ¬åœ°ä»“åº“" class="headerlink" title="5.6 æœ¬åœ°ä»“åº“"></a>5.6 æœ¬åœ°ä»“åº“</h3><p>åœ¨æœ¬åœ°çš„ä»“åº“ï¼Œè¿œç¨‹ä»“åº“</p><p>å»ºç«‹ä¸€ä¸ªä»“åº“ï¼Œåœ¨é…ç½®æ–‡ä»¶setting.xmlä¸­</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">localRepository</span>&gt;</span>D:\SOMETOOLS\maven\apache-maven-3.6.3<span class="hljs-tag">&lt;/<span class="hljs-name">localRepository</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="5-7-åœ¨IDEAä¸­ä½¿ç”¨Maven"><a href="#5-7-åœ¨IDEAä¸­ä½¿ç”¨Maven" class="headerlink" title="5.7 åœ¨IDEAä¸­ä½¿ç”¨Maven"></a>5.7 åœ¨IDEAä¸­ä½¿ç”¨Maven</h3><p>1.å¯åŠ¨IDEA</p><p>2.åˆ›å»ºä¸€ä¸ªMavenWebé¡¹ç›®</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/new_maven_project.png" alt="åˆ›å»ºä¸€ä¸ªMavenWebé¡¹ç›®"></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/maven_gav.png" alt="mavençš„gav"></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/maven_config.png" alt="mavenåœ°å€è®¾ç½®"></p><p>å…¶ä¸­Bundledçš„ä¸ºideaè‡ªå¸¦çš„mavenè®¾ç½®ã€‚</p><p>3.ç­‰å¾…åˆå§‹åŒ–mavené¡¹ç›®å®Œæ¯•</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/maven_project_init.png" alt="mavenè‡ªåŠ¨å¯¼åŒ…"></p><p>4.è§‚å¯ŸMavenä»“åº“ä¸­å¤šäº†ä»€ä¹ˆä¸œè¥¿ï¼Ÿ</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/add_maven_repo.png" alt="mavenä»“åº“ä¸­æ–°å¢çš„åŒ…"></p><p>5.IDEAä¸­çš„Mavenè®¾ç½®</p><p>â€‹    æ³¨æ„ï¼šIDEAé¡¹ç›®åˆ›å»ºæˆåŠŸåï¼Œçœ‹ä¸€çœ¼Mavençš„é…ç½®</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/idea_maven_settings.png" alt="IDEAä¸­çš„Mavenè®¾ç½®"></p><p>6.åˆ°è¿™é‡Œï¼ŒMavenåœ¨IDEAä¸­çš„è®¾ç½®å’Œä½¿ç”¨å°±å®Œæ¯•äº†ï¼</p><h3 id="5-8-åˆ›å»ºä¸€ä¸ªæ™®é€šçš„Mavené¡¹ç›®"><a href="#5-8-åˆ›å»ºä¸€ä¸ªæ™®é€šçš„Mavené¡¹ç›®" class="headerlink" title="5.8 åˆ›å»ºä¸€ä¸ªæ™®é€šçš„Mavené¡¹ç›®"></a>5.8 åˆ›å»ºä¸€ä¸ªæ™®é€šçš„Mavené¡¹ç›®</h3><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/primary_maven_project_step1.png" alt="ç¬¬ä¸€æ­¥"></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/clean_maven_project.png" alt="å¹²å‡€çš„mavené¡¹ç›®"></p><h3 id="5-9-åœ¨IDEAä¸­æ ‡è®°æ–‡ä»¶å¤¹åŠŸèƒ½"><a href="#5-9-åœ¨IDEAä¸­æ ‡è®°æ–‡ä»¶å¤¹åŠŸèƒ½" class="headerlink" title="5.9 åœ¨IDEAä¸­æ ‡è®°æ–‡ä»¶å¤¹åŠŸèƒ½"></a>5.9 åœ¨IDEAä¸­æ ‡è®°æ–‡ä»¶å¤¹åŠŸèƒ½</h3><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/mark_directory.png" alt="æ ‡è®°æ–‡ä»¶å¤¹åŠŸèƒ½"></p><p>æˆ–è€…é‡‡ç”¨ç¬¬äºŒç§æ–¹å¼</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/mark_directory2.png" alt="æ ‡è®°æ–‡ä»¶å¤¹åŠŸèƒ½çš„ç¬¬äºŒç§æ–¹å¼"></p><h3 id="5-10-åœ¨IDEAä¸­é…ç½®Tomcat"><a href="#5-10-åœ¨IDEAä¸­é…ç½®Tomcat" class="headerlink" title="5.10 åœ¨IDEAä¸­é…ç½®Tomcat"></a>5.10 åœ¨IDEAä¸­é…ç½®Tomcat</h3><p>ç¬¬ä¸€æ­¥ï¼šåœ¨runä¸­æ‰¾åˆ°edit configuration</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/idea_select_tomcat.png" alt="æ‰¾åˆ°tomcat server"></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/tomcat_idea_config.png" alt="æ–°å»ºä¸€ä¸ªtemplate"></p><p>è§£å†³è­¦å‘Šé—®é¢˜</p><p>å¿…é¡»è¦åšçš„é…ç½®ï¼š<strong>ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬è®¿é—®ä¸€ä¸ªç½‘ç«™ï¼Œéœ€è¦åˆ¶å®šä¸€ä¸ªæ–‡ä»¶å¤¹åå­—ï¼›</strong></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/tomcat_idea_artifacts.png" alt="æ–°å»ºartifacts"></p><p>ç„¶åï¼Œéœ€è¦åšè™šæ‹Ÿè·¯å¾„æ˜ å°„çš„è®¾ç½®</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/tomcat_virtual_path.png" alt="è™šæ‹Ÿè·¯å¾„æ˜ å°„"></p><p>ç„¶åï¼Œå¯åŠ¨Tomcat</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/idea_start_tomcat.png" alt="ideaå¯åŠ¨Tomcat"></p><p>å¯åŠ¨å®Œæˆåï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€localhost:8080/atrox/</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/idea_tomcat_run.png" alt="tomcatå¯åŠ¨æƒ…å†µ"></p><p>mavenä¾§è¾¹æ çš„è®²è§£ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/maven_sidebar.png" alt="mavenä¾§è¾¹æ çš„æ¢³ç†"></p><h3 id="5-11-pomæ–‡ä»¶"><a href="#5-11-pomæ–‡ä»¶" class="headerlink" title="5.11 pomæ–‡ä»¶"></a>5.11 pomæ–‡ä»¶</h3><p>pom.xml æ˜¯mavençš„æ ¸å¿ƒæ–‡ä»¶ï¼Œè§£æå¦‚ä¸‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><br><span class="hljs-comment">&lt;!--Mavenç‰ˆæœ¬å’Œå¤´æ–‡ä»¶--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br><br>  <span class="hljs-comment">&lt;!--è¿™é‡Œå°±æ˜¯åˆšæ‰é…ç½®çš„GAV--&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.atrox<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>javaweb-01-maven<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><br>  <span class="hljs-comment">&lt;!--Packageï¼šé¡¹ç›®çš„æ‰“åŒ…æ–¹å¼</span><br><span class="hljs-comment">  jar: javaåº”ç”¨</span><br><span class="hljs-comment">  warï¼šjavaWebåº”ç”¨--&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>war<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>javaweb-01-maven Maven Webapp<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- FIXME change it to the project&#x27;s website --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://www.example.com<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span><br><br>  <span class="hljs-comment">&lt;!--é…ç½®--&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--é¡¹ç›®çš„é»˜è®¤æ„å»ºç¼–ç --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--ç¼–è¯‘ç‰ˆæœ¬--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>1.7<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>1.7<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><br>  <span class="hljs-comment">&lt;!--é¡¹ç›®ä¾èµ–--&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--å…·ä½“ä¾èµ–çš„jaråŒ…é…ç½®æ–‡ä»¶--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.11<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><br>  <span class="hljs-comment">&lt;!--é¡¹ç›®æ„å»ºç”¨çš„ä¸œè¥¿--&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">finalName</span>&gt;</span>javaweb-01-maven<span class="hljs-tag">&lt;/<span class="hljs-name">finalName</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">pluginManagement</span>&gt;</span><span class="hljs-comment">&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-clean-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_war_packaging --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-resources-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.8.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.22.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-war-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.2.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-install-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-deploy-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.8.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">pluginManagement</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>mavenç”±äºå®ƒçš„çº¦å®šå¤§äºé…ç½®ï¼Œä¹‹åå¯èƒ½ä¼šæˆ‘ä»¬å†™çš„é…ç½®æ–‡ä»¶ï¼Œæ— æ³•è¢«å¯¼å‡ºæˆ–è€…ç”Ÿæ•ˆçš„é—®é¢˜ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="5-12-è§£å†³é‡åˆ°çš„é—®é¢˜"><a href="#5-12-è§£å†³é‡åˆ°çš„é—®é¢˜" class="headerlink" title="5.12 è§£å†³é‡åˆ°çš„é—®é¢˜"></a>5.12 è§£å†³é‡åˆ°çš„é—®é¢˜</h3><p>1.Maven 3.6.2 æ— æ³•å¯¼åŒ…</p><p>â€‹    <strong>è§£å†³æ–¹æ³•</strong>ï¼šé™çº§ä¸º3.6.1</p><p>2.Tomcaté—ªé€€</p><p>â€‹    <strong>è§£å†³åŠæ³•</strong>ï¼šé‡æ–°é…ç½®javaçš„ç¯å¢ƒå˜é‡</p><p>3.IDEAä¸­æ¯æ¬¡éƒ½è¦é‡å¤é…ç½®Maven</p><p>â€‹    <strong>è§£å†³åŠæ³•</strong>ï¼šåœ¨IDEAä¸­çš„å…¨å±€é»˜è®¤é…ç½®ä¸­å»é…ç½®</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/idea_global_maven.png" alt="å…¨å±€é…ç½®maven"></p><p>4.Mavené»˜è®¤webé¡¹ç›®ä¸­çš„web.xmlç‰ˆæœ¬é—®é¢˜</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/idea_default_webxml.png" alt="ideaé»˜è®¤ç”Ÿæˆçš„web appliactionç‰ˆæœ¬"></p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šIDEAè‡ªå¸¦çš„è¿™ä¸ªç‰ˆæœ¬å¤ªè€ï¼Œåº”å‚è€ƒTomcatä¸­çš„æ–‡ä»¶Tomcat\apache-tomcat-9.0.41\webapps\ROOT\WEB-INF\web.xmlï¼ŒæŸ¥åˆ°æœ€ä½³ç‰ˆæœ¬ä¸º4.0,ï¼Œå°†IDEAä¸­çš„web.xmlæ›¿æ¢ä¸ºTomcatä¸­web.xmlçš„å†…å®¹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">web-app</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee</span></span><br><span class="hljs-tag"><span class="hljs-string">                      http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">version</span>=<span class="hljs-string">&quot;4.0&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">metadata-complete</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><p>5.Mavenä»“åº“çš„ä½¿ç”¨</p><p>Mavenä»“åº“å®˜ç½‘ï¼š<a href="https://mvnrepository.com/">https://mvnrepository.com/</a></p><h2 id="6-Servlet"><a href="#6-Servlet" class="headerlink" title="6. Servlet"></a>6. Servlet</h2><h3 id="6-1-Servletç®€ä»‹"><a href="#6-1-Servletç®€ä»‹" class="headerlink" title="6.1 Servletç®€ä»‹"></a>6.1 Servletç®€ä»‹</h3><ul><li><p>Servletå°±æ˜¯sunå…¬å¸å¼€å‘åŠ¨æ€webçš„ä¸€é—¨æŠ€æœ¯</p></li><li><p>Sunå…¬å¸åœ¨è¿™äº›APIä¸­æä¾›ä¸€ä¸ªæ¥å£ï¼Œå«åšï¼šServletï¼Œå¦‚æœä½ æƒ³å¼€å‘ä¸€ä¸ªServletç¨‹åºï¼Œåªéœ€è¦å®Œæˆä¸¤ä¸ªå°æ­¥éª¤ï¼š</p><ul><li>ç¼–å†™ä¸€ä¸ªç±»ï¼Œå®ç°Servletæ¥å£</li><li>æŠŠå¼€å‘å¥½çš„javaç±»éƒ¨ç½²åˆ°webæœåŠ¡å™¨ä¸­</li></ul></li></ul><p><strong>æŠŠå®ç°äº†Servletæ¥å£çš„javaç¨‹åºå«åšï¼ŒServlet</strong></p><h3 id="6-2-HelloServlet"><a href="#6-2-HelloServlet" class="headerlink" title="6.2 HelloServlet"></a>6.2 HelloServlet</h3><p>Servletæ¥å£åœ¨Sunå…¬å¸æœ‰ä¸¤ä¸ªé»˜è®¤çš„å®ç°ç±»ï¼šHttpServletã€GenericServlet</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/servlet_extends.png" alt="servletå®ç°æ¥å£"></p><ol><li><p>æ„å»ºä¸€ä¸ªæ™®é€šçš„Mavené¡¹ç›®ï¼Œåˆ æ‰é‡Œé¢çš„srcç›®å½•ï¼Œä»¥åå°±åœ¨è¿™ä¸ªé¡¹ç›®é‡Œé¢å»ºç«‹moduleï¼›è¿™ä¸ªç©ºçš„å·¥ç¨‹å°±æ˜¯Mavençš„ä¸»å·¥ç¨‹ï¼›</p></li><li><p>å…³äºMavençˆ¶å­å·¥ç¨‹çš„ç†è§£ï¼š</p><p>çˆ¶é¡¹ç›®ä¸­ä¼šæœ‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>servlet-01<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å­é¡¹ç›®ä¸­ä¼šæœ‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>javaweb-02-servlet<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.atrox<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br></code></pre></td></tr></table></figure><p>çˆ¶é¡¹ç›®ä¸­çš„javaå­é¡¹ç›®å¯ä»¥ç›´æ¥ä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">son extends parent<br></code></pre></td></tr></table></figure></li><li><p>Mavenç¯å¢ƒä¼˜åŒ–</p><ul><li>ä¿®æ”¹web.xmlä¸ºæœ€æ–°çš„</li><li>ç¼–å†™ä¸€ä¸ª</li></ul></li><li><p>ç¼–å†™ä¸€ä¸ªServletç¨‹åº</p><ul><li><p>ç¼–å†™ä¸€ä¸ªæ™®é€šç±»</p></li><li><p>å®ç°Servletæ¥å£ï¼Œè¿™é‡Œæˆ‘ä»¬ç›´æ¥ç»§æ‰¿HttpServlet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br><br>    <span class="hljs-comment">// ç”±äºgetæˆ–è€…poståªæ˜¯è¯·æ±‚å®ç°çš„ä¸åŒçš„æ–¹å¼ï¼Œå¯ä»¥ç›¸äº’è°ƒç”¨ï¼Œä¸šåŠ¡é€»è¾‘éƒ½ä¸€æ ·</span><br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-comment">// å“åº”æµ</span><br>        PrintWriter writer = resp.getWriter();<br><br>        writer.print(<span class="hljs-string">&quot;hello,Servlet&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-keyword">super</span>.doPost(req, resp);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul></li></ol><ol start="5"><li><p>ç¼–å†™Servletçš„æ˜ å°„</p><p>ä¸ºä»€ä¹ˆéœ€è¦æ˜ å°„ï¼šè¿™é‡Œå†™çš„æ˜¯Javaç¨‹åºï¼Œä½†æ˜¯è¦é€šè¿‡æµè§ˆå™¨è®¿é—®ï¼Œè€Œæµè§ˆå™¨éœ€è¦è¿æ¥webæœåŠ¡å™¨ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨webæœåŠ¡ä¸­æ³¨å†Œæˆ‘ä»¬å†™çš„Servletï¼Œè¿˜éœ€ç»™å®ƒä¸€ä¸ªæµè§ˆå™¨èƒ½å¤Ÿè®¿é—®çš„è·¯å¾„ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"> <span class="hljs-comment">&lt;!--æ³¨å†ŒServlet--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.atrox.servlet.HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><span class="hljs-comment">&lt;!--Servletçš„è¯·æ±‚è·¯å¾„--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>é…ç½®Tomcat</p><p>æ³¨æ„ï¼šå¦‚æœæ·»åŠ artifactsæ¶ˆå¤±ï¼Œåˆ·æ–°ä¸€ä¸‹é¡¹ç›®</p></li><li><p>å¯åŠ¨æµ‹è¯•</p></li></ol><h3 id="6-3-Servletè¿è¡ŒåŸç†"><a href="#6-3-Servletè¿è¡ŒåŸç†" class="headerlink" title="6.3 Servletè¿è¡ŒåŸç†"></a>6.3 Servletè¿è¡ŒåŸç†</h3><p>Servletæ˜¯ç”±WebæœåŠ¡å™¨ï¼ˆTomcatï¼‰è°ƒç”¨çš„ï¼ŒwebæœåŠ¡å™¨åœ¨æ”¶åˆ°æµè§ˆå™¨è¯·æ±‚ä¼šåï¼Œä¼šï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/servlet_yuanli.png" alt="Servletè¿è¡ŒåŸç†"></p><h3 id="6-4-Mappingé—®é¢˜"><a href="#6-4-Mappingé—®é¢˜" class="headerlink" title="6.4 Mappingé—®é¢˜"></a>6.4 Mappingé—®é¢˜</h3><ol><li><p>ä¸€ä¸ªServletå¯ä»¥æŒ‡å®šä¸€ä¸ªæ˜ å°„è·¯å¾„</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/hello<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>ä¸€ä¸ªServletå¯ä»¥æŒ‡å®šå¤šä¸ªæ˜ å°„è·¯å¾„</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/hello1<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/hello2<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/hello3<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>ä¸€ä¸ªServletå¯ä»¥æŒ‡å®šé€šç”¨æ˜ å°„è·¯å¾„</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/hello/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>é»˜è®¤è¯·æ±‚è·¯å¾„</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>æŒ‡å®šä¸€äº›åç¼€æˆ–è€…å‰ç¼€ç­‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å¯ä»¥è‡ªå®šä¹‰åç¼€å®ç°è¯·æ±‚æ˜ å°„--&gt;</span><br><span class="hljs-comment">&lt;!--æ³¨æ„ç‚¹ï¼š*å‰é¢ä¸èƒ½åŠ æ˜ å°„çš„è·¯å¾„--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>*.atrox<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>ä¼˜å…ˆçº§é—®é¢˜</p><p>åˆ¶å®šäº†å›ºæœ‰çš„æ˜ å°„è·¯å¾„ä¼˜å…ˆçº§æœ€é«˜ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±ä¼šæ‰¾é»˜è®¤çš„è¯·æ±‚è·¯å¾„å¤„ç†</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--404--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>error<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.atrox.servlet.ErrorServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>error<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ol><h3 id="6-5-ServletContext"><a href="#6-5-ServletContext" class="headerlink" title="6.5 ServletContext"></a>6.5 ServletContext</h3><p>webå®¹å™¨<strong>åœ¨å¯åŠ¨çš„æ—¶å€™</strong>ï¼Œå®ƒä¼šä¸ºæ¯ä¸ªwebç¨‹åºéƒ½åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ServletContextå¯¹è±¡ï¼Œå®ƒä»£è¡¨äº†å½“å‰çš„webåº”ç”¨ã€‚</p><h4 id="6-5-1-å…±äº«æ•°æ®"><a href="#6-5-1-å…±äº«æ•°æ®" class="headerlink" title="6.5.1 å…±äº«æ•°æ®"></a>6.5.1 å…±äº«æ•°æ®</h4><p>æˆ‘åœ¨è¿™ä¸ªServletä¸­ä¿å­˜çš„æ•°æ®ï¼Œå¯ä»¥åœ¨å¦å¤–ä¸€ä¸ªServletä¸­æ‹¿åˆ°</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/servletContext_shareData.png" alt="å…±äº«æ•°æ®"></p><p>æ”¾æ•°æ®çš„ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br><br>        <span class="hljs-comment">//        this.getInitParameter() åˆå§‹åŒ–å‚æ•°</span><br><br>        <span class="hljs-comment">//        this.getServletConfig() Servleté…ç½®</span><br><br>        <span class="hljs-comment">//        this.getServletContext() Servletä¸Šä¸‹æ–‡</span><br>        ServletContext context = <span class="hljs-keyword">this</span>.getServletContext();<br><br>        String userName = <span class="hljs-string">&quot;ä¹”å¨&quot;</span>; <span class="hljs-comment">// æ•°æ®</span><br>        context.setAttribute(<span class="hljs-string">&quot;userName&quot;</span>,userName); <span class="hljs-comment">//å°†ä¸€ä¸ªæ•°æ®ä¿å­˜åœ¨ServletContextä¸­ï¼Œkey:userName,value:userName</span><br><br>        System.out.println(<span class="hljs-string">&quot;Hello&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¯»æ•°æ®çš„ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GetServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br><br>        ServletContext context = <span class="hljs-keyword">this</span>.getServletContext();<br><br>        String userName = (String) context.getAttribute(<span class="hljs-string">&quot;userName&quot;</span>);<br><br>        resp.setContentType(<span class="hljs-string">&quot;text/html&quot;</span>);<br>        resp.setCharacterEncoding(<span class="hljs-string">&quot;utf-8&quot;</span>);<br>        resp.getWriter().print(userName);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ˜ å°„</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.atrox.servlet.HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/hello<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>getc<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.atrox.servlet.GetServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>getc<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/getc<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure><p>éœ€è¦å…ˆè®¿é—®/helloé¡µé¢ï¼Œè®©å®ƒæ”¾æ•°æ®ï¼Œå†è®¿é—®/getcé¡µé¢æ‹¿æ•°æ®ï¼Œå¦åˆ™å¦‚æœç›´æ¥è®¿é—®/getcé¡µé¢ï¼Œä¼šæ˜¾ç¤ºnull</p><h4 id="6-5-2-è·å–åˆå§‹åŒ–å‚æ•°"><a href="#6-5-2-è·å–åˆå§‹åŒ–å‚æ•°" class="headerlink" title="6.5.2 è·å–åˆå§‹åŒ–å‚æ•°"></a>6.5.2 è·å–åˆå§‹åŒ–å‚æ•°</h4><p>web.xmlä¸­</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--é…ç½®ä¸€äº›webåº”ç”¨åˆå§‹åŒ–å‚æ•°--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>url<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>jdbc:mysql://localhost:3306/mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">context-param</span>&gt;</span><br></code></pre></td></tr></table></figure><p>servlet-demoä¸­å–å‡ºè¿™äº›åˆå§‹åŒ–å‚æ•°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ServletDemo03</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HelloServlet</span></span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br><br>        ServletContext context = <span class="hljs-keyword">this</span>.getServletContext();<br>        String url = context.getInitParameter(<span class="hljs-string">&quot;url&quot;</span>);<br>        resp.getWriter().print(url);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="6-5-3-è¯·æ±‚è½¬å‘"><a href="#6-5-3-è¯·æ±‚è½¬å‘" class="headerlink" title="6.5.3 è¯·æ±‚è½¬å‘"></a>6.5.3 è¯·æ±‚è½¬å‘</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ServletDemo04</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br><br>        ServletContext context = <span class="hljs-keyword">this</span>.getServletContext();<br><br>        <span class="hljs-comment">// è½¬å‘çš„è¯·æ±‚è·¯å¾„</span><br>        <span class="hljs-comment">//        RequestDispatcher dispatcher = context.getRequestDispatcher(&quot;/demo3&quot;);</span><br>        <span class="hljs-comment">// è°ƒç”¨ forward æ–¹æ³•å®ç°è¯·æ±‚è½¬å‘</span><br>        <span class="hljs-comment">//        dispatcher.forward(req,resp);</span><br>        context.getRequestDispatcher(<span class="hljs-string">&quot;/demo3&quot;</span>).forward(req,resp);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/servletContext_request_dispather.png" alt="è¯·æ±‚è½¬å‘"></p><h4 id="6-5-4-è¯»å–èµ„æºæ–‡ä»¶"><a href="#6-5-4-è¯»å–èµ„æºæ–‡ä»¶" class="headerlink" title="6.5.4 è¯»å–èµ„æºæ–‡ä»¶"></a>6.5.4 è¯»å–èµ„æºæ–‡ä»¶</h4><p>Properties</p><ul><li>åœ¨javaç›®å½•ä¸‹æ–°å»ºproperties</li><li>åœ¨resourcesç›®å½•ä¸‹æ–°å»ºproperties</li></ul><p>å‘ç°ï¼šéƒ½è¢«æ‰“åŒ…åˆ°äº†åŒä¸€ä¸ªè·¯å¾„ä¸‹ï¼šclassesï¼Œä¿—ç§°è¿™ä¸ªè·¯å¾„ä¸ºclassPath</p><p>æ€è·¯ï¼šéœ€è¦ä¸€ä¸ªæ–‡ä»¶æµï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">username</span>=<span class="hljs-string">root</span><br><span class="hljs-attr">password</span>=<span class="hljs-string">zuiweizhiming666</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Servlet05</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br><br>        InputStream is = <span class="hljs-keyword">this</span>.getServletContext().getResourceAsStream(<span class="hljs-string">&quot;/WEB-INF/classes/db.properties&quot;</span>);<br><br>        Properties prop = <span class="hljs-keyword">new</span> Properties();<br>        prop.load(is);<br><br>        String username = prop.getProperty(<span class="hljs-string">&quot;username&quot;</span>);<br>        String password = prop.getProperty(<span class="hljs-string">&quot;password&quot;</span>);<br><br>        resp.getWriter().print(username + <span class="hljs-string">&quot;:&quot;</span> + password);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="6-6-HttpServletReponse"><a href="#6-6-HttpServletReponse" class="headerlink" title="6.6 HttpServletReponse"></a>6.6 HttpServletReponse</h3><p>webæœåŠ¡å™¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„httpè¯·æ±‚ï¼Œé’ˆå¯¹è¿™ä¸ªè¯·æ±‚ï¼Œåˆ†åˆ«åˆ›å»ºä¸€ä¸ªä»£è¡¨è¯·æ±‚çš„HttpServiceRequestå¯¹è±¡ï¼Œä»£è¡¨å“åº”çš„ä¸€ä¸ªHttpServletResponseï¼›</p><ul><li>å¦‚æœè¦è·å–å®¢æˆ·ç«¯è¯·æ±‚è¿‡æ¥çš„å‚æ•°ï¼šæ‰¾HttpServletRequest</li><li>å¦‚æœè¦ç»™å®¢æˆ·ç«¯å“åº”ä¸€äº›ä¿¡æ¯ï¼šæ‰¾HttpServletResponse</li></ul><h4 id="6-6-1-ç®€å•åˆ†ç±»"><a href="#6-6-1-ç®€å•åˆ†ç±»" class="headerlink" title="6.6.1 ç®€å•åˆ†ç±»"></a>6.6.1 ç®€å•åˆ†ç±»</h4><p><strong>è´Ÿè´£å‘æµè§ˆå™¨å‘é€æ•°æ®çš„æ–¹æ³•</strong>ï¼š</p><ul><li><pre><code class="java">// åœ¨HttpServletResponseç»§æ‰¿çš„ServletResponseä¸­çš„æ–¹æ³•ServletOutputStream getOutputStream() throws IOException;PrintWriter getWriter() throws IOException;<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><br>**è´Ÿè´£å‘æµè§ˆå™¨å‘é€å“åº”å¤´çš„æ–¹æ³•**<br><br>+ ```java<br>  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setCharacterEncoding</span><span class="hljs-params">(<span class="hljs-keyword">String</span> var1)</span></span>;<br>  <br>  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setContentLength</span><span class="hljs-params">(<span class="hljs-keyword">int</span> var1)</span></span>;<br>  <br>  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setContentLengthLong</span><span class="hljs-params">(<span class="hljs-keyword">long</span> var1)</span></span>;<br>  <br>  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setContentType</span><span class="hljs-params">(<span class="hljs-keyword">String</span> var1)</span></span>;<br>  <br>  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setStatus</span><span class="hljs-params">(<span class="hljs-keyword">int</span> var1)</span></span>;<br></code></pre></td></tr></table></figure></code></pre></li></ul><p><strong>çŠ¶æ€ç å®šä¹‰</strong></p><ul><li><pre><code class="java">int SC_CONTINUE = 100;int SC_SWITCHING_PROTOCOLS = 101;int SC_OK = 200;int SC_CREATED = 201;int SC_ACCEPTED = 202;int SC_NON_AUTHORITATIVE_INFORMATION = 203;int SC_NO_CONTENT = 204;int SC_RESET_CONTENT = 205;int SC_PARTIAL_CONTENT = 206;int SC_MULTIPLE_CHOICES = 300;int SC_MOVED_PERMANENTLY = 301;int SC_MOVED_TEMPORARILY = 302;int SC_FOUND = 302;int SC_SEE_OTHER = 303;int SC_NOT_MODIFIED = 304;int SC_USE_PROXY = 305;int SC_TEMPORARY_REDIRECT = 307;int SC_BAD_REQUEST = 400;int SC_UNAUTHORIZED = 401;int SC_PAYMENT_REQUIRED = 402;int SC_FORBIDDEN = 403;int SC_NOT_FOUND = 404;int SC_METHOD_NOT_ALLOWED = 405;int SC_NOT_ACCEPTABLE = 406;int SC_PROXY_AUTHENTICATION_REQUIRED = 407;int SC_REQUEST_TIMEOUT = 408;int SC_CONFLICT = 409;int SC_GONE = 410;int SC_LENGTH_REQUIRED = 411;int SC_PRECONDITION_FAILED = 412;int SC_REQUEST_ENTITY_TOO_LARGE = 413;int SC_REQUEST_URI_TOO_LONG = 414;int SC_UNSUPPORTED_MEDIA_TYPE = 415;int SC_REQUESTED_RANGE_NOT_SATISFIABLE = 416;int SC_EXPECTATION_FAILED = 417;int SC_INTERNAL_SERVER_ERROR = 500;int SC_NOT_IMPLEMENTED = 501;int SC_BAD_GATEWAY = 502;int SC_SERVICE_UNAVAILABLE = 503;int SC_GATEWAY_TIMEOUT = 504;int SC_HTTP_VERSION_NOT_SUPPORTED = 505;<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs scala"><br>#### <span class="hljs-number">6.6</span><span class="hljs-number">.2</span> å¸¸è§åº”ç”¨<br><br><span class="hljs-number">1.</span> å‘æµè§ˆå™¨è¾“å‡ºæ¶ˆæ¯ï¼ˆgetWriterå†printï¼‰<br><br>#### <span class="hljs-number">6.6</span><span class="hljs-number">.3</span> ä¸‹è½½æ–‡ä»¶<br><br><span class="hljs-number">1.</span> è¦è·å–ä¸‹è½½æ–‡ä»¶çš„è·¯å¾„<br><span class="hljs-number">2.</span> ä¸‹è½½çš„æ–‡ä»¶åæ˜¯å•¥<br><span class="hljs-number">3.</span> è®¾ç½®æƒ³åŠæ³•è®©æµè§ˆå™¨èƒ½å¤Ÿæ”¯æŒä¸‹è½½éœ€è¦çš„ä¸œè¥¿<br><span class="hljs-number">4.</span> è·å–ä¸‹è½½æ–‡ä»¶çš„è¾“å…¥æµ<br><span class="hljs-number">5.</span> åˆ›å»ºç¼“å†²åŒºbuffer<br><span class="hljs-number">6.</span> è·å–<span class="hljs-type">OutputStream</span>å¯¹è±¡<br><span class="hljs-number">7.</span> å°†<span class="hljs-type">FileInputStream</span>æµå†™å…¥åˆ°bufferç¼“å†²åŒº<br><span class="hljs-number">8.</span> ä½¿ç”¨<span class="hljs-type">OutputStream</span>å°†ç¼“å†²åŒºä¸­çš„æ•°æ®è¾“å‡ºåˆ°å®¢æˆ·ç«¯<br><br><span class="hljs-type">Java</span>æ–‡ä»¶ä¸‹è½½ä»£ç <br><br>```java<br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FileServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> void doGet(<span class="hljs-type">HttpServletRequest</span> req, <span class="hljs-type">HttpServletResponse</span> resp) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span> &#123;<br>        <span class="hljs-comment">//    1. è¦è·å–ä¸‹è½½æ–‡ä»¶çš„è·¯å¾„</span><br>        <span class="hljs-type">String</span> path = <span class="hljs-string">&quot;F:\\360MoveData\\Users\\M\\Desktop\\å­¦ä¹ \\JavaWebStudy\\javaweb-02-servlet\\response\\target\\classes\\å¼¹å¹•.png&quot;</span>;<br>        <span class="hljs-type">System</span>.out.println(<span class="hljs-string">&quot;ä¸‹è½½æ–‡ä»¶çš„è·¯å¾„ä¸ºï¼š&quot;</span> + path);<br>        <span class="hljs-comment">//    2. ä¸‹è½½çš„æ–‡ä»¶åæ˜¯å•¥</span><br>        <span class="hljs-type">String</span> fileName = path.substring(path.lastIndexOf(<span class="hljs-string">&quot;//&quot;</span>) + <span class="hljs-number">1</span>);<br>        <span class="hljs-comment">//    3. è®¾ç½®æƒ³åŠæ³•è®©æµè§ˆå™¨èƒ½å¤Ÿæ”¯æŒ(Content-Disposition)ä¸‹è½½éœ€è¦çš„ä¸œè¥¿ï¼Œä¸­æ–‡æ–‡ä»¶æ˜URLEncoder.encodeç¼–ç ï¼Œå¦åˆ™å¯èƒ½æœ‰ä¹±ç </span><br>        resp.setHeader(<span class="hljs-string">&quot;Content-Disposition&quot;</span>,<span class="hljs-string">&quot;attachment;filename=&quot;</span> + <span class="hljs-type">URLEncoder</span>.encode(fileName,<span class="hljs-string">&quot;UTF-8&quot;</span>));<br>        <span class="hljs-comment">//    4. è·å–ä¸‹è½½æ–‡ä»¶çš„è¾“å…¥æµ</span><br>        <span class="hljs-type">FileInputStream</span> fis = <span class="hljs-keyword">new</span> <span class="hljs-type">FileInputStream</span>(path);<br>        <span class="hljs-comment">//    5. åˆ›å»ºç¼“å†²åŒºbuffer</span><br>        int len = <span class="hljs-number">0</span>;<br>        byte[] buffer = <span class="hljs-keyword">new</span> byte[<span class="hljs-number">1024</span>];<br>        <span class="hljs-comment">//    6. è·å–OutputStreamå¯¹è±¡</span><br>        <span class="hljs-type">ServletOutputStream</span> os = resp.getOutputStream();<br>        <span class="hljs-comment">//    7. å°†FileInputStreamæµå†™å…¥åˆ°bufferç¼“å†²åŒº,ä½¿ç”¨OutputStreamå°†ç¼“å†²åŒºä¸­çš„æ•°æ®è¾“å‡ºåˆ°å®¢æˆ·ç«¯</span><br>        <span class="hljs-keyword">while</span> ((len = fis.read(buffer)) &gt;<span class="hljs-number">0</span>) &#123;<br>            os.write(buffer, <span class="hljs-number">0</span>, len);<br>        &#125;<br>        fis.close();<br>        os.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></code></pre></li></ul><h4 id="6-6-4-éªŒè¯ç åŠŸèƒ½"><a href="#6-6-4-éªŒè¯ç åŠŸèƒ½" class="headerlink" title="6.6.4 éªŒè¯ç åŠŸèƒ½"></a>6.6.4 éªŒè¯ç åŠŸèƒ½</h4><p>éªŒè¯ç ä»ä½•è€Œæ¥ï¼Ÿ</p><ul><li><p>å‰ç«¯å®ç°</p></li><li><p>åç«¯å®ç°ï¼Œéœ€è¦ç”¨åˆ° Java çš„å›¾ç‰‡ç±»ï¼Œç”Ÿäº§ä¸€ä¸ªå›¾ç‰‡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.atrox.servlet;<br><br><span class="hljs-keyword">import</span> javax.imageio.ImageIO;<br><span class="hljs-keyword">import</span> javax.servlet.ServletException;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><span class="hljs-keyword">import</span> javax.swing.*;<br><span class="hljs-keyword">import</span> java.awt.*;<br><span class="hljs-keyword">import</span> java.awt.image.BufferedImage;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.util.Random;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ImageServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br><br>        <span class="hljs-comment">// å¦‚ä½•è®©æµè§ˆå™¨3ç§’è‡ªåŠ¨åˆ·æ–°ä¸€æ¬¡</span><br>        resp.setHeader(<span class="hljs-string">&quot;refresh&quot;</span>, <span class="hljs-string">&quot;3&quot;</span>);<br>        <span class="hljs-comment">// åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªå›¾ç‰‡</span><br>        BufferedImage image = <span class="hljs-keyword">new</span> BufferedImage(<span class="hljs-number">80</span>,<span class="hljs-number">20</span>,BufferedImage.TYPE_INT_RGB);<br>        <span class="hljs-comment">// å¾—åˆ°å›¾ç‰‡</span><br>        Graphics2D graphics = (Graphics2D) image.getGraphics(); <span class="hljs-comment">//ç”»ç¬”</span><br>        <span class="hljs-comment">// è®¾ç½®å›¾ç‰‡çš„èƒŒæ™¯é¢œè‰²</span><br>        graphics.setColor(Color.white);<br>        graphics.fillRect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">80</span>, <span class="hljs-number">20</span>);<br>        <span class="hljs-comment">// ç»™å›¾ç‰‡å†™æ•°æ®</span><br>        graphics.setColor(Color.blue);<br>        graphics.setFont(<span class="hljs-keyword">new</span> Font(<span class="hljs-keyword">null</span>,Font.BOLD, <span class="hljs-number">20</span>));<br>        graphics.drawString(makeNum(), <span class="hljs-number">0</span>, <span class="hljs-number">20</span>);<br><br>        <span class="hljs-comment">// å‘Šè¯‰æµè§ˆå™¨ï¼Œè¿™ä¸ªè¯·æ±‚ç”¨å›¾ç‰‡çš„æ–¹å¼æ‰“å¼€</span><br>        resp.setContentType(<span class="hljs-string">&quot;image/jpeg&quot;</span>);<br>        <span class="hljs-comment">// ç½‘ç«™å­˜åœ¨ç¼“å­˜ï¼Œä¸è®©æµè§ˆå™¨ç¼“å­˜</span><br>        resp.setDateHeader(<span class="hljs-string">&quot;expires&quot;</span>, -<span class="hljs-number">1</span>);<br>        resp.setHeader(<span class="hljs-string">&quot;Cache-control&quot;</span>, <span class="hljs-string">&quot;no-cache&quot;</span>);<br>        resp.setHeader(<span class="hljs-string">&quot;Pragma&quot;</span>, <span class="hljs-string">&quot;no-cache&quot;</span>);<br><br>        <span class="hljs-comment">//æŠŠå›¾ç‰‡å†™ç»™æµè§ˆå™¨</span><br>        ImageIO.write(image, <span class="hljs-string">&quot;jpg&quot;</span>, resp.getOutputStream());<br><br>    &#125;<br><br>    <span class="hljs-comment">// ç”Ÿæˆéšæœºæ•°</span><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> String <span class="hljs-title">makeNum</span><span class="hljs-params">()</span> </span>&#123;<br><br>        Random random = <span class="hljs-keyword">new</span> Random();<br>        String num = random.nextInt(<span class="hljs-number">9999999</span>) + <span class="hljs-string">&quot;&quot;</span>;<br>        StringBuffer sb = <span class="hljs-keyword">new</span> StringBuffer();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">7</span> - num.length(); i++) &#123;<br>            sb.append(<span class="hljs-string">&quot;0&quot;</span>);<br>        &#125;<br>        String s = sb.toString() + num;<br>        <span class="hljs-keyword">return</span> num;<br><br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-keyword">super</span>.doPost(req, resp);<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure></li></ul><h4 id="6-6-5-å®ç°é‡å®šå‘"><a href="#6-6-5-å®ç°é‡å®šå‘" class="headerlink" title="6.6.5 å®ç°é‡å®šå‘"></a>6.6.5 å®ç°é‡å®šå‘</h4><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/redirect.png" alt="é‡å®šå‘é—®é¢˜"></p><p>ä¸€ä¸ªwebèµ„æºå—åˆ°å®¢æˆ·ç«¯è¯·æ±‚åï¼Œä¼šé€šçŸ¥å®¢æˆ·ç«¯å»è®¿é—®å¦å¤–ä¸€ä¸ªwebèµ„æºï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸ºé‡å®šå‘ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">sendRedirect</span><span class="hljs-params">(String var1)</span> <span class="hljs-keyword">throws</span> IOException</span>;<br></code></pre></td></tr></table></figure><p>å¸¸è§åœºæ™¯ï¼š</p><ul><li>ç”¨æˆ·ç™»å½•`</li></ul><p>æµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br><br>    resp.setHeader(<span class="hljs-string">&quot;Location&quot;</span>, <span class="hljs-string">&quot;/response_war/img&quot;</span>);<br>    resp.setStatus(<span class="hljs-number">302</span>);<br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>é¢è¯•é¢˜</strong>ï¼šè¯·ä½ èŠèŠé‡å®šå‘å’Œè½¬å‘çš„åŒºåˆ«</p><p>ç›¸åŒç‚¹ï¼š</p><ul><li>é¡µé¢éƒ½ä¼šå®ç°è·³è½¬</li></ul><p>ä¸åŒç‚¹ï¼š</p><ul><li>è¯·æ±‚è½¬å‘çš„æ—¶å€™ï¼Œurlä¸ä¼šäº§ç”Ÿå˜åŒ–</li><li>é‡å®šå‘çš„æ—¶å€™ï¼Œurlåœ°å€æ ä¼šå‘ç”Ÿå˜åŒ–ï¼›</li></ul><h3 id="6-7-HttpServletRequest"><a href="#6-7-HttpServletRequest" class="headerlink" title="6.7 HttpServletRequest"></a>6.7 HttpServletRequest</h3><p>HttpServletRequestä»£è¡¨å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œç”¨æˆ·é€šè¿‡Httpåè®®è®¿é—®æœåŠ¡å™¨ï¼ŒHTTPè¯·æ±‚ä¸­çš„æ‰€æœ‰ä¿¡æ¯ä¼šè¢«å°è£…åˆ°HttpServletRequestï¼Œé€šè¿‡è¿™ä¸ªHttpServletRequestçš„æ–¹æ³•ï¼Œè·å–å®¢æˆ·ç«¯çš„æ‰€æœ‰ä¿¡æ¯ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/httpServletRequest_get.png" alt="å¯ä»¥è·å–çš„å®¢æˆ·ç«¯ä¿¡æ¯"></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/client_info.png" alt="å®¢æˆ·ç«¯çš„ä¿¡æ¯"></p><h4 id="6-7-1-è·å–å‰ç«¯ä¼ é€’çš„å‚æ•°-è¯·æ±‚è½¬å‘"><a href="#6-7-1-è·å–å‰ç«¯ä¼ é€’çš„å‚æ•°-è¯·æ±‚è½¬å‘" class="headerlink" title="6.7.1 è·å–å‰ç«¯ä¼ é€’çš„å‚æ•°,è¯·æ±‚è½¬å‘"></a>6.7.1 è·å–å‰ç«¯ä¼ é€’çš„å‚æ•°,è¯·æ±‚è½¬å‘</h4><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/request_get_paras.png" alt="è·å–å‰ç«¯ä¼ é€’å‚æ•°"></p><p>å‰ç«¯JSPé¡µé¢ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;body&gt;<br>    &lt;div style=<span class="hljs-string">&quot;text-align: center&quot;</span>&gt;<br>        &lt;form action=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/login&quot;</span> method=<span class="hljs-string">&quot;post&quot;</span>&gt;<br>            ç”¨æˆ·åï¼š&lt;input type=<span class="hljs-string">&quot;text&quot;</span> name=<span class="hljs-string">&quot;userName&quot;</span>&gt; &lt;br&gt;<br>            å¯†ç ï¼š&lt;input type=<span class="hljs-string">&quot;pawwpord&quot;</span> name=<span class="hljs-string">&quot;password&quot;</span>&gt; &lt;br&gt;<br>            çˆ±å¥½ï¼š<br>            &lt;input type=<span class="hljs-string">&quot;checkbox&quot;</span> name=<span class="hljs-string">&quot;hobby&quot;</span> value=<span class="hljs-string">&quot;å¥³å­©&quot;</span>&gt;å¥³å­©<br>            &lt;input type=<span class="hljs-string">&quot;checkbox&quot;</span> name=<span class="hljs-string">&quot;hobby&quot;</span> value=<span class="hljs-string">&quot;ä»£ç &quot;</span>&gt;ä»£ç <br>            &lt;input type=<span class="hljs-string">&quot;checkbox&quot;</span> name=<span class="hljs-string">&quot;hobby&quot;</span> value=<span class="hljs-string">&quot;ç”µå½±&quot;</span>&gt;ç”µå½±<br>            &lt;input type=<span class="hljs-string">&quot;checkbox&quot;</span> name=<span class="hljs-string">&quot;hobby&quot;</span> value=<span class="hljs-string">&quot;å”±æ­Œ&quot;</span>&gt;å”±æ­Œ<br>            &lt;br&gt;<br>            &lt;input type=<span class="hljs-string">&quot;submit&quot;</span>&gt;<br>        &lt;/form&gt;<br>    &lt;/div&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure><p>ç™»å½•æˆåŠŸJSPé¡µé¢:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="hljs-string">&quot;java&quot;</span> %&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>    &lt;title&gt;ç™»å½•æˆåŠŸ&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>    &lt;h1&gt;ç™»å½•æˆåŠŸ&lt;/h1&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure><p>è·å–å‰ç«¯å‚æ•°ï¼Œè¯·æ±‚è½¬å‘ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br><br>    req.setCharacterEncoding(<span class="hljs-string">&quot;utf-8&quot;</span>);<br>    resp.setCharacterEncoding(<span class="hljs-string">&quot;utf-8&quot;</span>);<br><br>    String userName = req.getParameter(<span class="hljs-string">&quot;userName&quot;</span>);<br>    String password = req.getParameter(<span class="hljs-string">&quot;password&quot;</span>);<br>    String[] hobbies = req.getParameterValues(<span class="hljs-string">&quot;hobby&quot;</span>);<br><br>    System.out.println(<span class="hljs-string">&quot;==========================&quot;</span>);<br>    System.out.println(userName);<br>    System.out.println(password);<br>    System.out.println(Arrays.toString(hobbies));<br>    System.out.println(<span class="hljs-string">&quot;==========================&quot;</span>);<br><br>    <span class="hljs-comment">// é€šè¿‡è¯·æ±‚è½¬å‘</span><br>    <span class="hljs-comment">// è¿™é‡Œçš„ / ä»£è¡¨å½“å‰çš„webåº”ç”¨</span><br>    req.getRequestDispatcher(<span class="hljs-string">&quot;/success.jsp&quot;</span>).forward(req,resp);<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>é¢è¯•é¢˜ï¼š</strong>è¯·ä½ èŠèŠé‡å®šå‘å’Œè½¬å‘çš„åŒºåˆ«ï¼Ÿ</p><p>ç›¸åŒç‚¹ï¼š</p><ul><li>é¡µé¢éƒ½ä¼šå®ç°è·³è½¬</li></ul><p>ä¸åŒç‚¹ï¼š</p><ul><li>è¯·æ±‚è½¬å‘çš„æ—¶å€™ï¼Œurlä¸ä¼šäº§ç”Ÿå˜åŒ–ï¼›307</li><li>é‡å®šå‘çš„æ—¶å€™ï¼Œurlåœ°å€æ äº§ç”Ÿå˜åŒ–ï¼›302</li></ul><h3 id="6-8-Cookieå’ŒSession"><a href="#6-8-Cookieå’ŒSession" class="headerlink" title="6.8 Cookieå’ŒSession"></a>6.8 Cookieå’ŒSession</h3><h4 id="6-8-1-ä¼šè¯"><a href="#6-8-1-ä¼šè¯" class="headerlink" title="6.8.1 ä¼šè¯"></a>6.8.1 ä¼šè¯</h4><p><strong>ä¼šè¯</strong>ï¼šç”¨æˆ·æ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨ï¼Œç‚¹å‡»äº†æŸäº›è¶…é“¾æ¥ï¼Œè®¿é—®å¤šä¸ªwebèµ„æºï¼Œå…³é—­æµè§ˆå™¨ã€‚è¿™ä¸ªè¿‡ç¨‹ï¼Œå¯ä»¥ç§°ä¸ºä¼šè¯ã€‚</p><p><strong>æœ‰çŠ¶æ€ä¼šè¯</strong>ï¼šä¸€ä¸ªåŒå­¦æ¥è¿‡æ•™å¸ˆï¼Œä¸‹æ¬¡å†æ¥æ•™å®¤ï¼Œæˆ‘ä»¬ä¼šçŸ¥é“è¿™ä¸ªåŒå­¦ï¼Œæ›¾ç»æ¥è¿‡ï¼Œç§°ä¹‹ä¸ºæœ‰çŠ¶æ€ä¼šè¯ã€‚</p><p><strong>ä¾‹å­</strong>ï¼šå¦‚ä½•è¯æ˜ä½ æ˜¯æŸå¤§å­¦çš„å­¦ç”Ÿï¼Ÿ</p><ul><li><p>æŠ¥åç¼´è´¹çš„å‘ç¥¨  å­¦æ ¡ç»™ä½ å‘ç¥¨</p></li><li><p>å­¦æ ¡ç™»è®°       å­¦æ ¡æ ‡è®°ä½ æ¥è¿‡äº†</p></li></ul><p><strong>é‚£å¯¹äºä¸€ä¸ªç½‘ç«™ï¼Œå¦‚ä½•è¯æ˜ä½ æ¥è¿‡å‘¢ï¼Ÿ</strong></p><p>å®¢æˆ·ç«¯   æœåŠ¡ç«¯</p><p>1.æœåŠ¡ç«¯ç»™å®¢æˆ·ç«¯ä¸€ä¸ªä¿¡ä»¶ï¼Œå®¢æˆ·ç«¯ä¸‹æ¬¡è®¿é—®æœåŠ¡ç«¯å¸¦ä¸Šä¿¡ä»¶å°±å¯ä»¥äº†ã€‚</p><p>2.æœåŠ¡å™¨ç™»è®°ä½ æ¥è¿‡äº†ï¼Œä¸‹æ¬¡ä½ æ¥çš„æ—¶å€™æˆ‘æ¥åŒ¹é…ä½ ã€‚</p><h4 id="6-8-2-ä¿å­˜ä¼šè¯çš„ä¸¤ç§æŠ€æœ¯"><a href="#6-8-2-ä¿å­˜ä¼šè¯çš„ä¸¤ç§æŠ€æœ¯" class="headerlink" title="6.8.2 ä¿å­˜ä¼šè¯çš„ä¸¤ç§æŠ€æœ¯"></a>6.8.2 ä¿å­˜ä¼šè¯çš„ä¸¤ç§æŠ€æœ¯</h4><p><strong>cookie</strong></p><ul><li>å®¢æˆ·ç«¯æŠ€æœ¯ï¼ˆå“åº”ï¼Œè¯·æ±‚ï¼‰</li></ul><p><strong>session</strong></p><ul><li>æœåŠ¡å™¨æŠ€æœ¯ï¼Œåˆ©ç”¨è¿™ä¸ªæŠ€æœ¯ï¼Œå¯ä»¥ä¿å­˜ç”¨æˆ·çš„ä¼šè¯ä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥æŠŠä¿¡æ¯æˆ–è€…æ•°æ®æ”¾åœ¨sessionä¸­ã€‚</li></ul><p>å¸¸è§ä¾‹å­ï¼šç½‘ç«™ç™»å½•ä¹‹åï¼Œä¸‹æ¬¡ä¸ç”¨å†ç™»å½•ï¼›ç¬¬äºŒæ¬¡è®¿é—®ç›´æ¥å°±ç™»å½•ä¸Šå»äº†ã€‚</p><h4 id="6-8-3-Cookie"><a href="#6-8-3-Cookie" class="headerlink" title="6.8.3 Cookie"></a>6.8.3 Cookie</h4><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/cookie_picture.png" alt="cookieçš„å¤„ç†æ–¹å¼"></p><ol><li><p>ä»è¯·æ±‚ä¸­æ‹¿åˆ°cookieä¿¡æ¯</p></li><li><p>æœåŠ¡å™¨å“åº”ç»™å®¢æˆ·ç«¯cookie</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java">Cookie[] cookies = req.getCookies(); <span class="hljs-comment">// è·å¾—cookie</span><br>cookie.getName() <span class="hljs-comment">// è·å¾—cookieä¸­çš„key</span><br>cookie.getValue() <span class="hljs-comment">// è·å¾—cookieä¸­çš„value</span><br><span class="hljs-keyword">new</span> Cookie(<span class="hljs-string">&quot;lastLoginTime&quot;</span>, System.currentTimeMillis() + <span class="hljs-string">&quot;&quot;</span>); <span class="hljs-comment">// æ–°å»ºä¸€ä¸ªcookie</span><br>cookie.setMaxAge(<span class="hljs-number">24</span>*<span class="hljs-number">60</span>*<span class="hljs-number">60</span>); <span class="hljs-comment">// è®¾ç½®cookieçš„æœ‰æ•ˆæœŸ</span><br>resp.addCookie(cookie); <span class="hljs-comment">// å“åº”ç»™å®¢æˆ·ç«¯ä¸€ä¸ªcookie</span><br></code></pre></td></tr></table></figure></li></ol>   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br><br>    <span class="hljs-comment">// æœåŠ¡å™¨ï¼Œå‘Šè¯‰ä½ ï¼Œä½ æ¥çš„æ—¶é—´ï¼ŒæŠŠè¿™ä¸ªæ—¶é—´å°è£…æˆä¸ºä¸€ä¸ª ä¿¡ä»¶ï¼Œä½ ä¸‹æ¬¡å¸¦æ¥ï¼Œæˆ‘å°±çŸ¥é“ä½ æ¥äº†</span><br><br>    <span class="hljs-comment">// è§£å†³ä¸­æ–‡ä¹±ç </span><br>    req.setCharacterEncoding(<span class="hljs-string">&quot;utf-8&quot;</span>);<br>    resp.setContentType(<span class="hljs-string">&quot;text/html&quot;</span>);<br>    resp.setCharacterEncoding(<span class="hljs-string">&quot;utf-8&quot;</span>);<br><br>    PrintWriter out = resp.getWriter();<br><br>    <span class="hljs-comment">// Cookieï¼ŒæœåŠ¡å™¨ç«¯ä»å®¢æˆ·ç«¯è·å– è¿™é‡Œè¿”å›æ•°ç»„ï¼Œè¯´æ˜Cookieå¯èƒ½å­˜åœ¨å¤šä¸ª</span><br>    Cookie[] cookies = req.getCookies();<br><br>    <span class="hljs-comment">// åˆ¤æ–­Cookieæ˜¯å¦å­˜åœ¨</span><br>    <span class="hljs-keyword">if</span> (cookies != <span class="hljs-keyword">null</span>) &#123;<br>        <span class="hljs-comment">// å¦‚æœå­˜åœ¨æ€ä¹ˆåŠ</span><br>        out.write(<span class="hljs-string">&quot;ä½ ä¸Šä¸€æ¬¡è®¿é—®çš„æ—¶é—´ä¸ºï¼š&quot;</span>);<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; cookies.length; i++) &#123;<br>            Cookie cookie = cookies[i];<br>            <span class="hljs-comment">// è·å–cookieçš„åå­—</span><br>            <span class="hljs-keyword">if</span> (cookie.getName().equals(<span class="hljs-string">&quot;lastLoginTime&quot;</span>)) &#123;<br>                <span class="hljs-comment">// è·å–cookieä¸­çš„å€¼</span><br>                <span class="hljs-keyword">long</span> lastLoginTime = Long.parseLong(cookie.getValue());<br>                Date date = <span class="hljs-keyword">new</span> Date(lastLoginTime);<br>                out.write(date.toLocaleString());<br>            &#125;<br>        &#125;<br><br>    &#125;<span class="hljs-keyword">else</span> &#123;<br>        out.write(<span class="hljs-string">&quot;è¿™æ˜¯æ‚¨ç¬¬ä¸€æ¬¡è®¿é—®æœ¬ç«™&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// æœåŠ¡å™¨ç»™å®¢æˆ·ç«¯å“åº”ä¸€ä¸ªcookie</span><br>    Cookie cookie = <span class="hljs-keyword">new</span> Cookie(<span class="hljs-string">&quot;lastLoginTime&quot;</span>, System.currentTimeMillis() + <span class="hljs-string">&quot;&quot;</span>);<br>    <span class="hljs-comment">// cookieæœ‰æ•ˆæœŸä¸º1å¤© æµè§ˆå™¨å…³æ‰åcookieä»ç„¶å­˜åœ¨</span><br>    cookie.setMaxAge(<span class="hljs-number">24</span>*<span class="hljs-number">60</span>*<span class="hljs-number">60</span>);<br>    resp.addCookie(cookie);<br>&#125;<br></code></pre></td></tr></table></figure><p>   <strong>æµè§ˆå™¨é‡Œçš„Application</strong></p><p>   <img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/browser_application_cookie.png" alt="æµè§ˆå™¨Applicationé‡Œçš„cookie"></p><p><strong>è¯·æ±‚å’Œå“åº”ä¸­çš„cookie</strong></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/browser_network_cookie.png" alt="æµè§ˆå™¨æŠ“åŒ…ä¸­çš„cookie"></p><p><strong>cookie</strong>:<strong>ä¸€èˆ¬ä¼šä¿å­˜åœ¨æœ¬åœ°çš„ç”¨æˆ·ç›®å½•ä¸‹AppData</strong></p><p><strong>æ€è€ƒ</strong>ï¼šä¸€ä¸ªç½‘ç«™cookieæ˜¯å¦å­˜åœ¨ä¸Šé™ï¼Ÿ<strong>ç»†èŠ‚é—®é¢˜</strong></p><ul><li>ä¸€ä¸ªcookieåªèƒ½ä¿å­˜ä¸€ä¸ªä¿¡æ¯</li><li>ä¸€ä¸ªwebç«™ç‚¹å¯ä»¥ç»™æµè§ˆå™¨å‘é€å¤šä¸ªcookieï¼Œæœ€å¤šå­˜æ”¾20ä¸ªcookie</li><li>cookieå¤§å°æœ‰é™åˆ¶4kb</li><li>300ä¸ªcookieä¸ºæµè§ˆå™¨ä¸Šé™</li></ul><p><strong>åˆ é™¤cookie</strong>ï¼š</p><ul><li>ä¸è®¾ç½®<strong>æœ‰æ•ˆæœŸ</strong> cookie.setMaxAge()</li><li>è®¾ç½®æœ‰æ•ˆæœŸæ—¶é—´ä¸º 0ï¼Œ</li></ul><p><strong>è®¾ç½®cookieå’Œå–cookieæ—¶çš„ç¼–ç å’Œè§£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">Cookie cookie = <span class="hljs-keyword">new</span> Cookie(<span class="hljs-string">&quot;name&quot;</span>, URLEncoder.encode(<span class="hljs-string">&quot;ä¹”å¨&quot;</span>,<span class="hljs-string">&quot;utf-8&quot;</span>));<br>out.write(URLDecoder.decode(cookie.getValue(),<span class="hljs-string">&quot;utf-8&quot;</span>));<br></code></pre></td></tr></table></figure><h4 id="6-8-4-Sessionï¼ˆé‡ç‚¹ï¼‰"><a href="#6-8-4-Sessionï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="6.8.4 Sessionï¼ˆé‡ç‚¹ï¼‰"></a>6.8.4 Sessionï¼ˆé‡ç‚¹ï¼‰</h4><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/session_picture.png" alt="sessionçš„å¤„ç†"></p><p>ä»€ä¹ˆæ˜¯Sessionï¼š</p><ul><li><p>æœåŠ¡å™¨ä¼šç»™<strong>æ¯ä¸€ä¸ªç”¨æˆ·ï¼ˆæµè§ˆå™¨ï¼‰</strong>åˆ›å»ºä¸€ä¸ªSessionå¯¹è±¡</p></li><li><p>ä¸€ä¸ªSessionç‹¬å ä¸€ä¸ªæµè§ˆå™¨ï¼Œåªè¦æµè§ˆå™¨æ²¡æœ‰å…³é—­ï¼Œè¿™ä¸ªSeesionå°±å­˜åœ¨ï¼›</p></li><li><p>ç”¨æˆ·ç™»å½•ä¹‹åï¼Œæ•´ä¸ªç½‘ç«™å®ƒéƒ½å¯ä»¥è®¿é—®ã€‚â€”&gt;ä¿å­˜ç”¨æˆ·çš„ä¿¡æ¯ï¼›ä¿å­˜è´­ç‰©è½¦çš„ä¿¡æ¯</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/httpSession_methods.png" alt="httpSessionæ–¹æ³•"></p><p><strong>Sessionå’ŒCookieçš„åŒºåˆ«</strong>ï¼š</p><ul><li><p>Cookieæ˜¯æŠŠç”¨æˆ·çš„æ•°æ®å†™ç»™ç”¨æˆ·çš„æµè§ˆå™¨ï¼Œæµè§ˆå™¨ä¿å­˜ï¼ˆå¯ä»¥ä¿å­˜å¤šä¸ªï¼Œç†è§£ä¸ºé€šè¡Œè¯ï¼‰</p></li><li><p>SessionæŠŠç”¨æˆ·çš„æ•°æ®å†™åˆ°ç”¨æˆ·ç‹¬å çš„Sessionä¸­ï¼ŒæœåŠ¡å™¨ç«¯ä¿å­˜ï¼ˆä¿å­˜é‡è¦çš„ä¿¡æ¯ï¼Œå‡å°‘æœåŠ¡å™¨èµ„æºçš„æµªè´¹ï¼Œç†è§£ä¸ºç”¨æˆ·ä¿¡æ¯ï¼‰</p></li><li><p>Sessionå¯¹è±¡ç”±æœåŠ¡å™¨åˆ›å»º</p></li></ul><p><strong>Sessionä½¿ç”¨åœºæ™¯</strong>ï¼š</p><ul><li><p>ä¿å­˜ä¸€ä¸ªç™»é™†ç”¨æˆ·çš„ä¿¡æ¯</p></li><li><p>è´­ç‰©è½¦ä¿¡æ¯ï¼›</p></li><li><p>åœ¨æ•´ä¸ªç½‘ç«™ä¸­ç»å¸¸ä¼šä½¿ç”¨çš„æ•°æ®ï¼Œæˆ‘ä»¬å°†å®ƒä¿å­˜åœ¨Sessionä¸­</p></li></ul><p><strong>ä½¿ç”¨Session</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br><br>    <span class="hljs-comment">// è§£å†³ä¹±ç é—®é¢˜</span><br>    resp.setCharacterEncoding(<span class="hljs-string">&quot;UTF-8&quot;</span>);<br>    req.setCharacterEncoding(<span class="hljs-string">&quot;UTF-8&quot;</span>);<br>    resp.setContentType(<span class="hljs-string">&quot;text/html;charset=utf-8&quot;</span>);<br><br>    <span class="hljs-comment">// å¾—åˆ°Session</span><br>    HttpSession session = req.getSession();<br><br>    <span class="hljs-comment">// ç»™Sessionä¸­å­˜ä¿¡æ¯</span><br>    session.setAttribute(<span class="hljs-string">&quot;personInfo&quot;</span>, <span class="hljs-keyword">new</span> Person(<span class="hljs-string">&quot;ä¹”å¨&quot;</span>, <span class="hljs-number">20</span>));<br><br>    <span class="hljs-comment">// è·å–Sessionçš„ID</span><br>    String sessionId = session.getId();<br><br>    <span class="hljs-comment">// åˆ¤æ–­Sessionæ˜¯ä¸æ˜¯æ–°åˆ›å»ºçš„</span><br>    <span class="hljs-keyword">if</span> (session.isNew()) &#123;<br>        resp.getWriter().write(<span class="hljs-string">&quot;sessionåˆ›å»ºæˆåŠŸï¼ŒIDï¼š&quot;</span> + sessionId);<br>    &#125;<span class="hljs-keyword">else</span> &#123;<br>        resp.getWriter().write(<span class="hljs-string">&quot;sessionå·²ç»åœ¨æœåŠ¡å™¨ä¸­å­˜åœ¨äº†ï¼ŒIDï¼š&quot;</span> + sessionId);<br>    &#125;<br><br>    <span class="hljs-comment">// Sessionåˆ›å»ºçš„æ—¶å€™åšäº†ä»€ä¹ˆäº‹æƒ…;</span><br>    <span class="hljs-comment">//        Cookie cookie = new Cookie(&quot;JSESSIONID&quot;, sessionId);</span><br>    <span class="hljs-comment">//        resp.addCookie(cookie);</span><br><br>    <span class="hljs-comment">// Sessionåœ¨æµè§ˆå™¨æ‰“å¼€çš„ä¸€ç¬é—´å°±å­˜åœ¨äº†ï¼Œå…³é—­æ—¶è‡ªåŠ¨æ¶ˆå¤±ï¼Œä¸éœ€è¦åƒCookieä¸€æ ·æ‰‹åŠ¨addCookie</span><br>&#125;<br><br><span class="hljs-comment">// å¾—åˆ°Session</span><br>        HttpSession session = req.getSession();<br><br>        Person person = (Person) session.getAttribute(<span class="hljs-string">&quot;personInfo&quot;</span>);<br><br>        System.out.println(person.toString());<br><br><span class="hljs-comment">// æ‰‹åŠ¨æ³¨é”€Session</span><br>        session.invalidate();<br></code></pre></td></tr></table></figure><p>ä¼šè¯è‡ªåŠ¨è¿‡æœŸï¼šåœ¨web.xmlä¸­è®¾ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--è®¾ç½®Sessioné»˜è®¤çš„å¤±æ•ˆæ—¶é—´--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">session-config</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--ä¸€å¤©åSessionè‡ªåŠ¨å¤±æ•ˆï¼Œä»¥åˆ†é’Ÿä¸ºå•ä½--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">session-timeout</span>&gt;</span>1440<span class="hljs-tag">&lt;/<span class="hljs-name">session-timeout</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">session-config</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="7-JSP"><a href="#7-JSP" class="headerlink" title="7. JSP"></a>7. JSP</h2><h3 id="7-1-ä»€ä¹ˆæ˜¯JSP"><a href="#7-1-ä»€ä¹ˆæ˜¯JSP" class="headerlink" title="7.1 ä»€ä¹ˆæ˜¯JSP"></a>7.1 ä»€ä¹ˆæ˜¯JSP</h3><p>Java Server Pagesï¼šJavaæœåŠ¡å™¨ç«¯é¡µé¢ï¼Œä¹Ÿå’ŒServletä¸€æ ·ï¼Œç”¨äºå¼€å‘åŠ¨æ€web</p><p>æœ€å¤§çš„ç‰¹ç‚¹ï¼š</p><ul><li>å†™JSPå°±åƒåœ¨å†™HTML</li><li>åŒºåˆ«ï¼š<ul><li>HTMLåªç»™ç”¨æˆ·æä¾›é™æ€çš„æ•°æ®</li><li>JSPé¡µé¢ä¸­å¯ä»¥åµŒå…¥JAVAä»£ç ï¼Œä¸ºç”¨æˆ·æä¾›åŠ¨æ€æ•°æ®</li></ul></li></ul><h3 id="7-2-JSPåŸç†"><a href="#7-2-JSPåŸç†" class="headerlink" title="7.2 JSPåŸç†"></a>7.2 JSPåŸç†</h3><p><strong>æ€è·¯</strong>ï¼šJSPåˆ°åº•æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ</p><ul><li><p>ä»£ç å±‚é¢æ²¡æœ‰ä»»ä½•é—®é¢˜</p></li><li><p>æœåŠ¡å™¨å†…éƒ¨å·¥ä½œ</p><p>tomcatä¸­æœ‰ä¸€ä¸ªworkç›®å½•ï¼š</p><p>IDEAä¸­ä½¿ç”¨Tomcatçš„è¯ï¼Œä¼šåœ¨IDEAçš„Tomcatä¸­ç”Ÿæˆä¸€ä¸ªworkç›®å½•</p><p>åœ¨æˆ‘çš„ç”µè„‘çš„ç›®å½•ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">C:\Users\M\AppData\Local\JetBrains\IntelliJIdea2020<span class="hljs-number">.1</span>\tomcat\Tomcat_9_0_41_javaweb<span class="hljs-number">-02</span>-servlet\work\Catalina\localhost\requestTest_war\org\apache\jsp<br></code></pre></td></tr></table></figure><p>å‘ç°é¡µé¢è½¬å˜æˆäº†javaç¨‹åº</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/jsp_work.png" alt="é¡µé¢å˜ä¸ºäº†javaç¨‹åº"></p><p><strong>æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œä¸ç®¡è®¿é—®ä»€ä¹ˆèµ„æºï¼Œå…¶å®éƒ½æ˜¯åœ¨è®¿é—®Servlet!</strong></p><p>æœåŠ¡å™¨åœ¨æ‰§è¡Œjspçš„æ—¶å€™ï¼Œé¦–å…ˆæŠŠjspç¿»è¯‘æˆä¸€ä¸ªServletï¼Œæ‰€ä»¥æˆ‘ä»¬è®¿é—®jspæ—¶ï¼Œå…¶å®ä¸æ˜¯åœ¨è®¿é—®jspï¼Œè€Œæ˜¯åœ¨è®¿é—®jspç¿»è¯‘è¿‡åçš„é‚£ä¸ªServletï¼Œä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p><p><strong>index.jsp</strong></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%@ page language=<span class="hljs-string">&quot;java&quot;</span> <span class="hljs-keyword">import</span>=<span class="hljs-string">&quot;java.util.*&quot;</span> pageEncoding=<span class="hljs-string">&quot;UTF-8&quot;</span>%&gt;<br>&lt;%<br>String path = request.getContextPath();<br>String basePath = request.getScheme()+<span class="hljs-string">&quot;://&quot;</span>+request.getServerName()+<span class="hljs-string">&quot;:&quot;</span>+request.getServerPort()+path+<span class="hljs-string">&quot;/&quot;</span>;<br>%&gt;<br><br>&lt;!DOCTYPE HTML PUBLIC <span class="hljs-string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span>&gt;<br>&lt;html&gt;<br>  &lt;head&gt;<br>    &lt;base href=<span class="hljs-string">&quot;&lt;%=basePath%&gt;&quot;</span>&gt;<br><br>    &lt;title&gt;First Jsp&lt;/title&gt;<br><br>  &lt;/head&gt;<br><br>  &lt;body&gt;<br>    &lt;%<br>        out.print(<span class="hljs-string">&quot;Hello Jsp&quot;</span>);<br>    %&gt;<br>  &lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬é€šè¿‡æµè§ˆå™¨è®¿é—®index.jspæ—¶ï¼ŒæœåŠ¡å™¨é¦–å…ˆå°†index.jspç¿»è¯‘æˆä¸€ä¸ªindex_jsp.classï¼Œåœ¨TomcatæœåŠ¡å™¨çš„<strong>work\Catalina\localhost\é¡¹ç›®å\org\apache\jsp</strong>ç›®å½•ä¸‹å¯ä»¥çœ‹åˆ°index_jsp.classçš„æºä»£ç æ–‡ä»¶index_jsp.javaï¼Œindex_jsp.javaçš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> org.apache.jsp;<br><br><span class="hljs-keyword">import</span> javax.servlet.*;<br><span class="hljs-keyword">import</span> javax.servlet.http.*;<br><span class="hljs-keyword">import</span> javax.servlet.jsp.*;<br><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">index_jsp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">org</span>.<span class="hljs-title">apache</span>.<span class="hljs-title">jasper</span>.<span class="hljs-title">runtime</span>.<span class="hljs-title">HttpJspBase</span></span><br><span class="hljs-class">    <span class="hljs-keyword">implements</span> <span class="hljs-title">org</span>.<span class="hljs-title">apache</span>.<span class="hljs-title">jasper</span>.<span class="hljs-title">runtime</span>.<span class="hljs-title">JspSourceDependent</span> </span>&#123;<br><br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> JspFactory _jspxFactory = JspFactory.getDefaultFactory();<br><br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> java.util.List _jspx_dependants;<br><br>  <span class="hljs-keyword">private</span> javax.el.ExpressionFactory _el_expressionfactory;<br>  <span class="hljs-keyword">private</span> org.apache.AnnotationProcessor _jsp_annotationprocessor;<br><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">getDependants</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> _jspx_dependants;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">_jspInit</span><span class="hljs-params">()</span> </span>&#123;<br>    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();<br>    _jsp_annotationprocessor = (org.apache.AnnotationProcessor) getServletConfig().getServletContext().getAttribute(org.apache.AnnotationProcessor.class.getName());<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">_jspDestroy</span><span class="hljs-params">()</span> </span>&#123;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">_jspService</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="hljs-function">        <span class="hljs-keyword">throws</span> java.io.IOException, ServletException </span>&#123;<br><br>    PageContext pageContext = <span class="hljs-keyword">null</span>;<br>    HttpSession session = <span class="hljs-keyword">null</span>;<br>    ServletContext application = <span class="hljs-keyword">null</span>;<br>    ServletConfig config = <span class="hljs-keyword">null</span>;<br>    JspWriter out = <span class="hljs-keyword">null</span>;<br>    Object page = <span class="hljs-keyword">this</span>;<br>    JspWriter _jspx_out = <span class="hljs-keyword">null</span>;<br>    PageContext _jspx_page_context = <span class="hljs-keyword">null</span>;<br><br><br>    <span class="hljs-keyword">try</span> &#123;<br>      response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br>      pageContext = _jspxFactory.getPageContext(<span class="hljs-keyword">this</span>, request, response,<br>                  <span class="hljs-keyword">null</span>, <span class="hljs-keyword">true</span>, <span class="hljs-number">8192</span>, <span class="hljs-keyword">true</span>);<br>      _jspx_page_context = pageContext;<br>      application = pageContext.getServletContext();<br>      config = pageContext.getServletConfig();<br>      session = pageContext.getSession();<br>      out = pageContext.getOut();<br>      _jspx_out = out;<br><br>      out.write(<span class="hljs-string">&#x27;\r&#x27;</span>);<br>      out.write(<span class="hljs-string">&#x27;\n&#x27;</span>);<br><br>String path = request.getContextPath();<br>String basePath = request.getScheme()+<span class="hljs-string">&quot;://&quot;</span>+request.getServerName()+<span class="hljs-string">&quot;:&quot;</span>+request.getServerPort()+path+<span class="hljs-string">&quot;/&quot;</span>;<br><br>      out.write(<span class="hljs-string">&quot;\r\n&quot;</span>);<br>      out.write(<span class="hljs-string">&quot;\r\n&quot;</span>);<br>      out.write(<span class="hljs-string">&quot;&lt;!DOCTYPE HTML PUBLIC \&quot;-//W3C//DTD HTML 4.01 Transitional//EN\&quot;&gt;\r\n&quot;</span>);<br>      out.write(<span class="hljs-string">&quot;&lt;html&gt;\r\n&quot;</span>);<br>      out.write(<span class="hljs-string">&quot;  &lt;head&gt;\r\n&quot;</span>);<br>      out.write(<span class="hljs-string">&quot;    &lt;base href=\&quot;&quot;</span>);<br>      out.print(basePath);<br>      out.write(<span class="hljs-string">&quot;\&quot;&gt;\r\n&quot;</span>);<br>      out.write(<span class="hljs-string">&quot;    \r\n&quot;</span>);<br>      out.write(<span class="hljs-string">&quot;    &lt;title&gt;First Jsp&lt;/title&gt;\r\n&quot;</span>);<br>      out.write(<span class="hljs-string">&quot;\t\r\n&quot;</span>);<br>      out.write(<span class="hljs-string">&quot;  &lt;/head&gt;\r\n&quot;</span>);<br>      out.write(<span class="hljs-string">&quot;  \r\n&quot;</span>);<br>      out.write(<span class="hljs-string">&quot;  &lt;body&gt;\r\n&quot;</span>);<br>      out.write(<span class="hljs-string">&quot;    &quot;</span>);<br><br>        out.print(<span class="hljs-string">&quot;Hello Jsp&quot;</span>);<br><br>      out.write(<span class="hljs-string">&quot;\r\n&quot;</span>);<br>      out.write(<span class="hljs-string">&quot;  &lt;/body&gt;\r\n&quot;</span>);<br>      out.write(<span class="hljs-string">&quot;&lt;/html&gt;\r\n&quot;</span>);<br>    &#125; <span class="hljs-keyword">catch</span> (Throwable t) &#123;<br>      <span class="hljs-keyword">if</span> (!(t <span class="hljs-keyword">instanceof</span> SkipPageException))&#123;<br>        out = _jspx_out;<br>        <span class="hljs-keyword">if</span> (out != <span class="hljs-keyword">null</span> &amp;&amp; out.getBufferSize() != <span class="hljs-number">0</span>)<br>          <span class="hljs-keyword">try</span> &#123; out.clearBuffer(); &#125; <span class="hljs-keyword">catch</span> (java.io.IOException e) &#123;&#125;<br>        <span class="hljs-keyword">if</span> (_jspx_page_context != <span class="hljs-keyword">null</span>) _jspx_page_context.handlePageException(t);<br>      &#125;<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>      _jspxFactory.releasePageContext(_jspx_page_context);<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œindex_jspè¿™ä¸ªç±»æ˜¯ç»§æ‰¿ org.apache.jasper.runtime.<strong>HttpJspBase</strong>è¿™ä¸ªç±»çš„</p><p>é€šè¿‡å¯¼å…¥Jasper RuntimeåŒ…æ‹¿åˆ°äº†è¿™ä¸ªç±»ï¼Œå‘ç°å®ƒçš„æºç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//</span><br><span class="hljs-comment">// Source code recreated from a .class file by IntelliJ IDEA</span><br><span class="hljs-comment">// (powered by Fernflower decompiler)</span><br><span class="hljs-comment">//</span><br><br><span class="hljs-keyword">package</span> org.apache.jasper.runtime;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> javax.servlet.ServletConfig;<br><span class="hljs-keyword">import</span> javax.servlet.ServletException;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><span class="hljs-keyword">import</span> javax.servlet.jsp.HttpJspPage;<br><span class="hljs-keyword">import</span> javax.servlet.jsp.JspFactory;<br><span class="hljs-keyword">import</span> org.apache.commons.logging.LogFactory;<br><span class="hljs-keyword">import</span> org.apache.jasper.compiler.Localizer;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HttpJspBase</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">HttpJspPage</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-title">HttpJspBase</span><span class="hljs-params">()</span> </span>&#123;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">(ServletConfig config)</span> <span class="hljs-keyword">throws</span> ServletException </span>&#123;<br>        <span class="hljs-keyword">super</span>.init(config);<br>        <span class="hljs-keyword">this</span>.jspInit();<br>        <span class="hljs-keyword">this</span>._jspInit();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getServletInfo</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> Localizer.getMessage(<span class="hljs-string">&quot;jsp.engine.info&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.jspDestroy();<br>        <span class="hljs-keyword">this</span>._jspDestroy();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title">service</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-keyword">this</span>._jspService(request, response);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">jspInit</span><span class="hljs-params">()</span> </span>&#123;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">_jspInit</span><span class="hljs-params">()</span> </span>&#123;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">jspDestroy</span><span class="hljs-params">()</span> </span>&#123;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">_jspDestroy</span><span class="hljs-params">()</span> </span>&#123;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title">_jspService</span><span class="hljs-params">(HttpServletRequest var1, HttpServletResponse var2)</span> <span class="hljs-keyword">throws</span> ServletException, IOException</span>;<br><br>    <span class="hljs-keyword">static</span> &#123;<br>        <span class="hljs-keyword">if</span> (JspFactory.getDefaultFactory() == <span class="hljs-keyword">null</span>) &#123;<br>            JspFactoryImpl factory = <span class="hljs-keyword">new</span> JspFactoryImpl();<br>            <span class="hljs-keyword">if</span> (System.getSecurityManager() != <span class="hljs-keyword">null</span>) &#123;<br>                String basePackage = <span class="hljs-string">&quot;org.apache.jasper.&quot;</span>;<br><br>                <span class="hljs-keyword">try</span> &#123;<br>                    factory.getClass().getClassLoader().loadClass(basePackage + <span class="hljs-string">&quot;runtime.JspFactoryImpl$PrivilegedGetPageContext&quot;</span>);<br>                    factory.getClass().getClassLoader().loadClass(basePackage + <span class="hljs-string">&quot;runtime.JspFactoryImpl$PrivilegedReleasePageContext&quot;</span>);<br>                    factory.getClass().getClassLoader().loadClass(basePackage + <span class="hljs-string">&quot;runtime.JspRuntimeLibrary&quot;</span>);<br>                    factory.getClass().getClassLoader().loadClass(basePackage + <span class="hljs-string">&quot;runtime.JspRuntimeLibrary$PrivilegedIntrospectHelper&quot;</span>);<br>                    factory.getClass().getClassLoader().loadClass(basePackage + <span class="hljs-string">&quot;runtime.ServletResponseWrapperInclude&quot;</span>);<br>                    factory.getClass().getClassLoader().loadClass(basePackage + <span class="hljs-string">&quot;servlet.JspServletWrapper&quot;</span>);<br>                &#125; <span class="hljs-keyword">catch</span> (ClassNotFoundException var3) &#123;<br>                    LogFactory.getLog(HttpJspBase.class).error(<span class="hljs-string">&quot;Jasper JspRuntimeContext preload of class failed: &quot;</span> + var3.getMessage(), var3);<br>                &#125;<br>            &#125;<br><br>            JspFactory.setDefaultFactory(factory);<br>        &#125;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å‘ç°HttpJspBaseç±»æ˜¯ç»§æ‰¿äºHttpServletçš„ï¼Œæ‰€ä»¥HttpJspBaseç±»ä¹Ÿæ˜¯ä¸€ä¸ªServletï¼Œè€Œindex_jspåˆæ˜¯ç»§æ‰¿HttpJspBaseç±»çš„ï¼Œæ‰€ä»¥index_jspç±»ä¹Ÿæ˜¯ä¸€ä¸ªServletï¼›</p><p>å¯¹æ¯”index_jsp.javaå’Œindex.jsp å‘ç°å…¶ä¸­çš„æ ‡ç­¾æœ€ç»ˆåœ¨index_jsp.javaä¸­éƒ½æ˜¯ç”¨out.write()æ–¹æ³•æ‰‹åŠ¨å»å®ç°çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/jsp_work_compare.png" alt="å¯¹æ¯”å›¾"></p></li></ul><p>æ‰€ä»¥è¯´ï¼š<strong>JSPæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªServletï¼</strong></p><p>æˆ‘ä»¬ä»index_jsp.javaä¸­çš„ä¸€äº›æ–¹æ³•å¯ä»¥æ›´æ·±åˆ»çš„ä½“ä¼šè¿™ä¸€ç‚¹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// åˆå§‹åŒ–</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">_jspInit</span><span class="hljs-params">()</span> </span>&#123;<br>  &#125;<br><span class="hljs-comment">// é”€æ¯</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">_jspDestroy</span><span class="hljs-params">()</span> </span>&#123;<br>  &#125;<br><span class="hljs-comment">// JSPService</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">_jspService</span><span class="hljs-params">(<span class="hljs-keyword">final</span> javax.servlet.http.HttpServletRequest request, <span class="hljs-keyword">final</span> javax.servlet.http.HttpServletResponse response)</span></span><br></code></pre></td></tr></table></figure><p><strong>JSPåˆåšäº†ä»€ä¹ˆäº‹æƒ…å‘¢</strong>ï¼Ÿ(å³è®²è§£JspServiceæ–¹æ³•ä¸­çš„å†…å®¹)</p><ol><li><p>åˆ¤æ–­è¯·æ±‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">if</span> (!javax.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) &#123;<br>    <span class="hljs-keyword">final</span> java.lang.String _jspx_method = request.getMethod();<br>    <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;OPTIONS&quot;</span>.equals(_jspx_method)) &#123;<br>        response.setHeader(<span class="hljs-string">&quot;Allow&quot;</span>,<span class="hljs-string">&quot;GET, HEAD, POST, OPTIONS&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (!<span class="hljs-string">&quot;GET&quot;</span>.equals(_jspx_method) &amp;&amp; !<span class="hljs-string">&quot;POST&quot;</span>.equals(_jspx_method) &amp;&amp; !<span class="hljs-string">&quot;HEAD&quot;</span>.equals(_jspx_method)) &#123;<br>        response.setHeader(<span class="hljs-string">&quot;Allow&quot;</span>,<span class="hljs-string">&quot;GET, HEAD, POST, OPTIONS&quot;</span>);<br>        response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, <span class="hljs-string">&quot;JSP åªå…è®¸ GETã€POST æˆ– HEADã€‚Jasper è¿˜å…è®¸ OPTIONS&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å†…ç½®äº†ä¸€äº›å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">final</span> javax.servlet.jsp.PageContext pageContext; <span class="hljs-comment">// é¡µé¢ä¸Šä¸‹æ–‡</span><br>javax.servlet.http.HttpSession session = <span class="hljs-keyword">null</span>; <span class="hljs-comment">// session</span><br><span class="hljs-keyword">final</span> javax.servlet.ServletContext application; <span class="hljs-comment">// applicaiton</span><br><span class="hljs-keyword">final</span> javax.servlet.ServletConfig config; <span class="hljs-comment">// configé…ç½®</span><br>javax.servlet.jsp.JspWriter out = <span class="hljs-keyword">null</span>; <span class="hljs-comment">// outè¾“å‡ºå¯¹è±¡</span><br><span class="hljs-keyword">final</span> java.lang.Object page = <span class="hljs-keyword">this</span>; <span class="hljs-comment">// page:</span><br>javax.servlet.jsp.JspWriter _jspx_out = <span class="hljs-keyword">null</span>;<br>javax.servlet.jsp.PageContext _jspx_page_context = <span class="hljs-keyword">null</span>;<br>HttpServletRequest request <span class="hljs-comment">// è¯·æ±‚</span><br>HttpServletResponse response <span class="hljs-comment">// å“åº”</span><br></code></pre></td></tr></table></figure></li><li><p>è¾“å‡ºé¡µé¢å‰å¢åŠ çš„ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java">response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>); <span class="hljs-comment">// è®¾ç½®å“åº”çš„é¡µé¢ç±»å‹</span><br>pageContext = _jspxFactory.getPageContext(<span class="hljs-keyword">this</span>, request, response,<br>                                          <span class="hljs-keyword">null</span>, <span class="hljs-keyword">true</span>, <span class="hljs-number">8192</span>, <span class="hljs-keyword">true</span>);<br>_jspx_page_context = pageContext; <br>application = pageContext.getServletContext();<br>config = pageContext.getServletConfig();<br>session = pageContext.getSession();<br>out = pageContext.getOut();<br>_jspx_out = out;<br></code></pre></td></tr></table></figure></li><li><p>ä»¥ä¸Šçš„è¿™äº›ä¸ªå¯¹è±¡æˆ‘ä»¬å¯ä»¥åœ¨JSPé¡µé¢ä¸­ç›´æ¥ä½¿ç”¨ï¼</p></li><li><p>JSPåŸç†æµç¨‹å›¾</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JSP_yuanli.png" alt="JSPåŸç†æµç¨‹å›¾"></p></li></ol><h3 id="7-3-JSPåŸºç¡€è¯­æ³•å’ŒæŒ‡ä»¤"><a href="#7-3-JSPåŸºç¡€è¯­æ³•å’ŒæŒ‡ä»¤" class="headerlink" title="7.3 JSPåŸºç¡€è¯­æ³•å’ŒæŒ‡ä»¤"></a>7.3 JSPåŸºç¡€è¯­æ³•å’ŒæŒ‡ä»¤</h3><p>ä»»ä½•è¯­è¨€éƒ½æœ‰è‡ªå·±çš„è¯­æ³•ï¼ŒJAVAä¸­æœ‰ï¼ŒJSPä½œä¸ºjavaæŠ€æœ¯çš„ä¸€ç§åº”ç”¨ï¼Œå®ƒæ‹¥æœ‰ä¸€äº›è‡ªå·±æ‰©å……çš„è¯­æ³•ï¼Œjavaæ‰€æœ‰è¯­æ³•å®ƒéƒ½æ”¯æŒã€‚</p><h4 id="7-3-1-JSPè¡¨è¾¾å¼"><a href="#7-3-1-JSPè¡¨è¾¾å¼" class="headerlink" title="7.3.1 JSPè¡¨è¾¾å¼"></a><strong>7.3.1 JSPè¡¨è¾¾å¼</strong></h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%--<br>    JSPè¡¨è¾¾å¼ä½œç”¨ï¼šç”¨æ¥å°†ç¨‹åºçš„è¾“å‡ºï¼Œè¾“å‡ºåˆ°å®¢æˆ·ç«¯<br>--%&gt;<br>&lt;%= <span class="hljs-keyword">new</span> java.util.Date()%&gt;<br></code></pre></td></tr></table></figure><h4 id="7-3-2-JSPè„šæœ¬åˆ¤æ–­"><a href="#7-3-2-JSPè„šæœ¬åˆ¤æ–­" class="headerlink" title="7.3.2 JSPè„šæœ¬åˆ¤æ–­"></a><strong>7.3.2 JSPè„šæœ¬åˆ¤æ–­</strong></h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%--<br>    JSPè„šæœ¬ç‰‡æ®µ<br>  --%&gt;<br>&lt;%<br>    <span class="hljs-keyword">int</span> sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; i++) &#123;<br>        sum += i;<br>    &#125;<br>    out.println(<span class="hljs-string">&quot;&lt;h1&gt;Sum=&quot;</span> + sum + <span class="hljs-string">&quot;&lt;/h1&gt;&quot;</span>);<br>%&gt;<br></code></pre></td></tr></table></figure><h4 id="7-3-3-è„šæœ¬ç‰‡æ®µçš„å†å®ç°"><a href="#7-3-3-è„šæœ¬ç‰‡æ®µçš„å†å®ç°" class="headerlink" title="7.3.3 è„šæœ¬ç‰‡æ®µçš„å†å®ç°"></a><strong>7.3.3 è„šæœ¬ç‰‡æ®µçš„å†å®ç°</strong></h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%<br>    <span class="hljs-keyword">int</span> x = <span class="hljs-number">10</span>;<br>    out.println(x);<br>%&gt;<br>&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªjspæ–‡æ¡£&lt;/p&gt;<br>&lt;%<br>    <span class="hljs-keyword">int</span> y = <span class="hljs-number">20</span>;<br>    out.println(y);<br>%&gt;<br><br>&lt;hr&gt;<br><br>&lt;%--åœ¨ä»£ç ä¸­åµŒå…¥HTMLå…ƒç´ --%&gt;<br>&lt;%<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br><br><br>    %&gt;<br>&lt;h1&gt;Helloï¼Œworld &lt;%=i%&gt;&lt;/h1&gt;<br>&lt;%<br>    &#125;<br>%&gt;<br></code></pre></td></tr></table></figure><h4 id="7-3-4-JSPå£°æ˜"><a href="#7-3-4-JSPå£°æ˜" class="headerlink" title="7.3.4 JSPå£°æ˜"></a><strong>7.3.4 JSPå£°æ˜</strong></h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%!<br>    <span class="hljs-comment">// é™æ€ä»£ç å—</span><br>    <span class="hljs-keyword">static</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;Loading Servlet&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// å…¨å±€å˜é‡</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> globalVar = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-comment">// å…¨å±€æ–¹æ³•</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">atrox</span><span class="hljs-params">()</span> </span>&#123;<br>      System.out.println(<span class="hljs-string">&quot;è¿›å…¥äº†æ–¹æ³•atroxï¼&quot;</span>);<br>    &#125;<br>%&gt;<br></code></pre></td></tr></table></figure><p>JSPå£°æ˜ï¼šä¼šè¢«ç¼–è¯‘åˆ°JSPç”ŸæˆJavaçš„ç±»ä¸­ï¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JSP%E5%A3%B0%E6%98%8E.png" alt="JSPå£°æ˜"></p><p>å…¶ä»–çš„ï¼Œå°±ä¼šè¢«ç”Ÿæˆåˆ°_jspServiceæ–¹æ³•ä¸­ï¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JSP%E5%85%B6%E4%BB%96%E4%B8%9C%E8%A5%BF.png" alt="JSPå…¶ä»–ä¸œè¥¿"></p><p>åœ¨JSPä¸­ï¼ŒåµŒå…¥javaä»£ç å³å¯ï¼</p><h4 id="7-3-5-ELè¡¨è¾¾å¼"><a href="#7-3-5-ELè¡¨è¾¾å¼" class="headerlink" title="7.3.5 ELè¡¨è¾¾å¼"></a><strong>7.3.5 ELè¡¨è¾¾å¼</strong></h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;h1&gt;Helloï¼Œworld $&#123;i&#125;&gt;&lt;/h1&gt;<br></code></pre></td></tr></table></figure><h4 id="7-3-6-æ³¨é‡Šé—®é¢˜"><a href="#7-3-6-æ³¨é‡Šé—®é¢˜" class="headerlink" title="7.3.6 æ³¨é‡Šé—®é¢˜"></a>7.3.6 æ³¨é‡Šé—®é¢˜</h4><p>JSPçš„æ³¨é‡Šä¸ä¼šå†å®¢æˆ·ç«¯æ˜¾ç¤ºï¼Œè€ŒHTMLå°±ä¼šï¼</p><p>åœ¨index.jspä¸­å†™ä¸Šå¦‚ä¸‹æ³¨é‡Šï¼š</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%--æˆ‘æ˜¯jspæ³¨é‡Š--%&gt;<br>&lt;!--æˆ‘æ˜¯htmlæ³¨é‡Š--&gt;<br></code></pre></td></tr></table></figure><p>åœ¨æµè§ˆå™¨ä¸­å³é”®ç‚¹å‡»æŸ¥çœ‹æºä»£ç ï¼Œå‘ç°htmlæ³¨é‡Šè¿˜åœ¨ï¼Œæ‰€æœ‰çš„jspæ³¨é‡Šå…¨éƒ¨éƒ½çœ‹ä¸åˆ°ï¼Œä½†æ˜¯æŠ“åŒ…ä»ç„¶èƒ½çœ‹åˆ°jspçš„æ³¨é‡Šã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/jsp_comment.png" alt="å®¢æˆ·ç«¯jspæ³¨é‡Šä¸ä¼šæ˜¾ç¤º"></p><h3 id="7-4-JSPæŒ‡ä»¤"><a href="#7-4-JSPæŒ‡ä»¤" class="headerlink" title="7.4 JSPæŒ‡ä»¤"></a>7.4 JSPæŒ‡ä»¤</h3><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%@ page args... %&gt;<br>&lt;%@ include<br>    <br>&lt;%--<span class="hljs-meta">@include</span>ä¼šå°†ä¸¤ä¸ªä»å¤–é¢å¼•å…¥çš„é¡µé¢åˆäºŒä¸ºä¸€--%&gt;<br>&lt;%<span class="hljs-meta">@include</span> file=<span class="hljs-string">&quot;common/header.jsp&quot;</span>%&gt;<br>&lt;h1&gt;ç½‘é¡µä¸»ä½“&lt;/h1&gt;<br>&lt;%<span class="hljs-meta">@include</span> file=<span class="hljs-string">&quot;common/footer.jsp&quot;</span>%&gt;<br><br>&lt;%--jspæ ‡ç­¾--%&gt;<br>&lt;%--jsp:includeï¼šæ‹¼æ¥é¡µé¢ï¼Œæœ¬è´¨è¿˜æ˜¯ä¸‰ä¸ª--%&gt;<br>&lt;jsp:include page=<span class="hljs-string">&quot;common/header.jsp&quot;</span>/&gt;<br>&lt;h1&gt;ç½‘é¡µä¸»ä½“&lt;/h1&gt;<br>&lt;jsp:include page=<span class="hljs-string">&quot;common/footer.jsp&quot;</span>/&gt;<br></code></pre></td></tr></table></figure><h3 id="7-5-ä¹å¤§å†…ç½®å¯¹è±¡"><a href="#7-5-ä¹å¤§å†…ç½®å¯¹è±¡" class="headerlink" title="7.5 ä¹å¤§å†…ç½®å¯¹è±¡"></a>7.5 ä¹å¤§å†…ç½®å¯¹è±¡</h3><p>å†™äº†ä¸€ä¸ªJSPé¡µé¢ï¼ŒæœåŠ¡å™¨ä¸€è·‘ä¼šå˜æˆä¸€ä¸ª.javaæ–‡ä»¶ï¼Œæœ€åå˜æˆä¸€ä¸ª.classæ–‡ä»¶ï¼Œå˜æˆclassæ–‡ä»¶çš„æ—¶å€™ä¼šè‡ªåŠ¨åˆ›å»ºä¹ä¸ªå†…ç½®å¯¹è±¡ã€‚</p><ul><li>PageContext  å­˜ä¸œè¥¿</li><li>Resquest  å­˜ä¸œè¥¿</li><li>Response</li><li>Session  å­˜ä¸œè¥¿</li><li>Applicationã€ServletContextã€‘å­˜ä¸œè¥¿</li><li>configã€ServletConfigã€‘</li><li>out</li><li>page ï¼Œä¸ç”¨</li><li>exception</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;%<br>       <span class="hljs-comment">// ä»åº•å±‚åˆ°é«˜å±‚ï¼ˆä½œç”¨åŸŸï¼‰ï¼špage-&gt;request-&gt;session-application</span><br>       <span class="hljs-comment">// ç±»æ¯”äºJVMï¼šåŒäº²å§”æ´¾æœºåˆ¶ï¼š</span><br>       pageContext.setAttribute(<span class="hljs-string">&quot;name1&quot;</span>, <span class="hljs-string">&quot;ä¹”å¨1å·&quot;</span>); <span class="hljs-comment">// ä¿å­˜çš„æ•°æ®åªåœ¨ä¸€ä¸ªé¡µé¢ä¸­æœ‰æ•ˆ</span><br>       request.setAttribute(<span class="hljs-string">&quot;name2&quot;</span>, <span class="hljs-string">&quot;ä¹”å¨2å·&quot;</span>); <span class="hljs-comment">// ä¿å­˜çš„æ•°æ®åªåœ¨ä¸€æ¬¡è¯·æ±‚ä¸­æœ‰æ•ˆï¼Œè¯·æ±‚è½¬å‘ä¼šæºå¸¦è¿™ä¸ªæ•°æ®</span><br>       session.setAttribute(<span class="hljs-string">&quot;name3&quot;</span>, <span class="hljs-string">&quot;ä¹”å¨3å·&quot;</span>); <span class="hljs-comment">// ä¿å­˜çš„æ•°æ®åªåœ¨ä¸€æ¬¡ä¼šè¯ä¸­æœ‰æ•ˆï¼Œä»æ‰“å¼€æµè§ˆå™¨åˆ°å…³é—­æµè§ˆå™¨</span><br>       application.setAttribute(<span class="hljs-string">&quot;name4&quot;</span>, <span class="hljs-string">&quot;ä¹”å¨4å·&quot;</span>); <span class="hljs-comment">// ä¿å­˜çš„æ•°æ®åœ¨æœåŠ¡å™¨ä¸­æœ‰æ•ˆï¼Œä»æ‰“å¼€æœåŠ¡å™¨åˆ°å…³é—­æœåŠ¡å™¨</span><br>   %&gt;<br></code></pre></td></tr></table></figure><p>requestï¼šå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œäº§ç”Ÿçš„æ•°æ®ï¼Œç”¨æˆ·çœ‹ç©å°±æ²¡ç”¨äº†ï¼Œæ¯”å¦‚ï¼šæ–°é—»ã€‚</p><p>sessionï¼šå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œäº§ç”Ÿçš„æ•°æ®ï¼Œç”¨æˆ·ç”¨å®Œä¸€ä¼šè¿˜æœ‰ç”¨ï¼Œæ¯”å¦‚ï¼šè´­ç‰©è½¦ï¼›</p><p>applicationï¼šå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œäº§ç”Ÿçš„æ•°æ®ï¼Œä¸€ä¸ªç”¨æˆ·ç”¨å®Œå…¶ä»–ç”¨æˆ·è¿˜å¯èƒ½ç”¨ï¼Œæ¯”å¦‚ï¼šèŠå¤©æ•°æ®ï¼›</p><h3 id="7-6-JSPæ ‡ç­¾ã€JSTLæ ‡ç­¾ã€ELè¡¨è¾¾å¼"><a href="#7-6-JSPæ ‡ç­¾ã€JSTLæ ‡ç­¾ã€ELè¡¨è¾¾å¼" class="headerlink" title="7.6 JSPæ ‡ç­¾ã€JSTLæ ‡ç­¾ã€ELè¡¨è¾¾å¼"></a>7.6 JSPæ ‡ç­¾ã€JSTLæ ‡ç­¾ã€ELè¡¨è¾¾å¼</h3><p>éœ€è¦å¯¼åŒ…ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--JSTLè¡¨è¾¾å¼çš„ä¾èµ–--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet.jsp.jstl<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jstl-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!--standardæ ‡ç­¾åº“--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>taglibs<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>standard<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="7-6-1-ELè¡¨è¾¾å¼ï¼š"><a href="#7-6-1-ELè¡¨è¾¾å¼ï¼š" class="headerlink" title="7.6.1 ELè¡¨è¾¾å¼ï¼š"></a>7.6.1 ELè¡¨è¾¾å¼ï¼š</h4><ul><li><strong>è·å–æ•°æ®</strong></li><li><strong>æ‰§è¡Œè¿ç®—</strong></li><li><strong>è·å–webå¼€å‘çš„å¸¸ç”¨å¯¹è±¡</strong></li><li><del>è°ƒç”¨javaæ–¹æ³•</del></li></ul><h4 id="7-6-2-JSPæ ‡ç­¾"><a href="#7-6-2-JSPæ ‡ç­¾" class="headerlink" title="7.6.2 JSPæ ‡ç­¾"></a><strong>7.6.2 JSPæ ‡ç­¾</strong></h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%--&lt;jsp:include page=&quot;&quot;&gt;&lt;/jsp:include&gt;--%&gt;<br><br>&lt;jsp:forward page=<span class="hljs-string">&quot;jsptag2.jsp&quot;</span>&gt;<br>    &lt;jsp:param name=<span class="hljs-string">&quot;name&quot;</span> value=<span class="hljs-string">&quot;qiaowei&quot;</span>/&gt;<br>    &lt;jsp:param name=<span class="hljs-string">&quot;age&quot;</span> value=<span class="hljs-string">&quot;20&quot;</span>/&gt;<br>&lt;/jsp:forward&gt;<br></code></pre></td></tr></table></figure><h4 id="7-6-3-JSTLè¡¨è¾¾å¼"><a href="#7-6-3-JSTLè¡¨è¾¾å¼" class="headerlink" title="7.6.3 JSTLè¡¨è¾¾å¼"></a><strong>7.6.3 JSTLè¡¨è¾¾å¼</strong></h4><p><strong>JSTLæ ‡ç­¾åº“çš„ä½¿ç”¨å°±æ˜¯ä¸ºäº†å¼¥è¡¥HTMLæ ‡ç­¾çš„ä¸è¶³ï¼›</strong>å®ƒè‡ªå®šä¹‰äº†è®¸å¤šçš„æ ‡ç­¾ï¼Œå¯ä»¥ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œæ ‡ç­¾çš„åŠŸèƒ½å’Œjavaä»£ç ä¸€æ ·ã€‚</p><p><strong>æ ¼å¼åŒ–æ ‡ç­¾</strong></p><p><strong>SQLæ ‡ç­¾</strong></p><p><strong>XMLæ ‡ç­¾</strong></p><p><strong>æ ¸å¿ƒæ ‡ç­¾</strong>ï¼ˆæŒæ¡éƒ¨åˆ†ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JSTL_core_tag.png" alt="JSTLæ ¸å¿ƒæ ‡ç­¾"></p><p><strong>JSTLæ ‡ç­¾åº“ä½¿ç”¨æ­¥éª¤</strong>ï¼š</p><ul><li><p>å¼•ç”¨å¯¹åº”çš„taglib</p></li><li><p>ä½¿ç”¨å…¶ä¸­ç»™çš„æ–¹æ³•</p></li><li><p>åœ¨Tomcatä¸­ä¹Ÿéœ€è¦æ‰‹åŠ¨å¼•å…¥jstlçš„åŒ…åˆ°libç›®å½•ä¸‹ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼šJSTLè§£æé”™è¯¯</p><p><img src="/posts/2020/12/31/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/jstl_tomcat_lib.png" alt="æ‰‹åŠ¨å¯¼åŒ…"></p><p><strong>æµ‹è¯•Demo</strong>ï¼š</p></li></ul><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;h4&gt;ifæµ‹è¯•&lt;/h4&gt;<br><br>&lt;form action=<span class="hljs-string">&quot;coreif.jsp&quot;</span> method=<span class="hljs-string">&quot;get&quot;</span>&gt;<br>    &lt;%--<br>        ELè¡¨è¾¾å¼è·å–è¡¨å•ä¸­çš„æ•°æ®<br>        $&#123;param.å‚æ•°å&#125;<br>    --%&gt;<br>    &lt;input type=<span class="hljs-string">&quot;text&quot;</span> name=<span class="hljs-string">&quot;userName&quot;</span> value=<span class="hljs-string">&quot;$&#123;param.userName&#125;&quot;</span>&gt;<br>    &lt;input type=<span class="hljs-string">&quot;submit&quot;</span> value=<span class="hljs-string">&quot;ç™»å½•&quot;</span>&gt;<br>&lt;/form&gt;<br><br>&lt;%--åˆ¤æ–­å¦‚æœæäº¤çš„ç”¨æˆ·åæ˜¯ç®¡ç†å‘˜ï¼Œåˆ™ç™»å½•æˆåŠŸ--%&gt;<br>&lt;c:<span class="hljs-keyword">if</span> test=<span class="hljs-string">&quot;$&#123;param.userName==&#x27;admin&#x27;&#125;&quot;</span> <span class="hljs-keyword">var</span>=<span class="hljs-string">&quot;isAdmin&quot;</span>&gt;<br>    &lt;c:out value=<span class="hljs-string">&quot;ç®¡ç†å‘˜æ¬¢è¿ä½ !&quot;</span>/&gt;<br>&lt;/c:if&gt;<br>&lt;c:out value=<span class="hljs-string">&quot;$&#123;isAdmin&#125;&quot;</span>/&gt;<br></code></pre></td></tr></table></figure><p><strong>æ•ˆæœ</strong>ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/core_tag_demo.png" alt="æµ‹è¯•æ•ˆæœ"></p><p><strong>æµ‹è¯•c:foreach</strong></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;%<br>    ArrayList&lt;String&gt; people = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>    people.add(<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>);<br>    people.add(<span class="hljs-string">&quot;æå››&quot;</span>);<br>    people.add(<span class="hljs-string">&quot;ç‹äº”&quot;</span>);<br>    people.add(<span class="hljs-string">&quot;èµµå…­&quot;</span>);<br>    people.add(<span class="hljs-string">&quot;ç”°ä¸ƒ&quot;</span>);<br>    request.setAttribute(<span class="hljs-string">&quot;list&quot;</span>,people);<br>%&gt;<br><br>&lt;%--<br><span class="hljs-keyword">var</span>ï¼Œæ¯ä¸€æ¬¡éå†å‡ºæ¥çš„å˜é‡å<br>itemsï¼Œè¦éå†çš„å¯¹è±¡æœ¬èº«<br>--%&gt;<br>&lt;c:forEach <span class="hljs-keyword">var</span>=<span class="hljs-string">&quot;people&quot;</span> items=<span class="hljs-string">&quot;$&#123;list&#125;&quot;</span>&gt;<br>    &lt;c:out value=<span class="hljs-string">&quot;$&#123;people&#125;&quot;</span>/&gt; &lt;br&gt;<br>&lt;/c:forEach&gt;<br><br>&lt;hr&gt;<br><br>&lt;c:forEach <span class="hljs-keyword">var</span>=<span class="hljs-string">&quot;people&quot;</span> items=<span class="hljs-string">&quot;$&#123;list&#125;&quot;</span> begin=<span class="hljs-string">&quot;1&quot;</span> end=<span class="hljs-string">&quot;3&quot;</span> step=<span class="hljs-string">&quot;2&quot;</span>&gt;<br>    &lt;c:out value=<span class="hljs-string">&quot;$&#123;people&#125;&quot;</span>/&gt; &lt;br&gt;<br>&lt;/c:forEach&gt;<br></code></pre></td></tr></table></figure><p><strong>ç»“æœ</strong>ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/jstl_tag_foreach.png" alt="æµ‹è¯•ç»“æœ"></p><h2 id="8-JavaBean"><a href="#8-JavaBean" class="headerlink" title="8. JavaBean"></a>8. JavaBean</h2><p>é€šå¸¸æŠŠJavaBeanç§°ä¸ºå®ä½“ç±»ï¼›</p><p>JavaBeanæœ‰ç‰¹å®šçš„å†™æ³•ï¼š</p><ul><li>å¿…é¡»æœ‰ä¸€ä¸ªæ— å‚æ„é€ </li><li>å±æ€§å¿…é¡»ç§æœ‰åŒ–</li><li>å¿…é¡»æœ‰å¯¹åº”çš„get/setæ–¹æ³•ï¼›</li></ul><p>ä¸€èˆ¬ç”¨æ¥å’Œæ•°æ®åº“çš„å­—æ®µåšæ˜ å°„ ORMï¼›</p><p>ORMï¼šå¯¹è±¡å…³ç³»æ˜ å°„</p><ul><li>è¡¨â€“&gt;ç±»</li><li>å­—æ®µâ€“&gt;å±æ€§</li><li>è¡Œè®°å½•â€”&gt;å¯¹è±¡</li></ul><table><thead><tr><th>id</th><th>name</th><th>age</th><th>address</th></tr></thead><tbody><tr><td>1</td><td>ä¹”å¨1å·</td><td>10</td><td>1å·è·¯</td></tr><tr><td>2</td><td>ä¹”å¨2å·</td><td>20</td><td>2å·è·¯</td></tr><tr><td>3</td><td>ä¹”å¨3å·</td><td>30</td><td>3å·è·¯</td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">People</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> age;<br>    <span class="hljs-keyword">private</span> String address;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> </span>&#123;<br>    <span class="hljs-keyword">new</span> People(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;ä¹”å¨1å·&quot;</span>, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;1å·è·¯&quot;</span>);<br>    <span class="hljs-keyword">new</span> People(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;ä¹”å¨2å·&quot;</span>, <span class="hljs-number">20</span>, <span class="hljs-string">&quot;2å·è·¯&quot;</span>);<br>    <span class="hljs-keyword">new</span> People(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;ä¹”å¨3å·&quot;</span>, <span class="hljs-number">30</span>, <span class="hljs-string">&quot;3å·è·¯&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="9-MVCä¸‰å±‚æ¶æ„"><a href="#9-MVCä¸‰å±‚æ¶æ„" class="headerlink" title="9.  MVCä¸‰å±‚æ¶æ„"></a>9.  MVCä¸‰å±‚æ¶æ„</h2><p>ä»€ä¹ˆæ˜¯MVCï¼šModel View Controller æ¨¡å‹ è§†å›¾ æ§åˆ¶å™¨</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/mvc.png" alt="æ—©å¹´çš„MVCæ¶æ„"></p><p>ç”¨æˆ·ç›´æ¥è®¿é—®æ§åˆ¶å±‚ï¼Œæ§åˆ¶å±‚å°±å¯ä»¥ç›´æ¥æ“ä½œæ•°æ®åº“ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java">servlet--CRUD--æ•°æ®åº“<br>å¼Šç«¯ï¼šç¨‹åºååˆ†è‡ƒè‚¿ã€ä¸åˆ©äºç»´æŠ¤ servletçš„ä»£ç ä¸­:å¤„ç†è¯·æ±‚ã€å“åº”ã€è¯•å›¾è·³è½¬ã€å¤„ç†JDBCã€å¤„ç†ä¸šåŠ¡ä»£ç ã€å¤„ç†é€»è¾‘ä»£ç <br>    <br>æ¶æ„ï¼šæ²¡æœ‰ä»€ä¹ˆæ˜¯åŠ ä¸€å±‚å¤„ç†ä¸äº†çš„ï¼<br>ç¨‹åºå‘˜è°ƒç”¨<br>    <br>JDBC<br>    <br>Mysql Oracle SqlServer...<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/mvc_structure.png" alt="mvcæ¶æ„"></p><p>Model</p><ul><li>ä¸šåŠ¡å¤„ç†ï¼šä¸šåŠ¡é€»è¾‘ï¼ˆServiceï¼‰</li><li>æ•°æ®æŒä¹…å±‚ï¼šCRUDï¼ˆDAOï¼‰</li></ul><p>View</p><ul><li>å±•ç¤ºæ•°æ®</li><li>æä¾›é“¾æ¥å‘èµ·Servletè¯·æ±‚ï¼ˆaï¼Œformï¼Œimgï¼‰</li></ul><p>Controller</p><ul><li><p>æ¥å—ç”¨æˆ·çš„è¯·æ±‚ï¼šï¼ˆreqï¼šè¯·æ±‚å‚æ•°ã€Sessionä¿¡æ¯â€¦ï¼‰</p></li><li><p>äº¤ç»™ä¸šåŠ¡å±‚å¤„ç†å¯¹åº”çš„ä»£ç </p></li><li><p>æ§åˆ¶è§†å›¾çš„è·³è½¬</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">ç™»å½•---&gt;æ¥æ”¶ç”¨æˆ·çš„ç™»å½•è¯·æ±‚---&gt;å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ï¼ˆè·å–ç”¨æˆ·ç™»é™†çš„å‚æ•°ï¼Œusernameï¼Œpasswordï¼‰---&gt;äº¤ç»™ä¸šåŠ¡å±‚å¤„ç†ç™»å½•ä¸šåŠ¡ï¼ˆåˆ¤æ–­ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®ï¼šäº‹åŠ¡ï¼‰---&gt;DAOå±‚æŸ¥è¯¢ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦åŒ¹é…---&gt;æ“ä½œæ•°æ®åº“<br></code></pre></td></tr></table></figure></li></ul><h2 id="10-Fileterè¿‡æ»¤å™¨ï¼ˆé‡ç‚¹ï¼‰"><a href="#10-Fileterè¿‡æ»¤å™¨ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="10. Fileterè¿‡æ»¤å™¨ï¼ˆé‡ç‚¹ï¼‰"></a>10. Fileterè¿‡æ»¤å™¨ï¼ˆé‡ç‚¹ï¼‰</h2><p>Filterï¼šè¿‡æ»¤å™¨ï¼Œç”¨æ¥è¿‡æ»¤ç½‘ç«™çš„æ•°æ®ï¼›</p><ul><li>å¤„ç†ä¸­æ–‡ä¹±ç </li><li>ç™»å½•éªŒè¯</li></ul><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/filter.png" alt="è¿‡æ»¤å™¨æµç¨‹"></p><h3 id="10-1-filterå¼€å‘æ­¥éª¤"><a href="#10-1-filterå¼€å‘æ­¥éª¤" class="headerlink" title="10.1 filterå¼€å‘æ­¥éª¤"></a>10.1 filterå¼€å‘æ­¥éª¤</h3><ol><li><p>å¯¼åŒ…</p></li><li><p>ç¼–å†™è¿‡æ»¤å™¨ï¼ˆæ­¤å¤„ä»¥è¿‡æ»¤ä¸­æ–‡ç¼–ç ä¸ºä¾‹å­ï¼‰ï¼Œå®ç°Filteræ¥å£ï¼Œé‡å†™å¯¹åº”æ–¹æ³•</p><ul><li><p>å¯¼åŒ…ä¸è¦é”™ï¼ˆé€‰java.servletä¸‹çš„ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> javax.servlet.*;<br></code></pre></td></tr></table></figure></li><li><p>ç¼–å†™è¿‡æ»¤å™¨çš„åˆå§‹çŠ¶æ€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CharacterEncodingFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Filter</span> </span>&#123;<br><br>    <span class="hljs-comment">// åˆå§‹åŒ–</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">(FilterConfig filterConfig)</span> <span class="hljs-keyword">throws</span> ServletException </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;CharacterEncodingFilteråˆå§‹åŒ–&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doFilter</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException </span>&#123;<br><br>    &#125;<br><br>    <span class="hljs-comment">// é”€æ¯</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;CharacterEncodingFilteré”€æ¯&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>è¿‡æ»¤å™¨æœ€ç»ˆä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CharacterEncodingFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Filter</span> </span>&#123;<br><br>    <span class="hljs-comment">// åˆå§‹åŒ–ï¼šwebæœåŠ¡å™¨å¯åŠ¨ï¼Œå°±å·²ç»åˆå§‹åŒ–äº†ï¼Œéšæ—¶ç­‰å¾…è¿‡æ»¤å¯¹è±¡å‡ºç°</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">(FilterConfig filterConfig)</span> <span class="hljs-keyword">throws</span> ServletException </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;CharacterEncodingFilteråˆå§‹åŒ–&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// Chainï¼šé“¾</span><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">    1.è¿‡æ»¤å™¨ä¸­çš„æ‰€æœ‰ä»£ç ï¼Œåœ¨è¿‡æ»¤ç‰¹å®šè¯·æ±‚çš„æ—¶å€™éƒ½ä¼šæ‰§è¡Œ</span><br><span class="hljs-comment">    2.å¿…é¡»è¦è®©è¿‡æ»¤å™¨ç»§ç»­é€šè¡Œ  filterChain.doFilter(servletRequest,servletResponse);</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doFilter</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException </span>&#123;<br>        servletRequest.setCharacterEncoding(<span class="hljs-string">&quot;utf-8&quot;</span>);<br>        servletResponse.setCharacterEncoding(<span class="hljs-string">&quot;utf-8&quot;</span>);<br>        servletResponse.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br><br>        System.out.println(<span class="hljs-string">&quot;CharacterEncodingFilteræ‰§è¡Œå‰...&quot;</span>);<br>        <span class="hljs-comment">// è®©æˆ‘ä»¬çš„è¯·æ±‚ç»§ç»­èµ°ï¼Œå¦‚æœä¸å†™ï¼Œç¨‹åºåˆ°è¿™é‡Œå°±è¢«æ‹¦æˆªåœæ­¢</span><br>        filterChain.doFilter(servletRequest,servletResponse);<br>        System.out.println(<span class="hljs-string">&quot;CharacterEncodingFilteræ‰§è¡Œå...&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// é”€æ¯ï¼šwebæœåŠ¡å™¨å…³é—­çš„æ—¶å€™ï¼Œè¿‡æ»¤å™¨ä¼šé”€æ¯</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;CharacterEncodingFilteré”€æ¯&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul></li><li><p>åœ¨web.xmlä¸­é…ç½®Filter</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"> <span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>com.atrox.filter.CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--åªè¦æ˜¯/servletä¸‹çš„ä»»ä½•è¯·æ±‚ï¼Œéƒ½ä¼šç»è¿‡è¿™ä¸ªè¿‡æ»¤å™¨--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/servlet/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ol><h2 id="11-ç›‘å¬å™¨"><a href="#11-ç›‘å¬å™¨" class="headerlink" title="11.ç›‘å¬å™¨"></a>11.ç›‘å¬å™¨</h2><p>å®ç°ä¸€ä¸ªç›‘å¬å™¨çš„æ¥å£;ï¼ˆæœ‰Nä¸­ï¼‰</p><ol><li><p>ç¼–å†™ä¸€ä¸ªç›‘å¬å™¨</p><p>å®ç°ç›‘å¬å™¨çš„æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.atrox.listener;<br><br><span class="hljs-keyword">import</span> javax.servlet.ServletContext;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpSessionEvent;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpSessionListener;<br><br><span class="hljs-comment">// ç»Ÿè®¡ç½‘ç«™åœ¨çº¿äººæ•°ï¼šç»Ÿè®¡session</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OnlineCountListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">HttpSessionListener</span> </span>&#123;<br><br>    <span class="hljs-comment">// åˆ›å»ºsessionç›‘å¬</span><br>    <span class="hljs-comment">// ä¸€æ—¦åˆ›å»ºä¸€ä¸ªSessionå°±ä¼šè§¦å‘ä¸€æ¬¡è¿™ä¸ªäº‹ä»¶ï¼</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sessionCreated</span><span class="hljs-params">(HttpSessionEvent httpSessionEvent)</span> </span>&#123;<br>        ServletContext ctx = httpSessionEvent.getSession().getServletContext();<br>        Integer onlineCount = (Integer) ctx.getAttribute(<span class="hljs-string">&quot;OnlineCount&quot;</span>);<br><br>        <span class="hljs-keyword">if</span> (onlineCount == <span class="hljs-keyword">null</span>) &#123;<br>            onlineCount = <span class="hljs-keyword">new</span> Integer(<span class="hljs-number">1</span>);<br>        &#125;<span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">int</span> count = onlineCount.intValue();<br>            onlineCount = <span class="hljs-keyword">new</span> Integer(count + <span class="hljs-number">1</span>);<br>        &#125;<br><br>        ctx.setAttribute(<span class="hljs-string">&quot;OnlineCount&quot;</span>,onlineCount);<br>    &#125;<br><br>    <span class="hljs-comment">// é”€æ¯sessionç›‘å¬</span><br>    <span class="hljs-comment">// ä¸€æ—¦é”€æ¯Sessionå°±ä¼šè§¦å‘ä¸€æ¬¡è¿™ä¸ªäº‹ä»¶ï¼</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sessionDestroyed</span><span class="hljs-params">(HttpSessionEvent httpSessionEvent)</span> </span>&#123;<br>        ServletContext ctx = httpSessionEvent.getSession().getServletContext();<br>        Integer onlineCount = (Integer) ctx.getAttribute(<span class="hljs-string">&quot;OnlineCount&quot;</span>);<br><br>        <span class="hljs-keyword">if</span> (onlineCount == <span class="hljs-keyword">null</span>) &#123;<br>            onlineCount = <span class="hljs-keyword">new</span> Integer(<span class="hljs-number">0</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">int</span> count = onlineCount.intValue();<br>            onlineCount = <span class="hljs-keyword">new</span> Integer(count - <span class="hljs-number">1</span>);<br>        &#125;<br><br>        ctx.setAttribute(<span class="hljs-string">&quot;OnlineCount&quot;</span>, onlineCount);<br>    &#125;<br><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">    Sessioné”€æ¯ï¼š</span><br><span class="hljs-comment">    1.æ‰‹åŠ¨é”€æ¯ getSession().invalidate()</span><br><span class="hljs-comment">    2.è‡ªåŠ¨é”€æ¯ web.xmlä¸­sessionConfigæ ‡ç­¾</span><br><span class="hljs-comment">     */</span><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>web.xmlä¸­æ³¨å†Œç›‘å¬å™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;!--æ³¨å†Œç›‘å¬å™¨--&gt;<br>    &lt;listener&gt;<br>    &lt;listener-<span class="hljs-class"><span class="hljs-keyword">class</span>&gt;<span class="hljs-title">com</span>.<span class="hljs-title">atrox</span>.<span class="hljs-title">listener</span>.<span class="hljs-title">OnlineCountListener</span>&lt;/<span class="hljs-title">listener</span>-<span class="hljs-title">class</span>&gt;</span><br><span class="hljs-class">        &lt;/<span class="hljs-title">listener</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>çœ‹æƒ…å†µæ˜¯å¦ä½¿ç”¨</p></li></ol><h2 id="12-è¿‡æ»¤å™¨ã€ç›‘å¬å™¨å¸¸è§åº”ç”¨"><a href="#12-è¿‡æ»¤å™¨ã€ç›‘å¬å™¨å¸¸è§åº”ç”¨" class="headerlink" title="12. è¿‡æ»¤å™¨ã€ç›‘å¬å™¨å¸¸è§åº”ç”¨"></a>12. è¿‡æ»¤å™¨ã€ç›‘å¬å™¨å¸¸è§åº”ç”¨</h2><h3 id="12-1-ç›‘å¬å™¨ï¼šGUIç¼–ç¨‹ä¸­ç»å¸¸ä½¿ç”¨"><a href="#12-1-ç›‘å¬å™¨ï¼šGUIç¼–ç¨‹ä¸­ç»å¸¸ä½¿ç”¨" class="headerlink" title="12.1 ç›‘å¬å™¨ï¼šGUIç¼–ç¨‹ä¸­ç»å¸¸ä½¿ç”¨"></a>12.1 ç›‘å¬å™¨ï¼šGUIç¼–ç¨‹ä¸­ç»å¸¸ä½¿ç”¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestPanel</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        Frame frame = <span class="hljs-keyword">new</span> Frame(<span class="hljs-string">&quot;åœ£è¯èŠ‚å¿«ä¹&quot;</span>); <span class="hljs-comment">// æ–°å»ºä¸€ä¸ªçª—ä½“</span><br>        Panel panel = <span class="hljs-keyword">new</span> Panel(<span class="hljs-keyword">null</span>); <span class="hljs-comment">// é¢æ¿</span><br>        frame.setLayout(<span class="hljs-keyword">null</span>); <span class="hljs-comment">// è®¾ç½®çª—ä½“çš„å¸ƒå±€</span><br><br>        frame.setBounds(<span class="hljs-number">300</span>,<span class="hljs-number">300</span>,<span class="hljs-number">500</span>,<span class="hljs-number">500</span>);<br>        frame.setBackground(<span class="hljs-keyword">new</span> Color(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">255</span>)); <span class="hljs-comment">// è®¾ç½®èƒŒæ™¯é¢œè‰²</span><br><br>        panel.setBounds(<span class="hljs-number">50</span>,<span class="hljs-number">50</span>,<span class="hljs-number">300</span>,<span class="hljs-number">300</span>);<br>        frame.setBackground(<span class="hljs-keyword">new</span> Color(<span class="hljs-number">0</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>)); <span class="hljs-comment">// è®¾ç½®èƒŒæ™¯é¢œè‰²</span><br><br>        frame.add(panel);<br>        frame.setVisible(<span class="hljs-keyword">true</span>);<br><br>        <span class="hljs-comment">// ç›‘å¬äº‹ä»¶ï¼Œç›‘å¬å…³é—­æ—¶é—´</span><br>        frame.addWindowListener(<span class="hljs-keyword">new</span> WindowListener() &#123;<br>            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">windowOpened</span><span class="hljs-params">(WindowEvent e)</span> </span>&#123;<br>                System.out.println(<span class="hljs-string">&quot;æ‰“å¼€&quot;</span>);<br>            &#125;<br><br>            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">windowClosing</span><span class="hljs-params">(WindowEvent e)</span> </span>&#123;<br>                System.out.println(<span class="hljs-string">&quot;å…³é—­ing&quot;</span>);<br>                System.out.println(<span class="hljs-number">0</span>);<br>            &#125;<br><br>            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">windowClosed</span><span class="hljs-params">(WindowEvent e)</span> </span>&#123;<br>                System.out.println(<span class="hljs-string">&quot;å…³é—­ed&quot;</span>);<br>            &#125;<br><br>            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">windowIconified</span><span class="hljs-params">(WindowEvent e)</span> </span>&#123;<br><br>            &#125;<br><br>            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">windowDeiconified</span><span class="hljs-params">(WindowEvent e)</span> </span>&#123;<br><br>            &#125;<br><br>            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">windowActivated</span><span class="hljs-params">(WindowEvent e)</span> </span>&#123;<br>                System.out.println(<span class="hljs-string">&quot;æ¿€æ´»&quot;</span>);<br>            &#125;<br><br>            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">windowDeactivated</span><span class="hljs-params">(WindowEvent e)</span> </span>&#123;<br>                System.out.println(<span class="hljs-string">&quot;å…³é—­ed&quot;</span>);<br>            &#125;<br>        &#125;);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="12-2-ç”¨æˆ·ç™»å½•æ‹¦æˆª"><a href="#12-2-ç”¨æˆ·ç™»å½•æ‹¦æˆª" class="headerlink" title="12.2 ç”¨æˆ·ç™»å½•æ‹¦æˆª"></a>12.2 ç”¨æˆ·ç™»å½•æ‹¦æˆª</h3><p>ç”¨æˆ·ç™»å½•æˆåŠŸä¹‹åæ‰èƒ½è¿›å…¥ä¸»é¡µï¼Œç”¨æˆ·æ³¨é”€åå°±ä¸èƒ½è¿›å…¥ä¸»é¡µäº†ï¼</p><ol><li><p>ç”¨æˆ·ç™»å½•ä¹‹åï¼Œå‘Sessionä¸­æ”¾å…¥ç”¨æˆ·çš„æ•°æ®</p></li><li><p>è¿›å…¥ä¸»é¡µçš„æ—¶å€™è¦åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å·²ç»ç™»å½•ï¼›è¦æ±‚ï¼šåœ¨è¿‡æ»¤å™¨ä¸­å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doFilter</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException </span>&#123;<br><br>    HttpServletRequest request = (HttpServletRequest) servletRequest;<br>    HttpServletResponse response = (HttpServletResponse) servletResponse;<br><br>    Object user_session = request.getSession().getAttribute(<span class="hljs-string">&quot;USER_SESSION&quot;</span>);<br>    <span class="hljs-keyword">if</span> (user_session == <span class="hljs-keyword">null</span>) &#123;<br>        response.sendRedirect(request.getContextPath()+<span class="hljs-string">&quot;/error.jsp&quot;</span>);<br>    &#125;<br><br>    filterChain.doFilter(servletRequest,servletResponse);<br><br>&#125;<br></code></pre></td></tr></table></figure></li></ol><h2 id="13-JDBC"><a href="#13-JDBC" class="headerlink" title="13.JDBC"></a>13.JDBC</h2><p>ä»€ä¹ˆæ˜¯JDBCï¼šJavaè¿æ¥æ•°æ®åº“</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JDBC.png" alt="JDBC"></p><p>éœ€è¦jaråŒ…çš„æ”¯æŒï¼š</p><ul><li>java.sql</li><li>javax.sql</li><li>mysql.connecter-javaâ€¦è¿æ¥é©±åŠ¨ï¼ˆå¿…é¡»è¦å¯¼å…¥ï¼‰</li></ul><h3 id="13-1-å®éªŒç¯å¢ƒæ­å»º"><a href="#13-1-å®éªŒç¯å¢ƒæ­å»º" class="headerlink" title="13.1 å®éªŒç¯å¢ƒæ­å»º"></a><strong>13.1 å®éªŒç¯å¢ƒæ­å»º</strong></h3><ul><li><p>å¯¼å…¥æ•°æ®åº“ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--mysqlçš„é©±åŠ¨--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.22<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><ul><li><p>IDEAä¸­è¿æ¥æ•°æ®åº“</p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/idea_connect_db1.png" alt="è¿æ¥æ•°æ®åº“ç¬¬ä¸€æ­¥"></p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/idea_connect_db2.png" alt="è¿æ¥æ•°æ®åº“ç¬¬äºŒæ­¥"></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/idea_connect_db3.png" alt="è¿æ¥æ•°æ®åº“ç¬¬ä¸‰æ­¥"></p><h3 id="13-2-JDBCå›ºå®šæ­¥éª¤"><a href="#13-2-JDBCå›ºå®šæ­¥éª¤" class="headerlink" title="13.2 JDBCå›ºå®šæ­¥éª¤"></a>13.2 JDBCå›ºå®šæ­¥éª¤</h3><ol><li><p>åŠ è½½é©±åŠ¨</p></li><li><p>è¿æ¥æ•°æ®åº“ï¼Œä»£è¡¨æ•°æ®åº“</p></li><li><p>å‘æ•°æ®åº“å‘é€SQLçš„å¯¹è±¡Statementï¼šCRUD</p></li><li><p>ç¼–å†™SQLè¯­å¥</p></li><li><p>æ‰§è¡ŒæŸ¥è¯¢SQLï¼Œè¿”å›ä¸€ä¸ªResultSetç»“æœé›†</p></li><li><p>å…³é—­è¿æ¥ï¼Œé‡Šæ”¾èµ„æºï¼Œå…ˆå¼€åå…³</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.sql.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestJdbc</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, SQLException </span>&#123;<br>        <span class="hljs-comment">// é…ç½®ä¿¡æ¯</span><br>        <span class="hljs-comment">// useUnicode=true&amp;characterEncoding=utf-8 è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜</span><br>        String url= <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=GMT&quot;</span>;<br>        String username = <span class="hljs-string">&quot;root&quot;</span>;<br>        String password = <span class="hljs-string">&quot;zuiweizhiming666&quot;</span>;<br><br>        <span class="hljs-comment">// 1.åŠ è½½é©±åŠ¨</span><br>        Class.forName(<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>);<br>        <span class="hljs-comment">// 2.è¿æ¥æ•°æ®åº“,ä»£è¡¨æ•°æ®åº“</span><br>        Connection connection = DriverManager.getConnection(url, username, password);<br>        <span class="hljs-comment">// 3.å‘æ•°æ®åº“å‘é€SQLçš„å¯¹è±¡Statementï¼šCRUD</span><br>        Statement statement = connection.createStatement();<br>        <span class="hljs-comment">// 4.ç¼–å†™SQL</span><br>        String sql = <span class="hljs-string">&quot;select * from users&quot;</span>;<br>        <span class="hljs-comment">// 5.æ‰§è¡ŒæŸ¥è¯¢SQLï¼Œè¿”å›ä¸€ä¸ªResultSetç»“æœé›†</span><br>        ResultSet resultSet = statement.executeQuery(sql);<br><br>        <span class="hljs-keyword">while</span> (resultSet.next()) &#123;<br>            System.out.println(<span class="hljs-string">&quot;id=&quot;</span>+resultSet.getObject(<span class="hljs-string">&quot;id&quot;</span>));<br>            System.out.println(<span class="hljs-string">&quot;name=&quot;</span>+resultSet.getObject(<span class="hljs-string">&quot;name&quot;</span>));<br>            System.out.println(<span class="hljs-string">&quot;password=&quot;</span>+resultSet.getObject(<span class="hljs-string">&quot;password&quot;</span>));<br>            System.out.println(<span class="hljs-string">&quot;email=&quot;</span>+resultSet.getObject(<span class="hljs-string">&quot;email&quot;</span>));<br>            System.out.println(<span class="hljs-string">&quot;birthday=&quot;</span>+resultSet.getObject(<span class="hljs-string">&quot;birthday&quot;</span>));<br>        &#125;<br><br>        <span class="hljs-comment">// 6.å…³é—­è¿æ¥ï¼Œé‡Šæ”¾èµ„æºï¼Œå…ˆå¼€åå…³</span><br>        resultSet.close();<br>        statement.close();<br>        connection.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="13-3-é¢„ç¼–è¯‘SQL"><a href="#13-3-é¢„ç¼–è¯‘SQL" class="headerlink" title="13.3 é¢„ç¼–è¯‘SQL"></a>13.3 é¢„ç¼–è¯‘SQL</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestJDBC2</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, SQLException </span>&#123;<br>        <span class="hljs-comment">// é…ç½®ä¿¡æ¯</span><br>        <span class="hljs-comment">// useUnicode=true&amp;characterEncoding=utf-8 è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜</span><br>        String url= <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=GMT&quot;</span>;<br>        String username = <span class="hljs-string">&quot;root&quot;</span>;<br>        String password = <span class="hljs-string">&quot;zuiweizhiming666&quot;</span>;<br><br>        <span class="hljs-comment">// 1.åŠ è½½é©±åŠ¨</span><br>        Class.forName(<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>);<br>        <span class="hljs-comment">// 2.è¿æ¥æ•°æ®åº“,ä»£è¡¨æ•°æ®åº“</span><br>        Connection connection = DriverManager.getConnection(url, username, password);<br>        <span class="hljs-comment">// 3.ç¼–å†™SQL</span><br>        String sql = <span class="hljs-string">&quot;insert into users(id,name,password,email,birthday) values (?,?,?,?,?)&quot;</span>;<br>        <span class="hljs-comment">// 4.é¢„ç¼–è¯‘</span><br>        PreparedStatement preparedStatement = connection.prepareStatement(sql);<br>        preparedStatement.setInt(<span class="hljs-number">1</span>,<span class="hljs-number">4</span>); <span class="hljs-comment">// ç»™ç¬¬1ä¸ªå ä½ç¬¦ï¼Ÿ çš„å€¼èµ‹å€¼ä¸º1</span><br>        preparedStatement.setString(<span class="hljs-number">2</span>,<span class="hljs-string">&quot;qiaowei&quot;</span>); <span class="hljs-comment">// ç»™ç¬¬2ä¸ªå ä½ç¬¦ï¼Ÿ çš„å€¼èµ‹å€¼ä¸ºqiaowei</span><br>        preparedStatement.setString(<span class="hljs-number">3</span>,<span class="hljs-string">&quot;123456&quot;</span>); <span class="hljs-comment">// ç»™ç¬¬3ä¸ªå ä½ç¬¦ï¼Ÿ çš„å€¼èµ‹å€¼ä¸º123456</span><br>        preparedStatement.setString(<span class="hljs-number">4</span>,<span class="hljs-string">&quot;qiaowei@qq.com&quot;</span>); <span class="hljs-comment">// ç»™ç¬¬4ä¸ªå ä½ç¬¦ï¼Ÿ çš„å€¼èµ‹å€¼ä¸ºqiaowei@qq.com</span><br>        preparedStatement.setDate(<span class="hljs-number">5</span>,<span class="hljs-keyword">new</span> Date(System.currentTimeMillis())); <span class="hljs-comment">// ç»™ç¬¬5ä¸ªå ä½ç¬¦ï¼Ÿ çš„å€¼èµ‹å€¼ä¸ºå½“å‰æ—¶é—´</span><br>        <span class="hljs-comment">// 5.æ‰§è¡ŒSQL</span><br>        <span class="hljs-keyword">int</span> i = preparedStatement.executeUpdate();<br>        <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span>) &#123;<br>            System.out.println(<span class="hljs-string">&quot;æ’å…¥æˆåŠŸ&quot;</span>);<br>        &#125;<br><br>        <span class="hljs-comment">// 6.å…³é—­è¿æ¥ï¼Œé‡Šæ”¾èµ„æºï¼Œå…ˆå¼€åå…³</span><br>      reparedStatement.close();<br>      connection.close();<br>    &#125;<br></code></pre></td></tr></table></figure><h3 id="13-4-äº‹åŠ¡"><a href="#13-4-äº‹åŠ¡" class="headerlink" title="13.4 äº‹åŠ¡"></a>13.4 äº‹åŠ¡</h3><p>è¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ï¼</p><p>ACIDåŸåˆ™ï¼šä¿è¯æ•°æ®çš„å®‰å…¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java">å¼€å¯äº‹åŠ¡<br>äº‹åŠ¡æäº¤ commit()<br>äº‹åŠ¡å›æ»š rollback()<br>å…³é—­äº‹åŠ¡<br>    <br>è½¬è´¦ï¼š<br>Aï¼š<span class="hljs-number">1000</span><br>Bï¼š<span class="hljs-number">1000</span><br>    <br>A(<span class="hljs-number">900</span>) ---<span class="hljs-number">100</span>---&gt; B(<span class="hljs-number">1100</span>)<br></code></pre></td></tr></table></figure><p><strong>junitå•å…ƒæµ‹è¯•</strong></p><p>ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ç®€å•ä½¿ç”¨</p><p>@Testæ³¨è§£åªæœ‰åœ¨æ–¹æ³•ä¸Šæœ‰æ•ˆï¼Œåªè¦åŠ äº†è¿™ä¸ªæ³¨è§£çš„æ–¹æ³•ï¼Œå°±å¯ä»¥ç›´æ¥è¿è¡Œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"> <span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span> </span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;hello&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>å®ä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.junit.Test;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.DriverManager;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> ä¹”å¨</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@create</span> 2020-12-25 21:37</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestJDBC3</span> </span>&#123;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span> </span>&#123;<br><br>        <span class="hljs-comment">// é…ç½®ä¿¡æ¯</span><br>        <span class="hljs-comment">// useUnicode=true&amp;characterEncoding= utf-8 è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜</span><br>        String url= <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=GMT&quot;</span>;<br>        String username = <span class="hljs-string">&quot;root&quot;</span>;<br>        String password = <span class="hljs-string">&quot;zuiweizhiming666&quot;</span>;<br><br>        Connection connection = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-comment">// 1.åŠ è½½é©±åŠ¨</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            Class.forName(<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>);<br>            <span class="hljs-comment">// 2.è¿æ¥æ•°æ®åº“,ä»£è¡¨æ•°æ®åº“</span><br>            connection = DriverManager.getConnection(url, username, password);<br><br>            <span class="hljs-comment">// 3.åŒå¿—æ•°æ®åº“å¼€å¯äº‹åŠ¡,falseæ˜¯å¼€å¯ï¼Œtrueæ˜¯å…³é—­</span><br>            connection.setAutoCommit(<span class="hljs-keyword">false</span>);<br><br>            String sql1 = <span class="hljs-string">&quot;update account set money = money - 100 where name = &#x27;A&#x27;&quot;</span>;<br>            connection.prepareStatement(sql1).executeUpdate();<br><br>            <span class="hljs-comment">// 4.åˆ¶é€ é”™è¯¯</span><br><span class="hljs-comment">//            int i = 1 / 0;</span><br><br>            String sql2 = <span class="hljs-string">&quot;update account set money = money + 100 where name = &#x27;B&#x27;&quot;</span>;<br>            connection.prepareStatement(sql2).executeUpdate();<br><br>            connection.commit(); <span class="hljs-comment">//ä»¥ä¸Šä¸¤æ¡SQLéƒ½æäº¤æˆåŠŸäº†ï¼Œå°±æäº¤äº‹åŠ¡ï¼</span><br>            System.out.println(<span class="hljs-string">&quot;success&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            <span class="hljs-comment">// å¦‚æœå‡ºç°å¼‚å¸¸ï¼Œå°±é€šçŸ¥æ•°æ®åº“å›æ»šå®³æ­»æˆ‘</span><br>            <span class="hljs-keyword">try</span> &#123;<br>                connection.rollback();<br>                System.out.println(<span class="hljs-string">&quot;errorï¼&quot;</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (SQLException throwables) &#123;<br>                throwables.printStackTrace();<br>            &#125;<br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                connection.close();<br>            &#125; <span class="hljs-keyword">catch</span> (SQLException throwables) &#123;<br>                throwables.printStackTrace();<br>            &#125;<br>        &#125;<br><br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>MyBatiså­¦ä¹ ç¬”è®°</title>
    <link href="/posts/2020/12/31/MyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <url>/posts/2020/12/31/MyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="1ã€Introduction"><a href="#1ã€Introduction" class="headerlink" title="1ã€Introduction"></a>1ã€Introduction</h2><h3 id="1-1-What-is-MyBatisï¼Ÿ"><a href="#1-1-What-is-MyBatisï¼Ÿ" class="headerlink" title="1.1 What is MyBatisï¼Ÿ"></a>1.1 What is MyBatisï¼Ÿ</h3><p><strong>MyBatis_Logo</strong>:<img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatiså­¦ä¹ ç¬”è®°/mybatis_logo.png" alt="MyBatis_logo" style="zoom:67%;"></p><p><strong>concept</strong>ï¼šMyBatisæ˜¯ä¸€æ¬¾ä¼˜ç§€çš„==æŒä¹…å±‚æ¡†æ¶==ï¼Œå®ƒæ”¯æŒå®šåˆ¶åŒ–SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚MyBatisé¿å…äº†å‡ ä¹æ‰€æœ‰çš„<code>JDBCä»£ç </code>å’Œ<code>æ‰‹åŠ¨è®¾ç½®å‚æ•°</code>ä»¥åŠ<code>è·å–ç»“æœé›†</code>ã€‚MyBatiså¯ä»¥ä½¿ç”¨ç®€å•çš„<code>XML</code>æˆ–<code>æ³¨è§£</code>æ¥é…ç½®å’Œæ˜ å°„åŸç”Ÿç±»å‹ã€æ¥å£å’ŒJavaçš„pojoï¼ˆå®ä½“ç±»ï¼‰ä¸ºæ•°æ®åº“ä¸­çš„è®°å½•ã€‚</p><p><strong>history</strong>ï¼šMyBatis æœ¬æ˜¯apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®<strong>iBatis</strong>ï¼Œ2010å¹´è¿™ä¸ª<a href="https://baike.baidu.com/item/%E9%A1%B9%E7%9B%AE/477803">é¡¹ç›®</a>ç”±apache software foundation è¿ç§»åˆ°äº†[google code](<a href="https://baike.baidu.com/item/google">https://baike.baidu.com/item/google</a> code/2346604)ï¼Œå¹¶ä¸”æ”¹åä¸ºMyBatis ã€‚2013å¹´11æœˆè¿ç§»åˆ°<a href="https://baike.baidu.com/item/Github/10145341">Github</a>ã€‚</p><h3 id="1-2-How-to-get-MyBatis"><a href="#1-2-How-to-get-MyBatis" class="headerlink" title="1.2 How to get MyBatis?"></a>1.2 How to get MyBatis?</h3><h4 id="1-2-1-download-from-github"><a href="#1-2-1-download-from-github" class="headerlink" title="1.2.1 download from github"></a><strong>1.2.1 download from github</strong></h4><ul><li><p><strong>é¦–å…ˆï¼Œæ‰“å¼€githubå®˜ç½‘æœç´¢MyBatisï¼Œä»è¿”å›ç»“æœä¸­æ‰¾åˆ°==mybatis/mybatis-3==ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatiså­¦ä¹ ç¬”è®°/mybatis_github.png" alt="mybatisä»githubä¸‹è½½" style="zoom: 67%;"></li></ul><ul><li><p><strong>ç‚¹å‡»ä¸Šå›¾çº¢è‰²çŸ©å½¢åœˆä½çš„éƒ¨åˆ†ï¼Œå•å‡»ç‚¹è¿›å»çœ‹åˆ°MyBatisçš„ä»£ç ç»“æ„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatiså­¦ä¹ ç¬”è®°/mybatis_github_code.png" alt="githubä¸­MyBatisçš„å…·ä½“æƒ…å†µ" style="zoom: 67%;"></li></ul><p>  <strong>ä»æºç ä¸­çš„pom.xmlæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ï¼Œè¿™æ˜¯ä¸€ä¸ªMavené¡¹ç›®ã€‚</strong></p><ul><li><p><strong>é‚£ä¹ˆï¼Œå¦‚ä½•ä¸‹è½½MyBatisé¡¹ç›®å‘¢ï¼Œæˆ‘ä»¬å¯ä»¥ç‚¹å‡»ä¸Šå›¾å·¦ä¾§çš„masterï¼Œå¼¹å‡ºä¸‹æ‹‰èœå•é€‰æ‹©ä¸‹è½½çš„ç‰ˆæœ¬ï¼Œæˆ–è€…ç‚¹å‡»å³ä¾§çš„ç»¿è‰²Codeä¸‹è½½æŒ‰é’®ï¼Œé€‰æ‹©ä¸‹è½½æ–¹å¼ã€‚</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatiså­¦ä¹ ç¬”è®°/mybatis_github_download.png" alt="githubä¸ŠMyBatisçš„ä¸‹è½½æ–¹å¼" style="zoom:75%;"></li></ul><h4 id="1-2-2-maven-dependency"><a href="#1-2-2-maven-dependency" class="headerlink" title="1.2.2 maven dependency"></a>1.2.2 maven dependency</h4><ul><li><p><strong>é¦–å…ˆåœ¨ç½‘é¡µåœ°å€æ è¾“å…¥Mavenä»“åº“urlï¼š<a href="https://mvnrepository.com/">https://mvnrepository.com/</a></strong></p></li><li><p><strong>è¿›å…¥å®˜ç½‘ä¹‹åç›´æ¥æœç´¢MyBatiså³å¯ï¼Œå¾—åˆ°ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤º</strong>ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatiså­¦ä¹ ç¬”è®°/mybatis_maven.png" alt="mavenä»“åº“MyBatisæœç´¢ç»“æœ" style="zoom:75%;"></li></ul><ul><li><p><strong>ç‚¹å‡»ç¬¬ä¸€ä¸ªç»“æœï¼Œè¿›å…¥é€‰æ‹©ç‰ˆæœ¬é¡µé¢ï¼Œç¬”è€…å¤„äºå­¦ä¹ é˜¶æ®µï¼Œé€‰æ‹©å’Œç‹‚ç¥ä¸€æ ·çš„3.5.2ç‰ˆæœ¬</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatiså­¦ä¹ ç¬”è®°/mybatis_maven_versions.png" alt="mybatisé€‰æ‹©3.5.2ç‰ˆæœ¬" style="zoom:75%;"></li></ul><ul><li><p>ç‚¹å‡»è¿›å…¥3.5.2ç‰ˆæœ¬ï¼Œè·å–ä¾èµ–çš„ä»£ç ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="1-3-persistance"><a href="#1-3-persistance" class="headerlink" title="1.3 persistance"></a>1.3 persistance</h3><p>persitanceæ„æ€ä¸º<strong>æŒä¹…åŒ–</strong>ï¼Œè¿™ä¸ªè¯è¯­åœ¨1.1çš„MyBaitsç®€ä»‹ä¸­æåˆ°è¿‡ï¼Œå†…æ¶µä¸º==æ•°æ®æŒä¹…åŒ–==ã€‚</p><ul><li>æ‰€è°“æŒä¹…åŒ–ï¼Œå°±æ˜¯<strong>å°†ç¨‹åºçš„æ•°æ®åœ¨==æŒä¹…çŠ¶æ€==å’Œ==ç¬æ—¶çŠ¶æ€==è½¬åŒ–çš„è¿‡ç¨‹</strong>ï¼Œä¹‹æ‰€ä»¥å¼•å…¥æŒä¹…åŒ–ï¼Œ<strong>æ˜¯å› ä¸ºæ•°æ®å­˜å‚¨åœ¨å†…å­˜</strong>çš„å¼Šç«¯ï¼š**==æ–­ç”µå³å¤±==**.</li><li>é™¤äº†æ¥ä¸‹æ¥è¦é“ºå¼€çš„MyBatisï¼Œå®ç°æ•°æ®æŒä¹…åŒ–è¿˜æœ‰ä¸¤ä¸ªæ¸ é“ï¼š<strong>æ•°æ®åº“ï¼ˆjdbcï¼‰</strong>å’Œ <strong>IOæ–‡ä»¶æŒä¹…åŒ–</strong>ï¼Œè€Œ<strong>IOæ–‡ä»¶æŒä¹…åŒ–</strong>ç‰¹åˆ«çš„å ç”¨èµ„æºã€‚</li><li>ç”±æ­¤å‘æ•£æ€æƒ³äºç”Ÿæ´»ï¼Œ<strong>ç”Ÿæ´»ä¸­æŒä¹…åŒ–</strong>çš„ä¾‹å­ä¹Ÿæ¯”æ¯”çš†æ˜¯ï¼Œæ¯”å¦‚å°†é£Ÿç‰©å†·è—åœ¨å®¶ç”¨å†°ç®±å’Œç½å¤´ã€‚ã€‚ã€‚</li></ul><p><strong>é‚£æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦æŒä¹…åŒ–å‘¢ï¼Ÿ</strong></p><ul><li><p>è¿™æ˜¯å› ä¸ºæœ‰ä¸€äº›æ•°æ®æˆ–è€…å¯¹è±¡ï¼Œæˆ‘ä»¬æ˜¯<strong>æ— æ³•æ‰¿å—å…¶ä¸¢å¤±çš„ä»£ä»·</strong>çš„ï¼Œæœ€ç®€å•çš„<strong>æ”¯ä»˜å®é‡Œçš„é‡‘é¢</strong>ã€‚</p></li><li><p>è¿˜æœ‰å¦å¤–ä¸€ä¸ªå¾ˆé‡è¦çš„å¤–åœ¨åŸå› ï¼Œå°±æ˜¯<strong>å†…å­˜å®åœ¨æ˜¯å¤ªTMè´µäº†</strong>ã€‚ã€‚ã€‚</p></li></ul><h3 id="1-4-persistance-layer"><a href="#1-4-persistance-layer" class="headerlink" title="1.4 persistance layer"></a>1.4 persistance layer</h3><p>persitance layer æ„æ€æ˜¯<strong>æŒä¹…å±‚</strong>ï¼Œæˆ‘ä»¬åœ¨ä¹‹å‰çš„JavaWebå­¦ä¹ ä¸­æœ‰<strong>Daoå±‚</strong>ã€Serviceå±‚å’Œ<strong>Controllerå±‚</strong>çš„æ¦‚å¿µï¼Œæ¯ä¸ªå±‚æ˜¯æœ‰å…¶å…·ä½“çš„ä¸šåŠ¡ã€‚æ‹¿è¿˜å°±é‚£ä¸ªä¸¾ä¸€åä¸‰ï¼ŒæŒä¹…å±‚çš„æ¦‚å¿µå°±æ˜¯ï¼š<strong>å®ŒæˆæŒä¹…åŒ–å·¥ä½œçš„ä»£ç å—</strong>ã€‚</p><p>å±‚å’Œå±‚ä¹‹é—´çš„<strong>ç•Œé™æ˜¯ååˆ†æ˜æ˜¾çš„</strong>ï¼Œå­¦ä¹ MyBaitså°±æ˜¯å­¦ä¹ ä¸€ä¸ªæŒä¹…å±‚æ¡†æ¶ï¼Œæˆ‘è¿ä¸€ä¸ªWebæ¡†æ¶éƒ½ç”¨ä¸åˆ°ï¼Œå°±åªç”¨ä¸€ä¸ªå•çº¯çš„æ™®é€šé¡¹ç›®å°±å¯ä»¥æŠŠæŒä¹…å±‚æ¡†æ¶å­¦ä¹ å®Œæˆã€‚</p><h3 id="1-5-Why-use-MyBatisï¼Ÿ"><a href="#1-5-Why-use-MyBatisï¼Ÿ" class="headerlink" title="1.5 Why use MyBatisï¼Ÿ"></a>1.5 Why use MyBatisï¼Ÿ</h3><ol><li><p>æœ€é€šä¿—çš„æ¥è¯´ï¼Œæœ€å…ˆæƒ³åˆ°çš„ä¼˜ç‚¹å°±æ˜¯<strong>æ–¹ä¾¿</strong></p></li><li><p>è¿˜æœ‰ä¸€ä¸ªåæ–¹å‘çš„ä¿ƒè¿›å› ç´ ï¼Œå°±æ˜¯ä¼ ç»Ÿçš„JDBCä»£ç å®åœ¨å¤ªå¤æ‚äº†ï¼Œé‚£å¼€å‘äººå‘˜å°±æ˜¯ä¸ºäº†ç®€åŒ–ï¼Œå¼€å‘å‡ºäº†MyBaitsæ¡†æ¶ã€‚é¢å¥½å§ï¼Œå…¶å®å°±æ˜¯æ‡’ï¼Œæ‰‹åŠ¨ç‹—å¤´ï¼Œä¸ºäº†å®ç°è‡ªåŠ¨åŒ–è€Œå¥‹æ–—ã€‚</p></li><li><p>å…·ä½“çš„æ¥è¯´ï¼ŒMyBatiså¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¨‹åºçŒ¿å°†æ•°æ®å­˜å…¥æ•°æ®åº“ã€‚</p></li><li><p>å…¶å®ï¼Œç”¨MyBatisä¹Ÿå¯å®¹æ˜“ä¸Šæ‰‹ï¼Œå¯¹å°ç™½ååˆ†å‹å¥½ã€‚</p></li><li><p>ä¸‹é¢ï¼Œè´´å‡ºç™¾åº¦ç™¾ç§‘å¯¹MyBatisçš„ä¼˜ç‚¹é™ˆè¿°ï¼š</p><ul><li><strong>ç®€å•æ˜“å­¦</strong>ï¼šæœ¬èº«å°±å¾ˆå°ä¸”ç®€å•ã€‚æ²¡æœ‰ä»»ä½•ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œæœ€ç®€å•å®‰è£…åªè¦ä¸¤ä¸ªjaræ–‡ä»¶+é…ç½®å‡ ä¸ªsqlæ˜ å°„æ–‡ä»¶æ˜“äºå­¦ä¹ ï¼Œæ˜“äºä½¿ç”¨ï¼Œé€šè¿‡æ–‡æ¡£å’Œæºä»£ç ï¼Œå¯ä»¥æ¯”è¾ƒå®Œå…¨çš„æŒæ¡å®ƒçš„è®¾è®¡æ€è·¯å’Œå®ç°ã€‚</li><li><strong>çµæ´»</strong>ï¼šmybatisä¸ä¼šå¯¹åº”ç”¨ç¨‹åºæˆ–è€…æ•°æ®åº“çš„ç°æœ‰è®¾è®¡å¼ºåŠ ä»»ä½•å½±å“ã€‚ sqlå†™åœ¨xmlé‡Œï¼Œä¾¿äºç»Ÿä¸€ç®¡ç†å’Œä¼˜åŒ–ã€‚é€šè¿‡sqlè¯­å¥å¯ä»¥æ»¡è¶³æ“ä½œæ•°æ®åº“çš„æ‰€æœ‰éœ€æ±‚ã€‚</li><li><strong>è§£é™¤sqlä¸ç¨‹åºä»£ç çš„è€¦åˆ</strong>ï¼šé€šè¿‡æä¾›DAOå±‚ï¼Œå°†ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è®¿é—®é€»è¾‘åˆ†ç¦»ï¼Œä½¿ç³»ç»Ÿçš„è®¾è®¡æ›´æ¸…æ™°ï¼Œæ›´æ˜“ç»´æŠ¤ï¼Œæ›´æ˜“å•å…ƒæµ‹è¯•ã€‚sqlå’Œä»£ç çš„åˆ†ç¦»ï¼Œæé«˜äº†å¯ç»´æŠ¤æ€§ã€‚</li><li><strong>æä¾›æ˜ å°„æ ‡ç­¾</strong>ï¼Œæ”¯æŒå¯¹è±¡ä¸æ•°æ®åº“çš„ormå­—æ®µå…³ç³»æ˜ å°„</li><li><strong>æä¾›å¯¹è±¡å…³ç³»æ˜ å°„æ ‡ç­¾</strong>ï¼Œæ”¯æŒå¯¹è±¡å…³ç³»ç»„å»ºç»´æŠ¤</li><li><strong>æä¾›xmlæ ‡ç­¾</strong>ï¼Œæ”¯æŒç¼–å†™åŠ¨æ€sqlã€‚</li></ul></li></ol><h2 id="2ã€First-MyBatis-project"><a href="#2ã€First-MyBatis-project" class="headerlink" title="2ã€First MyBatis project"></a>2ã€First MyBatis project</h2><h3 id="2-1-the-route"><a href="#2-1-the-route" class="headerlink" title="2.1 the route"></a>2.1 the route</h3><blockquote><p>æ­å»ºç¯å¢ƒâ€”â€”&gt;å¯¼å…¥MyBatisâ€”â€”&gt;ç¼–å†™ä»£ç â€”â€”&gt;æµ‹è¯•</p><p>åœ¨å†™ç¬¬ä¸€ä¸ªMyBatisé¡¹ç›®ä¹‹å‰å‘¢ï¼Œæˆ‘ä»¬éœ€è¦ç†ä¸€ä¸‹æ€è·¯ã€‚ç¬¬ä¸€ä¸ªæ­¥éª¤å°±æ˜¯**==æ­å»ºç¯å¢ƒ==<strong>ï¼Œæœ‰äº†ç¯å¢ƒä¹‹åï¼Œåé¢çš„å·¥ä½œå°±æ¯”è¾ƒç»Ÿä¸€äº†ï¼›ç¬¬äºŒæ­¥ï¼Œå°±æ˜¯</strong>==å¯¼å…¥MyBatisjaråŒ…==<strong>ï¼›ç¬¬ä¸‰æ­¥æ˜¯</strong>==ç¼–å†™ä»£ç ==<strong>ï¼›æœ€åä¸€æ­¥ä¸º</strong>==æµ‹è¯•==**ã€‚</p></blockquote><h3 id="2-2-build-environment"><a href="#2-2-build-environment" class="headerlink" title="2.2 build environment"></a>2.2 build environment</h3><p>myBatisæ˜¯è·Ÿæ•°æ®åº“è¿›è¡Œæ“ä½œçš„ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ­¥å°±æ˜¯**==æ­å»ºæ•°æ®åº“==**ã€‚</p><h4 id="2-2-1-build-database-environment"><a href="#2-2-1-build-database-environment" class="headerlink" title="2.2.1 build database environment"></a>2.2.1 build database environment</h4><p>åœ¨è¿™é‡Œï¼Œæ‰‹åŠ¨ç”¨SQLè¯­å¥å»ºåº“ã€å»ºè¡¨ã€æ·»åŠ å­—æ®µï¼Œç†Ÿæ‚‰ä¸€ä¸‹å¤§ä¸‰ä¸Šå­¦çš„æ•°æ®åº“çŸ¥è¯†ï¼Œ0âˆš0ã€‚</p><p>ç¬”è€…ç”¨çš„MySQLå¯è§†åŒ–å·¥å…·æ˜¯**==MySQL Workbench==**ã€‚</p><ul><li><p><strong>é¦–å…ˆè¿›å…¥é¦–é¡µï¼Œè¾“å…¥è´¦å·å¯†ç è¿æ¥MySQLæ•°æ®åº“ã€‚</strong></p><p><strong><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatiså­¦ä¹ ç¬”è®°/mysql_workbench.png" alt="MySQLè¿æ¥" style="zoom:75%;"></strong></p></li></ul><ul><li><p><strong>ç¬¬äºŒæ­¥ï¼Œä½¿ç”¨SQLè¯­å¥ç¼–å†™SQLè„šæœ¬ï¼Œè„šæœ¬ä»£ç å¦‚ä¸‹ä»£ç å—æ‰€ç¤ºã€‚</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- å»ºåº“<br>create database &#96;mybatis&#96;;<br>use &#96;mybatis&#96;;<br><br>-- å»ºè¡¨<br>create table &#96;user&#96; (<br>    &#96;id&#96; int(20) primary key auto_increment,<br>    &#96;name&#96; varchar(30) default null,<br>    &#96;pwd&#96; varchar(30) default null<br>)engine&#x3D;InnoDB default charset&#x3D;utf8;<br><br>-- æ’å…¥æ•°æ® <br>insert into &#96;user&#96;(&#96;id&#96;,&#96;name&#96;,&#96;pwd&#96;) values<br>(1,&#39;ä¹”å¨&#39;,&#39;123456&#39;),<br>(2,&#39;å¼ ä¸‰&#39;,&#39;123456&#39;),<br>(3,&#39;æå››&#39;,&#39;123456&#39;); <br></code></pre></td></tr></table></figure></li><li><p><strong>æ­å»ºæ•°æ®åº“å®Œæˆï¼Œä¸‹ä¸€æ­¥å°±æ˜¯</strong>è¦**==å¯¼å…¥jaråŒ…ï¼Œå¼€é¡¹ç›®äº†==**ã€‚</p></li></ul><h4 id="2-2-2-create-new-project"><a href="#2-2-2-create-new-project" class="headerlink" title="2.2.2 create new project"></a>2.2.2 create new project</h4><ul><li><p><strong>ç¬¬ä¸€æ­¥ï¼Œåˆ›å»ºä¸€ä¸ªæ™®é€šçš„mavené¡¹ç›®ï¼Œæ­¥éª¤å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</strong></p><p><img src="/posts/2020/12/31/MyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/mybatis_new_project.gif" alt="åˆ›å»ºé¡¹ç›®æ­¥éª¤1"></p></li></ul><ul><li><p><strong>ç¬¬äºŒæ­¥ï¼Œåˆ é™¤ç”Ÿæˆé¡¹ç›®çš„srcç›®å½•ï¼Œç”¨ä»¥å½“åš==çˆ¶å·¥ç¨‹==ã€‚</strong></p><p><img src="/posts/2020/12/31/MyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/delete_src.png" alt="åˆ é™¤è‡ªåŠ¨ç”Ÿæˆçš„srcç›®å½•"></p></li></ul><ul><li><p><strong>ç¬¬ä¸‰æ­¥ï¼Œåœ¨pomæ–‡ä»¶ä¸­å¯¼å…¥mavenä¾èµ–(mysqlé©±åŠ¨ï¼Œmybatiså’Œjunit)</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å¯¼å…¥ä¾èµ–--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--mysqlé©±åŠ¨--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.22<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--mybatis--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--junit--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="2-3-create-module"><a href="#2-3-create-module" class="headerlink" title="2.3 create module"></a>2.3 create module</h3><h4 id="2-3-1-new-empty-modue"><a href="#2-3-1-new-empty-modue" class="headerlink" title="2.3.1 new empty modue"></a>2.3.1 new empty modue</h4><ul><li><p><strong>å³é”®å•å‡»ä¸»ç›®å½•MyBatis-Studyï¼Œnew moduleï¼Œåˆ›å»ºæ™®é€šçš„å­æ¨¡å—mybatis-01</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatiså­¦ä¹ ç¬”è®°/mybatis-01-new.gif" alt="åˆ›å»ºä¸€ä¸ªæ¨¡å—" style="zoom:67%;"></li></ul><ul><li><p><strong>è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯ï¼Œå­é¡¹ç›®ä¸ç”¨æ¯æ¬¡å†å¯¼åŒ…äº†ï¼Œç”¨çš„éƒ½æ˜¯çˆ¶é¡¹ç›®çš„åŒ…ã€‚</strong></p></li><li><p><strong>ä¸æ­¤åŒæ—¶ï¼Œçˆ¶é¡¹ç›®çš„pomæ–‡ä»¶ä¸­å¤šäº†ä¸€ä¸ª<module></module>æ ‡ç­¾ï¼Œè¡¨ç¤ºåˆšæ‰åˆ›å»ºçš„å­æ¨¡å—ã€‚</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>mybatis-01<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h4 id="2-3-2-write-core-configuration-file"><a href="#2-3-2-write-core-configuration-file" class="headerlink" title="2.3.2 write core configuration file"></a>2.3.2 write core configuration file</h4><blockquote><p><strong>ç¼–å†™æ ¸å¿ƒé…ç½®æ–‡ä»¶</strong></p></blockquote><ul><li><p><strong>ä»XMLä¸­æ„å»ºsqlSessionFactory</strong></p><p>èƒŒæ™¯ï¼šæ¯ä¸ªåŸºäº MyBatis çš„åº”ç”¨éƒ½æ˜¯ä»¥ä¸€ä¸ª SqlSessionFactory çš„å®ä¾‹ä¸ºæ ¸å¿ƒçš„ã€‚SqlSessionFactory çš„å®ä¾‹å¯ä»¥é€šè¿‡ SqlSessionFactoryBuilder è·å¾—ã€‚è€Œ SqlSessionFactoryBuilder åˆ™å¯ä»¥ä» XML é…ç½®æ–‡ä»¶æˆ–ä¸€ä¸ªé¢„å…ˆé…ç½®çš„ Configuration å®ä¾‹æ¥æ„å»ºå‡º SqlSessionFactory å®ä¾‹ã€‚</p><p><strong>XML é…ç½®æ–‡ä»¶ä¸­åŒ…å«äº†å¯¹ MyBatis ç³»ç»Ÿçš„æ ¸å¿ƒè®¾ç½®</strong>ï¼ŒåŒ…æ‹¬è·å–æ•°æ®åº“è¿æ¥å®ä¾‹çš„æ•°æ®æºï¼ˆDataSourceï¼‰ä»¥åŠå†³å®šäº‹åŠ¡ä½œç”¨åŸŸå’Œæ§åˆ¶æ–¹å¼çš„äº‹åŠ¡ç®¡ç†å™¨ï¼ˆTransactionManagerï¼‰ã€‚åé¢ä¼šå†æ¢è®¨ XML é…ç½®æ–‡ä»¶çš„è¯¦ç»†å†…å®¹ï¼Œè¿™é‡Œå…ˆç»™å‡ºä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">configuration</span></span><br><span class="hljs-meta">  <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="hljs-meta">  <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>åœ¨mybatisç›®å½•ä¸‹çš„resourcesä¸­å»ºç«‹ä¸€ä¸ªXMLæ–‡ä»¶ï¼Œåä¸ºï¼šmybatis-config.xml</strong>ï¼Œ<strong>å°†ä¸Šé¢çš„é…ç½®æ–‡ä»¶å†…å®¹å¤åˆ¶åˆ°è¯¥xmlæ–‡ä»¶ä¸­ã€‚</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatiså­¦ä¹ ç¬”è®°/mybatis_config.png" alt="mybatisé…ç½®æ–‡ä»¶" style="zoom: 67%;"></li></ul><ul><li><p><strong>é…ç½®æ–‡ä»¶è§£æå’Œè‡ªå·±æ‰‹åŠ¨é…ç½®</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--configurationæ ¸å¿ƒé…ç½®æ–‡ä»¶--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--å¯ä»¥é…ç½®å¤šå¥—ç¯å¢ƒ defaultä¸ºé»˜è®¤é€‰æ‹©çš„ç¯å¢ƒ--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--äº‹åŠ¡ç®¡ç†æ–¹å¼é€‰æ‹©JDBCçš„äº‹åŠ¡ç®¡ç†--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>/&gt;</span><br>            <span class="hljs-comment">&lt;!--è¿æ¥æ•°æ®åº“çš„é…ç½®ï¼Œæ”¹ä¸ºè‡ªå·±çš„--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span><br>                <span class="hljs-comment">&lt;!--&amp;amp;ä¸º&amp;çš„è½¬ä¹‰ç¬¦--&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/mybatis?characterEncoding=UTF-8<span class="hljs-symbol">&amp;amp;</span>serverTimezone=GMT&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;root&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;zuiweizhiming666&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><ul><li><p><strong>è¿æ¥æ•°æ®åº“ï¼ˆé€‰æ‹©æ•°æ®åº“ä¸ºæ­å»ºç¯å¢ƒæ—¶åˆ›å»ºçš„mybatisï¼‰</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatiså­¦ä¹ ç¬”è®°/mybatis-connect-database.gif" alt="ideaæ•°æ®åº“" style="zoom:67%;"></li></ul><h4 id="2-3-3-write-utility-class"><a href="#2-3-3-write-utility-class" class="headerlink" title="2.3.3 write utility class"></a>2.3.3 write utility class</h4><blockquote><p>å¯¹äºåŠ è½½resourcesä¸‹çš„é…ç½®æ–‡ä»¶çš„æ—¶å€™ï¼Œç”±äºå®ƒå æ®IOèµ„æºï¼Œæˆ‘ä»¬æŠŠå®ƒæŠ½æˆä¸€ä¸ªå·¥å…·ç±»ã€‚</p></blockquote><ul><li><p><strong>åœ¨javaç›®å½•ä¸‹åˆ›å»ºcom.atrox.utilsåŒ…ï¼Œå†åœ¨utilsåŒ…ä¸‹åˆ›å»ºMyBatisUtilsç±»</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatiså­¦ä¹ ç¬”è®°/mybatis_utils.png" alt="mybatiså·¥å…·ç±»" style="zoom: 67%;"></li></ul><ul><li><p><strong>åœ¨è¯¥ç±»æ ¹æ®MyBatis3ä¸­æ–‡æ–‡æ¡£æ¥å¡«å……å†…å®¹ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.apache.ibatis.io.Resources;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSession;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><br><span class="hljs-comment">//sqlSessionFactory æ¥æ„å»º sqlSession</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBatisUtils</span> </span>&#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SqlSessionFactory sqlSessionFactory;<br><br>    <span class="hljs-keyword">static</span> &#123;<br>        InputStream inputStream = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">// ä½¿ç”¨MyBatisç¬¬ä¸€æ­¥ï¼šè·å–sqlSessionFactoryå¯¹è±¡</span><br>            <span class="hljs-comment">// èµ„æºè·¯å¾„</span><br>            String resource = <span class="hljs-string">&quot;mybatis-config.xml&quot;</span>;<br>            <span class="hljs-comment">// ä»¥æµçš„æ–¹å¼åŠ è½½é…ç½®æ–‡ä»¶</span><br>            inputStream = Resources.getResourceAsStream(resource);<br>            <span class="hljs-comment">// é€šè¿‡æµçš„æ–¹å¼æŠŠinputStreamåŠ è½½è¿›æ¥</span><br>            sqlSessionFactory = <span class="hljs-keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// æ—¢ç„¶æœ‰äº†SqlSessionFactoryï¼Œé¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»ä¸­è·å¾—SqlSessionçš„å®ä¾‹äº†</span><br>    <span class="hljs-comment">// SqlSession å®Œå…¨åŒ…å«äº†é¢å‘æ•°æ®åº“æ‰§è¡ŒSQLå‘½ä»¤æ‰€éœ€çš„æ‰€æœ‰æ–¹æ³•äº†</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SqlSession <span class="hljs-title">getSqlSession</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> sqlSessionFactory.openSession();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure></li></ul><h3 id="2-4-coding"><a href="#2-4-coding" class="headerlink" title="2.4 coding"></a>2.4 coding</h3><blockquote><p>ç¼–å†™ä»£ç </p></blockquote><h4 id="2-4-1-Entity-class"><a href="#2-4-1-Entity-class" class="headerlink" title="2.4.1 Entity class"></a>2.4.1 Entity class</h4><p><strong><code>ç¼–å†™å®ä½“ç±»</code></strong>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“</p><ul><li><p><strong>åœ¨com.atroxä¸‹å»ºç«‹pojoåŒ…</strong> <img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatiså­¦ä¹ ç¬”è®°/mybatis_pojo.png" alt="mybatiså®ä½“ç±»" style="zoom:67%;"></p></li><li><p><strong>åœ¨pojoåŒ…ä¸‹å»ºç«‹å¯¹åº”æ•°æ®åº“MyBatisçš„è¡¨Userå®ä½“ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// Userå®ä½“ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String pwd;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">User</span><span class="hljs-params">()</span> </span>&#123;<br><br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">User</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id, String name, String pwd)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.id = id;<br>        <span class="hljs-keyword">this</span>.name = name;<br>        <span class="hljs-keyword">this</span>.pwd = pwd;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getId</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> id;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setId</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.id = id;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getPwd</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> pwd;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setPwd</span><span class="hljs-params">(String pwd)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.pwd = pwd;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;User&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;id=&quot;</span> + id +<br>                <span class="hljs-string">&quot;, name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, pwd=&#x27;&quot;</span> + pwd + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>æœ€ç»ˆæ•ˆæœ</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatiså­¦ä¹ ç¬”è®°/mybaits_final_pojo.png" alt="mybatisç¼–å†™å®ä½“ç±»æˆªå›¾" style="zoom: 67%;"></li></ul><h4 id="2-4-2-Mapper"><a href="#2-4-2-Mapper" class="headerlink" title="2.4.2 Mapper"></a>2.4.2 Mapper</h4><p><strong><code>ç¼–å†™å®ä½“ç±»çš„Mapper</code></strong>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p><ul><li><p><strong>åœ¨com.atrox.daoä¸‹å»ºç«‹æ¥å£æ–‡ä»¶ï¼Œåä¸ºï¼šUserDaoï¼Œåœ¨æ¥å£é‡Œå®šä¹‰ä¸€ä¸ªæŸ¥è¯¢Userçš„æ–¹æ³•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.atrox.pojo.User;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserDao</span> </span>&#123;<br>    <span class="hljs-function">List&lt;User&gt; <span class="hljs-title">getUserList</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>åœ¨com.atrox.daoä¸‹å»ºç«‹Mapperé…ç½®æ–‡ä»¶ï¼Œåä¸ºUserMapper.xmlï¼Œå–ä»£äº†ä¹‹å‰çš„æ¥å£å®ç°ç±»</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span></span><br><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!--namespaceç»‘å®šä¸€ä¸ªå¯¹åº”çš„Dao/Mapperæ¥å£--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.atrox.dao.UserDao&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--SQLæŸ¥è¯¢è¯­å¥--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserList&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.atrox.pojo.User&quot;</span>&gt;</span><br>        select * from mybatis.user<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>æœ€ç»ˆæ•ˆæœ</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatiså­¦ä¹ ç¬”è®°/mybatis_dao.png" alt="æœ€ç»ˆæ•ˆæœ" style="zoom:67%;"></li></ul><h3 id="2-5-junit-test"><a href="#2-5-junit-test" class="headerlink" title="2.5 junit test"></a>2.5 junit test</h3><blockquote><p>æµ‹è¯•ï¼Œåœ¨srcç›®å½•ä¸‹çš„teståŒ…ä¸‹è¿›è¡Œ</p></blockquote><ul><li><p><strong>åœ¨srcä¸‹çš„javaåŒ…ä¸‹å»ºç«‹com.atrox.daoåŒ…ï¼Œåœ¨åŒ…ä¸‹å»ºç«‹UserDaoTestç±»ï¼Œä¸ä¸Šé¢ä¸€ä¸€å¯¹åº”</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatiså­¦ä¹ ç¬”è®°/mybatis_test.png" alt="å®Œå–„ç›®å½•ç»“æ„" style="zoom:67%;"></li></ul><ul><li><p><strong>åœ¨UserDaoTestä¸­æµ‹è¯•getUserList</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.atrox.pojo.User;<br><span class="hljs-keyword">import</span> com.atrox.utils.MyBatisUtils;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSession;<br><span class="hljs-keyword">import</span> org.junit.Test;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoTest</span> </span>&#123;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span> </span>&#123;<br><br>        <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šè·å¾—SqlSessionå¯¹è±¡</span><br>        SqlSession sqlSession = MyBatisUtils.getSqlSession();<br><br>        <span class="hljs-comment">// æ–¹å¼ä¸€ï¼šgetMapper</span><br>        UserDao mapper = sqlSession.getMapper(UserDao.class);<br>        List&lt;User&gt; userList = mapper.getUserList();<br>        <span class="hljs-keyword">for</span> (User user : userList) &#123;<br>            System.out.println(user);<br>        &#125;<br><br>        <span class="hljs-comment">// å…³é—­SqlSession</span><br>        sqlSession.close();<br><br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>æ‰§è¡Œåï¼ŒæŠ¥é”™org.apache.ibatis.binding.BindingExceptionï¼ŒåŸå› æ˜¯æ²¡æœ‰åœ¨mybatis-config.xmlä¸­æ³¨å†Œmapperï¼Œåº”è¯¥åœ¨é‡Œé¢åŠ ä¸Š</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--æ¯ä¸€ä¸ªMapper.xmléƒ½éœ€è¦åœ¨Mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œï¼--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;com.atrox.dao/UserMapper.xml&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>å†æ¬¡æ‰§è¡Œï¼ŒæŠ¥é”™java.lang.ExceptionInInitializerError:åˆå§‹åŒ–é—®é¢˜ï¼ŒCould not find resource com.atrox.dao/UserMapper.xml</strong></p><p>åŸå› ï¼šMavenç”±äºå®ƒçš„çº¦å®šå¤§äºé…ç½®ï¼Œç¬”è€…çš„é…ç½®æ–‡ä»¶ï¼Œæ— æ³•è¢«å¯¼å‡ºæˆ–è€…ç”Ÿæ•ˆï¼Œè§£å†³æ–¹æ¡ˆï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h4 id="bigProblem"><a href="#bigProblem" class="headerlink" title="bigProblem"></a>bigProblem</h4><p>åœ¨ç‹‚ç¥çš„è§†é¢‘ä¸­ï¼Œå½“åœ¨mavenä¸­åŠ å…¥ä¸Šé¢çš„<build></build>åï¼Œæµ‹è¯•çš„ä¼ ç»“æœå°±å‡ºæ¥äº†ã€‚ä½†æ˜¯ç¬”è€…è¿™é‡ŒæŠ¥äº†ä¸€ä¸ªé”™è¯¯ï¼š<strong>Could not find resource mybatis-config.xml</strong>ï¼Œå¹¶ä¸”ç”±äºè¿™ä¸ªé—®é¢˜ï¼Œè¿˜å¯¼è‡´äº†åœ¨MyBatisUtils.classåŠ è½½èµ„æºæ—¶çš„<strong>ç©ºæŒ‡é’ˆé—®é¢˜</strong>ã€‚</p><p>åœ¨Bç«™çš„å¼¹å¹•ä¸­ï¼Œæˆ‘æ‰¾åˆ°äº†è¿™ä¹ˆå‡ æ¡<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼Œå¹¶è¿›è¡Œäº†ä¸€äº›å°è¯•ï¼š</p><p><strong>â‘ è¿æ¥æ•°æ®åº“urlä¸­ï¼ŒuseSSL=trueæ”¹æˆfalse</strong></p><p>æ­¤æ–¹æ¡ˆï¼Œç¬”è€…æ²¡æœ‰åº”ç”¨ï¼Œå› ä¸ºæˆ‘çš„é…ç½®æ–‡ä»¶ä¸­urlæ ¹æœ¬å°±æ²¡æœ‰åŠ ä¸ŠuseSSLè¿™ä¸€å‚æ•°</p><p><strong>â‘¡MyBatisUtilsä¿®æ”¹ä»£ç </strong></p><p>åˆç†çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBatisUtils</span> </span>&#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SqlSessionFactory sqlSessionFactory;<br><br>    <span class="hljs-keyword">static</span> &#123;<br>        InputStream inputStream = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">// ä½¿ç”¨MyBatisç¬¬ä¸€æ­¥ï¼šè·å–sqlSessionFactoryå¯¹è±¡</span><br>            <span class="hljs-comment">// èµ„æºè·¯å¾„</span><br>            String resource = <span class="hljs-string">&quot;mybatis-config.xml&quot;</span>;<br>            <span class="hljs-comment">// ä»¥æµçš„æ–¹å¼åŠ è½½é…ç½®æ–‡ä»¶</span><br>            inputStream = Resources.getResourceAsStream(resource);<br>            <span class="hljs-comment">// é€šè¿‡æµçš„æ–¹å¼æŠŠinputStreamåŠ è½½è¿›æ¥</span><br>            sqlSessionFactory = <span class="hljs-keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// æ—¢ç„¶æœ‰äº†SqlSessionFactoryï¼Œé¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»ä¸­è·å¾—SqlSessionçš„å®ä¾‹äº†</span><br>    <span class="hljs-comment">// SqlSession å®Œå…¨åŒ…å«äº†é¢å‘æ•°æ®åº“æ‰§è¡ŒSQLå‘½ä»¤æ‰€éœ€çš„æ‰€æœ‰æ–¹æ³•äº†</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SqlSession <span class="hljs-title">getSqlSession</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> sqlSessionFactory.openSession();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™ä¸€æ¡ï¼Œç¬”è€…ä¸è‡ªå·±çš„å¯¹æ¯”ï¼Œå‘ç°è‡ªå·±å†™çš„æ²¡æœ‰é”™è¯¯ã€‚</p><p><strong>â‘¢UserMapper.xmlå»æ‰ä¸­æ–‡æ³¨é‡Š</strong></p><p>å°è¯•ï¼Œæ— æ•ˆæœã€‚</p><p><strong>â‘£mybatis-config.xmlå»æ‰ä¸­æ–‡æ³¨é‡Š</strong></p><p>å°è¯•ï¼Œæ— æ•ˆæœã€‚</p><p><strong>â‘¤maven è¿›è¡Œcleanï¼Œé‡æ–°build</strong></p><p>å°è¯•ï¼Œæ— æ•ˆæœã€‚</p><p>è‡³æ­¤ï¼Œæˆ‘æ„Ÿè§‰åˆ°äº†ä¸€ä¸é˜´å†·å’Œè¯¡å¼‚ï¼Œæˆ‘èƒ½æ„Ÿè§‰å¾—åˆ°è¿™ä¸ª<strong>é”™è¯¯çš„æ ¹æºå’Œæˆ‘éå¸¸çš„æ¥è¿‘</strong>ï¼Œå°±æ½œä¼åœ¨æˆ‘çš„èº«è¾¹ï¼Œé™æ‚„æ‚„çš„è›°ä¼ï¼Œçœ‹ç€æˆ‘çš„ä¸€æ¬¡æ¬¡ç„¦è™‘ä¸æ°”é¦ã€‚</p><p>ç»ˆäºï¼Œæˆ‘åœ¨Bç«™ä¸‹è¯¥è§†é¢‘çš„ç¬¬6é¡µçš„è¯„è®ºï¼Œå‘ç°äº†ä¸€ä¸ªè¢«åŸ‹æ²¡ä½†ä»ç„¶è¢«å‹‡æ•¢æå‡ºæ¥çš„è§£å†³æ–¹æ¡ˆï¼š<strong>æŸ¥çœ‹<build></build>ä¸‹çš„<includes></includes>æ˜¯å¦è¢«å†™æˆäº†<excludes></excludes></strong></p><p>ç¬”è€…çš„å…´å¥‹éš¾æ©ï¼Œæ€¥å¿™æŸ¥çœ‹ï¼Œæœä¸å…¶ç„¶ã€‚ç‹‚ç¥çš„æ˜¯includesï¼Œè€Œæˆ‘çš„æ˜¯excludesã€‚æˆ‘ä¸ç¦æ„Ÿæ…¨ï¼Œäººæ°‘å†…éƒ¨æœ‰åäººå•Šï¼è¿™è¯¯å¯¼äººçš„CSDNåšä¸»ï¼Œæˆ‘è¦æ°”æ­»äº†ï¼ˆæˆ‘ä»ä»–é‚£é‡Œå¤åˆ¶çš„ï¼‰ã€‚å›æƒ³èµ·ä¹‹å‰åšMavené¡¹ç›®æ—¶ï¼Œæœ‰äº›èµ„æºæ‰“ä¸äº†åŒ…çš„ç§ç§ç°è±¡ï¼Œæˆ‘æç„¶å¤§æ‚Ÿï¼</p><p>é‡è·‘ä¸€éï¼Œç»“æœå‡ºä¹æˆ‘çš„æ„æ–™ï¼Œé”™è¯¯å›åˆ°äº†åŸæ¥çš„åœ°æ–¹ï¼Œæ‰¾ä¸åˆ°UserMapper.xmlã€‚å¥½å§ï¼Œæ¥ç€æ‰¾ï¼Œç»ˆäºæˆ‘åœ¨æ­¤è§†é¢‘ä¸‹ç¬¬10é¡µçš„è¯„è®ºä¸­å‘ç°äº†ä¸€æ¡è§£å†³æ–¹æ¡ˆï¼š<strong>mybatis-config.xmlä¸­æ³¨å†Œé…ç½®æ–‡ä»¶çš„åœ°æ–¹ä¿®æ”¹mapperæ ‡ç­¾çš„resource</strong></p><p><strong>é”™è¯¯çš„</strong>ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;com.atrox.dao/UserMapper.xml&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br></code></pre></td></tr></table></figure><p>==<strong>æ­£ç¡®çš„ï¼š</strong>==</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;com/atrox/dao/UserMapper.xml&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æœ€ç»ˆï¼Œé—®é¢˜å¾—ä»¥è§£å†³å•¦ï¼æ„Ÿè°¢Bç«™ï¼Œæ„Ÿè°¢äº’è”ç½‘çš„æ©èµï¼</p><h3 id="2-6-general-thoughts"><a href="#2-6-general-thoughts" class="headerlink" title="2.6 general thoughts"></a>2.6 general thoughts</h3><blockquote><p>æ€»ä½“çš„æ€è·¯</p></blockquote><ol><li>ç¬¬ä¸€ä»¶äº‹æƒ…ï¼Œè¿æ¥äº†æ•°æ®åº“ï¼Œå¯¼å…¥äº†åŸºæœ¬çš„MySQLå’ŒMyBatisçš„jaråŒ…</li><li>ç¬¬äºŒä»¶äº‹æƒ…ï¼Œä¸ºäº†æ‹¿åˆ°SqlSessionFactoryå¯¹è±¡ï¼Œä¸ºæ­¤æˆ‘ä»¬å»ºç«‹è€Œæ¥ä¸€ä¸ªå·¥å…·ç±»MyBatisUtils.class</li><li>ç¬¬ä¸‰ä»¶äº‹æƒ…ï¼Œå†™äº†mybatis-config.xmlæ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹äº†å…¶ä¸­çš„è¿æ¥æ•°æ®åº“çš„é€‰é¡¹å‚æ•°å€¼ã€‚</li><li>ç¬¬å››ä»¶äº‹æƒ…ï¼Œæˆ‘ä»¬å†™äº†å®ä½“ç±»Userå’Œæ¥å£UserDao</li><li>ç¬¬äº”ä»¶äº‹æƒ…ï¼Œç”¨UserMapperæ–‡ä»¶ä»£æ›¿ä¹‹å‰çš„å®ç°ç±»ã€‚</li><li>ç¬¬å…­ä»¶äº‹æƒ…ï¼Œå°†UserMapperåœ¨mybatis-configæ–‡ä»¶ä¸­æ³¨å†Œã€‚</li><li>æµ‹è¯•ã€‚</li></ol><h3 id="2-7-tips"><a href="#2-7-tips" class="headerlink" title="2.7 tips"></a>2.7 tips</h3><p>åœ¨mybatisçš„å®˜æ–¹æ–‡æ¡£ä¸­ï¼Œå»ºè®®æ¶‰åŠsqlSessionå…³é—­çš„åœ°æ–¹ï¼Œéƒ½æŠŠå…³é—­è¿™ä¸ªèµ„æºçš„ä»£ç æ”¾åœ¨finallyä¸­ã€‚</p><p>äºæ˜¯ï¼Œä¹‹å‰çš„UserDaoTestçš„ä»£ç æ”¹ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.atrox.pojo.User;<br><span class="hljs-keyword">import</span> com.atrox.utils.MyBatisUtils;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSession;<br><span class="hljs-keyword">import</span> org.junit.Test;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoTest</span> </span>&#123;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span> </span>&#123;<br><br>        <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šè·å¾—SqlSessionå¯¹è±¡</span><br>        SqlSession sqlSession = MyBatisUtils.getSqlSession();<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">// æ–¹å¼ä¸€ï¼šgetMapper</span><br>            UserDao mapper = sqlSession.getMapper(UserDao.class);<br>            List&lt;User&gt; userList = mapper.getUserList();<br>            <span class="hljs-keyword">for</span> (User user : userList) &#123;<br>                System.out.println(user);<br>            &#125;<br>        &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>            e.printStackTrace();<br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-comment">// å…³é—­SqlSession</span><br>            sqlSession.close();<br>        &#125;<br><br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="3ã€CRUD"><a href="#3ã€CRUD" class="headerlink" title="3ã€CRUD"></a>3ã€CRUD</h2><p>é¦–å…ˆï¼Œå°†ä¸Šé¢çš„UserDaoæ¥å£æ”¹åä¸ºUserMapperï¼Œåœ¨é‡å‘½åçš„æ—¶å€™ï¼ŒIDEAå¼¹å‡ºäº†ä¸€ä¸ªé€‰é¡¹ã€‚æ˜¯å¦ä¿®æ”¹ä¸ä¹‹æœ‰å…³çš„æ–‡ä»¶ã€‚ç¬”è€…ç‚¹å‡»äº†ç¡®å®šï¼Œå‘ç°è¿å‡ºç°UserDaoåœ°æ–¹çš„æ–‡ä»¶åä¹Ÿæ”¹äº†ï¼Œä¸æ¨èç‚¹å‡»ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatiså­¦ä¹ ç¬”è®°/mybatis_rename.png" alt="é‡å‘½åè¯·æ±‚æ¡†" style="zoom:67%;"><p>å½“ä¿®æ”¹ä¸ºUserMapperï¼Œ<strong>åº”è¯¥åœ¨UserMapper.xmlä¸­ä½œç›¸åº”ä¿®æ”¹</strong>,<strong>namespaceä¸­çš„æŠ¥ååº”å’Œæ¥å£çš„åŒ…åä¸€è‡´ã€‚</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.atrox.dao.UserMapper&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserList&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.atrox.pojo.User&quot;</span>&gt;</span><br>        select * from mybatis.user<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>åœ¨UserMapperTestä¹Ÿè¦åšç›¸åº”çš„ä¿®æ”¹</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">UserMapper mapper = sqlSession.getMapper(UserMapper.class);<br></code></pre></td></tr></table></figure><p>åœ¨<strong>UserMapper.xml</strong>ä¸­ï¼Œ<strong>selectæ ‡ç­¾çš„id</strong>ä¸ºnamespaceä¸­çš„æ–¹æ³•åï¼Œ<strong>resultTypeä¸ºSQLè¯­å¥çš„è¿”å›å€¼</strong>ï¼Œå¦‚æœæ¶‰åŠåˆ°å‚æ•°ï¼Œè¿˜æœ‰<strong>parameterType</strong>ï¼Œä¸ºå‚æ•°ç±»å‹ï¼Œæ¯”å¦‚å¢åˆ æ”¹æŸ¥çš„æ¡ä»¶æˆ–æ ¹æ®æŸäº›idçš„ç±»å‹ã€‚</p><h3 id="3-1-select"><a href="#3-1-select" class="headerlink" title="3.1 select"></a>3.1 select</h3><p><strong>ç¬¬ä¸€æ­¥ï¼Œåœ¨UserMapperæ¥å£ä¸­å¢åŠ æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·çš„æ–¹æ³•</strong>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function">User <span class="hljs-title">getUserById</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span></span>;<br></code></pre></td></tr></table></figure><p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå½“ç¬”è€…åœ¨æ¥å£ä¸­å†™ä¸‹äº†æ­¤æ–¹æ³•æ—¶ï¼ŒæŒ‰ä¸‹Alt + Enter ç«Ÿç„¶å¼¹å‡ºäº†<strong>MybatisGenerator new statement</strong>çš„é€‰é¡¹ï¼Œç¡®è®¤åï¼Œåœ¨UserMapper.xmlä¸­å‡ºç°äº†</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;select id=&quot;getUserById&quot; resultType=&quot;com.atrox.pojo.User&quot;&gt;&lt;/select&gt;<br></code></pre></td></tr></table></figure><p>è™½ç„¶ä»£ç ä¸å…¨ï¼Œä½†ä¹Ÿååˆ†<strong>äººæ€§åŒ–</strong>ï¼</p><p><strong>ç¬¬äºŒæ­¥ï¼Œåœ¨UserMapper.xmlä¸­å®Œå–„æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·çš„sqlè¯­å¥ï¼Œå®Œå–„åå¦‚ä¸‹ä»£ç ï¼š</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserById&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.atrox.pojo.User&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;int&quot;</span>&gt;</span><br>select * from mybatis.user where id = #&#123;id&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œéœ€è¦å–å‡ºæ¥çš„æ˜¯<strong>idï¼Œè¿™é‡Œç”¨#{}æ¥å–</strong>ï¼Œä¹Ÿå¯ä»¥ç”¨${}æ¥å–ï¼Œä½†æ˜¯å¯èƒ½å­˜åœ¨SQLæ³¨å…¥é—®é¢˜ã€‚</p><p><strong>ç¬¬ä¸‰æ­¥</strong>ï¼Œ<strong>æµ‹è¯•æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·</strong>ï¼Œä»£ç å¦‚ä¸‹ï¼Œæ¯”èµ·ä¹‹å‰ååˆ†ç®€æ´ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"> <span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getUserById</span><span class="hljs-params">()</span> </span>&#123;<br>    SqlSession sqlSession = MyBatisUtils.getSqlSession();<br>    UserMapper mapper = sqlSession.getMapper(UserMapper.class);<br>    User user = mapper.getUserById(<span class="hljs-number">1</span>);<br>    System.out.println(user);<br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-2-insert"><a href="#3-2-insert" class="headerlink" title="3.2 insert"></a>3.2 insert</h3><p><strong>ç¬¬ä¸€æ­¥ï¼Œåœ¨UserMapperæ¥å£å¢åŠ æ·»åŠ ç”¨æˆ·çš„æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// insertä¸€ä¸ªç”¨æˆ·</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">addUser</span><span class="hljs-params">(User user)</span></span>;<br></code></pre></td></tr></table></figure><p><strong>ç¬¬äºŒæ­¥ï¼Œåœ¨UserMapper.xmlä¸­å®Œå–„æ’å…¥ç”¨æˆ·çš„SQLè¯­å¥ï¼Œå®Œå–„åå¦‚ä¸‹ä»£ç ï¼š</strong></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;!--å¯¹è±¡ä¸­çš„å±æ€§ï¼Œå¯ä»¥ç›´æ¥å–å‡ºæ¥--&gt;<br>    &lt;insert id=<span class="hljs-string">&quot;addUser&quot;</span> parameterType=<span class="hljs-string">&quot;com.atrox.pojo.User&quot;</span>&gt;<br>    insert into mybatis.user (id,name,pwd) values (#&#123;id&#125;,#&#123;name&#125;,#&#123;pwd&#125;);<br>&lt;/insert&gt;<br></code></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œæˆ‘ä»¬æ–¹æ³•ç©¿çš„æ˜¯Userå¯¹è±¡ï¼Œ<strong>ä½†æ˜¯valuesåé¢çš„idï¼Œnameï¼Œpwdå¯ä»¥ç›´æ¥å–å‡ºæ¥</strong>ã€‚</p><p><strong>ç¬¬ä¸‰æ­¥ï¼Œæµ‹è¯•æ·»åŠ ç”¨æˆ·</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addUser</span><span class="hljs-params">()</span> </span>&#123;<br>    SqlSession sqlSession = MyBatisUtils.getSqlSession();<br>    UserMapper mapper = sqlSession.getMapper(UserMapper.class);<br>    mapper.addUser(<span class="hljs-keyword">new</span> User(<span class="hljs-number">4</span>,<span class="hljs-string">&quot;å¤§å¸é©¬&quot;</span>,<span class="hljs-string">&quot;123456&quot;</span>));<br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬æµ‹è¯•åï¼Œå‘ç°<strong>æ•°æ®åº“é‡Œå¹¶æ²¡æœ‰æˆ‘ä»¬æ–°åŠ çš„ç”¨æˆ·</strong>ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸º<strong>å¢åˆ æ”¹æ˜¯éœ€è¦æäº¤äº‹åŠ¡çš„ï¼ï¼ï¼</strong></p><p>äºæ˜¯æµ‹è¯•ä»£ç æ”¹ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å¢åˆ æ”¹éœ€è¦æäº¤äº‹åŠ¡</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addUser</span><span class="hljs-params">()</span> </span>&#123;<br>    SqlSession sqlSession = MyBatisUtils.getSqlSession();<br>    UserMapper mapper = sqlSession.getMapper(UserMapper.class);<br>    <span class="hljs-keyword">int</span> updateRows = mapper.addUser(<span class="hljs-keyword">new</span> User(<span class="hljs-number">4</span>, <span class="hljs-string">&quot;å¤§å¸é©¬&quot;</span>, <span class="hljs-string">&quot;123456&quot;</span>));<br>    <span class="hljs-keyword">if</span> (updateRows &gt; <span class="hljs-number">0</span>) &#123;<br>        System.out.println(<span class="hljs-string">&quot;æ’å…¥æˆåŠŸï¼&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">// æäº¤äº‹åŠ¡</span><br>    sqlSession.commit();<br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-3-update"><a href="#3-3-update" class="headerlink" title="3.3 update"></a>3.3 update</h3><p><strong>ç¬¬ä¸€æ­¥ï¼Œåœ¨UserMapperæ¥å£å¢åŠ ä¿®æ”¹ç”¨æˆ·çš„æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ä¿®æ”¹ç”¨æˆ·</span><br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">update</span><span class="hljs-params">(User user)</span></span>;<br></code></pre></td></tr></table></figure><p><strong>ç¬¬äºŒæ­¥ï¼Œåœ¨UserMapper.xmlä¸­å®Œå–„ä¿®æ”¹ç”¨æˆ·çš„SQLè¯­å¥ï¼Œå®Œå–„åå¦‚ä¸‹ä»£ç :</strong></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;update id=<span class="hljs-string">&quot;update&quot;</span> parameterType=<span class="hljs-string">&quot;com.atrox.pojo.User&quot;</span>&gt;<br>    update mybatis.user set name = #&#123;name&#125;, pwd = #&#123;pwd&#125; where id = #&#123;id&#125;;<br>&lt;/update&gt;<br></code></pre></td></tr></table></figure><p><strong>ç¬¬ä¸‰æ­¥ï¼Œæµ‹è¯•æ›´æ–°ç”¨æˆ·</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">updateUser</span><span class="hljs-params">()</span> </span>&#123;<br>    SqlSession sqlSession = MyBatisUtils.getSqlSession();<br>    UserMapper mapper = sqlSession.getMapper(UserMapper.class);<br>    mapper.update(<span class="hljs-keyword">new</span> User(<span class="hljs-number">4</span>,<span class="hljs-string">&quot;ç‚«ç¥&quot;</span>,<span class="hljs-string">&quot;123123&quot;</span>));<br>    sqlSession.commit();<br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-4-delete"><a href="#3-4-delete" class="headerlink" title="3.4 delete"></a>3.4 delete</h3><p><strong>ç¬¬ä¸€æ­¥ï¼Œåœ¨UserMapperæ¥å£å¢åŠ åˆ é™¤ç”¨æˆ·çš„æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// åˆ é™¤ç”¨æˆ·</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">delete</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span></span>;<br></code></pre></td></tr></table></figure><p><strong>ç¬¬äºŒæ­¥ï¼Œåœ¨UserMapper.xmlä¸­å®Œå–„åˆ é™¤ç”¨æˆ·çš„SQLè¯­å¥ï¼Œå®Œå–„åå¦‚ä¸‹ä»£ç :</strong></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;delete id=<span class="hljs-string">&quot;delete&quot;</span>&gt;<br>    delete from mybatis.user where id = #&#123;id&#125;;<br>&lt;/delete&gt;<br></code></pre></td></tr></table></figure><p><strong>ç¬¬ä¸‰æ­¥ï¼Œæµ‹è¯•åˆ é™¤ç”¨æˆ·</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">deleteUser</span><span class="hljs-params">()</span> </span>&#123;<br>    SqlSession sqlSession = MyBatisUtils.getSqlSession();<br>    UserMapper mapper = sqlSession.getMapper(UserMapper.class);<br>    mapper.delete(<span class="hljs-number">4</span>);<br>    sqlSession.commit();<br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-5-tips"><a href="#3-5-tips" class="headerlink" title="3.5 tips"></a>3.5 tips</h3><ul><li><p>å½“æˆ‘ä»¬è¿›è¡Œå¢åˆ æ”¹çš„æµ‹è¯•æ—¶ï¼Œéœ€è¦==<strong>æäº¤äº‹åŠ¡</strong>==ã€‚</p></li><li><p>mybatis-configä¸­resourceè·¯å¾„éœ€è¦ç”¨â€/â€œï¼Œä¸å¯ä»¥ç”¨â€.â€ </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--é”™è¯¯çš„å†™æ³•--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;com.atrox.dao.UserMapper.xml&quot;</span>/&gt;</span><br><span class="hljs-comment">&lt;!--æ­£ç¡®çš„å†™æ³•--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;com/atrox/dao/UserMapper.xml&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="3-6-Map"><a href="#3-6-Map" class="headerlink" title="3.6  Map"></a>3.6  Map</h3><p>åœ¨å‰é¢çš„UserMapper.xmlä¸­çš„<strong>insertå’Œupdate</strong>ä¸­æˆ‘ä»¬æŠŠå…¶ä¸­çš„æ‰€æœ‰å­—æ®µéƒ½å†™äº†å‡ºæ¥ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;addUser&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.atrox.pojo.User&quot;</span>&gt;</span><br>    insert into mybatis.user (id,name,pwd) values (#&#123;id&#125;,#&#123;name&#125;,#&#123;pwd&#125;);<br><span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;update&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.atrox.pojo.User&quot;</span>&gt;</span><br>    update mybatis.user set name = #&#123;name&#125;, pwd = #&#123;pwd&#125; where id = #&#123;id&#125;;<br><span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span><br></code></pre></td></tr></table></figure><p>é‚£æˆ‘ä»¬éœ€è¦æ€è€ƒï¼Œ<strong>å‡è®¾è¿™ä¸ªUseræœ‰100ä¸ªå­—æ®µï¼Œéš¾é“æˆ‘ä»¬éœ€è¦å…¨éƒ¨éƒ½å†™å‡ºæ¥å—</strong>ï¼Ÿä¸‹é¢ç»™å‡ºä¸€ç§ä½¿ç”¨mapçš„æ–¹æ³•ã€‚ä»¥<strong>æ·»åŠ æ–°ç”¨æˆ·</strong>ä¸ºä¾‹ï¼š</p><p><strong>ç¬¬ä¸€æ­¥ï¼Œåœ¨UserMapperæ¥å£å¢åŠ æ·»åŠ ç”¨æˆ·çš„æ–°æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ä¸‡èƒ½çš„Map</span><br><span class="hljs-function">User <span class="hljs-title">addUser2</span><span class="hljs-params">(Map&lt;String,Object&gt; map)</span></span>;<br></code></pre></td></tr></table></figure><p><strong>ç¬¬äºŒæ­¥ï¼Œåœ¨UserMapper.xmlä¸­å®Œå–„æ·»åŠ ç”¨æˆ·çš„SQLè¯­å¥ï¼Œå®Œå–„åå¦‚ä¸‹ä»£ç :</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å¯¹è±¡ä¸­çš„å±æ€§ï¼Œä¼ é€’mapçš„key--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;addUser2&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;map&quot;</span>&gt;</span><br>    insert into mybatis.user (id,name,pwd) values (#&#123;userid&#125;,#&#123;username&#125;,#&#123;password&#125;);<br><span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>æµ‹è¯•æ·»åŠ ç”¨æˆ·</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addUser2</span><span class="hljs-params">()</span> </span>&#123;<br>    SqlSession sqlSession = MyBatisUtils.getSqlSession();<br>    UserMapper mapper = sqlSession.getMapper(UserMapper.class);<br>    HashMap&lt;String, Object&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;String, Object&gt;();<br>    map.put(<span class="hljs-string">&quot;userid&quot;</span>,<span class="hljs-number">4</span>);<br>    map.put(<span class="hljs-string">&quot;username&quot;</span>,<span class="hljs-string">&quot;å¤§å¸é©¬&quot;</span>);<br>    map.put(<span class="hljs-string">&quot;password&quot;</span>,<span class="hljs-string">&quot;123456&quot;</span>);<br>    mapper.addUser2(map);<br>    sqlSession.commit();<br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•å®Œç”¨mapçš„æ–¹å¼æ·»åŠ ç”¨æˆ·åï¼Œæˆ‘ä»¬å†è¯•ä¸€ä¸‹<strong>æŸ¥è¯¢ç”¨æˆ·</strong>ï¼š</p><p><strong>ç¬¬ä¸€æ­¥ï¼Œåœ¨UserMapperæ¥å£å¢åŠ æŸ¥è¯¢ç”¨æˆ·çš„æ–°æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function">User <span class="hljs-title">getUserById2</span><span class="hljs-params">(Map&lt;String,Object&gt; map)</span></span>;<br></code></pre></td></tr></table></figure><p><strong>ç¬¬äºŒæ­¥ï¼Œåœ¨UserMapper.xmlä¸­å®Œå–„æŸ¥è¯¢ç”¨æˆ·çš„SQLè¯­å¥ï¼Œå®Œå–„åå¦‚ä¸‹ä»£ç :</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserById2&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.atrox.pojo.User&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;map&quot;</span>&gt;</span><br>    select * from mybatis.user where id = #&#123;id&#125; and name = #&#123;name&#125;;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>æµ‹è¯•æŸ¥è¯¢ç”¨æˆ·</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addUser2</span><span class="hljs-params">()</span> </span>&#123;<br>    SqlSession sqlSession = MyBatisUtils.getSqlSession();<br>    UserMapper mapper = sqlSession.getMapper(UserMapper.class);<br>    HashMap&lt;String, Object&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;String, Object&gt;();<br>    map.put(<span class="hljs-string">&quot;userid&quot;</span>,<span class="hljs-number">4</span>);<br>    map.put(<span class="hljs-string">&quot;username&quot;</span>,<span class="hljs-string">&quot;å¤§å¸é©¬&quot;</span>);<br>    map.put(<span class="hljs-string">&quot;password&quot;</span>,<span class="hljs-string">&quot;123456&quot;</span>);<br>    mapper.addUser2(map);<br>    sqlSession.commit();<br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">User&#123;id=<span class="hljs-number">4</span>, name=<span class="hljs-string">&#x27;å¤§å¸é©¬&#x27;</span>, pwd=<span class="hljs-string">&#x27;123456&#x27;</span>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-7-fuzzy-search"><a href="#3-7-fuzzy-search" class="headerlink" title="3.7 fuzzy search"></a>3.7 fuzzy search</h3><blockquote><p>æ¨¡ç³ŠæŸ¥è¯¢</p></blockquote><p><strong>ç¬¬ä¸€æ­¥ï¼Œåœ¨UserMapperæ¥å£å¢åŠ æ¨¡ç³ŠæŸ¥è¯¢çš„æ–°æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æ¨¡ç³ŠæŸ¥è¯¢</span><br><span class="hljs-function">List&lt;User&gt; <span class="hljs-title">getUserLike</span><span class="hljs-params">(String value)</span></span>;<br></code></pre></td></tr></table></figure><p><strong>ç¬¬äºŒæ­¥ï¼Œåœ¨UserMapper.xmlä¸­å®Œå–„æ¨¡ç³ŠæŸ¥è¯¢çš„SQLè¯­å¥ï¼Œå®Œå–„åå¦‚ä¸‹ä»£ç :</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserLike&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.atrox.pojo.User&quot;</span>&gt;</span><br>    select * from mybatis.user where name like #&#123;value&#125;;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><p>é‚£åœ¨è¿™é‡Œä¸ºä»€ä¹ˆåœ¨æ¨¡ç³ŠæŸ¥è¯¢çš„likeåé¢çš„valueä¸¤è¾¹åŠ ä¸Šä¸¤ä¸ªâ€œ%â€å‘¢ï¼Ÿï¼Œè¿™é‡Œæˆ‘ä»¬çš„ç¬¬ä¸€ç§æ–¹æ¡ˆï¼Œä¼šå­˜åœ¨<strong>SQLæ³¨å…¥é—®é¢˜</strong>ã€‚è¿™é‡Œæš‚ä¸”å…ˆå¾€ä¸‹è¿›è¡Œï¼Œäº‹åå›æ¥åˆ†æç¬¬äºŒæ­¥ã€‚</p><p>**æµ‹è¯•æ¨¡ç³ŠæŸ¥è¯¢ï¼Œæˆ‘ä»¬åœ¨æ–¹æ³•ä¼ çš„å‚æ•°ä¸­ä¼ é€’é€šé…ç¬¦%**ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getUserLike</span><span class="hljs-params">()</span> </span>&#123;<br>    SqlSession sqlSession = MyBatisUtils.getSqlSession();<br>    UserMapper mapper = sqlSession.getMapper(UserMapper.class);<br>    List&lt;User&gt; userList = mapper.getUserLike(<span class="hljs-string">&quot;%æ%&quot;</span>);<br>    <span class="hljs-keyword">for</span> (User user : userList) &#123;<br>        System.out.println(user);<br>    &#125;<br>    sqlSession.close();<br>&#125;<br><br><span class="hljs-comment">// è¿è¡Œç»“æœ</span><br>User&#123;id=<span class="hljs-number">3</span>, name=<span class="hljs-string">&#x27;æå››&#x27;</span>, pwd=<span class="hljs-string">&#x27;123456&#x27;</span>&#125;<br>User&#123;id=<span class="hljs-number">4</span>, name=<span class="hljs-string">&#x27;æäº”&#x27;</span>, pwd=<span class="hljs-string">&#x27;123456&#x27;</span>&#125;<br></code></pre></td></tr></table></figure><p><strong>å›å¤´çœ‹ç¬¬äºŒæ­¥</strong>ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨sqlè¯­å¥ä¸­æ·»åŠ %</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserLike&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.atrox.pojo.User&quot;</span>&gt;</span><br>    select * from mybatis.user where name like &quot;%&quot;#&#123;value&#125;&quot;%&quot;;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å¹¶ä¸”ï¼Œåœ¨æµ‹è¯•çš„ä»£ç ä¸­æŠŠä¼ å‚çš„é€šé…ç¬¦å»æ‰ï¼Œä¹Ÿèƒ½å¾—åˆ°æ­£ç¡®çš„ç»“æœï¼</p><h2 id="4ã€Configuration-analysis"><a href="#4ã€Configuration-analysis" class="headerlink" title="4ã€Configuration analysis"></a>4ã€Configuration analysis</h2><h3 id="4-1-mybatis-config-xml"><a href="#4-1-mybatis-config-xml" class="headerlink" title="4.1 mybatis-config.xml"></a>4.1 mybatis-config.xml</h3><p>MyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶åŒ…å«äº†ä¼šæ·±æ·±å½±å“MyBatisè¡Œä¸ºçš„è®¾ç½®å’Œå±æ€§ä¿¡æ¯ã€‚</p><ul><li><a href="https://mybatis.org/mybatis-3/zh/configuration.html#properties">propertiesï¼ˆå±æ€§ï¼‰</a></li><li><a href="https://mybatis.org/mybatis-3/zh/configuration.html#settings">settingsï¼ˆè®¾ç½®ï¼‰</a></li><li><a href="https://mybatis.org/mybatis-3/zh/configuration.html#typeAliases">typeAliasesï¼ˆç±»å‹åˆ«åï¼‰</a></li><li><a href="https://mybatis.org/mybatis-3/zh/configuration.html#typeHandlers">typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰</a></li><li><a href="https://mybatis.org/mybatis-3/zh/configuration.html#objectFactory">objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰</a></li><li><a href="https://mybatis.org/mybatis-3/zh/configuration.html#plugins">pluginsï¼ˆæ’ä»¶ï¼‰</a></li><li>environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰<ul><li>environmentï¼ˆç¯å¢ƒå˜é‡ï¼‰<ul><li>transactionManagerï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰</li><li>dataSourceï¼ˆæ•°æ®æºï¼‰</li></ul></li></ul></li><li><a href="https://mybatis.org/mybatis-3/zh/configuration.html#databaseIdProvider">databaseIdProviderï¼ˆæ•°æ®åº“å‚å•†æ ‡è¯†ï¼‰</a></li><li><a href="https://mybatis.org/mybatis-3/zh/configuration.html#mappers">mappersï¼ˆæ˜ å°„å™¨ï¼‰</a></li></ul><h3 id="4-2-environments"><a href="#4-2-environments" class="headerlink" title="4.2 environments"></a>4.2 environments</h3><p>MyBatis å¯ä»¥é…ç½®æˆé€‚åº”å¤šç§ç¯å¢ƒï¼Œè¿™ç§æœºåˆ¶æœ‰åŠ©äºå°† SQL æ˜ å°„åº”ç”¨äºå¤šç§æ•°æ®åº“ä¹‹ä¸­.<strong>ä¸è¿‡è¦è®°ä½ï¼šå°½ç®¡å¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒï¼Œä½†æ¯ä¸ª SqlSessionFactory å®ä¾‹åªèƒ½é€‰æ‹©ä¸€ç§ç¯å¢ƒã€‚</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;...&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;...&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">transactionManager</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>tipsï¼š</strong></p><ul><li>é»˜è®¤ä½¿ç”¨çš„ç¯å¢ƒ IDï¼ˆæ¯”å¦‚ï¼šdefault=â€developmentâ€ï¼‰ã€‚</li><li>æ¯ä¸ª environment å…ƒç´ å®šä¹‰çš„ç¯å¢ƒ IDï¼ˆæ¯”å¦‚ï¼šid=â€developmentâ€ï¼‰ã€‚</li><li>äº‹åŠ¡ç®¡ç†å™¨çš„é…ç½®ï¼ˆæ¯”å¦‚ï¼štype=â€JDBCâ€ï¼‰ã€‚</li><li>æ•°æ®æºçš„é…ç½®ï¼ˆæ¯”å¦‚ï¼štype=â€POOLEDâ€ï¼‰ã€‚</li></ul><p><strong>äº‹åŠ¡ç®¡ç†å™¨</strong>ï¼š</p><p>åœ¨ MyBatis ä¸­æœ‰ä¸¤ç§ç±»å‹çš„äº‹åŠ¡ç®¡ç†å™¨ï¼ˆä¹Ÿå°±æ˜¯ type=â€[JDBC|MANAGED]â€ï¼‰ï¼š</p><ul><li>JDBC â€“ è¿™ä¸ªé…ç½®ç›´æ¥ä½¿ç”¨äº† <strong>JDBC çš„æäº¤å’Œå›æ»šè®¾æ–½</strong>ï¼Œå®ƒä¾èµ–ä»æ•°æ®æºè·å¾—çš„è¿æ¥æ¥ç®¡ç†äº‹åŠ¡ä½œç”¨åŸŸã€‚</li><li>MANAGED â€“ <strong>è¿™ä¸ªé…ç½®å‡ ä¹æ²¡åšä»€ä¹ˆ</strong>ã€‚ã€‚å®ƒä»ä¸æäº¤æˆ–å›æ»šä¸€ä¸ªè¿æ¥ï¼Œè€Œæ˜¯è®©å®¹å™¨æ¥ç®¡ç†äº‹åŠ¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚</li></ul><p><strong>æ•°æ®æº</strong>ï¼š</p><p>dataSource å…ƒç´ ä½¿ç”¨æ ‡å‡†çš„ JDBC æ•°æ®æºæ¥å£æ¥é…ç½® JDBC è¿æ¥å¯¹è±¡çš„èµ„æºã€‚æœ‰ä¸‰ç§å†…å»ºçš„æ•°æ®æºç±»å‹ï¼ˆä¹Ÿå°±æ˜¯ type=â€[UNPOOLED|POOLED|JNDI]â€ï¼‰</p><ul><li><p><strong>UNPOOLED</strong>â€“ è¿™ä¸ªæ•°æ®æºçš„å®ç°ä¼šæ¯æ¬¡è¯·æ±‚æ—¶æ‰“å¼€å’Œå…³é—­è¿æ¥ã€‚è™½ç„¶æœ‰ç‚¹æ…¢ï¼Œä½†å¯¹é‚£äº›æ•°æ®åº“è¿æ¥å¯ç”¨æ€§è¦æ±‚ä¸é«˜çš„ç®€å•åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚</p></li><li><p><strong>POOLED</strong>â€“ è¿™ç§æ•°æ®æºçš„å®ç°åˆ©ç”¨â€œæ± â€çš„æ¦‚å¿µå°† JDBC è¿æ¥å¯¹è±¡ç»„ç»‡èµ·æ¥ï¼Œé¿å…äº†åˆ›å»ºæ–°çš„è¿æ¥å®ä¾‹æ—¶æ‰€å¿…éœ€çš„åˆå§‹åŒ–å’Œè®¤è¯æ—¶é—´ã€‚ è¿™ç§å¤„ç†æ–¹å¼å¾ˆæµè¡Œï¼Œèƒ½ä½¿å¹¶å‘ Web åº”ç”¨å¿«é€Ÿå“åº”è¯·æ±‚ã€‚</p></li><li><p><strong>JNDI</strong> â€“ è¿™ä¸ªæ•°æ®æºå®ç°æ˜¯ä¸ºäº†èƒ½åœ¨å¦‚ EJB æˆ–åº”ç”¨æœåŠ¡å™¨è¿™ç±»å®¹å™¨ä¸­ä½¿ç”¨ï¼Œå®¹å™¨å¯ä»¥é›†ä¸­æˆ–åœ¨å¤–éƒ¨é…ç½®æ•°æ®æºï¼Œç„¶åæ”¾ç½®ä¸€ä¸ª JNDI ä¸Šä¸‹æ–‡çš„æ•°æ®æºå¼•ç”¨ã€‚è¿™ç§æ•°æ®æºé…ç½®åªéœ€è¦ä¸¤ä¸ªå±æ€§ï¼š</p></li></ul><h3 id="4-3-properties"><a href="#4-3-properties" class="headerlink" title="4.3 properties"></a>4.3 properties</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡propertieså±æ€§æ¥å¼•ç”¨é…ç½®æ–‡ä»¶ã€‚è¿™äº›å±æ€§å¯ä»¥åœ¨å¤–éƒ¨è¿›è¡Œé…ç½®ï¼Œå¹¶å¯ä»¥è¿›è¡ŒåŠ¨æ€æ›¿æ¢ã€‚ä½ æ—¢å¯ä»¥åœ¨å…¸å‹çš„ Java å±æ€§æ–‡ä»¶ä¸­é…ç½®è¿™äº›å±æ€§ï¼Œä¹Ÿå¯ä»¥åœ¨ properties å…ƒç´ çš„å­å…ƒç´ ä¸­è®¾ç½®ã€db.propertiesã€‘</p><ul><li><p><strong>ä¸‹é¢æˆ‘ä»¬ç”¨åè€…æ¥åšä¸€åšï¼Œæˆ‘ä»¬å¯ä»¥åœ¨resourcesä¸‹ç¼–å†™ä¸€ä¸ªé…ç½®æ–‡ä»¶db.propertiesï¼Œç„¶åå†å¼•å…¥</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">driver</span>=<span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br><span class="hljs-attr">url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/mybatis?characterEncoding=UTF-8&amp;serverTimezone=GMT</span><br><span class="hljs-attr">username</span>=<span class="hljs-string">root</span><br><span class="hljs-attr">password</span>=<span class="hljs-string">zuiweizhiming666</span><br></code></pre></td></tr></table></figure></li><li><p><strong>db.propertirså†™å®Œåï¼Œæˆ‘ä»¬åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å°†å…¶æ˜ å…¥</strong></p><p>åœ¨è¿™ä¸€æ­¥ï¼Œéœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼Œå½“æˆ‘ä»¬æŠŠ<properties></properties>æ ‡ç­¾éšä¾¿å†™åœ¨ä¸€ä¸ªä½ç½®çš„æ—¶å€™ï¼ŒæŠ¥é”™äº†ï¼Œé”™è¯¯ä¸ºï¼š</p><p><em>The content of element type â€œconfigurationâ€ must match â€œ(properties?,settings?,typeAliases?,typeHandlers?,objectFactory?,objectWrapperFactory?,reflectorFactory?,plugins?,environments?,databaseIdProvider?,mappers?)â€.</em></p><p>è¿™ä¸ªé”™è¯¯æç¤ºæˆ‘ä»¬propertiesæ ‡ç­¾æ‰€æ”¾çš„ä½ç½®æ˜¯æœ‰è¦æ±‚çš„ï¼Œ<strong>å¿…é¡»æ”¾åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„æœ€å‰é¢</strong>ã€‚</p><p>å½“æˆ‘ä»¬ä»¥ä»å¤–éƒ¨å¼•å…¥é…ç½®çš„æ–¹å¼ï¼Œä¸‹é¢ç¯å¢ƒé‡Œçš„å„ä¸ªå±æ€§ä¹Ÿè¦ä¸ä¹‹å¯¹åº”ä¸Šä»¥${}çš„æ–¹å¼å†™ã€‚</p><p>æœ€ç»ˆä»£ç ä¸ºï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">properties</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;db.properties&quot;</span>/&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>æ³¨æ„çš„ä¸€ä¸ªé—®é¢˜ï¼š<strong>æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¼˜å…ˆä½¿ç”¨å¤–éƒ¨é…ç½®æ–‡ä»¶çš„å±æ€§å€¼</strong>ã€‚</p></li></ul><h3 id="4-4-typeAliases"><a href="#4-4-typeAliases" class="headerlink" title="4.4 typeAliases"></a>4.4 typeAliases</h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åšç±»å‹åˆ«åçš„ä¼˜åŒ–å·¥ä½œã€‚æˆ‘ä»¬åœ¨ä¹‹å‰çš„UserMapper.xmlä¸­è¦å†™è¿™æ ·çš„ä»£ç ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;addUser&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.atrox.pojo.User&quot;</span>&gt;</span><br>       insert into mybatis.user (id,name,pwd) values (#&#123;id&#125;,#&#123;name&#125;,#&#123;pwd&#125;);<br><span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„paramterTypeå†™çš„è®©äººä¸å¤Ÿæ»¡æ„ï¼ŒæŒ‰ç…§äºº<strong>æ€§åŒ–åº”è¯¥å†™çš„æ˜¯User</strong>ï¼Œä¸‹é¢å°±è¦åšè¿™æ ·çš„äº‹ã€‚</p><p>ç±»å‹åˆ«åå¯ä¸º Java ç±»å‹è®¾ç½®ä¸€ä¸ªç¼©å†™åå­—ã€‚ å®ƒä»…ç”¨äº XML é…ç½®ï¼Œæ„åœ¨é™ä½å†—ä½™çš„å…¨é™å®šç±»åä¹¦å†™</p><p><strong>ç¬¬ä¸€ç§æ–¹å¼ï¼š<typeAlias></typeAlias></strong></p><p>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å†™å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">typeAliases</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">typeAlias</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;com.atrox.pojo.User&quot;</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">&quot;User&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">typeAliases</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å†™å®Œä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠä¹‹å‰UserMapper.xmlä¸­çš„ä»£ç ä¿®æ”¹ä¸º</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserList&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span><br>    select * from mybatis.user<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>ç¬¬äºŒç§æ–¹å¼ï¼šæŒ‡å®šä¸€ä¸ªåŒ…å</strong></p><p>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å†™å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">typeAliases</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;com.atrox.pojo&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">typeAliases</span>&gt;</span><br></code></pre></td></tr></table></figure><p>MyBatis ä¼šåœ¨åŒ…åä¸‹é¢æœç´¢éœ€è¦çš„ Java Beanï¼Œæ¯ä¸€ä¸ªåœ¨åŒ…ä¸‹çš„javaBeanï¼Œåœ¨æ²¡æœ‰æ³¨è§£çš„æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨ <strong>Bean çš„é¦–å­—æ¯å°å†™çš„éé™å®šç±»å</strong>æ¥ä½œä¸ºå®ƒçš„åˆ«åã€‚ä¾‹ï¼šåŒ…ä¸‹æœ‰Userå®ä½“ç±»ï¼Œç»è¿‡èµ·åˆ«ååï¼Œç”¨çš„æ—¶å€™è¦ç”¨userï¼Œé¦–å­—æ¯å˜æˆäº†å°å†™ã€‚ã€å¤§å†™å…¶å®ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯å»ºè®®ç”¨å°å†™ã€‘</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserList&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;user&quot;</span>&gt;</span><br>    select * from mybatis.user<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-comment">&lt;!--é¦–å­—æ¯å†™æˆå¤§å†™ä¹Ÿèƒ½è·‘èµ·æ¥ï¼Œä½†ä¸å»ºè®®--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserList&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span><br>    select * from mybatis.user<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>é‚£é¢å¯¹è¿™ä¸¤ç§èµ·åˆ«åçš„æ–¹å¼ï¼Œå¦‚ä½•æŠ‰æ‹©ï¼Ÿ</strong></p><ul><li>åœ¨å®ä½“ç±»æ¯”è¾ƒå°‘çš„æ—¶å€™ï¼Œä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼</li><li>å¦‚æœå®ä½“ç±»éå¸¸å¤šï¼Œå»ºè®®ä½¿ç”¨ç¬¬äºŒç§</li></ul><p>ç¬¬ä¸€ç§æ–¹å¼ï¼Œå¯ä»¥DIYåˆ«åï¼Œç¬¬äºŒç§åˆ™ä¸è¡Œã€‚</p><p>å¦‚æœ<strong>ä½¿ç”¨ç¬¬äºŒç§æ–¹å¼ï¼Œæƒ³è¦DIYåˆ«å</strong>ï¼Œä¸æƒ³ä½¿ç”¨é»˜è®¤çš„é¦–å­—æ¯å°å†™ï¼Œå¯ä»¥<strong>ä½¿ç”¨æ³¨è§£</strong></p><p>åœ¨å®ä½“ç±»å®šä¹‰çš„æ—¶å€™ï¼Œå°±å†™ä¸Š@Alias(â€œåˆ«åâ€)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// Userå®ä½“ç±»</span><br><span class="hljs-meta">@Alias(&quot;hello&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String pwd;<br>    <span class="hljs-comment">// ä¸€å †æ–¹æ³•</span><br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨åé¢çš„UserMapper.xmlä¸­ï¼Œæˆ‘ä»¬è¿™æ ·å†™</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserList&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;hello&quot;</span>&gt;</span><br>    select * from mybatis.user<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="4-5-settings"><a href="#4-5-settings" class="headerlink" title="4.5 settings"></a>4.5 settings</h3><p>è¿™æ˜¯ MyBatis ä¸­æä¸ºé‡è¦çš„è°ƒæ•´è®¾ç½®ï¼Œå®ƒä»¬ä¼šæ”¹å˜ MyBatis çš„è¿è¡Œæ—¶è¡Œä¸ºã€‚ ä¸‹è¡¨æè¿°äº†è®¾ç½®ä¸­å„é¡¹è®¾ç½®çš„å«ä¹‰ã€é»˜è®¤å€¼ç­‰.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;cacheEnabled&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;lazyLoadingEnabled&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;multipleResultSetsEnabled&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;useColumnLabel&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;useGeneratedKeys&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;false&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;autoMappingBehavior&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;PARTIAL&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;autoMappingUnknownColumnBehavior&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;WARNING&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;defaultExecutorType&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;SIMPLE&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;defaultStatementTimeout&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;25&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;defaultFetchSize&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;100&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;safeRowBoundsEnabled&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;false&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;false&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;localCacheScope&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;SESSION&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;jdbcTypeForNull&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;OTHER&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;lazyLoadTriggerMethods&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;equals,clone,hashCode,toString&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬ç›®å‰åªéœ€è¦çŸ¥é“å…¶ä¸­å‡ ä¸ªé‡è¦çš„å³å¯.</p><table><thead><tr><th>è®¾ç½®å</th><th>æè¿°</th><th>æœ‰æ•ˆå€¼</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td>cacheEnabled</td><td>å…¨å±€æ€§åœ°å¼€å¯æˆ–å…³é—­æ‰€æœ‰æ˜ å°„å™¨é…ç½®æ–‡ä»¶ä¸­å·²é…ç½®çš„ä»»ä½•ç¼“å­˜ã€‚</td><td>true | false</td><td>true</td></tr><tr><td>lazyLoadingEnabled</td><td>å»¶è¿ŸåŠ è½½çš„å…¨å±€å¼€å…³ã€‚å½“å¼€å¯æ—¶ï¼Œæ‰€æœ‰å…³è”å¯¹è±¡éƒ½ä¼šå»¶è¿ŸåŠ è½½ã€‚ ç‰¹å®šå…³è”å…³ç³»ä¸­å¯é€šè¿‡è®¾ç½® <code>fetchType</code> å±æ€§æ¥è¦†ç›–è¯¥é¡¹çš„å¼€å…³çŠ¶æ€ã€‚</td><td>true | false</td><td>false</td></tr><tr><td>logImpl</td><td>æŒ‡å®š MyBatis æ‰€ç”¨æ—¥å¿—çš„å…·ä½“å®ç°ï¼ŒæœªæŒ‡å®šæ—¶å°†è‡ªåŠ¨æŸ¥æ‰¾ã€‚</td><td>SLF4J | LOG4J | LOG4J2 | JDK_LOGGING | COMMONS_LOGGING | STDOUT_LOGGING | NO_LOGGING</td><td>æœªè®¾ç½®</td></tr></tbody></table><h3 id="4-6-mappers"><a href="#4-6-mappers" class="headerlink" title="4.6 mappers"></a>4.6 mappers</h3><p>æ˜ å°„å™¨ï¼šæ³¨å†Œç»‘å®šæˆ‘ä»¬çš„Mapperæ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰ MyBatis åˆ°å“ªé‡Œå»æ‰¾åˆ°è¿™äº›æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨ï¼Œå®Œå…¨é™å®šèµ„æºå®šä½ç¬¦æˆ–ç±»åå’ŒåŒ…åç­‰å‡ ç§æ–¹å¼ã€‚</p><p><strong>æ–¹å¼1ï¼šç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨ï¼ˆæ¨èä½¿ç”¨ï¼‰</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;com/atrox/dao/UserMapper.xml&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>æ–¹å¼äºŒï¼šä½¿ç”¨æ˜ å°„å™¨æ¥å£å®ç°ç±»çš„å®Œå…¨é™å®šç±»å</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atrox.pojo.User&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>æ–¹å¼ä¸‰ï¼šå°†åŒ…å†…çš„æ˜ å°„å™¨æ¥å£å®ç°å…¨éƒ¨æ³¨å†Œä¸ºæ˜ å°„å™¨</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;com.atrox.pojo&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨æ–¹å¼äºŒå’Œæ–¹å¼ä¸‰ï¼Œæœ‰å‡ ä¸ªæ³¨æ„ç‚¹ï¼š</p><ul><li>æ¥å£å’Œå®ƒçš„Mapperé…ç½®æ–‡ä»¶<strong>å¿…é¡»åŒå</strong></li><li>æ¥å£å’Œå®ƒçš„é…ç½®æ–‡ä»¶<strong>å¿…é¡»åœ¨åŒä¸€ä¸ªåŒ…ä¸‹</strong></li></ul><h3 id="4-7-other-configuration"><a href="#4-7-other-configuration" class="headerlink" title="4.7 other configuration"></a>4.7 other configuration</h3><ul><li><a href="https://mybatis.org/mybatis-3/zh/configuration.html#typeHandlers">typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰</a></li><li><a href="https://mybatis.org/mybatis-3/zh/configuration.html#objectFactory">objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰</a></li><li><a href="https://mybatis.org/mybatis-3/zh/configuration.html#plugins">pluginsï¼ˆæ’ä»¶ï¼‰</a><ul><li>mybatis-generator-core</li><li>mybatis-plus</li><li>é€šç”¨mapper</li></ul></li></ul><h3 id="4-8-Lifecycle-and-scope"><a href="#4-8-Lifecycle-and-scope" class="headerlink" title="4.8 Lifecycle and scope"></a>4.8 Lifecycle and scope</h3><p>ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸæ˜¯è‡³å…³é‡è¦çš„ï¼Œå› ä¸ºé”™è¯¯çš„ä½¿ç”¨ä¼šå¯¼è‡´éå¸¸ä¸¥é‡çš„<strong>å¹¶å‘é—®é¢˜</strong>ã€‚</p><p>ä¸‹é¢ï¼Œç”¨å›¾æ¥çœ‹ä¸€ä¸‹æ•´ä¸ªæµç¨‹ï¼š</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatiså­¦ä¹ ç¬”è®°/mybatis_lifecycle.png" alt="æµç¨‹å›¾" style="zoom:75%;"><h4 id="4-8-1-SqlSessionFactoryBuilder"><a href="#4-8-1-SqlSessionFactoryBuilder" class="headerlink" title="4.8.1 SqlSessionFactoryBuilder"></a>4.8.1 SqlSessionFactoryBuilder</h4><p>è¿™ä¸ªç±»å¯ä»¥è¢«å®ä¾‹åŒ–ã€ä½¿ç”¨å’Œä¸¢å¼ƒã€‚<strong>ä¸€æ—¦åˆ›å»ºäº†SqlSessionFactoryï¼Œå°±ä¸å†éœ€è¦å®ƒäº†</strong>ã€‚å› æ­¤ SqlSessionFactoryBuilder å®ä¾‹çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯<strong>æ–¹æ³•ä½œç”¨åŸŸ</strong>ï¼ˆä¹Ÿå°±æ˜¯<strong>å±€éƒ¨æ–¹æ³•å˜é‡</strong>ï¼‰</p><h4 id="4-8-2-SqlSessionFactory"><a href="#4-8-2-SqlSessionFactory" class="headerlink" title="4.8.2 SqlSessionFactory"></a>4.8.2 SqlSessionFactory</h4><p>è¿™ä¸ªä¸œè¥¿ï¼Œå¯ä»¥æƒ³è±¡ä¸ºæ•°æ®åº“è¿æ¥æ± ã€‚SqlSessionFactory ä¸€æ—¦è¢«åˆ›å»ºå°±<strong>åº”è¯¥åœ¨åº”ç”¨çš„è¿è¡ŒæœŸé—´ä¸€ç›´å­˜åœ¨</strong>ï¼Œæ²¡æœ‰ä»»ä½•ç†ç”±ä¸¢å¼ƒå®ƒæˆ–é‡æ–°åˆ›å»ºå¦ä¸€ä¸ªå®ä¾‹ã€‚å¤šæ¬¡é‡å»º SqlSessionFactory è¢«è§†ä¸ºä¸€ç§ä»£ç â€œåä¹ æƒ¯â€</p><p>å› æ­¤ SqlSessionFactory çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯<strong>åº”ç”¨ä½œç”¨åŸŸ</strong>ï¼Œæœ€ç®€å•çš„å°±æ˜¯ä½¿ç”¨<strong>å•ä¾‹æ¨¡å¼</strong>æˆ–è€…é™æ€å•ä¾‹æ¨¡å¼ã€‚</p><h4 id="4-8-3-SqlSession"><a href="#4-8-3-SqlSession" class="headerlink" title="4.8.3 SqlSession"></a>4.8.3 SqlSession</h4><p>è¿™ä¸ªä¸œè¥¿ï¼Œå¯ä»¥æƒ³è±¡ä¸ºè¿æ¥åˆ°è¿æ¥æ± çš„ä¸€ä¸ªè¯·æ±‚ã€‚SqlSession çš„å®ä¾‹<strong>ä¸æ˜¯çº¿ç¨‹å®‰å…¨</strong>çš„ï¼Œå› æ­¤æ˜¯ä¸èƒ½è¢«å…±äº«çš„ï¼Œæ‰€ä»¥å®ƒçš„æœ€ä½³çš„ä½œç”¨åŸŸæ˜¯è¯·æ±‚æˆ–<strong>æ–¹æ³•ä½œç”¨åŸŸã€‚</strong>åœ¨æ–¹æ³•å†…ç”¨å®Œä¹‹åéœ€è¦èµ¶ç´§å…³é—­ï¼Œå¦åˆ™èµ„æºè¢«å ç”¨ã€‚</p><h4 id="4-8-4-relationship"><a href="#4-8-4-relationship" class="headerlink" title="4.8.4 relationship"></a>4.8.4 relationship</h4><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatiså­¦ä¹ ç¬”è®°/mybaits_SqlSession.png" alt="å…³ç³»" style="zoom:85%;"><p>è¿™é‡Œé¢çš„æ¯ä¸€ä¸ªMapperï¼Œå°±ä»£è¡¨ç€æ¯ä¸€ä¸ªå…·ä½“çš„ä¸šåŠ¡ã€‚</p><h2 id="5ã€ResultMap"><a href="#5ã€ResultMap" class="headerlink" title="5ã€ResultMap"></a>5ã€ResultMap</h2><h3 id="5-1-problem"><a href="#5-1-problem" class="headerlink" title="5.1 problem"></a>5.1 problem</h3><p>ç»“æœé›†æ˜ å°„ï¼Œç”¨æ¥è§£å†³çš„æ˜¯<strong>JavaBeanä¸­çš„å±æ€§åå’Œæ•°æ®åº“ä¸­çš„å­—æ®µåä¸ä¸€è‡´</strong>çš„é—®é¢˜ã€‚</p><p>åœ¨ä¹‹å‰çš„é¡¹ç›®ä¸­ï¼Œæ•°æ®åº“ä¸­çš„å­—æ®µå’ŒJavaBeançš„å±æ€§åå­—æ˜¯ç›¸åŒçš„ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatiså­¦ä¹ ç¬”è®°/column_properties.png" alt="å±æ€§ä¸å­—æ®µç›¸åŒ" style="zoom:80%;"><p>ç°åœ¨æˆ‘ä»¬æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œæ‹·è´ä¹‹å‰çš„ï¼Œæµ‹è¯•å®ä½“ç±»å±æ€§å’Œå­—æ®µä¸ä¸€è‡´çš„æƒ…å†µã€‚</p><ul><li><p><strong>ç¬¬ä¸€æ­¥ï¼Œä¿®æ”¹Userçš„å±æ€§å’Œæ–¹æ³•ï¼Œä½¿å…¶å±æ€§åä¸æ•°æ®åº“å­—æ®µä¸ä¸€è‡´ï¼Œå¦‚å›¾æ‰€ç¤º</strong></p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatiså­¦ä¹ ç¬”è®°/update_column_properties.png" alt="ä¸ä¸€è‡´çš„å±æ€§åä¸å­—æ®µå" style="zoom:80%;"><p>å…ˆä¸ä¿®æ”¹åˆ«çš„ï¼Œç›´æ¥æµ‹è¯•ä¸€ä¸‹ï¼Œå‘ç°æŸ¥å‡ºçš„ç»“æœé›†<strong>å¯†ç å­—æ®µå…¨ä¸ºnull</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">User&#123;id=<span class="hljs-number">1</span>, name=<span class="hljs-string">&#x27;ä¹”å¨&#x27;</span>, password=<span class="hljs-string">&#x27;null&#x27;</span>&#125;<br>User&#123;id=<span class="hljs-number">2</span>, name=<span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>, password=<span class="hljs-string">&#x27;null&#x27;</span>&#125;<br>User&#123;id=<span class="hljs-number">3</span>, name=<span class="hljs-string">&#x27;æå››&#x27;</span>, password=<span class="hljs-string">&#x27;null&#x27;</span>&#125;<br>User&#123;id=<span class="hljs-number">4</span>, name=<span class="hljs-string">&#x27;æäº”&#x27;</span>, password=<span class="hljs-string">&#x27;null&#x27;</span>&#125;<br></code></pre></td></tr></table></figure><p><strong>åŸå› </strong>ï¼šç±»å‹å¤„ç†å™¨å°†UserMapper.xmlçš„å†…å®¹ä¿®æ”¹äº†</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> mybatis.user;<br><span class="hljs-comment">-- ç»è¿‡ç±»å‹å¤„ç†å™¨ä¿®æ”¹ï¼Œå˜ä¸ºä¸‹é¢çš„æ ·å­</span><br><span class="hljs-keyword">select</span> <span class="hljs-keyword">id</span>,<span class="hljs-keyword">name</span>,pwd <span class="hljs-keyword">from</span> mybatis.user;<br></code></pre></td></tr></table></figure></li></ul><ul><li><p><strong>å¯¹ç¬¬ä¸€æ­¥é‡åˆ°çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ˜¯æœ‰å‡ å¥—è§£å†³æ–¹æ¡ˆçš„</strong></p></li><li><p><strong>æ–¹æ¡ˆä¸€ï¼šä¿®æ”¹SQLè¯­å¥èµ·åˆ«åï¼Œæœ€ç®€å•æš´åŠ›</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserList&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span><br>    select id,name,pwd as password from mybatis.user<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>æ–¹æ¡ˆäºŒï¼šä¸‹é¢è¦å¼•å‡ºçš„ResultMap</strong></p></li></ul><h3 id="5-2-resultMap"><a href="#5-2-resultMap" class="headerlink" title="5.2 resultMap"></a>5.2 resultMap</h3><p>å°†UserMapper.xmlä¸­æ·»åŠ è¿™äº›å†…å®¹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--ç»“æœé›†æ˜ å°„--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;UserMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span>  <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span>  <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;name&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span>  <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;pwd&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;password&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserList&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;UserMap&quot;</span>&gt;</span><br>    select * from mybatis.user<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ç»“æœï¼Œæ˜¯å¯ä»¥æŸ¥å‡ºæ¥çš„ï¼Œè¿™å°±æ˜¯æœ€ç®€å•çš„ç»“æœé›†æ˜ å°„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">User&#123;id=<span class="hljs-number">1</span>, name=<span class="hljs-string">&#x27;ä¹”å¨&#x27;</span>, password=<span class="hljs-string">&#x27;123456&#x27;</span>&#125;<br>User&#123;id=<span class="hljs-number">2</span>, name=<span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>, password=<span class="hljs-string">&#x27;123456&#x27;</span>&#125;<br>User&#123;id=<span class="hljs-number">3</span>, name=<span class="hljs-string">&#x27;æå››&#x27;</span>, password=<span class="hljs-string">&#x27;123456&#x27;</span>&#125;<br>User&#123;id=<span class="hljs-number">4</span>, name=<span class="hljs-string">&#x27;æäº”&#x27;</span>, password=<span class="hljs-string">&#x27;123456&#x27;</span>&#125;<br></code></pre></td></tr></table></figure><p><code>resultMap</code> å…ƒç´ æ˜¯ MyBatis ä¸­æœ€é‡è¦æœ€å¼ºå¤§çš„å…ƒç´ ã€‚ResultMap çš„è®¾è®¡æ€æƒ³æ˜¯ï¼Œå¯¹ç®€å•çš„è¯­å¥åšåˆ°é›¶é…ç½®ï¼Œå¯¹äºå¤æ‚ä¸€ç‚¹çš„è¯­å¥ï¼Œåªéœ€è¦æè¿°è¯­å¥ä¹‹é—´çš„å…³ç³»å°±è¡Œäº†ã€‚</p><p>åœ¨å­¦ä¹ äº†ä¸Šé¢çš„çŸ¥è¯†åï¼Œä½ ä¼šå‘ç°ä¸Šé¢çš„ä¾‹å­æ²¡æœ‰ä¸€ä¸ªéœ€è¦æ˜¾å¼é…ç½® <code>ResultMap</code>ï¼Œè¿™å°±æ˜¯ <code>ResultMap</code> çš„ä¼˜ç§€ä¹‹å¤„â€”â€”ä½ å®Œå…¨å¯ä»¥ä¸ç”¨æ˜¾å¼åœ°é…ç½®å®ƒä»¬ã€‚</p><p><strong>å¯æ˜¯ï¼Œå¦‚æœä¸–ç•Œæ€»æ˜¯è¿™ä¹ˆç®€å•å°±å¥½äº†ã€‚</strong></p><h2 id="6ã€Log"><a href="#6ã€Log" class="headerlink" title="6ã€Log"></a>6ã€Log</h2><h3 id="6-1-log-factory"><a href="#6-1-log-factory" class="headerlink" title="6.1 log factory"></a>6.1 log factory</h3><p>å¦‚æœä¸€ä¸ªæ•°æ®åº“æ“ä½œï¼Œå‡ºç°äº†å¼‚å¸¸ï¼Œæˆ‘ä»¬éœ€è¦æ’é”™ã€‚æ—¥å¿—å°±æ˜¯æœ€å¥½çš„åŠ©æ‰‹ï¼æ›¾ç»æˆ‘ä»¬ä½¿ç”¨soutå’Œdebugæ¥æ’é”™ï¼Œç°åœ¨æˆ‘ä»¬ä½¿ç”¨mybatiså†…ç½®çš„æ—¥å¿—å·¥å‚ï¼Œå¦‚ä¸‹ã€‚</p><table><thead><tr><th>logImpl</th><th>æŒ‡å®š MyBatis æ‰€ç”¨æ—¥å¿—çš„å…·ä½“å®ç°ï¼ŒæœªæŒ‡å®šæ—¶å°†è‡ªåŠ¨æŸ¥æ‰¾ã€‚</th><th>SLF4J | LOG4J | LOG4J2 | JDK_LOGGING | COMMONS_LOGGING | STDOUT_LOGGING | NO_LOGGING</th><th>æœªè®¾ç½®</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td></tr></tbody></table><ul><li>SLF4J</li><li>LOG4Jã€æŒæ¡ã€‘</li><li>LOG4J2</li><li>JDK_LOGGING</li><li>COMMONS_LOGGING</li><li>STDOUT_LOGGINGã€æŒæ¡ã€‘</li><li>NO_LOGGING</li></ul><p>åœ¨MyBatisä¸­å…·ä½“ä½¿ç”¨å“ªä¸€æ—¥å¿—å®ç°ï¼Œåœ¨<strong>è®¾ç½®ä¸­ï¼ˆsettingsï¼‰è®¾å®š</strong>ã€‚æˆ‘ä»¬æ‰‹åŠ¨åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶é…ç½®ä¸€ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;logImpl&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;STDOUT_LOGGING&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è·‘ä¸€ä¸‹é¡¹ç›®ï¼Œæ—¥å¿—æ‰“å°ä¸ºï¼Œä¸‹é¢è¿›è¡Œè§£æï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java">Opening JDBC Connection                                       <span class="hljs-comment">//æ‰“å¼€JDBCè¿æ¥</span><br>Created connection <span class="hljs-number">90045638.</span>                                <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªconnectionè¿æ¥å¯¹è±¡</span><br>Setting autocommit to <span class="hljs-keyword">false</span> on JDBC Connection  [com.mysql.cj.jdbc.ConnectionImpl@55dfcc6]         <span class="hljs-comment">//è®¾ç½®äº‹åŠ¡è‡ªåŠ¨æäº¤ä¸ºfalse</span><br>==&gt;  Preparing: select * from mybatis.user             <span class="hljs-comment">//é¢„ç¼–è¯‘</span><br>==&gt; Parameters:                                                       <span class="hljs-comment">//æŸ¥è¯¢çš„å‚æ•°</span><br>&lt;==    Columns: id, name, pwd                         <br>&lt;==        Row: <span class="hljs-number">1</span>, ä¹”å¨, <span class="hljs-number">123456</span><br>&lt;==        Row: <span class="hljs-number">2</span>, å¼ ä¸‰, <span class="hljs-number">123456</span><br>&lt;==        Row: <span class="hljs-number">3</span>, æå››, <span class="hljs-number">123456</span><br>&lt;==        Row: <span class="hljs-number">4</span>, æäº”, <span class="hljs-number">123456</span><br>&lt;==      Total: <span class="hljs-number">4</span>                                                          <span class="hljs-comment">//æŸ¥è¯¢ç»“æœæ€»æ¡æ•°</span><br>User&#123;id=<span class="hljs-number">1</span>, name=<span class="hljs-string">&#x27;ä¹”å¨&#x27;</span>, password=<span class="hljs-string">&#x27;123456&#x27;</span>&#125;<br>User&#123;id=<span class="hljs-number">2</span>, name=<span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>, password=<span class="hljs-string">&#x27;123456&#x27;</span>&#125;<br>User&#123;id=<span class="hljs-number">3</span>, name=<span class="hljs-string">&#x27;æå››&#x27;</span>, password=<span class="hljs-string">&#x27;123456&#x27;</span>&#125;<br>User&#123;id=<span class="hljs-number">4</span>, name=<span class="hljs-string">&#x27;æäº”&#x27;</span>, password=<span class="hljs-string">&#x27;123456&#x27;</span>&#125;<br>Resetting autocommit to <span class="hljs-keyword">true</span> on JDBC Connection    [com.mysql.cj.jdbc.ConnectionImpl@55dfcc6]           <span class="hljs-comment">//è®¾ç½®äº‹åŠ¡è‡ªåŠ¨æäº¤ä¸ºtrue</span><br>Closing JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@55dfcc6] <span class="hljs-comment">// å…³é—­è¿æ¥</span><br>Returned connection <span class="hljs-number">90045638</span> to pool.                    <span class="hljs-comment">//å°†connectionè¿˜ç»™æ± å­</span><br></code></pre></td></tr></table></figure><h3 id="6-2-LOG4J"><a href="#6-2-LOG4J" class="headerlink" title="6.2 LOG4J"></a>6.2 LOG4J</h3><ul><li><p>ç¬¬ä¸€æ­¥ï¼Œäº†è§£ä¸€ä¸‹LOG4Jã€‚</p><ul><li>Log4jæ˜¯<a href="https://baike.baidu.com/item/Apache/8512995">Apache</a>çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œé€šè¿‡ä½¿ç”¨Log4jï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶æ—¥å¿—ä¿¡æ¯è¾“é€çš„ç›®çš„åœ°æ˜¯<a href="https://baike.baidu.com/item/%E6%8E%A7%E5%88%B6%E5%8F%B0/2438626">æ§åˆ¶å°</a>ã€æ–‡ä»¶ã€<a href="https://baike.baidu.com/item/GUI">GUI</a>ç»„ä»¶</li><li>æˆ‘ä»¬ä¹Ÿå¯ä»¥æ§åˆ¶æ¯ä¸€æ¡æ—¥å¿—çš„è¾“å‡ºæ ¼å¼</li><li>é€šè¿‡å®šä¹‰æ¯ä¸€æ¡æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ›´åŠ ç»†è‡´åœ°æ§åˆ¶æ—¥å¿—çš„ç”Ÿæˆè¿‡ç¨‹</li><li>é€šè¿‡ä¸€ä¸ª<a href="https://baike.baidu.com/item/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/286550">é…ç½®æ–‡ä»¶</a>æ¥çµæ´»åœ°è¿›è¡Œé…ç½®ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹åº”ç”¨çš„ä»£ç ã€‚</li></ul></li><li><p><strong>ç¬¬äºŒæ­¥ï¼Œä½¿ç”¨ä¸€ä¸ªå¤–éƒ¨ç±»ï¼Œéœ€è¦å…ˆå¯¼log4jåŒ…ï¼Œä»Mavenä»“åº“å»æ‰¾</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.17<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>ç¬¬ä¸‰æ­¥ï¼Œåœ¨resourcesç›®å½•ä¸‹åˆ›å»ºlog4j.properties</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-meta">log4j.rootLogger</span>=<span class="hljs-string">INFO,consoleAppender,logfile,MAIL</span><br><span class="hljs-meta">log4j.addivity.org.apache</span>=<span class="hljs-string">true</span><br><span class="hljs-comment">#ConsoleAppenderï¼Œæ§åˆ¶å°è¾“å‡º</span><br><span class="hljs-comment">#FileAppenderï¼Œæ–‡ä»¶æ—¥å¿—è¾“å‡º</span><br><span class="hljs-comment">#SMTPAppenderï¼Œå‘é‚®ä»¶è¾“å‡ºæ—¥å¿—</span><br><span class="hljs-comment">#SocketAppenderï¼ŒSocket æ—¥å¿—</span><br><span class="hljs-comment">#NTEventLogAppenderï¼ŒWindow NT æ—¥å¿—</span><br><span class="hljs-comment">#SyslogAppenderï¼Œ</span><br><span class="hljs-comment">#JMSAppenderï¼Œ</span><br><span class="hljs-comment">#AsyncAppenderï¼Œ</span><br><span class="hljs-comment">#NullAppender</span><br><span class="hljs-comment">#æ–‡ä»¶è¾“å‡ºï¼šRollingFileAppender</span><br><span class="hljs-comment">#log4j.rootLogger = INFO,logfile</span><br><span class="hljs-meta">log4j.appender.logfile</span> = <span class="hljs-string">org.apache.log4j.RollingFileAppender</span><br><span class="hljs-meta">log4j.appender.logfile.Threshold</span> = <span class="hljs-string">INFO</span><br><span class="hljs-comment"># è¾“å‡ºä»¥ä¸Šçš„ INFO ä¿¡æ¯</span><br><span class="hljs-meta">log4j.appender.logfile.File</span> = <span class="hljs-string">INFO_log.html</span><br><span class="hljs-comment">#ä¿å­˜ log æ–‡ä»¶è·¯å¾„</span><br><span class="hljs-attr">Log4j</span> <span class="hljs-string">ä»å…¥é—¨åˆ°è¯¦è§£</span><br><span class="hljs-attr">10</span><br><span class="hljs-meta">log4j.appender.logfile.Append</span> = <span class="hljs-string">true</span><br><span class="hljs-comment"># é»˜è®¤ä¸º trueï¼Œæ·»åŠ åˆ°æœ«å°¾ï¼Œfalse åœ¨æ¯æ¬¡å¯åŠ¨æ—¶è¿›è¡Œè¦†ç›–</span><br><span class="hljs-meta">log4j.appender.logfile.MaxFileSize</span> = <span class="hljs-string">1MB</span><br><span class="hljs-comment"># ä¸€ä¸ª log æ–‡ä»¶çš„å¤§å°ï¼Œè¶…è¿‡è¿™ä¸ªå¤§å°å°±åˆä¼šç”Ÿæˆ 1 ä¸ªæ—¥å¿— # KB ï¼ŒMBï¼ŒGB</span><br><span class="hljs-meta">log4j.appender.logfile.MaxBackupIndex</span> = <span class="hljs-string">3</span><br><span class="hljs-comment"># æœ€å¤šä¿å­˜ 3 ä¸ªæ–‡ä»¶å¤‡ä»½</span><br><span class="hljs-meta">log4j.appender.logfile.layout</span> = <span class="hljs-string">org.apache.log4j.HTMLLayout</span><br><span class="hljs-comment"># è¾“å‡ºæ–‡ä»¶çš„æ ¼å¼</span><br><span class="hljs-meta">log4j.appender.logfile.layout.LocationInfo</span> = <span class="hljs-string">true</span><br><span class="hljs-comment">#æ˜¯å¦æ˜¾ç¤ºç±»åå’Œè¡Œæ•°</span><br><span class="hljs-attr">log4j.appender.logfile.layout.Title</span><br>=title:\u63d0\u9192\u60a8\uff1a\u7cfb\u7edf\u53d1\u751f\u4e86\u4e25\u91cd\u9519\u8b<br><span class="hljs-attr">ef</span><br><span class="hljs-comment">#html é¡µé¢çš„ &lt; title &gt;</span><br><span class="hljs-comment">############################## SampleLayout ####################################</span><br><span class="hljs-comment"># log4j.appender.logfile.layout = org.apache.log4j.SampleLayout</span><br><span class="hljs-comment">############################## PatternLayout ###################################</span><br><span class="hljs-comment"># log4j.appender.logfile.layout = org.apache.log4j.PatternLayout</span><br><span class="hljs-comment"># log4j.appender.logfile.layout.ConversionPattern =% d % p [ % c] - % m % n % d</span><br><span class="hljs-comment">############################## XMLLayout #######################################</span><br><span class="hljs-comment"># log4j.appender.logfile.layout = org.apache.log4j.XMLLayout</span><br><span class="hljs-comment"># log4j.appender.logfile.layout.LocationInfo = true #æ˜¯å¦æ˜¾ç¤ºç±»åå’Œè¡Œæ•°</span><br><span class="hljs-comment">############################## TTCCLayout ######################################</span><br><span class="hljs-comment"># log4j.appender.logfile.layout = org.apache.log4j.TTCCLayout</span><br><span class="hljs-comment"># log4j.appender.logfile.layout.DateFormat = ISO8601</span><br><span class="hljs-comment">#NULL, RELATIVE, ABSOLUTE, DATE or ISO8601.</span><br><span class="hljs-comment"># log4j.appender.logfile.layout.TimeZoneID = GMT - 8 : 00</span><br><span class="hljs-comment"># log4j.appender.logfile.layout.CategoryPrefixing = false ##é»˜è®¤ä¸º true æ‰“å°ç±»åˆ«å</span><br><span class="hljs-comment"># log4j.appender.logfile.layout.ContextPrinting = false ##é»˜è®¤ä¸º true æ‰“å°ä¸Šä¸‹æ–‡ä¿¡æ¯</span><br><span class="hljs-comment"># log4j.appender.logfile.layout.ThreadPrinting = false ##é»˜è®¤ä¸º true æ‰“å°çº¿ç¨‹å</span><br><span class="hljs-comment"># æ‰“å°ä¿¡æ¯å¦‚ä¸‹ï¼š</span><br><span class="hljs-comment">#2007 - 09 - 13 14 : 45 : 39 , 765 [http - 8080 - 1 ] ERROR com.poxool.test.test -</span><br><span class="hljs-attr">error</span> <span class="hljs-string">æˆåŠŸå…³é—­é“¾æ¥</span><br><span class="hljs-comment">###############################################################################</span><br><span class="hljs-comment">#æ¯å¤©æ–‡ä»¶çš„è¾“å‡ºï¼šDailyRollingFileAppender</span><br><span class="hljs-comment">#log4j.rootLogger = INFO,errorlogfile</span><br><span class="hljs-meta">log4j.appender.errorlogfile</span> = <span class="hljs-string">org.apache.log4j.DailyRollingFileAppender</span><br><span class="hljs-meta">log4j.appender.errorlogfile.Threshold</span> = <span class="hljs-string">ERROR</span><br><span class="hljs-meta">log4j.appender.errorlogfile.File</span> = <span class="hljs-string">../logs/ERROR_log</span><br><span class="hljs-meta">log4j.appender.errorlogfile.Append</span> = <span class="hljs-string">true</span><br><span class="hljs-comment">#é»˜è®¤ä¸º trueï¼Œæ·»åŠ åˆ°æœ«å°¾ï¼Œfalse åœ¨æ¯æ¬¡å¯åŠ¨æ—¶è¿›è¡Œè¦†ç›–</span><br><span class="hljs-meta">log4j.appender.errorlogfile.ImmediateFlush</span> = <span class="hljs-string">true</span><br><span class="hljs-comment">#ç›´æ¥è¾“å‡ºï¼Œä¸è¿›è¡Œç¼“å­˜</span><br><span class="hljs-comment"># &#x27; . &#x27; yyyy - MM: æ¯ä¸ªæœˆæ›´æ–°ä¸€ä¸ª log æ—¥å¿—</span><br><span class="hljs-comment"># &#x27; . &#x27; yyyy - ww: æ¯ä¸ªæ˜ŸæœŸæ›´æ–°ä¸€ä¸ª log æ—¥å¿—</span><br><span class="hljs-comment"># &#x27; . &#x27; yyyy - MM - dd: æ¯å¤©æ›´æ–°ä¸€ä¸ª log æ—¥å¿—</span><br><span class="hljs-comment"># &#x27; . &#x27; yyyy - MM - dd - a: æ¯å¤©çš„åˆå¤œå’Œæ­£åˆæ›´æ–°ä¸€ä¸ª log æ—¥å¿—</span><br><span class="hljs-comment"># &#x27; . &#x27; yyyy - MM - dd - HH: æ¯å°æ—¶æ›´æ–°ä¸€ä¸ª log æ—¥å¿—</span><br><span class="hljs-comment"># &#x27; . &#x27; yyyy - MM - dd - HH - mm: æ¯åˆ†é’Ÿæ›´æ–°ä¸€ä¸ª log æ—¥å¿—</span><br><span class="hljs-attr">Log4j</span> <span class="hljs-string">ä»å…¥é—¨åˆ°è¯¦è§£</span><br><span class="hljs-attr">11</span><br><span class="hljs-meta">log4j.appender.errorlogfile.DatePattern</span> = <span class="hljs-string">&#x27; . &#x27; yyyy - MM - dd &#x27; .log &#x27;</span><br><span class="hljs-comment">#æ–‡ä»¶åç§°çš„æ ¼å¼</span><br><span class="hljs-meta">log4j.appender.errorlogfile.layout</span> = <span class="hljs-string">org.apache.log4j.PatternLayout</span><br><span class="hljs-meta">log4j.appender.errorlogfile.layout.ConversionPattern</span> =<span class="hljs-string">%d %p [ %c] - %m %n %d</span><br><span class="hljs-comment">#æ§åˆ¶å°è¾“å‡ºï¼š</span><br><span class="hljs-comment">#log4j.rootLogger = INFO,consoleAppender</span><br><span class="hljs-meta">log4j.appender.consoleAppender</span> = <span class="hljs-string">org.apache.log4j.ConsoleAppender</span><br><span class="hljs-meta">log4j.appender.consoleAppender.Threshold</span> = <span class="hljs-string">ERROR</span><br><span class="hljs-meta">log4j.appender.consoleAppender.layout</span> = <span class="hljs-string">org.apache.log4j.PatternLayout</span><br><span class="hljs-meta">log4j.appender.consoleAppender.layout.ConversionPattern</span> =<span class="hljs-string">%d %-5p %m %n</span><br><span class="hljs-meta">log4j.appender.consoleAppender.ImmediateFlush</span> = <span class="hljs-string">true</span><br><span class="hljs-comment"># ç›´æ¥è¾“å‡ºï¼Œä¸è¿›è¡Œç¼“å­˜</span><br><span class="hljs-meta">log4j.appender.consoleAppender.Target</span> = <span class="hljs-string">System.err</span><br><span class="hljs-comment"># é»˜è®¤æ˜¯ System.out æ–¹å¼è¾“å‡º</span><br><span class="hljs-comment">#å‘é€é‚®ä»¶ï¼šSMTPAppender</span><br><span class="hljs-comment">#log4j.rootLogger = INFO,MAIL</span><br><span class="hljs-meta">log4j.appender.MAIL</span> = <span class="hljs-string">org.apache.log4j.net.SMTPAppender</span><br><span class="hljs-meta">log4j.appender.MAIL.Threshold</span> = <span class="hljs-string">INFO</span><br><span class="hljs-meta">log4j.appender.MAIL.BufferSize</span> = <span class="hljs-string">10</span><br><span class="hljs-meta">log4j.appender.MAIL.From</span> = <span class="hljs-string">yourmail@gmail.com</span><br><span class="hljs-meta">log4j.appender.MAIL.SMTPHost</span> = <span class="hljs-string">smtp.gmail.com</span><br><span class="hljs-meta">log4j.appender.MAIL.Subject</span> = <span class="hljs-string">Log4J Message</span><br><span class="hljs-meta">log4j.appender.MAIL.To</span> = <span class="hljs-string">yourmail@gmail.com</span><br><span class="hljs-meta">log4j.appender.MAIL.layout</span> = <span class="hljs-string">org.apache.log4j.PatternLayout</span><br><span class="hljs-meta">log4j.appender.MAIL.layout.ConversionPattern</span> =<span class="hljs-string">%d - %c -%-4r [%t] %-5p %c %x - %m %n</span><br><span class="hljs-comment">#æ•°æ®åº“ï¼šJDBCAppender</span><br><span class="hljs-meta">log4j.appender.DATABASE</span> = <span class="hljs-string">org.apache.log4j.jdbc.JDBCAppender</span><br><span class="hljs-meta">log4j.appender.DATABASE.URL</span> = <span class="hljs-string">jdbc:oracle:thin:@ 210.51 . 173.94 : 1521 :YDB</span><br><span class="hljs-meta">log4j.appender.DATABASE.driver</span> = <span class="hljs-string">oracle.jdbc.driver.OracleDriver</span><br><span class="hljs-meta">log4j.appender.DATABASE.user</span> = <span class="hljs-string">ydbuser</span><br><span class="hljs-meta">log4j.appender.DATABASE.password</span> = <span class="hljs-string">ydbuser</span><br><span class="hljs-meta">log4j.appender.DATABASE.sql</span> = <span class="hljs-string">INSERT INTO A1 (TITLE3) VALUES ( &#x27; %d - %c %-5p %c %x - %m%n</span><br><span class="hljs-meta">&#x27;</span> <span class="hljs-string">)</span><br><span class="hljs-meta">log4j.appender.DATABASE.layout</span> = <span class="hljs-string">org.apache.log4j.PatternLayout</span><br><span class="hljs-meta">log4j.appender.DATABASE.layout.ConversionPattern</span> =<span class="hljs-string">% d - % c -%- 4r [ % t] %- 5p % c %</span><br><span class="hljs-attr">x</span> <span class="hljs-string">- % m % n</span><br><span class="hljs-comment">#æ•°æ®åº“çš„é“¾æ¥ä¼šæœ‰é—®é¢˜ï¼Œå¯ä»¥é‡å†™ org.apache.log4j.jdbc.JDBCAppender çš„ getConnection() ä½¿ç”¨æ•°</span><br><span class="hljs-meta">æ®åº“é“¾æ¥æ± å»å¾—é“¾æ¥ï¼Œå¯ä»¥é¿å…</span> <span class="hljs-string">insert ä¸€æ¡å°±é“¾æ¥ä¸€æ¬¡æ•°æ®åº“</span><br></code></pre></td></tr></table></figure></li><li><p><strong>ç¬¬å››æ­¥ï¼Œlog4jé…ç½®æ–‡ä»¶è§£æï¼Œå¦‚ä¸‹</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment"># æ—¥å¿—ä¿¡æ¯è¾“å‡ºåˆ°æ§åˆ¶å°ã€æ–‡ä»¶</span><br><span class="hljs-meta">log4j.rootLogger</span>=<span class="hljs-string">DEBUG,console,file</span><br><span class="hljs-comment"># é»˜è®¤ä¸º trueï¼Œæ·»åŠ åˆ°æœ«å°¾ï¼Œfalse åœ¨æ¯æ¬¡å¯åŠ¨æ—¶è¿›è¡Œè¦†ç›–</span><br><span class="hljs-meta">log4j.appender.file.Append</span> = <span class="hljs-string">true</span><br><span class="hljs-comment"># ä¸€ä¸ª log æ–‡ä»¶çš„å¤§å°ï¼Œè¶…è¿‡è¿™ä¸ªå¤§å°å°±åˆä¼šç”Ÿæˆ 1 ä¸ªæ—¥å¿— # KB ï¼ŒMBï¼ŒGB</span><br><span class="hljs-meta">log4j.appender.file.MaxFileSize</span> = <span class="hljs-string">1MB</span><br></code></pre></td></tr></table></figure></li><li><p><strong>ç¬¬äº”æ­¥ï¼Œä¸Šé¢çš„é…ç½®æ–‡ä»¶å¤ªä¹±äº†ï¼Œæˆ‘ä»¬å»æ‰¾ä¸€ä¸ªæ¯”è¾ƒå¹²å‡€çš„é…ç½®æ–‡ä»¶</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment">#å°†ç­‰çº§ä¸ºDEBUGçš„æ—¥å¿—ä¿¡æ¯è¾“å‡ºåˆ°consoleå’Œfileè¿™ä¸¤ä¸ªç›®çš„åœ°ï¼Œconsoleå’Œfileçš„å®šä¹‰åœ¨ä¸‹é¢çš„ä»£ç </span><br><span class="hljs-meta">log4j.rootLogger</span>=<span class="hljs-string">DEBUG,console,file</span><br><br><span class="hljs-comment">#æ§åˆ¶å°è¾“å‡ºçš„ç›¸å…³è®¾ç½®</span><br><span class="hljs-meta">log4j.appender.console</span> = <span class="hljs-string">org.apache.log4j.ConsoleAppender</span><br><span class="hljs-meta">log4j.appender.console.Target</span> = <span class="hljs-string">System.out</span><br><span class="hljs-meta">log4j.appender.console.Threshold</span>=<span class="hljs-string">DEBUG</span><br><span class="hljs-meta">log4j.appender.console.layout</span> = <span class="hljs-string">org.apache.log4j.PatternLayout</span><br><span class="hljs-meta">log4j.appender.console.layout.ConversionPattern</span>=<span class="hljs-string">[%c]-%m%n</span><br><br><span class="hljs-comment">#æ–‡ä»¶è¾“å‡ºçš„ç›¸å…³è®¾ç½®</span><br><span class="hljs-meta">log4j.appender.file</span> = <span class="hljs-string">org.apache.log4j.RollingFileAppender</span><br><span class="hljs-meta">log4j.appender.file.File</span>=<span class="hljs-string">./log/atrox.txt</span><br><span class="hljs-meta">log4j.appender.file.MaxFileSize</span>=<span class="hljs-string">10mb</span><br><span class="hljs-meta">log4j.appender.file.Threshold</span>=<span class="hljs-string">DEBUG</span><br><span class="hljs-meta">log4j.appender.file.layout</span>=<span class="hljs-string">org.apache.log4j.PatternLayout</span><br><span class="hljs-meta">log4j.appender.file.layout.ConversionPattern</span>=<span class="hljs-string">[%p][%d&#123;yy-MM-dd&#125;][%c]%m%n</span><br><br><span class="hljs-comment">#æ—¥å¿—è¾“å‡ºçº§åˆ«</span><br><span class="hljs-meta">log4j.logger.org.mybatis</span>=<span class="hljs-string">DEBUG</span><br><span class="hljs-meta">log4j.logger.java.sql</span>=<span class="hljs-string">DEBUG</span><br><span class="hljs-meta">log4j.logger.java.sql.Statement</span>=<span class="hljs-string">DEBUG</span><br><span class="hljs-meta">log4j.logger.java.sql.ResultSet</span>=<span class="hljs-string">DEBUG</span><br><span class="hljs-meta">log4j.logger.java.sql.PreparedStatement</span>=<span class="hljs-string">DEBUG</span><br></code></pre></td></tr></table></figure></li></ul><ul><li><p><strong>ç¬¬å…­æ­¥ï¼Œåœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶é…ç½®log4jä¸ºæ—¥å¿—çš„å®ç°</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;logImpl&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;LOG4J&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>æµ‹è¯•è¿è¡Œåˆšæ‰çš„æŸ¥è¯¢</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java">[org.apache.ibatis.transaction.jdbc.JdbcTransaction]-Opening JDBC Connection<br>[org.apache.ibatis.datasource.pooled.PooledDataSource]-Created connection <span class="hljs-number">680988889.</span><br>[org.apache.ibatis.transaction.jdbc.JdbcTransaction]-Setting autocommit to <span class="hljs-keyword">false</span> on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@289710d9]<br>[com.atrox.dao.UserMapper.getUserList]-==&gt;  Preparing: select * from mybatis.user <br>[com.atrox.dao.UserMapper.getUserList]-==&gt; Parameters: <br>[com.atrox.dao.UserMapper.getUserList]-&lt;==      Total: <span class="hljs-number">4</span><br>User&#123;id=<span class="hljs-number">1</span>, name=<span class="hljs-string">&#x27;ä¹”å¨&#x27;</span>, password=<span class="hljs-string">&#x27;123456&#x27;</span>&#125;<br>User&#123;id=<span class="hljs-number">2</span>, name=<span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>, password=<span class="hljs-string">&#x27;123456&#x27;</span>&#125;<br>User&#123;id=<span class="hljs-number">3</span>, name=<span class="hljs-string">&#x27;æå››&#x27;</span>, password=<span class="hljs-string">&#x27;123456&#x27;</span>&#125;<br>User&#123;id=<span class="hljs-number">4</span>, name=<span class="hljs-string">&#x27;æäº”&#x27;</span>, password=<span class="hljs-string">&#x27;123456&#x27;</span>&#125;<br>[org.apache.ibatis.transaction.jdbc.JdbcTransaction]-Resetting autocommit to <span class="hljs-keyword">true</span> on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@289710d9]<br>[org.apache.ibatis.transaction.jdbc.JdbcTransaction]-Closing JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@289710d9]<br>[org.apache.ibatis.datasource.pooled.PooledDataSource]-Returned connection <span class="hljs-number">680988889</span> to pool.<br></code></pre></td></tr></table></figure></li></ul><h3 id="6-3-Use-LOG4J"><a href="#6-3-Use-LOG4J" class="headerlink" title="6.3  Use LOG4J"></a>6.3  Use LOG4J</h3><ol><li><p><strong>åœ¨è¦ä½¿ç”¨Log4jçš„ç±»ä¸­å¯¼å…¥åŒ…</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.apache.log4j.Logger;<br></code></pre></td></tr></table></figure></li><li><p><strong>è·å–æ—¥å¿—å¯¹è±¡ï¼Œå‚æ•°ä¸ºå½“å‰ç±»çš„class</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">static</span> Logger logger = Logger.getLogger(UserMapperTest.class);<br></code></pre></td></tr></table></figure></li><li><p>å†™æµ‹è¯•æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testLog4j</span><span class="hljs-params">()</span> </span>&#123;<br>    logger.info(<span class="hljs-string">&quot;info:è¿›å…¥äº†testLog4j&quot;</span>);<br>    logger.debug(<span class="hljs-string">&quot;debug:è¿›å…¥äº†testLog4j&quot;</span>);<br>    logger.error(<span class="hljs-string">&quot;error:è¿›å…¥äº†testLog4j&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å½“è¿è¡Œåï¼Œåœ¨<strong>å·¦ä¾§ç›®å½•åˆ›å»ºäº†logç›®å½•ä¸‹é¢æœ‰atrox.txt</strong>,åŸå› æ˜¯log4jé…ç½®æ–‡ä»¶é‡Œå†™çš„</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-meta">log4j.appender.file.File</span>=<span class="hljs-string">./log/atrox.txt</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/mybatis_log.png" alt="æ—¥å¿—è¾“å‡ºç›®å½•"></p></li><li><p>atrox.txtçš„æ—¥å¿—ä¿¡æ¯å’Œæ§åˆ¶å°è¾“å‡ºçš„ç›¸åŒ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">[com.atrox.dao.UserMapperTest]-info:è¿›å…¥äº†testLog4j<br>[com.atrox.dao.UserMapperTest]-debug:è¿›å…¥äº†testLog4j<br>[com.atrox.dao.UserMapperTest]-error:è¿›å…¥äº†testLog4j<br></code></pre></td></tr></table></figure></li></ol><h2 id="7ã€Pagination"><a href="#7ã€Pagination" class="headerlink" title="7ã€Pagination"></a>7ã€Pagination</h2><p>åœ¨äº†è§£åˆ†é¡µä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æ€è€ƒï¼š</p><p><strong>ä¸ºä»€ä¹ˆè¦åˆ†é¡µï¼Ÿ</strong></p><ul><li>å‡å°‘æ•°æ®çš„å¤„ç†é‡</li><li>èŠ‚çº¦èµ„æº</li></ul><h3 id="7-1-Limit"><a href="#7-1-Limit" class="headerlink" title="7.1 Limit"></a>7.1 Limit</h3><p>ä½¿ç”¨Limitè¿›è¡Œåˆ†é¡µçš„SQLè¯­å¥</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">limit</span> startIndex,pageSize; <br></code></pre></td></tr></table></figure><p>ä¸‹é¢ï¼Œæˆ‘ä»¬ä½¿ç”¨MyBatiså®ç°åˆ†é¡µï¼Œæ ¸å¿ƒå…¶å®å°±æ˜¯SQLè¯­å¥ï¼Œè€ä¸‰æ­¥ã€‚</p><p><strong>ç¬¬ä¸€æ­¥ï¼šåœ¨UserMapperæ¥å£ä¸­å†™æ–¹æ³•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// åˆ†é¡µæŸ¥è¯¢</span><br><span class="hljs-function">List&lt;User&gt; <span class="hljs-title">getUserByLimit</span><span class="hljs-params">(Map&lt;String,Integer&gt; map)</span></span>;<br></code></pre></td></tr></table></figure><p><strong>ç¬¬äºŒæ­¥ï¼šåœ¨UserMapper.xmlä¸­å†™SQLè¯­å¥</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--åˆ†é¡µ--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserByLimit&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;map&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;UserMap&quot;</span>&gt;</span><br>    select * from mybatis.user limit #&#123;startIndex&#125;,#&#123;pageSize&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>ç¬¬ä¸‰æ­¥ï¼šæµ‹è¯•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getUserByLimit</span><span class="hljs-params">()</span> </span>&#123;<br>    SqlSession sqlSession = MyBatisUtils.getSqlSession();<br>    UserMapper mapper = sqlSession.getMapper(UserMapper.class);<br><br>    HashMap&lt;String, Integer&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;String, Integer&gt;();<br>    map.put(<span class="hljs-string">&quot;startIndex&quot;</span>,<span class="hljs-number">0</span>);<br>    map.put(<span class="hljs-string">&quot;pageSize&quot;</span>,<span class="hljs-number">2</span>);<br><br>    List&lt;User&gt; users = mapper.getUserByLimit(map);<br>    <span class="hljs-keyword">for</span> (User user : users) &#123;<br>        System.out.println(user);<br>    &#125;<br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="7-2-RowBounds"><a href="#7-2-RowBounds" class="headerlink" title="7.2 RowBounds"></a>7.2 RowBounds</h3><p>ä¸å†ä½¿ç”¨SQLå®ç°åˆ†é¡µ</p><p><strong>ç¬¬ä¸€æ­¥ï¼Œæ¥å£å†™æ–¹æ³•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// åˆ†é¡µ2</span><br><span class="hljs-function">List&lt;User&gt; <span class="hljs-title">getuserByRowBounds</span><span class="hljs-params">()</span></span>;<br></code></pre></td></tr></table></figure><p><strong>ç¬¬äºŒæ­¥ï¼Œå†™SQLè¯­å¥</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--åˆ†é¡µ2--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getuserByRowBounds&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;UserMap&quot;</span>&gt;</span><br>    select * from mybatis.user<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>ç¬¬ä¸‰æ­¥ï¼Œæµ‹è¯•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getUserByRowBounds</span><span class="hljs-params">()</span> </span>&#123;<br>    SqlSession sqlSession = MyBatisUtils.getSqlSession();<br><br>    <span class="hljs-comment">// RowBoundså®ç°</span><br>    RowBounds rowBounds = <span class="hljs-keyword">new</span> RowBounds(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);<br><br>    <span class="hljs-comment">// é€šè¿‡Javaä»£ç å±‚é¢å®ç°åˆ†é¡µ</span><br>    List&lt;Object&gt; users = sqlSession.selectList(<span class="hljs-string">&quot;com.atrox.dao.UserMapper.getuserByRowBounds&quot;</span>, <span class="hljs-keyword">null</span>, rowBounds);<br>    <span class="hljs-keyword">for</span> (Object user : users) &#123;<br>        System.out.println(user);<br>    &#125;<br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="7-3-Pagnation-Plugins"><a href="#7-3-Pagnation-Plugins" class="headerlink" title="7.3 Pagnation Plugins"></a>7.3 Pagnation Plugins</h3><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatiså­¦ä¹ ç¬”è®°/mybatis_pageHelper.png" alt="åˆ†é¡µæ’ä»¶" style="zoom:75%;"><h2 id="8ã€Annotation"><a href="#8ã€Annotation" class="headerlink" title="8ã€Annotation"></a>8ã€Annotation</h2><h3 id="8-1-Interface-oriented-programming"><a href="#8-1-Interface-oriented-programming" class="headerlink" title="8.1 Interface-oriented programming"></a>8.1 Interface-oriented programming</h3><p>-å¤§å®¶ä¹‹å‰éƒ½å­¦è¿‡é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œä¹Ÿå­¦ä¹ è¿‡æ¥å£ï¼Œä½†åœ¨çœŸæ­£çš„å¼€å‘ä¸­ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä¼šé€‰æ‹©é¢å‘æ¥å£ç¼–ç¨‹ã€‚</p><p><strong>-æ ¹æœ¬åŸå› ï¼š==è§£è€¦==ï¼Œå¯æ‹“å±•ï¼Œæé«˜å¤ç”¨ï¼Œåˆ†å±‚å¼€å‘ä¸­ï¼Œä¸Šå±‚ä¸ç”¨ç®¡å…·ä½“çš„å®ç°ï¼Œå¤§å®¶éƒ½éµå®ˆå…±åŒçš„æ ‡å‡†ï¼Œä½¿å¾—å¼€å‘å˜å¾—å®¹æ˜“ï¼Œè§„èŒƒæ€§æ›´å¥½</strong>ã€‚</p><p>-åœ¨ä¸€ä¸ªé¢å‘å¯¹è±¡çš„ç³»ç»Ÿä¸­ï¼Œç³»ç»Ÿçš„å„ç§åŠŸèƒ½æ˜¯ç”±è®¸è®¸å¤šå¤šçš„ä¸åŒå¯¹è±¡åä½œå®Œæˆçš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå„ä¸ªå¯¹è±¡å†…éƒ¨æ˜¯å¦‚ä½•å®ç°è‡ªå·±çš„,å¯¹ç³»ç»Ÿè®¾è®¡äººå‘˜æ¥è®²å°±ä¸é‚£ä¹ˆé‡è¦äº†;</p><p>-è€Œå„ä¸ªå¯¹è±¡ä¹‹é—´çš„åä½œå…³ç³»åˆ™æˆä¸ºç³»ç»Ÿè®¾è®¡çš„å…³é”®ã€‚å°åˆ°ä¸åŒç±»ä¹‹é—´çš„é€šä¿¡ï¼Œå¤§åˆ°å„æ¨¡å—ä¹‹é—´çš„äº¤äº’ï¼Œåœ¨ç³»ç»Ÿè®¾è®¡ä¹‹åˆéƒ½æ˜¯è¦ç€é‡è€ƒè™‘çš„ï¼Œè¿™ä¹Ÿæ˜¯ç³»ç»Ÿè®¾è®¡çš„ä¸»è¦å·¥ä½œå†…å®¹ã€‚é¢å‘æ¥å£ç¼–ç¨‹å°±æ˜¯æŒ‡æŒ‰ç…§è¿™ç§æ€æƒ³æ¥ç¼–ç¨‹ã€‚</p><p><strong>å…³äºæ¥å£çš„ç†è§£</strong></p><p>-æ¥å£ä»æ›´æ·±å±‚æ¬¡çš„ç†è§£ï¼Œåº”æ˜¯å®šä¹‰(è§„èŒƒï¼Œçº¦æŸï¼‰ä¸å®ç°(åå®åˆ†ç¦»çš„åŸåˆ™)çš„åˆ†ç¦»ã€‚-æ¥å£çš„æœ¬èº«åæ˜ äº†ç³»ç»Ÿè®¾è®¡äººå‘˜å¯¹ç³»ç»Ÿçš„æŠ½è±¡ç†è§£ã€‚</p><p>-æ¥å£åº”æœ‰ä¸¤ç±»:</p><p>-ç¬¬ä¸€ç±»æ˜¯å¯¹ä¸€ä¸ªä¸ªä½“çš„æŠ½è±¡ï¼Œå®ƒå¯å¯¹åº”ä¸ºä¸€ä¸ªæŠ½è±¡ä½“(abstract class);-ç¬¬äºŒç±»æ˜¯å¯¹ä¸€ä¸ªä¸ªä½“æŸä¸€æ–¹é¢çš„æŠ½è±¡ï¼Œå³å½¢æˆä¸€ä¸ªæŠ½è±¡é¢(interface) ;-â€”ä¸ªä½“æœ‰å¯èƒ½æœ‰å¤šä¸ªæŠ½è±¡é¢ã€‚æŠ½è±¡ä½“ä¸æŠ½è±¡é¢æ˜¯æœ‰åŒºåˆ«çš„ã€‚</p><p><strong>ä¸‰ä¸ªé¢å‘åŒºåˆ«</strong></p><p>-é¢å‘å¯¹è±¡æ˜¯æŒ‡ï¼Œæˆ‘ä»¬è€ƒè™‘é—®é¢˜æ—¶ï¼Œä»¥å¯¹è±¡ä¸ºå•ä½ï¼Œè€ƒè™‘å®ƒçš„å±æ€§åŠæ–¹æ³•.</p><p>-é¢å‘è¿‡ç¨‹æ˜¯æŒ‡ï¼Œæˆ‘ä»¬è€ƒè™‘é—®é¢˜æ—¶ï¼Œä»¥ä¸€ä¸ªå…·ä½“çš„æµç¨‹ï¼ˆäº‹åŠ¡è¿‡ç¨‹)ä¸ºå•ä½ï¼Œè€ƒè™‘å®ƒçš„å®ç°ï¼</p><p>-æ¥å£è®¾è®¡ä¸éæ¥å£è®¾è®¡æ˜¯é’ˆå¯¹å¤ç”¨æŠ€æœ¯è€Œè¨€çš„ï¼Œä¸é¢å‘å¯¹è±¡ï¼ˆè¿‡ç¨‹)ä¸æ˜¯ä¸€ä¸ªé—®é¢˜.æ›´å¤šçš„ä½“ç°å°±æ˜¯å¯¹ç³»ç»Ÿæ•´ä½“çš„æ¶æ„</p><h3 id="8-2-annotation-coding"><a href="#8-2-annotation-coding" class="headerlink" title="8.2 annotation coding"></a>8.2 annotation coding</h3><ol><li><p><strong>æ³¨è§£åœ¨æ¥å£ä¸Šå®ç°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserMapper</span> </span>&#123;<br>    <span class="hljs-meta">@Select(&quot;select * from user&quot;)</span><br>    <span class="hljs-function">List&lt;User&gt; <span class="hljs-title">getUsers</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>éœ€è¦åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ç»‘å®šæ¥å£</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--ç»‘å®šæ¥å£--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atrox.dao.UserMapper&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>æµ‹è¯•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span> </span>&#123;<br>    SqlSession sqlSession = MyBatisUtils.getSqlSession();<br>    <span class="hljs-comment">// åº•å±‚ä¸»è¦åº”ç”¨åå°„</span><br>    UserMapper mapper = sqlSession.getMapper(UserMapper.class);<br>    List&lt;User&gt; users = mapper.getUsers();<br>    <span class="hljs-keyword">for</span> (User user : users) &#123;<br>        System.out.println(user);<br>    &#125;<br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸€æ­¥ï¼Œç”±äºæˆ‘ä»¬çš„æ•°æ®åº“å­—æ®µä¸å®ä½“ç±»å±æ€§åä¸åŒï¼ŒæŸ¥è¯¢ç»“æœä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">User&#123;id=<span class="hljs-number">1</span>, name=<span class="hljs-string">&#x27;ä¹”å¨&#x27;</span>, password=<span class="hljs-string">&#x27;null&#x27;</span>&#125;<br>User&#123;id=<span class="hljs-number">2</span>, name=<span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>, password=<span class="hljs-string">&#x27;null&#x27;</span>&#125;<br>User&#123;id=<span class="hljs-number">3</span>, name=<span class="hljs-string">&#x27;æå››&#x27;</span>, password=<span class="hljs-string">&#x27;null&#x27;</span>&#125;<br>User&#123;id=<span class="hljs-number">4</span>, name=<span class="hljs-string">&#x27;æäº”&#x27;</span>, password=<span class="hljs-string">&#x27;null&#x27;</span>&#125;<br></code></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼Œä½¿ç”¨æ³¨è§£æ¥<strong>æ˜ å°„ç®€å•è¯­å¥ä¼šä½¿ä»£ç æ˜¾å¾—æ›´åŠ ç®€æ´</strong>ï¼Œä½†å¯¹äºç¨å¾®å¤æ‚ä¸€ç‚¹çš„è¯­å¥ï¼ŒJava æ³¨è§£ä¸ä»…åŠ›ä¸ä»å¿ƒï¼Œè¿˜ä¼šè®©ä½ æœ¬å°±å¤æ‚çš„ SQL è¯­å¥æ›´åŠ æ··ä¹±ä¸å ªã€‚ å› æ­¤ï¼Œå¦‚æœä½ éœ€è¦åšä¸€äº›å¾ˆå¤æ‚çš„æ“ä½œï¼Œ<strong>æœ€å¥½ç”¨ XML æ¥æ˜ å°„è¯­å¥</strong>ã€‚</p><p><strong>æœ¬è´¨</strong>ï¼šåå°„æœºåˆ¶çš„å®ç°</p><p><strong>åº•å±‚</strong>ï¼šåŠ¨æ€ä»£ç†</p></li></ol><h3 id="8-3-MyBatis-Source-code-analysis"><a href="#8-3-MyBatis-Source-code-analysis" class="headerlink" title="8.3 MyBatis Source code analysis"></a>8.3 MyBatis Source code analysis</h3><p><strong>MyBatisè¯¦ç»†çš„æ‰§è¡Œæµç¨‹ï¼</strong></p><p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/MyBatis_core_code.png" alt="MyBatisæºç åˆ†æ"></p><h3 id="8-4-Use-annotation-CRUD"><a href="#8-4-Use-annotation-CRUD" class="headerlink" title="8.4 Use annotation CRUD"></a>8.4 Use annotation CRUD</h3><p>æˆ‘ä»¬å¯ä»¥åœ¨å·¥å…·ç±»åˆ›å»ºçš„æ—¶å€™å®ç°<strong>è‡ªåŠ¨æäº¤äº‹åŠ¡</strong>ï¼Œåœ¨MyBatisUtilsä¸­ä¿®æ”¹è·å–sqlSessionçš„æ–¹æ³•!</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SqlSession <span class="hljs-title">getSqlSession</span><span class="hljs-params">()</span> </span>&#123; <span class="hljs-keyword">return</span> sqlSessionFactory.openSession(<span class="hljs-keyword">true</span>); &#125; <br></code></pre></td></tr></table></figure><p>ç¬¬äºŒæ­¥ï¼Œæ˜¯<strong>ç¼–å†™æ¥å£ï¼Œå¢åŠ æ³¨è§£</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserMapper</span> </span>&#123;<br><br>    <span class="hljs-meta">@Select(&quot;select * from user&quot;)</span><br>    <span class="hljs-function">List&lt;User&gt; <span class="hljs-title">getUsers</span><span class="hljs-params">()</span></span>;<br><br>    <span class="hljs-comment">// æ–¹æ³•å­˜åœ¨å¤šä¸ªå‚æ•°ï¼Œæ‰€æœ‰çš„å‚æ•°å‰é¢å¿…é¡»åŠ ä¸Š @Param(&quot;id&quot;)æ³¨è§£</span><br>    <span class="hljs-meta">@Select(&quot;select * from user where id = #&#123;id&#125;&quot;)</span><br>    <span class="hljs-function">User <span class="hljs-title">getUserById</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;id&quot;)</span> <span class="hljs-keyword">int</span> id)</span></span>;<br><br>    <span class="hljs-meta">@Insert(&quot;insert into user(id,name,pwd) values (#&#123;id&#125;,#&#123;name&#125;,#&#123;password&#125;)&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">addUser</span><span class="hljs-params">(User user)</span></span>;<br><br>    <span class="hljs-meta">@Update(&quot;update user set name = #&#123;name&#125;,pwd=#&#123;password&#125; where id = #&#123;id&#125;&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">updateUser</span><span class="hljs-params">(User user)</span></span>;<br><br>    <span class="hljs-meta">@Delete(&quot;delete from user where id = #&#123;uid&#125;&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">deleteUser</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;uid&quot;)</span> <span class="hljs-keyword">int</span> id)</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç¬¬ä¸‰æ­¥ï¼Œæ˜¯æµ‹è¯•ï¼Œä¸å‰é¢ç›¸åŒï¼Œåªæ˜¯<strong>ä¸éœ€è¦æ¯æ¬¡éƒ½æ‰‹åŠ¨æäº¤</strong>äº†ã€‚</p><h3 id="8-5-About-Param"><a href="#8-5-About-Param" class="headerlink" title="8.5 About @Param()"></a>8.5 About @Param()</h3><p>å…³äº@Paramæ³¨è§£ï¼Œæ˜¯æœ‰å‡ ä¸ªåŸåˆ™çš„</p><ul><li>åŸºæœ¬ç±»å‹çš„å‚æ•°æˆ–è€…Stringç±»å‹ï¼Œéœ€è¦åŠ ä¸Šè¯¥æ³¨è§£</li><li>å¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œåˆ™ä¸éœ€è¦åŠ ä¸Šè¯¥æ³¨è§£</li><li>å¦‚æœåªæœ‰ä¸€ä¸ªåŸºæœ¬ç±»å‹ï¼Œå¯ä»¥å¿½ç•¥ï¼Œä½†æ˜¯å»ºè®®åŠ ä¸Š</li><li>æˆ‘ä»¬åœ¨SQLä¸­å¼•ç”¨çš„å¼•ç”¨çš„å°±æ˜¯è¿™é‡Œ@Param()ä¸­è®¾å®šçš„å±æ€§å</li></ul><h3 id="8-6-V-S"><a href="#8-6-V-S" class="headerlink" title="8.6 ${} V.S. #{}"></a>8.6 ${} V.S. #{}</h3><p>ç”¨å‰è€…å­˜åœ¨SQLæ³¨å…¥é—®é¢˜ï¼Œåè€…æ˜¯å®‰å…¨çš„ã€‚</p><h2 id="9ã€Lombok"><a href="#9ã€Lombok" class="headerlink" title="9ã€Lombok"></a>9ã€Lombok</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">Project Lombok is a java library that automatically plugs into your editor and build tools, spicing up your java.<br>Never write another getter or equals method again, with one annotation your <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">has</span> <span class="hljs-title">a</span> <span class="hljs-title">fully</span> <span class="hljs-title">featured</span> <span class="hljs-title">builder</span>, <span class="hljs-title">Automate</span> <span class="hljs-title">your</span> <span class="hljs-title">logging</span> <span class="hljs-title">variables</span>, <span class="hljs-title">and</span> <span class="hljs-title">much</span> <span class="hljs-title">more</span>.</span><br></code></pre></td></tr></table></figure><ul><li><p>java library</p></li><li><p>plugs</p></li><li><p>build tools</p></li><li><p>with one annotation your class</p></li></ul><p><strong>Lombokçš„ä½¿ç”¨</strong>ï¼š</p><ul><li><p><strong>åœ¨IDEAä¸­å®‰è£…Lombokæ’ä»¶</strong></p><img src="/posts/2020/12/31/MyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/lombok_plug.png" alt="åœ¨IDEAä¸­æœç´¢lombokæ’ä»¶" style="zoom:75%;"></li></ul><ul><li><p><strong>åœ¨é¡¹ç›®ä¸­å¯¼å…¥Lombokçš„jaråŒ…</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.18.10<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>provided<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>è®¤è¯†ä¸€ä¸‹lombokå¯ä»¥åŠ çš„æ³¨è§£ï¼Œè¿™äº›å¯ä»¥ç›´æ¥åŠ åœ¨ç±»çš„ä¸Šé¢</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Getter</span> and <span class="hljs-meta">@Setter</span><br><span class="hljs-meta">@FieldNameConstants</span><br><span class="hljs-meta">@ToString</span><br><span class="hljs-meta">@EqualsAndHashCode</span><br><span class="hljs-meta">@AllArgsConstructor</span>, <span class="hljs-meta">@RequiredArgsConstructor</span> and <span class="hljs-meta">@NoArgsConstructor</span><br><span class="hljs-meta">@Log</span>, <span class="hljs-meta">@Log4j</span>, <span class="hljs-meta">@Log4j2</span>, <span class="hljs-meta">@Slf4j</span>, <span class="hljs-meta">@XSlf4j</span>, <span class="hljs-meta">@CommonsLog</span>, <span class="hljs-meta">@JBossLog</span>, <span class="hljs-meta">@Flogger</span>, <span class="hljs-meta">@CustomLog</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@Builder</span><br><span class="hljs-meta">@SuperBuilder</span><br><span class="hljs-meta">@Singular</span><br><span class="hljs-meta">@Delegate</span><br><span class="hljs-meta">@Value</span><br><span class="hljs-meta">@Accessors</span><br><span class="hljs-meta">@Wither</span><br><span class="hljs-meta">@With</span><br><span class="hljs-meta">@SneakyThrows</span><br></code></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬åœ¨ä¸€ä¸ªç±»ä¸Šé¢åŠ ä¸Š<code>@Data</code>ï¼Œå°±ä¼šå¸®æˆ‘ä»¬ç”Ÿæˆæ— å‚æ„é€ å™¨ï¼Œget/setæ–¹æ³•ï¼ŒtoStringæ–¹æ³•ï¼Œequalsæ–¹æ³•å’ŒhasCodeæ–¹æ³•ã€‚</p><img src="https://cdn.jsdelivr.net/gh/AtroxQW/jsDeliverCDN@1.0/source/_posts/MyBatiså­¦ä¹ ç¬”è®°/@Data.png" alt="åŠ ä¸Š@Dataæ³¨è§£" style="zoom:75%;"><p>ç”±äºåŠ äº†ä¸Šé¢@Dataï¼Œæ˜¯æ²¡æœ‰æœ‰å‚æ„é€ å™¨çš„ï¼Œæˆ‘ä»¬å¯ä»¥å†åŠ ä¸¤ä¸ªæ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// Userå®ä½“ç±»</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-meta">@NoArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String password;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="10ã€Many-to-one"><a href="#10ã€Many-to-one" class="headerlink" title="10ã€Many to one"></a>10ã€Many to one</h2><p>å¤šå¯¹ä¸€çš„å½¢è±¡è§£é‡Šå›¾ï¼š</p><img src="/posts/2020/12/31/MyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/many_to_one.png" alt="å¤šå¯¹ä¸€å›¾ç‰‡" style="zoom:75%;"><ul><li><p>å¯¹äºå­¦ç”Ÿè¿™è¾¹è€Œè¨€ï¼Œå¤šä¸ªå­¦ç”Ÿå…³è”ä¸€ä¸ªè€å¸ˆï¼ˆå¤šå¯¹ä¸€ï¼‰ã€‚ã€å…³è”ã€‘</p></li><li><p>è€Œå¯¹äºè€å¸ˆè€Œè¨€ï¼Œæœ‰å¾ˆå¤šå­¦ç”Ÿï¼ˆä¸€å¯¹å¤šï¼‰ã€‚ã€é›†åˆã€‘</p></li></ul><p>ä¸ºäº†è¿›ä¸€æ­¥é˜è¿°ï¼Œå…ˆæ­å»ºæµ‹è¯•ç¯å¢ƒã€‚</p><h3 id="10-1-build-test-environment"><a href="#10-1-build-test-environment" class="headerlink" title="10.1 build test environment"></a>10.1 build test environment</h3><ol><li><p>åœ¨æ•°æ®åº“ä¸­è¿è¡Œæ­¤SQLè„šæœ¬ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-string">`teacher`</span> (<br>  <span class="hljs-string">`id`</span> <span class="hljs-built_in">INT</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,<br>  <span class="hljs-string">`name`</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span>,<br>  PRIMARY <span class="hljs-keyword">KEY</span> (<span class="hljs-string">`id`</span>)<br>) <span class="hljs-keyword">ENGINE</span>=<span class="hljs-keyword">INNODB</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">CHARSET</span>=utf8<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> teacher(<span class="hljs-string">`id`</span>, <span class="hljs-string">`name`</span>) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;ç§¦è€å¸ˆ&#x27;</span>); <br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-string">`student`</span> (<br>  <span class="hljs-string">`id`</span> <span class="hljs-built_in">INT</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,<br>  <span class="hljs-string">`name`</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span>,<br>  <span class="hljs-string">`tid`</span> <span class="hljs-built_in">INT</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span>,<br>  PRIMARY <span class="hljs-keyword">KEY</span> (<span class="hljs-string">`id`</span>),<br>  <span class="hljs-keyword">KEY</span> <span class="hljs-string">`fktid`</span> (<span class="hljs-string">`tid`</span>),<br>  <span class="hljs-keyword">CONSTRAINT</span> <span class="hljs-string">`fktid`</span> <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span> (<span class="hljs-string">`tid`</span>) <span class="hljs-keyword">REFERENCES</span> <span class="hljs-string">`teacher`</span> (<span class="hljs-string">`id`</span>)<br>) <span class="hljs-keyword">ENGINE</span>=<span class="hljs-keyword">INNODB</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">CHARSET</span>=utf8<br><br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-string">`student`</span> (<span class="hljs-string">`id`</span>, <span class="hljs-string">`name`</span>, <span class="hljs-string">`tid`</span>) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;å°æ˜&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>); <br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-string">`student`</span> (<span class="hljs-string">`id`</span>, <span class="hljs-string">`name`</span>, <span class="hljs-string">`tid`</span>) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;2&#x27;</span>, <span class="hljs-string">&#x27;å°çº¢&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>); <br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-string">`student`</span> (<span class="hljs-string">`id`</span>, <span class="hljs-string">`name`</span>, <span class="hljs-string">`tid`</span>) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;3&#x27;</span>, <span class="hljs-string">&#x27;å°å¼ &#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>); <br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-string">`student`</span> (<span class="hljs-string">`id`</span>, <span class="hljs-string">`name`</span>, <span class="hljs-string">`tid`</span>) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;4&#x27;</span>, <span class="hljs-string">&#x27;å°æ&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>); <br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-string">`student`</span> (<span class="hljs-string">`id`</span>, <span class="hljs-string">`name`</span>, <span class="hljs-string">`tid`</span>) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;5&#x27;</span>, <span class="hljs-string">&#x27;å°ç‹&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>);<br></code></pre></td></tr></table></figure></li></ol><ol start="2"><li><p>åœ¨pomæ–‡ä»¶ä¸­å¯¼å…¥lombok</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.18.10<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ol><ol start="3"><li><p>æ–°å»ºå®ä½“ç±»Teacherï¼ŒStudent</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> lombok.Data;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Teacher</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;<br>    <span class="hljs-keyword">private</span> String name;<br>&#125;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;<br>    <span class="hljs-keyword">private</span> String name;<br><br>    <span class="hljs-comment">// å­¦ç”Ÿéœ€è¦å…³è”ä¸€ä¸ªè€å¸ˆï¼</span><br>    <span class="hljs-keyword">private</span> Teacher teacher;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å»ºç«‹Mapperæ¥å£</p><p><strong>StudentMapper</strong>:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">StudnetMapper</span> </span>&#123;&#125;<br></code></pre></td></tr></table></figure><p><strong>TeacherMapper:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">TeacherMapper</span> </span>&#123;<br><br>    <span class="hljs-meta">@Select(&quot;select * from teacher where id = #&#123;tid&#125;&quot;)</span><br>    <span class="hljs-function">Teacher <span class="hljs-title">getTeacher</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;tid&quot;)</span> <span class="hljs-keyword">int</span> id)</span></span>;<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å»ºç«‹Mapper.xmlæ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span></span><br><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!--namespaceç»‘å®šä¸€ä¸ªå¯¹åº”çš„Dao/Mapperæ¥å£--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.atrox.dao.TeacherMapper&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ol><ol start="6"><li><p>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ç»‘å®šæ³¨å†ŒMapperæ¥å£</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--ç»‘å®šæ¥å£--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atrox.dao.TeacherMapper&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.atrox.dao.StudentMapper&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>æµ‹è¯•æŸ¥è¯¢æ˜¯å¦èƒ½å¤ŸæˆåŠŸ</p><p><strong>MyTest.class</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyTest</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        SqlSession sqlSession = MyBatisUtils.getSqlSession();<br>        TeacherMapper mapper = sqlSession.getMapper(TeacherMapper.class);<br>        Teacher teacher = mapper.getTeacher(<span class="hljs-number">1</span>);<br>        System.out.println(teacher);<br>        sqlSession.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><h3 id="10-2-æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†-å­æŸ¥è¯¢"><a href="#10-2-æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†-å­æŸ¥è¯¢" class="headerlink" title="10.2 æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†(å­æŸ¥è¯¢)"></a>10.2 æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†(å­æŸ¥è¯¢)</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.atrox.dao.StudentMapper&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    æ€è·¯ï¼š</span><br><span class="hljs-comment">        1.æŸ¥è¯¢æ‰€æœ‰çš„å­¦ç”Ÿä¿¡æ¯</span><br><span class="hljs-comment">        2.æ ¹æ®æŸ¥è¯¢å‡ºæ¥çš„å­¦ç”Ÿçš„tidï¼Œå¯»æ‰¾å¯¹åº”çš„è€å¸ˆ</span><br><span class="hljs-comment">    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getStudent&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;StudentTeacher&quot;</span>&gt;</span><br>        select * from student;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;StudentTeacher&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;student&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;id&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;name&quot;</span>/&gt;</span><br>        <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">        å¤æ‚çš„å±æ€§ï¼Œæˆ‘ä»¬éœ€è¦å•ç‹¬å¤„ç†</span><br><span class="hljs-comment">            å¯¹è±¡ï¼šassociation</span><br><span class="hljs-comment">            é›†åˆï¼šcollection</span><br><span class="hljs-comment">        --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">association</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;teacher&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;tid&quot;</span> <span class="hljs-attr">javaType</span>=<span class="hljs-string">&quot;Teacher&quot;</span> <span class="hljs-attr">select</span>=<span class="hljs-string">&quot;getTeacher&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getTeacher&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Teacher&quot;</span>&gt;</span><br>        select * from teacher where id = #&#123;id&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="10-3-æŒ‰ç…§ç»“æœæŸ¥è¯¢å¤„ç†"><a href="#10-3-æŒ‰ç…§ç»“æœæŸ¥è¯¢å¤„ç†" class="headerlink" title="10.3 æŒ‰ç…§ç»“æœæŸ¥è¯¢å¤„ç†"></a>10.3 æŒ‰ç…§ç»“æœæŸ¥è¯¢å¤„ç†</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getStudent2&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;StudentTeacher2&quot;</span>&gt;</span><br>    select s.id sid,s.name sname,t.name tname from student s,teacher t where s.tid = t.id;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;StudentTeacher2&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;Student&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;sid&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;sname&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">association</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;teacher&quot;</span> <span class="hljs-attr">javaType</span>=<span class="hljs-string">&quot;Teacher&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;tname&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">association</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="11ã€One-to-Many"><a href="#11ã€One-to-Many" class="headerlink" title="11ã€One to Many"></a>11ã€One to Many</h2><p>æ¯”å¦‚ï¼šä¸€ä¸ªè€å¸ˆæ‹¥æœ‰å¤šä¸ªå­¦ç”Ÿã€‚å¯¹äºè€å¸ˆè€Œè¨€ï¼Œæ˜¯ä¸€å¯¹å¤šçš„å…³ç³»</p><h3 id="11-1-ç¯å¢ƒæ­å»º"><a href="#11-1-ç¯å¢ƒæ­å»º" class="headerlink" title="11.1 ç¯å¢ƒæ­å»º"></a>11.1 ç¯å¢ƒæ­å»º</h3><p>ä¸10.1ç›¸åŒ</p><p><strong>å®ä½“ç±»</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> pid;<br>&#125;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Teacher</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;<br>    <span class="hljs-keyword">private</span> String name;<br><br>    <span class="hljs-comment">// ä¸€ä¸ªè€å¸ˆæ‹¥æœ‰å¤šä¸ªå­¦ç”Ÿ</span><br>    <span class="hljs-keyword">private</span> List&lt;Student&gt; students;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="11-2-æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†"><a href="#11-2-æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†" class="headerlink" title="11.2 æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†"></a>11.2 æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--æŒ‰ç»“æœåµŒå¥—æŸ¥è¯¢--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getTeacher&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;TeacherStudent&quot;</span>&gt;</span><br>    select s.id sid,s.name sname,t.name tname,t.id tid<br>    from student s,teacher t<br>    where s.tid = t.id and t.id = #&#123;id&#125;;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;TeacherStudent&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;Teacher&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;tid&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;tname&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--é›†åˆä½¿ç”¨collection,é›†åˆä¸­çš„ä¿¡æ¯æˆ‘ä»¬ç”¨ofTypeè·å–--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">collection</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;students&quot;</span> <span class="hljs-attr">ofType</span>=<span class="hljs-string">&quot;Student&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;sid&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;sname&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;tid&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;tid&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">collection</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="11-3-æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†"><a href="#11-3-æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†" class="headerlink" title="11.3 æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†"></a>11.3 æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getTeacher2&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;TeacherStudent2&quot;</span>&gt;</span><br>    select * from teacher where id = #&#123;id&#125;;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;TeacherStudent2&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;Teacher&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">collection</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;students&quot;</span> <span class="hljs-attr">javaType</span>=<span class="hljs-string">&quot;ArrayList&quot;</span> <span class="hljs-attr">ofType</span>=<span class="hljs-string">&quot;Student&quot;</span> <span class="hljs-attr">select</span>=<span class="hljs-string">&quot;getStudentByTeacherId&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;id&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getStudentByTeacherId&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Student&quot;</span>&gt;</span><br>    select * from student where tid = #&#123;id&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="11-4-conclusion"><a href="#11-4-conclusion" class="headerlink" title="11.4 conclusion"></a>11.4 conclusion</h3><ol><li>å…³è”-associationã€å¤šå¯¹ä¸€ã€‘</li><li>é›†åˆ-collectionã€ä¸€å¯¹å¤šã€‘</li><li>javaType  &amp;  ofType<ul><li>javaTypeç”¨æ¥æŒ‡å®šå®ä½“ç±»ä¸­å±æ€§çš„ç±»å‹</li><li>ofType ç”¨æ¥æŒ‡å®šæ˜ å°„åˆ°Listæˆ–è€…é›†åˆä¸­çš„pojoç±»å‹ï¼Œæ³›å‹ä¸­çš„çº¦æŸç±»å‹</li></ul></li></ol><p><strong>æ³¨æ„ç‚¹</strong>ï¼š</p><ul><li>ä¿è¯SQLçš„å¯è¯»æ€§ï¼Œå°½é‡ä¿è¯é€šä¿—æ˜“æ‡‚</li><li>ä¿è¯ä¸€å¯¹å¤šå’Œå¤šå¯¹ä¸€ä¸­ï¼Œå±æ€§åå’Œå­—æ®µçš„é—®é¢˜</li><li>å¦‚æœé—®é¢˜ä¸å¥½æ’æŸ¥é”™è¯¯ï¼Œå¯ä»¥ä½¿ç”¨æ—¥å¿—ï¼Œå»ºè®®ä½¿ç”¨Log4j</li></ul><h2 id="12ã€åŠ¨æ€SQL"><a href="#12ã€åŠ¨æ€SQL" class="headerlink" title="12ã€åŠ¨æ€SQL"></a>12ã€åŠ¨æ€SQL</h2><p><strong>åŠ¨æ€SQæ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p>åŠ¨æ€SQLå°±æ˜¯æ ¹æ®ä¸åŒçš„æ¡ä»¶ç”Ÿæˆä¸åŒçš„SQLè¯­å¥ã€‚</p><p>å¦‚æœä½ ä¹‹å‰ç”¨è¿‡ JSTL æˆ–ä»»ä½•åŸºäºç±» XML è¯­è¨€çš„æ–‡æœ¬å¤„ç†å™¨ï¼Œä½ å¯¹åŠ¨æ€ SQL å…ƒç´ å¯èƒ½ä¼šæ„Ÿè§‰ä¼¼æ›¾ç›¸è¯†ã€‚åœ¨ MyBatis ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œéœ€è¦èŠ±æ—¶é—´äº†è§£å¤§é‡çš„å…ƒç´ ã€‚å€ŸåŠ©åŠŸèƒ½å¼ºå¤§çš„åŸºäº OGNL çš„è¡¨è¾¾å¼ï¼ŒMyBatis 3 æ›¿æ¢äº†ä¹‹å‰çš„å¤§éƒ¨åˆ†å…ƒç´ ï¼Œå¤§å¤§ç²¾ç®€äº†å…ƒç´ ç§ç±»ï¼Œç°åœ¨è¦å­¦ä¹ çš„å…ƒç´ ç§ç±»æ¯”åŸæ¥çš„ä¸€åŠè¿˜è¦å°‘ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml">if<br>choose (when, otherwise)<br>trim (where, set)<br>foreach<br></code></pre></td></tr></table></figure><h3 id="12-1-æ­å»ºç¯å¢ƒ"><a href="#12-1-æ­å»ºç¯å¢ƒ" class="headerlink" title="12.1 æ­å»ºç¯å¢ƒ"></a>12.1 æ­å»ºç¯å¢ƒ</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-string">`blog`</span> (<br>  <span class="hljs-string">`id`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;åšå®¢id&#x27;</span>,<br>  <span class="hljs-string">`title`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;åšå®¢æ ‡é¢˜&#x27;</span>,<br>  <span class="hljs-string">`author`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;åšå®¢ä½œè€…&#x27;</span>,<br>  <span class="hljs-string">`create_time`</span> datetime <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,<br>  <span class="hljs-string">`views`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;æµè§ˆé‡&#x27;</span><br>) <span class="hljs-keyword">ENGINE</span>=<span class="hljs-keyword">InnoDB</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">CHARSET</span>=utf8<br></code></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªåŸºç¡€å·¥ç¨‹</p><ol><li><p>å¯¼åŒ…</p></li><li><p>ç¼–å†™é…ç½®æ–‡ä»¶</p></li><li><p>ç¼–å†™å®ä½“ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Blog</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;<br>    <span class="hljs-keyword">private</span> String title;<br>    <span class="hljs-keyword">private</span> String author;<br>    <span class="hljs-keyword">private</span> Date createTime;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> views;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><ol start="4"><li>ç¼–å†™å®ä½“ç±»å¯¹åº”Mapperæ¥å£å’ŒMapper.xml</li></ol><h3 id="12-1-if"><a href="#12-1-if" class="headerlink" title="12.1 if"></a>12.1 if</h3><ul><li><p><strong>åœ¨BlogMapperæ¥å£ä¸­å†™æ–¹æ³•ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æŸ¥è¯¢åšå®¢</span><br><span class="hljs-function">List&lt;Blog&gt; <span class="hljs-title">queryBlogIF</span><span class="hljs-params">(Map map)</span></span>;<br></code></pre></td></tr></table></figure></li><li><p><strong>BlogMapper.xmlä¸­å®ç°åŠ¨æ€SQL</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;queryBlogIF&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;map&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Blog&quot;</span>&gt;</span><br>    select * from blog where 1=1<br>    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;title != null&quot;</span>&gt;</span><br>        and title = #&#123;title&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;author != null&quot;</span>&gt;</span><br>        and author = #&#123;author&#125;;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>æµ‹è¯•æŸ¥è¯¢ç»“æœ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">queryBlogIF</span><span class="hljs-params">()</span> </span>&#123;<br>    SqlSession sqlSession = MyBatisUtils.getSqlSession();<br>    BlogMapper mapper = sqlSession.getMapper(BlogMapper.class);<br>    HashMap&lt;String, String&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;String, String&gt;();<br>    map.put(<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-string">&quot;Javaå¦‚æ­¤ç®€å•&quot;</span>);<br>    map.put(<span class="hljs-string">&quot;author&quot;</span>,<span class="hljs-string">&quot;Atrox&quot;</span>);<br>    List&lt;Blog&gt; blogs = mapper.queryBlogIF(map);<br>    <span class="hljs-keyword">for</span> (Blog blog : blogs) &#123;<br>        System.out.println(blog);<br>    &#125;<br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»“æœä¸ºï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">Blog(id=fa44dc9c851e432a8c3912e1250c9575, title=Javaå¦‚æ­¤ç®€å•, author=Atrox, createTime=Thu Dec <span class="hljs-number">31</span> <span class="hljs-number">20</span>:<span class="hljs-number">46</span>:<span class="hljs-number">43</span> CST <span class="hljs-number">2020</span>, views=<span class="hljs-number">9999</span>)<br></code></pre></td></tr></table></figure></li></ul><h3 id="12-2-choose-when-otherwise"><a href="#12-2-choose-when-otherwise" class="headerlink" title="12.2 choose(when,otherwise)"></a>12.2 choose(when,otherwise)</h3><p>æœ‰æ—¶å€™ï¼Œ<strong>æˆ‘ä»¬ä¸æƒ³ä½¿ç”¨æ‰€æœ‰çš„æ¡ä»¶</strong>ï¼Œè€Œåªæ˜¯æƒ³ä»å¤šä¸ªæ¡ä»¶ä¸­<strong>é€‰æ‹©ä¸€ä¸ªæ¥ä½¿ç”¨</strong>ã€‚è¿™æ—¶å€™ï¼ŒMyBatis æä¾›äº† choose å…ƒç´ ï¼Œå®ƒæœ‰ç‚¹åƒ Java ä¸­çš„ switch è¯­å¥ã€‚ä¾‹å¦‚ä¸‹é¢æˆ‘ä»¬æƒ³è¦å®ç°è¿™æ ·çš„SQLæ•ˆæœï¼Œè¿˜æ˜¯ä»¥æˆ‘ä»¬çš„åšå®¢è¡¨ä¸ºä¾‹ã€‚å½“æä¾›äº†titleï¼Œå°±ä»¥titleä¸ºæ¡ä»¶æŸ¥è¯¢ï¼›å¦‚æœæä¾›äº†authorï¼Œå°±ä»¥authorä¸ºæ¡ä»¶æŸ¥è¯¢ï¼›å¦‚æœä¸¤è€…éƒ½æ²¡æœ‰æä¾›ï¼Œå°±ä»¥viewsä¸ºæ¡ä»¶æŸ¥è¯¢ã€‚</p><ol><li><p><strong>ç¬¬ä¸€æ­¥ï¼Œåœ¨BlogMapperæ¥å£ä¸­å†™ç›¸å…³çš„æ–¹æ³•queryBlogChoose()</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æŸ¥è¯¢åšå®¢</span><br><span class="hljs-function">List&lt;Blog&gt; <span class="hljs-title">queryBlogChoose</span><span class="hljs-params">(Map map)</span></span>;<br></code></pre></td></tr></table></figure></li><li><p><strong>ç¬¬äºŒæ­¥ï¼Œåœ¨BlogMapperä¸­å†™SQLè¯­å¥</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;queryBlogChoose&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;map&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Blog&quot;</span>&gt;</span><br>    select * from blog<br>    <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">choose</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">when</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;title != null&quot;</span>&gt;</span><br>                title = #&#123;title&#125;<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">when</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">when</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;author != null&quot;</span>&gt;</span><br>                and author = #&#123;author&#125;<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">when</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">otherwise</span>&gt;</span><br>                and views = #&#123;views&#125;<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">otherwise</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">choose</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦è§£æä¸€ä¸‹ä¸Šé¢å„ä¸ªæ ‡ç­¾çš„å«ä¹‰ã€‚</p><ul><li><where>æ ‡ç­¾ï¼Œå–ä»£äº†æˆ‘ä»¬ä¹‹å‰åœ¨SQLè¯­å¥ä¸­æ‰‹å†™çš„whereå…³é”®å­—ã€‚è¿™é‡Œçš„<where>æ ‡ç­¾ï¼Œåªä¼šåœ¨<strong>å­å…ƒç´ æœ‰è¿”å›å†…å®¹çš„æƒ…å†µä¸‹</strong>æ‰åœ¨SQLè¯­å¥ä¸­æ’å…¥â€WHEREâ€å­—å¥ã€‚è€Œä¸”ï¼Œ<strong>å¦‚æœå­—å¥çš„å¼€å¤´ä¸ºâ€ANDâ€æˆ–â€ORâ€,<where>æ ‡ç­¾ä¹Ÿä¼šå°†å®ƒä»¬å»é™¤æ‰</where></strong>ã€‚æ¯”å¦‚åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå¦‚æœåªä¼ äº†authorï¼Œå°±ä¼šæŠŠ <code>and author = #&#123;author&#125;</code>æœ€å‰é¢çš„<code>and</code>åˆ é™¤æ‰ã€‚</where></where></li><li><choose>æ ‡ç­¾å°±ç±»ä¼¼äºjavaä¸­çš„switch</choose></li><li><when>æ ‡ç­¾å°±ç±»ä¼¼äºjavaä¸­switchè¯­å¥é‡Œçš„case</when></li><li><otherwise>æ ‡ç­¾å°±ç±»ä¼¼äºjavaä¸­switchè¯­å¥é‡Œçš„default</otherwise></li></ul></li></ol><ol start="3"><li><p><strong>æµ‹è¯•æŸ¥è¯¢</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">queryBlogChoose</span><span class="hljs-params">()</span> </span>&#123;<br>    SqlSession sqlSession = MyBatisUtils.getSqlSession();<br>    BlogMapper mapper = sqlSession.getMapper(BlogMapper.class);<br>    HashMap map = <span class="hljs-keyword">new</span> HashMap();<br>    map.put(<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-string">&quot;Javaå¦‚æ­¤ç®€å•&quot;</span>);<br>    map.put(<span class="hljs-string">&quot;views&quot;</span>, <span class="hljs-number">9999</span>);<br>    List&lt;Blog&gt; blogs = mapper.queryBlogChoose(map);<br>    <span class="hljs-keyword">for</span> (Blog blog : blogs) &#123;<br>        System.out.println(blog);<br>    &#125;<br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><h3 id="12-3-set"><a href="#12-3-set" class="headerlink" title="12.3 set"></a>12.3 set</h3><p>ç”¨äº<strong>åŠ¨æ€æ›´æ–°è¯­å¥</strong>çš„ç±»ä¼¼è§£å†³æ–¹æ¡ˆå«åš <em>set</em>ã€‚<em>set</em> å…ƒç´ å¯ä»¥ç”¨äºåŠ¨æ€åŒ…å«éœ€è¦æ›´æ–°çš„åˆ—ï¼Œå¿½ç•¥å…¶å®ƒä¸æ›´æ–°çš„åˆ—ã€‚</p><ol><li><p><strong>ç¬¬ä¸€æ­¥ï¼Œåœ¨BlogMapperæ¥å£ä¸­å†™ç›¸å…³çš„æ–¹æ³•updateBlog()</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">updateBlog</span><span class="hljs-params">(Map map)</span></span>;<br></code></pre></td></tr></table></figure></li><li><p><strong>ç¬¬äºŒæ­¥ï¼Œåœ¨BlogMapperä¸­å†™SQLè¯­å¥</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;updateBlog&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;map&quot;</span>&gt;</span><br>    update blog<br>    <span class="hljs-tag">&lt;<span class="hljs-name">set</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;title != null&quot;</span>&gt;</span><br>            title = #&#123;title&#125;,<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;author != null&quot;</span>&gt;</span><br>            author = #&#123;author&#125;,<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">set</span>&gt;</span><br>    where id = #&#123;id&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>æµ‹è¯•æ›´æ–°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">updateBlog</span><span class="hljs-params">()</span> </span>&#123;<br>    SqlSession sqlSession = MyBatisUtils.getSqlSession();<br>    BlogMapper mapper = sqlSession.getMapper(BlogMapper.class);<br>    HashMap map = <span class="hljs-keyword">new</span> HashMap();<br>    map.put(<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-string">&quot;Javaå¦‚æ­¤ç®€å•2&quot;</span>);<br>    map.put(<span class="hljs-string">&quot;author&quot;</span>, <span class="hljs-string">&quot;èŠœæ¹–å¤§å¸é©¬&quot;</span>);<br>    map.put(<span class="hljs-string">&quot;id&quot;</span>, <span class="hljs-string">&quot;a187ea08727d4b6d8ffb23dd4ed0df9e&quot;</span>);<br>    mapper.updateBlog(map);<br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><h3 id="12-4-SQLç‰‡æ®µ"><a href="#12-4-SQLç‰‡æ®µ" class="headerlink" title="12.4 SQLç‰‡æ®µ"></a>12.4 SQLç‰‡æ®µ</h3><p>æœ‰äº›æ—¶å€™ï¼Œåœ¨æŸä¸ªæŸ¥è¯¢ä¸­ä¼šæœ‰<strong>å¤§é‡é‡å¤çš„SQLè¯­å¥</strong>ï¼Œæˆ‘ä»¬ä¼šæ„Ÿè§‰åˆ°å¾ˆåŒçƒ¦ï¼Œæ¯”å¦‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;title != null&quot;</span>&gt;</span><br>    title = #&#123;title&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;author != null&quot;</span>&gt;</span><br>    and author = #&#123;author&#125;;<br><span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠå®ƒä»¬æŠ½æˆä¸€ä¸ªSQLç‰‡æ®µï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">sql</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;if-title-author&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;title != null&quot;</span>&gt;</span><br>        title = #&#123;title&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;author != null&quot;</span>&gt;</span><br>        and author = #&#123;author&#125;;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">sql</span>&gt;</span><br></code></pre></td></tr></table></figure><p>åœ¨éœ€è¦ç”¨åˆ°è¿™ä¸ªSQLç‰‡æ®µçš„åœ°æ–¹ï¼Œç›´æ¥idä¸ºif-title-authorçš„sqlç‰‡æ®µå³å¯ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;queryBlogIF&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;map&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Blog&quot;</span>&gt;</span><br>    select * from blog<br>    <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">refid</span>=<span class="hljs-string">&quot;if-title-author&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="12-5-Foreach"><a href="#12-5-Foreach" class="headerlink" title="12.5 Foreach"></a>12.5 Foreach</h3><p>åŠ¨æ€SQLçš„å¦ä¸€ä¸ªå¸¸è§ä½¿ç”¨åœºæ™¯æ˜¯å¯¹é›†åˆè¿›è¡Œéå†ï¼ˆå°¤å…¶æ˜¯åœ¨æ„å»º IN æ¡ä»¶è¯­å¥çš„æ—¶å€™ï¼‰ã€‚</p><p>æˆ‘ä»¬å¯èƒ½ä¼šæƒ³å®ç°è¿™æ ·çš„SQLè¯­å¥</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> blog <span class="hljs-keyword">where</span> (<span class="hljs-keyword">id</span> =<span class="hljs-string">&quot;a187ea08727d4b6d8ffb23dd4ed0df9e&quot;</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">id</span>= <span class="hljs-string">&quot;fa44dc9c851e432a8c3912e1250c9575&quot;</span> );<br></code></pre></td></tr></table></figure><p>è¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨foreachå…ƒç´ æ¥åˆ¶å®šä¸€ä¸ªé›†åˆå¹¶éå†ã€‚</p><ol><li><p><strong>ç¬¬ä¸€æ­¥ï¼Œåœ¨BlogMapperæ¥å£ä¸­å†™ç›¸å…³çš„æ–¹æ³•updateBlog()</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æŸ¥è¯¢å‰ä¸¤æ¡è®°å½•çš„åšå®¢</span><br>    <span class="hljs-function">List&lt;Blog&gt; <span class="hljs-title">queryBlogForeach</span><span class="hljs-params">(Map map)</span></span>;<br></code></pre></td></tr></table></figure></li><li><p><strong>ç¬¬äºŒæ­¥ï¼Œåœ¨BlogMapperä¸­å†™SQLè¯­å¥</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--æˆ‘ä»¬ç°åœ¨ä¼ é€’ä¸€ä¸ªä¸‡èƒ½çš„mapï¼Œè¿™ä¸ªmapä¸­å¯ä»¥å­˜åœ¨ä¸€ä¸ªé›†åˆ--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;queryBlogForeach&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;map&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Blog&quot;</span>&gt;</span><br>    select * from blog<br>    <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">foreach</span> <span class="hljs-attr">collection</span>=<span class="hljs-string">&quot;ids&quot;</span> <span class="hljs-attr">item</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">open</span>=<span class="hljs-string">&quot;and (&quot;</span> <span class="hljs-attr">close</span>=<span class="hljs-string">&quot;)&quot;</span> <span class="hljs-attr">separator</span>=<span class="hljs-string">&quot;or&quot;</span>&gt;</span><br>            id = #&#123;id&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">foreach</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œæˆ‘æˆ‘ä»¬å¯¹foreachå…ƒç´ ï¼Œè¿›è¡Œä¸€äº›å¿…è¦çš„è§£é‡Šã€‚</p><ul><li>collectionä»£è¡¨ä»mapä¸­ä¼ æ¥è¦éå†çš„å¯è¿­ä»£å¯¹è±¡ï¼ˆListæˆ–è€…Setï¼‰</li><li>itemä»£è¡¨è¦ä¾¿åˆ©çš„å…ƒç´ ä½“å†…çš„é›†åˆé¡¹</li><li>openä¸º<code>id=</code>åé¢çš„ä»£è¡¨å¼€å§‹çš„å­—ç¬¦ä¸²</li><li>closeä»£è¡¨æœ€åè¦ç»“æŸæ—¶çš„å­—ç¬¦ä¸²</li><li>separatorä»£è¡¨æ¯ä¸€ä¸ªé›†åˆé¡¹ä¹‹é—´çš„åˆ†éš”ç¬¦</li></ul></li></ol><ol start="3"><li><p><strong>ç¬¬ä¸‰æ­¥ï¼Œæµ‹è¯•æŸ¥è¯¢</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">queryBlogForeach</span><span class="hljs-params">()</span> </span>&#123;<br>    SqlSession sqlSession = MyBatisUtils.getSqlSession();<br>    BlogMapper mapper = sqlSession.getMapper(BlogMapper.class);<br>    HashMap map = <span class="hljs-keyword">new</span> HashMap();<br>    ArrayList&lt;String&gt; ids = <span class="hljs-keyword">new</span> ArrayList&lt;String&gt;();<br>    ids.add(<span class="hljs-string">&quot;a187ea08727d4b6d8ffb23dd4ed0df9e&quot;</span>);<br>    ids.add(<span class="hljs-string">&quot;fa44dc9c851e432a8c3912e1250c9575&quot;</span>);<br>    map.put(<span class="hljs-string">&quot;ids&quot;</span>,ids);<br>    mapper.queryBlogForeach(map);<br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><h2 id="13ã€ç¼“å­˜"><a href="#13ã€ç¼“å­˜" class="headerlink" title="13ã€ç¼“å­˜"></a>13ã€ç¼“å­˜</h2><h3 id="13-1-ç®€ä»‹"><a href="#13-1-ç®€ä»‹" class="headerlink" title="13.1 ç®€ä»‹"></a>13.1 ç®€ä»‹</h3><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œæˆ‘ä»¬æ‰€æœ‰çš„æŸ¥è¯¢éƒ½æ˜¯éœ€è¦<strong>è¿æ¥æ•°æ®åº“</strong>çš„ï¼Œè¿æ¥æ•°æ®åº“å°±ä¼š<strong>æ¶ˆè€—èµ„æº</strong>ï¼Œé‚£æˆ‘ä»¬å°±æƒ³è¦å®ç°æœ€å¤§åˆ©ç”¨ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬æƒ³èƒ½ä¸èƒ½æŠŠä¸€æ¬¡æŸ¥è¯¢çš„ç»“æœï¼Œç»™å®ƒæš‚å­˜åœ¨ä¸€ä¸ªå¯ä»¥ç›´æ¥å–åˆ°çš„åœ°æ–¹ï¼ˆå†…å­˜ï¼‰ï¼Œä¸‹æ¬¡è¦å–å‡ºç›¸åŒæ•°æ®çš„æ—¶å€™å°±ä¸ç”¨è¿æ¥æ•°æ®åº“äº†ã€‚è€Œè¿™äº›æ”¾åœ¨å†…å­˜ä¸­çš„æ•°æ®ï¼Œå°±å«<strong>ç¼“å­˜</strong>ã€‚</p><ol><li><p><strong>ä»€ä¹ˆæ˜¯ç¼“å­˜</strong>ï¼Ÿ</p><ul><li>å­˜åœ¨å†…å­˜ä¸­çš„ä¸´æ—¶æ•°æ®ã€‚</li><li>å°†ç”¨æˆ·ç»å¸¸æŸ¥è¯¢çš„æ•°æ®æ”¾åœ¨ç¼“å­˜ï¼ˆå†…å­˜ï¼‰ä¸­ï¼Œç”¨æˆ·å»æŸ¥è¯¢æ•°æ®å°±ä¸ç”¨ä»ç£ç›˜ä¸Š(å…³ç³»å‹æ•°æ®åº“æ•°æ®æ–‡ä»¶)æŸ¥è¯¢ï¼Œä»ç¼“å­˜ä¸­æŸ¥è¯¢ï¼Œä»è€Œæé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œè§£å†³äº†<strong>é«˜å¹¶å‘ç³»ç»Ÿçš„æ€§èƒ½é—®é¢˜ã€‚</strong></li></ul></li><li><p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨ç¼“å­˜</strong>ï¼Ÿ</p><ul><li>å‡å°‘å’Œæ•°æ®åº“çš„äº¤äº’æ¬¡æ•°ï¼Œå‡å°‘ç³»ç»Ÿå¼€é”€ï¼Œæé«˜ç³»ç»Ÿæ•ˆç‡ã€‚</li></ul></li><li><p><strong>ä»€ä¹ˆæ ·çš„æ•°æ®èƒ½ä½¿ç”¨ç¼“å­˜</strong>ï¼Ÿ</p><ul><li>ç»å¸¸<strong>æŸ¥è¯¢</strong>å¹¶ä¸”ä¸ç»å¸¸æ”¹å˜çš„æ•°æ®ã€‚ã€å¯ä»¥ä½¿ç”¨ç¼“å­˜ã€‘</li></ul></li></ol><h3 id="13-2-Mybatisç¼“å­˜"><a href="#13-2-Mybatisç¼“å­˜" class="headerlink" title="13.2 Mybatisç¼“å­˜"></a>13.2 Mybatisç¼“å­˜</h3><ul><li><p>MyBatisåŒ…å«ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æŸ¥è¯¢ç¼“å­˜ç‰¹æ€§ï¼Œå®ƒå¯ä»¥éå¸¸æ–¹ä¾¿åœ°å®šåˆ¶å’Œé…ç½®ç¼“å­˜ã€‚ç¼“å­˜å¯ä»¥æå¤§çš„æå‡æŸ¥è¯¢æ•ˆç‡ã€‚</p></li><li><p>MyBatisç³»ç»Ÿä¸­é»˜è®¤å®šä¹‰äº†ä¸¤çº§ç¼“å­˜ï¼š<strong>ä¸€çº§ç¼“å­˜</strong>å’Œ<strong>äºŒçº§ç¼“å­˜</strong></p><ul><li><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰ä¸€çº§ç¼“å­˜å¼€å¯ã€‚ï¼ˆSqlSessionçº§åˆ«çš„ç¼“å­˜ï¼Œä¹Ÿç§°ä¸ºæœ¬åœ°ç¼“å­˜ï¼‰</p></li><li><p>äºŒçº§ç¼“å­˜éœ€è¦æ‰‹åŠ¨å¼€å¯å’Œé…ç½®ï¼Œä»–æ˜¯åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ã€‚</p></li><li><p>ä¸ºäº†æé«˜æ‰©å±•æ€§ï¼ŒMyBatiså®šä¹‰äº†ç¼“å­˜æ¥å£Cacheã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°Cacheæ¥å£æ¥è‡ªå®šä¹‰äºŒçº§ç¼“å­˜</p></li></ul></li></ul><h3 id="13-3-ä¸€çº§ç¼“å­˜"><a href="#13-3-ä¸€çº§ç¼“å­˜" class="headerlink" title="13.3 ä¸€çº§ç¼“å­˜"></a>13.3 ä¸€çº§ç¼“å­˜</h3><p>ä¸€çº§ç¼“å­˜ä¹Ÿå«æœ¬åœ°ç¼“å­˜ï¼š  SqlSession</p><ul><li>ä¸æ•°æ®åº“åŒä¸€æ¬¡ä¼šè¯æœŸé—´æŸ¥è¯¢åˆ°çš„æ•°æ®ä¼šæ”¾åœ¨æœ¬åœ°ç¼“å­˜ä¸­ã€‚</li><li>ä»¥åå¦‚æœéœ€è¦è·å–ç›¸åŒçš„æ•°æ®ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­æ‹¿ï¼Œæ²¡å¿…é¡»å†å»æŸ¥è¯¢æ•°æ®åº“ï¼›</li></ul><p><strong>æµ‹è¯•ä¸€çº§ç¼“å­˜</strong>ï¼š</p><ol><li><p>å¼€å¯æ—¥å¿—</p></li><li><p>æµ‹è¯•ä¸€ä¸ªSessionä¸­æŸ¥è¯¢ä¸¤æ¬¡ç›¸åŒè®°å½•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span> </span>&#123;<br>    SqlSession sqlSession = MyBatisUtils.getSqlSession();<br>    UserMapper mapper = sqlSession.getMapper(UserMapper.class);<br><br>    User user = mapper.queryUserById(<span class="hljs-number">1</span>);<br>    System.out.println(user);<br>    System.out.println(<span class="hljs-string">&quot;========================&quot;</span>);<br>    User user1 = mapper.queryUserById(<span class="hljs-number">1</span>);<br>    System.out.println(user1);<br><br>    System.out.println(user == user1);<br><br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹æ—¥å¿—è¾“å‡º</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs markdown">Opening JDBC Connection<br>Created connection 581318631.<br>==&gt;  Preparing: select <span class="hljs-emphasis">* from mybatis.user where id = ? </span><br><span class="hljs-emphasis">==&gt; Parameters: 1(Integer)</span><br><span class="hljs-emphasis">&lt;==    Columns: id, name, pwd</span><br><span class="hljs-emphasis">&lt;==        Row: 1, ä¹”å¨, 123456</span><br><span class="hljs-emphasis">&lt;==      Total: 1</span><br><span class="hljs-emphasis">User(id=1, name=ä¹”å¨, pwd=123456)</span><br><span class="hljs-emphasis">========================</span><br><span class="hljs-emphasis">User(id=1, name=ä¹”å¨, pwd=123456)</span><br><span class="hljs-emphasis">true</span><br><span class="hljs-emphasis">Closing JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@22a637e7]</span><br><span class="hljs-emphasis">Returned connection 581318631 to pool.</span><br></code></pre></td></tr></table></figure></li><li><p>ç¼“å­˜å¤±æ•ˆçš„æƒ…å†µ</p><ul><li><p>æŸ¥è¯¢ä¸åŒçš„è®°å½•</p></li><li><p><strong>æ‰€æœ‰çš„å¢åˆ æ”¹æ“ä½œï¼ˆå³ä½¿å¯¹å…¶ä»–è®°å½•è¿›è¡Œæ“ä½œï¼‰ï¼Œå¯èƒ½ä¼šæ”¹å˜åŸæ¥çš„æ•°æ®ï¼Œæ‰€ä»¥å¿…å®šä¼šåˆ·æ–°ç¼“å­˜</strong></p></li><li><p>æŸ¥è¯¢ä¸åŒçš„Mapper.xml</p></li><li><p>æ‰‹åŠ¨æ¸…ç†ç¼“å­˜</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">sqlSession.clearCache();<br></code></pre></td></tr></table></figure></li></ul></li><li><p>å°ç»“</p><p>ä¸€çº§ç¼“å­˜é»˜è®¤æ˜¯å¼€å¯çš„ï¼Œåªåœ¨ä¸€æ¬¡SqlSessionä¸­æœ‰æ•ˆï¼Œä¹Ÿå°±æ˜¯æ‹¿åˆ°è¿æ¥åˆ°å…³é—­è¿æ¥è¿™ä¸ªåŒºé—´æ®µï¼</p></li></ol><p>ä¸€çº§ç¼“å­˜å°±æ˜¯ä¸€ä¸ªMapã€‚</p><h3 id="13-4-äºŒçº§ç¼“å­˜"><a href="#13-4-äºŒçº§ç¼“å­˜" class="headerlink" title="13.4 äºŒçº§ç¼“å­˜"></a>13.4 äºŒçº§ç¼“å­˜</h3><ul><li>äºŒçº§ç¼“å­˜ä¹Ÿå«å…¨å±€ç¼“å­˜ï¼Œä¸€çº§ç¼“å­˜ä½œç”¨åŸŸå¤ªä½äº†ï¼Œæ‰€ä»¥è¯ç”Ÿäº†äºŒçº§ç¼“å­˜</li><li>åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ï¼Œä¸€ä¸ªåç§°ç©ºé—´ï¼Œå¯¹åº”ä¸€ä¸ªäºŒçº§ç¼“å­˜ï¼›</li><li>å·¥ä½œæœºåˆ¶<ul><li>ä¸€ä¸ªä¼šè¯æŸ¥è¯¢ä¸€æ¡æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®å°±ä¼šè¢«æ”¾åœ¨å½“å‰ä¼šè¯çš„ä¸€çº§ç¼“å­˜ä¸­ï¼›</li><li>å¦‚æœå½“å‰ä¼šè¯å…³é—­äº†ï¼Œè¿™ä¸ªä¼šè¯å¯¹åº”çš„ä¸€çº§ç¼“å­˜å°±æ²¡äº†ï¼›ä½†æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ˜¯ï¼Œä¼šè¯å…³é—­äº†ï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®è¢«ä¿å­˜åˆ°äºŒçº§ç¼“å­˜ä¸­ï¼›</li><li>æ–°çš„ä¼šè¯æŸ¥è¯¢ä¿¡æ¯ï¼Œå°±å¯ä»¥ä»äºŒçº§ç¼“å­˜ä¸­è·å–å†…å®¹ï¼›</li><li>ä¸åŒçš„mapperæŸ¥å‡ºçš„æ•°æ®ä¼šæ”¾åœ¨è‡ªå·±å¯¹åº”çš„ç¼“å­˜ï¼ˆmapï¼‰ä¸­ï¼›</li></ul></li></ul><p><strong>æ­¥éª¤</strong>ï¼š</p><ol><li><p>å¼€å¯å…¨å±€ç¼“å­˜ï¼ˆmybatis-config.xmlï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å¼€å¯äºŒçº§ç¼“å­˜--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;cacheEnabled&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>åœ¨è¦ä½¿ç”¨äºŒçº§ç¼“å­˜çš„Mapperä¸­å¼€å¯</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--åœ¨å½“å‰Mapper.xmlä¸­ä½¿ç”¨äºŒçº§ç¼“å­˜--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">cache</span>/&gt;</span><br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å‚æ•°</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--åœ¨å½“å‰Mapper.xmlä¸­ä½¿ç”¨äºŒçº§ç¼“å­˜--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">cache</span>  <span class="hljs-attr">eviction</span>=<span class="hljs-string">&quot;FIFO&quot;</span> #ç¼“å­˜ç­–ç•¥</span><br><span class="hljs-tag">       <span class="hljs-attr">flushInterval</span>=<span class="hljs-string">&quot;60000&quot;</span>  #åˆ·æ–°å‘¨æœŸ</span><br><span class="hljs-tag">       <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;512&quot;</span>               #ç¼“å­˜ä¸­æœ€å¤šå¯ä»¥æ”¾çš„å¼•ç”¨æ•°é‡</span><br><span class="hljs-tag">       <span class="hljs-attr">readOnly</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span>  #åªè¯»<br></code></pre></td></tr></table></figure></li></ol><p>å°ç»“ï¼š</p><ul><li>åªè¦å¼€å¯äº†äºŒçº§ç¼“å­˜ï¼Œåœ¨åŒä¸€ä¸ªMapperä¸‹å°±æœ‰æ•ˆ</li><li>æ‰€æœ‰çš„æ•°æ®éƒ½ä¼šå…ˆæ”¾åœ¨ä¸€çº§ç¼“å­˜ä¸­ï¼›</li><li>åªæœ‰å½“ä¼šè¯æäº¤ï¼Œæˆ–è€…å…³é—­çš„æ—¶å€™ï¼Œæ‰ä¼šæäº¤åˆ°äºŒçº§ç¼“å†²ä¸­ï¼</li></ul><h3 id="13-5-ç¼“å­˜åŸç†"><a href="#13-5-ç¼“å­˜åŸç†" class="headerlink" title="13.5 ç¼“å­˜åŸç†"></a>13.5 ç¼“å­˜åŸç†</h3><p><img src="/posts/2020/12/31/MyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/cache.png" alt="ç¼“å­˜åŸç†å›¾è§£"></p><h3 id="13-6-è‡ªå®šä¹‰ç¼“å­˜-ehcache"><a href="#13-6-è‡ªå®šä¹‰ç¼“å­˜-ehcache" class="headerlink" title="13.6 è‡ªå®šä¹‰ç¼“å­˜-ehcache"></a>13.6 è‡ªå®šä¹‰ç¼“å­˜-ehcache</h3><p>Ehcacheæ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„å¼€æºJavaåˆ†å¸ƒå¼ç¼“å­˜ã€‚ä¸»è¦é¢å‘é€šç”¨ç¼“å­˜</p><p>è¦åœ¨ç¨‹åºä¸­ä½¿ç”¨ehcacheï¼Œå…ˆè¦å¯¼åŒ…ï¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis.caches/mybatis-ehcache --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.caches<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-ehcache<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>åœ¨mapperä¸­æŒ‡å®šä½¿ç”¨æˆ‘ä»¬çš„ehcacheç¼“å­˜å®ç°ï¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--åœ¨å½“å‰Mapper.xmlä¸­ä½¿ç”¨äºŒçº§ç¼“å­˜--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">cache</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure><p>ehcache.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">ehcache</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:noNamespaceSchemaLocation</span>=<span class="hljs-string">&quot;http://ehcache.org/ehcache.xsd&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">updateCheck</span>=<span class="hljs-string">&quot;false&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">       diskStoreï¼šä¸ºç¼“å­˜è·¯å¾„ï¼Œehcacheåˆ†ä¸ºå†…å­˜å’Œç£ç›˜ä¸¤çº§ï¼Œæ­¤å±æ€§å®šä¹‰ç£ç›˜çš„ç¼“å­˜ä½ç½®ã€‚å‚æ•°è§£é‡Šå¦‚ä¸‹ï¼š</span><br><span class="hljs-comment">       user.home â€“ ç”¨æˆ·ä¸»ç›®å½•</span><br><span class="hljs-comment">       user.dir  â€“ ç”¨æˆ·å½“å‰å·¥ä½œç›®å½•</span><br><span class="hljs-comment">       java.io.tmpdir â€“ é»˜è®¤ä¸´æ—¶æ–‡ä»¶è·¯å¾„</span><br><span class="hljs-comment">     --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">diskStore</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;./tmpdir/Tmp_EhCache&quot;</span>/&gt;</span><br><br>    &lt;defaultCache<br>            eternal=&quot;false&quot;<br>            maxElementsInMemory=&quot;10000&quot;<br>            overflowToDisk=&quot;false&quot;<br>            diskPersistent=&quot;false&quot;<br>            timeToIdleSeconds=&quot;1800&quot;<br>            timeToLiveSeconds=&quot;259200&quot;<br>            memoryStoreEvictionPolicy=&quot;LRU&quot;/&gt;<br><br>    &lt;cache<br>            name=&quot;cloud_user&quot;<br>            eternal=&quot;false&quot;<br>            maxElementsInMemory=&quot;5000&quot;<br>            overflowToDisk=&quot;false&quot;<br>            diskPersistent=&quot;false&quot;<br>            timeToIdleSeconds=&quot;1800&quot;<br>            timeToLiveSeconds=&quot;1800&quot;<br>            memoryStoreEvictionPolicy=&quot;LRU&quot;/&gt;<br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">       defaultCacheï¼šé»˜è®¤ç¼“å­˜ç­–ç•¥ï¼Œå½“ehcacheæ‰¾ä¸åˆ°å®šä¹‰çš„ç¼“å­˜æ—¶ï¼Œåˆ™ä½¿ç”¨è¿™ä¸ªç¼“å­˜ç­–ç•¥ã€‚åªèƒ½å®šä¹‰ä¸€ä¸ªã€‚</span><br><span class="hljs-comment">     --&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">      name:ç¼“å­˜åç§°ã€‚</span><br><span class="hljs-comment">      maxElementsInMemory:ç¼“å­˜æœ€å¤§æ•°ç›®</span><br><span class="hljs-comment">      maxElementsOnDiskï¼šç¡¬ç›˜æœ€å¤§ç¼“å­˜ä¸ªæ•°ã€‚</span><br><span class="hljs-comment">      eternal:å¯¹è±¡æ˜¯å¦æ°¸ä¹…æœ‰æ•ˆï¼Œä¸€ä½†è®¾ç½®äº†ï¼Œtimeoutå°†ä¸èµ·ä½œç”¨ã€‚</span><br><span class="hljs-comment">      overflowToDisk:æ˜¯å¦ä¿å­˜åˆ°ç£ç›˜ï¼Œå½“ç³»ç»Ÿå®•æœºæ—¶</span><br><span class="hljs-comment">      timeToIdleSeconds:è®¾ç½®å¯¹è±¡åœ¨å¤±æ•ˆå‰çš„å…è®¸é—²ç½®æ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰ã€‚ä»…å½“eternal=falseå¯¹è±¡ä¸æ˜¯æ°¸ä¹…æœ‰æ•ˆæ—¶ä½¿ç”¨ï¼Œå¯é€‰å±æ€§ï¼Œé»˜è®¤å€¼æ˜¯0ï¼Œä¹Ÿå°±æ˜¯å¯é—²ç½®æ—¶é—´æ— ç©·å¤§ã€‚</span><br><span class="hljs-comment">      timeToLiveSeconds:è®¾ç½®å¯¹è±¡åœ¨å¤±æ•ˆå‰å…è®¸å­˜æ´»æ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰ã€‚æœ€å¤§æ—¶é—´ä»‹äºåˆ›å»ºæ—¶é—´å’Œå¤±æ•ˆæ—¶é—´ä¹‹é—´ã€‚ä»…å½“eternal=falseå¯¹è±¡ä¸æ˜¯æ°¸ä¹…æœ‰æ•ˆæ—¶ä½¿ç”¨ï¼Œé»˜è®¤æ˜¯0.ï¼Œä¹Ÿå°±æ˜¯å¯¹è±¡å­˜æ´»æ—¶é—´æ— ç©·å¤§ã€‚</span><br><span class="hljs-comment">      diskPersistentï¼šæ˜¯å¦ç¼“å­˜è™šæ‹Ÿæœºé‡å¯æœŸæ•°æ® Whether the disk store persists between restarts of the Virtual Machine. The default value is false.</span><br><span class="hljs-comment">      diskSpoolBufferSizeMBï¼šè¿™ä¸ªå‚æ•°è®¾ç½®DiskStoreï¼ˆç£ç›˜ç¼“å­˜ï¼‰çš„ç¼“å­˜åŒºå¤§å°ã€‚é»˜è®¤æ˜¯30MBã€‚æ¯ä¸ªCacheéƒ½åº”è¯¥æœ‰è‡ªå·±çš„ä¸€ä¸ªç¼“å†²åŒºã€‚</span><br><span class="hljs-comment">      diskExpiryThreadIntervalSecondsï¼šç£ç›˜å¤±æ•ˆçº¿ç¨‹è¿è¡Œæ—¶é—´é—´éš”ï¼Œé»˜è®¤æ˜¯120ç§’ã€‚</span><br><span class="hljs-comment">      memoryStoreEvictionPolicyï¼šå½“è¾¾åˆ°maxElementsInMemoryé™åˆ¶æ—¶ï¼ŒEhcacheå°†ä¼šæ ¹æ®æŒ‡å®šçš„ç­–ç•¥å»æ¸…ç†å†…å­˜ã€‚é»˜è®¤ç­–ç•¥æ˜¯LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ã€‚ä½ å¯ä»¥è®¾ç½®ä¸ºFIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰æˆ–æ˜¯LFUï¼ˆè¾ƒå°‘ä½¿ç”¨ï¼‰ã€‚</span><br><span class="hljs-comment">      clearOnFlushï¼šå†…å­˜æ•°é‡æœ€å¤§æ—¶æ˜¯å¦æ¸…é™¤ã€‚</span><br><span class="hljs-comment">      memoryStoreEvictionPolicy:å¯é€‰ç­–ç•¥æœ‰ï¼šLRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼Œé»˜è®¤ç­–ç•¥ï¼‰ã€FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰ã€LFUï¼ˆæœ€å°‘è®¿é—®æ¬¡æ•°ï¼‰ã€‚</span><br><span class="hljs-comment">      FIFOï¼Œfirst in first outï¼Œè¿™ä¸ªæ˜¯å¤§å®¶æœ€ç†Ÿçš„ï¼Œå…ˆè¿›å…ˆå‡ºã€‚</span><br><span class="hljs-comment">      LFUï¼Œ Less Frequently Usedï¼Œå°±æ˜¯ä¸Šé¢ä¾‹å­ä¸­ä½¿ç”¨çš„ç­–ç•¥ï¼Œç›´ç™½ä¸€ç‚¹å°±æ˜¯è®²ä¸€ç›´ä»¥æ¥æœ€å°‘è¢«ä½¿ç”¨çš„ã€‚å¦‚ä¸Šé¢æ‰€è®²ï¼Œç¼“å­˜çš„å…ƒç´ æœ‰ä¸€ä¸ªhitå±æ€§ï¼Œhitå€¼æœ€å°çš„å°†ä¼šè¢«æ¸…å‡ºç¼“å­˜ã€‚</span><br><span class="hljs-comment">      LRUï¼ŒLeast Recently Usedï¼Œæœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ï¼Œç¼“å­˜çš„å…ƒç´ æœ‰ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œå½“ç¼“å­˜å®¹é‡æ»¡äº†ï¼Œè€Œåˆéœ€è¦è…¾å‡ºåœ°æ–¹æ¥ç¼“å­˜æ–°çš„å…ƒç´ çš„æ—¶å€™ï¼Œé‚£ä¹ˆç°æœ‰ç¼“å­˜å…ƒç´ ä¸­æ—¶é—´æˆ³ç¦»å½“å‰æ—¶é—´æœ€è¿œçš„å…ƒç´ å°†è¢«æ¸…å‡ºç¼“å­˜ã€‚</span><br><span class="hljs-comment">   --&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">ehcache</span>&gt;</span><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>framework</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MyBatis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2020å¯’å‡è¸©å‘å¤§å…¨</title>
    <link href="/posts/2020/12/20/2020%E5%AF%92%E5%81%87%E8%B8%A9%E5%9D%91%E5%A4%A7%E5%85%A8/"/>
    <url>/posts/2020/12/20/2020%E5%AF%92%E5%81%87%E8%B8%A9%E5%9D%91%E5%A4%A7%E5%85%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="JavaWeb"><a href="#JavaWeb" class="headerlink" title="JavaWeb"></a>JavaWeb</h2><h4 id="1-Tomcatå¯åŠ¨8080ç«¯å£è¢«å ç”¨"><a href="#1-Tomcatå¯åŠ¨8080ç«¯å£è¢«å ç”¨" class="headerlink" title="1.Tomcatå¯åŠ¨8080ç«¯å£è¢«å ç”¨"></a>1.Tomcatå¯åŠ¨8080ç«¯å£è¢«å ç”¨</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">java.net.BindException: Address already in <span class="hljs-keyword">use</span>: bind<br></code></pre></td></tr></table></figure><p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p><p>å¿«æ·é”® win + Rï¼Œè¾“å…¥cmdï¼Œè¾“å…¥</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">netstat -aon|findstr <span class="hljs-string">&quot;8080&quot;</span><br></code></pre></td></tr></table></figure><p>å‡ºç°å ç”¨8080ç«¯å£çš„è¿›ç¨‹ï¼Œç„¶åå¯ç”¨ä»»åŠ¡ç®¡ç†å™¨æ‰¾åˆ°è¯¥è¿›ç¨‹å¹¶ç»“æŸã€‚</p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
