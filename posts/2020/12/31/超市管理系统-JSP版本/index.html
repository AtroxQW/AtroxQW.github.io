<!DOCTYPE html><html lang="en" data-default-color-scheme="&#34;auto&#34;"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png"><link rel="icon" type="image/png" href="/img/favicon.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="description" content=""><meta name="author" content="codeAtrox"><meta name="keywords" content=""><title>超市管理系统-JSP版本 - Atrox的博客</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css"><link rel="stylesheet" href="/lib/hint/hint.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/github-gist.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css"><link rel="stylesheet" href="/css/main.css"><script id="fluid-configs">var Fluid=window.Fluid||{},CONFIG={hostname:"example.com",root:"/",version:"1.8.7",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},copy_btn:!0,image_zoom:{enable:!0},toc:{enable:!0,headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,onlypost:!1},web_analytics:{enable:!1,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:"ESDyAFj0rlPHtdaIfJoa3pTr-gzGzoHsz",app_key:"j9txoPTCSqfLMGi1UmkNO3vV",server_url:"AtroxQW.github.io"}}}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 5.2.0"></head><body><header style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/">&nbsp;<strong>AtroxQW</strong>&nbsp;</a> <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> 首页</a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> 归档</a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> 分类</a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> 标签</a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> 关于我</a></li><li class="nav-item"><a class="nav-link" href="/links/"><i class="iconfont icon-link-fill"></i> 友链</a></li><li class="nav-item" id="search-btn"><a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" href="javascript:">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div class="banner" id="banner" parallax="true" style="background:url(/img/bg/atrox1.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="page-header text-center fade-in-up"><span class="h2" id="subtitle" title="超市管理系统-JSP版本"></span><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2020-12-31 10:36" pubdate>December 31, 2020 am</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 4.9k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 84 分钟</span></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div class="py-5" id="board"><article class="post-content mx-auto"><h1 style="display:none">超市管理系统-JSP版本</h1><div class="markdown-body"><h1 id="SMBMS"><a href="#SMBMS" class="headerlink" title="SMBMS"></a>SMBMS</h1><p><img src="/posts/2020/12/31/%E8%B6%85%E5%B8%82%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-JSP%E7%89%88%E6%9C%AC/SMBMS.png" srcset="/img/loading.gif" alt="SMBMS整体架构"></p><p><strong>项目如何搭建</strong>？</p><p>考虑适用不适用Maven？依赖，jar</p><h3 id="项目搭建"><a href="#项目搭建" class="headerlink" title="项目搭建"></a>项目搭建</h3><ol><li><p>搭建一个mavenweb项目</p></li><li><p>配置Tomcat</p></li><li><p>测试项目是否能够跑起来</p></li><li><p>导入项目中会遇到的jar包</p><p>jsp，Servlet，mysql驱动，jstl，standard</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>servlet-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jsp-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.22<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet.jsp.jstl<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jstl-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>taglibs<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>standard<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>创建项目包结构</p><p><img src="/posts/2020/12/31/%E8%B6%85%E5%B8%82%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-JSP%E7%89%88%E6%9C%AC/project_directory_structure.png" srcset="/img/loading.gif" alt="项目包结构"></p></li><li><p>实体类</p><p><strong>ORM映射</strong>：表—类映射</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// User 类</span><br><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> Integer id; <span class="hljs-comment">//id</span><br>    <span class="hljs-keyword">private</span> String userCode; <span class="hljs-comment">//用户编码</span><br>    <span class="hljs-keyword">private</span> String userName; <span class="hljs-comment">//用户名称</span><br>    <span class="hljs-keyword">private</span> String userPassword; <span class="hljs-comment">//用户密码</span><br>    <span class="hljs-keyword">private</span> Integer gender;  <span class="hljs-comment">//性别</span><br>    <span class="hljs-keyword">private</span> Date birthday;  <span class="hljs-comment">//出生日期</span><br>    <span class="hljs-keyword">private</span> String phone;   <span class="hljs-comment">//电话</span><br>    <span class="hljs-keyword">private</span> String address; <span class="hljs-comment">//地址</span><br>    <span class="hljs-keyword">private</span> Integer userRole;    <span class="hljs-comment">//用户角色</span><br>    <span class="hljs-keyword">private</span> Integer createdBy;   <span class="hljs-comment">//创建者</span><br>    <span class="hljs-keyword">private</span> Date creationDate; <span class="hljs-comment">//创建时间</span><br>    <span class="hljs-keyword">private</span> Integer modifyBy;     <span class="hljs-comment">//更新者</span><br>    <span class="hljs-keyword">private</span> Date modifyDate;   <span class="hljs-comment">//更新时间</span><br><br>    <span class="hljs-keyword">private</span> Integer age;<span class="hljs-comment">//年龄</span><br><br>    <span class="hljs-keyword">private</span> String userRoleName;    <span class="hljs-comment">//用户角色名称</span><br><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getUserRoleName</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> userRoleName;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUserRoleName</span><span class="hljs-params">(String userRoleName)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.userRoleName = userRoleName;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getAge</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-comment">/*long time = System.currentTimeMillis()-birthday.getTime();</span><br><span class="hljs-comment">		Integer age = Long.valueOf(time/365/24/60/60/1000).IntegerValue();*/</span><br>        Date date = <span class="hljs-keyword">new</span> Date();<br>        Integer age = date.getYear()-birthday.getYear();<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getId</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> id;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setId</span><span class="hljs-params">(Integer id)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.id = id;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getUserCode</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> userCode;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUserCode</span><span class="hljs-params">(String userCode)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.userCode = userCode;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getUserName</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> userName;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUserName</span><span class="hljs-params">(String userName)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.userName = userName;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getUserPassword</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> userPassword;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUserPassword</span><span class="hljs-params">(String userPassword)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.userPassword = userPassword;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getGender</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> gender;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setGender</span><span class="hljs-params">(Integer gender)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.gender = gender;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Date <span class="hljs-title">getBirthday</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> birthday;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBirthday</span><span class="hljs-params">(Date birthday)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.birthday = birthday;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getPhone</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> phone;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setPhone</span><span class="hljs-params">(String phone)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.phone = phone;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getAddress</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> address;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setAddress</span><span class="hljs-params">(String address)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.address = address;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getUserRole</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> userRole;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUserRole</span><span class="hljs-params">(Integer userRole)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.userRole = userRole;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getCreatedBy</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> createdBy;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCreatedBy</span><span class="hljs-params">(Integer createdBy)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.createdBy = createdBy;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Date <span class="hljs-title">getCreationDate</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> creationDate;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCreationDate</span><span class="hljs-params">(Date creationDate)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.creationDate = creationDate;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getModifyBy</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> modifyBy;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setModifyBy</span><span class="hljs-params">(Integer modifyBy)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.modifyBy = modifyBy;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Date <span class="hljs-title">getModifyDate</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> modifyDate;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setModifyDate</span><span class="hljs-params">(Date modifyDate)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.modifyDate = modifyDate;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//Bill类</span><br><span class="hljs-keyword">import</span> java.math.BigDecimal;<br><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Bill</span> </span>&#123;<br>	<span class="hljs-keyword">private</span> Integer id;   <span class="hljs-comment">//id </span><br>	<span class="hljs-keyword">private</span> String billCode; <span class="hljs-comment">//账单编码 </span><br>	<span class="hljs-keyword">private</span> String productName; <span class="hljs-comment">//商品名称 </span><br>	<span class="hljs-keyword">private</span> String productDesc; <span class="hljs-comment">//商品描述 </span><br>	<span class="hljs-keyword">private</span> String productUnit; <span class="hljs-comment">//商品单位</span><br>	<span class="hljs-keyword">private</span> BigDecimal productCount; <span class="hljs-comment">//商品数量 </span><br>	<span class="hljs-keyword">private</span> BigDecimal totalPrice; <span class="hljs-comment">//总金额</span><br>	<span class="hljs-keyword">private</span> Integer isPayment; <span class="hljs-comment">//是否支付 </span><br>	<span class="hljs-keyword">private</span> Integer providerId; <span class="hljs-comment">//供应商ID </span><br>	<span class="hljs-keyword">private</span> Integer createdBy; <span class="hljs-comment">//创建者</span><br>	<span class="hljs-keyword">private</span> Date creationDate; <span class="hljs-comment">//创建时间</span><br>	<span class="hljs-keyword">private</span> Integer modifyBy; <span class="hljs-comment">//更新者</span><br>	<span class="hljs-keyword">private</span> Date modifyDate;<span class="hljs-comment">//更新时间</span><br>	<br>	<span class="hljs-keyword">private</span> String providerName;<span class="hljs-comment">//供应商名称</span><br>	<br>	<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getProviderName</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> providerName;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProviderName</span><span class="hljs-params">(String providerName)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.providerName = providerName;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getId</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> id;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setId</span><span class="hljs-params">(Integer id)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.id = id;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getBillCode</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> billCode;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBillCode</span><span class="hljs-params">(String billCode)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.billCode = billCode;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getProductName</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> productName;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProductName</span><span class="hljs-params">(String productName)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.productName = productName;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getProductDesc</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> productDesc;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProductDesc</span><span class="hljs-params">(String productDesc)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.productDesc = productDesc;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getProductUnit</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> productUnit;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProductUnit</span><span class="hljs-params">(String productUnit)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.productUnit = productUnit;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> BigDecimal <span class="hljs-title">getProductCount</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> productCount;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProductCount</span><span class="hljs-params">(BigDecimal productCount)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.productCount = productCount;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> BigDecimal <span class="hljs-title">getTotalPrice</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> totalPrice;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setTotalPrice</span><span class="hljs-params">(BigDecimal totalPrice)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.totalPrice = totalPrice;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getIsPayment</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> isPayment;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setIsPayment</span><span class="hljs-params">(Integer isPayment)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.isPayment = isPayment;<br>	&#125;<br>	<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getProviderId</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> providerId;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProviderId</span><span class="hljs-params">(Integer providerId)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.providerId = providerId;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getCreatedBy</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> createdBy;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCreatedBy</span><span class="hljs-params">(Integer createdBy)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.createdBy = createdBy;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> Date <span class="hljs-title">getCreationDate</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> creationDate;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCreationDate</span><span class="hljs-params">(Date creationDate)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.creationDate = creationDate;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getModifyBy</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> modifyBy;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setModifyBy</span><span class="hljs-params">(Integer modifyBy)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.modifyBy = modifyBy;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> Date <span class="hljs-title">getModifyDate</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> modifyDate;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setModifyDate</span><span class="hljs-params">(Date modifyDate)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.modifyDate = modifyDate;<br>	&#125;<br>	<br>	<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//Role类</span><br><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Role</span> </span>&#123;<br>	<br>	<span class="hljs-keyword">private</span> Integer id;   <span class="hljs-comment">//id</span><br>	<span class="hljs-keyword">private</span> String roleCode; <span class="hljs-comment">//角色编码</span><br>	<span class="hljs-keyword">private</span> String roleName; <span class="hljs-comment">//角色名称</span><br>	<span class="hljs-keyword">private</span> Integer createdBy; <span class="hljs-comment">//创建者</span><br>	<span class="hljs-keyword">private</span> Date creationDate; <span class="hljs-comment">//创建时间</span><br>	<span class="hljs-keyword">private</span> Integer modifyBy; <span class="hljs-comment">//更新者</span><br>	<span class="hljs-keyword">private</span> Date modifyDate;<span class="hljs-comment">//更新时间</span><br>	<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getId</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> id;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setId</span><span class="hljs-params">(Integer id)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.id = id;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getRoleCode</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> roleCode;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setRoleCode</span><span class="hljs-params">(String roleCode)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.roleCode = roleCode;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getRoleName</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> roleName;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setRoleName</span><span class="hljs-params">(String roleName)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.roleName = roleName;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getCreatedBy</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> createdBy;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCreatedBy</span><span class="hljs-params">(Integer createdBy)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.createdBy = createdBy;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> Date <span class="hljs-title">getCreationDate</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> creationDate;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCreationDate</span><span class="hljs-params">(Date creationDate)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.creationDate = creationDate;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getModifyBy</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> modifyBy;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setModifyBy</span><span class="hljs-params">(Integer modifyBy)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.modifyBy = modifyBy;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> Date <span class="hljs-title">getModifyDate</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> modifyDate;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setModifyDate</span><span class="hljs-params">(Date modifyDate)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.modifyDate = modifyDate;<br>	&#125;<br>	<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//Provider类</span><br><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Provider</span> </span>&#123;<br>	<br>	<span class="hljs-keyword">private</span> Integer id;   <span class="hljs-comment">//id</span><br>	<span class="hljs-keyword">private</span> String proCode; <span class="hljs-comment">//供应商编码</span><br>	<span class="hljs-keyword">private</span> String proName; <span class="hljs-comment">//供应商名称</span><br>	<span class="hljs-keyword">private</span> String proDesc; <span class="hljs-comment">//供应商描述</span><br>	<span class="hljs-keyword">private</span> String proContact; <span class="hljs-comment">//供应商联系人</span><br>	<span class="hljs-keyword">private</span> String proPhone; <span class="hljs-comment">//供应商电话</span><br>	<span class="hljs-keyword">private</span> String proAddress; <span class="hljs-comment">//供应商地址</span><br>	<span class="hljs-keyword">private</span> String proFax; <span class="hljs-comment">//供应商传真</span><br>	<span class="hljs-keyword">private</span> Integer createdBy; <span class="hljs-comment">//创建者</span><br>	<span class="hljs-keyword">private</span> Date creationDate; <span class="hljs-comment">//创建时间</span><br>	<span class="hljs-keyword">private</span> Integer modifyBy; <span class="hljs-comment">//更新者</span><br>	<span class="hljs-keyword">private</span> Date modifyDate;<span class="hljs-comment">//更新时间</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getId</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> id;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setId</span><span class="hljs-params">(Integer id)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.id = id;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getProCode</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> proCode;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProCode</span><span class="hljs-params">(String proCode)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.proCode = proCode;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getProName</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> proName;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProName</span><span class="hljs-params">(String proName)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.proName = proName;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getProDesc</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> proDesc;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProDesc</span><span class="hljs-params">(String proDesc)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.proDesc = proDesc;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getProContact</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> proContact;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProContact</span><span class="hljs-params">(String proContact)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.proContact = proContact;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getProPhone</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> proPhone;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProPhone</span><span class="hljs-params">(String proPhone)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.proPhone = proPhone;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getProAddress</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> proAddress;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProAddress</span><span class="hljs-params">(String proAddress)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.proAddress = proAddress;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getProFax</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> proFax;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProFax</span><span class="hljs-params">(String proFax)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.proFax = proFax;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getCreatedBy</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> createdBy;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCreatedBy</span><span class="hljs-params">(Integer createdBy)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.createdBy = createdBy;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> Date <span class="hljs-title">getCreationDate</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> creationDate;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCreationDate</span><span class="hljs-params">(Date creationDate)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.creationDate = creationDate;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getModifyBy</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> modifyBy;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setModifyBy</span><span class="hljs-params">(Integer modifyBy)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.modifyBy = modifyBy;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> Date <span class="hljs-title">getModifyDate</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> modifyDate;<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setModifyDate</span><span class="hljs-params">(Date modifyDate)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.modifyDate = modifyDate;<br>	&#125;<br>	<br>	<br>&#125;<br></code></pre></td></tr></table></figure><ol start="7"><li><p>编写基础公共类</p><ol><li><p>数据库配置文件 db.properties</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">driver</span>=<span class="hljs-string">com.mysql.jdbc.Driver</span><br><span class="hljs-attr">url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=GMT</span><br><span class="hljs-attr">user</span>=<span class="hljs-string">root</span><br><span class="hljs-attr">password</span>=<span class="hljs-string">zuiweizhiming666</span><br></code></pre></td></tr></table></figure></li><li><p>编写操作数据库的公共类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.sql.*;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-comment">// 操作数据库的公共类</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BaseDao</span> </span>&#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String driver;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String url;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String username;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String password;<br><br>    <span class="hljs-comment">// 静态代码块，类加载的时候就初始化了</span><br>    <span class="hljs-keyword">static</span> &#123;<br>        Properties properties = <span class="hljs-keyword">new</span> Properties();<br>        <span class="hljs-comment">// 通过类加载器读取对应的资源</span><br>        InputStream is = BaseDao.class.getClassLoader().getResourceAsStream(<span class="hljs-string">&quot;db.properties&quot;</span>);<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            properties.load(is);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br><br>        driver = properties.getProperty(<span class="hljs-string">&quot;driver&quot;</span>);<br>        url= properties.getProperty(<span class="hljs-string">&quot;url&quot;</span>);<br>        username = properties.getProperty(<span class="hljs-string">&quot;username&quot;</span>);<br>        password = properties.getProperty(<span class="hljs-string">&quot;password&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// 获取数据库的连接</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Connection <span class="hljs-title">getConnection</span><span class="hljs-params">()</span> </span>&#123;<br><br>        Connection connection = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            Class.forName(driver);<br>            connection = DriverManager.getConnection(url, username, password);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">return</span> connection;<br><br>    &#125;<br><br>    <span class="hljs-comment">// 编写查询公共方法</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ResultSet <span class="hljs-title">executeSelect</span><span class="hljs-params">(Connection connection,String sql,Object[] params,PreparedStatement preparedStatement)</span> <span class="hljs-keyword">throws</span> SQLException </span>&#123;<br><br>        <span class="hljs-comment">// 预编译的sql，灾后main直接执行就可以了</span><br>        preparedStatement = connection.prepareStatement(sql);<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; params.length; i++) &#123;<br>            <span class="hljs-comment">//setObject，占位符从1开始，但是我们的数组是从0开始！</span><br>            preparedStatement.setObject(i+<span class="hljs-number">1</span>,params[i]);<br>        &#125;<br><br>        ResultSet resultSet = preparedStatement.executeQuery();<br>        <span class="hljs-keyword">return</span> resultSet;<br>    &#125;<br><br>    <span class="hljs-comment">// 编写增删改公共方法</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">executeUpdate</span><span class="hljs-params">(Connection connection,String sql,Object[] params,PreparedStatement preparedStatement)</span> <span class="hljs-keyword">throws</span> SQLException </span>&#123;<br><br>        preparedStatement = connection.prepareStatement(sql);<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; params.length; i++) &#123;<br>            <span class="hljs-comment">//setObject，占位符从1开始，但是我们的数组是从0开始！</span><br>            preparedStatement.setObject(i+<span class="hljs-number">1</span>,params[i]);<br>        &#125;<br><br>        <span class="hljs-keyword">int</span> updateRows = preparedStatement.executeUpdate();<br>        <span class="hljs-keyword">return</span> updateRows;<br>    &#125;<br><br>    <span class="hljs-comment">// 释放资源</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">closeResources</span><span class="hljs-params">(Connection connection, PreparedStatement preparedStatement, ResultSet resultSet)</span> </span>&#123;<br><br>        <span class="hljs-keyword">boolean</span> flag = <span class="hljs-keyword">true</span>;<br><br>        <span class="hljs-keyword">if</span> (resultSet != <span class="hljs-keyword">null</span>) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                resultSet.close();<br>                <span class="hljs-comment">// GC回收</span><br>                resultSet = <span class="hljs-keyword">null</span>;<br>            &#125; <span class="hljs-keyword">catch</span> (SQLException throwables) &#123;<br>                throwables.printStackTrace();<br>                flag = <span class="hljs-keyword">false</span>;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (preparedStatement != <span class="hljs-keyword">null</span>) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                preparedStatement.close();<br>                <span class="hljs-comment">// GC回收</span><br>                preparedStatement = <span class="hljs-keyword">null</span>;<br>            &#125; <span class="hljs-keyword">catch</span> (SQLException throwables) &#123;<br>                throwables.printStackTrace();<br>                flag = <span class="hljs-keyword">false</span>;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (connection != <span class="hljs-keyword">null</span>) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                connection.close();<br>                <span class="hljs-comment">// GC回收</span><br>                connection = <span class="hljs-keyword">null</span>;<br>            &#125; <span class="hljs-keyword">catch</span> (SQLException throwables) &#123;<br>                throwables.printStackTrace();<br>                flag = <span class="hljs-keyword">false</span>;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> flag;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>编写字符编码过滤器</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CharacterEncodingFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Filter</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">(FilterConfig filterConfig)</span> <span class="hljs-keyword">throws</span> ServletException </span>&#123;<br><br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doFilter</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException </span>&#123;<br><br>        servletRequest.setCharacterEncoding(<span class="hljs-string">&quot;utf-8&quot;</span>);<br>        servletResponse.setCharacterEncoding(<span class="hljs-string">&quot;utf-8&quot;</span>);<br><br>        filterChain.doFilter(servletRequest, servletResponse);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span> </span>&#123;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol></li><li><p>导入静态资源</p></li></ol><h3 id="登录功能实现"><a href="#登录功能实现" class="headerlink" title="登录功能实现"></a>登录功能实现</h3><p><img src="/posts/2020/12/31/%E8%B6%85%E5%B8%82%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-JSP%E7%89%88%E6%9C%AC/login_process.png" srcset="/img/loading.gif" alt="登录功能流程图"></p><ol><li><p>编写前端页面</p></li><li><p>设置首页</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--设置欢迎页面--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">welcome-file-list</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">welcome-file</span>&gt;</span>login.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">welcome-file</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">welcome-file-list</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>编写dao层登录用户登录的接口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">getLoginUser</span><span class="hljs-params">(Connection connection,String userCode)</span> <span class="hljs-keyword">throws</span> SQLException</span>;<br></code></pre></td></tr></table></figure></li><li><p>编写dao接口的实现类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserDao</span></span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">getLoginUser</span><span class="hljs-params">(Connection connection, String userCode)</span> <span class="hljs-keyword">throws</span> SQLException </span>&#123;<br><br>        PreparedStatement pstm = <span class="hljs-keyword">null</span>;<br>        ResultSet rs = <span class="hljs-keyword">null</span>;<br>        User user = <span class="hljs-keyword">null</span>;<br><br>        <span class="hljs-keyword">if</span> (connection == <span class="hljs-keyword">null</span>) &#123;<br>        String sql = <span class="hljs-string">&quot;select * from smbms_user where userCode = ?&quot;</span>;<br>        Object[] params = &#123;userCode&#125;;<br><br><br>            BaseDao.executeSelect(connection,pstm, rs,sql,params);<br><br>            <span class="hljs-keyword">if</span> (rs.next()) &#123;<br>                user = <span class="hljs-keyword">new</span> User();<br>                user.setId(rs.getInt(<span class="hljs-string">&quot;id&quot;</span>));<br>                user.setUserCode(rs.getString(<span class="hljs-string">&quot;userCode&quot;</span>));<br>                user.setUserName(rs.getString(<span class="hljs-string">&quot;userName&quot;</span>));<br>                user.setUserPassword(rs.getString(<span class="hljs-string">&quot;userPassword&quot;</span>));<br>                user.setGender(rs.getInt(<span class="hljs-string">&quot;gender&quot;</span>));<br>                user.setBirthday(rs.getDate(<span class="hljs-string">&quot;birthday&quot;</span>));<br>                user.setPhone(rs.getString(<span class="hljs-string">&quot;phone&quot;</span>));<br>                user.setAddress(rs.getString(<span class="hljs-string">&quot;address&quot;</span>));<br>                user.setUserRole(rs.getInt(<span class="hljs-string">&quot;userRole&quot;</span>));<br>                user.setCreatedBy(rs.getInt(<span class="hljs-string">&quot;createdBy&quot;</span>));<br>                user.setCreationDate(rs.getTimestamp(<span class="hljs-string">&quot;creationDate&quot;</span>));<br>                user.setModifyBy(rs.getInt(<span class="hljs-string">&quot;modifyBy&quot;</span>));<br>                user.setModifyDate(rs.getTimestamp(<span class="hljs-string">&quot;modifyDate&quot;</span>));<br>            &#125;<br>            BaseDao.closeResources(<span class="hljs-keyword">null</span>,pstm,rs);<br><br>        &#125;<br><br>        <span class="hljs-keyword">return</span> user;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>业务层接口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 用户登录</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">login</span><span class="hljs-params">(String userCode,String password)</span></span><br></code></pre></td></tr></table></figure></li><li><p>业务层实现类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span></span>&#123;<br><br>    <span class="hljs-comment">// 业务层都会调用dao层，所以我们要引入dao层</span><br>    <span class="hljs-keyword">private</span> UserDao userDao;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserServiceImpl</span><span class="hljs-params">()</span> </span>&#123;<br>        userDao = <span class="hljs-keyword">new</span> UserDaoImpl();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">login</span><span class="hljs-params">(String userCode, String password)</span> </span>&#123;<br>        Connection connection = <span class="hljs-keyword">null</span>;<br>        User user = <span class="hljs-keyword">null</span>;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = BaseDao.getConnection();<br>            <span class="hljs-comment">// 通过业务层调用对应的具体的数据库操作</span><br>            user = userDao.getLoginUser(connection, userCode);<br><br>        &#125; <span class="hljs-keyword">catch</span> (SQLException throwables) &#123;<br>            throwables.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            BaseDao.closeResources(connection,<span class="hljs-keyword">null</span>,<span class="hljs-keyword">null</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> user;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><ol start="7"><li><p>编写Servlet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    <span class="hljs-comment">//Servlet：控制层，调用业务层代码</span><br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br><br>        System.out.println(<span class="hljs-string">&quot;LoginServlet--start...&quot;</span>);<br><br>        <span class="hljs-comment">// 获取用户名和密码</span><br>        String userCode = req.getParameter(<span class="hljs-string">&quot;userCode&quot;</span>);<br>        String userPassword = req.getParameter(<span class="hljs-string">&quot;userPassword&quot;</span>);<br><br>        <span class="hljs-comment">// 和数据库中的密码进行对比，调用业务层</span><br>        UserServiceImpl userService = <span class="hljs-keyword">new</span> UserServiceImpl();<br>        User user = userService.login(userCode, userPassword);<span class="hljs-comment">// 这里已经把登录的人查了出来</span><br><br>        <span class="hljs-keyword">if</span> (user != <span class="hljs-keyword">null</span>) &#123; <span class="hljs-comment">// 查有此人，可以登录</span><br>            <span class="hljs-comment">// 将用户的信息放到Session中</span><br>            req.getSession().setAttribute(Constant.USER_SESSION,user);<br>            <span class="hljs-comment">// 跳转到主页</span><br>            resp.sendRedirect(req.getContextPath() + <span class="hljs-string">&quot;/jsp/frame.jsp&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">// 查无此人，无法登录</span><br>            <span class="hljs-comment">//转发回登录页面,顺带提示它，用户名或者密码不正确</span><br>            req.setAttribute(<span class="hljs-string">&quot;error&quot;</span>,<span class="hljs-string">&quot;用户名或密码不正确&quot;</span>);<br>            req.getRequestDispatcher(<span class="hljs-string">&quot;login.jsp&quot;</span>).forward(req,resp);<br>        &#125;<br><br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-keyword">super</span>.doPost(req, resp);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><ol start="8"><li><p>注册Servlet</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>LoginServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.atrox.servlet.LoginServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>LoginServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>.login.do<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ol><ol start="9"><li>测试访问，确保以上共嗯那个成功</li></ol><h3 id="登录功能优化"><a href="#登录功能优化" class="headerlink" title="登录功能优化"></a>登录功能优化</h3><p>注销功能：</p><p>思路：移除Session，返回登录页面</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-comment">// 移除用户的Session</span><br>        req.getSession().removeAttribute(Constant.USER_SESSION);<br>        resp.sendRedirect(<span class="hljs-string">&quot;login.jsp&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>注册xml：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>LogoutServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.atrox.servlet.LogoutServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>LogoutServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/jsp/logout.do<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>登录拦截优化</strong></p><p>编写一个过滤器，并注册</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SysFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Filter</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">(FilterConfig filterConfig)</span> <span class="hljs-keyword">throws</span> ServletException </span>&#123;<br><br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doFilter</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException </span>&#123;<br><br>        HttpServletRequest request = (HttpServletRequest) servletRequest;<br>        HttpServletResponse response = (HttpServletResponse) servletResponse;<br><br>        <span class="hljs-comment">// 过滤器，从Session中获取用户</span><br>        User user = (User) request.getSession().getAttribute(Constant.USER_SESSION);<br><br>        <span class="hljs-keyword">if</span> (user == <span class="hljs-keyword">null</span>) &#123; <span class="hljs-comment">// 已经被移除或者注销了，或者未登录</span><br>            response.sendRedirect(<span class="hljs-string">&quot;error.jsp&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            filterChain.doFilter(servletRequest,servletResponse);<br>        &#125;<br><br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span> </span>&#123;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="密码修改"><a href="#密码修改" class="headerlink" title="密码修改"></a>密码修改</h3><ol><li><p>导入前端素材</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsp">&lt;li&gt;&lt;a href=&quot;$&#123;pageContext.request.contextPath &#125;/jsp/pwdmodify.jsp&quot;&gt;密码修改&lt;/a&gt;&lt;/li&gt;<br></code></pre></td></tr></table></figure></li><li><p>userDao接口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 修改当前用户密码</span><br> <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">updatePwd</span><span class="hljs-params">(Connection connection,<span class="hljs-keyword">int</span> id,<span class="hljs-keyword">int</span> password)</span> <span class="hljs-keyword">throws</span> SQLException</span>;<br></code></pre></td></tr></table></figure></li><li><p>userDao接口实现类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 修改当前用户密码</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">updatePwd</span><span class="hljs-params">(Connection connection, <span class="hljs-keyword">int</span> id, <span class="hljs-keyword">int</span> password)</span> <span class="hljs-keyword">throws</span> SQLException </span>&#123;<br><br>    PreparedStatement pstm = <span class="hljs-keyword">null</span>;<br>    <span class="hljs-keyword">int</span> updateRows = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">if</span> (connection != <span class="hljs-keyword">null</span>) &#123;<br>        String sql = <span class="hljs-string">&quot;update smbms_user set userPassword = ? where id = ?&quot;</span>;<br>        Object params[] = &#123;password,id&#125;;<br>        updateRows = BaseDao.executeUpdate(connection, pstm, sql, params);<br><br>        BaseDao.closeResources(connection,pstm,<span class="hljs-keyword">null</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> updateRows;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>UserService层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 根据用户ID修改密码</span><br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">updatePwd</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id,<span class="hljs-keyword">int</span> pwd)</span></span>;<br></code></pre></td></tr></table></figure></li><li><p>UserService实现类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">updatePwd</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id, <span class="hljs-keyword">int</span> pwd)</span> </span>&#123;<br>   <br>      Connection connection = <span class="hljs-keyword">null</span>;<br>      connection = BaseDao.getConnection();<br>   <br>      <span class="hljs-keyword">boolean</span> flag = <span class="hljs-keyword">false</span>;<br>   <br>      <span class="hljs-comment">// 修改密码</span><br>      <span class="hljs-keyword">try</span> &#123;<br>          <span class="hljs-keyword">if</span> (userDao.updatePwd(connection,id,pwd) &gt; <span class="hljs-number">0</span>) &#123;<br>              flag = <span class="hljs-keyword">true</span>;<br>          &#125;<br>      &#125; <span class="hljs-keyword">catch</span> (SQLException throwables) &#123;<br>          throwables.printStackTrace();<br>      &#125; <span class="hljs-keyword">finally</span> &#123;<br>          BaseDao.closeResources(connection,<span class="hljs-keyword">null</span>,<span class="hljs-keyword">null</span>);<br>      &#125;<br>      <span class="hljs-keyword">return</span> flag;<br>   <br>  &#125;<br></code></pre></td></tr></table></figure></li><li><p>记得实现复用，需要提取出方法！</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>    String method = req.getParameter(<span class="hljs-string">&quot;method&quot;</span>);<br>    <span class="hljs-keyword">if</span> (method.equals(<span class="hljs-string">&quot;savepwd&quot;</span>) &amp;&amp; method != <span class="hljs-keyword">null</span>)) &#123;<br>        <span class="hljs-keyword">this</span>.updatePwd(req,resp);<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">updatePwd</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>    <span class="hljs-comment">// 从Session里面拿ID;</span><br>    Object o = req.getSession().getAttribute(Constant.USER_SESSION);<br>    <span class="hljs-comment">// 拿表单提交的参数</span><br>    String newpassword = req.getParameter(<span class="hljs-string">&quot;newpassword&quot;</span>);<br><br>    <span class="hljs-keyword">boolean</span> flag = <span class="hljs-keyword">false</span>;<br><br>    <span class="hljs-keyword">if</span> (o != <span class="hljs-keyword">null</span> &amp;&amp; !StringUtils.isNullOrEmpty(newpassword)) &#123;<br>        UserService userService = <span class="hljs-keyword">new</span> UserServiceImpl();<br>        flag = userService.updatePwd(((User) o).getId(), newpassword);<br>        <span class="hljs-keyword">if</span> (flag) &#123;<br>            req.setAttribute(<span class="hljs-string">&quot;message&quot;</span>,<span class="hljs-string">&quot;修改密码成功，请退出，使用新密码登录&quot;</span>);<br>            <span class="hljs-comment">// 密码修改成功，移除当前Session</span><br>            req.getSession().removeAttribute(Constant.USER_SESSION);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            req.setAttribute(<span class="hljs-string">&quot;message&quot;</span>,<span class="hljs-string">&quot;密码修改失败&quot;</span>);<br><br>        &#125;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        req.setAttribute(<span class="hljs-string">&quot;message&quot;</span>,<span class="hljs-string">&quot;新密码有问题&quot;</span>);<br>    &#125;<br><br>    req.getRequestDispatcher(req.getContextPath() + <span class="hljs-string">&quot;/jsp/pwdmodify.jsp&quot;</span>).forward(req,resp);<br><br>&#125;<br></code></pre></td></tr></table></figure><ol start="8"><li>注册Servlet</li></ol><p><strong>优化密码使用Ajax</strong></p><ol><li><p>阿里巴巴的fastjson</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/fastjson --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>fastjson<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.75<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>后台代码修改(旧密码验证)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 验证旧密码,session中有用户的密码</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">pwdModify</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> </span>&#123;<br><br>        Object o = req.getSession().getAttribute(Constant.USER_SESSION);<br>        String oldpassword = req.getParameter(<span class="hljs-string">&quot;oldpassword&quot;</span>);<br><br>        <span class="hljs-comment">// 万能的Map:结果集</span><br>        HashMap&lt;String, String&gt; resultMap = <span class="hljs-keyword">new</span> HashMap&lt;String, String&gt;();<br>        <span class="hljs-keyword">if</span> (o == <span class="hljs-keyword">null</span>) &#123; <span class="hljs-comment">// Session失效了，session过期了</span><br>            resultMap.put(<span class="hljs-string">&quot;result&quot;</span>,<span class="hljs-string">&quot;sessionError&quot;</span>);<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (StringUtils.isNullOrEmpty(oldpassword)) &#123; <span class="hljs-comment">// 输入的密码为空</span><br>            resultMap.put(<span class="hljs-string">&quot;result&quot;</span>,<span class="hljs-string">&quot;error&quot;</span>);<br>        &#125;<span class="hljs-keyword">else</span> &#123;<br>            String userPassword = ((User) o).getUserPassword(); <span class="hljs-comment">//Session中用户的密码</span><br>            <span class="hljs-keyword">if</span> (oldpassword.equals(userPassword)) &#123;<br>                resultMap.put(<span class="hljs-string">&quot;result&quot;</span>,<span class="hljs-string">&quot;true&quot;</span>);<br>            &#125;<span class="hljs-keyword">else</span> &#123;<br>                System.out.println(oldpassword);<br>                System.out.println(userPassword);<br>                resultMap.put(<span class="hljs-string">&quot;result&quot;</span>,<span class="hljs-string">&quot;false&quot;</span>);<br>            &#125;<br>        &#125;<br><br>        PrintWriter writer = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            resp.setContentType(<span class="hljs-string">&quot;application/json&quot;</span>);<br>            writer = resp.getWriter();<br>            <span class="hljs-comment">// JSONArray 阿里巴巴的JSON工具类，转换格式</span><br>            <span class="hljs-comment">/*</span><br><span class="hljs-comment">            resultMap = [&quot;result&quot;:&quot;sessionError&quot;,&quot;result&quot;:&quot;true&quot;]</span><br><span class="hljs-comment">            Json格式 = &#123;key：value&#125;</span><br><span class="hljs-comment">             */</span><br>            writer.write(JSONArray.toJSONString(resultMap));<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            writer.flush();<br>            writer.close();<br>        &#125;<br><br>    &#125;<br></code></pre></td></tr></table></figure></li></ol><h3 id="用户管理实现"><a href="#用户管理实现" class="headerlink" title="用户管理实现"></a>用户管理实现</h3><p>思路：</p><p><img src="/posts/2020/12/31/%E8%B6%85%E5%B8%82%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-JSP%E7%89%88%E6%9C%AC/user_manage.png" srcset="/img/loading.gif" alt="用户管理流程"></p><ol><li><p>导入分页的工具类</p></li><li><p>用户列表页面导入</p><ul><li><blockquote><p>userlist.jsp</p></blockquote></li></ul></li></ol><h4 id="1-获取用户数量"><a href="#1-获取用户数量" class="headerlink" title="1. 获取用户数量"></a>1. 获取用户数量</h4><ol><li><p>UserDao</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 根据用户名或角色查询用户数量</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getUserCount</span><span class="hljs-params">(Connection connection,String username, <span class="hljs-keyword">int</span> userRole)</span> <span class="hljs-keyword">throws</span> SQLException</span>;<br></code></pre></td></tr></table></figure></li><li><p>UserDaoImpl</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 根据用户名或角色查询用户数量 </span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getUserCount</span><span class="hljs-params">(Connection connection,String username, <span class="hljs-keyword">int</span> userRole)</span> <span class="hljs-keyword">throws</span> SQLException </span>&#123;<br><br>        PreparedStatement preparedStatement = <span class="hljs-keyword">null</span>;<br>        ResultSet rs = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">int</span> count = <span class="hljs-number">0</span>;<br><br>        <span class="hljs-keyword">if</span> (connection != <span class="hljs-keyword">null</span>) &#123;<br>            StringBuffer sql = <span class="hljs-keyword">new</span> StringBuffer();<br>            sql.append(<span class="hljs-string">&quot;select count(1) as count from smbms_user u,smbms_role r where u.userRole = r.id&quot;</span>);<br><br>            ArrayList&lt;Object&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;Object&gt;();<span class="hljs-comment">// 存放我们的参数</span><br><br>            <span class="hljs-keyword">if</span> (!StringUtils.isNullOrEmpty(username)) &#123;<br>                sql.append(<span class="hljs-string">&quot; and u.userName like ?&quot;</span>);<br>                list.add(<span class="hljs-string">&quot;%&quot;</span>+username+<span class="hljs-string">&quot;%&quot;</span>); <span class="hljs-comment">// index:0</span><br>            &#125;<br><br>            <span class="hljs-keyword">if</span> (userRole &gt; <span class="hljs-number">0</span>) &#123;<br>                sql.append(<span class="hljs-string">&quot; and u.userRole = ?&quot;</span>);<br>                list.add(userRole); <span class="hljs-comment">// index:1</span><br>            &#125;<br><br>            <span class="hljs-comment">// 怎么把list转换为数组</span><br>            Object[] params = list.toArray();<br>            System.out.println(<span class="hljs-string">&quot;UserDaoImpl-&gt;getUserCount &quot;</span>+sql.toString()); <span class="hljs-comment">// 输出最后完整的SQL语句</span><br>            rs = BaseDao.executeSelect(connection, preparedStatement, rs, sql.toString(), params);<br><br>            <span class="hljs-keyword">if</span> (rs.next()) &#123;<br>                count = rs.getInt(<span class="hljs-string">&quot;count&quot;</span>);<span class="hljs-comment">// 从结果集中获取最终数量</span><br><br>            &#125;<br><br>            BaseDao.closeResources(connection,preparedStatement,rs);<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> count;<br>    &#125;<br></code></pre></td></tr></table></figure></li><li><p>UserService</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 查询记录数</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getUserCount</span><span class="hljs-params">(String username,<span class="hljs-keyword">int</span> userRole)</span></span>;<br></code></pre></td></tr></table></figure></li></ol><ol start="4"><li><p>UserServiceImpl</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getUserCount</span><span class="hljs-params">(String username, <span class="hljs-keyword">int</span> userRole)</span> </span>&#123;<br><br>        Connection connection = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">int</span> count = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = BaseDao.getConnection();<br>            count = userDao.getUserCount(connection, username, userRole);<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException throwables) &#123;<br>            throwables.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            BaseDao.closeResources(connection,<span class="hljs-keyword">null</span>,<span class="hljs-keyword">null</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> count;<br><br>    &#125;<br></code></pre></td></tr></table></figure></li></ol><h4 id="2-获取用户列表"><a href="#2-获取用户列表" class="headerlink" title="2.获取用户列表"></a>2.获取用户列表</h4><ol><li><p>UserDao</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 根据条件查询获取用户列表</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">getUserList</span><span class="hljs-params">(Connection connection, String userName, <span class="hljs-keyword">int</span> userRole, <span class="hljs-keyword">int</span> currentPageNo, <span class="hljs-keyword">int</span> pageSize)</span><span class="hljs-keyword">throws</span> Exception</span>;<br></code></pre></td></tr></table></figure></li></ol><ol start="2"><li><p>UserDaoImpl</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">getUserList</span><span class="hljs-params">(Connection connection, String userName, <span class="hljs-keyword">int</span> userRole, <span class="hljs-keyword">int</span> currentPageNo, <span class="hljs-keyword">int</span> pageSize)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>        <span class="hljs-comment">// TODO Auto-generated method stub</span><br>        PreparedStatement pstm = <span class="hljs-keyword">null</span>;<br>        ResultSet rs = <span class="hljs-keyword">null</span>;<br>        List&lt;User&gt; userList = <span class="hljs-keyword">new</span> ArrayList&lt;User&gt;();<br>        <span class="hljs-keyword">if</span>(connection != <span class="hljs-keyword">null</span>)&#123;<br>            StringBuffer sql = <span class="hljs-keyword">new</span> StringBuffer();<br>            sql.append(<span class="hljs-string">&quot;select u.*,r.roleName as userRoleName from smbms_user u,smbms_role r where u.userRole = r.id&quot;</span>);<br>            List&lt;Object&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;Object&gt;();<br>            <span class="hljs-keyword">if</span>(!StringUtils.isNullOrEmpty(userName))&#123;<br>                sql.append(<span class="hljs-string">&quot; and u.userName like ?&quot;</span>);<br>                list.add(<span class="hljs-string">&quot;%&quot;</span>+userName+<span class="hljs-string">&quot;%&quot;</span>);<br>            &#125;<br>            <span class="hljs-keyword">if</span>(userRole &gt; <span class="hljs-number">0</span>)&#123;<br>                sql.append(<span class="hljs-string">&quot; and u.userRole = ?&quot;</span>);<br>                list.add(userRole);<br>            &#125;<br>            sql.append(<span class="hljs-string">&quot; order by creationDate DESC limit ?,?&quot;</span>);<br>            currentPageNo = (currentPageNo-<span class="hljs-number">1</span>)*pageSize;<br>            list.add(currentPageNo);<br>            list.add(pageSize);<br><br>            Object[] params = list.toArray();<br>            System.out.println(<span class="hljs-string">&quot;sql ----&gt; &quot;</span> + sql.toString());<br>            rs = BaseDao.executeSelect(connection, pstm, rs, sql.toString(), params);<br>            <span class="hljs-keyword">while</span>(rs.next())&#123;<br>                User _user = <span class="hljs-keyword">new</span> User();<br>                _user.setId(rs.getInt(<span class="hljs-string">&quot;id&quot;</span>));<br>                _user.setUserCode(rs.getString(<span class="hljs-string">&quot;userCode&quot;</span>));<br>                _user.setUserName(rs.getString(<span class="hljs-string">&quot;userName&quot;</span>));<br>                _user.setGender(rs.getInt(<span class="hljs-string">&quot;gender&quot;</span>));<br>                _user.setBirthday(rs.getDate(<span class="hljs-string">&quot;birthday&quot;</span>));<br>                _user.setPhone(rs.getString(<span class="hljs-string">&quot;phone&quot;</span>));<br>                _user.setUserRole(rs.getInt(<span class="hljs-string">&quot;userRole&quot;</span>));<br>                _user.setUserRoleName(rs.getString(<span class="hljs-string">&quot;userRoleName&quot;</span>));<br>                userList.add(_user);<br>            &#125;<br>            BaseDao.closeResources(<span class="hljs-keyword">null</span>, pstm, rs);<br>        &#125;<br>        <span class="hljs-keyword">return</span> userList;<br>    &#125;<br></code></pre></td></tr></table></figure></li></ol><ol start="3"><li><p>UserService</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 根据条件查询用户列表</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">getUserList</span><span class="hljs-params">(String queryUserName, <span class="hljs-keyword">int</span> queryUserRole, <span class="hljs-keyword">int</span> currentPageNo, <span class="hljs-keyword">int</span> pageSize)</span></span>;<br></code></pre></td></tr></table></figure></li></ol><ol start="4"><li><p>UserServiceImpl</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">getUserList</span><span class="hljs-params">(String queryUserName, <span class="hljs-keyword">int</span> queryUserRole, <span class="hljs-keyword">int</span> currentPageNo, <span class="hljs-keyword">int</span> pageSize)</span> </span>&#123;<br>        Connection connection = <span class="hljs-keyword">null</span>;<br>        List&lt;User&gt; userList = <span class="hljs-keyword">null</span>;<br>        System.out.println(<span class="hljs-string">&quot;queryUserName ---- &gt; &quot;</span> + queryUserName);<br>        System.out.println(<span class="hljs-string">&quot;queryUserRole ---- &gt; &quot;</span> + queryUserRole);<br>        System.out.println(<span class="hljs-string">&quot;currentPageNo ---- &gt; &quot;</span> + currentPageNo);<br>        System.out.println(<span class="hljs-string">&quot;pageSize ---- &gt; &quot;</span> + pageSize);<br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = BaseDao.getConnection();<br>            userList = userDao.getUserList(connection, queryUserName,queryUserRole,currentPageNo,pageSize);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            <span class="hljs-comment">// TODO Auto-generated catch block</span><br>            e.printStackTrace();<br>        &#125;<span class="hljs-keyword">finally</span>&#123;<br>            BaseDao.closeResources(connection, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> userList;<br>    &#125;<br></code></pre></td></tr></table></figure></li></ol><h4 id="3-获取角色操作"><a href="#3-获取角色操作" class="headerlink" title="3.获取角色操作"></a>3.获取角色操作</h4><p>为了我们职责统一，可以把角色的操作单独放在一个包中，和pojo类对应</p><p>RoleDao</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 获取角色列表</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Role&gt; <span class="hljs-title">getRoleList</span><span class="hljs-params">(Connection connection)</span> <span class="hljs-keyword">throws</span> SQLException</span>;<br></code></pre></td></tr></table></figure><p>RoleDaoImpl</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 获取角色列表</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Role&gt; <span class="hljs-title">getRoleList</span><span class="hljs-params">(Connection connection)</span> <span class="hljs-keyword">throws</span> SQLException </span>&#123;<br><br>        PreparedStatement pstm = <span class="hljs-keyword">null</span>;<br>        ResultSet rs = <span class="hljs-keyword">null</span>;<br>        ArrayList&lt;Role&gt; roleList = <span class="hljs-keyword">new</span> ArrayList&lt;Role&gt;();<br><br>        <span class="hljs-keyword">if</span> (connection != <span class="hljs-keyword">null</span>) &#123;<br>            String sql = <span class="hljs-string">&quot;select * from smbms_role&quot;</span>;<br>            Object[] params = &#123;&#125;;<br>            rs = BaseDao.executeSelect(connection,pstm,rs,sql,params);<br><br>            <span class="hljs-keyword">while</span> (rs.next()) &#123;<br>                Role _role = <span class="hljs-keyword">new</span> Role();<br>                _role.setId( rs.getInt(<span class="hljs-string">&quot;id&quot;</span>));<br>                _role.setRoleCode(rs.getString(<span class="hljs-string">&quot;roleCode&quot;</span>));<br>                _role.setRoleName(rs.getString(<span class="hljs-string">&quot;roleName&quot;</span>));<br>                roleList.add(_role);<br>            &#125;<br>            BaseDao.closeResources(connection,pstm,rs);<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> roleList;<br>    &#125;<br></code></pre></td></tr></table></figure><p>RoleService</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 获取用户角色列表</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Role&gt; <span class="hljs-title">getRoleList</span><span class="hljs-params">()</span></span>;<br></code></pre></td></tr></table></figure><p>RoleServiceImpl</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Role&gt; <span class="hljs-title">getRoleList</span><span class="hljs-params">()</span> </span>&#123;<br><br>    Connection connection = <span class="hljs-keyword">null</span>;<br>    List&lt;Role&gt; roleList = <span class="hljs-keyword">null</span>;<br>    <span class="hljs-keyword">try</span> &#123;<br>        connection = BaseDao.getConnection();<br>        roleList = roleDao.getRoleList(connection);<br>    &#125; <span class="hljs-keyword">catch</span> (SQLException throwables) &#123;<br>        throwables.printStackTrace();<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        BaseDao.closeResources(connection,<span class="hljs-keyword">null</span>,<span class="hljs-keyword">null</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> roleList;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-用户显示的Servlet"><a href="#4-用户显示的Servlet" class="headerlink" title="4.用户显示的Servlet"></a>4.用户显示的Servlet</h4><ol><li>获取用户前端的数据（查询）</li><li>判断请求是否需要执行，看参数的值判断</li><li>为了实现分页，需要计算出当前页面和总页面，页面大小等</li><li>用户列表展示</li><li>返回前端</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">query</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> </span>&#123;<br><br>        <span class="hljs-comment">// 查询用户列表</span><br>        <span class="hljs-comment">// 从前端获取数据</span><br>        String queryUserName = req.getParameter(<span class="hljs-string">&quot;queryname&quot;</span>);<br>        String temp = req.getParameter(<span class="hljs-string">&quot;queryUserRole&quot;</span>);<br>        String pageIndex = req.getParameter(<span class="hljs-string">&quot;pageIndex&quot;</span>);<br>        <span class="hljs-keyword">int</span> queryUserRole = <span class="hljs-number">0</span>;<br><br>        <span class="hljs-comment">// 获取用户列表</span><br>        UserServiceImpl userService = <span class="hljs-keyword">new</span> UserServiceImpl();<br>        List&lt;User&gt; userList = <span class="hljs-keyword">null</span>;<br><br>        <span class="hljs-comment">// 第一次走这个请求，一定是第一页，页面大小固定</span><br>        <span class="hljs-keyword">int</span> pageSize = <span class="hljs-number">5</span>; <span class="hljs-comment">// 可以把这个写到配置文件中，方便后期修改</span><br>        <span class="hljs-keyword">int</span> currentPageNo = <span class="hljs-number">1</span>;<br><br>        <span class="hljs-keyword">if</span> (queryUserName == <span class="hljs-keyword">null</span>) &#123;<br>            queryUserName = <span class="hljs-string">&quot;&quot;</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (temp != <span class="hljs-keyword">null</span> &amp;&amp; !temp.equals(<span class="hljs-string">&quot;&quot;</span>)) &#123;<br>            queryUserRole = Integer.parseInt(temp); <span class="hljs-comment">//给查询赋值</span><br>        &#125;<br>        <span class="hljs-keyword">if</span> (pageIndex != <span class="hljs-keyword">null</span>) &#123;<br>            currentPageNo = Integer.parseInt(pageIndex);<br>        &#125;<br>        <span class="hljs-comment">// 获取用户的总数(分页：上一页、下一页的情况)</span><br>        <span class="hljs-keyword">int</span> totalCount = userService.getUserCount(queryUserName, queryUserRole);<br>        <span class="hljs-comment">// 总页数支持</span><br>        PageSupport pageSupport = <span class="hljs-keyword">new</span> PageSupport();<br>        pageSupport.setCurrentPageNo(currentPageNo);<br>        pageSupport.setPageSize(pageSize);<br>        pageSupport.setTotalCount(totalCount);<br><br>        <span class="hljs-comment">// 控制首页和尾页</span><br>        <span class="hljs-keyword">int</span> totalPageCount = pageSupport.getTotalPageCount();<br>        <span class="hljs-keyword">if</span> (totalPageCount &lt; <span class="hljs-number">1</span>) &#123; <span class="hljs-comment">// 如果页面要小于1了，就取第一页的列表</span><br>            currentPageNo = <span class="hljs-number">1</span>;<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (currentPageNo &gt; totalPageCount) &#123; <span class="hljs-comment">// 当前页面大于了最后一页</span><br>            currentPageNo = totalPageCount;<br>        &#125;<br><br>        <span class="hljs-comment">// 获取用户列表展示</span><br>        userList = userService.getUserList(queryUserName, queryUserRole, currentPageNo, pageSize);<br>        req.setAttribute(<span class="hljs-string">&quot;userList&quot;</span>,userList);<br><br>        <span class="hljs-comment">// 获取角色列表</span><br>        RoleServiceImpl roleService = <span class="hljs-keyword">new</span> RoleServiceImpl();<br>        List&lt;Role&gt; roleList = roleService.getRoleList();<br>        req.setAttribute(<span class="hljs-string">&quot;roleList&quot;</span>,roleList);<br>        req.setAttribute(<span class="hljs-string">&quot;totalCount&quot;</span>,totalCount);<br>        req.setAttribute(<span class="hljs-string">&quot;currentPageNo&quot;</span>,currentPageNo);<br>        req.setAttribute(<span class="hljs-string">&quot;totalPageCount&quot;</span>,totalPageCount);<br>        req.setAttribute(<span class="hljs-string">&quot;queryUserName&quot;</span>,queryUserName);<br>        req.setAttribute(<span class="hljs-string">&quot;queryUserRole&quot;</span>,queryUserRole);<br><br>        <span class="hljs-comment">// 返回前端</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            req.getRequestDispatcher(<span class="hljs-string">&quot;userlist.jsp&quot;</span>).forward(req,resp);<br>        &#125; <span class="hljs-keyword">catch</span> (ServletException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br><br>    &#125;<br></code></pre></td></tr></table></figure></div><hr><div><div class="post-metas mb-3"><div class="post-meta mr-3"><i class="iconfont icon-category"></i> <a class="hover-with-bg" href="/categories/project/">project</a></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a class="hover-with-bg" href="/tags/jsp/">jsp</a></div></div><p class="note note-warning">本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p><div class="post-prevnext"><article class="post-prev col-6"><a href="/posts/2021/01/02/Spring5%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">Spring5学习笔记</span> <span class="visible-mobile">Previous</span></a></article><article class="post-next col-6"><a href="/posts/2020/12/31/fluid%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/"><span class="hidden-mobile">fluid主题配置</span> <span class="visible-mobile">Next</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article class="comments" id="comments"><div id="gitalk-container"></div><script type="text/javascript">Fluid.utils.waitElementVisible("gitalk-container",(function(){Fluid.utils.createCssLink("/css/gitalk.css"),Fluid.utils.createScript("https://cdn.jsdelivr.net/npm/gitalk@1.7.0/dist/gitalk.min.js",(function(){new Gitalk({clientID:"af550312a411b96c64b9",clientSecret:"f11934265fd18324cb2d9fd605d7d445207a3e52",repo:"gitalk",owner:"AtroxQW",admin:["AtroxQW"],id:"b1a866775ca563d1874eb9a6d610c4be",language:"zh-CN",labels:["Gitalk"],perPage:10,pagerDirection:"last",createIssueManually:!0,distractionFreeMode:!1}).render("gitalk-container")}))}))</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;TOC</p><div class="toc-body" id="toc-body"></div></div></div></div></div><a id="scroll-top-button" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">Search</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">keyword</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer class="text-center mt-5 py-3"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div><div class="statistics"><span id="leancloud-site-pv-container" style="display:none">总访问量 <span id="leancloud-site-pv"></span> 次 </span><span id="leancloud-site-uv-container" style="display:none">总访客数 <span id="leancloud-site-uv"></span> 人</span></div></footer><script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"></script><script src="/js/debouncer.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/lazyload.js"></script><script src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><script defer src="/js/leancloud.js"></script><script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script><script>!function(t,i){(0,Fluid.plugins.typing)(i.getElementById("subtitle").title)}(window,document)</script><script src="/js/local-search.js"></script><script>document.querySelector("#local-search-input").onclick=function(){searchFunc("/local-search.xml","local-search-input","local-search-result"),this.onclick=null}</script><script src="/js/boot.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>